var i2e=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var rWt=i2e((kn,En)=>{function r2e(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function PR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var OM={},s2e={get exports(){return OM},set exports(t){OM=t}},DR={},W={},o2e={get exports(){return W},set exports(t){W=t}},Fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE=Symbol.for("react.element"),a2e=Symbol.for("react.portal"),l2e=Symbol.for("react.fragment"),c2e=Symbol.for("react.strict_mode"),u2e=Symbol.for("react.profiler"),h2e=Symbol.for("react.provider"),d2e=Symbol.for("react.context"),f2e=Symbol.for("react.forward_ref"),p2e=Symbol.for("react.suspense"),m2e=Symbol.for("react.memo"),g2e=Symbol.for("react.lazy"),pY=Symbol.iterator;function v2e(t){return t===null||typeof t!="object"?null:(t=pY&&t[pY]||t["@@iterator"],typeof t=="function"?t:null)}var Vue={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wue=Object.assign,$ue={};function pw(t,e,n){this.props=t,this.context=e,this.refs=$ue,this.updater=n||Vue}pw.prototype.isReactComponent={};pw.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pw.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function que(){}que.prototype=pw.prototype;function bV(t,e,n){this.props=t,this.context=e,this.refs=$ue,this.updater=n||Vue}var wV=bV.prototype=new que;wV.constructor=bV;Wue(wV,pw.prototype);wV.isPureReactComponent=!0;var mY=Array.isArray,Xue=Object.prototype.hasOwnProperty,_V={current:null},Yue={key:!0,ref:!0,__self:!0,__source:!0};function Kue(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Xue.call(e,i)&&!Yue.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:eE,type:t,key:s,ref:o,props:r,_owner:_V.current}}function y2e(t,e){return{$$typeof:eE,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function SV(t){return typeof t=="object"&&t!==null&&t.$$typeof===eE}function x2e(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gY=/\/+/g;function vF(t,e){return typeof t=="object"&&t!==null&&t.key!=null?x2e(""+t.key):e.toString(36)}function cD(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case eE:case a2e:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+vF(o,0):i,mY(r)?(n="",t!=null&&(n=t.replace(gY,"$&/")+"/"),cD(r,e,n,"",function(c){return c})):r!=null&&(SV(r)&&(r=y2e(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(gY,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",mY(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+vF(s,a);o+=cD(s,e,n,l,r)}else if(l=v2e(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+vF(s,a++),o+=cD(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function hT(t,e,n){if(t==null)return t;var i=[],r=0;return cD(t,i,"","",function(s){return e.call(n,s,r++)}),i}function b2e(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ra={current:null},uD={transition:null},w2e={ReactCurrentDispatcher:ra,ReactCurrentBatchConfig:uD,ReactCurrentOwner:_V};Fn.Children={map:hT,forEach:function(t,e,n){hT(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hT(t,function(){e++}),e},toArray:function(t){return hT(t,function(e){return e})||[]},only:function(t){if(!SV(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fn.Component=pw;Fn.Fragment=l2e;Fn.Profiler=u2e;Fn.PureComponent=bV;Fn.StrictMode=c2e;Fn.Suspense=p2e;Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w2e;Fn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Wue({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=_V.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Xue.call(e,l)&&!Yue.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:eE,type:t.type,key:r,ref:s,props:i,_owner:o}};Fn.createContext=function(t){return t={$$typeof:d2e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:h2e,_context:t},t.Consumer=t};Fn.createElement=Kue;Fn.createFactory=function(t){var e=Kue.bind(null,t);return e.type=t,e};Fn.createRef=function(){return{current:null}};Fn.forwardRef=function(t){return{$$typeof:f2e,render:t}};Fn.isValidElement=SV;Fn.lazy=function(t){return{$$typeof:g2e,_payload:{_status:-1,_result:t},_init:b2e}};Fn.memo=function(t,e){return{$$typeof:m2e,type:t,compare:e===void 0?null:e}};Fn.startTransition=function(t){var e=uD.transition;uD.transition={};try{t()}finally{uD.transition=e}};Fn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Fn.useCallback=function(t,e){return ra.current.useCallback(t,e)};Fn.useContext=function(t){return ra.current.useContext(t)};Fn.useDebugValue=function(){};Fn.useDeferredValue=function(t){return ra.current.useDeferredValue(t)};Fn.useEffect=function(t,e){return ra.current.useEffect(t,e)};Fn.useId=function(){return ra.current.useId()};Fn.useImperativeHandle=function(t,e,n){return ra.current.useImperativeHandle(t,e,n)};Fn.useInsertionEffect=function(t,e){return ra.current.useInsertionEffect(t,e)};Fn.useLayoutEffect=function(t,e){return ra.current.useLayoutEffect(t,e)};Fn.useMemo=function(t,e){return ra.current.useMemo(t,e)};Fn.useReducer=function(t,e,n){return ra.current.useReducer(t,e,n)};Fn.useRef=function(t){return ra.current.useRef(t)};Fn.useState=function(t){return ra.current.useState(t)};Fn.useSyncExternalStore=function(t,e,n){return ra.current.useSyncExternalStore(t,e,n)};Fn.useTransition=function(){return ra.current.useTransition()};Fn.version="18.2.0";(function(t){t.exports=Fn})(o2e);const ue=PR(W),LM=r2e({__proto__:null,default:ue},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _2e=W,S2e=Symbol.for("react.element"),A2e=Symbol.for("react.fragment"),M2e=Object.prototype.hasOwnProperty,E2e=_2e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C2e={key:!0,ref:!0,__self:!0,__source:!0};function Jue(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)M2e.call(e,i)&&!C2e.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:S2e,type:t,key:s,ref:o,props:r,_owner:E2e.current}}DR.Fragment=A2e;DR.jsx=Jue;DR.jsxs=Jue;(function(t){t.exports=DR})(s2e);const Qo=OM.Fragment,ne=OM.jsx,et=OM.jsxs;var dU={},Mb={},T2e={get exports(){return Mb},set exports(t){Mb=t}},Sl={},fU={},P2e={get exports(){return fU},set exports(t){fU=t}},Zue={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,V){var U=F.length;F.push(V);e:for(;0<U;){var j=U-1>>>1,z=F[j];if(0<r(z,V))F[j]=V,F[U]=z,U=j;else break e}}function n(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var V=F[0],U=F.pop();if(U!==V){F[0]=U;e:for(var j=0,z=F.length,Y=z>>>1;j<Y;){var J=2*(j+1)-1,K=F[J],X=J+1,te=F[X];if(0>r(K,U))X<z&&0>r(te,K)?(F[j]=te,F[X]=U,j=X):(F[j]=K,F[J]=U,j=J);else if(X<z&&0>r(te,U))F[j]=te,F[X]=U,j=X;else break e}}return V}function r(F,V){var U=F.sortIndex-V.sortIndex;return U!==0?U:F.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,u=null,d=3,f=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(F){for(var V=n(c);V!==null;){if(V.callback===null)i(c);else if(V.startTime<=F)i(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function b(F){if(m=!1,x(F),!p)if(n(l)!==null)p=!0,Z(S);else{var V=n(c);V!==null&&ee(b,V.startTime-F)}}function S(F,V){p=!1,m&&(m=!1,v(M),M=-1),f=!0;var U=d;try{for(x(V),u=n(l);u!==null&&(!(u.expirationTime>V)||F&&!D());){var j=u.callback;if(typeof j=="function"){u.callback=null,d=u.priorityLevel;var z=j(u.expirationTime<=V);V=t.unstable_now(),typeof z=="function"?u.callback=z:u===n(l)&&i(l),x(V)}else i(l);u=n(l)}if(u!==null)var Y=!0;else{var J=n(c);J!==null&&ee(b,J.startTime-V),Y=!1}return Y}finally{u=null,d=U,f=!1}}var A=!1,E=null,M=-1,C=5,T=-1;function D(){return!(t.unstable_now()-T<C)}function L(){if(E!==null){var F=t.unstable_now();T=F;var V=!0;try{V=E(!0,F)}finally{V?I():(A=!1,E=null)}}else A=!1}var I;if(typeof y=="function")I=function(){y(L)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,H=R.port2;R.port1.onmessage=L,I=function(){H.postMessage(null)}}else I=function(){g(L,0)};function Z(F){E=F,A||(A=!0,I())}function ee(F,V){M=g(function(){F(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,Z(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var U=d;d=V;try{return F()}finally{d=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,V){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var U=d;d=F;try{return V()}finally{d=U}},t.unstable_scheduleCallback=function(F,V,U){var j=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?j+U:j):U=j,F){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=U+z,F={id:h++,callback:V,priorityLevel:F,startTime:U,expirationTime:z,sortIndex:-1},U>j?(F.sortIndex=U,e(c,F),n(l)===null&&F===n(c)&&(m?(v(M),M=-1):m=!0,ee(b,U-j))):(F.sortIndex=z,e(l,F),p||f||(p=!0,Z(S))),F},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(F){var V=d;return function(){var U=d;d=V;try{return F.apply(this,arguments)}finally{d=U}}}})(Zue);(function(t){t.exports=Zue})(P2e);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Que=W,xl=fU;function rt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ehe=new Set,RM={};function Iv(t,e){Eb(t,e),Eb(t+"Capture",e)}function Eb(t,e){for(RM[t]=e,t=0;t<e.length;t++)ehe.add(e[t])}var Lf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pU=Object.prototype.hasOwnProperty,D2e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vY={},yY={};function O2e(t){return pU.call(yY,t)?!0:pU.call(vY,t)?!1:D2e.test(t)?yY[t]=!0:(vY[t]=!0,!1)}function L2e(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function R2e(t,e,n,i){if(e===null||typeof e>"u"||L2e(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sa(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var oo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){oo[t]=new sa(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];oo[e]=new sa(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){oo[t]=new sa(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){oo[t]=new sa(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){oo[t]=new sa(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){oo[t]=new sa(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){oo[t]=new sa(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){oo[t]=new sa(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){oo[t]=new sa(t,5,!1,t.toLowerCase(),null,!1,!1)});var AV=/[\-:]([a-z])/g;function MV(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(AV,MV);oo[e]=new sa(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(AV,MV);oo[e]=new sa(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(AV,MV);oo[e]=new sa(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){oo[t]=new sa(t,1,!1,t.toLowerCase(),null,!1,!1)});oo.xlinkHref=new sa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){oo[t]=new sa(t,1,!1,t.toLowerCase(),null,!0,!0)});function EV(t,e,n,i){var r=oo.hasOwnProperty(e)?oo[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(R2e(e,n,r,i)&&(n=null),i||r===null?O2e(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Xf=Que.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dT=Symbol.for("react.element"),cx=Symbol.for("react.portal"),ux=Symbol.for("react.fragment"),CV=Symbol.for("react.strict_mode"),mU=Symbol.for("react.profiler"),the=Symbol.for("react.provider"),nhe=Symbol.for("react.context"),TV=Symbol.for("react.forward_ref"),gU=Symbol.for("react.suspense"),vU=Symbol.for("react.suspense_list"),PV=Symbol.for("react.memo"),Fp=Symbol.for("react.lazy"),ihe=Symbol.for("react.offscreen"),xY=Symbol.iterator;function O_(t){return t===null||typeof t!="object"?null:(t=xY&&t[xY]||t["@@iterator"],typeof t=="function"?t:null)}var vr=Object.assign,yF;function dA(t){if(yF===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yF=e&&e[1]||""}return`
`+yF+t}var xF=!1;function bF(t,e){if(!t||xF)return"";xF=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{xF=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?dA(t):""}function I2e(t){switch(t.tag){case 5:return dA(t.type);case 16:return dA("Lazy");case 13:return dA("Suspense");case 19:return dA("SuspenseList");case 0:case 2:case 15:return t=bF(t.type,!1),t;case 11:return t=bF(t.type.render,!1),t;case 1:return t=bF(t.type,!0),t;default:return""}}function yU(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ux:return"Fragment";case cx:return"Portal";case mU:return"Profiler";case CV:return"StrictMode";case gU:return"Suspense";case vU:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nhe:return(t.displayName||"Context")+".Consumer";case the:return(t._context.displayName||"Context")+".Provider";case TV:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case PV:return e=t.displayName||null,e!==null?e:yU(t.type)||"Memo";case Fp:e=t._payload,t=t._init;try{return yU(t(e))}catch{}}return null}function B2e(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yU(e);case 8:return e===CV?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gm(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rhe(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function k2e(t){var e=rhe(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fT(t){t._valueTracker||(t._valueTracker=k2e(t))}function she(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=rhe(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function aO(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xU(t,e){var n=e.checked;return vr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bY(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Gm(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ohe(t,e){e=e.checked,e!=null&&EV(t,"checked",e,!1)}function bU(t,e){ohe(t,e);var n=Gm(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wU(t,e.type,n):e.hasOwnProperty("defaultValue")&&wU(t,e.type,Gm(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wY(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wU(t,e,n){(e!=="number"||aO(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fA=Array.isArray;function Hx(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Gm(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function _U(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(rt(91));return vr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _Y(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(rt(92));if(fA(n)){if(1<n.length)throw Error(rt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gm(n)}}function ahe(t,e){var n=Gm(e.value),i=Gm(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function SY(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lhe(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function SU(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lhe(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pT,che=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pT=pT||document.createElement("div"),pT.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pT.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function IM(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kA={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F2e=["Webkit","ms","Moz","O"];Object.keys(kA).forEach(function(t){F2e.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kA[e]=kA[t]})});function uhe(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kA.hasOwnProperty(t)&&kA[t]?(""+e).trim():e+"px"}function hhe(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=uhe(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var N2e=vr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function AU(t,e){if(e){if(N2e[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(rt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(rt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(rt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(rt(62))}}function MU(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var EU=null;function DV(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var CU=null,jx=null,Vx=null;function AY(t){if(t=iE(t)){if(typeof CU!="function")throw Error(rt(280));var e=t.stateNode;e&&(e=BR(e),CU(t.stateNode,t.type,e))}}function dhe(t){jx?Vx?Vx.push(t):Vx=[t]:jx=t}function fhe(){if(jx){var t=jx,e=Vx;if(Vx=jx=null,AY(t),e)for(t=0;t<e.length;t++)AY(e[t])}}function phe(t,e){return t(e)}function mhe(){}var wF=!1;function ghe(t,e,n){if(wF)return t(e,n);wF=!0;try{return phe(t,e,n)}finally{wF=!1,(jx!==null||Vx!==null)&&(mhe(),fhe())}}function BM(t,e){var n=t.stateNode;if(n===null)return null;var i=BR(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(rt(231,e,typeof n));return n}var TU=!1;if(Lf)try{var L_={};Object.defineProperty(L_,"passive",{get:function(){TU=!0}}),window.addEventListener("test",L_,L_),window.removeEventListener("test",L_,L_)}catch{TU=!1}function z2e(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var FA=!1,lO=null,cO=!1,PU=null,U2e={onError:function(t){FA=!0,lO=t}};function G2e(t,e,n,i,r,s,o,a,l){FA=!1,lO=null,z2e.apply(U2e,arguments)}function H2e(t,e,n,i,r,s,o,a,l){if(G2e.apply(this,arguments),FA){if(FA){var c=lO;FA=!1,lO=null}else throw Error(rt(198));cO||(cO=!0,PU=c)}}function Bv(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vhe(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function MY(t){if(Bv(t)!==t)throw Error(rt(188))}function j2e(t){var e=t.alternate;if(!e){if(e=Bv(t),e===null)throw Error(rt(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return MY(r),t;if(s===i)return MY(r),e;s=s.sibling}throw Error(rt(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(rt(189))}}if(n.alternate!==i)throw Error(rt(190))}if(n.tag!==3)throw Error(rt(188));return n.stateNode.current===n?t:e}function yhe(t){return t=j2e(t),t!==null?xhe(t):null}function xhe(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xhe(t);if(e!==null)return e;t=t.sibling}return null}var bhe=xl.unstable_scheduleCallback,EY=xl.unstable_cancelCallback,V2e=xl.unstable_shouldYield,W2e=xl.unstable_requestPaint,Hr=xl.unstable_now,$2e=xl.unstable_getCurrentPriorityLevel,OV=xl.unstable_ImmediatePriority,whe=xl.unstable_UserBlockingPriority,uO=xl.unstable_NormalPriority,q2e=xl.unstable_LowPriority,_he=xl.unstable_IdlePriority,OR=null,jh=null;function X2e(t){if(jh&&typeof jh.onCommitFiberRoot=="function")try{jh.onCommitFiberRoot(OR,t,void 0,(t.current.flags&128)===128)}catch{}}var Au=Math.clz32?Math.clz32:J2e,Y2e=Math.log,K2e=Math.LN2;function J2e(t){return t>>>=0,t===0?32:31-(Y2e(t)/K2e|0)|0}var mT=64,gT=4194304;function pA(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hO(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=pA(a):(s&=o,s!==0&&(i=pA(s)))}else o=n&~r,o!==0?i=pA(o):s!==0&&(i=pA(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Au(e),r=1<<n,i|=t[n],e&=~r;return i}function Z2e(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q2e(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Au(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=Z2e(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function DU(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function She(){var t=mT;return mT<<=1,!(mT&4194240)&&(mT=64),t}function _F(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tE(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Au(e),t[e]=n}function eEe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Au(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function LV(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Au(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var pi=0;function Ahe(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Mhe,RV,Ehe,Che,The,OU=!1,vT=[],_m=null,Sm=null,Am=null,kM=new Map,FM=new Map,Wp=[],tEe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function CY(t,e){switch(t){case"focusin":case"focusout":_m=null;break;case"dragenter":case"dragleave":Sm=null;break;case"mouseover":case"mouseout":Am=null;break;case"pointerover":case"pointerout":kM.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":FM.delete(e.pointerId)}}function R_(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=iE(e),e!==null&&RV(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function nEe(t,e,n,i,r){switch(e){case"focusin":return _m=R_(_m,t,e,n,i,r),!0;case"dragenter":return Sm=R_(Sm,t,e,n,i,r),!0;case"mouseover":return Am=R_(Am,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return kM.set(s,R_(kM.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,FM.set(s,R_(FM.get(s)||null,t,e,n,i,r)),!0}return!1}function Phe(t){var e=M0(t.target);if(e!==null){var n=Bv(e);if(n!==null){if(e=n.tag,e===13){if(e=vhe(n),e!==null){t.blockedOn=e,The(t.priority,function(){Ehe(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hD(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=LU(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);EU=i,n.target.dispatchEvent(i),EU=null}else return e=iE(n),e!==null&&RV(e),t.blockedOn=n,!1;e.shift()}return!0}function TY(t,e,n){hD(t)&&n.delete(e)}function iEe(){OU=!1,_m!==null&&hD(_m)&&(_m=null),Sm!==null&&hD(Sm)&&(Sm=null),Am!==null&&hD(Am)&&(Am=null),kM.forEach(TY),FM.forEach(TY)}function I_(t,e){t.blockedOn===e&&(t.blockedOn=null,OU||(OU=!0,xl.unstable_scheduleCallback(xl.unstable_NormalPriority,iEe)))}function NM(t){function e(r){return I_(r,t)}if(0<vT.length){I_(vT[0],t);for(var n=1;n<vT.length;n++){var i=vT[n];i.blockedOn===t&&(i.blockedOn=null)}}for(_m!==null&&I_(_m,t),Sm!==null&&I_(Sm,t),Am!==null&&I_(Am,t),kM.forEach(e),FM.forEach(e),n=0;n<Wp.length;n++)i=Wp[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Wp.length&&(n=Wp[0],n.blockedOn===null);)Phe(n),n.blockedOn===null&&Wp.shift()}var Wx=Xf.ReactCurrentBatchConfig,dO=!0;function rEe(t,e,n,i){var r=pi,s=Wx.transition;Wx.transition=null;try{pi=1,IV(t,e,n,i)}finally{pi=r,Wx.transition=s}}function sEe(t,e,n,i){var r=pi,s=Wx.transition;Wx.transition=null;try{pi=4,IV(t,e,n,i)}finally{pi=r,Wx.transition=s}}function IV(t,e,n,i){if(dO){var r=LU(t,e,n,i);if(r===null)LF(t,e,i,fO,n),CY(t,i);else if(nEe(r,t,e,n,i))i.stopPropagation();else if(CY(t,i),e&4&&-1<tEe.indexOf(t)){for(;r!==null;){var s=iE(r);if(s!==null&&Mhe(s),s=LU(t,e,n,i),s===null&&LF(t,e,i,fO,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else LF(t,e,i,null,n)}}var fO=null;function LU(t,e,n,i){if(fO=null,t=DV(i),t=M0(t),t!==null)if(e=Bv(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vhe(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fO=t,null}function Dhe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($2e()){case OV:return 1;case whe:return 4;case uO:case q2e:return 16;case _he:return 536870912;default:return 16}default:return 16}}var Jp=null,BV=null,dD=null;function Ohe(){if(dD)return dD;var t,e=BV,n=e.length,i,r="value"in Jp?Jp.value:Jp.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return dD=r.slice(t,1<i?1-i:void 0)}function fD(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yT(){return!0}function PY(){return!1}function Al(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yT:PY,this.isPropagationStopped=PY,this}return vr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yT)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yT)},persist:function(){},isPersistent:yT}),e}var mw={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kV=Al(mw),nE=vr({},mw,{view:0,detail:0}),oEe=Al(nE),SF,AF,B_,LR=vr({},nE,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FV,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==B_&&(B_&&t.type==="mousemove"?(SF=t.screenX-B_.screenX,AF=t.screenY-B_.screenY):AF=SF=0,B_=t),SF)},movementY:function(t){return"movementY"in t?t.movementY:AF}}),DY=Al(LR),aEe=vr({},LR,{dataTransfer:0}),lEe=Al(aEe),cEe=vr({},nE,{relatedTarget:0}),MF=Al(cEe),uEe=vr({},mw,{animationName:0,elapsedTime:0,pseudoElement:0}),hEe=Al(uEe),dEe=vr({},mw,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fEe=Al(dEe),pEe=vr({},mw,{data:0}),OY=Al(pEe),mEe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gEe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vEe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yEe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vEe[t])?!!e[t]:!1}function FV(){return yEe}var xEe=vr({},nE,{key:function(t){if(t.key){var e=mEe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fD(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gEe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FV,charCode:function(t){return t.type==="keypress"?fD(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fD(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bEe=Al(xEe),wEe=vr({},LR,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LY=Al(wEe),_Ee=vr({},nE,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FV}),SEe=Al(_Ee),AEe=vr({},mw,{propertyName:0,elapsedTime:0,pseudoElement:0}),MEe=Al(AEe),EEe=vr({},LR,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CEe=Al(EEe),TEe=[9,13,27,32],NV=Lf&&"CompositionEvent"in window,NA=null;Lf&&"documentMode"in document&&(NA=document.documentMode);var PEe=Lf&&"TextEvent"in window&&!NA,Lhe=Lf&&(!NV||NA&&8<NA&&11>=NA),RY=String.fromCharCode(32),IY=!1;function Rhe(t,e){switch(t){case"keyup":return TEe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ihe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hx=!1;function DEe(t,e){switch(t){case"compositionend":return Ihe(e);case"keypress":return e.which!==32?null:(IY=!0,RY);case"textInput":return t=e.data,t===RY&&IY?null:t;default:return null}}function OEe(t,e){if(hx)return t==="compositionend"||!NV&&Rhe(t,e)?(t=Ohe(),dD=BV=Jp=null,hx=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lhe&&e.locale!=="ko"?null:e.data;default:return null}}var LEe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BY(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LEe[t.type]:e==="textarea"}function Bhe(t,e,n,i){dhe(i),e=pO(e,"onChange"),0<e.length&&(n=new kV("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var zA=null,zM=null;function REe(t){$he(t,0)}function RR(t){var e=px(t);if(she(e))return t}function IEe(t,e){if(t==="change")return e}var khe=!1;if(Lf){var EF;if(Lf){var CF="oninput"in document;if(!CF){var kY=document.createElement("div");kY.setAttribute("oninput","return;"),CF=typeof kY.oninput=="function"}EF=CF}else EF=!1;khe=EF&&(!document.documentMode||9<document.documentMode)}function FY(){zA&&(zA.detachEvent("onpropertychange",Fhe),zM=zA=null)}function Fhe(t){if(t.propertyName==="value"&&RR(zM)){var e=[];Bhe(e,zM,t,DV(t)),ghe(REe,e)}}function BEe(t,e,n){t==="focusin"?(FY(),zA=e,zM=n,zA.attachEvent("onpropertychange",Fhe)):t==="focusout"&&FY()}function kEe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return RR(zM)}function FEe(t,e){if(t==="click")return RR(e)}function NEe(t,e){if(t==="input"||t==="change")return RR(e)}function zEe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Iu=typeof Object.is=="function"?Object.is:zEe;function UM(t,e){if(Iu(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!pU.call(e,r)||!Iu(t[r],e[r]))return!1}return!0}function NY(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zY(t,e){var n=NY(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=NY(n)}}function Nhe(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Nhe(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zhe(){for(var t=window,e=aO();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=aO(t.document)}return e}function zV(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function UEe(t){var e=zhe(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Nhe(n.ownerDocument.documentElement,n)){if(i!==null&&zV(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=zY(n,s);var o=zY(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GEe=Lf&&"documentMode"in document&&11>=document.documentMode,dx=null,RU=null,UA=null,IU=!1;function UY(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;IU||dx==null||dx!==aO(i)||(i=dx,"selectionStart"in i&&zV(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),UA&&UM(UA,i)||(UA=i,i=pO(RU,"onSelect"),0<i.length&&(e=new kV("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=dx)))}function xT(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fx={animationend:xT("Animation","AnimationEnd"),animationiteration:xT("Animation","AnimationIteration"),animationstart:xT("Animation","AnimationStart"),transitionend:xT("Transition","TransitionEnd")},TF={},Uhe={};Lf&&(Uhe=document.createElement("div").style,"AnimationEvent"in window||(delete fx.animationend.animation,delete fx.animationiteration.animation,delete fx.animationstart.animation),"TransitionEvent"in window||delete fx.transitionend.transition);function IR(t){if(TF[t])return TF[t];if(!fx[t])return t;var e=fx[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Uhe)return TF[t]=e[n];return t}var Ghe=IR("animationend"),Hhe=IR("animationiteration"),jhe=IR("animationstart"),Vhe=IR("transitionend"),Whe=new Map,GY="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qm(t,e){Whe.set(t,e),Iv(e,[t])}for(var PF=0;PF<GY.length;PF++){var DF=GY[PF],HEe=DF.toLowerCase(),jEe=DF[0].toUpperCase()+DF.slice(1);Qm(HEe,"on"+jEe)}Qm(Ghe,"onAnimationEnd");Qm(Hhe,"onAnimationIteration");Qm(jhe,"onAnimationStart");Qm("dblclick","onDoubleClick");Qm("focusin","onFocus");Qm("focusout","onBlur");Qm(Vhe,"onTransitionEnd");Eb("onMouseEnter",["mouseout","mouseover"]);Eb("onMouseLeave",["mouseout","mouseover"]);Eb("onPointerEnter",["pointerout","pointerover"]);Eb("onPointerLeave",["pointerout","pointerover"]);Iv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Iv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Iv("onBeforeInput",["compositionend","keypress","textInput","paste"]);Iv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Iv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Iv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VEe=new Set("cancel close invalid load scroll toggle".split(" ").concat(mA));function HY(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,H2e(i,e,void 0,t),t.currentTarget=null}function $he(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;HY(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;HY(r,a,c),s=l}}}if(cO)throw t=PU,cO=!1,PU=null,t}function ji(t,e){var n=e[zU];n===void 0&&(n=e[zU]=new Set);var i=t+"__bubble";n.has(i)||(qhe(e,t,2,!1),n.add(i))}function OF(t,e,n){var i=0;e&&(i|=4),qhe(n,t,i,e)}var bT="_reactListening"+Math.random().toString(36).slice(2);function GM(t){if(!t[bT]){t[bT]=!0,ehe.forEach(function(n){n!=="selectionchange"&&(VEe.has(n)||OF(n,!1,t),OF(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bT]||(e[bT]=!0,OF("selectionchange",!1,e))}}function qhe(t,e,n,i){switch(Dhe(e)){case 1:var r=rEe;break;case 4:r=sEe;break;default:r=IV}n=r.bind(null,e,n,t),r=void 0,!TU||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function LF(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=M0(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}ghe(function(){var c=s,h=DV(n),u=[];e:{var d=Whe.get(t);if(d!==void 0){var f=kV,p=t;switch(t){case"keypress":if(fD(n)===0)break e;case"keydown":case"keyup":f=bEe;break;case"focusin":p="focus",f=MF;break;case"focusout":p="blur",f=MF;break;case"beforeblur":case"afterblur":f=MF;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=DY;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=lEe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=SEe;break;case Ghe:case Hhe:case jhe:f=hEe;break;case Vhe:f=MEe;break;case"scroll":f=oEe;break;case"wheel":f=CEe;break;case"copy":case"cut":case"paste":f=fEe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=LY}var m=(e&4)!==0,g=!m&&t==="scroll",v=m?d!==null?d+"Capture":null:d;m=[];for(var y=c,x;y!==null;){x=y;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,v!==null&&(b=BM(y,v),b!=null&&m.push(HM(y,b,x)))),g)break;y=y.return}0<m.length&&(d=new f(d,p,null,n,h),u.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==EU&&(p=n.relatedTarget||n.fromElement)&&(M0(p)||p[Rf]))break e;if((f||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?M0(p):null,p!==null&&(g=Bv(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=DY,b="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=LY,b="onPointerLeave",v="onPointerEnter",y="pointer"),g=f==null?d:px(f),x=p==null?d:px(p),d=new m(b,y+"leave",f,n,h),d.target=g,d.relatedTarget=x,b=null,M0(h)===c&&(m=new m(v,y+"enter",p,n,h),m.target=x,m.relatedTarget=g,b=m),g=b,f&&p)t:{for(m=f,v=p,y=0,x=m;x;x=My(x))y++;for(x=0,b=v;b;b=My(b))x++;for(;0<y-x;)m=My(m),y--;for(;0<x-y;)v=My(v),x--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=My(m),v=My(v)}m=null}else m=null;f!==null&&jY(u,d,f,m,!1),p!==null&&g!==null&&jY(u,g,p,m,!0)}}e:{if(d=c?px(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var S=IEe;else if(BY(d))if(khe)S=NEe;else{S=kEe;var A=BEe}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=FEe);if(S&&(S=S(t,c))){Bhe(u,S,n,h);break e}A&&A(t,d,c),t==="focusout"&&(A=d._wrapperState)&&A.controlled&&d.type==="number"&&wU(d,"number",d.value)}switch(A=c?px(c):window,t){case"focusin":(BY(A)||A.contentEditable==="true")&&(dx=A,RU=c,UA=null);break;case"focusout":UA=RU=dx=null;break;case"mousedown":IU=!0;break;case"contextmenu":case"mouseup":case"dragend":IU=!1,UY(u,n,h);break;case"selectionchange":if(GEe)break;case"keydown":case"keyup":UY(u,n,h)}var E;if(NV)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else hx?Rhe(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(Lhe&&n.locale!=="ko"&&(hx||M!=="onCompositionStart"?M==="onCompositionEnd"&&hx&&(E=Ohe()):(Jp=h,BV="value"in Jp?Jp.value:Jp.textContent,hx=!0)),A=pO(c,M),0<A.length&&(M=new OY(M,t,null,n,h),u.push({event:M,listeners:A}),E?M.data=E:(E=Ihe(n),E!==null&&(M.data=E)))),(E=PEe?DEe(t,n):OEe(t,n))&&(c=pO(c,"onBeforeInput"),0<c.length&&(h=new OY("onBeforeInput","beforeinput",null,n,h),u.push({event:h,listeners:c}),h.data=E))}$he(u,e)})}function HM(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pO(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=BM(t,n),s!=null&&i.unshift(HM(t,s,r)),s=BM(t,e),s!=null&&i.push(HM(t,s,r))),t=t.return}return i}function My(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jY(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=BM(n,s),l!=null&&o.unshift(HM(n,l,a))):r||(l=BM(n,s),l!=null&&o.push(HM(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var WEe=/\r\n?/g,$Ee=/\u0000|\uFFFD/g;function VY(t){return(typeof t=="string"?t:""+t).replace(WEe,`
`).replace($Ee,"")}function wT(t,e,n){if(e=VY(e),VY(t)!==e&&n)throw Error(rt(425))}function mO(){}var BU=null,kU=null;function FU(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var NU=typeof setTimeout=="function"?setTimeout:void 0,qEe=typeof clearTimeout=="function"?clearTimeout:void 0,WY=typeof Promise=="function"?Promise:void 0,XEe=typeof queueMicrotask=="function"?queueMicrotask:typeof WY<"u"?function(t){return WY.resolve(null).then(t).catch(YEe)}:NU;function YEe(t){setTimeout(function(){throw t})}function RF(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),NM(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);NM(e)}function Mm(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $Y(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gw=Math.random().toString(36).slice(2),Dh="__reactFiber$"+gw,jM="__reactProps$"+gw,Rf="__reactContainer$"+gw,zU="__reactEvents$"+gw,KEe="__reactListeners$"+gw,JEe="__reactHandles$"+gw;function M0(t){var e=t[Dh];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rf]||n[Dh]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$Y(t);t!==null;){if(n=t[Dh])return n;t=$Y(t)}return e}t=n,n=t.parentNode}return null}function iE(t){return t=t[Dh]||t[Rf],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function px(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(rt(33))}function BR(t){return t[jM]||null}var UU=[],mx=-1;function eg(t){return{current:t}}function Zi(t){0>mx||(t.current=UU[mx],UU[mx]=null,mx--)}function Fi(t,e){mx++,UU[mx]=t.current,t.current=e}var Hm={},Do=eg(Hm),Aa=eg(!1),av=Hm;function Cb(t,e){var n=t.type.contextTypes;if(!n)return Hm;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ma(t){return t=t.childContextTypes,t!=null}function gO(){Zi(Aa),Zi(Do)}function qY(t,e,n){if(Do.current!==Hm)throw Error(rt(168));Fi(Do,e),Fi(Aa,n)}function Xhe(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(rt(108,B2e(t)||"Unknown",r));return vr({},n,i)}function vO(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hm,av=Do.current,Fi(Do,t),Fi(Aa,Aa.current),!0}function XY(t,e,n){var i=t.stateNode;if(!i)throw Error(rt(169));n?(t=Xhe(t,e,av),i.__reactInternalMemoizedMergedChildContext=t,Zi(Aa),Zi(Do),Fi(Do,t)):Zi(Aa),Fi(Aa,n)}var af=null,kR=!1,IF=!1;function Yhe(t){af===null?af=[t]:af.push(t)}function ZEe(t){kR=!0,Yhe(t)}function tg(){if(!IF&&af!==null){IF=!0;var t=0,e=pi;try{var n=af;for(pi=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}af=null,kR=!1}catch(r){throw af!==null&&(af=af.slice(t+1)),bhe(OV,tg),r}finally{pi=e,IF=!1}}return null}var gx=[],vx=0,yO=null,xO=0,uc=[],hc=0,lv=null,ff=1,pf="";function qg(t,e){gx[vx++]=xO,gx[vx++]=yO,yO=t,xO=e}function Khe(t,e,n){uc[hc++]=ff,uc[hc++]=pf,uc[hc++]=lv,lv=t;var i=ff;t=pf;var r=32-Au(i)-1;i&=~(1<<r),n+=1;var s=32-Au(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ff=1<<32-Au(e)+r|n<<r|i,pf=s+t}else ff=1<<s|n<<r|i,pf=t}function UV(t){t.return!==null&&(qg(t,1),Khe(t,1,0))}function GV(t){for(;t===yO;)yO=gx[--vx],gx[vx]=null,xO=gx[--vx],gx[vx]=null;for(;t===lv;)lv=uc[--hc],uc[hc]=null,pf=uc[--hc],uc[hc]=null,ff=uc[--hc],uc[hc]=null}var fl=null,sl=null,or=!1,mu=null;function Jhe(t,e){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function YY(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fl=t,sl=Mm(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fl=t,sl=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=lv!==null?{id:ff,overflow:pf}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mc(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fl=t,sl=null,!0):!1;default:return!1}}function GU(t){return(t.mode&1)!==0&&(t.flags&128)===0}function HU(t){if(or){var e=sl;if(e){var n=e;if(!YY(t,e)){if(GU(t))throw Error(rt(418));e=Mm(n.nextSibling);var i=fl;e&&YY(t,e)?Jhe(i,n):(t.flags=t.flags&-4097|2,or=!1,fl=t)}}else{if(GU(t))throw Error(rt(418));t.flags=t.flags&-4097|2,or=!1,fl=t}}}function KY(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fl=t}function _T(t){if(t!==fl)return!1;if(!or)return KY(t),or=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!FU(t.type,t.memoizedProps)),e&&(e=sl)){if(GU(t))throw Zhe(),Error(rt(418));for(;e;)Jhe(t,e),e=Mm(e.nextSibling)}if(KY(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(rt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){sl=Mm(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}sl=null}}else sl=fl?Mm(t.stateNode.nextSibling):null;return!0}function Zhe(){for(var t=sl;t;)t=Mm(t.nextSibling)}function Tb(){sl=fl=null,or=!1}function HV(t){mu===null?mu=[t]:mu.push(t)}var QEe=Xf.ReactCurrentBatchConfig;function fu(t,e){if(t&&t.defaultProps){e=vr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var bO=eg(null),wO=null,yx=null,jV=null;function VV(){jV=yx=wO=null}function WV(t){var e=bO.current;Zi(bO),t._currentValue=e}function jU(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function $x(t,e){wO=t,jV=yx=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xa=!0),t.firstContext=null)}function kc(t){var e=t._currentValue;if(jV!==t)if(t={context:t,memoizedValue:e,next:null},yx===null){if(wO===null)throw Error(rt(308));yx=t,wO.dependencies={lanes:0,firstContext:t}}else yx=yx.next=t;return e}var E0=null;function $V(t){E0===null?E0=[t]:E0.push(t)}function Qhe(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,$V(e)):(n.next=r.next,r.next=n),e.interleaved=n,If(t,i)}function If(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Np=!1;function qV(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ede(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _f(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Em(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,$n&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,If(t,n)}return r=i.interleaved,r===null?(e.next=e,$V(i)):(e.next=r.next,r.next=e),i.interleaved=e,If(t,n)}function pD(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,LV(t,n)}}function JY(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _O(t,e,n,i){var r=t.updateQueue;Np=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var u=r.baseState;o=0,h=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((i&d)===d){h!==null&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(d=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){u=p.call(f,u,d);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(f,u,d):p,d==null)break e;u=vr({},u,d);break e;case 2:Np=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=f,l=u):h=h.next=f,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(1);if(h===null&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);uv|=o,t.lanes=o,t.memoizedState=u}}function ZY(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(rt(191,r));r.call(i)}}}var tde=new Que.Component().refs;function VU(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:vr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var FR={isMounted:function(t){return(t=t._reactInternals)?Bv(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ea(),r=Tm(t),s=_f(i,r);s.payload=e,n!=null&&(s.callback=n),e=Em(t,s,r),e!==null&&(Mu(e,t,r,i),pD(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ea(),r=Tm(t),s=_f(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Em(t,s,r),e!==null&&(Mu(e,t,r,i),pD(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ea(),i=Tm(t),r=_f(n,i);r.tag=2,e!=null&&(r.callback=e),e=Em(t,r,i),e!==null&&(Mu(e,t,i,n),pD(e,t,i))}};function QY(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!UM(n,i)||!UM(r,s):!0}function nde(t,e,n){var i=!1,r=Hm,s=e.contextType;return typeof s=="object"&&s!==null?s=kc(s):(r=Ma(e)?av:Do.current,i=e.contextTypes,s=(i=i!=null)?Cb(t,r):Hm),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=FR,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function eK(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&FR.enqueueReplaceState(e,e.state,null)}function WU(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=tde,qV(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=kc(s):(s=Ma(e)?av:Do.current,r.context=Cb(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(VU(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&FR.enqueueReplaceState(r,r.state,null),_O(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function k_(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(rt(309));var i=n.stateNode}if(!i)throw Error(rt(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===tde&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(rt(284));if(!n._owner)throw Error(rt(290,t))}return t}function ST(t,e){throw t=Object.prototype.toString.call(e),Error(rt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tK(t){var e=t._init;return e(t._payload)}function ide(t){function e(v,y){if(t){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=Pm(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,x,b){return y===null||y.tag!==6?(y=GF(x,v.mode,b),y.return=v,y):(y=r(y,x),y.return=v,y)}function l(v,y,x,b){var S=x.type;return S===ux?h(v,y,x.props.children,b,x.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Fp&&tK(S)===y.type)?(b=r(y,x.props),b.ref=k_(v,y,x),b.return=v,b):(b=bD(x.type,x.key,x.props,null,v.mode,b),b.ref=k_(v,y,x),b.return=v,b)}function c(v,y,x,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=HF(x,v.mode,b),y.return=v,y):(y=r(y,x.children||[]),y.return=v,y)}function h(v,y,x,b,S){return y===null||y.tag!==7?(y=U0(x,v.mode,b,S),y.return=v,y):(y=r(y,x),y.return=v,y)}function u(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=GF(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case dT:return x=bD(y.type,y.key,y.props,null,v.mode,x),x.ref=k_(v,null,y),x.return=v,x;case cx:return y=HF(y,v.mode,x),y.return=v,y;case Fp:var b=y._init;return u(v,b(y._payload),x)}if(fA(y)||O_(y))return y=U0(y,v.mode,x,null),y.return=v,y;ST(v,y)}return null}function d(v,y,x,b){var S=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:a(v,y,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case dT:return x.key===S?l(v,y,x,b):null;case cx:return x.key===S?c(v,y,x,b):null;case Fp:return S=x._init,d(v,y,S(x._payload),b)}if(fA(x)||O_(x))return S!==null?null:h(v,y,x,b,null);ST(v,x)}return null}function f(v,y,x,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(x)||null,a(y,v,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case dT:return v=v.get(b.key===null?x:b.key)||null,l(y,v,b,S);case cx:return v=v.get(b.key===null?x:b.key)||null,c(y,v,b,S);case Fp:var A=b._init;return f(v,y,x,A(b._payload),S)}if(fA(b)||O_(b))return v=v.get(x)||null,h(y,v,b,S,null);ST(y,b)}return null}function p(v,y,x,b){for(var S=null,A=null,E=y,M=y=0,C=null;E!==null&&M<x.length;M++){E.index>M?(C=E,E=null):C=E.sibling;var T=d(v,E,x[M],b);if(T===null){E===null&&(E=C);break}t&&E&&T.alternate===null&&e(v,E),y=s(T,y,M),A===null?S=T:A.sibling=T,A=T,E=C}if(M===x.length)return n(v,E),or&&qg(v,M),S;if(E===null){for(;M<x.length;M++)E=u(v,x[M],b),E!==null&&(y=s(E,y,M),A===null?S=E:A.sibling=E,A=E);return or&&qg(v,M),S}for(E=i(v,E);M<x.length;M++)C=f(E,v,M,x[M],b),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?M:C.key),y=s(C,y,M),A===null?S=C:A.sibling=C,A=C);return t&&E.forEach(function(D){return e(v,D)}),or&&qg(v,M),S}function m(v,y,x,b){var S=O_(x);if(typeof S!="function")throw Error(rt(150));if(x=S.call(x),x==null)throw Error(rt(151));for(var A=S=null,E=y,M=y=0,C=null,T=x.next();E!==null&&!T.done;M++,T=x.next()){E.index>M?(C=E,E=null):C=E.sibling;var D=d(v,E,T.value,b);if(D===null){E===null&&(E=C);break}t&&E&&D.alternate===null&&e(v,E),y=s(D,y,M),A===null?S=D:A.sibling=D,A=D,E=C}if(T.done)return n(v,E),or&&qg(v,M),S;if(E===null){for(;!T.done;M++,T=x.next())T=u(v,T.value,b),T!==null&&(y=s(T,y,M),A===null?S=T:A.sibling=T,A=T);return or&&qg(v,M),S}for(E=i(v,E);!T.done;M++,T=x.next())T=f(E,v,M,T.value,b),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?M:T.key),y=s(T,y,M),A===null?S=T:A.sibling=T,A=T);return t&&E.forEach(function(L){return e(v,L)}),or&&qg(v,M),S}function g(v,y,x,b){if(typeof x=="object"&&x!==null&&x.type===ux&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case dT:e:{for(var S=x.key,A=y;A!==null;){if(A.key===S){if(S=x.type,S===ux){if(A.tag===7){n(v,A.sibling),y=r(A,x.props.children),y.return=v,v=y;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Fp&&tK(S)===A.type){n(v,A.sibling),y=r(A,x.props),y.ref=k_(v,A,x),y.return=v,v=y;break e}n(v,A);break}else e(v,A);A=A.sibling}x.type===ux?(y=U0(x.props.children,v.mode,b,x.key),y.return=v,v=y):(b=bD(x.type,x.key,x.props,null,v.mode,b),b.ref=k_(v,y,x),b.return=v,v=b)}return o(v);case cx:e:{for(A=x.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=r(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=HF(x,v.mode,b),y.return=v,v=y}return o(v);case Fp:return A=x._init,g(v,y,A(x._payload),b)}if(fA(x))return p(v,y,x,b);if(O_(x))return m(v,y,x,b);ST(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=r(y,x),y.return=v,v=y):(n(v,y),y=GF(x,v.mode,b),y.return=v,v=y),o(v)):n(v,y)}return g}var Pb=ide(!0),rde=ide(!1),rE={},Vh=eg(rE),VM=eg(rE),WM=eg(rE);function C0(t){if(t===rE)throw Error(rt(174));return t}function XV(t,e){switch(Fi(WM,e),Fi(VM,t),Fi(Vh,rE),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:SU(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=SU(e,t)}Zi(Vh),Fi(Vh,e)}function Db(){Zi(Vh),Zi(VM),Zi(WM)}function sde(t){C0(WM.current);var e=C0(Vh.current),n=SU(e,t.type);e!==n&&(Fi(VM,t),Fi(Vh,n))}function YV(t){VM.current===t&&(Zi(Vh),Zi(VM))}var cr=eg(0);function SO(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var BF=[];function KV(){for(var t=0;t<BF.length;t++)BF[t]._workInProgressVersionPrimary=null;BF.length=0}var mD=Xf.ReactCurrentDispatcher,kF=Xf.ReactCurrentBatchConfig,cv=0,mr=null,gs=null,Fs=null,AO=!1,GA=!1,$M=0,eCe=0;function po(){throw Error(rt(321))}function JV(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Iu(t[n],e[n]))return!1;return!0}function ZV(t,e,n,i,r,s){if(cv=s,mr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mD.current=t===null||t.memoizedState===null?rCe:sCe,t=n(i,r),GA){s=0;do{if(GA=!1,$M=0,25<=s)throw Error(rt(301));s+=1,Fs=gs=null,e.updateQueue=null,mD.current=oCe,t=n(i,r)}while(GA)}if(mD.current=MO,e=gs!==null&&gs.next!==null,cv=0,Fs=gs=mr=null,AO=!1,e)throw Error(rt(300));return t}function QV(){var t=$M!==0;return $M=0,t}function Sh(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fs===null?mr.memoizedState=Fs=t:Fs=Fs.next=t,Fs}function Fc(){if(gs===null){var t=mr.alternate;t=t!==null?t.memoizedState:null}else t=gs.next;var e=Fs===null?mr.memoizedState:Fs.next;if(e!==null)Fs=e,gs=t;else{if(t===null)throw Error(rt(310));gs=t,t={memoizedState:gs.memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},Fs===null?mr.memoizedState=Fs=t:Fs=Fs.next=t}return Fs}function qM(t,e){return typeof e=="function"?e(t):e}function FF(t){var e=Fc(),n=e.queue;if(n===null)throw Error(rt(311));n.lastRenderedReducer=t;var i=gs,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((cv&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=i):l=l.next=u,mr.lanes|=h,uv|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Iu(i,e.memoizedState)||(xa=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,mr.lanes|=s,uv|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function NF(t){var e=Fc(),n=e.queue;if(n===null)throw Error(rt(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Iu(s,e.memoizedState)||(xa=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function ode(){}function ade(t,e){var n=mr,i=Fc(),r=e(),s=!Iu(i.memoizedState,r);if(s&&(i.memoizedState=r,xa=!0),i=i.queue,e8(ude.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Fs!==null&&Fs.memoizedState.tag&1){if(n.flags|=2048,XM(9,cde.bind(null,n,i,r,e),void 0,null),Gs===null)throw Error(rt(349));cv&30||lde(n,e,r)}return r}function lde(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=mr.updateQueue,e===null?(e={lastEffect:null,stores:null},mr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cde(t,e,n,i){e.value=n,e.getSnapshot=i,hde(e)&&dde(t)}function ude(t,e,n){return n(function(){hde(e)&&dde(t)})}function hde(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Iu(t,n)}catch{return!0}}function dde(t){var e=If(t,1);e!==null&&Mu(e,t,1,-1)}function nK(t){var e=Sh();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qM,lastRenderedState:t},e.queue=t,t=t.dispatch=iCe.bind(null,mr,t),[e.memoizedState,t]}function XM(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=mr.updateQueue,e===null?(e={lastEffect:null,stores:null},mr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function fde(){return Fc().memoizedState}function gD(t,e,n,i){var r=Sh();mr.flags|=t,r.memoizedState=XM(1|e,n,void 0,i===void 0?null:i)}function NR(t,e,n,i){var r=Fc();i=i===void 0?null:i;var s=void 0;if(gs!==null){var o=gs.memoizedState;if(s=o.destroy,i!==null&&JV(i,o.deps)){r.memoizedState=XM(e,n,s,i);return}}mr.flags|=t,r.memoizedState=XM(1|e,n,s,i)}function iK(t,e){return gD(8390656,8,t,e)}function e8(t,e){return NR(2048,8,t,e)}function pde(t,e){return NR(4,2,t,e)}function mde(t,e){return NR(4,4,t,e)}function gde(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vde(t,e,n){return n=n!=null?n.concat([t]):null,NR(4,4,gde.bind(null,e,t),n)}function t8(){}function yde(t,e){var n=Fc();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&JV(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function xde(t,e){var n=Fc();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&JV(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function bde(t,e,n){return cv&21?(Iu(n,e)||(n=She(),mr.lanes|=n,uv|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xa=!0),t.memoizedState=n)}function tCe(t,e){var n=pi;pi=n!==0&&4>n?n:4,t(!0);var i=kF.transition;kF.transition={};try{t(!1),e()}finally{pi=n,kF.transition=i}}function wde(){return Fc().memoizedState}function nCe(t,e,n){var i=Tm(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},_de(t))Sde(e,n);else if(n=Qhe(t,e,n,i),n!==null){var r=ea();Mu(n,t,i,r),Ade(n,e,i)}}function iCe(t,e,n){var i=Tm(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(_de(t))Sde(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Iu(a,o)){var l=e.interleaved;l===null?(r.next=r,$V(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=Qhe(t,e,r,i),n!==null&&(r=ea(),Mu(n,t,i,r),Ade(n,e,i))}}function _de(t){var e=t.alternate;return t===mr||e!==null&&e===mr}function Sde(t,e){GA=AO=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ade(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,LV(t,n)}}var MO={readContext:kc,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},rCe={readContext:kc,useCallback:function(t,e){return Sh().memoizedState=[t,e===void 0?null:e],t},useContext:kc,useEffect:iK,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gD(4194308,4,gde.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gD(4194308,4,t,e)},useInsertionEffect:function(t,e){return gD(4,2,t,e)},useMemo:function(t,e){var n=Sh();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Sh();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=nCe.bind(null,mr,t),[i.memoizedState,t]},useRef:function(t){var e=Sh();return t={current:t},e.memoizedState=t},useState:nK,useDebugValue:t8,useDeferredValue:function(t){return Sh().memoizedState=t},useTransition:function(){var t=nK(!1),e=t[0];return t=tCe.bind(null,t[1]),Sh().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=mr,r=Sh();if(or){if(n===void 0)throw Error(rt(407));n=n()}else{if(n=e(),Gs===null)throw Error(rt(349));cv&30||lde(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,iK(ude.bind(null,i,s,t),[t]),i.flags|=2048,XM(9,cde.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Sh(),e=Gs.identifierPrefix;if(or){var n=pf,i=ff;n=(i&~(1<<32-Au(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=$M++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=eCe++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sCe={readContext:kc,useCallback:yde,useContext:kc,useEffect:e8,useImperativeHandle:vde,useInsertionEffect:pde,useLayoutEffect:mde,useMemo:xde,useReducer:FF,useRef:fde,useState:function(){return FF(qM)},useDebugValue:t8,useDeferredValue:function(t){var e=Fc();return bde(e,gs.memoizedState,t)},useTransition:function(){var t=FF(qM)[0],e=Fc().memoizedState;return[t,e]},useMutableSource:ode,useSyncExternalStore:ade,useId:wde,unstable_isNewReconciler:!1},oCe={readContext:kc,useCallback:yde,useContext:kc,useEffect:e8,useImperativeHandle:vde,useInsertionEffect:pde,useLayoutEffect:mde,useMemo:xde,useReducer:NF,useRef:fde,useState:function(){return NF(qM)},useDebugValue:t8,useDeferredValue:function(t){var e=Fc();return gs===null?e.memoizedState=t:bde(e,gs.memoizedState,t)},useTransition:function(){var t=NF(qM)[0],e=Fc().memoizedState;return[t,e]},useMutableSource:ode,useSyncExternalStore:ade,useId:wde,unstable_isNewReconciler:!1};function Ob(t,e){try{var n="",i=e;do n+=I2e(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function zF(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $U(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var aCe=typeof WeakMap=="function"?WeakMap:Map;function Mde(t,e,n){n=_f(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){CO||(CO=!0,n6=i),$U(t,e)},n}function Ede(t,e,n){n=_f(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){$U(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){$U(t,e),typeof i!="function"&&(Cm===null?Cm=new Set([this]):Cm.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function rK(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new aCe;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=wCe.bind(null,t,e,n),e.then(t,t))}function sK(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oK(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_f(-1,1),e.tag=2,Em(n,e,1))),n.lanes|=1),t)}var lCe=Xf.ReactCurrentOwner,xa=!1;function Xo(t,e,n,i){e.child=t===null?rde(e,null,n,i):Pb(e,t.child,n,i)}function aK(t,e,n,i,r){n=n.render;var s=e.ref;return $x(e,r),i=ZV(t,e,n,i,s,r),n=QV(),t!==null&&!xa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Bf(t,e,r)):(or&&n&&UV(e),e.flags|=1,Xo(t,e,i,r),e.child)}function lK(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!c8(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Cde(t,e,s,i,r)):(t=bD(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:UM,n(o,i)&&t.ref===e.ref)return Bf(t,e,r)}return e.flags|=1,t=Pm(s,i),t.ref=e.ref,t.return=e,e.child=t}function Cde(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(UM(s,i)&&t.ref===e.ref)if(xa=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(xa=!0);else return e.lanes=t.lanes,Bf(t,e,r)}return qU(t,e,n,i,r)}function Tde(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fi(bx,Ka),Ka|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fi(bx,Ka),Ka|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Fi(bx,Ka),Ka|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Fi(bx,Ka),Ka|=i;return Xo(t,e,r,n),e.child}function Pde(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qU(t,e,n,i,r){var s=Ma(n)?av:Do.current;return s=Cb(e,s),$x(e,r),n=ZV(t,e,n,i,s,r),i=QV(),t!==null&&!xa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Bf(t,e,r)):(or&&i&&UV(e),e.flags|=1,Xo(t,e,n,r),e.child)}function cK(t,e,n,i,r){if(Ma(n)){var s=!0;vO(e)}else s=!1;if($x(e,r),e.stateNode===null)vD(t,e),nde(e,n,i),WU(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=kc(c):(c=Ma(n)?av:Do.current,c=Cb(e,c));var h=n.getDerivedStateFromProps,u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&eK(e,o,i,c),Np=!1;var d=e.memoizedState;o.state=d,_O(e,i,o,r),l=e.memoizedState,a!==i||d!==l||Aa.current||Np?(typeof h=="function"&&(VU(e,n,h,i),l=e.memoizedState),(a=Np||QY(e,n,a,i,d,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,ede(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fu(e.type,a),o.props=c,u=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=kc(l):(l=Ma(n)?av:Do.current,l=Cb(e,l));var f=n.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||d!==l)&&eK(e,o,i,l),Np=!1,d=e.memoizedState,o.state=d,_O(e,i,o,r);var p=e.memoizedState;a!==u||d!==p||Aa.current||Np?(typeof f=="function"&&(VU(e,n,f,i),p=e.memoizedState),(c=Np||QY(e,n,c,i,d,p,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return XU(t,e,n,i,s,r)}function XU(t,e,n,i,r,s){Pde(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&XY(e,n,!1),Bf(t,e,s);i=e.stateNode,lCe.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Pb(e,t.child,null,s),e.child=Pb(e,null,a,s)):Xo(t,e,a,s),e.memoizedState=i.state,r&&XY(e,n,!0),e.child}function Dde(t){var e=t.stateNode;e.pendingContext?qY(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qY(t,e.context,!1),XV(t,e.containerInfo)}function uK(t,e,n,i,r){return Tb(),HV(r),e.flags|=256,Xo(t,e,n,i),e.child}var YU={dehydrated:null,treeContext:null,retryLane:0};function KU(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ode(t,e,n){var i=e.pendingProps,r=cr.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Fi(cr,r&1),t===null)return HU(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=GR(o,i,0,null),t=U0(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=KU(n),e.memoizedState=YU,t):n8(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return cCe(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Pm(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Pm(a,s):(s=U0(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?KU(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=YU,i}return s=t.child,t=s.sibling,i=Pm(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function n8(t,e){return e=GR({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function AT(t,e,n,i){return i!==null&&HV(i),Pb(e,t.child,null,n),t=n8(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cCe(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=zF(Error(rt(422))),AT(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=GR({mode:"visible",children:i.children},r,0,null),s=U0(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Pb(e,t.child,null,o),e.child.memoizedState=KU(o),e.memoizedState=YU,s);if(!(e.mode&1))return AT(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(rt(419)),i=zF(s,i,void 0),AT(t,e,o,i)}if(a=(o&t.childLanes)!==0,xa||a){if(i=Gs,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,If(t,r),Mu(i,t,r,-1))}return l8(),i=zF(Error(rt(421))),AT(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=_Ce.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,sl=Mm(r.nextSibling),fl=e,or=!0,mu=null,t!==null&&(uc[hc++]=ff,uc[hc++]=pf,uc[hc++]=lv,ff=t.id,pf=t.overflow,lv=e),e=n8(e,i.children),e.flags|=4096,e)}function hK(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),jU(t.return,e,n)}function UF(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Lde(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Xo(t,e,i.children,n),i=cr.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hK(t,n,e);else if(t.tag===19)hK(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Fi(cr,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&SO(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),UF(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&SO(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}UF(e,!0,n,null,s);break;case"together":UF(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vD(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bf(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),uv|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(rt(153));if(e.child!==null){for(t=e.child,n=Pm(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pm(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uCe(t,e,n){switch(e.tag){case 3:Dde(e),Tb();break;case 5:sde(e);break;case 1:Ma(e.type)&&vO(e);break;case 4:XV(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Fi(bO,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Fi(cr,cr.current&1),e.flags|=128,null):n&e.child.childLanes?Ode(t,e,n):(Fi(cr,cr.current&1),t=Bf(t,e,n),t!==null?t.sibling:null);Fi(cr,cr.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Lde(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Fi(cr,cr.current),i)break;return null;case 22:case 23:return e.lanes=0,Tde(t,e,n)}return Bf(t,e,n)}var Rde,JU,Ide,Bde;Rde=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};JU=function(){};Ide=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,C0(Vh.current);var s=null;switch(n){case"input":r=xU(t,r),i=xU(t,i),s=[];break;case"select":r=vr({},r,{value:void 0}),i=vr({},i,{value:void 0}),s=[];break;case"textarea":r=_U(t,r),i=_U(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=mO)}AU(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(RM.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(RM.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ji("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Bde=function(t,e,n,i){n!==i&&(e.flags|=4)};function F_(t,e){if(!or)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function mo(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function hCe(t,e,n){var i=e.pendingProps;switch(GV(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mo(e),null;case 1:return Ma(e.type)&&gO(),mo(e),null;case 3:return i=e.stateNode,Db(),Zi(Aa),Zi(Do),KV(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(_T(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mu!==null&&(s6(mu),mu=null))),JU(t,e),mo(e),null;case 5:YV(e);var r=C0(WM.current);if(n=e.type,t!==null&&e.stateNode!=null)Ide(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(rt(166));return mo(e),null}if(t=C0(Vh.current),_T(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Dh]=e,i[jM]=s,t=(e.mode&1)!==0,n){case"dialog":ji("cancel",i),ji("close",i);break;case"iframe":case"object":case"embed":ji("load",i);break;case"video":case"audio":for(r=0;r<mA.length;r++)ji(mA[r],i);break;case"source":ji("error",i);break;case"img":case"image":case"link":ji("error",i),ji("load",i);break;case"details":ji("toggle",i);break;case"input":bY(i,s),ji("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ji("invalid",i);break;case"textarea":_Y(i,s),ji("invalid",i)}AU(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&wT(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wT(i.textContent,a,t),r=["children",""+a]):RM.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ji("scroll",i)}switch(n){case"input":fT(i),wY(i,s,!0);break;case"textarea":fT(i),SY(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=mO)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lhe(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Dh]=e,t[jM]=i,Rde(t,e,!1,!1),e.stateNode=t;e:{switch(o=MU(n,i),n){case"dialog":ji("cancel",t),ji("close",t),r=i;break;case"iframe":case"object":case"embed":ji("load",t),r=i;break;case"video":case"audio":for(r=0;r<mA.length;r++)ji(mA[r],t);r=i;break;case"source":ji("error",t),r=i;break;case"img":case"image":case"link":ji("error",t),ji("load",t),r=i;break;case"details":ji("toggle",t),r=i;break;case"input":bY(t,i),r=xU(t,i),ji("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=vr({},i,{value:void 0}),ji("invalid",t);break;case"textarea":_Y(t,i),r=_U(t,i),ji("invalid",t);break;default:r=i}AU(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?hhe(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&che(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&IM(t,l):typeof l=="number"&&IM(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(RM.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ji("scroll",t):l!=null&&EV(t,s,l,o))}switch(n){case"input":fT(t),wY(t,i,!1);break;case"textarea":fT(t),SY(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Gm(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Hx(t,!!i.multiple,s,!1):i.defaultValue!=null&&Hx(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=mO)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mo(e),null;case 6:if(t&&e.stateNode!=null)Bde(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(rt(166));if(n=C0(WM.current),C0(Vh.current),_T(e)){if(i=e.stateNode,n=e.memoizedProps,i[Dh]=e,(s=i.nodeValue!==n)&&(t=fl,t!==null))switch(t.tag){case 3:wT(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wT(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Dh]=e,e.stateNode=i}return mo(e),null;case 13:if(Zi(cr),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(or&&sl!==null&&e.mode&1&&!(e.flags&128))Zhe(),Tb(),e.flags|=98560,s=!1;else if(s=_T(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(rt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(rt(317));s[Dh]=e}else Tb(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mo(e),s=!1}else mu!==null&&(s6(mu),mu=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||cr.current&1?ys===0&&(ys=3):l8())),e.updateQueue!==null&&(e.flags|=4),mo(e),null);case 4:return Db(),JU(t,e),t===null&&GM(e.stateNode.containerInfo),mo(e),null;case 10:return WV(e.type._context),mo(e),null;case 17:return Ma(e.type)&&gO(),mo(e),null;case 19:if(Zi(cr),s=e.memoizedState,s===null)return mo(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)F_(s,!1);else{if(ys!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=SO(t),o!==null){for(e.flags|=128,F_(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fi(cr,cr.current&1|2),e.child}t=t.sibling}s.tail!==null&&Hr()>Lb&&(e.flags|=128,i=!0,F_(s,!1),e.lanes=4194304)}else{if(!i)if(t=SO(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),F_(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!or)return mo(e),null}else 2*Hr()-s.renderingStartTime>Lb&&n!==1073741824&&(e.flags|=128,i=!0,F_(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Hr(),e.sibling=null,n=cr.current,Fi(cr,i?n&1|2:n&1),e):(mo(e),null);case 22:case 23:return a8(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ka&1073741824&&(mo(e),e.subtreeFlags&6&&(e.flags|=8192)):mo(e),null;case 24:return null;case 25:return null}throw Error(rt(156,e.tag))}function dCe(t,e){switch(GV(e),e.tag){case 1:return Ma(e.type)&&gO(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Db(),Zi(Aa),Zi(Do),KV(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return YV(e),null;case 13:if(Zi(cr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(rt(340));Tb()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Zi(cr),null;case 4:return Db(),null;case 10:return WV(e.type._context),null;case 22:case 23:return a8(),null;case 24:return null;default:return null}}var MT=!1,_o=!1,fCe=typeof WeakSet=="function"?WeakSet:Set,Et=null;function xx(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Mr(t,e,i)}else n.current=null}function ZU(t,e,n){try{n()}catch(i){Mr(t,e,i)}}var dK=!1;function pCe(t,e){if(BU=dO,t=zhe(),zV(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,u=t,d=null;t:for(;;){for(var f;u!==n||r!==0&&u.nodeType!==3||(a=o+r),u!==s||i!==0&&u.nodeType!==3||(l=o+i),u.nodeType===3&&(o+=u.nodeValue.length),(f=u.firstChild)!==null;)d=u,u=f;for(;;){if(u===t)break t;if(d===n&&++c===r&&(a=o),d===s&&++h===i&&(l=o),(f=u.nextSibling)!==null)break;u=d,d=u.parentNode}u=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(kU={focusedElem:t,selectionRange:n},dO=!1,Et=e;Et!==null;)if(e=Et,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Et=t;else for(;Et!==null;){e=Et;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:fu(e.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(rt(163))}}catch(b){Mr(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Et=t;break}Et=e.return}return p=dK,dK=!1,p}function HA(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&ZU(e,n,s)}r=r.next}while(r!==i)}}function zR(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function QU(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kde(t){var e=t.alternate;e!==null&&(t.alternate=null,kde(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Dh],delete e[jM],delete e[zU],delete e[KEe],delete e[JEe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fde(t){return t.tag===5||t.tag===3||t.tag===4}function fK(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fde(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function e6(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mO));else if(i!==4&&(t=t.child,t!==null))for(e6(t,e,n),t=t.sibling;t!==null;)e6(t,e,n),t=t.sibling}function t6(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(t6(t,e,n),t=t.sibling;t!==null;)t6(t,e,n),t=t.sibling}var Ks=null,pu=!1;function pp(t,e,n){for(n=n.child;n!==null;)Nde(t,e,n),n=n.sibling}function Nde(t,e,n){if(jh&&typeof jh.onCommitFiberUnmount=="function")try{jh.onCommitFiberUnmount(OR,n)}catch{}switch(n.tag){case 5:_o||xx(n,e);case 6:var i=Ks,r=pu;Ks=null,pp(t,e,n),Ks=i,pu=r,Ks!==null&&(pu?(t=Ks,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ks.removeChild(n.stateNode));break;case 18:Ks!==null&&(pu?(t=Ks,n=n.stateNode,t.nodeType===8?RF(t.parentNode,n):t.nodeType===1&&RF(t,n),NM(t)):RF(Ks,n.stateNode));break;case 4:i=Ks,r=pu,Ks=n.stateNode.containerInfo,pu=!0,pp(t,e,n),Ks=i,pu=r;break;case 0:case 11:case 14:case 15:if(!_o&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ZU(n,e,o),r=r.next}while(r!==i)}pp(t,e,n);break;case 1:if(!_o&&(xx(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Mr(n,e,a)}pp(t,e,n);break;case 21:pp(t,e,n);break;case 22:n.mode&1?(_o=(i=_o)||n.memoizedState!==null,pp(t,e,n),_o=i):pp(t,e,n);break;default:pp(t,e,n)}}function pK(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fCe),e.forEach(function(i){var r=SCe.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Kc(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ks=a.stateNode,pu=!1;break e;case 3:Ks=a.stateNode.containerInfo,pu=!0;break e;case 4:Ks=a.stateNode.containerInfo,pu=!0;break e}a=a.return}if(Ks===null)throw Error(rt(160));Nde(s,o,r),Ks=null,pu=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Mr(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zde(e,t),e=e.sibling}function zde(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kc(e,t),ih(t),i&4){try{HA(3,t,t.return),zR(3,t)}catch(m){Mr(t,t.return,m)}try{HA(5,t,t.return)}catch(m){Mr(t,t.return,m)}}break;case 1:Kc(e,t),ih(t),i&512&&n!==null&&xx(n,n.return);break;case 5:if(Kc(e,t),ih(t),i&512&&n!==null&&xx(n,n.return),t.flags&32){var r=t.stateNode;try{IM(r,"")}catch(m){Mr(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ohe(r,s),MU(a,o);var c=MU(a,s);for(o=0;o<l.length;o+=2){var h=l[o],u=l[o+1];h==="style"?hhe(r,u):h==="dangerouslySetInnerHTML"?che(r,u):h==="children"?IM(r,u):EV(r,h,u,c)}switch(a){case"input":bU(r,s);break;case"textarea":ahe(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Hx(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Hx(r,!!s.multiple,s.defaultValue,!0):Hx(r,!!s.multiple,s.multiple?[]:"",!1))}r[jM]=s}catch(m){Mr(t,t.return,m)}}break;case 6:if(Kc(e,t),ih(t),i&4){if(t.stateNode===null)throw Error(rt(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){Mr(t,t.return,m)}}break;case 3:if(Kc(e,t),ih(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{NM(e.containerInfo)}catch(m){Mr(t,t.return,m)}break;case 4:Kc(e,t),ih(t);break;case 13:Kc(e,t),ih(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(s8=Hr())),i&4&&pK(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(_o=(c=_o)||h,Kc(e,t),_o=c):Kc(e,t),ih(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Et=t,h=t.child;h!==null;){for(u=Et=h;Et!==null;){switch(d=Et,f=d.child,d.tag){case 0:case 11:case 14:case 15:HA(4,d,d.return);break;case 1:xx(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Mr(i,n,m)}}break;case 5:xx(d,d.return);break;case 22:if(d.memoizedState!==null){gK(u);continue}}f!==null?(f.return=d,Et=f):gK(u)}h=h.sibling}e:for(h=null,u=t;;){if(u.tag===5){if(h===null){h=u;try{r=u.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=uhe("display",o))}catch(m){Mr(t,t.return,m)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){Mr(t,t.return,m)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Kc(e,t),ih(t),i&4&&pK(t);break;case 21:break;default:Kc(e,t),ih(t)}}function ih(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Fde(n)){var i=n;break e}n=n.return}throw Error(rt(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(IM(r,""),i.flags&=-33);var s=fK(t);t6(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=fK(t);e6(t,a,o);break;default:throw Error(rt(161))}}catch(l){Mr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mCe(t,e,n){Et=t,Ude(t)}function Ude(t,e,n){for(var i=(t.mode&1)!==0;Et!==null;){var r=Et,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||MT;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||_o;a=MT;var c=_o;if(MT=o,(_o=l)&&!c)for(Et=r;Et!==null;)o=Et,l=o.child,o.tag===22&&o.memoizedState!==null?vK(r):l!==null?(l.return=o,Et=l):vK(r);for(;s!==null;)Et=s,Ude(s),s=s.sibling;Et=r,MT=a,_o=c}mK(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Et=s):mK(t)}}function mK(t){for(;Et!==null;){var e=Et;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_o||zR(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!_o)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:fu(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ZY(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ZY(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&NM(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(rt(163))}_o||e.flags&512&&QU(e)}catch(d){Mr(e,e.return,d)}}if(e===t){Et=null;break}if(n=e.sibling,n!==null){n.return=e.return,Et=n;break}Et=e.return}}function gK(t){for(;Et!==null;){var e=Et;if(e===t){Et=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Et=n;break}Et=e.return}}function vK(t){for(;Et!==null;){var e=Et;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zR(4,e)}catch(l){Mr(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Mr(e,r,l)}}var s=e.return;try{QU(e)}catch(l){Mr(e,s,l)}break;case 5:var o=e.return;try{QU(e)}catch(l){Mr(e,o,l)}}}catch(l){Mr(e,e.return,l)}if(e===t){Et=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Et=a;break}Et=e.return}}var gCe=Math.ceil,EO=Xf.ReactCurrentDispatcher,i8=Xf.ReactCurrentOwner,Pc=Xf.ReactCurrentBatchConfig,$n=0,Gs=null,ss=null,to=0,Ka=0,bx=eg(0),ys=0,YM=null,uv=0,UR=0,r8=0,jA=null,da=null,s8=0,Lb=1/0,sf=null,CO=!1,n6=null,Cm=null,ET=!1,Zp=null,TO=0,VA=0,i6=null,yD=-1,xD=0;function ea(){return $n&6?Hr():yD!==-1?yD:yD=Hr()}function Tm(t){return t.mode&1?$n&2&&to!==0?to&-to:QEe.transition!==null?(xD===0&&(xD=She()),xD):(t=pi,t!==0||(t=window.event,t=t===void 0?16:Dhe(t.type)),t):1}function Mu(t,e,n,i){if(50<VA)throw VA=0,i6=null,Error(rt(185));tE(t,n,i),(!($n&2)||t!==Gs)&&(t===Gs&&(!($n&2)&&(UR|=n),ys===4&&$p(t,to)),Ea(t,i),n===1&&$n===0&&!(e.mode&1)&&(Lb=Hr()+500,kR&&tg()))}function Ea(t,e){var n=t.callbackNode;Q2e(t,e);var i=hO(t,t===Gs?to:0);if(i===0)n!==null&&EY(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&EY(n),e===1)t.tag===0?ZEe(yK.bind(null,t)):Yhe(yK.bind(null,t)),XEe(function(){!($n&6)&&tg()}),n=null;else{switch(Ahe(i)){case 1:n=OV;break;case 4:n=whe;break;case 16:n=uO;break;case 536870912:n=_he;break;default:n=uO}n=Xde(n,Gde.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Gde(t,e){if(yD=-1,xD=0,$n&6)throw Error(rt(327));var n=t.callbackNode;if(qx()&&t.callbackNode!==n)return null;var i=hO(t,t===Gs?to:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=PO(t,i);else{e=i;var r=$n;$n|=2;var s=jde();(Gs!==t||to!==e)&&(sf=null,Lb=Hr()+500,z0(t,e));do try{xCe();break}catch(a){Hde(t,a)}while(1);VV(),EO.current=s,$n=r,ss!==null?e=0:(Gs=null,to=0,e=ys)}if(e!==0){if(e===2&&(r=DU(t),r!==0&&(i=r,e=r6(t,r))),e===1)throw n=YM,z0(t,0),$p(t,i),Ea(t,Hr()),n;if(e===6)$p(t,i);else{if(r=t.current.alternate,!(i&30)&&!vCe(r)&&(e=PO(t,i),e===2&&(s=DU(t),s!==0&&(i=s,e=r6(t,s))),e===1))throw n=YM,z0(t,0),$p(t,i),Ea(t,Hr()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(rt(345));case 2:Xg(t,da,sf);break;case 3:if($p(t,i),(i&130023424)===i&&(e=s8+500-Hr(),10<e)){if(hO(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){ea(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=NU(Xg.bind(null,t,da,sf),e);break}Xg(t,da,sf);break;case 4:if($p(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Au(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Hr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*gCe(i/1960))-i,10<i){t.timeoutHandle=NU(Xg.bind(null,t,da,sf),i);break}Xg(t,da,sf);break;case 5:Xg(t,da,sf);break;default:throw Error(rt(329))}}}return Ea(t,Hr()),t.callbackNode===n?Gde.bind(null,t):null}function r6(t,e){var n=jA;return t.current.memoizedState.isDehydrated&&(z0(t,e).flags|=256),t=PO(t,e),t!==2&&(e=da,da=n,e!==null&&s6(e)),t}function s6(t){da===null?da=t:da.push.apply(da,t)}function vCe(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Iu(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $p(t,e){for(e&=~r8,e&=~UR,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Au(e),i=1<<n;t[n]=-1,e&=~i}}function yK(t){if($n&6)throw Error(rt(327));qx();var e=hO(t,0);if(!(e&1))return Ea(t,Hr()),null;var n=PO(t,e);if(t.tag!==0&&n===2){var i=DU(t);i!==0&&(e=i,n=r6(t,i))}if(n===1)throw n=YM,z0(t,0),$p(t,e),Ea(t,Hr()),n;if(n===6)throw Error(rt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xg(t,da,sf),Ea(t,Hr()),null}function o8(t,e){var n=$n;$n|=1;try{return t(e)}finally{$n=n,$n===0&&(Lb=Hr()+500,kR&&tg())}}function hv(t){Zp!==null&&Zp.tag===0&&!($n&6)&&qx();var e=$n;$n|=1;var n=Pc.transition,i=pi;try{if(Pc.transition=null,pi=1,t)return t()}finally{pi=i,Pc.transition=n,$n=e,!($n&6)&&tg()}}function a8(){Ka=bx.current,Zi(bx)}function z0(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qEe(n)),ss!==null)for(n=ss.return;n!==null;){var i=n;switch(GV(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&gO();break;case 3:Db(),Zi(Aa),Zi(Do),KV();break;case 5:YV(i);break;case 4:Db();break;case 13:Zi(cr);break;case 19:Zi(cr);break;case 10:WV(i.type._context);break;case 22:case 23:a8()}n=n.return}if(Gs=t,ss=t=Pm(t.current,null),to=Ka=e,ys=0,YM=null,r8=UR=uv=0,da=jA=null,E0!==null){for(e=0;e<E0.length;e++)if(n=E0[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}E0=null}return t}function Hde(t,e){do{var n=ss;try{if(VV(),mD.current=MO,AO){for(var i=mr.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}AO=!1}if(cv=0,Fs=gs=mr=null,GA=!1,$M=0,i8.current=null,n===null||n.return===null){ys=1,YM=e,ss=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=to,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=sK(o);if(f!==null){f.flags&=-257,oK(f,o,a,s,e),f.mode&1&&rK(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){rK(s,c,e),l8();break e}l=Error(rt(426))}}else if(or&&a.mode&1){var g=sK(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),oK(g,o,a,s,e),HV(Ob(l,a));break e}}s=l=Ob(l,a),ys!==4&&(ys=2),jA===null?jA=[s]:jA.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=Mde(s,l,e);JY(s,v);break e;case 1:a=l;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Cm===null||!Cm.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=Ede(s,a,e);JY(s,b);break e}}s=s.return}while(s!==null)}Wde(n)}catch(S){e=S,ss===n&&n!==null&&(ss=n=n.return);continue}break}while(1)}function jde(){var t=EO.current;return EO.current=MO,t===null?MO:t}function l8(){(ys===0||ys===3||ys===2)&&(ys=4),Gs===null||!(uv&268435455)&&!(UR&268435455)||$p(Gs,to)}function PO(t,e){var n=$n;$n|=2;var i=jde();(Gs!==t||to!==e)&&(sf=null,z0(t,e));do try{yCe();break}catch(r){Hde(t,r)}while(1);if(VV(),$n=n,EO.current=i,ss!==null)throw Error(rt(261));return Gs=null,to=0,ys}function yCe(){for(;ss!==null;)Vde(ss)}function xCe(){for(;ss!==null&&!V2e();)Vde(ss)}function Vde(t){var e=qde(t.alternate,t,Ka);t.memoizedProps=t.pendingProps,e===null?Wde(t):ss=e,i8.current=null}function Wde(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dCe(n,e),n!==null){n.flags&=32767,ss=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ys=6,ss=null;return}}else if(n=hCe(n,e,Ka),n!==null){ss=n;return}if(e=e.sibling,e!==null){ss=e;return}ss=e=t}while(e!==null);ys===0&&(ys=5)}function Xg(t,e,n){var i=pi,r=Pc.transition;try{Pc.transition=null,pi=1,bCe(t,e,n,i)}finally{Pc.transition=r,pi=i}return null}function bCe(t,e,n,i){do qx();while(Zp!==null);if($n&6)throw Error(rt(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(rt(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(eEe(t,s),t===Gs&&(ss=Gs=null,to=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ET||(ET=!0,Xde(uO,function(){return qx(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Pc.transition,Pc.transition=null;var o=pi;pi=1;var a=$n;$n|=4,i8.current=null,pCe(t,n),zde(n,t),UEe(kU),dO=!!BU,kU=BU=null,t.current=n,mCe(n),W2e(),$n=a,pi=o,Pc.transition=s}else t.current=n;if(ET&&(ET=!1,Zp=t,TO=r),s=t.pendingLanes,s===0&&(Cm=null),X2e(n.stateNode),Ea(t,Hr()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(CO)throw CO=!1,t=n6,n6=null,t;return TO&1&&t.tag!==0&&qx(),s=t.pendingLanes,s&1?t===i6?VA++:(VA=0,i6=t):VA=0,tg(),null}function qx(){if(Zp!==null){var t=Ahe(TO),e=Pc.transition,n=pi;try{if(Pc.transition=null,pi=16>t?16:t,Zp===null)var i=!1;else{if(t=Zp,Zp=null,TO=0,$n&6)throw Error(rt(331));var r=$n;for($n|=4,Et=t.current;Et!==null;){var s=Et,o=s.child;if(Et.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Et=c;Et!==null;){var h=Et;switch(h.tag){case 0:case 11:case 15:HA(8,h,s)}var u=h.child;if(u!==null)u.return=h,Et=u;else for(;Et!==null;){h=Et;var d=h.sibling,f=h.return;if(kde(h),h===c){Et=null;break}if(d!==null){d.return=f,Et=d;break}Et=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Et=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Et=o;else e:for(;Et!==null;){if(s=Et,s.flags&2048)switch(s.tag){case 0:case 11:case 15:HA(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Et=v;break e}Et=s.return}}var y=t.current;for(Et=y;Et!==null;){o=Et;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Et=x;else e:for(o=y;Et!==null;){if(a=Et,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zR(9,a)}}catch(S){Mr(a,a.return,S)}if(a===o){Et=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Et=b;break e}Et=a.return}}if($n=r,tg(),jh&&typeof jh.onPostCommitFiberRoot=="function")try{jh.onPostCommitFiberRoot(OR,t)}catch{}i=!0}return i}finally{pi=n,Pc.transition=e}}return!1}function xK(t,e,n){e=Ob(n,e),e=Mde(t,e,1),t=Em(t,e,1),e=ea(),t!==null&&(tE(t,1,e),Ea(t,e))}function Mr(t,e,n){if(t.tag===3)xK(t,t,n);else for(;e!==null;){if(e.tag===3){xK(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Cm===null||!Cm.has(i))){t=Ob(n,t),t=Ede(e,t,1),e=Em(e,t,1),t=ea(),e!==null&&(tE(e,1,t),Ea(e,t));break}}e=e.return}}function wCe(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ea(),t.pingedLanes|=t.suspendedLanes&n,Gs===t&&(to&n)===n&&(ys===4||ys===3&&(to&130023424)===to&&500>Hr()-s8?z0(t,0):r8|=n),Ea(t,e)}function $de(t,e){e===0&&(t.mode&1?(e=gT,gT<<=1,!(gT&130023424)&&(gT=4194304)):e=1);var n=ea();t=If(t,e),t!==null&&(tE(t,e,n),Ea(t,n))}function _Ce(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$de(t,n)}function SCe(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(rt(314))}i!==null&&i.delete(e),$de(t,n)}var qde;qde=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Aa.current)xa=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xa=!1,uCe(t,e,n);xa=!!(t.flags&131072)}else xa=!1,or&&e.flags&1048576&&Khe(e,xO,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;vD(t,e),t=e.pendingProps;var r=Cb(e,Do.current);$x(e,n),r=ZV(null,e,i,t,r,n);var s=QV();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ma(i)?(s=!0,vO(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,qV(e),r.updater=FR,e.stateNode=r,r._reactInternals=e,WU(e,i,t,n),e=XU(null,e,i,!0,s,n)):(e.tag=0,or&&s&&UV(e),Xo(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(vD(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=MCe(i),t=fu(i,t),r){case 0:e=qU(null,e,i,t,n);break e;case 1:e=cK(null,e,i,t,n);break e;case 11:e=aK(null,e,i,t,n);break e;case 14:e=lK(null,e,i,fu(i.type,t),n);break e}throw Error(rt(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fu(i,r),qU(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fu(i,r),cK(t,e,i,r,n);case 3:e:{if(Dde(e),t===null)throw Error(rt(387));i=e.pendingProps,s=e.memoizedState,r=s.element,ede(t,e),_O(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ob(Error(rt(423)),e),e=uK(t,e,i,n,r);break e}else if(i!==r){r=Ob(Error(rt(424)),e),e=uK(t,e,i,n,r);break e}else for(sl=Mm(e.stateNode.containerInfo.firstChild),fl=e,or=!0,mu=null,n=rde(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tb(),i===r){e=Bf(t,e,n);break e}Xo(t,e,i,n)}e=e.child}return e;case 5:return sde(e),t===null&&HU(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,FU(i,r)?o=null:s!==null&&FU(i,s)&&(e.flags|=32),Pde(t,e),Xo(t,e,o,n),e.child;case 6:return t===null&&HU(e),null;case 13:return Ode(t,e,n);case 4:return XV(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Pb(e,null,i,n):Xo(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fu(i,r),aK(t,e,i,r,n);case 7:return Xo(t,e,e.pendingProps,n),e.child;case 8:return Xo(t,e,e.pendingProps.children,n),e.child;case 12:return Xo(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Fi(bO,i._currentValue),i._currentValue=o,s!==null)if(Iu(s.value,o)){if(s.children===r.children&&!Aa.current){e=Bf(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=_f(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),jU(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(rt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jU(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Xo(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,$x(e,n),r=kc(r),i=i(r),e.flags|=1,Xo(t,e,i,n),e.child;case 14:return i=e.type,r=fu(i,e.pendingProps),r=fu(i.type,r),lK(t,e,i,r,n);case 15:return Cde(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:fu(i,r),vD(t,e),e.tag=1,Ma(i)?(t=!0,vO(e)):t=!1,$x(e,n),nde(e,i,r),WU(e,i,r,n),XU(null,e,i,!0,t,n);case 19:return Lde(t,e,n);case 22:return Tde(t,e,n)}throw Error(rt(156,e.tag))};function Xde(t,e){return bhe(t,e)}function ACe(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(t,e,n,i){return new ACe(t,e,n,i)}function c8(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MCe(t){if(typeof t=="function")return c8(t)?1:0;if(t!=null){if(t=t.$$typeof,t===TV)return 11;if(t===PV)return 14}return 2}function Pm(t,e){var n=t.alternate;return n===null?(n=Mc(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bD(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")c8(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ux:return U0(n.children,r,s,e);case CV:o=8,r|=8;break;case mU:return t=Mc(12,n,e,r|2),t.elementType=mU,t.lanes=s,t;case gU:return t=Mc(13,n,e,r),t.elementType=gU,t.lanes=s,t;case vU:return t=Mc(19,n,e,r),t.elementType=vU,t.lanes=s,t;case ihe:return GR(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case the:o=10;break e;case nhe:o=9;break e;case TV:o=11;break e;case PV:o=14;break e;case Fp:o=16,i=null;break e}throw Error(rt(130,t==null?t:typeof t,""))}return e=Mc(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function U0(t,e,n,i){return t=Mc(7,t,i,e),t.lanes=n,t}function GR(t,e,n,i){return t=Mc(22,t,i,e),t.elementType=ihe,t.lanes=n,t.stateNode={isHidden:!1},t}function GF(t,e,n){return t=Mc(6,t,null,e),t.lanes=n,t}function HF(t,e,n){return e=Mc(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ECe(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_F(0),this.expirationTimes=_F(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_F(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function u8(t,e,n,i,r,s,o,a,l){return t=new ECe(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mc(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qV(s),t}function CCe(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cx,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Yde(t){if(!t)return Hm;t=t._reactInternals;e:{if(Bv(t)!==t||t.tag!==1)throw Error(rt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ma(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(rt(171))}if(t.tag===1){var n=t.type;if(Ma(n))return Xhe(t,n,e)}return e}function Kde(t,e,n,i,r,s,o,a,l){return t=u8(n,i,!0,t,r,s,o,a,l),t.context=Yde(null),n=t.current,i=ea(),r=Tm(n),s=_f(i,r),s.callback=e??null,Em(n,s,r),t.current.lanes=r,tE(t,r,i),Ea(t,i),t}function HR(t,e,n,i){var r=e.current,s=ea(),o=Tm(r);return n=Yde(n),e.context===null?e.context=n:e.pendingContext=n,e=_f(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Em(r,e,o),t!==null&&(Mu(t,r,o,s),pD(t,r,o)),o}function DO(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bK(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function h8(t,e){bK(t,e),(t=t.alternate)&&bK(t,e)}function TCe(){return null}var Jde=typeof reportError=="function"?reportError:function(t){console.error(t)};function d8(t){this._internalRoot=t}jR.prototype.render=d8.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(rt(409));HR(t,e,null,null)};jR.prototype.unmount=d8.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hv(function(){HR(null,t,null,null)}),e[Rf]=null}};function jR(t){this._internalRoot=t}jR.prototype.unstable_scheduleHydration=function(t){if(t){var e=Che();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wp.length&&e!==0&&e<Wp[n].priority;n++);Wp.splice(n,0,t),n===0&&Phe(t)}};function f8(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function VR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wK(){}function PCe(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=DO(o);s.call(c)}}var o=Kde(e,i,t,0,null,!1,!1,"",wK);return t._reactRootContainer=o,t[Rf]=o.current,GM(t.nodeType===8?t.parentNode:t),hv(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=DO(l);a.call(c)}}var l=u8(t,0,!1,null,null,!1,!1,"",wK);return t._reactRootContainer=l,t[Rf]=l.current,GM(t.nodeType===8?t.parentNode:t),hv(function(){HR(e,l,n,i)}),l}function WR(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=DO(o);a.call(l)}}HR(e,o,t,r)}else o=PCe(n,e,t,r,i);return DO(o)}Mhe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pA(e.pendingLanes);n!==0&&(LV(e,n|1),Ea(e,Hr()),!($n&6)&&(Lb=Hr()+500,tg()))}break;case 13:hv(function(){var i=If(t,1);if(i!==null){var r=ea();Mu(i,t,1,r)}}),h8(t,1)}};RV=function(t){if(t.tag===13){var e=If(t,134217728);if(e!==null){var n=ea();Mu(e,t,134217728,n)}h8(t,134217728)}};Ehe=function(t){if(t.tag===13){var e=Tm(t),n=If(t,e);if(n!==null){var i=ea();Mu(n,t,e,i)}h8(t,e)}};Che=function(){return pi};The=function(t,e){var n=pi;try{return pi=t,e()}finally{pi=n}};CU=function(t,e,n){switch(e){case"input":if(bU(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=BR(i);if(!r)throw Error(rt(90));she(i),bU(i,r)}}}break;case"textarea":ahe(t,n);break;case"select":e=n.value,e!=null&&Hx(t,!!n.multiple,e,!1)}};phe=o8;mhe=hv;var DCe={usingClientEntryPoint:!1,Events:[iE,px,BR,dhe,fhe,o8]},N_={findFiberByHostInstance:M0,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},OCe={bundleType:N_.bundleType,version:N_.version,rendererPackageName:N_.rendererPackageName,rendererConfig:N_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xf.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yhe(t),t===null?null:t.stateNode},findFiberByHostInstance:N_.findFiberByHostInstance||TCe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var CT=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!CT.isDisabled&&CT.supportsFiber)try{OR=CT.inject(OCe),jh=CT}catch{}}Sl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DCe;Sl.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f8(e))throw Error(rt(200));return CCe(t,e,null,n)};Sl.createRoot=function(t,e){if(!f8(t))throw Error(rt(299));var n=!1,i="",r=Jde;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=u8(t,1,!1,null,null,n,!1,i,r),t[Rf]=e.current,GM(t.nodeType===8?t.parentNode:t),new d8(e)};Sl.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(rt(188)):(t=Object.keys(t).join(","),Error(rt(268,t)));return t=yhe(e),t=t===null?null:t.stateNode,t};Sl.flushSync=function(t){return hv(t)};Sl.hydrate=function(t,e,n){if(!VR(e))throw Error(rt(200));return WR(null,t,e,!0,n)};Sl.hydrateRoot=function(t,e,n){if(!f8(t))throw Error(rt(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Jde;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Kde(e,null,t,1,n??null,r,!1,s,o),t[Rf]=e.current,GM(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new jR(e)};Sl.render=function(t,e,n){if(!VR(e))throw Error(rt(200));return WR(null,t,e,!1,n)};Sl.unmountComponentAtNode=function(t){if(!VR(t))throw Error(rt(40));return t._reactRootContainer?(hv(function(){WR(null,null,t,!1,function(){t._reactRootContainer=null,t[Rf]=null})}),!0):!1};Sl.unstable_batchedUpdates=o8;Sl.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!VR(n))throw Error(rt(200));if(t==null||t._reactInternals===void 0)throw Error(rt(38));return WR(t,e,n,!1,i)};Sl.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Sl})(T2e);const TT=PR(Mb);var _K=Mb;dU.createRoot=_K.createRoot,dU.hydrateRoot=_K.hydrateRoot;/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function KM(){return KM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},KM.apply(this,arguments)}var Qp;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qp||(Qp={}));const SK="popstate";function LCe(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return o6("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Zde(r)}return ICe(e,n,null,t)}function ws(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function p8(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RCe(){return Math.random().toString(36).substr(2,8)}function AK(t,e){return{usr:t.state,key:t.key,idx:e}}function o6(t,e,n,i){return n===void 0&&(n=null),KM({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?vw(e):e,{state:n,key:e&&e.key||i||RCe()})}function Zde(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function vw(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function ICe(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Qp.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(KM({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function u(){a=Qp.Pop;let g=h(),v=g==null?null:g-c;c=g,l&&l({action:a,location:m.location,delta:v})}function d(g,v){a=Qp.Push;let y=o6(m.location,g,v);n&&n(y,g),c=h()+1;let x=AK(y,c),b=m.createHref(y);try{o.pushState(x,"",b)}catch{r.location.assign(b)}s&&l&&l({action:a,location:m.location,delta:1})}function f(g,v){a=Qp.Replace;let y=o6(m.location,g,v);n&&n(y,g),c=h();let x=AK(y,c),b=m.createHref(y);o.replaceState(x,"",b),s&&l&&l({action:a,location:m.location,delta:0})}function p(g){let v=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof g=="string"?g:Zde(g);return ws(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let m={get action(){return a},get location(){return t(r,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(SK,u),l=g,()=>{r.removeEventListener(SK,u),l=null}},createHref(g){return e(r,g)},createURL:p,encodeLocation(g){let v=p(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:f,go(g){return o.go(g)}};return m}var MK;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(MK||(MK={}));function BCe(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?vw(e):e,r=tfe(i.pathname||"/",n);if(r==null)return null;let s=Qde(t);kCe(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=WCe(s[a],XCe(r));return o}function Qde(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ws(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=G0([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(ws(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Qde(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:jCe(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of efe(s.path))r(s,o,l)}),e}function efe(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=efe(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function kCe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:VCe(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const FCe=/^:\w+$/,NCe=3,zCe=2,UCe=1,GCe=10,HCe=-2,EK=t=>t==="*";function jCe(t,e){let n=t.split("/"),i=n.length;return n.some(EK)&&(i+=HCe),e&&(i+=zCe),n.filter(r=>!EK(r)).reduce((r,s)=>r+(FCe.test(s)?NCe:s===""?UCe:GCe),i)}function VCe(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function WCe(t,e){let{routesMeta:n}=t,i={},r="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=r==="/"?e:e.slice(r.length)||"/",h=$Ce({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(i,h.params);let u=a.route;s.push({params:i,pathname:G0([r,h.pathname]),pathnameBase:eTe(G0([r,h.pathnameBase])),route:u}),h.pathnameBase!=="/"&&(r=G0([r,h.pathnameBase]))}return s}function $Ce(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=qCe(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,u)=>{if(h==="*"){let d=a[u]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return c[h]=YCe(a[u]||"",h),c},{}),pathname:s,pathnameBase:o,pattern:t}}function qCe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),p8(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(i.push(a),"/([^\\/]+)"));return t.endsWith("*")?(i.push("*"),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function XCe(t){try{return decodeURI(t)}catch(e){return p8(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function YCe(t,e){try{return decodeURIComponent(t)}catch(n){return p8(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function tfe(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function KCe(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?vw(t):t;return{pathname:n?n.startsWith("/")?n:JCe(n,e):e,search:tTe(i),hash:nTe(r)}}function JCe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function jF(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZCe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function QCe(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=vw(t):(r=KM({},t),ws(!r.pathname||!r.pathname.includes("?"),jF("?","pathname","search",r)),ws(!r.pathname||!r.pathname.includes("#"),jF("#","pathname","hash",r)),ws(!r.search||!r.search.includes("#"),jF("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(i||o==null)a=n;else{let u=e.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),u-=1;r.pathname=d.join("/")}a=u>=0?e[u]:"/"}let l=KCe(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const G0=t=>t.join("/").replace(/\/\/+/g,"/"),eTe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),tTe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nTe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function iTe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rTe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const sTe=typeof Object.is=="function"?Object.is:rTe,{useState:oTe,useEffect:aTe,useLayoutEffect:lTe,useDebugValue:cTe}=LM;function uTe(t,e,n){const i=e(),[{inst:r},s]=oTe({inst:{value:i,getSnapshot:e}});return lTe(()=>{r.value=i,r.getSnapshot=e,VF(r)&&s({inst:r})},[t,i,e]),aTe(()=>(VF(r)&&s({inst:r}),t(()=>{VF(r)&&s({inst:r})})),[t]),cTe(i),i}function VF(t){const e=t.getSnapshot,n=t.value;try{const i=e();return!sTe(n,i)}catch{return!0}}function hTe(t,e,n){return e()}const dTe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fTe=!dTe,pTe=fTe?hTe:uTe;"useSyncExternalStore"in LM&&(t=>t.useSyncExternalStore)(LM);const nfe=W.createContext(null),m8=W.createContext(null),g8=W.createContext(null),$R=W.createContext(null),sE=W.createContext({outlet:null,matches:[]}),ife=W.createContext(null);function a6(){return a6=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a6.apply(this,arguments)}function oE(){return W.useContext($R)!=null}function qR(){return oE()||ws(!1),W.useContext($R).location}function ng(){oE()||ws(!1);let{basename:t,navigator:e}=W.useContext(g8),{matches:n}=W.useContext(sE),{pathname:i}=qR(),r=JSON.stringify(ZCe(n).map(a=>a.pathnameBase)),s=W.useRef(!1);return W.useEffect(()=>{s.current=!0}),W.useCallback(function(a,l){if(l===void 0&&(l={}),!s.current)return;if(typeof a=="number"){e.go(a);return}let c=QCe(a,JSON.parse(r),i,l.relative==="path");t!=="/"&&(c.pathname=c.pathname==="/"?t:G0([t,c.pathname])),(l.replace?e.replace:e.push)(c,l.state,l)},[t,e,r,i])}function mTe(t,e){oE()||ws(!1);let{navigator:n}=W.useContext(g8),i=W.useContext(m8),{matches:r}=W.useContext(sE),s=r[r.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=qR(),c;if(e){var h;let m=typeof e=="string"?vw(e):e;a==="/"||(h=m.pathname)!=null&&h.startsWith(a)||ws(!1),c=m}else c=l;let u=c.pathname||"/",d=a==="/"?u:u.slice(a.length)||"/",f=BCe(t,{pathname:d}),p=xTe(f&&f.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:G0([a,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?a:G0([a,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),r,i||void 0);return e&&p?W.createElement($R.Provider,{value:{location:a6({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Qp.Pop}},p):p}function gTe(){let t=STe(),e=iTe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),n?W.createElement("pre",{style:r},n):null,s)}class vTe extends W.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?W.createElement(sE.Provider,{value:this.props.routeContext},W.createElement(ife.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yTe(t){let{routeContext:e,match:n,children:i}=t,r=W.useContext(nfe);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),W.createElement(sE.Provider,{value:e},i)}function xTe(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let i=t,r=n==null?void 0:n.errors;if(r!=null){let s=i.findIndex(o=>o.route.id&&(r==null?void 0:r[o.route.id]));s>=0||ws(!1),i=i.slice(0,Math.min(i.length,s+1))}return i.reduceRight((s,o,a)=>{let l=o.route.id?r==null?void 0:r[o.route.id]:null,c=null;n&&(o.route.ErrorBoundary?c=W.createElement(o.route.ErrorBoundary,null):o.route.errorElement?c=o.route.errorElement:c=W.createElement(gTe,null));let h=e.concat(i.slice(0,a+1)),u=()=>{let d=s;return l?d=c:o.route.Component?d=W.createElement(o.route.Component,null):o.route.element&&(d=o.route.element),W.createElement(yTe,{match:o,routeContext:{outlet:s,matches:h},children:d})};return n&&(o.route.ErrorBoundary||o.route.errorElement||a===0)?W.createElement(vTe,{location:n.location,component:c,error:l,children:u(),routeContext:{outlet:null,matches:h}}):u()},null)}var CK;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator"})(CK||(CK={}));var OO;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(OO||(OO={}));function bTe(t){let e=W.useContext(m8);return e||ws(!1),e}function wTe(t){let e=W.useContext(sE);return e||ws(!1),e}function _Te(t){let e=wTe(),n=e.matches[e.matches.length-1];return n.route.id||ws(!1),n.route.id}function STe(){var t;let e=W.useContext(ife),n=bTe(OO.UseRouteError),i=_Te(OO.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function rfe(t){let{to:e,replace:n,state:i,relative:r}=t;oE()||ws(!1);let s=W.useContext(m8),o=ng();return W.useEffect(()=>{s&&s.navigation.state!=="idle"||o(e,{replace:n,state:i,relative:r})}),null}function ef(t){ws(!1)}function ATe(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Qp.Pop,navigator:s,static:o=!1}=t;oE()&&ws(!1);let a=e.replace(/^\/*/,"/"),l=W.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof i=="string"&&(i=vw(i));let{pathname:c="/",search:h="",hash:u="",state:d=null,key:f="default"}=i,p=W.useMemo(()=>{let m=tfe(c,a);return m==null?null:{location:{pathname:m,search:h,hash:u,state:d,key:f},navigationType:r}},[a,c,h,u,d,f,r]);return p==null?null:W.createElement(g8.Provider,{value:l},W.createElement($R.Provider,{children:n,value:p}))}function MTe(t){let{children:e,location:n}=t,i=W.useContext(nfe),r=i&&!e?i.router.routes:l6(e);return mTe(r,n)}var TK;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(TK||(TK={}));new Promise(()=>{});function l6(t,e){e===void 0&&(e=[]);let n=[];return W.Children.forEach(t,(i,r)=>{if(!W.isValidElement(i))return;let s=[...e,r];if(i.type===W.Fragment){n.push.apply(n,l6(i.props.children,s));return}i.type!==ef&&ws(!1),!i.props.index||!i.props.children||ws(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=l6(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ETe(t){let{basename:e,children:n,window:i}=t,r=W.useRef();r.current==null&&(r.current=LCe({window:i,v5Compat:!0}));let s=r.current,[o,a]=W.useState({action:s.action,location:s.location});return W.useLayoutEffect(()=>s.listen(a),[s]),W.createElement(ATe,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s})}var PK;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(PK||(PK={}));var DK;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(DK||(DK={}));/*! js-cookie v3.0.1 | MIT */function PT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}var CTe={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function c6(t,e){function n(r,s,o){if(!(typeof document>"u")){o=PT({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var l in o)o[l]&&(a+="; "+l,o[l]!==!0&&(a+="="+o[l].split(";")[0]));return document.cookie=r+"="+t.write(s,r)+a}}function i(r){if(!(typeof document>"u"||arguments.length&&!r)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var l=s[a].split("="),c=l.slice(1).join("=");try{var h=decodeURIComponent(l[0]);if(o[h]=t.read(c,h),r===h)break}catch{}}return r?o[r]:o}}return Object.create({set:n,get:i,remove:function(r,s){n(r,"",PT({},s,{expires:-1}))},withAttributes:function(r){return c6(this.converter,PT({},this.attributes,r))},withConverter:function(r){return c6(PT({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Ls=c6(CTe,{path:"/"}),yw=W.createContext(null);yw.Consumer;var dc=function(){return dc=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},dc.apply(this,arguments)},TTe=function(){function t(e,n,i,r,s){this.authStorageType=n,this.authStorageName=e,this.authTimeStorageName="".concat(e,"_storage"),this.stateStorageName="".concat(e,"_state"),this.refreshTokenName=i,this.cookieDomain=r,this.cookieSecure=s,this.authStorageTypeName="".concat(this.authStorageName,"_type"),this.isUsingRefreshToken=!!this.refreshTokenName,this.refreshTokenTimeName=this.refreshTokenName?"".concat(this.refreshTokenName,"_time"):null}return t.prototype.initialToken=function(){return this.authStorageType==="cookie"?this.initialCookieToken_():this.initialLSToken_()},t.prototype.initialCookieToken_=function(){var e=Ls.get(this.authStorageName),n=Ls.get(this.authStorageTypeName),i=Ls.get(this.authTimeStorageName),r=Ls.get(this.stateStorageName),s=this.isUsingRefreshToken&&this.refreshTokenName!=null?Ls.get(this.refreshTokenName):null,o=this.isUsingRefreshToken&&this.refreshTokenTimeName!=null?Ls.get(this.refreshTokenTimeName):null;return this.checkTokenExist(e,n,i,r,s,o)},t.prototype.initialLSToken_=function(){var e=localStorage.getItem(this.authStorageName),n=localStorage.getItem(this.authStorageTypeName),i=localStorage.getItem(this.authTimeStorageName),r=localStorage.getItem(this.stateStorageName),s=this.isUsingRefreshToken&&this.refreshTokenName!=null?localStorage.getItem(this.refreshTokenName):null,o=this.isUsingRefreshToken&&this.refreshTokenTimeName!=null?localStorage.getItem(this.refreshTokenTimeName):null;return this.checkTokenExist(e,n,i,r,s,o)},t.prototype.checkTokenExist=function(e,n,i,r,s,o){if(e&&n&&i&&r){var a=new Date(i);try{var l=JSON.parse(r),c={auth:{token:e,type:n,expiresAt:a},userState:l,isSignIn:!0,isUsingRefreshToken:this.isUsingRefreshToken,refresh:void 0};if(this.isUsingRefreshToken&&s&&o){var h=new Date(o);return dc(dc({},c),{refresh:{token:s,expiresAt:h}})}else return dc(dc({},c),{refresh:null})}catch{return{auth:null,refresh:null,userState:null,isUsingRefreshToken:this.isUsingRefreshToken,isSignIn:!1}}}else return{auth:null,refresh:null,userState:null,isUsingRefreshToken:this.isUsingRefreshToken,isSignIn:!1}},t.prototype.syncTokens=function(e){e.auth?this.isUsingRefreshToken&&e.refresh?this.setToken(e.auth.token,e.auth.type,e.refresh.token,e.refresh.expiresAt,e.auth.expiresAt,e.userState):this.setToken(e.auth.token,e.auth.type,null,null,e.auth.expiresAt,e.userState):this.removeToken()},t.prototype.setToken=function(e,n,i,r,s,o){this.authStorageType==="cookie"?this.setCookieToken_(e,n,i,s,r,o):this.setLSToken_(e,n,i,s,r,o)},t.prototype.setCookieToken_=function(e,n,i,r,s,o){Ls.set(this.authStorageName,e,{expires:r,domain:this.cookieDomain,secure:this.cookieSecure}),Ls.set(this.authStorageTypeName,n,{expires:r,domain:this.cookieDomain,secure:this.cookieSecure}),Ls.set(this.authTimeStorageName,r.toISOString(),{expires:r,domain:this.cookieDomain,secure:this.cookieSecure}),o&&Ls.set(this.stateStorageName,JSON.stringify(o),{expires:r,domain:this.cookieDomain,secure:this.cookieSecure}),this.isUsingRefreshToken&&this.refreshTokenName&&i&&Ls.set(this.refreshTokenName,i,{expires:r,domain:this.cookieDomain,secure:this.cookieSecure}),this.isUsingRefreshToken&&this.refreshTokenTimeName&&s&&Ls.set(this.refreshTokenTimeName,s.toISOString(),{expires:r,domain:this.cookieDomain,secure:this.cookieSecure})},t.prototype.setLSToken_=function(e,n,i,r,s,o){localStorage.setItem(this.authStorageName,e),localStorage.setItem(this.authStorageTypeName,n),localStorage.setItem(this.authTimeStorageName,r.toISOString()),o&&localStorage.setItem(this.stateStorageName,JSON.stringify(o)),this.isUsingRefreshToken&&this.refreshTokenName&&i&&localStorage.setItem(this.refreshTokenName,i),this.isUsingRefreshToken&&this.refreshTokenTimeName&&s&&localStorage.setItem(this.refreshTokenTimeName,s.toISOString())},t.prototype.removeToken=function(){this.authStorageType==="cookie"?this.removeCookieToken_():this.removeLSToken_()},t.prototype.removeCookieToken_=function(){Ls.remove(this.authStorageName,{domain:this.cookieDomain,secure:this.cookieSecure}),Ls.remove(this.authTimeStorageName,{domain:this.cookieDomain,secure:this.cookieSecure}),Ls.remove(this.authStorageTypeName,{domain:this.cookieDomain,secure:this.cookieSecure}),Ls.remove(this.stateStorageName,{domain:this.cookieDomain,secure:this.cookieSecure}),this.isUsingRefreshToken&&this.refreshTokenName&&Ls.remove(this.refreshTokenName,{domain:this.cookieDomain,secure:this.cookieSecure}),this.isUsingRefreshToken&&this.refreshTokenTimeName&&Ls.remove(this.refreshTokenTimeName,{domain:this.cookieDomain,secure:this.cookieSecure})},t.prototype.removeLSToken_=function(){localStorage.removeItem(this.authStorageName),localStorage.removeItem(this.authTimeStorageName),localStorage.removeItem(this.authStorageTypeName),localStorage.removeItem(this.stateStorageName),this.isUsingRefreshToken&&this.refreshTokenName&&localStorage.removeItem(this.refreshTokenName),this.isUsingRefreshToken&&this.refreshTokenTimeName&&localStorage.removeItem(this.refreshTokenTimeName)},t}(),Dm;(function(t){t[t.SignIn=0]="SignIn",t[t.SignOut=1]="SignOut",t[t.RefreshToken=2]="RefreshToken"})(Dm||(Dm={}));function PTe(t,e){switch(e.type){case Dm.SignIn:return dc(dc({},t),{auth:e.payload.auth,refresh:e.payload.refresh,userState:e.payload.userState,isSignIn:!0});case Dm.SignOut:return dc(dc({},t),{auth:null,refresh:null,userState:null,isSignIn:!1});case Dm.RefreshToken:return t.isSignIn&&t.auth&&t.refresh?dc(dc({},t),{auth:{token:e.payload.newAuthToken?e.payload.newAuthToken:t.auth.token,type:t.auth.type,expiresAt:e.payload.newAuthTokenExpireIn?new Date(new Date().getTime()+e.payload.newAuthTokenExpireIn*60*1e3):t.auth.expiresAt},refresh:{token:e.payload.newRefreshToken?e.payload.newRefreshToken:t.refresh.token,expiresAt:e.payload.newRefreshTokenExpiresIn?new Date(new Date().getTime()+e.payload.newRefreshTokenExpiresIn*60*1e3):t.refresh.expiresAt},userState:e.payload.newAuthUserState?e.payload.newAuthUserState:t.userState}):t}}function OK(t){return{type:Dm.SignIn,payload:t}}function DTe(t){return{type:Dm.RefreshToken,payload:t}}function v8(){return{type:Dm.SignOut}}function OTe(t,e){var n=W.useRef(t),i=W.useRef(null);return W.useEffect(function(){n.current=t},[t]),W.useEffect(function(){var r=function(){return n.current()};return typeof e=="number"&&(i.current=window.setInterval(r,e*60*1e3)),function(){i.current&&window.clearTimeout(i.current)}},[e]),i}var sfe=function(t){var e=t.children,n=t.authType,i=t.authName,r=t.cookieDomain,s=t.cookieSecure,o=t.refresh;if(n==="cookie"&&!r)throw new Error("authType 'cookie' requires 'cookieDomain' and 'cookieSecure' props in AuthProvider");var a=o?"".concat(i,"_refresh"):null,l=new TTe(i,n,a,r,s),c=W.useReducer(PTe,l.initialToken()),h=c[0],u=c[1];return o&&OTe(function(){var d,f,p,m;o.refreshApiCallback({authToken:(d=h.auth)===null||d===void 0?void 0:d.token,authTokenExpireAt:(f=h.auth)===null||f===void 0?void 0:f.expiresAt,authUserState:h.userState,refreshToken:(p=h.refresh)===null||p===void 0?void 0:p.token,refreshTokenExpiresAt:(m=h.refresh)===null||m===void 0?void 0:m.expiresAt}).then(function(g){g.isSuccess&&u(DTe(g))}).catch(function(){})},h.isSignIn?o.interval:null),W.useEffect(function(){l.syncTokens(h)},[h]),W.createElement(yw.Provider,{value:{authState:h,dispatch:u}},e)},LK=function(t){var e=t.children,n=t.loginPath,i=W.useContext(yw);if(i===null)throw new Error("Auth Provider is missing. Please add the AuthProvider before Router");var r=function(){return i.authState.auth&&new Date(i.authState.auth.expiresAt)>new Date?!0:(i.dispatch(v8()),!1)},s=qR();return r()?e:W.createElement(rfe,{to:n,state:{from:s},replace:!0})};/**
 *@author Arkadip Bhattacharya <in2arkadipb13@gmail.com>
 *@fileoverview Sign In functionality <hook>
 *@copyright Arkadip Bhattacharya 2020
 *@license Apache-2.0
 *
 * Copyright 2020 Arkadip Bhattacharya
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ofe(){var t=W.useContext(yw);if(t===null)throw new Error("Auth Provider is missing. Please add the AuthProvider before Router");return function(e){var n=e.token,i=e.tokenType,r=e.authState,s=e.expiresIn,o=e.refreshToken,a=e.refreshTokenExpireIn,l=new Date(new Date().getTime()+s*60*1e3);if(t.authState.isUsingRefreshToken)if(o&&a){var c=new Date(new Date().getTime()+a*60*1e3);return t.dispatch(OK({auth:{token:n,type:i,expiresAt:l},userState:r||null,refresh:{token:o,expiresAt:c}})),!0}else throw new Error('Make sure you given "refreshToken" and  "refreshTokenExpireIn" parameter');else{if(o&&a)throw new Error(`The app doesn't implement 'refreshToken' feature.
So you have to implement refresh token feature from 'AuthProvider' before using it.`);return t.dispatch(OK({auth:{token:n,type:i,expiresAt:l},userState:r||null,refresh:null})),!0}}}function LTe(){var t=W.useContext(yw);if(t===null)throw new Error("Auth Provider is missing. Please add the AuthProvider before Router");return function(){try{return t?(t.dispatch(v8()),!0):!1}catch{return!1}}}function RTe(){var t=W.useContext(yw);if(t===null)throw new Error("Auth Provider is missing. Please add the AuthProvider before Router");return function(){return t.authState.auth?new Date(t.authState.auth.expiresAt)>new Date?!0:(t.dispatch(v8()),!1):!1}}sfe.defaultProps={cookieDomain:window.location.hostname,cookieSecure:window.location.protocol==="https:"};const afe=W.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),XR=W.createContext({}),YR=W.createContext(null),KR=typeof document<"u",LO=KR?W.useLayoutEffect:W.useEffect,lfe=W.createContext({strict:!1});function ITe(t,e,n,i){const{visualElement:r}=W.useContext(XR),s=W.useContext(lfe),o=W.useContext(YR),a=W.useContext(afe).reducedMotion,l=W.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(t,{visualState:e,parent:r,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;return W.useInsertionEffect(()=>{c&&c.update(n,o)}),LO(()=>{c&&c.render()}),W.useEffect(()=>{c&&c.updateFeatures()}),(window.HandoffAppearAnimations?LO:W.useEffect)(()=>{c&&c.animationState&&c.animationState.animateChanges()}),c}function wx(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function BTe(t,e,n){return W.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):wx(n)&&(n.current=i))},[e])}function JM(t){return typeof t=="string"||Array.isArray(t)}function JR(t){return typeof t=="object"&&typeof t.start=="function"}const y8=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],x8=["initial",...y8];function ZR(t){return JR(t.animate)||x8.some(e=>JM(t[e]))}function cfe(t){return!!(ZR(t)||t.variants)}function kTe(t,e){if(ZR(t)){const{initial:n,animate:i}=t;return{initial:n===!1||JM(n)?n:void 0,animate:JM(i)?i:void 0}}return t.inherit!==!1?e:{}}function FTe(t){const{initial:e,animate:n}=kTe(t,W.useContext(XR));return W.useMemo(()=>({initial:e,animate:n}),[RK(e),RK(n)])}function RK(t){return Array.isArray(t)?t.join(" "):t}const IK={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ZM={};for(const t in IK)ZM[t]={isEnabled:e=>IK[t].some(n=>!!e[n])};function NTe(t){for(const e in t)ZM[e]={...ZM[e],...t[e]}}function b8(t){const e=W.useRef(null);return e.current===null&&(e.current=t()),e.current}const WA={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let zTe=1;function UTe(){return b8(()=>{if(WA.hasEverUpdated)return zTe++})}const w8=W.createContext({}),ufe=W.createContext({}),GTe=Symbol.for("motionComponentSymbol");function HTe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&NTe(t);function s(a,l){let c;const h={...W.useContext(afe),...a,layoutId:jTe(a)},{isStatic:u}=h,d=FTe(a),f=u?void 0:UTe(),p=i(a,u);if(!u&&KR){d.visualElement=ITe(r,p,h,e);const m=W.useContext(ufe),g=W.useContext(lfe).strict;d.visualElement&&(c=d.visualElement.loadFeatures(h,g,t,f,m))}return W.createElement(XR.Provider,{value:d},c&&d.visualElement?W.createElement(c,{visualElement:d.visualElement,...h}):null,n(r,a,f,BTe(p,d.visualElement,l),p,u,d.visualElement))}const o=W.forwardRef(s);return o[GTe]=r,o}function jTe({layoutId:t}){const e=W.useContext(w8).id;return e&&t!==void 0?e+"-"+t:t}function VTe(t){function e(i,r={}){return HTe(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const WTe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _8(t){return typeof t!="string"||t.includes("-")?!1:!!(WTe.indexOf(t)>-1||/[A-Z]/.test(t))}const RO={};function $Te(t){Object.assign(RO,t)}const QR=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kv=new Set(QR);function hfe(t,{layout:e,layoutId:n}){return kv.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!RO[t]||t==="opacity")}const Oa=t=>!!(t&&t.getVelocity),qTe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},XTe=QR.length;function YTe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let s="";for(let o=0;o<XTe;o++){const a=QR[o];if(t[a]!==void 0){const l=qTe[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(t,i?"":s):n&&i&&(s="none"),s}const dfe=t=>e=>typeof e=="string"&&e.startsWith(t),ffe=dfe("--"),u6=dfe("var(--"),KTe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,dv=(t,e,n)=>Math.min(Math.max(n,t),e),Fv={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},$A={...Fv,transform:t=>dv(0,1,t)},DT={...Fv,default:1},qA=t=>Math.round(t*1e5)/1e5,QM=/(-)?([\d]*\.?[\d])+/g,h6=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,JTe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function aE(t){return typeof t=="string"}const lE=t=>({test:e=>aE(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),kp=lE("deg"),Wh=lE("%"),nn=lE("px"),ZTe=lE("vh"),QTe=lE("vw"),BK={...Wh,parse:t=>Wh.parse(t)/100,transform:t=>Wh.transform(t*100)},kK={...Fv,transform:Math.round},pfe={borderWidth:nn,borderTopWidth:nn,borderRightWidth:nn,borderBottomWidth:nn,borderLeftWidth:nn,borderRadius:nn,radius:nn,borderTopLeftRadius:nn,borderTopRightRadius:nn,borderBottomRightRadius:nn,borderBottomLeftRadius:nn,width:nn,maxWidth:nn,height:nn,maxHeight:nn,size:nn,top:nn,right:nn,bottom:nn,left:nn,padding:nn,paddingTop:nn,paddingRight:nn,paddingBottom:nn,paddingLeft:nn,margin:nn,marginTop:nn,marginRight:nn,marginBottom:nn,marginLeft:nn,rotate:kp,rotateX:kp,rotateY:kp,rotateZ:kp,scale:DT,scaleX:DT,scaleY:DT,scaleZ:DT,skew:kp,skewX:kp,skewY:kp,distance:nn,translateX:nn,translateY:nn,translateZ:nn,x:nn,y:nn,z:nn,perspective:nn,transformPerspective:nn,opacity:$A,originX:BK,originY:BK,originZ:nn,zIndex:kK,fillOpacity:$A,strokeOpacity:$A,numOctaves:kK};function S8(t,e,n,i){const{style:r,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,h=!0;for(const u in e){const d=e[u];if(ffe(u)){s[u]=d;continue}const f=pfe[u],p=KTe(d,f);if(kv.has(u)){if(l=!0,o[u]=p,!h)continue;d!==(f.default||0)&&(h=!1)}else u.startsWith("origin")?(c=!0,a[u]=p):r[u]=p}if(e.transform||(l||i?r.transform=YTe(t.transform,n,h,i):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:f=0}=a;r.transformOrigin=`${u} ${d} ${f}`}}const A8=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mfe(t,e,n){for(const i in e)!Oa(e[i])&&!hfe(i,n)&&(t[i]=e[i])}function ePe({transformTemplate:t},e,n){return W.useMemo(()=>{const i=A8();return S8(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function tPe(t,e,n){const i=t.style||{},r={};return mfe(r,i,t),Object.assign(r,ePe(t,e,n)),t.transformValues?t.transformValues(r):r}function nPe(t,e,n){const i={},r=tPe(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const iPe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function IO(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||iPe.has(t)}let gfe=t=>!IO(t);function rPe(t){t&&(gfe=e=>e.startsWith("on")?!IO(e):t(e))}try{rPe(require("@emotion/is-prop-valid").default)}catch{}function sPe(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(gfe(r)||n===!0&&IO(r)||!e&&!IO(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function FK(t,e,n){return typeof t=="string"?t:nn.transform(e+n*t)}function oPe(t,e,n){const i=FK(e,t.x,t.width),r=FK(n,t.y,t.height);return`${i} ${r}`}const aPe={offset:"stroke-dashoffset",array:"stroke-dasharray"},lPe={offset:"strokeDashoffset",array:"strokeDasharray"};function cPe(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?aPe:lPe;t[s.offset]=nn.transform(-i);const o=nn.transform(e),a=nn.transform(n);t[s.array]=`${o} ${a}`}function M8(t,{attrX:e,attrY:n,originX:i,originY:r,pathLength:s,pathSpacing:o=1,pathOffset:a=0,...l},c,h,u){if(S8(t,l,c,u),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:f,dimensions:p}=t;d.transform&&(p&&(f.transform=d.transform),delete d.transform),p&&(i!==void 0||r!==void 0||f.transform)&&(f.transformOrigin=oPe(p,i!==void 0?i:.5,r!==void 0?r:.5)),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),s!==void 0&&cPe(d,s,o,a,!1)}const vfe=()=>({...A8(),attrs:{}}),E8=t=>typeof t=="string"&&t.toLowerCase()==="svg";function uPe(t,e,n,i){const r=W.useMemo(()=>{const s=vfe();return M8(s,e,{enableHardwareAcceleration:!1},E8(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};mfe(s,t.style,t),r.style={...s,...r.style}}return r}function hPe(t=!1){return(n,i,r,s,{latestValues:o},a)=>{const c=(_8(n)?uPe:nPe)(i,o,a,n),u={...sPe(i,typeof n=="string",t),...c,ref:s},{children:d}=i,f=W.useMemo(()=>Oa(d)?d.get():d,[d]);return r&&(u["data-projection-id"]=r),W.createElement(n,{...u,children:f})}}const C8=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function yfe(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const xfe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bfe(t,e,n,i){yfe(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(xfe.has(r)?r:C8(r),e.attrs[r])}function T8(t,e){const{style:n}=t,i={};for(const r in n)(Oa(n[r])||e.style&&Oa(e.style[r])||hfe(r,t))&&(i[r]=n[r]);return i}function wfe(t,e){const n=T8(t,e);for(const i in t)if(Oa(t[i])||Oa(e[i])){const r=i==="x"||i==="y"?"attr"+i.toUpperCase():i;n[r]=t[i]}return n}function P8(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}const BO=t=>Array.isArray(t),dPe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),fPe=t=>BO(t)?t[t.length-1]||0:t;function wD(t){const e=Oa(t)?t.get():t;return dPe(e)?e.toValue():e}function pPe({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,s){const o={latestValues:mPe(i,r,s,t),renderState:e()};return n&&(o.mount=a=>n(i,a,o)),o}const _fe=t=>(e,n)=>{const i=W.useContext(XR),r=W.useContext(YR),s=()=>pPe(t,e,i,r);return n?s():b8(s)};function mPe(t,e,n,i){const r={},s=i(t,{});for(const d in s)r[d]=wD(s[d]);let{initial:o,animate:a}=t;const l=ZR(t),c=cfe(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const u=h?a:o;return u&&typeof u!="boolean"&&!JR(u)&&(Array.isArray(u)?u:[u]).forEach(f=>{const p=P8(t,f);if(!p)return;const{transitionEnd:m,transition:g,...v}=p;for(const y in v){let x=v[y];if(Array.isArray(x)){const b=h?x.length-1:0;x=x[b]}x!==null&&(r[y]=x)}for(const y in m)r[y]=m[y]}),r}const gPe={useVisualState:_fe({scrapeMotionValuesFromProps:wfe,createRenderState:vfe,onMount:(t,e,{renderState:n,latestValues:i})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}M8(n,i,{enableHardwareAcceleration:!1},E8(e.tagName),t.transformTemplate),bfe(e,n)}})},vPe={useVisualState:_fe({scrapeMotionValuesFromProps:T8,createRenderState:A8})};function yPe(t,{forwardMotionProps:e=!1},n,i){return{..._8(t)?gPe:vPe,preloadedFeatures:n,useRender:hPe(e),createVisualElement:i,Component:t}}function mf(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const Sfe=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function eI(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const xPe=t=>e=>Sfe(e)&&t(e,eI(e));function Sf(t,e,n,i){return mf(t,e,xPe(n),i)}const bPe=(t,e)=>n=>e(t(n)),Om=(...t)=>t.reduce(bPe);function Afe(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const NK=Afe("dragHorizontal"),zK=Afe("dragVertical");function Mfe(t){let e=!1;if(t==="y")e=zK();else if(t==="x")e=NK();else{const n=NK(),i=zK();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function Efe(){const t=Mfe(!0);return t?(t(),!1):!0}class ig{constructor(e){this.isMounted=!1,this.node=e}update(){}}function wPe(t){let e=[],n=[],i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,h=!1)=>{const u=h&&r,d=u?e:n;return c&&o.add(l),d.indexOf(l)===-1&&(d.push(l),u&&r&&(i=e.length)),l},cancel:l=>{const c=n.indexOf(l);c!==-1&&n.splice(c,1),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,n]=[n,e],n.length=0,i=e.length,i)for(let c=0;c<i;c++){const h=e[c];h(l),o.has(h)&&(a.schedule(h),t())}r=!1,s&&(s=!1,a.process(l))}};return a}const Ao={delta:0,timestamp:0,isProcessing:!1},_Pe=40;let d6=!0,e2=!1;const cE=["read","update","preRender","render","postRender"],tI=cE.reduce((t,e)=>(t[e]=wPe(()=>e2=!0),t),{}),ar=cE.reduce((t,e)=>{const n=tI[e];return t[e]=(i,r=!1,s=!1)=>(e2||APe(),n.schedule(i,r,s)),t},{}),jm=cE.reduce((t,e)=>(t[e]=tI[e].cancel,t),{}),WF=cE.reduce((t,e)=>(t[e]=()=>tI[e].process(Ao),t),{}),SPe=t=>tI[t].process(Ao),Cfe=t=>{e2=!1,Ao.delta=d6?1e3/60:Math.max(Math.min(t-Ao.timestamp,_Pe),1),Ao.timestamp=t,Ao.isProcessing=!0,cE.forEach(SPe),Ao.isProcessing=!1,e2&&(d6=!1,requestAnimationFrame(Cfe))},APe=()=>{e2=!0,d6=!0,Ao.isProcessing||requestAnimationFrame(Cfe)};function UK(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.type==="touch"||Efe())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[i]&&ar.update(()=>a[i](s,o))};return Sf(t.current,n,r,{passive:!t.getProps()[i]})}class MPe extends ig{mount(){this.unmount=Om(UK(this.node,!0),UK(this.node,!1))}unmount(){}}class EPe extends ig{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Om(mf(this.node.current,"focus",()=>this.onFocus()),mf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Tfe=(t,e)=>e?t===e?!0:Tfe(t,e.parentElement):!1,Ns=t=>t;function $F(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,eI(n))}class CPe extends ig{constructor(){super(...arguments),this.removeStartListeners=Ns,this.removeEndListeners=Ns,this.removeAccessibleListeners=Ns,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const i=this.node.getProps(),s=Sf(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h}=this.node.getProps();ar.update(()=>{Tfe(this.node.current,a.target)?c&&c(a,l):h&&h(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=Sf(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Om(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||$F("up",(l,c)=>{const{onTap:h}=this.node.getProps();h&&ar.update(()=>h(l,c))})};this.removeEndListeners(),this.removeEndListeners=mf(this.node.current,"keyup",o),$F("down",(a,l)=>{this.startPress(a,l)})},n=mf(this.node.current,"keydown",e),i=()=>{this.isPressing&&$F("cancel",(s,o)=>this.cancelPress(s,o))},r=mf(this.node.current,"blur",i);this.removeAccessibleListeners=Om(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&ar.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Efe()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&ar.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=Sf(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=mf(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Om(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const f6=new WeakMap,qF=new WeakMap,TPe=t=>{const e=f6.get(t.target);e&&e(t)},PPe=t=>{t.forEach(TPe)};function DPe({root:t,...e}){const n=t||document;qF.has(n)||qF.set(n,{});const i=qF.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(PPe,{root:t,...e})),i[r]}function OPe(t,e,n){const i=DPe(e);return f6.set(t,n),i.observe(t),()=>{f6.delete(t),i.unobserve(t)}}const LPe={some:0,all:1};class RPe extends ig{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:LPe[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:u}=this.node.getProps(),d=c?h:u;d&&d(l)};return OPe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(IPe(e,n))&&this.startObserver()}unmount(){}}function IPe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const BPe={inView:{Feature:RPe},tap:{Feature:CPe},focus:{Feature:EPe},hover:{Feature:MPe}};function Pfe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function kPe(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function FPe(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function nI(t,e,n){const i=t.getProps();return P8(i,e,n!==void 0?n:i.custom,kPe(t),FPe(t))}const NPe="framerAppearId",zPe="data-"+C8(NPe);let UPe=Ns,D8=Ns;const Lm=t=>t*1e3,Af=t=>t/1e3,GPe={current:!1},Dfe=t=>Array.isArray(t)&&typeof t[0]=="number";function Ofe(t){return!!(!t||typeof t=="string"&&Lfe[t]||Dfe(t)||Array.isArray(t)&&t.every(Ofe))}const gA=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Lfe={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:gA([0,.65,.55,1]),circOut:gA([.55,0,1,.45]),backIn:gA([.31,.01,.66,-.59]),backOut:gA([.33,1.53,.69,.99])};function Rfe(t){if(t)return Dfe(t)?gA(t):Array.isArray(t)?t.map(Rfe):Lfe[t]}function HPe(t,e,n,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=Rfe(a);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const GK={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},XF={},Ife={};for(const t in GK)Ife[t]=()=>(XF[t]===void 0&&(XF[t]=GK[t]()),XF[t]);function jPe(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const Bfe=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,VPe=1e-7,WPe=12;function $Pe(t,e,n,i,r){let s,o,a=0;do o=e+(n-e)/2,s=Bfe(o,i,r)-t,s>0?n=o:e=o;while(Math.abs(s)>VPe&&++a<WPe);return o}function uE(t,e,n,i){if(t===e&&n===i)return Ns;const r=s=>$Pe(s,0,1,t,n);return s=>s===0||s===1?s:Bfe(r(s),e,i)}const qPe=uE(.42,0,1,1),XPe=uE(0,0,.58,1),kfe=uE(.42,0,.58,1),YPe=t=>Array.isArray(t)&&typeof t[0]!="number",Ffe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Nfe=t=>e=>1-t(1-e),zfe=t=>1-Math.sin(Math.acos(t)),O8=Nfe(zfe),KPe=Ffe(O8),Ufe=uE(.33,1.53,.69,.99),L8=Nfe(Ufe),JPe=Ffe(L8),ZPe=t=>(t*=2)<1?.5*L8(t):.5*(2-Math.pow(2,-10*(t-1))),QPe={linear:Ns,easeIn:qPe,easeInOut:kfe,easeOut:XPe,circIn:zfe,circInOut:KPe,circOut:O8,backIn:L8,backInOut:JPe,backOut:Ufe,anticipate:ZPe},HK=t=>{if(Array.isArray(t)){D8(t.length===4);const[e,n,i,r]=t;return uE(e,n,i,r)}else if(typeof t=="string")return QPe[t];return t},R8=(t,e)=>n=>!!(aE(n)&&JTe.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Gfe=(t,e,n)=>i=>{if(!aE(i))return i;const[r,s,o,a]=i.match(QM);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},e3e=t=>dv(0,255,t),YF={...Fv,transform:t=>Math.round(e3e(t))},T0={test:R8("rgb","red"),parse:Gfe("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+YF.transform(t)+", "+YF.transform(e)+", "+YF.transform(n)+", "+qA($A.transform(i))+")"};function t3e(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const p6={test:R8("#"),parse:t3e,transform:T0.transform},_x={test:R8("hsl","hue"),parse:Gfe("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Wh.transform(qA(e))+", "+Wh.transform(qA(n))+", "+qA($A.transform(i))+")"},qo={test:t=>T0.test(t)||p6.test(t)||_x.test(t),parse:t=>T0.test(t)?T0.parse(t):_x.test(t)?_x.parse(t):p6.parse(t),transform:t=>aE(t)?t:t.hasOwnProperty("red")?T0.transform(t):_x.transform(t)},dr=(t,e,n)=>-n*t+n*e+t;function KF(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function n3e({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,o=0;if(!e)r=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=KF(l,a,t+1/3),s=KF(l,a,t),o=KF(l,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const JF=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},i3e=[p6,T0,_x],r3e=t=>i3e.find(e=>e.test(t));function jK(t){const e=r3e(t);let n=e.parse(t);return e===_x&&(n=n3e(n)),n}const Hfe=(t,e)=>{const n=jK(t),i=jK(e),r={...n};return s=>(r.red=JF(n.red,i.red,s),r.green=JF(n.green,i.green,s),r.blue=JF(n.blue,i.blue,s),r.alpha=dr(n.alpha,i.alpha,s),T0.transform(r))},jfe="${c}",Vfe="${n}";function s3e(t){var e,n;return isNaN(t)&&aE(t)&&(((e=t.match(QM))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(h6))===null||n===void 0?void 0:n.length)||0)>0}function kO(t){typeof t=="number"&&(t=`${t}`);const e=[];let n=0,i=0;const r=t.match(h6);r&&(n=r.length,t=t.replace(h6,jfe),e.push(...r.map(qo.parse)));const s=t.match(QM);return s&&(i=s.length,t=t.replace(QM,Vfe),e.push(...s.map(Fv.parse))),{values:e,numColors:n,numNumbers:i,tokenised:t}}function Wfe(t){return kO(t).values}function $fe(t){const{values:e,numColors:n,tokenised:i}=kO(t),r=e.length;return s=>{let o=i;for(let a=0;a<r;a++)o=o.replace(a<n?jfe:Vfe,a<n?qo.transform(s[a]):qA(s[a]));return o}}const o3e=t=>typeof t=="number"?0:t;function a3e(t){const e=Wfe(t);return $fe(t)(e.map(o3e))}const Vm={test:s3e,parse:Wfe,createTransformer:$fe,getAnimatableNone:a3e};function qfe(t,e){return typeof t=="number"?n=>dr(t,e,n):qo.test(t)?Hfe(t,e):Yfe(t,e)}const Xfe=(t,e)=>{const n=[...t],i=n.length,r=t.map((s,o)=>qfe(s,e[o]));return s=>{for(let o=0;o<i;o++)n[o]=r[o](s);return n}},l3e=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=qfe(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}},Yfe=(t,e)=>{const n=Vm.createTransformer(e),i=kO(t),r=kO(e);return i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?Om(Xfe(i.values,r.values),n):o=>`${o>0?e:t}`},t2=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},VK=(t,e)=>n=>dr(t,e,n);function c3e(t){return typeof t=="number"?VK:typeof t=="string"?qo.test(t)?Hfe:Yfe:Array.isArray(t)?Xfe:typeof t=="object"?l3e:VK}function u3e(t,e,n){const i=[],r=n||c3e(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=r(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ns:e;a=Om(l,a)}i.push(a)}return i}function Kfe(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(D8(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=u3e(e,i,r),a=o.length,l=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const u=t2(t[h],t[h+1],c);return o[h](u)};return n?c=>l(dv(t[0],t[s-1],c)):l}function h3e(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=t2(0,e,i);t.push(dr(n,1,r))}}function d3e(t){const e=[0];return h3e(e,t.length-1),e}function f3e(t,e){return t.map(n=>n*e)}function p3e(t,e){return t.map(()=>e||kfe).splice(0,t.length-1)}function FO({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=YPe(i)?i.map(HK):HK(i),s={done:!1,value:e[0]},o=f3e(n&&n.length===e.length?n:d3e(e),t),a=Kfe(o,e,{ease:Array.isArray(r)?r:p3e(e,r)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function Jfe(t,e){return e?t*(1e3/e):0}const m3e=5;function Zfe(t,e,n){const i=Math.max(e-m3e,0);return Jfe(n-t(i),e-i)}const ZF=.001,g3e=.01,WK=10,v3e=.05,y3e=1;function x3e({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,s;UPe(t<=Lm(WK));let o=1-e;o=dv(v3e,y3e,o),t=dv(g3e,WK,Af(t)),o<1?(r=c=>{const h=c*o,u=h*t,d=h-n,f=m6(c,o),p=Math.exp(-u);return ZF-d/f*p},s=c=>{const u=c*o*t,d=u*n+n,f=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-u),m=m6(Math.pow(c,2),o);return(-r(c)+ZF>0?-1:1)*((d-f)*p)/m}):(r=c=>{const h=Math.exp(-c*t),u=(c-n)*t+1;return-ZF+h*u},s=c=>{const h=Math.exp(-c*t),u=(n-c)*(t*t);return h*u});const a=5/t,l=w3e(r,s,a);if(t=Lm(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:t}}}const b3e=12;function w3e(t,e,n){let i=n;for(let r=1;r<b3e;r++)i=i-t(i)/e(i);return i}function m6(t,e){return t*Math.sqrt(1-e*e)}const _3e=["duration","bounce"],S3e=["stiffness","damping","mass"];function $K(t,e){return e.some(n=>t[n]!==void 0)}function A3e(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!$K(t,S3e)&&$K(t,_3e)){const n=x3e(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function Qfe({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],s=t[t.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:c,velocity:h,duration:u,isResolvedFromDuration:d}=A3e(i),f=h?-Af(h):0,p=l/(2*Math.sqrt(a*c)),m=s-r,g=Af(Math.sqrt(a/c)),v=Math.abs(m)<5;n||(n=v?.01:2),e||(e=v?.005:.5);let y;if(p<1){const x=m6(g,p);y=b=>{const S=Math.exp(-p*g*b);return s-S*((f+p*g*m)/x*Math.sin(x*b)+m*Math.cos(x*b))}}else if(p===1)y=x=>s-Math.exp(-g*x)*(m+(f+g*m)*x);else{const x=g*Math.sqrt(p*p-1);y=b=>{const S=Math.exp(-p*g*b),A=Math.min(x*b,300);return s-S*((f+p*g*m)*Math.sinh(A)+x*m*Math.cosh(A))/x}}return{calculatedDuration:d&&u||null,next:x=>{const b=y(x);if(d)o.done=x>=u;else{let S=f;x!==0&&(p<1?S=Zfe(y,x,b):S=0);const A=Math.abs(S)<=n,E=Math.abs(s-b)<=e;o.done=A&&E}return o.value=o.done?s:b,o}}}function qK({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const u=t[0],d={done:!1,value:u},f=M=>a!==void 0&&M<a||l!==void 0&&M>l,p=M=>a===void 0?l:l===void 0||Math.abs(a-M)<Math.abs(l-M)?a:l;let m=n*e;const g=u+m,v=o===void 0?g:o(g);v!==g&&(m=v-u);const y=M=>-m*Math.exp(-M/i),x=M=>v+y(M),b=M=>{const C=y(M),T=x(M);d.done=Math.abs(C)<=c,d.value=d.done?v:T};let S,A;const E=M=>{f(d.value)&&(S=M,A=Qfe({keyframes:[d.value,p(d.value)],velocity:Zfe(x,M,d.value),damping:r,stiffness:s,restDelta:c,restSpeed:h}))};return E(0),{calculatedDuration:null,next:M=>{let C=!1;return!A&&S===void 0&&(C=!0,b(M),E(M)),S!==void 0&&M>S?A.next(M-S):(!C&&b(M),d)}}}const M3e=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ar.update(e,!0),stop:()=>jm.update(e),now:()=>Ao.isProcessing?Ao.timestamp:performance.now()}},E3e={decay:qK,inertia:qK,tween:FO,keyframes:FO,spring:Qfe},XK=2e4;function YK(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<XK;)e+=n,i=t.next(e);return e>=XK?1/0:e}function NO({autoplay:t=!0,delay:e=0,driver:n=M3e,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:h,onUpdate:u,...d}){let f=1,p=!1,m,g;const v=()=>{m&&m(),g=new Promise(j=>{m=j})};v();let y;const x=E3e[r]||FO;let b;x!==FO&&typeof i[0]!="number"&&(b=Kfe([0,100],i,{clamp:!1}),i=[0,100]);const S=x({...d,keyframes:i});let A;a==="mirror"&&(A=x({...d,keyframes:[...i].reverse(),velocity:-(d.velocity||0)}));let E="idle",M=null,C=null,T=null;S.calculatedDuration===null&&s&&(S.calculatedDuration=YK(S));const{calculatedDuration:D}=S;let L=1/0,I=1/0;D!==null&&(L=D+o,I=L*(s+1)-o);let R=0;const H=j=>{if(C===null)return;f>0&&(C=Math.min(C,j)),M!==null?R=M:R=(j-C)*f;const z=R-e,Y=z<0;R=Math.max(z,0),E==="finished"&&M===null&&(R=I);let J=R,K=S;if(s){const se=R/L;let ce=Math.floor(se),ge=se%1;!ge&&se>=1&&(ge=1),ge===1&&ce--,ce=Math.min(ce,s+1);const oe=!!(ce%2);oe&&(a==="reverse"?(ge=1-ge,o&&(ge-=o/L)):a==="mirror"&&(K=A));let ae=dv(0,1,ge);R>I&&(ae=a==="reverse"&&oe?1:0),J=ae*L}const X=Y?{done:!1,value:i[0]}:K.next(J);b&&(X.value=b(X.value));let{done:te}=X;!Y&&D!==null&&(te=R>=I);const re=M===null&&(E==="finished"||E==="running"&&te||f<0&&R<=0);return u&&u(X.value),re&&F(),X},Z=()=>{y&&y.stop(),y=void 0},ee=()=>{E="idle",Z(),v(),C=T=null},F=()=>{E="finished",h&&h(),Z(),v()},V=()=>{if(p)return;y||(y=n(H));const j=y.now();l&&l(),E="running",M!==null?C=j-M:C||(C=j),T=C,M=null,y.start()};t&&V();const U={then(j,z){return g.then(j,z)},get time(){return Af(R)},set time(j){j=Lm(j),R=j,M!==null||!y||f===0?M=j:C=y.now()-j/f},get duration(){const j=S.calculatedDuration===null?YK(S):S.calculatedDuration;return Af(j)},get speed(){return f},set speed(j){j===f||!y||(f=j,U.time=Af(R))},get state(){return E},play:V,pause:()=>{E="paused",M=R},stop:()=>{p=!0,E!=="idle"&&(E="idle",c&&c(),ee())},cancel:()=>{T!==null&&H(T),ee()},complete:()=>{E="finished"},sample:j=>(C=0,H(j))};return U}const C3e=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),OT=10,T3e=2e4,P3e=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Ofe(e.ease);function D3e(t,e,{onUpdate:n,onComplete:i,...r}){if(!(Ife.waapi()&&C3e.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l;const c=()=>{l=new Promise(m=>{a=m})};c();let{keyframes:h,duration:u=300,ease:d}=r;if(P3e(e,r)){const m=NO({...r,repeat:0,delay:0});let g={done:!1,value:h[0]};const v=[];let y=0;for(;!g.done&&y<T3e;)g=m.sample(y),v.push(g.value),y+=OT;h=v,u=y-OT,d="linear"}const f=HPe(t.owner.current,e,h,{...r,duration:u,ease:d}),p=()=>{ar.update(()=>f.cancel()),a(),c()};return f.onfinish=()=>{t.set(jPe(h,r)),i&&i(),p()},{then(m,g){return l.then(m,g)},get time(){return Af(f.currentTime||0)},set time(m){f.currentTime=Lm(m)},get speed(){return f.playbackRate},set speed(m){f.playbackRate=m},get duration(){return Af(u)},play:()=>{o||f.play()},pause:()=>f.pause(),stop:()=>{if(o=!0,f.playState==="idle")return;const{currentTime:m}=f;if(m){const g=NO({...r,autoplay:!1});t.setWithVelocity(g.sample(m-OT).value,g.sample(m).value,OT)}p()},complete:()=>f.finish(),cancel:p}}function O3e({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Ns,pause:Ns,stop:Ns,then:s=>(s(),Promise.resolve()),cancel:Ns,complete:Ns});return e?NO({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const L3e={type:"spring",stiffness:500,damping:25,restSpeed:10},R3e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),I3e={type:"keyframes",duration:.8},B3e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},k3e=(t,{keyframes:e})=>e.length>2?I3e:kv.has(t)?t.startsWith("scale")?R3e(e[1]):L3e:B3e,g6=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&Vm.test(e)&&!e.startsWith("url(")),F3e=new Set(["brightness","contrast","saturate","opacity"]);function N3e(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(QM)||[];if(!i)return t;const r=n.replace(i,"");let s=F3e.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const z3e=/([a-z-]*)\(.*?\)/g,v6={...Vm,getAnimatableNone:t=>{const e=t.match(z3e);return e?e.map(N3e).join(" "):t}},U3e={...pfe,color:qo,backgroundColor:qo,outlineColor:qo,fill:qo,stroke:qo,borderColor:qo,borderTopColor:qo,borderRightColor:qo,borderBottomColor:qo,borderLeftColor:qo,filter:v6,WebkitFilter:v6},I8=t=>U3e[t];function B8(t,e){let n=I8(t);return n!==v6&&(n=Vm),n.getAnimatableNone?n.getAnimatableNone(e):void 0}function G3e({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}function KK(t){return t===0||typeof t=="string"&&parseFloat(t)===0&&t.indexOf(" ")===-1}function JK(t){return typeof t=="number"?0:B8("",t)}function epe(t,e){return t[e]||t.default||t}function H3e(t,e,n,i){const r=g6(e,n);let s=i.from!==void 0?i.from:t.get();if(s==="none"&&r&&typeof n=="string"?s=B8(e,n):KK(s)&&typeof n=="string"?s=JK(n):!Array.isArray(n)&&KK(n)&&typeof s=="string"&&(n=JK(s)),Array.isArray(n)){for(let o=0;o<n.length;o++)n[o]===null&&(n[o]=o===0?s:n[o-1]);return n}else return[s,n]}const k8=(t,e,n,i={})=>r=>{const s=epe(i,t)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-Lm(o);const l=H3e(e,t,n,s),c=l[0],h=l[l.length-1],u=g6(t,c),d=g6(t,h);let f={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:p=>{e.set(p),s.onUpdate&&s.onUpdate(p)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(G3e(s)||(f={...f,...k3e(t,f)}),f.duration&&(f.duration=Lm(f.duration)),f.repeatDelay&&(f.repeatDelay=Lm(f.repeatDelay)),!u||!d||GPe.current||s.type===!1)return O3e(f);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const p=D3e(e,t,f);if(p)return p}return NO(f)};function zO(t){return!!(Oa(t)&&t.add)}const j3e=t=>/^\-?\d*\.?\d+$/.test(t),V3e=t=>/^0[^.\s]+$/.test(t);function F8(t,e){t.indexOf(e)===-1&&t.push(e)}function N8(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class z8{constructor(){this.subscriptions=[]}add(e){return F8(this.subscriptions,e),()=>N8(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const W3e=t=>!isNaN(parseFloat(t));class $3e{constructor(e,n={}){this.version="10.10.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:o}=Ao;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,ar.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ar.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=W3e(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new z8);const i=this.events[e].add(n);return e==="change"?()=>{i(),ar.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Jfe(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Rb(t,e){return new $3e(t,e)}const tpe=t=>e=>e.test(t),q3e={test:t=>t==="auto",parse:t=>t},npe=[Fv,nn,Wh,kp,QTe,ZTe,q3e],z_=t=>npe.find(tpe(t)),X3e=[...npe,qo,Vm],Y3e=t=>X3e.find(tpe(t));function K3e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Rb(n))}function J3e(t,e){const n=nI(t,e);let{transitionEnd:i={},transition:r={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...i};for(const o in s){const a=fPe(s[o]);K3e(t,o,a)}}function Z3e(t,e,n){var i,r;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(r=(i=n[l])!==null&&i!==void 0?i:t.readValue(l))!==null&&r!==void 0?r:e[l]),h!=null&&(typeof h=="string"&&(j3e(h)||V3e(h))?h=parseFloat(h):!Y3e(h)&&Vm.test(c)&&(h=B8(l,c)),t.addValue(l,Rb(h,{owner:t})),n[l]===void 0&&(n[l]=h),h!==null&&t.setBaseTarget(l,h))}}function Q3e(t,e){return e?(e[t]||e.default||e).from:void 0}function eDe(t,e,n){const i={};for(const r in t){const s=Q3e(r,e);if(s!==void 0)i[r]=s;else{const o=n.getValue(r);o&&(i[r]=o.get())}}return i}function tDe({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function ipe(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");i&&(s=i);const c=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const u in a){const d=t.getValue(u),f=a[u];if(!d||f===void 0||h&&tDe(h,u))continue;const p={delay:n,elapsed:0,...s};if(window.HandoffAppearAnimations&&!d.hasAnimated){const g=t.getProps()[zPe];g&&(p.elapsed=window.HandoffAppearAnimations(g,u,d,ar))}d.start(k8(u,d,f,t.shouldReduceMotion&&kv.has(u)?{type:!1}:p));const m=d.animation;zO(l)&&(l.add(u),m.then(()=>l.remove(u))),c.push(m)}return o&&Promise.all(c).then(()=>{o&&J3e(t,o)}),c}function y6(t,e,n={}){const i=nI(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const s=i?()=>Promise.all(ipe(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:u}=r;return nDe(t,e,c+l,h,u,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function nDe(t,e,n=0,i=0,r=1,s){const o=[],a=(t.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(t.variantChildren).sort(iDe).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(y6(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function iDe(t,e){return t.sortNodePosition(e)}function rDe(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>y6(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=y6(t,e,n);else{const r=typeof e=="function"?nI(t,e,n.custom):e;i=Promise.all(ipe(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const sDe=[...y8].reverse(),oDe=y8.length;function aDe(t){return e=>Promise.all(e.map(({animation:n,options:i})=>rDe(t,n,i)))}function lDe(t){let e=aDe(t);const n=uDe();let i=!0;const r=(l,c)=>{const h=nI(t,c);if(h){const{transition:u,transitionEnd:d,...f}=h;l={...l,...f,...d}}return l};function s(l){e=l(t)}function o(l,c){const h=t.getProps(),u=t.getVariantContext(!0)||{},d=[],f=new Set;let p={},m=1/0;for(let v=0;v<oDe;v++){const y=sDe[v],x=n[y],b=h[y]!==void 0?h[y]:u[y],S=JM(b),A=y===c?x.isActive:null;A===!1&&(m=v);let E=b===u[y]&&b!==h[y]&&S;if(E&&i&&t.manuallyAnimateOnMount&&(E=!1),x.protectedKeys={...p},!x.isActive&&A===null||!b&&!x.prevProp||JR(b)||typeof b=="boolean")continue;const M=cDe(x.prevProp,b);let C=M||y===c&&x.isActive&&!E&&S||v>m&&S;const T=Array.isArray(b)?b:[b];let D=T.reduce(r,{});A===!1&&(D={});const{prevResolvedValues:L={}}=x,I={...L,...D},R=H=>{C=!0,f.delete(H),x.needsAnimating[H]=!0};for(const H in I){const Z=D[H],ee=L[H];p.hasOwnProperty(H)||(Z!==ee?BO(Z)&&BO(ee)?!Pfe(Z,ee)||M?R(H):x.protectedKeys[H]=!0:Z!==void 0?R(H):f.add(H):Z!==void 0&&f.has(H)?R(H):x.protectedKeys[H]=!0)}x.prevProp=b,x.prevResolvedValues=D,x.isActive&&(p={...p,...D}),i&&t.blockInitialAnimation&&(C=!1),C&&!E&&d.push(...T.map(H=>({animation:H,options:{type:y,...l}})))}if(f.size){const v={};f.forEach(y=>{const x=t.getBaseTarget(y);x!==void 0&&(v[y]=x)}),d.push({animation:v})}let g=!!d.length;return i&&h.initial===!1&&!t.manuallyAnimateOnMount&&(g=!1),i=!1,g?e(d):Promise.resolve()}function a(l,c,h){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const d=o(h,l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function cDe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Pfe(e,t):!1}function Mg(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uDe(){return{animate:Mg(!0),whileInView:Mg(),whileHover:Mg(),whileTap:Mg(),whileDrag:Mg(),whileFocus:Mg(),exit:Mg()}}class hDe extends ig{constructor(e){super(e),e.animationState||(e.animationState=lDe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),JR(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let dDe=0;class fDe extends ig{constructor(){super(...arguments),this.id=dDe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const pDe={animation:{Feature:hDe},exit:{Feature:fDe}},ZK=(t,e)=>Math.abs(t-e);function mDe(t,e){const n=ZK(t.x,e.x),i=ZK(t.y,e.y);return Math.sqrt(n**2+i**2)}class rpe{constructor(e,n,{transformPagePoint:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=eN(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,u=mDe(c.offset,{x:0,y:0})>=3;if(!h&&!u)return;const{point:d}=c,{timestamp:f}=Ao;this.history.push({...d,timestamp:f});const{onStart:p,onMove:m}=this.handlers;h||(p&&p(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,c)},this.handlePointerMove=(c,h)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=QF(h,this.transformPagePoint),ar.update(this.updatePoint,!0)},this.handlePointerUp=(c,h)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:u,onSessionEnd:d}=this.handlers,f=eN(c.type==="pointercancel"?this.lastMoveEventInfo:QF(h,this.transformPagePoint),this.history);this.startEvent&&u&&u(c,f),d&&d(c,f)},!Sfe(e))return;this.handlers=n,this.transformPagePoint=i;const r=eI(e),s=QF(r,this.transformPagePoint),{point:o}=s,{timestamp:a}=Ao;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=n;l&&l(e,eN(s,this.history)),this.removeListeners=Om(Sf(window,"pointermove",this.handlePointerMove),Sf(window,"pointerup",this.handlePointerUp),Sf(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),jm.update(this.updatePoint)}}function QF(t,e){return e?{point:e(t.point)}:t}function QK(t,e){return{x:t.x-e.x,y:t.y-e.y}}function eN({point:t},e){return{point:t,delta:QK(t,spe(e)),offset:QK(t,gDe(e)),velocity:vDe(e,.1)}}function gDe(t){return t[0]}function spe(t){return t[t.length-1]}function vDe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=spe(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Lm(e)));)n--;if(!i)return{x:0,y:0};const s=Af(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function bl(t){return t.max-t.min}function x6(t,e=0,n=.01){return Math.abs(t-e)<=n}function eJ(t,e,n,i=.5){t.origin=i,t.originPoint=dr(e.min,e.max,t.origin),t.scale=bl(n)/bl(e),(x6(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=dr(n.min,n.max,t.origin)-t.originPoint,(x6(t.translate)||isNaN(t.translate))&&(t.translate=0)}function XA(t,e,n,i){eJ(t.x,e.x,n.x,i?i.originX:void 0),eJ(t.y,e.y,n.y,i?i.originY:void 0)}function tJ(t,e,n){t.min=n.min+e.min,t.max=t.min+bl(e)}function yDe(t,e,n){tJ(t.x,e.x,n.x),tJ(t.y,e.y,n.y)}function nJ(t,e,n){t.min=e.min-n.min,t.max=t.min+bl(e)}function YA(t,e,n){nJ(t.x,e.x,n.x),nJ(t.y,e.y,n.y)}function xDe(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?dr(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?dr(n,t,i.max):Math.min(t,n)),t}function iJ(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function bDe(t,{top:e,left:n,bottom:i,right:r}){return{x:iJ(t.x,n,r),y:iJ(t.y,e,i)}}function rJ(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function wDe(t,e){return{x:rJ(t.x,e.x),y:rJ(t.y,e.y)}}function _De(t,e){let n=.5;const i=bl(t),r=bl(e);return r>i?n=t2(e.min,e.max-i,t.min):i>r&&(n=t2(t.min,t.max-r,e.min)),dv(0,1,n)}function SDe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const b6=.35;function ADe(t=b6){return t===!1?t=0:t===!0&&(t=b6),{x:sJ(t,"left","right"),y:sJ(t,"top","bottom")}}function sJ(t,e,n){return{min:oJ(t,e),max:oJ(t,n)}}function oJ(t,e){return typeof t=="number"?t:t[e]||0}const aJ=()=>({translate:0,scale:1,origin:0,originPoint:0}),KA=()=>({x:aJ(),y:aJ()}),lJ=()=>({min:0,max:0}),ts=()=>({x:lJ(),y:lJ()});function Ah(t){return[t("x"),t("y")]}function ope({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function MDe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function EDe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function tN(t){return t===void 0||t===1}function w6({scale:t,scaleX:e,scaleY:n}){return!tN(t)||!tN(e)||!tN(n)}function Yg(t){return w6(t)||ape(t)||t.z||t.rotate||t.rotateX||t.rotateY}function ape(t){return cJ(t.x)||cJ(t.y)}function cJ(t){return t&&t!=="0%"}function UO(t,e,n){const i=t-n,r=e*i;return n+r}function uJ(t,e,n,i,r){return r!==void 0&&(t=UO(t,r,i)),UO(t,n,i)+e}function _6(t,e=0,n=1,i,r){t.min=uJ(t.min,e,n,i,r),t.max=uJ(t.max,e,n,i,r)}function lpe(t,{x:e,y:n}){_6(t.x,e.translate,e.scale,e.originPoint),_6(t.y,n.translate,n.scale,n.originPoint)}function CDe(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Sx(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,lpe(t,o)),i&&Yg(s.latestValues)&&Sx(t,s.latestValues))}e.x=hJ(e.x),e.y=hJ(e.y)}function hJ(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function zp(t,e){t.min=t.min+e,t.max=t.max+e}function dJ(t,e,[n,i,r]){const s=e[r]!==void 0?e[r]:.5,o=dr(t.min,t.max,s);_6(t,e[n],e[i],o,e.scale)}const TDe=["x","scaleX","originX"],PDe=["y","scaleY","originY"];function Sx(t,e){dJ(t.x,e,TDe),dJ(t.y,e,PDe)}function cpe(t,e){return ope(EDe(t.getBoundingClientRect(),e))}function DDe(t,e,n){const i=cpe(t,n),{scroll:r}=e;return r&&(zp(i.x,r.offset.x),zp(i.y,r.offset.y)),i}const ODe=new WeakMap;class LDe{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ts(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=l=>{this.stopAnimation(),n&&this.snapToCursor(eI(l,"page").point)},s=(l,c)=>{const{drag:h,dragPropagation:u,onDragStart:d}=this.getProps();if(h&&!u&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Mfe(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ah(p=>{let m=this.getAxisMotionValue(p).get()||0;if(Wh.test(m)){const{projection:g}=this.visualElement;if(g&&g.layout){const v=g.layout.layoutBox[p];v&&(m=bl(v)*(parseFloat(m)/100))}}this.originPoint[p]=m}),d&&ar.update(()=>d(l,c));const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},o=(l,c)=>{const{dragPropagation:h,dragDirectionLock:u,onDirectionLock:d,onDrag:f}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:p}=c;if(u&&this.currentDirection===null){this.currentDirection=RDe(p),this.currentDirection!==null&&d&&d(this.currentDirection);return}this.updateAxis("x",c.point,p),this.updateAxis("y",c.point,p),this.visualElement.render(),f&&f(l,c)},a=(l,c)=>this.stop(l,c);this.panSession=new rpe(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&ar.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!LT(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=xDe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:i}=this.visualElement.projection||{},r=this.constraints;e&&wx(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=bDe(i.layoutBox,e):this.constraints=!1,this.elastic=ADe(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ah(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=SDe(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!wx(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=DDe(i,r.root,this.visualElement.getTransformPagePoint());let o=wDe(r.layout.layoutBox,s);if(n){const a=n(MDe(o));this.hasMutatedConstraints=!!a,a&&(o=ope(a))}return o}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ah(h=>{if(!LT(h,n,this.currentDirection))return;let u=l&&l[h]||{};o&&(u={min:0,max:0});const d=r?200:1e6,f=r?40:1e7,p={type:"inertia",velocity:i?e[h]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...u};return this.startAxisValueAnimation(h,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(k8(e,i,0,n))}stopAnimation(){Ah(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Ah(n=>{const{drag:i}=this.getProps();if(!LT(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[n];s.set(e[n]-dr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!wx(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ah(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=_De({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ah(o=>{if(!LT(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(dr(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;ODe.set(this.visualElement,this);const e=this.visualElement.current,n=Sf(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();wx(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=mf(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ah(h=>{const u=this.getAxisMotionValue(h);u&&(this.originPoint[h]+=l[h].translate,u.set(u.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=b6,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function LT(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function RDe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class IDe extends ig{constructor(e){super(e),this.removeGroupControls=Ns,this.removeListeners=Ns,this.controls=new LDe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ns}unmount(){this.removeGroupControls(),this.removeListeners()}}const fJ=t=>(e,n)=>{t&&ar.update(()=>t(e,n))};class BDe extends ig{constructor(){super(...arguments),this.removePointerDownListener=Ns}onPointerDown(e){this.session=new rpe(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:fJ(e),onStart:fJ(n),onMove:i,onEnd:(s,o)=>{delete this.session,r&&ar.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=Sf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function kDe(){const t=W.useContext(YR);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=W.useId();return W.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}function pJ(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const U_={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(nn.test(t))t=parseFloat(t);else return t;const n=pJ(t,e.target.x),i=pJ(t,e.target.y);return`${n}% ${i}%`}},upe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function FDe(t){const e=upe.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function S6(t,e,n=1){const[i,r]=FDe(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);return s?s.trim():u6(r)?S6(r,e,n+1):r}function NDe(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const s=r.get();if(!u6(s))return;const o=S6(s,i);o&&r.set(o)});for(const r in e){const s=e[r];if(!u6(s))continue;const o=S6(s,i);o&&(e[r]=o,n||(n={}),n[r]===void 0&&(n[r]=s))}return{target:e,transitionEnd:n}}const mJ="_$css",zDe={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=t.includes("var("),s=[];r&&(t=t.replace(upe,f=>(s.push(f),mJ)));const o=Vm.parse(t);if(o.length>5)return i;const a=Vm.createTransformer(t),l=typeof o[0]!="number"?1:0,c=n.x.scale*e.x,h=n.y.scale*e.y;o[0+l]/=c,o[1+l]/=h;const u=dr(c,h,.5);typeof o[2+l]=="number"&&(o[2+l]/=u),typeof o[3+l]=="number"&&(o[3+l]/=u);let d=a(o);if(r){let f=0;d=d.replace(mJ,()=>{const p=s[f];return f++,p})}return d}};class UDe extends ue.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;$Te(GDe),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),WA.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ar.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function hpe(t){const[e,n]=kDe(),i=W.useContext(w8);return ue.createElement(UDe,{...t,layoutGroup:i,switchLayoutGroup:W.useContext(ufe),isPresent:e,safeToRemove:n})}const GDe={borderRadius:{...U_,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:U_,borderTopRightRadius:U_,borderBottomLeftRadius:U_,borderBottomRightRadius:U_,boxShadow:zDe},dpe=["TopLeft","TopRight","BottomLeft","BottomRight"],HDe=dpe.length,gJ=t=>typeof t=="string"?parseFloat(t):t,vJ=t=>typeof t=="number"||nn.test(t);function jDe(t,e,n,i,r,s){r?(t.opacity=dr(0,n.opacity!==void 0?n.opacity:1,VDe(i)),t.opacityExit=dr(e.opacity!==void 0?e.opacity:1,0,WDe(i))):s&&(t.opacity=dr(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let o=0;o<HDe;o++){const a=`border${dpe[o]}Radius`;let l=yJ(e,a),c=yJ(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||vJ(l)===vJ(c)?(t[a]=Math.max(dr(gJ(l),gJ(c),i),0),(Wh.test(c)||Wh.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=dr(e.rotate||0,n.rotate||0,i))}function yJ(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const VDe=fpe(0,.5,O8),WDe=fpe(.5,.95,Ns);function fpe(t,e,n){return i=>i<t?0:i>e?1:n(t2(t,e,i))}function xJ(t,e){t.min=e.min,t.max=e.max}function jl(t,e){xJ(t.x,e.x),xJ(t.y,e.y)}function bJ(t,e,n,i,r){return t-=e,t=UO(t,1/n,i),r!==void 0&&(t=UO(t,1/r,i)),t}function $De(t,e=0,n=1,i=.5,r,s=t,o=t){if(Wh.test(e)&&(e=parseFloat(e),e=dr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=dr(s.min,s.max,i);t===s&&(a-=e),t.min=bJ(t.min,e,n,a,r),t.max=bJ(t.max,e,n,a,r)}function wJ(t,e,[n,i,r],s,o){$De(t,e[n],e[i],e[r],e.scale,s,o)}const qDe=["x","scaleX","originX"],XDe=["y","scaleY","originY"];function _J(t,e,n,i){wJ(t.x,e,qDe,n?n.x:void 0,i?i.x:void 0),wJ(t.y,e,XDe,n?n.y:void 0,i?i.y:void 0)}function SJ(t){return t.translate===0&&t.scale===1}function ppe(t){return SJ(t.x)&&SJ(t.y)}function A6(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function AJ(t){return bl(t.x)/bl(t.y)}class YDe{constructor(){this.members=[]}add(e){F8(this.members,e),e.scheduleRender()}remove(e){if(N8(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function MJ(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:h}=n;l&&(i+=`rotate(${l}deg) `),c&&(i+=`rotateX(${c}deg) `),h&&(i+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const KDe=(t,e)=>t.depth-e.depth;class JDe{constructor(){this.children=[],this.isDirty=!1}add(e){F8(this.children,e),this.isDirty=!0}remove(e){N8(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(KDe),this.isDirty=!1,this.children.forEach(e)}}function ZDe(t,e){const n=performance.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(jm.read(i),t(s-e))};return ar.read(i,!0),()=>jm.read(i)}function QDe(t){window.MotionDebug&&window.MotionDebug.record(t)}function eOe(t){return t instanceof SVGElement&&t.tagName!=="svg"}function tOe(t,e,n){const i=Oa(t)?t:Rb(t);return i.start(k8("",i,e,n)),i.animation}const EJ=["","X","Y","Z"],CJ=1e3;let nOe=0;const Kg={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function mpe({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o,a={},l=e==null?void 0:e()){this.id=nOe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{Kg.totalNodes=Kg.resolvedTargetDeltas=Kg.recalculatedProjection=0,this.nodes.forEach(sOe),this.nodes.forEach(cOe),this.nodes.forEach(uOe),this.nodes.forEach(oOe),QDe(Kg)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.elementId=o,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0,o&&this.root.registerPotentialNode(o,this);for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new JDe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new z8),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}registerPotentialNode(o,a){this.potentialNodes.set(o,a)}mount(o,a=!1){if(this.instance)return;this.isSVG=eOe(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.elementId&&this.root.potentialNodes.delete(this.elementId),a&&(c||l)&&(this.isLayoutDirty=!0),t){let u;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=ZDe(d,250),WA.hasAnimatedSinceResize&&(WA.hasAnimatedSinceResize=!1,this.nodes.forEach(PJ))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeTargetChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||h.getDefaultTransition()||mOe,{onLayoutAnimationStart:g,onLayoutAnimationComplete:v}=h.getProps(),y=!this.targetLayout||!A6(this.targetLayout,p)||f,x=!d&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,x);const b={...epe(m,"layout"),onPlay:g,onComplete:v};(h.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else!d&&this.animationProgress===0&&PJ(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,jm.preRender(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hOe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const u=this.path[h];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}didUpdate(){if(this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(TJ);return}this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(gOe),this.potentialNodes.clear()),this.nodes.forEach(lOe),this.nodes.forEach(iOe),this.nodes.forEach(rOe),this.clearAllSnapshots(),WF.update(),WF.preRender(),WF.render())}clearAllSnapshots(){this.nodes.forEach(aOe),this.sharedNodes.forEach(dOe)}scheduleUpdateProjection(){ar.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){ar.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ts(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!ppe(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||Yg(this.latestValues)||h)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),vOe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ts();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(zp(a.x,l.offset.x),zp(a.y,l.offset.y)),a}removeElementScroll(o){const a=ts();jl(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:h,options:u}=c;if(c!==this.root&&h&&u.layoutScroll){if(h.isRoot){jl(a,o);const{scroll:d}=this.root;d&&(zp(a.x,-d.offset.x),zp(a.y,-d.offset.y))}zp(a.x,h.offset.x),zp(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=ts();jl(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Sx(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Yg(h.latestValues)&&Sx(l,h.latestValues)}return Yg(this.latestValues)&&Sx(l,this.latestValues),l}removeTransform(o){const a=ts();jl(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Yg(c.latestValues))continue;w6(c.latestValues)&&c.updateSnapshot();const h=ts(),u=c.measurePageBox();jl(h,u),_J(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Yg(this.latestValues)&&_J(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=Ao.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout?(this.relativeParent=f,this.relativeTarget=ts(),this.relativeTargetOrigin=ts(),YA(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),jl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ts(),this.targetWithTransforms=ts()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.relativeParent.resolvedRelativeTargetAt!==Ao.timestamp&&this.relativeParent.resolveTargetDelta(!0),yDe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jl(this.target,this.layout.layoutBox),lpe(this.target,this.targetDelta)):jl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target?(this.relativeParent=f,this.relativeTarget=ts(),this.relativeTargetOrigin=ts(),YA(this.relativeTargetOrigin,this.target,f.target),jl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Kg.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||w6(this.parent.latestValues)||ape(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ao.timestamp&&(c=!1),c)return;const{layout:h,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||u))return;jl(this.layoutCorrected,this.layout.layoutBox),CDe(this.layoutCorrected,this.treeScale,this.path,l);const{target:d}=a;if(!d)return;this.projectionDelta||(this.projectionDelta=KA(),this.projectionDeltaWithTransform=KA());const f=this.treeScale.x,p=this.treeScale.y,m=this.projectionTransform;XA(this.projectionDelta,this.layoutCorrected,d,this.latestValues),this.projectionTransform=MJ(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",d)),Kg.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},u=KA();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=ts(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=f!==p,g=this.getStack(),v=!g||g.members.length<=1,y=!!(m&&!v&&this.options.crossfade===!0&&!this.path.some(pOe));this.animationProgress=0;let x;this.mixTargetDelta=b=>{const S=b/1e3;DJ(u.x,o.x,S),DJ(u.y,o.y,S),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(YA(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fOe(this.relativeTarget,this.relativeTargetOrigin,d,S),x&&A6(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=ts()),jl(x,this.relativeTarget)),m&&(this.animationValues=h,jDe(h,c,this.latestValues,S,y,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(jm.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ar.update(()=>{WA.hasAnimatedSinceResize=!0,this.currentAnimation=tOe(0,CJ,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(CJ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&gpe(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ts();const u=bl(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+u;const d=bl(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}jl(a,l),Sx(a,h),XA(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new YDe),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let h=0;h<EJ.length;h++){const u="rotate"+EJ[h];l[u]&&(c[u]=l[u],o.setStaticValue(u,0))}o.render();for(const h in c)o.setStaticValue(h,c[h]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const c={};if(!this.instance||this.isSVG)return c;if(this.isVisible)c.visibility="";else return{visibility:"hidden"};const h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=wD(o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=wD(o.pointerEvents)||""),this.hasProjected&&!Yg(this.latestValues)&&(m.transform=h?h({},""):"none",this.hasProjected=!1),m}const d=u.animationValues||u.latestValues;this.applyTransformsToTarget(),c.transform=MJ(this.projectionDeltaWithTransform,this.treeScale,d),h&&(c.transform=h(d,c.transform));const{x:f,y:p}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?c.opacity=u===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in RO){if(d[m]===void 0)continue;const{correct:g,applyTo:v}=RO[m],y=c.transform==="none"?d[m]:g(d[m],u);if(v){const x=v.length;for(let b=0;b<x;b++)c[v[b]]=y}else c[m]=y}return this.options.layoutId&&(c.pointerEvents=u===this?wD(o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(TJ),this.root.sharedNodes.clear()}}}function iOe(t){t.updateLayout()}function rOe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Ah(u=>{const d=o?n.measuredBox[u]:n.layoutBox[u],f=bl(d);d.min=i[u].min,d.max=d.min+f}):gpe(s,n.layoutBox,i)&&Ah(u=>{const d=o?n.measuredBox[u]:n.layoutBox[u],f=bl(i[u]);d.max=d.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+f)});const a=KA();XA(a,i,n.layoutBox);const l=KA();o?XA(l,t.applyTransform(r,!0),n.measuredBox):XA(l,i,n.layoutBox);const c=!ppe(a);let h=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:d,layout:f}=u;if(d&&f){const p=ts();YA(p,n.layoutBox,d.layoutBox);const m=ts();YA(m,i,f.layoutBox),A6(p,m)||(h=!0),u.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function sOe(t){Kg.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function oOe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function aOe(t){t.clearSnapshot()}function TJ(t){t.clearMeasurements()}function lOe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function PJ(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0}function cOe(t){t.resolveTargetDelta()}function uOe(t){t.calcProjection()}function hOe(t){t.resetRotation()}function dOe(t){t.removeLeadSnapshot()}function DJ(t,e,n){t.translate=dr(e.translate,0,n),t.scale=dr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function OJ(t,e,n,i){t.min=dr(e.min,n.min,i),t.max=dr(e.max,n.max,i)}function fOe(t,e,n,i){OJ(t.x,e.x,n.x,i),OJ(t.y,e.y,n.y,i)}function pOe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const mOe={duration:.45,ease:[.4,0,.1,1]};function gOe(t,e){let n=t.root;for(let s=t.path.length-1;s>=0;s--)if(t.path[s].instance){n=t.path[s];break}const r=(n&&n!==t.root?n.instance:document).querySelector(`[data-projection-id="${e}"]`);r&&t.mount(r,!0)}function LJ(t){t.min=Math.round(t.min),t.max=Math.round(t.max)}function vOe(t){LJ(t.x),LJ(t.y)}function gpe(t,e,n){return t==="position"||t==="preserve-aspect"&&!x6(AJ(e),AJ(n),.2)}const yOe=mpe({attachResizeListener:(t,e)=>mf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nN={current:void 0},vpe=mpe({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!nN.current){const t=new yOe(0,{});t.mount(window),t.setOptions({layoutScroll:!0}),nN.current=t}return nN.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),xOe={pan:{Feature:BDe},drag:{Feature:IDe,ProjectionNode:vpe,MeasureLayout:hpe}},bOe=new Set(["width","height","top","left","right","bottom","x","y"]),ype=t=>bOe.has(t),wOe=t=>Object.keys(t).some(ype),RJ=t=>t===Fv||t===nn,IJ=(t,e)=>parseFloat(t.split(", ")[e]),BJ=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return IJ(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?IJ(s[1],t):0}},_Oe=new Set(["x","y","z"]),SOe=QR.filter(t=>!_Oe.has(t));function AOe(t){const e=[];return SOe.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const kJ={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:BJ(4,13),y:BJ(5,14)},MOe=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=kJ[c](i,s)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const h=e.getValue(c);h&&h.jump(a[c]),t[c]=kJ[c](l,s)}),t},EOe=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(ype);let s=[],o=!1;const a=[];if(r.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let h=n[l],u=z_(h);const d=e[l];let f;if(BO(d)){const p=d.length,m=d[0]===null?1:0;h=d[m],u=z_(h);for(let g=m;g<p;g++)f?D8(z_(d[g])===f):f=z_(d[g])}else f=z_(d);if(u!==f)if(RJ(u)&&RJ(f)){const p=c.get();typeof p=="string"&&c.set(parseFloat(p)),typeof d=="string"?e[l]=parseFloat(d):Array.isArray(d)&&f===nn&&(e[l]=d.map(parseFloat))}else u!=null&&u.transform&&(f!=null&&f.transform)&&(h===0||d===0)?h===0?c.set(f.transform(h)):e[l]=u.transform(d):(o||(s=AOe(t),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],c.jump(d))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=MOe(e,t,a);return s.length&&s.forEach(([h,u])=>{t.getValue(h).set(u)}),t.render(),KR&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:i}}else return{target:e,transitionEnd:i}};function COe(t,e,n,i){return wOe(e)?EOe(t,e,n,i):{target:e,transitionEnd:i}}const TOe=(t,e,n,i)=>{const r=NDe(t,e,i);return e=r.target,i=r.transitionEnd,COe(t,e,n,i)},M6={current:null},xpe={current:!1};function POe(){if(xpe.current=!0,!!KR)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>M6.current=t.matches;t.addListener(e),e()}else M6.current=!1}function DOe(t,e,n){const{willChange:i}=e;for(const r in e){const s=e[r],o=n[r];if(Oa(s))t.addValue(r,s),zO(i)&&i.add(r);else if(Oa(o))t.addValue(r,Rb(s,{owner:t})),zO(i)&&i.remove(r);else if(o!==s)if(t.hasValue(r)){const a=t.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,Rb(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const FJ=new WeakMap,bpe=Object.keys(ZM),OOe=bpe.length,NJ=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],LOe=x8.length;class ROe{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ar.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=ZR(n),this.isVariantNode=cfe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{});for(const u in h){const d=h[u];a[u]!==void 0&&Oa(d)&&(d.set(a[u],!1),zO(c)&&c.add(u))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,FJ.set(e,this),this.projection&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),xpe.current||POe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:M6.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){FJ.delete(this.current),this.projection&&this.projection.unmount(),jm.update(this.notifyUpdate),jm.render(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=kv.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ar.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,s,o){let a,l;for(let c=0;c<OOe;c++){const h=bpe[c],{isEnabled:u,Feature:d,ProjectionNode:f,MeasureLayout:p}=ZM[h];f&&(a=f),u(n)&&(!this.features[h]&&d&&(this.features[h]=new d(this)),p&&(l=p))}if(!this.projection&&a){this.projection=new a(s,this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:h,drag:u,dragConstraints:d,layoutScroll:f,layoutRoot:p}=n;this.projection.setOptions({layoutId:c,layout:h,alwaysMeasureLayout:!!u||d&&wx(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:o,layoutScroll:f,layoutRoot:p})}return l}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update(this.props,this.prevProps):(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ts()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<NJ.length;i++){const r=NJ[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=DOe(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<LOe;i++){const r=x8[i],s=this.props[r];(JM(s)||s===!1)&&(n[r]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Rb(n,{owner:this}),this.addValue(e,i)),i}readValue(e){return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=P8(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Oa(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new z8),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class wpe extends ROe{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},s){let o=eDe(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),o&&(o=r(o))),s){Z3e(this,i,o);const a=TOe(this,i,o,n);n=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:n,...i}}}function IOe(t){return window.getComputedStyle(t)}class BOe extends wpe{readValueFromInstance(e,n){if(kv.has(n)){const i=I8(n);return i&&i.default||0}else{const i=IOe(e),r=(ffe(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return cpe(e,n)}build(e,n,i,r){S8(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return T8(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Oa(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){yfe(e,n,i,r)}}class kOe extends wpe{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(kv.has(n)){const i=I8(n);return i&&i.default||0}return n=xfe.has(n)?n:C8(n),e.getAttribute(n)}measureInstanceViewportBox(){return ts()}scrapeMotionValuesFromProps(e,n){return wfe(e,n)}build(e,n,i,r){M8(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){bfe(e,n,i,r)}mount(e){this.isSVGTag=E8(e.tagName),super.mount(e)}}const FOe=(t,e)=>_8(t)?new kOe(e,{enableHardwareAcceleration:!1}):new BOe(e,{enableHardwareAcceleration:!0}),NOe={layout:{ProjectionNode:vpe,MeasureLayout:hpe}},zOe={...pDe,...BPe,...xOe,...NOe},jn=VTe((t,e)=>yPe(t,e,zOe,FOe));function _pe(){const t=W.useRef(!1);return LO(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function UOe(){const t=_pe(),[e,n]=W.useState(0),i=W.useCallback(()=>{t.current&&n(e+1)},[e]);return[W.useCallback(()=>ar.postRender(i),[i]),e]}class GOe extends W.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function HOe({children:t,isPresent:e}){const n=W.useId(),i=W.useRef(null),r=W.useRef({width:0,height:0,top:0,left:0});return W.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=r.current;if(e||!i.current||!s||!o)return;i.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),W.createElement(GOe,{isPresent:e,childRef:i,sizeRef:r},W.cloneElement(t,{ref:i}))}const iN=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=b8(jOe),l=W.useId(),c=W.useMemo(()=>({id:l,initial:e,isPresent:n,custom:r,onExitComplete:h=>{a.set(h,!0);for(const u of a.values())if(!u)return;i&&i()},register:h=>(a.set(h,!1),()=>a.delete(h))}),s?void 0:[n]);return W.useMemo(()=>{a.forEach((h,u)=>a.set(u,!1))},[n]),W.useEffect(()=>{!n&&!a.size&&i&&i()},[n]),o==="popLayout"&&(t=W.createElement(HOe,{isPresent:n},t)),W.createElement(YR.Provider,{value:c},t)};function jOe(){return new Map}function VOe(t){return W.useEffect(()=>()=>t(),[])}const L1=t=>t.key||"";function WOe(t,e){t.forEach(n=>{const i=L1(n);e.set(i,n)})}function $Oe(t){const e=[];return W.Children.forEach(t,n=>{W.isValidElement(n)&&e.push(n)}),e}const qOe=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:s=!0,mode:o="sync"})=>{let[a]=UOe();const l=W.useContext(w8).forceRender;l&&(a=l);const c=_pe(),h=$Oe(t);let u=h;const d=new Set,f=W.useRef(u),p=W.useRef(new Map).current,m=W.useRef(!0);if(LO(()=>{m.current=!1,WOe(h,p),f.current=u}),VOe(()=>{m.current=!0,p.clear(),d.clear()}),m.current)return W.createElement(W.Fragment,null,u.map(x=>W.createElement(iN,{key:L1(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},x)));u=[...u];const g=f.current.map(L1),v=h.map(L1),y=g.length;for(let x=0;x<y;x++){const b=g[x];v.indexOf(b)===-1&&d.add(b)}return o==="wait"&&d.size&&(u=[]),d.forEach(x=>{if(v.indexOf(x)!==-1)return;const b=p.get(x);if(!b)return;const S=g.indexOf(x),A=()=>{p.delete(x),d.delete(x);const E=f.current.findIndex(M=>M.key===x);if(f.current.splice(E,1),!d.size){if(f.current=h,c.current===!1)return;a(),i&&i()}};u.splice(S,0,W.createElement(iN,{key:L1(b),isPresent:!1,onExitComplete:A,custom:e,presenceAffectsLayout:s,mode:o},b))}),u=u.map(x=>{const b=x.key;return d.has(b)?x:W.createElement(iN,{key:L1(x),isPresent:!0,presenceAffectsLayout:s,mode:o},x)}),W.createElement(W.Fragment,null,d.size?u:u.map(x=>W.cloneElement(x)))},XOe=Symbol(),U8=Symbol(),G_="a",JA="w";let YOe=(t,e)=>new Proxy(t,e);const E6=Object.getPrototypeOf,C6=new WeakMap,Spe=t=>t&&(C6.has(t)?C6.get(t):E6(t)===Object.prototype||E6(t)===Array.prototype),GO=t=>typeof t=="object"&&t!==null,KOe=t=>{if(Array.isArray(t))return Array.from(t);const e=Object.getOwnPropertyDescriptors(t);return Object.values(e).forEach(n=>{n.configurable=!0}),Object.create(E6(t),e)},G8=t=>t[U8]||t,Ape=(t,e,n,i)=>{if(!Spe(t))return t;let r=i&&i.get(t);if(!r){const l=G8(t);r=(c=>Object.values(Object.getOwnPropertyDescriptors(c)).some(h=>!h.configurable&&!h.writable))(l)?[l,KOe(l)]:[l],i==null||i.set(t,r)}const[s,o]=r;let a=n&&n.get(s);return a&&a[1].f===!!o||(a=((l,c)=>{const h={f:c};let u=!1;const d=(p,m)=>{if(!u){let g=h[G_].get(l);if(g||(g={},h[G_].set(l,g)),p===JA)g[JA]=!0;else{let v=g[p];v||(v=new Set,g[p]=v),v.add(m)}}},f={get:(p,m)=>m===U8?l:(d("k",m),Ape(Reflect.get(p,m),h[G_],h.c)),has:(p,m)=>m===XOe?(u=!0,h[G_].delete(l),!0):(d("h",m),Reflect.has(p,m)),getOwnPropertyDescriptor:(p,m)=>(d("o",m),Reflect.getOwnPropertyDescriptor(p,m)),ownKeys:p=>(d(JA),Reflect.ownKeys(p))};return c&&(f.set=f.deleteProperty=()=>!1),[f,h]})(s,!!o),a[1].p=YOe(o||s,a[0]),n&&n.set(s,a)),a[1][G_]=e,a[1].c=n,a[1].p},Mpe=(t,e,n,i)=>{if(Object.is(t,e))return!1;if(!GO(t)||!GO(e))return!0;const r=n.get(G8(t));if(!r)return!0;if(i){const o=i.get(t);if(o&&o.n===e)return o.g;i.set(t,{n:e,g:!1})}let s=null;try{for(const o of r.h||[])if(s=Reflect.has(t,o)!==Reflect.has(e,o),s)return s;if(r[JA]===!0){if(s=((o,a)=>{const l=Reflect.ownKeys(o),c=Reflect.ownKeys(a);return l.length!==c.length||l.some((h,u)=>h!==c[u])})(t,e),s)return s}else for(const o of r.o||[])if(s=!!Reflect.getOwnPropertyDescriptor(t,o)!=!!Reflect.getOwnPropertyDescriptor(e,o),s)return s;for(const o of r.k||[])if(s=Mpe(t[o],e[o],n,i),s)return s;return s===null&&(s=!0),s}finally{i&&i.set(t,{n:e,g:s})}},JOe=t=>Spe(t)&&t[U8]||null,zJ=(t,e=!0)=>{C6.set(t,e)},ZOe=(t,e,n)=>{const i=[],r=new WeakSet,s=(o,a)=>{if(r.has(o))return;GO(o)&&r.add(o);const l=GO(o)&&e.get(G8(o));if(l){var c,h;if((c=l.h)==null||c.forEach(d=>{const f=`:has(${String(d)})`;i.push(a?[...a,f]:[f])}),l[JA]===!0){const d=":ownKeys";i.push(a?[...a,d]:[d])}else{var u;(u=l.o)==null||u.forEach(d=>{const f=`:hasOwn(${String(d)})`;i.push(a?[...a,f]:[f])})}(h=l.k)==null||h.forEach(d=>{n&&!("value"in(Object.getOwnPropertyDescriptor(o,d)||{}))||s(o[d],a?[...a,d]:[d])})}else a&&i.push(a)};return s(t),i},rN=t=>typeof t=="object"&&t!==null,Up=new WeakMap,RT=new WeakSet,QOe=(t=Object.is,e=(c,h)=>new Proxy(c,h),n=c=>rN(c)&&!RT.has(c)&&(Array.isArray(c)||!(Symbol.iterator in c))&&!(c instanceof WeakMap)&&!(c instanceof WeakSet)&&!(c instanceof Error)&&!(c instanceof Number)&&!(c instanceof Date)&&!(c instanceof String)&&!(c instanceof RegExp)&&!(c instanceof ArrayBuffer),i=c=>{switch(c.status){case"fulfilled":return c.value;case"rejected":throw c.reason;default:throw c}},r=new WeakMap,s=(c,h,u=i)=>{const d=r.get(c);if((d==null?void 0:d[0])===h)return d[1];const f=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c));return zJ(f,!0),r.set(c,[h,f]),Reflect.ownKeys(c).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const m=Reflect.get(c,p),g={value:m,enumerable:!0,configurable:!0};if(RT.has(m))zJ(m,!1);else if(m instanceof Promise)delete g.value,g.get=()=>u(m);else if(Up.has(m)){const[v,y]=Up.get(m);g.value=s(v,y(),u)}Object.defineProperty(f,p,g)}),f},o=new WeakMap,a=[1,1],l=c=>{if(!rN(c))throw new Error("object required");const h=o.get(c);if(h)return h;let u=a[0];const d=new Set,f=(C,T=++a[0])=>{u!==T&&(u=T,d.forEach(D=>D(C,T)))};let p=a[1];const m=(C=++a[1])=>(p!==C&&!d.size&&(p=C,v.forEach(([T])=>{const D=T[1](C);D>u&&(u=D)})),u),g=C=>(T,D)=>{const L=[...T];L[1]=[C,...L[1]],f(L,D)},v=new Map,y=(C,T)=>{if(({VITE_OpenAI_KEY:"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",BASE_URL:"/auction_house_project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&v.has(C))throw new Error("prop listener already exists");if(d.size){const D=T[3](g(C));v.set(C,[T,D])}else v.set(C,[T])},x=C=>{var T;const D=v.get(C);D&&(v.delete(C),(T=D[1])==null||T.call(D))},b=C=>(d.add(C),d.size===1&&v.forEach(([D,L],I)=>{if(({VITE_OpenAI_KEY:"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",BASE_URL:"/auction_house_project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&L)throw new Error("remove already exists");const R=D[3](g(I));v.set(I,[D,R])}),()=>{d.delete(C),d.size===0&&v.forEach(([D,L],I)=>{L&&(L(),v.set(I,[D]))})}),S=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c)),E=e(S,{deleteProperty(C,T){const D=Reflect.get(C,T);x(T);const L=Reflect.deleteProperty(C,T);return L&&f(["delete",[T],D]),L},set(C,T,D,L){const I=Reflect.has(C,T),R=Reflect.get(C,T,L);if(I&&(t(R,D)||o.has(D)&&t(R,o.get(D))))return!0;x(T),rN(D)&&(D=JOe(D)||D);let H=D;if(D instanceof Promise)D.then(Z=>{D.status="fulfilled",D.value=Z,f(["resolve",[T],Z])}).catch(Z=>{D.status="rejected",D.reason=Z,f(["reject",[T],Z])});else{!Up.has(D)&&n(D)&&(H=l(D));const Z=!RT.has(H)&&Up.get(H);Z&&y(T,Z)}return Reflect.set(C,T,H,L),f(["set",[T],D,R]),!0}});o.set(c,E);const M=[S,m,s,b];return Up.set(E,M),Reflect.ownKeys(c).forEach(C=>{const T=Object.getOwnPropertyDescriptor(c,C);"value"in T&&(E[C]=c[C],delete T.value,delete T.writable),Object.defineProperty(S,C,T)}),E})=>[l,Up,RT,t,e,n,i,r,s,o,a],[eLe]=QOe();function tLe(t={}){return eLe(t)}function nLe(t,e,n){const i=Up.get(t);({VITE_OpenAI_KEY:"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",BASE_URL:"/auction_house_project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!i&&console.warn("Please use proxy object");let r;const s=[],o=i[3];let a=!1;const c=o(h=>{if(s.push(h),n){e(s.splice(0));return}r||(r=Promise.resolve().then(()=>{r=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,c()}}function UJ(t,e){const n=Up.get(t);({VITE_OpenAI_KEY:"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",BASE_URL:"/auction_house_project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!n&&console.warn("Please use proxy object");const[i,r,s]=n;return s(i,r(),e)}var T6={},iLe={get exports(){return T6},set exports(t){T6=t}},Epe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib=W;function rLe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sLe=typeof Object.is=="function"?Object.is:rLe,oLe=Ib.useState,aLe=Ib.useEffect,lLe=Ib.useLayoutEffect,cLe=Ib.useDebugValue;function uLe(t,e){var n=e(),i=oLe({inst:{value:n,getSnapshot:e}}),r=i[0].inst,s=i[1];return lLe(function(){r.value=n,r.getSnapshot=e,sN(r)&&s({inst:r})},[t,n,e]),aLe(function(){return sN(r)&&s({inst:r}),t(function(){sN(r)&&s({inst:r})})},[t]),cLe(n),n}function sN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sLe(t,n)}catch{return!0}}function hLe(t,e){return e()}var dLe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?hLe:uLe;Epe.useSyncExternalStore=Ib.useSyncExternalStore!==void 0?Ib.useSyncExternalStore:dLe;(function(t){t.exports=Epe})(iLe);const fLe=PR(T6),{use:GJ}=ue,{useSyncExternalStore:pLe}=fLe,mLe=(t,e)=>{const n=W.useRef();W.useEffect(()=>{n.current=ZOe(t,e,!0)}),W.useDebugValue(n.current)},gLe=new WeakMap;function Ml(t,e){const n=e==null?void 0:e.sync,i=W.useRef(),r=W.useRef();let s=!0;const o=pLe(W.useCallback(c=>{const h=nLe(t,c,n);return c(),h},[t,n]),()=>{const c=UJ(t,GJ);try{if(!s&&i.current&&r.current&&!Mpe(i.current,c,r.current,new WeakMap))return i.current}catch{}return c},()=>UJ(t,GJ));s=!1;const a=new WeakMap;W.useEffect(()=>{i.current=o,r.current=a}),({VITE_OpenAI_KEY:"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",BASE_URL:"/auction_house_project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&mLe(o,a);const l=W.useMemo(()=>new WeakMap,[]);return Ape(o,a,l,gLe)}const vLe=()=>window.location.href.split("/").pop(),Gt=tLe({page:vLe(),color:"#06B6D4",show:"ship",cusState:!1,deliveryState:!1,fakeUser:{username:"fake_user",contactNumber:"852-4567 8901",contactEmail:"username@example.com",name:"Full Name",address:`123 Main St
Anytown, USA
12345`,balance:1e3},current:null,colors:{laces:"#d3d3d3",mesh:"#d3d3d3",caps:"#d3d3d3",inner:"#d3d3d3",sole:"#d3d3d3",stripes:"#d3d3d3",band:"#d3d3d3",patch:"#d3d3d3"},myItemShow:"shoe",ColorPickerOn:!1,logoDecal:"logo.png",fullDecal:"threejs.png",isFullTexture:!1,isLogoTexture:!0,TShirtColor:"#DDDCDE"}),$r={type:"spring",duration:.8},HJ=t=>({initial:{x:t==="left"?-100:t==="right"?100:0,y:t==="up"?100:t==="down"?-100:0,opacity:0,transition:{...$r,delay:.5}},animate:{x:0,y:0,opacity:1,transition:{...$r,delay:0}},exit:{x:t==="left"?-100:t==="right"?100:0,y:t==="up"?100:t==="down"?-100:0,transition:{...$r,delay:0}}}),jJ=t=>({initial:{x:t==="left"?-100:t==="right"?100:0,y:t==="up"?100:t==="down"?-100:0,opacity:0,transition:{...$r,delay:.5}},animate:{x:0,y:0,opacity:1,transition:{...$r,delay:0}},exit:{x:t==="left"?-100:t==="right"?100:0,y:t==="up"?100:t==="down"?-100:0,transition:{...$r,delay:0}}}),yLe={initial:{x:150,opacity:0,transition:{...$r,delay:.5}},animate:{x:0,y:0,opacity:1,transition:{...$r,delay:0}},exit:{x:800,transition:{...$r,delay:0}}},HO={initial:{y:50,opacity:0,transition:{...$r,delay:.5}},animate:{y:0,opacity:1,transition:{...$r,delay:0}},transition:{type:"spring",damping:5,stiffness:40,restDelta:.001,duration:.3},exit:{y:200,opacity:0,transition:{...$r,delay:0}}},xLe={initial:{y:50,opacity:0,transition:{...$r,delay:.5}},animate:{y:0,opacity:1,transition:{...$r,delay:0}},transition:{type:"spring",damping:5,stiffness:40,restDelta:.001,duration:.3},exit:{y:200,opacity:0,transition:{...$r,delay:0}}},pl={initial:{opacity:0,transition:{...$r,delay:.5}},animate:{opacity:1,transition:{...$r,delay:0}},exit:{opacity:0,transition:{...$r,delay:0}}},bLe={initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{type:"spring",damping:5,stiffness:40,restDelta:.001,duration:.3}},wLe={initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",damping:7,stiffness:30,restDelta:.001,duration:.6,delay:.2,delayChildren:.2}},_Le={initial:{x:-100,opacity:0,transition:{...$r,delay:0}},animate:{x:0,opacity:1,transition:{...$r,delay:0}},exit:{x:-100,opacity:0,transition:{...$r,delay:0}}},SLe=t=>{const e=t.replace("#",""),n=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16);return(n*299+i*587+r*114)/1e3>128?"black":"white"},ALe=t=>new Promise((e,n)=>{const i=new FileReader;i.onload=()=>e(i.result),i.readAsDataURL(t)}),bn=({type:t,title:e,customStyles:n,handleClick:i})=>{const r=Ml(Gt),s=o=>{if(o==="filled")return{backgroundColor:r.color,color:SLe(r.color)};if(o==="outline")return{borderWidth:"1px",borderColor:r.color,color:r.color}};return ne("button",{className:`px-2 py-1.5 flex-1 rounded-md ${n}`,style:s(t),onClick:i,children:e})},MLe=()=>{Ml(Gt);let t=ng();const e=()=>{Gt.page="auction",t("/auction_house_project/auction")};return et(jn.section,{className:"home",...HJ("left"),children:[ne(jn.header,{...HJ("down"),children:ne("img",{src:"./logo.png",alt:"logo",className:"w-16 h-16 object-contain"})}),et(jn.div,{className:"home-content",..._Le,children:[ne(jn.div,{...bLe,children:et("h1",{className:"head-text",children:["LET'S ",ne("br",{className:"xl:block hidden"})," BID."]})}),et(jn.div,{...wLe,className:"flex flex-col gap-5 z-10",children:[et("p",{className:"max-w-md font-normal text-gray-600 text-base",children:[ne("strong",{children:"Giftify"})," is an auction house that offers a collection of one-of-a-kind gifts, each with a unique story and history."]}),et("p",{className:"max-w-md font-normal text-gray-600 text-base",children:["From rare collectibles to ",ne("strong",{children:"unique"})," artwork and jewelry, every item is special and unforgettable."]}),ne(bn,{type:"filled",title:"Bid It",handleClick:()=>e(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm z-30"})]})]})]})};var VJ=Array.isArray,WJ=Object.keys,ELe=Object.prototype.hasOwnProperty,CLe=typeof Element<"u";function P6(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=VJ(t),i=VJ(e),r,s,o;if(n&&i){if(s=t.length,s!=e.length)return!1;for(r=s;r--!==0;)if(!P6(t[r],e[r]))return!1;return!0}if(n!=i)return!1;var a=t instanceof Date,l=e instanceof Date;if(a!=l)return!1;if(a&&l)return t.getTime()==e.getTime();var c=t instanceof RegExp,h=e instanceof RegExp;if(c!=h)return!1;if(c&&h)return t.toString()==e.toString();var u=WJ(t);if(s=u.length,s!==WJ(e).length)return!1;for(r=s;r--!==0;)if(!ELe.call(e,u[r]))return!1;if(CLe&&t instanceof Element&&e instanceof Element)return t===e;for(r=s;r--!==0;)if(o=u[r],!(o==="_owner"&&t.$$typeof)&&!P6(t[o],e[o]))return!1;return!0}return t!==t&&e!==e}var Jg=function(e,n){try{return P6(e,n)}catch(i){if(i.message&&i.message.match(/stack|recursion/i)||i.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",i.name,i.message),!1;throw i}},TLe=function(e){return PLe(e)&&!DLe(e)};function PLe(t){return!!t&&typeof t=="object"}function DLe(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||RLe(t)}var OLe=typeof Symbol=="function"&&Symbol.for,LLe=OLe?Symbol.for("react.element"):60103;function RLe(t){return t.$$typeof===LLe}function ILe(t){return Array.isArray(t)?[]:{}}function jO(t,e){return e.clone!==!1&&e.isMergeableObject(t)?n2(ILe(t),t,e):t}function BLe(t,e,n){return t.concat(e).map(function(i){return jO(i,n)})}function kLe(t,e,n){var i={};return n.isMergeableObject(t)&&Object.keys(t).forEach(function(r){i[r]=jO(t[r],n)}),Object.keys(e).forEach(function(r){!n.isMergeableObject(e[r])||!t[r]?i[r]=jO(e[r],n):i[r]=n2(t[r],e[r],n)}),i}function n2(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||BLe,n.isMergeableObject=n.isMergeableObject||TLe;var i=Array.isArray(e),r=Array.isArray(t),s=i===r;return s?i?n.arrayMerge(t,e,n):kLe(t,e,n):jO(e,n)}n2.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(i,r){return n2(i,r,n)},{})};var D6=n2,FLe=typeof global=="object"&&global&&global.Object===Object&&global;const Cpe=FLe;var NLe=typeof self=="object"&&self&&self.Object===Object&&self,zLe=Cpe||NLe||Function("return this")();const Hu=zLe;var ULe=Hu.Symbol;const Zh=ULe;var Tpe=Object.prototype,GLe=Tpe.hasOwnProperty,HLe=Tpe.toString,H_=Zh?Zh.toStringTag:void 0;function jLe(t){var e=GLe.call(t,H_),n=t[H_];try{t[H_]=void 0;var i=!0}catch{}var r=HLe.call(t);return i&&(e?t[H_]=n:delete t[H_]),r}var VLe=Object.prototype,WLe=VLe.toString;function $Le(t){return WLe.call(t)}var qLe="[object Null]",XLe="[object Undefined]",$J=Zh?Zh.toStringTag:void 0;function Nv(t){return t==null?t===void 0?XLe:qLe:$J&&$J in Object(t)?jLe(t):$Le(t)}function Ppe(t,e){return function(n){return t(e(n))}}var YLe=Ppe(Object.getPrototypeOf,Object);const H8=YLe;function Qh(t){return t!=null&&typeof t=="object"}var KLe="[object Object]",JLe=Function.prototype,ZLe=Object.prototype,Dpe=JLe.toString,QLe=ZLe.hasOwnProperty,eRe=Dpe.call(Object);function O6(t){if(!Qh(t)||Nv(t)!=KLe)return!1;var e=H8(t);if(e===null)return!0;var n=QLe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Dpe.call(n)==eRe}function tRe(){this.__data__=[],this.size=0}function hE(t,e){return t===e||t!==t&&e!==e}function iI(t,e){for(var n=t.length;n--;)if(hE(t[n][0],e))return n;return-1}var nRe=Array.prototype,iRe=nRe.splice;function rRe(t){var e=this.__data__,n=iI(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():iRe.call(e,n,1),--this.size,!0}function sRe(t){var e=this.__data__,n=iI(e,t);return n<0?void 0:e[n][1]}function oRe(t){return iI(this.__data__,t)>-1}function aRe(t,e){var n=this.__data__,i=iI(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function Yf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Yf.prototype.clear=tRe;Yf.prototype.delete=rRe;Yf.prototype.get=sRe;Yf.prototype.has=oRe;Yf.prototype.set=aRe;function lRe(){this.__data__=new Yf,this.size=0}function cRe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function uRe(t){return this.__data__.get(t)}function hRe(t){return this.__data__.has(t)}function wl(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var dRe="[object AsyncFunction]",fRe="[object Function]",pRe="[object GeneratorFunction]",mRe="[object Proxy]";function j8(t){if(!wl(t))return!1;var e=Nv(t);return e==fRe||e==pRe||e==dRe||e==mRe}var gRe=Hu["__core-js_shared__"];const oN=gRe;var qJ=function(){var t=/[^.]+$/.exec(oN&&oN.keys&&oN.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function vRe(t){return!!qJ&&qJ in t}var yRe=Function.prototype,xRe=yRe.toString;function zv(t){if(t!=null){try{return xRe.call(t)}catch{}try{return t+""}catch{}}return""}var bRe=/[\\^$.*+?()[\]{}|]/g,wRe=/^\[object .+?Constructor\]$/,_Re=Function.prototype,SRe=Object.prototype,ARe=_Re.toString,MRe=SRe.hasOwnProperty,ERe=RegExp("^"+ARe.call(MRe).replace(bRe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function CRe(t){if(!wl(t)||vRe(t))return!1;var e=j8(t)?ERe:wRe;return e.test(zv(t))}function TRe(t,e){return t==null?void 0:t[e]}function Uv(t,e){var n=TRe(t,e);return CRe(n)?n:void 0}var PRe=Uv(Hu,"Map");const i2=PRe;var DRe=Uv(Object,"create");const r2=DRe;function ORe(){this.__data__=r2?r2(null):{},this.size=0}function LRe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var RRe="__lodash_hash_undefined__",IRe=Object.prototype,BRe=IRe.hasOwnProperty;function kRe(t){var e=this.__data__;if(r2){var n=e[t];return n===RRe?void 0:n}return BRe.call(e,t)?e[t]:void 0}var FRe=Object.prototype,NRe=FRe.hasOwnProperty;function zRe(t){var e=this.__data__;return r2?e[t]!==void 0:NRe.call(e,t)}var URe="__lodash_hash_undefined__";function GRe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r2&&e===void 0?URe:e,this}function fv(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}fv.prototype.clear=ORe;fv.prototype.delete=LRe;fv.prototype.get=kRe;fv.prototype.has=zRe;fv.prototype.set=GRe;function HRe(){this.size=0,this.__data__={hash:new fv,map:new(i2||Yf),string:new fv}}function jRe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function rI(t,e){var n=t.__data__;return jRe(e)?n[typeof e=="string"?"string":"hash"]:n.map}function VRe(t){var e=rI(this,t).delete(t);return this.size-=e?1:0,e}function WRe(t){return rI(this,t).get(t)}function $Re(t){return rI(this,t).has(t)}function qRe(t,e){var n=rI(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function Kf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Kf.prototype.clear=HRe;Kf.prototype.delete=VRe;Kf.prototype.get=WRe;Kf.prototype.has=$Re;Kf.prototype.set=qRe;var XRe=200;function YRe(t,e){var n=this.__data__;if(n instanceof Yf){var i=n.__data__;if(!i2||i.length<XRe-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Kf(i)}return n.set(t,e),this.size=n.size,this}function Eu(t){var e=this.__data__=new Yf(t);this.size=e.size}Eu.prototype.clear=lRe;Eu.prototype.delete=cRe;Eu.prototype.get=uRe;Eu.prototype.has=hRe;Eu.prototype.set=YRe;function Ope(t,e){for(var n=-1,i=t==null?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}var KRe=function(){try{var t=Uv(Object,"defineProperty");return t({},"",{}),t}catch{}}();const VO=KRe;function V8(t,e,n){e=="__proto__"&&VO?VO(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var JRe=Object.prototype,ZRe=JRe.hasOwnProperty;function Lpe(t,e,n){var i=t[e];(!(ZRe.call(t,e)&&hE(i,n))||n===void 0&&!(e in t))&&V8(t,e,n)}function dE(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),r?V8(n,a,l):Lpe(n,a,l)}return n}function QRe(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var eIe="[object Arguments]";function XJ(t){return Qh(t)&&Nv(t)==eIe}var Rpe=Object.prototype,tIe=Rpe.hasOwnProperty,nIe=Rpe.propertyIsEnumerable,iIe=XJ(function(){return arguments}())?XJ:function(t){return Qh(t)&&tIe.call(t,"callee")&&!nIe.call(t,"callee")};const WO=iIe;var rIe=Array.isArray;const ta=rIe;function sIe(){return!1}var Ipe=typeof kn=="object"&&kn&&!kn.nodeType&&kn,YJ=Ipe&&typeof En=="object"&&En&&!En.nodeType&&En,oIe=YJ&&YJ.exports===Ipe,KJ=oIe?Hu.Buffer:void 0,aIe=KJ?KJ.isBuffer:void 0,lIe=aIe||sIe;const s2=lIe;var cIe=9007199254740991,uIe=/^(?:0|[1-9]\d*)$/;function W8(t,e){var n=typeof t;return e=e??cIe,!!e&&(n=="number"||n!="symbol"&&uIe.test(t))&&t>-1&&t%1==0&&t<e}var hIe=9007199254740991;function $8(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=hIe}var dIe="[object Arguments]",fIe="[object Array]",pIe="[object Boolean]",mIe="[object Date]",gIe="[object Error]",vIe="[object Function]",yIe="[object Map]",xIe="[object Number]",bIe="[object Object]",wIe="[object RegExp]",_Ie="[object Set]",SIe="[object String]",AIe="[object WeakMap]",MIe="[object ArrayBuffer]",EIe="[object DataView]",CIe="[object Float32Array]",TIe="[object Float64Array]",PIe="[object Int8Array]",DIe="[object Int16Array]",OIe="[object Int32Array]",LIe="[object Uint8Array]",RIe="[object Uint8ClampedArray]",IIe="[object Uint16Array]",BIe="[object Uint32Array]",Vi={};Vi[CIe]=Vi[TIe]=Vi[PIe]=Vi[DIe]=Vi[OIe]=Vi[LIe]=Vi[RIe]=Vi[IIe]=Vi[BIe]=!0;Vi[dIe]=Vi[fIe]=Vi[MIe]=Vi[pIe]=Vi[EIe]=Vi[mIe]=Vi[gIe]=Vi[vIe]=Vi[yIe]=Vi[xIe]=Vi[bIe]=Vi[wIe]=Vi[_Ie]=Vi[SIe]=Vi[AIe]=!1;function kIe(t){return Qh(t)&&$8(t.length)&&!!Vi[Nv(t)]}function q8(t){return function(e){return t(e)}}var Bpe=typeof kn=="object"&&kn&&!kn.nodeType&&kn,ZA=Bpe&&typeof En=="object"&&En&&!En.nodeType&&En,FIe=ZA&&ZA.exports===Bpe,aN=FIe&&Cpe.process,NIe=function(){try{var t=ZA&&ZA.require&&ZA.require("util").types;return t||aN&&aN.binding&&aN.binding("util")}catch{}}();const Bb=NIe;var JJ=Bb&&Bb.isTypedArray,zIe=JJ?q8(JJ):kIe;const X8=zIe;var UIe=Object.prototype,GIe=UIe.hasOwnProperty;function kpe(t,e){var n=ta(t),i=!n&&WO(t),r=!n&&!i&&s2(t),s=!n&&!i&&!r&&X8(t),o=n||i||r||s,a=o?QRe(t.length,String):[],l=a.length;for(var c in t)(e||GIe.call(t,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||W8(c,l)))&&a.push(c);return a}var HIe=Object.prototype;function Y8(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||HIe;return t===n}var jIe=Ppe(Object.keys,Object);const VIe=jIe;var WIe=Object.prototype,$Ie=WIe.hasOwnProperty;function qIe(t){if(!Y8(t))return VIe(t);var e=[];for(var n in Object(t))$Ie.call(t,n)&&n!="constructor"&&e.push(n);return e}function xw(t){return t!=null&&$8(t.length)&&!j8(t)}function fE(t){return xw(t)?kpe(t):qIe(t)}function XIe(t,e){return t&&dE(e,fE(e),t)}function YIe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var KIe=Object.prototype,JIe=KIe.hasOwnProperty;function ZIe(t){if(!wl(t))return YIe(t);var e=Y8(t),n=[];for(var i in t)i=="constructor"&&(e||!JIe.call(t,i))||n.push(i);return n}function pE(t){return xw(t)?kpe(t,!0):ZIe(t)}function QIe(t,e){return t&&dE(e,pE(e),t)}var Fpe=typeof kn=="object"&&kn&&!kn.nodeType&&kn,ZJ=Fpe&&typeof En=="object"&&En&&!En.nodeType&&En,eBe=ZJ&&ZJ.exports===Fpe,QJ=eBe?Hu.Buffer:void 0,eZ=QJ?QJ.allocUnsafe:void 0;function Npe(t,e){if(e)return t.slice();var n=t.length,i=eZ?eZ(n):new t.constructor(n);return t.copy(i),i}function K8(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}function tBe(t,e){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}function zpe(){return[]}var nBe=Object.prototype,iBe=nBe.propertyIsEnumerable,tZ=Object.getOwnPropertySymbols,rBe=tZ?function(t){return t==null?[]:(t=Object(t),tBe(tZ(t),function(e){return iBe.call(t,e)}))}:zpe;const J8=rBe;function sBe(t,e){return dE(t,J8(t),e)}function Upe(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var oBe=Object.getOwnPropertySymbols,aBe=oBe?function(t){for(var e=[];t;)Upe(e,J8(t)),t=H8(t);return e}:zpe;const Gpe=aBe;function lBe(t,e){return dE(t,Gpe(t),e)}function Hpe(t,e,n){var i=e(t);return ta(t)?i:Upe(i,n(t))}function L6(t){return Hpe(t,fE,J8)}function cBe(t){return Hpe(t,pE,Gpe)}var uBe=Uv(Hu,"DataView");const R6=uBe;var hBe=Uv(Hu,"Promise");const I6=hBe;var dBe=Uv(Hu,"Set");const B6=dBe;var fBe=Uv(Hu,"WeakMap");const k6=fBe;var nZ="[object Map]",pBe="[object Object]",iZ="[object Promise]",rZ="[object Set]",sZ="[object WeakMap]",oZ="[object DataView]",mBe=zv(R6),gBe=zv(i2),vBe=zv(I6),yBe=zv(B6),xBe=zv(k6),Zg=Nv;(R6&&Zg(new R6(new ArrayBuffer(1)))!=oZ||i2&&Zg(new i2)!=nZ||I6&&Zg(I6.resolve())!=iZ||B6&&Zg(new B6)!=rZ||k6&&Zg(new k6)!=sZ)&&(Zg=function(t){var e=Nv(t),n=e==pBe?t.constructor:void 0,i=n?zv(n):"";if(i)switch(i){case mBe:return oZ;case gBe:return nZ;case vBe:return iZ;case yBe:return rZ;case xBe:return sZ}return e});const o2=Zg;var bBe=Object.prototype,wBe=bBe.hasOwnProperty;function _Be(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&wBe.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var SBe=Hu.Uint8Array;const $O=SBe;function Z8(t){var e=new t.constructor(t.byteLength);return new $O(e).set(new $O(t)),e}function ABe(t,e){var n=e?Z8(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var MBe=/\w*$/;function EBe(t){var e=new t.constructor(t.source,MBe.exec(t));return e.lastIndex=t.lastIndex,e}var aZ=Zh?Zh.prototype:void 0,lZ=aZ?aZ.valueOf:void 0;function CBe(t){return lZ?Object(lZ.call(t)):{}}function jpe(t,e){var n=e?Z8(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var TBe="[object Boolean]",PBe="[object Date]",DBe="[object Map]",OBe="[object Number]",LBe="[object RegExp]",RBe="[object Set]",IBe="[object String]",BBe="[object Symbol]",kBe="[object ArrayBuffer]",FBe="[object DataView]",NBe="[object Float32Array]",zBe="[object Float64Array]",UBe="[object Int8Array]",GBe="[object Int16Array]",HBe="[object Int32Array]",jBe="[object Uint8Array]",VBe="[object Uint8ClampedArray]",WBe="[object Uint16Array]",$Be="[object Uint32Array]";function qBe(t,e,n){var i=t.constructor;switch(e){case kBe:return Z8(t);case TBe:case PBe:return new i(+t);case FBe:return ABe(t,n);case NBe:case zBe:case UBe:case GBe:case HBe:case jBe:case VBe:case WBe:case $Be:return jpe(t,n);case DBe:return new i;case OBe:case IBe:return new i(t);case LBe:return EBe(t);case RBe:return new i;case BBe:return CBe(t)}}var cZ=Object.create,XBe=function(){function t(){}return function(e){if(!wl(e))return{};if(cZ)return cZ(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const YBe=XBe;function Vpe(t){return typeof t.constructor=="function"&&!Y8(t)?YBe(H8(t)):{}}var KBe="[object Map]";function JBe(t){return Qh(t)&&o2(t)==KBe}var uZ=Bb&&Bb.isMap,ZBe=uZ?q8(uZ):JBe;const QBe=ZBe;var eke="[object Set]";function tke(t){return Qh(t)&&o2(t)==eke}var hZ=Bb&&Bb.isSet,nke=hZ?q8(hZ):tke;const ike=nke;var rke=1,ske=2,oke=4,Wpe="[object Arguments]",ake="[object Array]",lke="[object Boolean]",cke="[object Date]",uke="[object Error]",$pe="[object Function]",hke="[object GeneratorFunction]",dke="[object Map]",fke="[object Number]",qpe="[object Object]",pke="[object RegExp]",mke="[object Set]",gke="[object String]",vke="[object Symbol]",yke="[object WeakMap]",xke="[object ArrayBuffer]",bke="[object DataView]",wke="[object Float32Array]",_ke="[object Float64Array]",Ske="[object Int8Array]",Ake="[object Int16Array]",Mke="[object Int32Array]",Eke="[object Uint8Array]",Cke="[object Uint8ClampedArray]",Tke="[object Uint16Array]",Pke="[object Uint32Array]",Li={};Li[Wpe]=Li[ake]=Li[xke]=Li[bke]=Li[lke]=Li[cke]=Li[wke]=Li[_ke]=Li[Ske]=Li[Ake]=Li[Mke]=Li[dke]=Li[fke]=Li[qpe]=Li[pke]=Li[mke]=Li[gke]=Li[vke]=Li[Eke]=Li[Cke]=Li[Tke]=Li[Pke]=!0;Li[uke]=Li[$pe]=Li[yke]=!1;function _D(t,e,n,i,r,s){var o,a=e&rke,l=e&ske,c=e&oke;if(n&&(o=r?n(t,i,r,s):n(t)),o!==void 0)return o;if(!wl(t))return t;var h=ta(t);if(h){if(o=_Be(t),!a)return K8(t,o)}else{var u=o2(t),d=u==$pe||u==hke;if(s2(t))return Npe(t,a);if(u==qpe||u==Wpe||d&&!r){if(o=l||d?{}:Vpe(t),!a)return l?lBe(t,QIe(o,t)):sBe(t,XIe(o,t))}else{if(!Li[u])return r?t:{};o=qBe(t,u,a)}}s||(s=new Eu);var f=s.get(t);if(f)return f;s.set(t,o),ike(t)?t.forEach(function(g){o.add(_D(g,e,n,g,t,s))}):QBe(t)&&t.forEach(function(g,v){o.set(v,_D(g,e,n,v,t,s))});var p=c?l?cBe:L6:l?pE:fE,m=h?void 0:p(t);return Ope(m||t,function(g,v){m&&(v=g,g=t[v]),Lpe(o,v,_D(g,e,n,v,t,s))}),o}var Dke=4;function dZ(t){return _D(t,Dke)}function Q8(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}var Oke="[object Symbol]";function mE(t){return typeof t=="symbol"||Qh(t)&&Nv(t)==Oke}var Lke="Expected a function";function e9(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Lke);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(e9.Cache||Kf),n}e9.Cache=Kf;var Rke=500;function Ike(t){var e=e9(t,function(i){return n.size===Rke&&n.clear(),i}),n=e.cache;return e}var Bke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kke=/\\(\\)?/g,Fke=Ike(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Bke,function(n,i,r,s){e.push(r?s.replace(kke,"$1"):i||n)}),e});const Xpe=Fke;var Nke=1/0;function gE(t){if(typeof t=="string"||mE(t))return t;var e=t+"";return e=="0"&&1/t==-Nke?"-0":e}var zke=1/0,fZ=Zh?Zh.prototype:void 0,pZ=fZ?fZ.toString:void 0;function Ype(t){if(typeof t=="string")return t;if(ta(t))return Q8(t,Ype)+"";if(mE(t))return pZ?pZ.call(t):"";var e=t+"";return e=="0"&&1/t==-zke?"-0":e}function Kpe(t){return t==null?"":Ype(t)}function Jpe(t){return ta(t)?Q8(t,gE):mE(t)?[t]:K8(Xpe(Kpe(t)))}var Uke=!0;function Gke(t,e){if(!Uke){if(t)return;var n="Warning: "+e;typeof console<"u"&&console.warn(n);try{throw Error(n)}catch{}}}var F6={},Hke={get exports(){return F6},set exports(t){F6=t}},mi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ws=typeof Symbol=="function"&&Symbol.for,t9=Ws?Symbol.for("react.element"):60103,n9=Ws?Symbol.for("react.portal"):60106,sI=Ws?Symbol.for("react.fragment"):60107,oI=Ws?Symbol.for("react.strict_mode"):60108,aI=Ws?Symbol.for("react.profiler"):60114,lI=Ws?Symbol.for("react.provider"):60109,cI=Ws?Symbol.for("react.context"):60110,i9=Ws?Symbol.for("react.async_mode"):60111,uI=Ws?Symbol.for("react.concurrent_mode"):60111,hI=Ws?Symbol.for("react.forward_ref"):60112,dI=Ws?Symbol.for("react.suspense"):60113,jke=Ws?Symbol.for("react.suspense_list"):60120,fI=Ws?Symbol.for("react.memo"):60115,pI=Ws?Symbol.for("react.lazy"):60116,Vke=Ws?Symbol.for("react.block"):60121,Wke=Ws?Symbol.for("react.fundamental"):60117,$ke=Ws?Symbol.for("react.responder"):60118,qke=Ws?Symbol.for("react.scope"):60119;function El(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case t9:switch(t=t.type,t){case i9:case uI:case sI:case aI:case oI:case dI:return t;default:switch(t=t&&t.$$typeof,t){case cI:case hI:case pI:case fI:case lI:return t;default:return e}}case n9:return e}}}function Zpe(t){return El(t)===uI}mi.AsyncMode=i9;mi.ConcurrentMode=uI;mi.ContextConsumer=cI;mi.ContextProvider=lI;mi.Element=t9;mi.ForwardRef=hI;mi.Fragment=sI;mi.Lazy=pI;mi.Memo=fI;mi.Portal=n9;mi.Profiler=aI;mi.StrictMode=oI;mi.Suspense=dI;mi.isAsyncMode=function(t){return Zpe(t)||El(t)===i9};mi.isConcurrentMode=Zpe;mi.isContextConsumer=function(t){return El(t)===cI};mi.isContextProvider=function(t){return El(t)===lI};mi.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===t9};mi.isForwardRef=function(t){return El(t)===hI};mi.isFragment=function(t){return El(t)===sI};mi.isLazy=function(t){return El(t)===pI};mi.isMemo=function(t){return El(t)===fI};mi.isPortal=function(t){return El(t)===n9};mi.isProfiler=function(t){return El(t)===aI};mi.isStrictMode=function(t){return El(t)===oI};mi.isSuspense=function(t){return El(t)===dI};mi.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===sI||t===uI||t===aI||t===oI||t===dI||t===jke||typeof t=="object"&&t!==null&&(t.$$typeof===pI||t.$$typeof===fI||t.$$typeof===lI||t.$$typeof===cI||t.$$typeof===hI||t.$$typeof===Wke||t.$$typeof===$ke||t.$$typeof===qke||t.$$typeof===Vke)};mi.typeOf=El;(function(t){t.exports=mi})(Hke);var Qpe=F6,Xke={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Yke={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},eme={};eme[Qpe.ForwardRef]=Xke;eme[Qpe.Memo]=Yke;function Ys(){return Ys=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ys.apply(this,arguments)}function tme(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var hu=function(e){return typeof e=="function"},mI=function(e){return e!==null&&typeof e=="object"},Kke=function(e){return String(Math.floor(Number(e)))===e},lN=function(e){return Object.prototype.toString.call(e)==="[object String]"},cN=function(e){return mI(e)&&hu(e.then)};function Ql(t,e,n,i){i===void 0&&(i=0);for(var r=Jpe(e);t&&i<r.length;)t=t[r[i++]];return t===void 0?n:t}function H0(t,e,n){for(var i=dZ(t),r=i,s=0,o=Jpe(e);s<o.length-1;s++){var a=o[s],l=Ql(t,o.slice(0,s+1));if(l&&(mI(l)||Array.isArray(l)))r=r[a]=dZ(l);else{var c=o[s+1];r=r[a]=Kke(c)&&Number(c)>=0?[]:{}}}return(s===0?t:r)[o[s]]===n?t:(n===void 0?delete r[o[s]]:r[o[s]]=n,s===0&&n===void 0&&delete i[o[s]],i)}function nme(t,e,n,i){n===void 0&&(n=new WeakMap),i===void 0&&(i={});for(var r=0,s=Object.keys(t);r<s.length;r++){var o=s[r],a=t[o];mI(a)?n.get(a)||(n.set(a,!0),i[o]=Array.isArray(a)?[]:{},nme(a,e,n,i[o])):i[o]=e}return i}var gI=W.createContext(void 0);gI.displayName="FormikContext";gI.Provider;gI.Consumer;function Jke(){var t=W.useContext(gI);return t||Gke(!1),t}function Zke(t,e){switch(e.type){case"SET_VALUES":return Ys({},t,{values:e.payload});case"SET_TOUCHED":return Ys({},t,{touched:e.payload});case"SET_ERRORS":return Jg(t.errors,e.payload)?t:Ys({},t,{errors:e.payload});case"SET_STATUS":return Ys({},t,{status:e.payload});case"SET_ISSUBMITTING":return Ys({},t,{isSubmitting:e.payload});case"SET_ISVALIDATING":return Ys({},t,{isValidating:e.payload});case"SET_FIELD_VALUE":return Ys({},t,{values:H0(t.values,e.payload.field,e.payload.value)});case"SET_FIELD_TOUCHED":return Ys({},t,{touched:H0(t.touched,e.payload.field,e.payload.value)});case"SET_FIELD_ERROR":return Ys({},t,{errors:H0(t.errors,e.payload.field,e.payload.value)});case"RESET_FORM":return Ys({},t,e.payload);case"SET_FORMIK_STATE":return e.payload(t);case"SUBMIT_ATTEMPT":return Ys({},t,{touched:nme(t.values,!0),isSubmitting:!0,submitCount:t.submitCount+1});case"SUBMIT_FAILURE":return Ys({},t,{isSubmitting:!1});case"SUBMIT_SUCCESS":return Ys({},t,{isSubmitting:!1});default:return t}}var Eg={},IT={};function ime(t){var e=t.validateOnChange,n=e===void 0?!0:e,i=t.validateOnBlur,r=i===void 0?!0:i,s=t.validateOnMount,o=s===void 0?!1:s,a=t.isInitialValid,l=t.enableReinitialize,c=l===void 0?!1:l,h=t.onSubmit,u=tme(t,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),d=Ys({validateOnChange:n,validateOnBlur:r,validateOnMount:o,onSubmit:h},u),f=W.useRef(d.initialValues),p=W.useRef(d.initialErrors||Eg),m=W.useRef(d.initialTouched||IT),g=W.useRef(d.initialStatus),v=W.useRef(!1),y=W.useRef({});W.useEffect(function(){return v.current=!0,function(){v.current=!1}},[]);var x=W.useReducer(Zke,{values:d.initialValues,errors:d.initialErrors||Eg,touched:d.initialTouched||IT,status:d.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),b=x[0],S=x[1],A=W.useCallback(function(xe,Re){return new Promise(function(N,B){var le=d.validate(xe,Re);le==null?N(Eg):cN(le)?le.then(function(_e){N(_e||Eg)},function(_e){B(_e)}):N(le)})},[d.validate]),E=W.useCallback(function(xe,Re){var N=d.validationSchema,B=hu(N)?N(Re):N,le=Re&&B.validateAt?B.validateAt(Re,xe):eFe(xe,B);return new Promise(function(_e,Ee){le.then(function(){_e(Eg)},function(Fe){Fe.name==="ValidationError"?_e(Qke(Fe)):Ee(Fe)})})},[d.validationSchema]),M=W.useCallback(function(xe,Re){return new Promise(function(N){return N(y.current[xe].validate(Re))})},[]),C=W.useCallback(function(xe){var Re=Object.keys(y.current).filter(function(B){return hu(y.current[B].validate)}),N=Re.length>0?Re.map(function(B){return M(B,Ql(xe,B))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(N).then(function(B){return B.reduce(function(le,_e,Ee){return _e==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||_e&&(le=H0(le,Re[Ee],_e)),le},{})})},[M]),T=W.useCallback(function(xe){return Promise.all([C(xe),d.validationSchema?E(xe):{},d.validate?A(xe):{}]).then(function(Re){var N=Re[0],B=Re[1],le=Re[2],_e=D6.all([N,B,le],{arrayMerge:tFe});return _e})},[d.validate,d.validationSchema,C,A,E]),D=Vl(function(xe){return xe===void 0&&(xe=b.values),S({type:"SET_ISVALIDATING",payload:!0}),T(xe).then(function(Re){return v.current&&(S({type:"SET_ISVALIDATING",payload:!1}),S({type:"SET_ERRORS",payload:Re})),Re})});W.useEffect(function(){o&&v.current===!0&&Jg(f.current,d.initialValues)&&D(f.current)},[o,D]);var L=W.useCallback(function(xe){var Re=xe&&xe.values?xe.values:f.current,N=xe&&xe.errors?xe.errors:p.current?p.current:d.initialErrors||{},B=xe&&xe.touched?xe.touched:m.current?m.current:d.initialTouched||{},le=xe&&xe.status?xe.status:g.current?g.current:d.initialStatus;f.current=Re,p.current=N,m.current=B,g.current=le;var _e=function(){S({type:"RESET_FORM",payload:{isSubmitting:!!xe&&!!xe.isSubmitting,errors:N,touched:B,status:le,values:Re,isValidating:!!xe&&!!xe.isValidating,submitCount:xe&&xe.submitCount&&typeof xe.submitCount=="number"?xe.submitCount:0}})};if(d.onReset){var Ee=d.onReset(b.values,ge);cN(Ee)?Ee.then(_e):_e()}else _e()},[d.initialErrors,d.initialStatus,d.initialTouched]);W.useEffect(function(){v.current===!0&&!Jg(f.current,d.initialValues)&&(c&&(f.current=d.initialValues,L()),o&&D(f.current))},[c,d.initialValues,L,o,D]),W.useEffect(function(){c&&v.current===!0&&!Jg(p.current,d.initialErrors)&&(p.current=d.initialErrors||Eg,S({type:"SET_ERRORS",payload:d.initialErrors||Eg}))},[c,d.initialErrors]),W.useEffect(function(){c&&v.current===!0&&!Jg(m.current,d.initialTouched)&&(m.current=d.initialTouched||IT,S({type:"SET_TOUCHED",payload:d.initialTouched||IT}))},[c,d.initialTouched]),W.useEffect(function(){c&&v.current===!0&&!Jg(g.current,d.initialStatus)&&(g.current=d.initialStatus,S({type:"SET_STATUS",payload:d.initialStatus}))},[c,d.initialStatus,d.initialTouched]);var I=Vl(function(xe){if(y.current[xe]&&hu(y.current[xe].validate)){var Re=Ql(b.values,xe),N=y.current[xe].validate(Re);return cN(N)?(S({type:"SET_ISVALIDATING",payload:!0}),N.then(function(B){return B}).then(function(B){S({type:"SET_FIELD_ERROR",payload:{field:xe,value:B}}),S({type:"SET_ISVALIDATING",payload:!1})})):(S({type:"SET_FIELD_ERROR",payload:{field:xe,value:N}}),Promise.resolve(N))}else if(d.validationSchema)return S({type:"SET_ISVALIDATING",payload:!0}),E(b.values,xe).then(function(B){return B}).then(function(B){S({type:"SET_FIELD_ERROR",payload:{field:xe,value:B[xe]}}),S({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),R=W.useCallback(function(xe,Re){var N=Re.validate;y.current[xe]={validate:N}},[]),H=W.useCallback(function(xe){delete y.current[xe]},[]),Z=Vl(function(xe,Re){S({type:"SET_TOUCHED",payload:xe});var N=Re===void 0?r:Re;return N?D(b.values):Promise.resolve()}),ee=W.useCallback(function(xe){S({type:"SET_ERRORS",payload:xe})},[]),F=Vl(function(xe,Re){var N=hu(xe)?xe(b.values):xe;S({type:"SET_VALUES",payload:N});var B=Re===void 0?n:Re;return B?D(N):Promise.resolve()}),V=W.useCallback(function(xe,Re){S({type:"SET_FIELD_ERROR",payload:{field:xe,value:Re}})},[]),U=Vl(function(xe,Re,N){S({type:"SET_FIELD_VALUE",payload:{field:xe,value:Re}});var B=N===void 0?n:N;return B?D(H0(b.values,xe,Re)):Promise.resolve()}),j=W.useCallback(function(xe,Re){var N=Re,B=xe,le;if(!lN(xe)){xe.persist&&xe.persist();var _e=xe.target?xe.target:xe.currentTarget,Ee=_e.type,Fe=_e.name,Ze=_e.id,Ue=_e.value,be=_e.checked,Xe=_e.outerHTML,Ge=_e.options,We=_e.multiple;N=Re||Fe||Ze,B=/number|range/.test(Ee)?(le=parseFloat(Ue),isNaN(le)?"":le):/checkbox/.test(Ee)?iFe(Ql(b.values,N),be,Ue):Ge&&We?nFe(Ge):Ue}N&&U(N,B)},[U,b.values]),z=Vl(function(xe){if(lN(xe))return function(Re){return j(Re,xe)};j(xe)}),Y=Vl(function(xe,Re,N){Re===void 0&&(Re=!0),S({type:"SET_FIELD_TOUCHED",payload:{field:xe,value:Re}});var B=N===void 0?r:N;return B?D(b.values):Promise.resolve()}),J=W.useCallback(function(xe,Re){xe.persist&&xe.persist();var N=xe.target,B=N.name,le=N.id,_e=N.outerHTML,Ee=Re||B||le;Y(Ee,!0)},[Y]),K=Vl(function(xe){if(lN(xe))return function(Re){return J(Re,xe)};J(xe)}),X=W.useCallback(function(xe){hu(xe)?S({type:"SET_FORMIK_STATE",payload:xe}):S({type:"SET_FORMIK_STATE",payload:function(){return xe}})},[]),te=W.useCallback(function(xe){S({type:"SET_STATUS",payload:xe})},[]),re=W.useCallback(function(xe){S({type:"SET_ISSUBMITTING",payload:xe})},[]),se=Vl(function(){return S({type:"SUBMIT_ATTEMPT"}),D().then(function(xe){var Re=xe instanceof Error,N=!Re&&Object.keys(xe).length===0;if(N){var B;try{if(B=oe(),B===void 0)return}catch(le){throw le}return Promise.resolve(B).then(function(le){return v.current&&S({type:"SUBMIT_SUCCESS"}),le}).catch(function(le){if(v.current)throw S({type:"SUBMIT_FAILURE"}),le})}else if(v.current&&(S({type:"SUBMIT_FAILURE"}),Re))throw xe})}),ce=Vl(function(xe){xe&&xe.preventDefault&&hu(xe.preventDefault)&&xe.preventDefault(),xe&&xe.stopPropagation&&hu(xe.stopPropagation)&&xe.stopPropagation(),se().catch(function(Re){console.warn("Warning: An unhandled error was caught from submitForm()",Re)})}),ge={resetForm:L,validateForm:D,validateField:I,setErrors:ee,setFieldError:V,setFieldTouched:Y,setFieldValue:U,setStatus:te,setSubmitting:re,setTouched:Z,setValues:F,setFormikState:X,submitForm:se},oe=Vl(function(){return h(b.values,ge)}),ae=Vl(function(xe){xe&&xe.preventDefault&&hu(xe.preventDefault)&&xe.preventDefault(),xe&&xe.stopPropagation&&hu(xe.stopPropagation)&&xe.stopPropagation(),L()}),ye=W.useCallback(function(xe){return{value:Ql(b.values,xe),error:Ql(b.errors,xe),touched:!!Ql(b.touched,xe),initialValue:Ql(f.current,xe),initialTouched:!!Ql(m.current,xe),initialError:Ql(p.current,xe)}},[b.errors,b.touched,b.values]),we=W.useCallback(function(xe){return{setValue:function(N,B){return U(xe,N,B)},setTouched:function(N,B){return Y(xe,N,B)},setError:function(N){return V(xe,N)}}},[U,Y,V]),Se=W.useCallback(function(xe){var Re=mI(xe),N=Re?xe.name:xe,B=Ql(b.values,N),le={name:N,value:B,onChange:z,onBlur:K};if(Re){var _e=xe.type,Ee=xe.value,Fe=xe.as,Ze=xe.multiple;_e==="checkbox"?Ee===void 0?le.checked=!!B:(le.checked=!!(Array.isArray(B)&&~B.indexOf(Ee)),le.value=Ee):_e==="radio"?(le.checked=B===Ee,le.value=Ee):Fe==="select"&&Ze&&(le.value=le.value||[],le.multiple=!0)}return le},[K,z,b.values]),Pe=W.useMemo(function(){return!Jg(f.current,b.values)},[f.current,b.values]),Te=W.useMemo(function(){return typeof a<"u"?Pe?b.errors&&Object.keys(b.errors).length===0:a!==!1&&hu(a)?a(d):a:b.errors&&Object.keys(b.errors).length===0},[a,Pe,b.errors,d]),Ie=Ys({},b,{initialValues:f.current,initialErrors:p.current,initialTouched:m.current,initialStatus:g.current,handleBlur:K,handleChange:z,handleReset:ae,handleSubmit:ce,resetForm:L,setErrors:ee,setFormikState:X,setFieldTouched:Y,setFieldValue:U,setFieldError:V,setStatus:te,setSubmitting:re,setTouched:Z,setValues:F,submitForm:se,validateForm:D,validateField:I,isValid:Te,dirty:Pe,unregisterField:H,registerField:R,getFieldProps:Se,getFieldMeta:ye,getFieldHelpers:we,validateOnBlur:r,validateOnChange:n,validateOnMount:o});return Ie}function Qke(t){var e={};if(t.inner){if(t.inner.length===0)return H0(e,t.path,t.message);for(var r=t.inner,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var s;if(n){if(i>=r.length)break;s=r[i++]}else{if(i=r.next(),i.done)break;s=i.value}var o=s;Ql(e,o.path)||(e=H0(e,o.path,o.message))}}return e}function eFe(t,e,n,i){n===void 0&&(n=!1),i===void 0&&(i={});var r=N6(t);return e[n?"validateSync":"validate"](r,{abortEarly:!1,context:i})}function N6(t){var e=Array.isArray(t)?[]:{};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=String(n);Array.isArray(t[i])===!0?e[i]=t[i].map(function(r){return Array.isArray(r)===!0||O6(r)?N6(r):r!==""?r:void 0}):O6(t[i])?e[i]=N6(t[i]):e[i]=t[i]!==""?t[i]:void 0}return e}function tFe(t,e,n){var i=t.slice();return e.forEach(function(s,o){if(typeof i[o]>"u"){var a=n.clone!==!1,l=a&&n.isMergeableObject(s);i[o]=l?D6(Array.isArray(s)?[]:{},s,n):s}else n.isMergeableObject(s)?i[o]=D6(t[o],s,n):t.indexOf(s)===-1&&i.push(s)}),i}function nFe(t){return Array.from(t).filter(function(e){return e.selected}).map(function(e){return e.value})}function iFe(t,e,n){if(typeof t=="boolean")return!!e;var i=[],r=!1,s=-1;if(Array.isArray(t))i=t,s=t.indexOf(n),r=s>=0;else if(!n||n=="true"||n=="false")return!!e;return e&&n&&!r?i.concat(n):r?i.slice(0,s).concat(i.slice(s+1)):i}var rFe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?W.useLayoutEffect:W.useEffect;function Vl(t){var e=W.useRef(t);return rFe(function(){e.current=t}),W.useCallback(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.current.apply(void 0,i)},[])}var sFe=W.forwardRef(function(t,e){var n=t.action,i=tme(t,["action"]),r=n??"#",s=Jke(),o=s.handleReset,a=s.handleSubmit;return W.createElement("form",Object.assign({onSubmit:a,ref:e,onReset:o,action:r},i))});sFe.displayName="Form";var rme={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},mZ=ue.createContext&&ue.createContext(rme),Rm=globalThis&&globalThis.__assign||function(){return Rm=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Rm.apply(this,arguments)},oFe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function sme(t){return t&&t.map(function(e,n){return ue.createElement(e.tag,Rm({key:n},e.attr),sme(e.child))})}function rg(t){return function(e){return ue.createElement(aFe,Rm({attr:Rm({},t.attr)},e),sme(t.child))}}function aFe(t){var e=function(n){var i=t.attr,r=t.size,s=t.title,o=oFe(t,["attr","size","title"]),a=r||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),ue.createElement("svg",Rm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:l,style:Rm(Rm({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ue.createElement("title",null,s),t.children)};return mZ!==void 0?ue.createElement(mZ.Consumer,null,function(n){return e(n)}):e(rme)}function lFe(t){return rg({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attr:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]})(t)}function bw(t){return rg({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]})(t)}function cFe(t){return rg({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"}}]})(t)}function vE(t){return rg({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"}}]})(t)}const uFe={black:"#000",white:"#fff"},a2=uFe,hFe={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Ey=hFe,dFe={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Cy=dFe,fFe={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Ty=fFe,pFe={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Py=pFe,mFe={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Dy=mFe,gFe={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},j_=gFe,vFe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},yFe=vFe;function st(){return st=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},st.apply(this,arguments)}function d0(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function ome(t){if(!d0(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=ome(t[n])}),e}function Mf(t,e,n={clone:!0}){const i=n.clone?st({},t):t;return d0(t)&&d0(e)&&Object.keys(e).forEach(r=>{r!=="__proto__"&&(d0(e[r])&&r in t&&d0(t[r])?i[r]=Mf(t[r],e[r],n):n.clone?i[r]=d0(e[r])?ome(e[r]):e[r]:i[r]=e[r])}),i}var ft={},xFe={get exports(){return ft},set exports(t){ft=t}},bFe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wFe=bFe,_Fe=wFe;function ame(){}function lme(){}lme.resetWarningCache=ame;var SFe=function(){function t(i,r,s,o,a,l){if(l!==_Fe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:lme,resetWarningCache:ame};return n.PropTypes=n,n};xFe.exports=SFe();function kb(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}function Cu(t){if(typeof t!="string")throw new Error(kb(7));return t.charAt(0).toUpperCase()+t.slice(1)}function gZ(...t){return t.reduce((e,n)=>n==null?e:function(...r){e.apply(this,r),n.apply(this,r)},()=>{})}function Im(t){return t&&t.ownerDocument||document}function r9(t){return Im(t).defaultView||window}function z6(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const AFe=typeof window<"u"?W.useLayoutEffect:W.useEffect,U6=AFe;function vZ(t){const e=W.useRef(t);return U6(()=>{e.current=t}),W.useCallback((...n)=>(0,e.current)(...n),[])}function ww(...t){return W.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{z6(n,e)})},t)}function MFe(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function cme(t,e){const n=st({},e);return Object.keys(t).forEach(i=>{if(i.toString().match(/^(components|slots)$/))n[i]=st({},t[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const r=t[i]||{},s=e[i];n[i]={},!s||!Object.keys(s)?n[i]=r:!r||!Object.keys(r)?n[i]=s:(n[i]=st({},s),Object.keys(r).forEach(o=>{n[i][o]=cme(r[o],s[o])}))}else n[i]===void 0&&(n[i]=t[i])}),n}function cd(t,e,n=void 0){const i={};return Object.keys(t).forEach(r=>{i[r]=t[r].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),i}const yZ=t=>t,EFe=()=>{let t=yZ;return{configure(e){t=e},generate(e){return t(e)},reset(){t=yZ}}},CFe=EFe(),ume=CFe,TFe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function ju(t,e,n="Mui"){const i=TFe[e];return i?`${n}-${i}`:`${ume.generate(t)}-${e}`}function ud(t,e,n="Mui"){const i={};return e.forEach(r=>{i[r]=ju(t,r,n)}),i}function Ni(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function PFe(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var DFe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,OFe=PFe(function(t){return DFe.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function LFe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function RFe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var IFe=function(){function t(n){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(RFe(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=LFe(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},t}(),bo="-ms-",qO="-moz-",ti="-webkit-",hme="comm",s9="rule",o9="decl",BFe="@import",dme="@keyframes",kFe=Math.abs,vI=String.fromCharCode,FFe=Object.assign;function NFe(t,e){return eo(t,0)^45?(((e<<2^eo(t,0))<<2^eo(t,1))<<2^eo(t,2))<<2^eo(t,3):0}function fme(t){return t.trim()}function zFe(t,e){return(t=e.exec(t))?t[0]:t}function si(t,e,n){return t.replace(e,n)}function G6(t,e){return t.indexOf(e)}function eo(t,e){return t.charCodeAt(e)|0}function l2(t,e,n){return t.slice(e,n)}function Eh(t){return t.length}function a9(t){return t.length}function BT(t,e){return e.push(t),t}function UFe(t,e){return t.map(e).join("")}var yI=1,Fb=1,pme=0,La=0,rs=0,_w="";function xI(t,e,n,i,r,s,o){return{value:t,root:e,parent:n,type:i,props:r,children:s,line:yI,column:Fb,length:o,return:""}}function V_(t,e){return FFe(xI("",null,null,"",null,null,0),t,{length:-t.length},e)}function GFe(){return rs}function HFe(){return rs=La>0?eo(_w,--La):0,Fb--,rs===10&&(Fb=1,yI--),rs}function ml(){return rs=La<pme?eo(_w,La++):0,Fb++,rs===10&&(Fb=1,yI++),rs}function $h(){return eo(_w,La)}function SD(){return La}function yE(t,e){return l2(_w,t,e)}function c2(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function mme(t){return yI=Fb=1,pme=Eh(_w=t),La=0,[]}function gme(t){return _w="",t}function AD(t){return fme(yE(La-1,H6(t===91?t+2:t===40?t+1:t)))}function jFe(t){for(;(rs=$h())&&rs<33;)ml();return c2(t)>2||c2(rs)>3?"":" "}function VFe(t,e){for(;--e&&ml()&&!(rs<48||rs>102||rs>57&&rs<65||rs>70&&rs<97););return yE(t,SD()+(e<6&&$h()==32&&ml()==32))}function H6(t){for(;ml();)switch(rs){case t:return La;case 34:case 39:t!==34&&t!==39&&H6(rs);break;case 40:t===41&&H6(t);break;case 92:ml();break}return La}function WFe(t,e){for(;ml()&&t+rs!==47+10;)if(t+rs===42+42&&$h()===47)break;return"/*"+yE(e,La-1)+"*"+vI(t===47?t:ml())}function $Fe(t){for(;!c2($h());)ml();return yE(t,La)}function qFe(t){return gme(MD("",null,null,null,[""],t=mme(t),0,[0],t))}function MD(t,e,n,i,r,s,o,a,l){for(var c=0,h=0,u=o,d=0,f=0,p=0,m=1,g=1,v=1,y=0,x="",b=r,S=s,A=i,E=x;g;)switch(p=y,y=ml()){case 40:if(p!=108&&eo(E,u-1)==58){G6(E+=si(AD(y),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:E+=AD(y);break;case 9:case 10:case 13:case 32:E+=jFe(p);break;case 92:E+=VFe(SD()-1,7);continue;case 47:switch($h()){case 42:case 47:BT(XFe(WFe(ml(),SD()),e,n),l);break;default:E+="/"}break;case 123*m:a[c++]=Eh(E)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+h:f>0&&Eh(E)-u&&BT(f>32?bZ(E+";",i,n,u-1):bZ(si(E," ","")+";",i,n,u-2),l);break;case 59:E+=";";default:if(BT(A=xZ(E,e,n,c,h,r,a,x,b=[],S=[],u),s),y===123)if(h===0)MD(E,e,A,A,b,s,u,a,S);else switch(d===99&&eo(E,3)===110?100:d){case 100:case 109:case 115:MD(t,A,A,i&&BT(xZ(t,A,A,0,0,r,a,x,r,b=[],u),S),r,S,u,a,i?b:S);break;default:MD(E,A,A,A,[""],S,0,a,S)}}c=h=f=0,m=v=1,x=E="",u=o;break;case 58:u=1+Eh(E),f=p;default:if(m<1){if(y==123)--m;else if(y==125&&m++==0&&HFe()==125)continue}switch(E+=vI(y),y*m){case 38:v=h>0?1:(E+="\f",-1);break;case 44:a[c++]=(Eh(E)-1)*v,v=1;break;case 64:$h()===45&&(E+=AD(ml())),d=$h(),h=u=Eh(x=E+=$Fe(SD())),y++;break;case 45:p===45&&Eh(E)==2&&(m=0)}}return s}function xZ(t,e,n,i,r,s,o,a,l,c,h){for(var u=r-1,d=r===0?s:[""],f=a9(d),p=0,m=0,g=0;p<i;++p)for(var v=0,y=l2(t,u+1,u=kFe(m=o[p])),x=t;v<f;++v)(x=fme(m>0?d[v]+" "+y:si(y,/&\f/g,d[v])))&&(l[g++]=x);return xI(t,e,n,r===0?s9:a,l,c,h)}function XFe(t,e,n){return xI(t,e,n,hme,vI(GFe()),l2(t,2,-2),0)}function bZ(t,e,n,i){return xI(t,e,n,o9,l2(t,0,i),l2(t,i+1,-1),i)}function Xx(t,e){for(var n="",i=a9(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function YFe(t,e,n,i){switch(t.type){case BFe:case o9:return t.return=t.return||t.value;case hme:return"";case dme:return t.return=t.value+"{"+Xx(t.children,i)+"}";case s9:t.value=t.props.join(",")}return Eh(n=Xx(t.children,i))?t.return=t.value+"{"+n+"}":""}function KFe(t){var e=a9(t);return function(n,i,r,s){for(var o="",a=0;a<e;a++)o+=t[a](n,i,r,s)||"";return o}}function JFe(t){return function(e){e.root||(e=e.return)&&t(e)}}var ZFe=function(e,n,i){for(var r=0,s=0;r=s,s=$h(),r===38&&s===12&&(n[i]=1),!c2(s);)ml();return yE(e,La)},QFe=function(e,n){var i=-1,r=44;do switch(c2(r)){case 0:r===38&&$h()===12&&(n[i]=1),e[i]+=ZFe(La-1,n,i);break;case 2:e[i]+=AD(r);break;case 4:if(r===44){e[++i]=$h()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=vI(r)}while(r=ml());return e},eNe=function(e,n){return gme(QFe(mme(e),n))},wZ=new WeakMap,tNe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!wZ.get(i))&&!r){wZ.set(e,!0);for(var s=[],o=eNe(n,s),a=i.props,l=0,c=0;l<o.length;l++)for(var h=0;h<a.length;h++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[h]):a[h]+" "+o[l]}}},nNe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function vme(t,e){switch(NFe(t,e)){case 5103:return ti+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ti+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ti+t+qO+t+bo+t+t;case 6828:case 4268:return ti+t+bo+t+t;case 6165:return ti+t+bo+"flex-"+t+t;case 5187:return ti+t+si(t,/(\w+).+(:[^]+)/,ti+"box-$1$2"+bo+"flex-$1$2")+t;case 5443:return ti+t+bo+"flex-item-"+si(t,/flex-|-self/,"")+t;case 4675:return ti+t+bo+"flex-line-pack"+si(t,/align-content|flex-|-self/,"")+t;case 5548:return ti+t+bo+si(t,"shrink","negative")+t;case 5292:return ti+t+bo+si(t,"basis","preferred-size")+t;case 6060:return ti+"box-"+si(t,"-grow","")+ti+t+bo+si(t,"grow","positive")+t;case 4554:return ti+si(t,/([^-])(transform)/g,"$1"+ti+"$2")+t;case 6187:return si(si(si(t,/(zoom-|grab)/,ti+"$1"),/(image-set)/,ti+"$1"),t,"")+t;case 5495:case 3959:return si(t,/(image-set\([^]*)/,ti+"$1$`$1");case 4968:return si(si(t,/(.+:)(flex-)?(.*)/,ti+"box-pack:$3"+bo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ti+t+t;case 4095:case 3583:case 4068:case 2532:return si(t,/(.+)-inline(.+)/,ti+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Eh(t)-1-e>6)switch(eo(t,e+1)){case 109:if(eo(t,e+4)!==45)break;case 102:return si(t,/(.+:)(.+)-([^]+)/,"$1"+ti+"$2-$3$1"+qO+(eo(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~G6(t,"stretch")?vme(si(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(eo(t,e+1)!==115)break;case 6444:switch(eo(t,Eh(t)-3-(~G6(t,"!important")&&10))){case 107:return si(t,":",":"+ti)+t;case 101:return si(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ti+(eo(t,14)===45?"inline-":"")+"box$3$1"+ti+"$2$3$1"+bo+"$2box$3")+t}break;case 5936:switch(eo(t,e+11)){case 114:return ti+t+bo+si(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ti+t+bo+si(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ti+t+bo+si(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ti+t+bo+t+t}return t}var iNe=function(e,n,i,r){if(e.length>-1&&!e.return)switch(e.type){case o9:e.return=vme(e.value,e.length);break;case dme:return Xx([V_(e,{value:si(e.value,"@","@"+ti)})],r);case s9:if(e.length)return UFe(e.props,function(s){switch(zFe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Xx([V_(e,{props:[si(s,/:(read-\w+)/,":"+qO+"$1")]})],r);case"::placeholder":return Xx([V_(e,{props:[si(s,/:(plac\w+)/,":"+ti+"input-$1")]}),V_(e,{props:[si(s,/:(plac\w+)/,":"+qO+"$1")]}),V_(e,{props:[si(s,/:(plac\w+)/,bo+"input-$1")]})],r)}return""})}},rNe=[iNe],sNe=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var r=e.stylisPlugins||rNe,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),v=1;v<g.length;v++)s[g[v]]=!0;a.push(m)});var l,c=[tNe,nNe];{var h,u=[YFe,JFe(function(m){h.insert(m)})],d=KFe(c.concat(r,u)),f=function(g){return Xx(qFe(g),d)};l=function(g,v,y,x){h=y,f(g?g+"{"+v.styles+"}":v.styles),x&&(p.inserted[v.name]=!0)}}var p={key:n,sheet:new IFe({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},oNe=!0;function aNe(t,e,n){var i="";return n.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):i+=r+" "}),i}var yme=function(e,n,i){var r=e.key+"-"+n.name;(i===!1||oNe===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},lNe=function(e,n,i){yme(e,n,i);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function cNe(t){for(var e=0,n,i=0,r=t.length;r>=4;++i,r-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var uNe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function hNe(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var dNe=/[A-Z]|^ms/g,fNe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,xme=function(e){return e.charCodeAt(1)===45},_Z=function(e){return e!=null&&typeof e!="boolean"},uN=hNe(function(t){return xme(t)?t:t.replace(dNe,"-$&").toLowerCase()}),SZ=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(fNe,function(i,r,s){return Ch={name:r,styles:s,next:Ch},r})}return uNe[e]!==1&&!xme(e)&&typeof n=="number"&&n!==0?n+"px":n};function u2(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Ch={name:n.name,styles:n.styles,next:Ch},n.name;if(n.styles!==void 0){var i=n.next;if(i!==void 0)for(;i!==void 0;)Ch={name:i.name,styles:i.styles,next:Ch},i=i.next;var r=n.styles+";";return r}return pNe(t,e,n)}case"function":{if(t!==void 0){var s=Ch,o=n(t);return Ch=s,u2(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function pNe(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=u2(t,e,n[r])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?i+=s+"{"+e[o]+"}":_Z(o)&&(i+=uN(s)+":"+SZ(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)_Z(o[a])&&(i+=uN(s)+":"+SZ(s,o[a])+";");else{var l=u2(t,e,o);switch(s){case"animation":case"animationName":{i+=uN(s)+":"+l+";";break}default:i+=s+"{"+l+"}"}}}return i}var AZ=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ch,mNe=function(e,n,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,s="";Ch=void 0;var o=e[0];o==null||o.raw===void 0?(r=!1,s+=u2(i,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=u2(i,n,e[a]),r&&(s+=o[a]);AZ.lastIndex=0;for(var l="",c;(c=AZ.exec(s))!==null;)l+="-"+c[1];var h=cNe(s)+l;return{name:h,styles:s,next:Ch}},gNe=function(e){return e()},vNe=LM["useInsertionEffect"]?LM["useInsertionEffect"]:!1,yNe=vNe||gNe,bme=W.createContext(typeof HTMLElement<"u"?sNe({key:"css"}):null);bme.Provider;var xNe=function(e){return W.forwardRef(function(n,i){var r=W.useContext(bme);return e(n,r,i)})},bNe=W.createContext({}),wNe=OFe,_Ne=function(e){return e!=="theme"},MZ=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?wNe:_Ne},EZ=function(e,n,i){var r;if(n){var s=n.shouldForwardProp;r=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof r!="function"&&i&&(r=e.__emotion_forwardProp),r},SNe=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return yme(n,i,r),yNe(function(){return lNe(n,i,r)}),null},ANe=function t(e,n){var i=e.__emotion_real===e,r=i&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=EZ(e,n,i),l=a||MZ(r),c=!l("as");return function(){var h=arguments,u=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&u.push("label:"+s+";"),h[0]==null||h[0].raw===void 0)u.push.apply(u,h);else{u.push(h[0][0]);for(var d=h.length,f=1;f<d;f++)u.push(h[f],h[0][f])}var p=xNe(function(m,g,v){var y=c&&m.as||r,x="",b=[],S=m;if(m.theme==null){S={};for(var A in m)S[A]=m[A];S.theme=W.useContext(bNe)}typeof m.className=="string"?x=aNe(g.registered,b,m.className):m.className!=null&&(x=m.className+" ");var E=mNe(u.concat(b),g.registered,S);x+=g.key+"-"+E.name,o!==void 0&&(x+=" "+o);var M=c&&a===void 0?MZ(y):l,C={};for(var T in m)c&&T==="as"||M(T)&&(C[T]=m[T]);return C.className=x,C.ref=v,W.createElement(W.Fragment,null,W.createElement(SNe,{cache:g,serialized:E,isStringTag:typeof y=="string"}),W.createElement(y,C))});return p.displayName=s!==void 0?s:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=r,p.__emotion_styles=u,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(m,g){return t(m,st({},n,g,{shouldForwardProp:EZ(p,g,!0)})).apply(void 0,u)},p}};const MNe=ANe;var ENe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],j6=MNe.bind();ENe.forEach(function(t){j6[t]=j6(t)});const CNe=j6;/**
 * @mui/styled-engine v5.11.16
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function wme(t,e){return CNe(t,e)}const TNe=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))};function QA(t,e){return e?Mf(t,e,{clone:!1}):t}const l9={xs:0,sm:600,md:900,lg:1200,xl:1536},CZ={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${l9[t]}px)`};function kf(t,e,n){const i=t.theme||{};if(Array.isArray(e)){const s=i.breakpoints||CZ;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=i.breakpoints||CZ;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||l9).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function PNe(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((i,r)=>{const s=t.up(r);return i[s]={},i},{}))||{}}function DNe(t,e){return t.reduce((n,i)=>{const r=n[i];return(!r||Object.keys(r).length===0)&&delete n[i],n},e)}function bI(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const i=`vars.${e}`.split(".").reduce((r,s)=>r&&r[s]?r[s]:null,t);if(i!=null)return i}return e.split(".").reduce((i,r)=>i&&i[r]!=null?i[r]:null,t)}function XO(t,e,n,i=n){let r;return typeof t=="function"?r=t(n):Array.isArray(t)?r=t[n]||i:r=bI(t,n)||i,e&&(r=e(r,i,t)),r}function ai(t){const{prop:e,cssProperty:n=t.prop,themeKey:i,transform:r}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=bI(l,i)||{};return kf(o,a,u=>{let d=XO(c,r,u);return u===d&&typeof u=="string"&&(d=XO(c,r,`${e}${u==="default"?"":Cu(u)}`,u)),n===!1?d:{[n]:d}})};return s.propTypes={},s.filterProps=[e],s}function wI(...t){const e=t.reduce((i,r)=>(r.filterProps.forEach(s=>{i[s]=r}),i),{}),n=i=>Object.keys(i).reduce((r,s)=>e[s]?QA(r,e[s](i)):r,{});return n.propTypes={},n.filterProps=t.reduce((i,r)=>i.concat(r.filterProps),[]),n}function ONe(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const LNe={m:"margin",p:"padding"},RNe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},TZ={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},INe=ONe(t=>{if(t.length>2)if(TZ[t])t=TZ[t];else return[t];const[e,n]=t.split(""),i=LNe[e],r=RNe[n]||"";return Array.isArray(r)?r.map(s=>i+s):[i+r]}),c9=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],u9=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...c9,...u9];function xE(t,e,n,i){var r;const s=(r=bI(t,e,!1))!=null?r:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function _me(t){return xE(t,"spacing",8)}function bE(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),i=t(n);return e>=0?i:typeof i=="number"?-i:`-${i}`}function BNe(t,e){return n=>t.reduce((i,r)=>(i[r]=bE(e,n),i),{})}function kNe(t,e,n,i){if(e.indexOf(n)===-1)return null;const r=INe(n),s=BNe(r,i),o=t[n];return kf(t,o,s)}function Sme(t,e){const n=_me(t.theme);return Object.keys(t).map(i=>kNe(t,e,i,n)).reduce(QA,{})}function _r(t){return Sme(t,c9)}_r.propTypes={};_r.filterProps=c9;function Sr(t){return Sme(t,u9)}Sr.propTypes={};Sr.filterProps=u9;function Oh(t){return typeof t!="number"?t:`${t}px solid`}const FNe=ai({prop:"border",themeKey:"borders",transform:Oh}),NNe=ai({prop:"borderTop",themeKey:"borders",transform:Oh}),zNe=ai({prop:"borderRight",themeKey:"borders",transform:Oh}),UNe=ai({prop:"borderBottom",themeKey:"borders",transform:Oh}),GNe=ai({prop:"borderLeft",themeKey:"borders",transform:Oh}),HNe=ai({prop:"borderColor",themeKey:"palette"}),jNe=ai({prop:"borderTopColor",themeKey:"palette"}),VNe=ai({prop:"borderRightColor",themeKey:"palette"}),WNe=ai({prop:"borderBottomColor",themeKey:"palette"}),$Ne=ai({prop:"borderLeftColor",themeKey:"palette"}),_I=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=xE(t.theme,"shape.borderRadius",4),n=i=>({borderRadius:bE(e,i)});return kf(t,t.borderRadius,n)}return null};_I.propTypes={};_I.filterProps=["borderRadius"];wI(FNe,NNe,zNe,UNe,GNe,HNe,jNe,VNe,WNe,$Ne,_I);const SI=t=>{if(t.gap!==void 0&&t.gap!==null){const e=xE(t.theme,"spacing",8),n=i=>({gap:bE(e,i)});return kf(t,t.gap,n)}return null};SI.propTypes={};SI.filterProps=["gap"];const AI=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=xE(t.theme,"spacing",8),n=i=>({columnGap:bE(e,i)});return kf(t,t.columnGap,n)}return null};AI.propTypes={};AI.filterProps=["columnGap"];const MI=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=xE(t.theme,"spacing",8),n=i=>({rowGap:bE(e,i)});return kf(t,t.rowGap,n)}return null};MI.propTypes={};MI.filterProps=["rowGap"];const qNe=ai({prop:"gridColumn"}),XNe=ai({prop:"gridRow"}),YNe=ai({prop:"gridAutoFlow"}),KNe=ai({prop:"gridAutoColumns"}),JNe=ai({prop:"gridAutoRows"}),ZNe=ai({prop:"gridTemplateColumns"}),QNe=ai({prop:"gridTemplateRows"}),e4e=ai({prop:"gridTemplateAreas"}),t4e=ai({prop:"gridArea"});wI(SI,AI,MI,qNe,XNe,YNe,KNe,JNe,ZNe,QNe,e4e,t4e);function Yx(t,e){return e==="grey"?e:t}const n4e=ai({prop:"color",themeKey:"palette",transform:Yx}),i4e=ai({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Yx}),r4e=ai({prop:"backgroundColor",themeKey:"palette",transform:Yx});wI(n4e,i4e,r4e);function nl(t){return t<=1&&t!==0?`${t*100}%`:t}const s4e=ai({prop:"width",transform:nl}),h9=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,r,s;return{maxWidth:((i=t.theme)==null||(r=i.breakpoints)==null||(s=r.values)==null?void 0:s[n])||l9[n]||nl(n)}};return kf(t,t.maxWidth,e)}return null};h9.filterProps=["maxWidth"];const o4e=ai({prop:"minWidth",transform:nl}),a4e=ai({prop:"height",transform:nl}),l4e=ai({prop:"maxHeight",transform:nl}),c4e=ai({prop:"minHeight",transform:nl});ai({prop:"size",cssProperty:"width",transform:nl});ai({prop:"size",cssProperty:"height",transform:nl});const u4e=ai({prop:"boxSizing"});wI(s4e,h9,o4e,a4e,l4e,c4e,u4e);const h4e={border:{themeKey:"borders",transform:Oh},borderTop:{themeKey:"borders",transform:Oh},borderRight:{themeKey:"borders",transform:Oh},borderBottom:{themeKey:"borders",transform:Oh},borderLeft:{themeKey:"borders",transform:Oh},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:_I},color:{themeKey:"palette",transform:Yx},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Yx},backgroundColor:{themeKey:"palette",transform:Yx},p:{style:Sr},pt:{style:Sr},pr:{style:Sr},pb:{style:Sr},pl:{style:Sr},px:{style:Sr},py:{style:Sr},padding:{style:Sr},paddingTop:{style:Sr},paddingRight:{style:Sr},paddingBottom:{style:Sr},paddingLeft:{style:Sr},paddingX:{style:Sr},paddingY:{style:Sr},paddingInline:{style:Sr},paddingInlineStart:{style:Sr},paddingInlineEnd:{style:Sr},paddingBlock:{style:Sr},paddingBlockStart:{style:Sr},paddingBlockEnd:{style:Sr},m:{style:_r},mt:{style:_r},mr:{style:_r},mb:{style:_r},ml:{style:_r},mx:{style:_r},my:{style:_r},margin:{style:_r},marginTop:{style:_r},marginRight:{style:_r},marginBottom:{style:_r},marginLeft:{style:_r},marginX:{style:_r},marginY:{style:_r},marginInline:{style:_r},marginInlineStart:{style:_r},marginInlineEnd:{style:_r},marginBlock:{style:_r},marginBlockStart:{style:_r},marginBlockEnd:{style:_r},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:SI},rowGap:{style:MI},columnGap:{style:AI},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:nl},maxWidth:{style:h9},minWidth:{transform:nl},height:{transform:nl},maxHeight:{transform:nl},minHeight:{transform:nl},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},EI=h4e;function d4e(...t){const e=t.reduce((i,r)=>i.concat(Object.keys(r)),[]),n=new Set(e);return t.every(i=>n.size===Object.keys(i).length)}function f4e(t,e){return typeof t=="function"?t(e):t}function p4e(){function t(n,i,r,s){const o={[n]:i,theme:r},a=s[n];if(!a)return{[n]:i};const{cssProperty:l=n,themeKey:c,transform:h,style:u}=a;if(i==null)return null;if(c==="typography"&&i==="inherit")return{[n]:i};const d=bI(r,c)||{};return u?u(o):kf(o,i,p=>{let m=XO(d,h,p);return p===m&&typeof p=="string"&&(m=XO(d,h,`${n}${p==="default"?"":Cu(p)}`,p)),l===!1?m:{[l]:m}})}function e(n){var i;const{sx:r,theme:s={}}=n||{};if(!r)return null;const o=(i=s.unstable_sxConfig)!=null?i:EI;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const h=PNe(s.breakpoints),u=Object.keys(h);let d=h;return Object.keys(c).forEach(f=>{const p=f4e(c[f],s);if(p!=null)if(typeof p=="object")if(o[f])d=QA(d,t(f,p,s,o));else{const m=kf({theme:s},p,g=>({[f]:g}));d4e(m,p)?d[f]=e({sx:p,theme:s}):d=QA(d,m)}else d=QA(d,t(f,p,s,o))}),DNe(u,d)}return Array.isArray(r)?r.map(a):a(r)}return e}const Ame=p4e();Ame.filterProps=["sx"];const CI=Ame,m4e=["sx"],g4e=t=>{var e,n;const i={systemProps:{},otherProps:{}},r=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:EI;return Object.keys(t).forEach(s=>{r[s]?i.systemProps[s]=t[s]:i.otherProps[s]=t[s]}),i};function v4e(t){const{sx:e}=t,n=Ni(t,m4e),{systemProps:i,otherProps:r}=g4e(n);let s;return Array.isArray(e)?s=[i,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return d0(a)?st({},i,a):i}:s=st({},i,e),st({},r,{sx:s})}function Mme(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Mme(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function Xr(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=Mme(t))&&(i&&(i+=" "),i+=e);return i}const y4e=["values","unit","step"],x4e=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,i)=>n.val-i.val),e.reduce((n,i)=>st({},n,{[i.key]:i.val}),{})};function b4e(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5}=t,r=Ni(t,y4e),s=x4e(e),o=Object.keys(s);function a(d){return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${n})`}function l(d){return`@media (max-width:${(typeof e[d]=="number"?e[d]:d)-i/100}${n})`}function c(d,f){const p=o.indexOf(f);return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${n}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:f)-i/100}${n})`}function h(d){return o.indexOf(d)+1<o.length?c(d,o[o.indexOf(d)+1]):a(d)}function u(d){const f=o.indexOf(d);return f===0?a(o[1]):f===o.length-1?l(o[f]):c(d,o[o.indexOf(d)+1]).replace("@media","@media not all and")}return st({keys:o,values:s,up:a,down:l,between:c,only:h,not:u,unit:n},r)}const w4e={borderRadius:4},_4e=w4e;function S4e(t=8){if(t.mui)return t;const e=_me({spacing:t}),n=(...i)=>(i.length===0?[1]:i).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}const A4e=["breakpoints","palette","spacing","shape"];function d9(t={},...e){const{breakpoints:n={},palette:i={},spacing:r,shape:s={}}=t,o=Ni(t,A4e),a=b4e(n),l=S4e(r);let c=Mf({breakpoints:a,direction:"ltr",components:{},palette:st({mode:"light"},i),spacing:l,shape:st({},_4e,s)},o);return c=e.reduce((h,u)=>Mf(h,u),c),c.unstable_sxConfig=st({},EI,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(u){return CI({sx:u,theme:this})},c}const M4e=W.createContext(null),E4e=M4e;function C4e(){return W.useContext(E4e)}function T4e(t){return Object.keys(t).length===0}function P4e(t=null){const e=C4e();return!e||T4e(e)?t:e}const D4e=d9();function f9(t=D4e){return P4e(t)}const O4e=["className","component"];function L4e(t={}){const{defaultTheme:e,defaultClassName:n="MuiBox-root",generateClassName:i}=t,r=wme("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(CI);return W.forwardRef(function(a,l){const c=f9(e),h=v4e(a),{className:u,component:d="div"}=h,f=Ni(h,O4e);return ne(r,st({as:d,ref:l,className:Xr(u,i?i(n):n),theme:c},f))})}const R4e=["variant"];function PZ(t){return t.length===0}function Eme(t){const{variant:e}=t,n=Ni(t,R4e);let i=e||"";return Object.keys(n).sort().forEach(r=>{r==="color"?i+=PZ(i)?t[r]:Cu(t[r]):i+=`${PZ(i)?r:Cu(r)}${Cu(t[r].toString())}`}),i}const I4e=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],B4e=["theme"],k4e=["theme"];function W_(t){return Object.keys(t).length===0}function F4e(t){return typeof t=="string"&&t.charCodeAt(0)>96}const N4e=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,z4e=(t,e)=>{let n=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants);const i={};return n.forEach(r=>{const s=Eme(r.props);i[s]=r.style}),i},U4e=(t,e,n,i)=>{var r,s;const{ownerState:o={}}=t,a=[],l=n==null||(r=n.components)==null||(s=r[i])==null?void 0:s.variants;return l&&l.forEach(c=>{let h=!0;Object.keys(c.props).forEach(u=>{o[u]!==c.props[u]&&t[u]!==c.props[u]&&(h=!1)}),h&&a.push(e[Eme(c.props)])}),a};function ED(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const G4e=d9();function H4e(t={}){const{defaultTheme:e=G4e,rootShouldForwardProp:n=ED,slotShouldForwardProp:i=ED}=t,r=s=>{const o=W_(s.theme)?e:s.theme;return CI(st({},s,{theme:o}))};return r.__mui_systemSx=!0,(s,o={})=>{TNe(s,x=>x.filter(b=>!(b!=null&&b.__mui_systemSx)));const{name:a,slot:l,skipVariantsResolver:c,skipSx:h,overridesResolver:u}=o,d=Ni(o,I4e),f=c!==void 0?c:l&&l!=="Root"||!1,p=h||!1;let m,g=ED;l==="Root"?g=n:l?g=i:F4e(s)&&(g=void 0);const v=wme(s,st({shouldForwardProp:g,label:m},d)),y=(x,...b)=>{const S=b?b.map(C=>typeof C=="function"&&C.__emotion_real!==C?T=>{let{theme:D}=T,L=Ni(T,B4e);return C(st({theme:W_(D)?e:D},L))}:C):[];let A=x;a&&u&&S.push(C=>{const T=W_(C.theme)?e:C.theme,D=N4e(a,T);if(D){const L={};return Object.entries(D).forEach(([I,R])=>{L[I]=typeof R=="function"?R(st({},C,{theme:T})):R}),u(C,L)}return null}),a&&!f&&S.push(C=>{const T=W_(C.theme)?e:C.theme;return U4e(C,z4e(a,T),T,a)}),p||S.push(r);const E=S.length-b.length;if(Array.isArray(x)&&E>0){const C=new Array(E).fill("");A=[...x,...C],A.raw=[...x.raw,...C]}else typeof x=="function"&&x.__emotion_real!==x&&(A=C=>{let{theme:T}=C,D=Ni(C,k4e);return x(st({theme:W_(T)?e:T},D))});return v(A,...S)};return v.withConfig&&(y.withConfig=v.withConfig),y}}function j4e(t){const{theme:e,name:n,props:i}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?i:cme(e.components[n].defaultProps,i)}function V4e({props:t,name:e,defaultTheme:n}){const i=f9(n);return j4e({theme:i,name:e,props:t})}function p9(t,e=0,n=1){return Math.min(Math.max(e,t),n)}function W4e(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,r)=>r<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function pv(t){if(t.type)return t;if(t.charAt(0)==="#")return pv(W4e(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(kb(9,t));let i=t.substring(e+1,t.length-1),r;if(n==="color"){if(i=i.split(" "),r=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r)===-1)throw new Error(kb(10,r))}else i=i.split(",");return i=i.map(s=>parseFloat(s)),{type:n,values:i,colorSpace:r}}function TI(t){const{type:e,colorSpace:n}=t;let{values:i}=t;return e.indexOf("rgb")!==-1?i=i.map((r,s)=>s<3?parseInt(r,10):r):e.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.indexOf("color")!==-1?i=`${n} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function $4e(t){t=pv(t);const{values:e}=t,n=e[0],i=e[1]/100,r=e[2]/100,s=i*Math.min(r,1-r),o=(c,h=(c+n/30)%12)=>r-s*Math.max(Math.min(h-3,9-h,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),TI({type:a,values:l})}function DZ(t){t=pv(t);let e=t.type==="hsl"||t.type==="hsla"?pv($4e(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function q4e(t,e){const n=DZ(t),i=DZ(e);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function Nb(t,e){return t=pv(t),e=p9(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,TI(t)}function Cme(t,e){if(t=pv(t),e=p9(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return TI(t)}function Tme(t,e){if(t=pv(t),e=p9(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return TI(t)}function X4e(t,e){return st({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const Y4e=["mode","contrastThreshold","tonalOffset"],OZ={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:a2.white,default:a2.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},hN={text:{primary:a2.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:a2.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function LZ(t,e,n,i){const r=i.light||i,s=i.dark||i*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=Tme(t.main,r):e==="dark"&&(t.dark=Cme(t.main,s)))}function K4e(t="light"){return t==="dark"?{main:Ty[200],light:Ty[50],dark:Ty[400]}:{main:Ty[700],light:Ty[400],dark:Ty[800]}}function J4e(t="light"){return t==="dark"?{main:Cy[200],light:Cy[50],dark:Cy[400]}:{main:Cy[500],light:Cy[300],dark:Cy[700]}}function Z4e(t="light"){return t==="dark"?{main:Ey[500],light:Ey[300],dark:Ey[700]}:{main:Ey[700],light:Ey[400],dark:Ey[800]}}function Q4e(t="light"){return t==="dark"?{main:Py[400],light:Py[300],dark:Py[700]}:{main:Py[700],light:Py[500],dark:Py[900]}}function e5e(t="light"){return t==="dark"?{main:Dy[400],light:Dy[300],dark:Dy[700]}:{main:Dy[800],light:Dy[500],dark:Dy[900]}}function t5e(t="light"){return t==="dark"?{main:j_[400],light:j_[300],dark:j_[700]}:{main:"#ed6c02",light:j_[500],dark:j_[900]}}function n5e(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:i=.2}=t,r=Ni(t,Y4e),s=t.primary||K4e(e),o=t.secondary||J4e(e),a=t.error||Z4e(e),l=t.info||Q4e(e),c=t.success||e5e(e),h=t.warning||t5e(e);function u(m){return q4e(m,hN.text.primary)>=n?hN.text.primary:OZ.text.primary}const d=({color:m,name:g,mainShade:v=500,lightShade:y=300,darkShade:x=700})=>{if(m=st({},m),!m.main&&m[v]&&(m.main=m[v]),!m.hasOwnProperty("main"))throw new Error(kb(11,g?` (${g})`:"",v));if(typeof m.main!="string")throw new Error(kb(12,g?` (${g})`:"",JSON.stringify(m.main)));return LZ(m,"light",y,i),LZ(m,"dark",x,i),m.contrastText||(m.contrastText=u(m.main)),m},f={dark:hN,light:OZ};return Mf(st({common:st({},a2),mode:e,primary:d({color:s,name:"primary"}),secondary:d({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:a,name:"error"}),warning:d({color:h,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:yFe,contrastThreshold:n,getContrastText:u,augmentColor:d,tonalOffset:i},f[e]),r)}const i5e=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function r5e(t){return Math.round(t*1e5)/1e5}const RZ={textTransform:"uppercase"},IZ='"Roboto", "Helvetica", "Arial", sans-serif';function s5e(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:i=IZ,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:h,pxToRem:u}=n,d=Ni(n,i5e),f=r/14,p=u||(v=>`${v/c*f}rem`),m=(v,y,x,b,S)=>st({fontFamily:i,fontWeight:v,fontSize:p(y),lineHeight:x},i===IZ?{letterSpacing:`${r5e(b/y)}em`}:{},S,h),g={h1:m(s,96,1.167,-1.5),h2:m(s,60,1.2,-.5),h3:m(o,48,1.167,0),h4:m(o,34,1.235,.25),h5:m(o,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(o,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(o,16,1.5,.15),body2:m(o,14,1.43,.15),button:m(a,14,1.75,.4,RZ),caption:m(o,12,1.66,.4),overline:m(o,12,2.66,1,RZ),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Mf(st({htmlFontSize:c,pxToRem:p,fontFamily:i,fontSize:r,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},g),d,{clone:!1})}const o5e=.2,a5e=.14,l5e=.12;function nr(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${o5e})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${a5e})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${l5e})`].join(",")}const c5e=["none",nr(0,2,1,-1,0,1,1,0,0,1,3,0),nr(0,3,1,-2,0,2,2,0,0,1,5,0),nr(0,3,3,-2,0,3,4,0,0,1,8,0),nr(0,2,4,-1,0,4,5,0,0,1,10,0),nr(0,3,5,-1,0,5,8,0,0,1,14,0),nr(0,3,5,-1,0,6,10,0,0,1,18,0),nr(0,4,5,-2,0,7,10,1,0,2,16,1),nr(0,5,5,-3,0,8,10,1,0,3,14,2),nr(0,5,6,-3,0,9,12,1,0,3,16,2),nr(0,6,6,-3,0,10,14,1,0,4,18,3),nr(0,6,7,-4,0,11,15,1,0,4,20,3),nr(0,7,8,-4,0,12,17,2,0,5,22,4),nr(0,7,8,-4,0,13,19,2,0,5,24,4),nr(0,7,9,-4,0,14,21,2,0,5,26,4),nr(0,8,9,-5,0,15,22,2,0,6,28,5),nr(0,8,10,-5,0,16,24,2,0,6,30,5),nr(0,8,11,-5,0,17,26,2,0,6,32,5),nr(0,9,11,-5,0,18,28,2,0,7,34,6),nr(0,9,12,-6,0,19,29,2,0,7,36,6),nr(0,10,13,-6,0,20,31,3,0,8,38,7),nr(0,10,13,-6,0,21,33,3,0,8,40,7),nr(0,10,14,-6,0,22,35,3,0,8,42,7),nr(0,11,14,-7,0,23,36,3,0,9,44,8),nr(0,11,15,-7,0,24,38,3,0,9,46,8)],u5e=c5e,h5e=["duration","easing","delay"],d5e={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Pme={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function BZ(t){return`${Math.round(t)}ms`}function f5e(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function p5e(t){const e=st({},d5e,t.easing),n=st({},Pme,t.duration);return st({getAutoHeightDuration:f5e,create:(r=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return Ni(s,h5e),(Array.isArray(r)?r:[r]).map(c=>`${c} ${typeof o=="string"?o:BZ(o)} ${a} ${typeof l=="string"?l:BZ(l)}`).join(",")}},t,{easing:e,duration:n})}const m5e={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},g5e=m5e,v5e=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Dme(t={},...e){const{mixins:n={},palette:i={},transitions:r={},typography:s={}}=t,o=Ni(t,v5e);if(t.vars)throw new Error(kb(18));const a=n5e(i),l=d9(t);let c=Mf(l,{mixins:X4e(l.breakpoints,n),palette:a,shadows:u5e.slice(),typography:s5e(a,s),transitions:p5e(r),zIndex:st({},g5e)});return c=Mf(c,o),c=e.reduce((h,u)=>Mf(h,u),c),c.unstable_sxConfig=st({},EI,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(u){return CI({sx:u,theme:this})},c}const y5e=Dme(),m9=y5e;function Ome(){return f9(m9)}function hd({props:t,name:e}){return V4e({props:t,name:e,defaultTheme:m9})}const x5e=t=>ED(t)&&t!=="classes",b5e=H4e({defaultTheme:m9,rootShouldForwardProp:x5e}),Cl=b5e,w5e=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)},kZ=w5e;function Lme(t){return typeof t=="string"}function _5e(t,e,n){return t===void 0||Lme(t)?e:st({},e,{ownerState:st({},e.ownerState,n)})}const S5e={disableDefaultClasses:!1},A5e=W.createContext(S5e);function M5e(t){const{disableDefaultClasses:e}=W.useContext(A5e);return n=>e?"":t(n)}function E5e(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(i=>i.match(/^on[A-Z]/)&&typeof t[i]=="function"&&!e.includes(i)).forEach(i=>{n[i]=t[i]}),n}function V6(t,e){return typeof t=="function"?t(e):t}function FZ(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function C5e(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:i,externalForwardedProps:r,className:s}=t;if(!e){const f=Xr(r==null?void 0:r.className,i==null?void 0:i.className,s,n==null?void 0:n.className),p=st({},n==null?void 0:n.style,r==null?void 0:r.style,i==null?void 0:i.style),m=st({},n,r,i);return f.length>0&&(m.className=f),Object.keys(p).length>0&&(m.style=p),{props:m,internalRef:void 0}}const o=E5e(st({},r,i)),a=FZ(i),l=FZ(r),c=e(o),h=Xr(c==null?void 0:c.className,n==null?void 0:n.className,s,r==null?void 0:r.className,i==null?void 0:i.className),u=st({},c==null?void 0:c.style,n==null?void 0:n.style,r==null?void 0:r.style,i==null?void 0:i.style),d=st({},c,n,l,a);return h.length>0&&(d.className=h),Object.keys(u).length>0&&(d.style=u),{props:d,internalRef:c.ref}}const T5e=["elementType","externalSlotProps","ownerState"];function NZ(t){var e;const{elementType:n,externalSlotProps:i,ownerState:r}=t,s=Ni(t,T5e),o=V6(i,r),{props:a,internalRef:l}=C5e(st({},s,{externalSlotProps:o})),c=ww(l,o==null?void 0:o.ref,(e=t.additionalProps)==null?void 0:e.ref);return _5e(n,st({},a,{ref:c}),r)}const P5e=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function D5e(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function O5e(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=i=>t.ownerDocument.querySelector(`input[type="radio"]${i}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function L5e(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||O5e(t))}function R5e(t){const e=[],n=[];return Array.from(t.querySelectorAll(P5e)).forEach((i,r)=>{const s=D5e(i);s===-1||!L5e(i)||(s===0?e.push(i):n.push({documentOrder:r,tabIndex:s,node:i}))}),n.sort((i,r)=>i.tabIndex===r.tabIndex?i.documentOrder-r.documentOrder:i.tabIndex-r.tabIndex).map(i=>i.node).concat(e)}function I5e(){return!0}function B5e(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:i=!1,disableRestoreFocus:r=!1,getTabbable:s=R5e,isEnabled:o=I5e,open:a}=t,l=W.useRef(!1),c=W.useRef(null),h=W.useRef(null),u=W.useRef(null),d=W.useRef(null),f=W.useRef(!1),p=W.useRef(null),m=ww(e.ref,p),g=W.useRef(null);W.useEffect(()=>{!a||!p.current||(f.current=!n)},[n,a]),W.useEffect(()=>{if(!a||!p.current)return;const x=Im(p.current);return p.current.contains(x.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),f.current&&p.current.focus()),()=>{r||(u.current&&u.current.focus&&(l.current=!0,u.current.focus()),u.current=null)}},[a]),W.useEffect(()=>{if(!a||!p.current)return;const x=Im(p.current),b=E=>{const{current:M}=p;if(M!==null){if(!x.hasFocus()||i||!o()||l.current){l.current=!1;return}if(!M.contains(x.activeElement)){if(E&&d.current!==E.target||x.activeElement!==d.current)d.current=null;else if(d.current!==null)return;if(!f.current)return;let D=[];if((x.activeElement===c.current||x.activeElement===h.current)&&(D=s(p.current)),D.length>0){var C,T;const L=!!((C=g.current)!=null&&C.shiftKey&&((T=g.current)==null?void 0:T.key)==="Tab"),I=D[0],R=D[D.length-1];typeof I!="string"&&typeof R!="string"&&(L?R.focus():I.focus())}else M.focus()}}},S=E=>{g.current=E,!(i||!o()||E.key!=="Tab")&&x.activeElement===p.current&&E.shiftKey&&(l.current=!0,h.current&&h.current.focus())};x.addEventListener("focusin",b),x.addEventListener("keydown",S,!0);const A=setInterval(()=>{x.activeElement&&x.activeElement.tagName==="BODY"&&b(null)},50);return()=>{clearInterval(A),x.removeEventListener("focusin",b),x.removeEventListener("keydown",S,!0)}},[n,i,r,o,a,s]);const v=x=>{u.current===null&&(u.current=x.relatedTarget),f.current=!0,d.current=x.target;const b=e.props.onFocus;b&&b(x)},y=x=>{u.current===null&&(u.current=x.relatedTarget),f.current=!0};return et(W.Fragment,{children:[ne("div",{tabIndex:a?0:-1,onFocus:y,ref:c,"data-testid":"sentinelStart"}),W.cloneElement(e,{ref:m,onFocus:v}),ne("div",{tabIndex:a?0:-1,onFocus:y,ref:h,"data-testid":"sentinelEnd"})]})}function k5e(t){return typeof t=="function"?t():t}const F5e=W.forwardRef(function(e,n){const{children:i,container:r,disablePortal:s=!1}=e,[o,a]=W.useState(null),l=ww(W.isValidElement(i)?i.ref:null,n);if(U6(()=>{s||a(k5e(r)||document.body)},[r,s]),U6(()=>{if(o&&!s)return z6(n,o),()=>{z6(n,null)}},[n,o,s]),s){if(W.isValidElement(i)){const c={ref:l};return W.cloneElement(i,c)}return ne(W.Fragment,{children:i})}return ne(W.Fragment,{children:o&&Mb.createPortal(i,o)})}),N5e=F5e;function z5e(t){const e=Im(t);return e.body===t?r9(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function eM(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function zZ(t){return parseInt(r9(t).getComputedStyle(t).paddingRight,10)||0}function U5e(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,i=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||i}function UZ(t,e,n,i,r){const s=[e,n,...i];[].forEach.call(t.children,o=>{const a=s.indexOf(o)===-1,l=!U5e(o);a&&l&&eM(o,r)})}function dN(t,e){let n=-1;return t.some((i,r)=>e(i)?(n=r,!0):!1),n}function G5e(t,e){const n=[],i=t.container;if(!e.disableScrollLock){if(z5e(i)){const o=MFe(Im(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${zZ(i)+o}px`;const a=Im(i).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${zZ(l)+o}px`})}let s;if(i.parentNode instanceof DocumentFragment)s=Im(i).body;else{const o=i.parentElement,a=r9(i);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:i}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function H5e(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class j5e{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let i=this.modals.indexOf(e);if(i!==-1)return i;i=this.modals.length,this.modals.push(e),e.modalRef&&eM(e.modalRef,!1);const r=H5e(n);UZ(n,e.mount,e.modalRef,r,!0);const s=dN(this.containers,o=>o.container===n);return s!==-1?(this.containers[s].modals.push(e),i):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:r}),i)}mount(e,n){const i=dN(this.containers,s=>s.modals.indexOf(e)!==-1),r=this.containers[i];r.restore||(r.restore=G5e(r,n))}remove(e,n=!0){const i=this.modals.indexOf(e);if(i===-1)return i;const r=dN(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[r];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(i,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&eM(e.modalRef,n),UZ(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(r,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&eM(o.modalRef,!1)}return i}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function V5e(t){return ju("MuiModal",t)}ud("MuiModal",["root","hidden","backdrop"]);const W5e=["children","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],$5e=t=>{const{open:e,exited:n}=t;return cd({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},M5e(V5e))};function q5e(t){return typeof t=="function"?t():t}function X5e(t){return t?t.props.hasOwnProperty("in"):!1}const Y5e=new j5e,K5e=W.forwardRef(function(e,n){var i,r;const{children:s,closeAfterTransition:o=!1,component:a,container:l,disableAutoFocus:c=!1,disableEnforceFocus:h=!1,disableEscapeKeyDown:u=!1,disablePortal:d=!1,disableRestoreFocus:f=!1,disableScrollLock:p=!1,hideBackdrop:m=!1,keepMounted:g=!1,manager:v=Y5e,onBackdropClick:y,onClose:x,onKeyDown:b,open:S,onTransitionEnter:A,onTransitionExited:E,slotProps:M={},slots:C={}}=e,T=Ni(e,W5e),[D,L]=W.useState(!S),I=W.useRef({}),R=W.useRef(null),H=W.useRef(null),Z=ww(H,n),ee=X5e(s),F=(i=e["aria-hidden"])!=null?i:!0,V=()=>Im(R.current),U=()=>(I.current.modalRef=H.current,I.current.mountNode=R.current,I.current),j=()=>{v.mount(U(),{disableScrollLock:p}),H.current&&(H.current.scrollTop=0)},z=vZ(()=>{const Pe=q5e(l)||V().body;v.add(U(),Pe),H.current&&j()}),Y=W.useCallback(()=>v.isTopModal(U()),[v]),J=vZ(Pe=>{R.current=Pe,!(!Pe||!H.current)&&(S&&Y()?j():eM(H.current,F))}),K=W.useCallback(()=>{v.remove(U(),F)},[v,F]);W.useEffect(()=>()=>{K()},[K]),W.useEffect(()=>{S?z():(!ee||!o)&&K()},[S,K,ee,o,z]);const X=st({},e,{closeAfterTransition:o,disableAutoFocus:c,disableEnforceFocus:h,disableEscapeKeyDown:u,disablePortal:d,disableRestoreFocus:f,disableScrollLock:p,exited:D,hideBackdrop:m,keepMounted:g}),te=$5e(X),re=()=>{L(!1),A&&A()},se=()=>{L(!0),E&&E(),o&&K()},ce=Pe=>{Pe.target===Pe.currentTarget&&(y&&y(Pe),x&&x(Pe,"backdropClick"))},ge=Pe=>{b&&b(Pe),!(Pe.key!=="Escape"||!Y())&&(u||(Pe.stopPropagation(),x&&x(Pe,"escapeKeyDown")))},oe={};s.props.tabIndex===void 0&&(oe.tabIndex="-1"),ee&&(oe.onEnter=gZ(re,s.props.onEnter),oe.onExited=gZ(se,s.props.onExited));const ae=(r=a??C.root)!=null?r:"div",ye=NZ({elementType:ae,externalSlotProps:M.root,externalForwardedProps:T,additionalProps:{ref:Z,role:"presentation",onKeyDown:ge},className:te.root,ownerState:X}),we=C.backdrop,Se=NZ({elementType:we,externalSlotProps:M.backdrop,additionalProps:{"aria-hidden":!0,onClick:ce,open:S},className:te.backdrop,ownerState:X});return!g&&!S&&(!ee||D)?null:ne(N5e,{ref:J,container:l,disablePortal:d,children:et(ae,st({},ye,{children:[!m&&we?ne(we,st({},Se)):null,ne(B5e,{disableEnforceFocus:h,disableAutoFocus:c,disableRestoreFocus:f,isEnabled:Y,open:S,children:W.cloneElement(s,oe)})]}))})}),J5e=K5e;function W6(t,e){return W6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},W6(t,e)}function Z5e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,W6(t,e)}const GZ={disabled:!1},Rme=ue.createContext(null);var Q5e=function(e){return e.scrollTop},vA="unmounted",Qg="exited",e0="entering",R1="entered",$6="exiting",Jf=function(t){Z5e(e,t);function e(i,r){var s;s=t.call(this,i,r)||this;var o=r,a=o&&!o.isMounting?i.enter:i.appear,l;return s.appearStatus=null,i.in?a?(l=Qg,s.appearStatus=e0):l=R1:i.unmountOnExit||i.mountOnEnter?l=vA:l=Qg,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(r,s){var o=r.in;return o&&s.status===vA?{status:Qg}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var s=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==e0&&o!==R1&&(s=e0):(o===e0||o===R1)&&(s=$6)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,s,o,a;return s=o=a=r,r!=null&&typeof r!="number"&&(s=r.exit,o=r.enter,a=r.appear!==void 0?r.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===e0){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:TT.findDOMNode(this);o&&Q5e(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Qg&&this.setState({status:vA})},n.performEnter=function(r){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:r,l=this.props.nodeRef?[a]:[TT.findDOMNode(this),a],c=l[0],h=l[1],u=this.getTimeouts(),d=a?u.appear:u.enter;if(!r&&!o||GZ.disabled){this.safeSetState({status:R1},function(){s.props.onEntered(c)});return}this.props.onEnter(c,h),this.safeSetState({status:e0},function(){s.props.onEntering(c,h),s.onTransitionEnd(d,function(){s.safeSetState({status:R1},function(){s.props.onEntered(c,h)})})})},n.performExit=function(){var r=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:TT.findDOMNode(this);if(!s||GZ.disabled){this.safeSetState({status:Qg},function(){r.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:$6},function(){r.props.onExiting(a),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:Qg},function(){r.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},n.setNextCallback=function(r){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,r(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(r,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:TT.findDOMNode(this),a=r==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],h=l[1];this.props.addEndListener(c,h)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===vA)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Ni(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ue.createElement(Rme.Provider,{value:null},typeof o=="function"?o(r,a):ue.cloneElement(ue.Children.only(o),a))},e}(ue.Component);Jf.contextType=Rme;Jf.propTypes={};function Oy(){}Jf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Oy,onEntering:Oy,onEntered:Oy,onExit:Oy,onExiting:Oy,onExited:Oy};Jf.UNMOUNTED=vA;Jf.EXITED=Qg;Jf.ENTERING=e0;Jf.ENTERED=R1;Jf.EXITING=$6;const Ime=Jf,eze=t=>t.scrollTop;function YO(t,e){var n,i;const{timeout:r,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof r=="number"?r:r[e.mode]||0,easing:(i=o.transitionTimingFunction)!=null?i:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function tze(t){return ju("MuiCollapse",t)}ud("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const nze=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],ize=t=>{const{orientation:e,classes:n}=t,i={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return cd(i,tze,n)},rze=Cl("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>st({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&st({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),sze=Cl("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>st({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),oze=Cl("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>st({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),Bme=W.forwardRef(function(e,n){const i=hd({props:e,name:"MuiCollapse"}),{addEndListener:r,children:s,className:o,collapsedSize:a="0px",component:l,easing:c,in:h,onEnter:u,onEntered:d,onEntering:f,onExit:p,onExited:m,onExiting:g,orientation:v="vertical",style:y,timeout:x=Pme.standard,TransitionComponent:b=Ime}=i,S=Ni(i,nze),A=st({},i,{orientation:v,collapsedSize:a}),E=ize(A),M=Ome(),C=W.useRef(),T=W.useRef(null),D=W.useRef(),L=typeof a=="number"?`${a}px`:a,I=v==="horizontal",R=I?"width":"height";W.useEffect(()=>()=>{clearTimeout(C.current)},[]);const H=W.useRef(null),Z=ww(n,H),ee=X=>te=>{if(X){const re=H.current;te===void 0?X(re):X(re,te)}},F=()=>T.current?T.current[I?"clientWidth":"clientHeight"]:0,V=ee((X,te)=>{T.current&&I&&(T.current.style.position="absolute"),X.style[R]=L,u&&u(X,te)}),U=ee((X,te)=>{const re=F();T.current&&I&&(T.current.style.position="");const{duration:se,easing:ce}=YO({style:y,timeout:x,easing:c},{mode:"enter"});if(x==="auto"){const ge=M.transitions.getAutoHeightDuration(re);X.style.transitionDuration=`${ge}ms`,D.current=ge}else X.style.transitionDuration=typeof se=="string"?se:`${se}ms`;X.style[R]=`${re}px`,X.style.transitionTimingFunction=ce,f&&f(X,te)}),j=ee((X,te)=>{X.style[R]="auto",d&&d(X,te)}),z=ee(X=>{X.style[R]=`${F()}px`,p&&p(X)}),Y=ee(m),J=ee(X=>{const te=F(),{duration:re,easing:se}=YO({style:y,timeout:x,easing:c},{mode:"exit"});if(x==="auto"){const ce=M.transitions.getAutoHeightDuration(te);X.style.transitionDuration=`${ce}ms`,D.current=ce}else X.style.transitionDuration=typeof re=="string"?re:`${re}ms`;X.style[R]=L,X.style.transitionTimingFunction=se,g&&g(X)});return ne(b,st({in:h,onEnter:V,onEntered:j,onEntering:U,onExit:z,onExited:Y,onExiting:J,addEndListener:X=>{x==="auto"&&(C.current=setTimeout(X,D.current||0)),r&&r(H.current,X)},nodeRef:H,timeout:x==="auto"?null:x},S,{children:(X,te)=>ne(rze,st({as:l,className:Xr(E.root,o,{entered:E.entered,exited:!h&&L==="0px"&&E.hidden}[X]),style:st({[I?"minWidth":"minHeight"]:L},y),ownerState:st({},A,{state:X}),ref:Z},te,{children:ne(sze,{ownerState:st({},A,{state:X}),className:E.wrapper,ref:T,children:ne(oze,{ownerState:st({},A,{state:X}),className:E.wrapperInner,children:s})})}))}))});Bme.muiSupportAuto=!0;const zb=Bme;function aze(t){return ju("MuiPaper",t)}ud("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const lze=["className","component","elevation","square","variant"],cze=t=>{const{square:e,elevation:n,variant:i,classes:r}=t,s={root:["root",i,!e&&"rounded",i==="elevation"&&`elevation${n}`]};return cd(s,aze,r)},uze=Cl("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return st({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&st({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Nb("#fff",kZ(e.elevation))}, ${Nb("#fff",kZ(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),hze=W.forwardRef(function(e,n){const i=hd({props:e,name:"MuiPaper"}),{className:r,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=i,c=Ni(i,lze),h=st({},i,{component:s,elevation:o,square:a,variant:l}),u=cze(h);return ne(uze,st({as:s,ownerState:h,className:Xr(u.root,r),ref:n},c))}),dze=hze,fze=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],pze={entering:{opacity:1},entered:{opacity:1}},mze=W.forwardRef(function(e,n){const i=Ome(),r={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:h,onEntered:u,onEntering:d,onExit:f,onExited:p,onExiting:m,style:g,timeout:v=r,TransitionComponent:y=Ime}=e,x=Ni(e,fze),b=W.useRef(null),S=ww(b,a.ref,n),A=R=>H=>{if(R){const Z=b.current;H===void 0?R(Z):R(Z,H)}},E=A(d),M=A((R,H)=>{eze(R);const Z=YO({style:g,timeout:v,easing:l},{mode:"enter"});R.style.webkitTransition=i.transitions.create("opacity",Z),R.style.transition=i.transitions.create("opacity",Z),h&&h(R,H)}),C=A(u),T=A(m),D=A(R=>{const H=YO({style:g,timeout:v,easing:l},{mode:"exit"});R.style.webkitTransition=i.transitions.create("opacity",H),R.style.transition=i.transitions.create("opacity",H),f&&f(R)}),L=A(p);return ne(y,st({appear:o,in:c,nodeRef:b,onEnter:M,onEntered:C,onEntering:E,onExit:D,onExited:L,onExiting:T,addEndListener:R=>{s&&s(b.current,R)},timeout:v},x,{children:(R,H)=>W.cloneElement(a,st({style:st({opacity:0,visibility:R==="exited"&&!c?"hidden":void 0},pze[R],g,a.props.style),ref:S},H))}))}),g9=mze;function gze(t){return ju("MuiBackdrop",t)}ud("MuiBackdrop",["root","invisible"]);const vze=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],yze=t=>{const{classes:e,invisible:n}=t;return cd({root:["root",n&&"invisible"]},gze,e)},xze=Cl("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>st({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),bze=W.forwardRef(function(e,n){var i,r,s;const o=hd({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:c="div",components:h={},componentsProps:u={},invisible:d=!1,open:f,slotProps:p={},slots:m={},TransitionComponent:g=g9,transitionDuration:v}=o,y=Ni(o,vze),x=st({},o,{component:c,invisible:d}),b=yze(x),S=(i=p.root)!=null?i:u.root;return ne(g,st({in:f,timeout:v},y,{children:ne(xze,st({"aria-hidden":!0},S,{as:(r=(s=m.root)!=null?s:h.Root)!=null?r:c,className:Xr(b.root,l,S==null?void 0:S.className),ownerState:st({},x,S==null?void 0:S.ownerState),classes:b,ref:n,children:a}))}))}),v9=bze,wze=Dme(),_ze=L4e({defaultTheme:wze,defaultClassName:"MuiBox-root",generateClassName:ume.generate}),kme=_ze,Sze=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],Aze=Cl("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>st({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),Mze=Cl(v9,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),Eze=W.forwardRef(function(e,n){var i,r,s,o,a,l;const c=hd({name:"MuiModal",props:e}),{BackdropComponent:h=Mze,BackdropProps:u,classes:d,className:f,closeAfterTransition:p=!1,children:m,component:g,components:v={},componentsProps:y={},disableAutoFocus:x=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:S=!1,disablePortal:A=!1,disableRestoreFocus:E=!1,disableScrollLock:M=!1,hideBackdrop:C=!1,keepMounted:T=!1,slotProps:D,slots:L,theme:I}=c,R=Ni(c,Sze),[H,Z]=W.useState(!0),ee={closeAfterTransition:p,disableAutoFocus:x,disableEnforceFocus:b,disableEscapeKeyDown:S,disablePortal:A,disableRestoreFocus:E,disableScrollLock:M,hideBackdrop:C,keepMounted:T},F=st({},c,ee,{exited:H}),V=(i=(r=L==null?void 0:L.root)!=null?r:v.Root)!=null?i:Aze,U=(s=(o=L==null?void 0:L.backdrop)!=null?o:v.Backdrop)!=null?s:h,j=(a=D==null?void 0:D.root)!=null?a:y.root,z=(l=D==null?void 0:D.backdrop)!=null?l:y.backdrop;return ne(J5e,st({slots:{root:V,backdrop:U},slotProps:{root:()=>st({},V6(j,F),!Lme(V)&&{as:g,theme:I},{className:Xr(f,j==null?void 0:j.className,d==null?void 0:d.root,!F.open&&F.exited&&(d==null?void 0:d.hidden))}),backdrop:()=>st({},u,V6(z,F),{className:Xr(z==null?void 0:z.className,d==null?void 0:d.backdrop)})},onTransitionEnter:()=>Z(!1),onTransitionExited:()=>Z(!0),ref:n},R,ee,{children:m}))}),Fme=Eze,Cze=W.createContext(),Nme=Cze;function Tze(t){return ju("MuiTable",t)}ud("MuiTable",["root","stickyHeader"]);const Pze=["className","component","padding","size","stickyHeader"],Dze=t=>{const{classes:e,stickyHeader:n}=t;return cd({root:["root",n&&"stickyHeader"]},Tze,e)},Oze=Cl("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>st({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":st({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},e.stickyHeader&&{borderCollapse:"separate"})),HZ="table",Lze=W.forwardRef(function(e,n){const i=hd({props:e,name:"MuiTable"}),{className:r,component:s=HZ,padding:o="normal",size:a="medium",stickyHeader:l=!1}=i,c=Ni(i,Pze),h=st({},i,{component:s,padding:o,size:a,stickyHeader:l}),u=Dze(h),d=W.useMemo(()=>({padding:o,size:a,stickyHeader:l}),[o,a,l]);return ne(Nme.Provider,{value:d,children:ne(Oze,st({as:s,role:s===HZ?null:"table",ref:n,className:Xr(u.root,r),ownerState:h},c))})}),Rze=Lze,Ize=W.createContext(),PI=Ize;function Bze(t){return ju("MuiTableBody",t)}ud("MuiTableBody",["root"]);const kze=["className","component"],Fze=t=>{const{classes:e}=t;return cd({root:["root"]},Bze,e)},Nze=Cl("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-row-group"}),zze={variant:"body"},jZ="tbody",Uze=W.forwardRef(function(e,n){const i=hd({props:e,name:"MuiTableBody"}),{className:r,component:s=jZ}=i,o=Ni(i,kze),a=st({},i,{component:s}),l=Fze(a);return ne(PI.Provider,{value:zze,children:ne(Nze,st({className:Xr(l.root,r),as:s,ref:n,role:s===jZ?null:"rowgroup",ownerState:a},o))})}),Gze=Uze;function Hze(t){return ju("MuiTableCell",t)}const jze=ud("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Vze=jze,Wze=["align","className","component","padding","scope","size","sortDirection","variant"],$ze=t=>{const{classes:e,variant:n,align:i,padding:r,size:s,stickyHeader:o}=t,a={root:["root",n,o&&"stickyHeader",i!=="inherit"&&`align${Cu(i)}`,r!=="normal"&&`padding${Cu(r)}`,`size${Cu(s)}`]};return cd(a,Hze,e)},qze=Cl("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${Cu(n.size)}`],n.padding!=="normal"&&e[`padding${Cu(n.padding)}`],n.align!=="inherit"&&e[`align${Cu(n.align)}`],n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>st({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?Tme(Nb(t.palette.divider,1),.88):Cme(Nb(t.palette.divider,1),.68)}`,textAlign:"left",padding:16},e.variant==="head"&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},e.variant==="body"&&{color:(t.vars||t).palette.text.primary},e.variant==="footer"&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},e.size==="small"&&{padding:"6px 16px",[`&.${Vze.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},e.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},e.padding==="none"&&{padding:0},e.align==="left"&&{textAlign:"left"},e.align==="center"&&{textAlign:"center"},e.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},e.align==="justify"&&{textAlign:"justify"},e.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})),Xze=W.forwardRef(function(e,n){const i=hd({props:e,name:"MuiTableCell"}),{align:r="inherit",className:s,component:o,padding:a,scope:l,size:c,sortDirection:h,variant:u}=i,d=Ni(i,Wze),f=W.useContext(Nme),p=W.useContext(PI),m=p&&p.variant==="head";let g;o?g=o:g=m?"th":"td";let v=l;g==="td"?v=void 0:!v&&m&&(v="col");const y=u||p&&p.variant,x=st({},i,{align:r,component:g,padding:a||(f&&f.padding?f.padding:"normal"),size:c||(f&&f.size?f.size:"medium"),sortDirection:h,stickyHeader:y==="head"&&f&&f.stickyHeader,variant:y}),b=$ze(x);let S=null;return h&&(S=h==="asc"?"ascending":"descending"),ne(qze,st({as:g,ref:n,className:Xr(b.root,s),"aria-sort":S,scope:v,ownerState:x},d))}),fN=Xze;function Yze(t){return ju("MuiTableContainer",t)}ud("MuiTableContainer",["root"]);const Kze=["className","component"],Jze=t=>{const{classes:e}=t;return cd({root:["root"]},Yze,e)},Zze=Cl("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(t,e)=>e.root})({width:"100%",overflowX:"auto"}),Qze=W.forwardRef(function(e,n){const i=hd({props:e,name:"MuiTableContainer"}),{className:r,component:s="div"}=i,o=Ni(i,Kze),a=st({},i,{component:s}),l=Jze(a);return ne(Zze,st({ref:n,as:s,className:Xr(l.root,r),ownerState:a},o))}),eUe=Qze;function tUe(t){return ju("MuiTableHead",t)}ud("MuiTableHead",["root"]);const nUe=["className","component"],iUe=t=>{const{classes:e}=t;return cd({root:["root"]},tUe,e)},rUe=Cl("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-header-group"}),sUe={variant:"head"},VZ="thead",oUe=W.forwardRef(function(e,n){const i=hd({props:e,name:"MuiTableHead"}),{className:r,component:s=VZ}=i,o=Ni(i,nUe),a=st({},i,{component:s}),l=iUe(a);return ne(PI.Provider,{value:sUe,children:ne(rUe,st({as:s,className:Xr(l.root,r),ref:n,role:s===VZ?null:"rowgroup",ownerState:a},o))})}),aUe=oUe;function lUe(t){return ju("MuiTableRow",t)}const cUe=ud("MuiTableRow",["root","selected","hover","head","footer"]),WZ=cUe,uUe=["className","component","hover","selected"],hUe=t=>{const{classes:e,selected:n,hover:i,head:r,footer:s}=t;return cd({root:["root",n&&"selected",i&&"hover",r&&"head",s&&"footer"]},lUe,e)},dUe=Cl("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.head&&e.head,n.footer&&e.footer]}})(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${WZ.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${WZ.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Nb(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Nb(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}})),$Z="tr",fUe=W.forwardRef(function(e,n){const i=hd({props:e,name:"MuiTableRow"}),{className:r,component:s=$Z,hover:o=!1,selected:a=!1}=i,l=Ni(i,uUe),c=W.useContext(PI),h=st({},i,{component:s,hover:o,selected:a,head:c&&c.variant==="head",footer:c&&c.variant==="footer"}),u=hUe(h);return ne(dUe,st({as:s,ref:n,className:Xr(u.root,r),role:s===$Z?null:"row",ownerState:h},l))}),pUe=fUe,mUe=()=>{Ml(Gt);const[t,e]=W.useState(""),[n,i]=W.useState(!1);let r=ng();const s=ofe(),[o,a]=W.useState(window.innerWidth);W.useEffect(()=>{const g=()=>{a(window.innerWidth)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const[l,c]=W.useState(!1),h=()=>{c(!l)},u=()=>{Gt.page="home",r("/auction_house_project/home")},d=()=>{Gt.page="otherGift",r("/auction_house_project/otherGift")},f=()=>{Gt.page="auction",r("/auction_house_project/auction")},p=()=>{Gt.page="signup",r("/auction_house_project/signup")},m=ime({initialValues:{username:"",password:""},onSubmit:async g=>{console.log("Values: ",g),e(""),s({token:"test",expiresIn:36e4,tokenType:"Bearer",authState:{user:{name:"test"}}}),Gt.page="auction",r("/auction_house_project/auction")}});return et(jn.section,{className:"signin",...HO,children:[ne(jn.div,{className:"absolute z-10 top-5 left-5",...pl,children:ne(bn,{type:"outline",title:ne(bw,{size:18}),handleClick:()=>u(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm"})}),ne(jn.div,{className:"absolute z-10 top-5 right-5",...pl,children:o<=960?et(Qo,{children:[ne("div",{className:"flex flex-row justify-end",children:ne("button",{className:" items-end  bg-[#06B6D4] text-dark rounded-lg font-bold text-sm px-4 py-2.5 mr-2",onClick:()=>h(),children:ne(vE,{size:24})})}),ne(zb,{in:l,timeout:"auto",unmountOnExit:!0,className:"",children:et("div",{className:"mt-5 grid grid-cols-1",children:[ne(bn,{type:"filled",title:"All Products",handleClick:()=>d(),customStyles:"w-full px-4 py-2.5 font-bold text-sm mt-2"}),ne(bn,{type:"filled",title:"Auction",handleClick:()=>f(),customStyles:"w-full px-4 py-2.5 font-bold text-sm mt-2"}),ne(bn,{type:"filled",title:"Sign Up",handleClick:()=>p(),customStyles:"w-full px-4 py-2.5 font-bold text-sm mt-2"})]})})]}):et(Qo,{children:[ne(bn,{type:"filled",title:"All Products",handleClick:()=>d(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm mr-2"}),ne(bn,{type:"filled",title:"Auction",handleClick:()=>f(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm mr-2"}),ne(bn,{type:"filled",title:"Sign Up",handleClick:()=>p(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm"})]})}),ne(jn.div,{className:"absolute z-10  top-[20rem] left-[10%] sm:top-[10rem] sm:left-[8%] md:left-[18%] md:top-[10rem] lg:left-[30%] lg:top-[10rem] xl:top-[28%] xl:left-[30%]",...HO,children:ne("div",{className:"relative flex flex-col justify-center overflow-hidden w-fit h-fit sm:w-[600px] sm:h-[600px]",children:et("div",{className:"w-full p-6 m-auto bg-white rounded-md shadow-md lg:max-w-xl text-black",children:[ne("h1",{className:"text-3xl font-semibold text-center",children:"Sign in"}),n?ne("div",{children:ne("p",{className:"text-red-600 font-semibold",children:"Auth Fail"})}):ne(Qo,{}),et("form",{className:"mt-6",onSubmit:m.handleSubmit,children:[et("div",{className:"mb-2",children:[ne("label",{htmlFor:"username",className:"block text-sm font-semibold text-gray-800",children:"Username"}),ne("input",{name:"username",type:"text",onChange:m.handleChange,value:m.values.username,className:"block w-full px-4 py-2 mt-2 text-black bg-white border rounded-md focus:border-cyan-400 focus:ring-cyan-300 focus:outline-none focus:ring focus:ring-opacity-40"})]}),et("div",{className:"mb-2",children:[ne("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-800",children:"Password"}),ne("input",{name:"password",type:"password",onChange:m.handleChange,value:m.values.password,className:"block w-full px-4 py-2 mt-2 text-black bg-white border rounded-md focus:border-cyan-400 focus:ring-cyan-300 focus:outline-none focus:ring focus:ring-opacity-40"})]}),ne("div",{className:"mt-6",children:ne("button",{type:"submit",className:"w-full px-4 py-2 tracking-wide text-white transition-colors duration-200 transform bg-cyan-500 rounded-md hover:bg-cyan-400 focus:outline-none focus:bg-cyan-400",children:"Login"})})]})]})})})]})},gUe=()=>{Ml(Gt);const[t,e]=W.useState(""),[n,i]=W.useState(!1),r=ng(),s=ofe(),[o,a]=W.useState(window.innerWidth);W.useEffect(()=>{const g=()=>{a(window.innerWidth)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const[l,c]=W.useState(!1),h=()=>{c(!l)},u=()=>{Gt.page="home",r("/auction_house_project/home")},d=()=>{Gt.page="auction",r("/auction_house_project/auction")},f=()=>{Gt.page="signin",r("/auction_house_project/signin")},p=()=>{Gt.page="otherGift",r("/auction_house_project/otherGift")},m=ime({initialValues:{username:"",password:"",confirmPassword:""},onSubmit:async g=>{console.log("Values: ",g),e(""),s({token:"test",expiresIn:36e4,tokenType:"Bearer",authState:{user:{name:"test"}}}),Gt.page="auction",r("/auction_house_project/auction")}});return et(jn.section,{className:"signin",...xLe,children:[ne(jn.div,{className:"absolute z-10 top-5 left-5",...pl,children:ne(bn,{type:"outline",title:ne(bw,{size:18}),handleClick:()=>u(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm"})}),ne(jn.div,{className:"absolute z-10 top-5 right-5",...pl,children:o<=960?et(Qo,{children:[ne("div",{className:"flex flex-row justify-end",children:ne("button",{className:" items-end  bg-[#06B6D4] text-dark rounded-lg font-bold text-sm px-4 py-2.5 mr-2",onClick:()=>h(),children:ne(vE,{size:24})})}),ne(zb,{in:l,timeout:"auto",unmountOnExit:!0,className:"",children:et("div",{className:"mt-5 grid grid-cols-1",children:[ne(bn,{type:"filled",title:"All Products",handleClick:()=>p(),customStyles:"w-full px-4 py-2.5 font-bold text-sm mt-2"}),ne(bn,{type:"filled",title:"Auction",handleClick:()=>d(),customStyles:"w-full px-4 py-2.5 font-bold text-sm mt-2"}),ne(bn,{type:"filled",title:"Sign In",handleClick:()=>f(),customStyles:"w-full px-4 py-2.5 font-bold text-sm mt-2"})]})})]}):et(Qo,{children:[ne(bn,{type:"filled",title:"All Products",handleClick:()=>p(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm mr-2"}),ne(bn,{type:"filled",title:"Auction",handleClick:()=>d(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm mr-2"}),ne(bn,{type:"filled",title:"Sign In",handleClick:()=>f(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm"})]})}),ne(jn.div,{className:"absolute z-10  top-[20rem] left-[10%] sm:top-[10rem] sm:left-[8%] md:left-[18%] md:top-[10rem] lg:left-[30%] lg:top-[10rem] xl:top-[28%] xl:left-[30%]",children:ne("div",{className:"relative flex flex-col justify-center overflow-hidden w-fit h-fit sm:w-[600px] sm:h-[600px]",children:et("div",{className:"w-full p-6 m-auto bg-white rounded-md shadow-md lg:max-w-xl text-black",children:[ne("h1",{className:"text-3xl font-semibold text-center",children:"Sign Up"}),n?ne("div",{children:ne("p",{className:"text-red-600 font-semibold",children:"Auth Fail"})}):ne(Qo,{}),et("form",{className:"mt-6",onSubmit:m.handleSubmit,children:[et("div",{className:"mb-2",children:[ne("label",{htmlFor:"username",className:"block text-sm font-semibold text-gray-800",children:"Username"}),ne("input",{name:"username",type:"text",className:"block w-full px-4 py-2 mt-2 text-black bg-white border rounded-md focus:border-cyan-400 focus:ring-cyan-300 focus:outline-none focus:ring focus:ring-opacity-40",onChange:m.handleChange,value:m.values.username}),m.errors.username?ne("div",{children:ne("p",{className:"mt-2 text-xs text-red-600",children:m.errors.username})}):null]}),et("div",{className:"mb-2",children:[ne("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-800",children:"Password"}),ne("input",{name:"password",type:"password",className:"block w-full px-4 py-2 mt-2 text-black bg-white border rounded-md focus:border-cyan-400 focus:ring-cyan-300 focus:outline-none focus:ring focus:ring-opacity-40",onChange:m.handleChange,value:m.values.password}),m.errors.password?ne("div",{children:ne("p",{className:"mt-2 text-xs text-red-600",children:m.errors.password})}):null]}),et("div",{className:"mb-2",children:[ne("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-800",children:"Confirm Password"}),ne("input",{name:"confirmPassword",type:"password",className:"block w-full px-4 py-2 mt-2 text-black bg-white border rounded-md focus:border-cyan-400 focus:ring-cyan-300 focus:outline-none focus:ring focus:ring-opacity-40",onChange:m.handleChange,value:m.values.confirmPassword}),m.errors.confirmPassword?ne("div",{children:ne("p",{className:"mt-2 text-xs text-red-600",children:m.errors.confirmPassword})}):null]}),ne("div",{className:"mt-6",children:ne("button",{type:"submit",className:"w-full px-4 py-2 tracking-wide text-white transition-colors duration-200 transform bg-cyan-500 rounded-md hover:bg-cyan-400 focus:outline-none focus:bg-cyan-400",children:"Create Account"})})]})]})})})]})};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const DI="150",vUe={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},yUe={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},zme=0,q6=1,Ume=2,xUe=3,Gme=0,OI=1,tM=2,P0=3,Bu=0,Ca=1,Ec=2,bUe=2,Ef=0,j0=1,X6=2,Y6=3,K6=4,Hme=5,f0=100,jme=101,Vme=102,J6=103,Z6=104,Wme=200,$me=201,qme=202,Xme=203,y9=204,x9=205,Yme=206,Kme=207,Jme=208,Zme=209,Qme=210,ege=0,tge=1,nge=2,KO=3,ige=4,rge=5,sge=6,oge=7,wE=0,age=1,lge=2,Tu=0,cge=1,uge=2,hge=3,b9=4,dge=5,LI=300,ed=301,Ff=302,Ub=303,h2=304,Gv=306,ku=1e3,zs=1001,mv=1002,ur=1003,Gb=1004,wUe=1004,V0=1005,_Ue=1005,Ei=1006,_E=1007,SUe=1007,Nc=1008,AUe=1008,Nf=1009,fge=1010,pge=1011,w9=1012,mge=1013,em=1014,Cc=1015,vu=1016,gge=1017,vge=1018,W0=1020,yge=1021,fa=1023,xge=1024,bge=1025,Bm=1026,gv=1027,wge=1028,_ge=1029,Sge=1030,Age=1031,Mge=1033,CD=33776,TD=33777,PD=33778,DD=33779,Q6=35840,eG=35841,tG=35842,nG=35843,Ege=36196,iG=37492,rG=37496,sG=37808,oG=37809,aG=37810,lG=37811,cG=37812,uG=37813,hG=37814,dG=37815,fG=37816,pG=37817,mG=37818,gG=37819,vG=37820,yG=37821,OD=36492,Cge=36283,xG=36284,bG=36285,wG=36286,Tge=2200,Pge=2201,Dge=2202,vv=2300,zf=2301,LD=2302,D0=2400,O0=2401,d2=2402,RI=2500,_9=2501,Oge=0,II=1,Hb=2,Ra=3e3,xn=3001,Lge=3200,Rge=3201,Zf=0,Ige=1,MUe="",Ja="srgb",yv="srgb-linear",S9="display-p3",EUe=0,RD=7680,CUe=7681,TUe=7682,PUe=7683,DUe=34055,OUe=34056,LUe=5386,RUe=512,IUe=513,BUe=514,kUe=515,FUe=516,NUe=517,zUe=518,Bge=519,f2=35044,UUe=35048,GUe=35040,HUe=35045,jUe=35049,VUe=35041,WUe=35046,$Ue=35050,qUe=35042,XUe="100",_G="300 es",JO=1035;class dd{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const go=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let qZ=1234567;const $0=Math.PI/180,p2=180/Math.PI;function gl(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(go[t&255]+go[t>>8&255]+go[t>>16&255]+go[t>>24&255]+"-"+go[e&255]+go[e>>8&255]+"-"+go[e>>16&15|64]+go[e>>24&255]+"-"+go[n&63|128]+go[n>>8&255]+"-"+go[n>>16&255]+go[n>>24&255]+go[i&255]+go[i>>8&255]+go[i>>16&255]+go[i>>24&255]).toLowerCase()}function jr(t,e,n){return Math.max(e,Math.min(n,t))}function A9(t,e){return(t%e+e)%e}function YUe(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function KUe(t,e,n){return t!==e?(n-t)/(e-t):0}function nM(t,e,n){return(1-n)*t+n*e}function JUe(t,e,n,i){return nM(t,e,1-Math.exp(-n*i))}function ZUe(t,e=1){return e-Math.abs(A9(t,e*2)-e)}function QUe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function e6e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function t6e(t,e){return t+Math.floor(Math.random()*(e-t+1))}function n6e(t,e){return t+Math.random()*(e-t)}function i6e(t){return t*(.5-Math.random())}function r6e(t){t!==void 0&&(qZ=t);let e=qZ+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function s6e(t){return t*$0}function o6e(t){return t*p2}function SG(t){return(t&t-1)===0&&t!==0}function kge(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Fge(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function a6e(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+i)/2),h=o((e+i)/2),u=s((e-i)/2),d=o((e-i)/2),f=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":t.set(a*h,l*u,l*d,a*c);break;case"YZY":t.set(l*d,a*h,l*u,a*c);break;case"ZXZ":t.set(l*u,l*d,a*h,a*c);break;case"XZX":t.set(a*h,l*p,l*f,a*c);break;case"YXY":t.set(l*f,a*h,l*p,a*c);break;case"ZYZ":t.set(l*p,l*f,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function gf(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Ai(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const zi={DEG2RAD:$0,RAD2DEG:p2,generateUUID:gl,clamp:jr,euclideanModulo:A9,mapLinear:YUe,inverseLerp:KUe,lerp:nM,damp:JUe,pingpong:ZUe,smoothstep:QUe,smootherstep:e6e,randInt:t6e,randFloat:n6e,randFloatSpread:i6e,seededRandom:r6e,degToRad:s6e,radToDeg:o6e,isPowerOfTwo:SG,ceilPowerOfTwo:kge,floorPowerOfTwo:Fge,setQuaternionFromProperEuler:a6e,normalize:Ai,denormalize:gf};class Me{constructor(e=0,n=0){Me.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wr{constructor(){Wr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,i,r,s,o,a,l,c){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=n,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],h=i[4],u=i[7],d=i[2],f=i[5],p=i[8],m=r[0],g=r[3],v=r[6],y=r[1],x=r[4],b=r[7],S=r[2],A=r[5],E=r[8];return s[0]=o*m+a*y+l*S,s[3]=o*g+a*x+l*A,s[6]=o*v+a*b+l*E,s[1]=c*m+h*y+u*S,s[4]=c*g+h*x+u*A,s[7]=c*v+h*b+u*E,s[2]=d*m+f*y+p*S,s[5]=d*g+f*x+p*A,s[8]=d*v+f*b+p*E,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return n*o*h-n*a*c-i*s*h+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=h*o-a*c,d=a*l-h*s,f=c*s-o*l,p=n*u+i*d+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=u*m,e[1]=(r*c-h*i)*m,e[2]=(a*i-r*o)*m,e[3]=d*m,e[4]=(h*n-r*l)*m,e[5]=(r*s-a*n)*m,e[6]=f*m,e[7]=(i*l-c*n)*m,e[8]=(o*n-i*s)*m,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(pN.makeScale(e,n)),this}rotate(e){return this.premultiply(pN.makeRotation(-e)),this}translate(e,n){return this.premultiply(pN.makeTranslation(e,n)),this}makeTranslation(e,n){return this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const pN=new Wr;function Nge(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const l6e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ax(t,e){return new l6e[t](e)}function m2(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}class Rr{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,o,a){let l=i[r+0],c=i[r+1],h=i[r+2],u=i[r+3];const d=s[o+0],f=s[o+1],p=s[o+2],m=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=h,e[n+3]=u;return}if(a===1){e[n+0]=d,e[n+1]=f,e[n+2]=p,e[n+3]=m;return}if(u!==m||l!==d||c!==f||h!==p){let g=1-a;const v=l*d+c*f+h*p+u*m,y=v>=0?1:-1,x=1-v*v;if(x>Number.EPSILON){const S=Math.sqrt(x),A=Math.atan2(S,v*y);g=Math.sin(g*A)/S,a=Math.sin(a*A)/S}const b=a*y;if(l=l*g+d*b,c=c*g+f*b,h=h*g+p*b,u=u*g+m*b,g===1-a){const S=1/Math.sqrt(l*l+c*c+h*h+u*u);l*=S,c*=S,h*=S,u*=S}}e[n]=l,e[n+1]=c,e[n+2]=h,e[n+3]=u}static multiplyQuaternionsFlat(e,n,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],h=i[r+3],u=s[o],d=s[o+1],f=s[o+2],p=s[o+3];return e[n]=a*p+h*u+l*f-c*d,e[n+1]=l*p+h*d+c*u-a*f,e[n+2]=c*p+h*f+a*d-l*u,e[n+3]=h*p-a*u-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),h=a(r/2),u=a(s/2),d=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=d*h*u+c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u-d*f*p;break;case"YXZ":this._x=d*h*u+c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u+d*f*p;break;case"ZXY":this._x=d*h*u-c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u-d*f*p;break;case"ZYX":this._x=d*h*u-c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u+d*f*p;break;case"YZX":this._x=d*h*u+c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u-d*f*p;break;case"XZY":this._x=d*h*u-c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],h=n[6],u=n[10],d=i+a+u;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(h-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>u){const f=2*Math.sqrt(1+i-a-u);this._w=(h-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>u){const f=2*Math.sqrt(1+a-i-u);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+h)/f}else{const f=2*Math.sqrt(1+u-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+h)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(jr(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,h=n._w;return this._x=i*h+o*a+r*c-s*l,this._y=r*h+o*l+s*a-i*c,this._z=s*h+o*c+i*l-r*a,this._w=o*h-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-n;return this._w=f*o+n*this._w,this._x=f*i+n*this._x,this._y=f*r+n*this._y,this._z=f*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),h=Math.atan2(c,a),u=Math.sin((1-n)*h)/c,d=Math.sin(n*h)/c;return this._w=o*u+this._w*d,this._x=i*u+this._x*d,this._y=r*u+this._y*d,this._z=s*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=Math.random(),n=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(r),i*Math.sin(s),i*Math.cos(s),n*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class q{constructor(e=0,n=0,i=0){q.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(XZ.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(XZ.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*n+o*r-a*i,h=l*i+a*n-s*r,u=l*r+s*i-o*n,d=-s*n-o*i-a*r;return this.x=c*l+d*-s+h*-a-u*-o,this.y=h*l+d*-o+u*-s-c*-a,this.z=u*l+d*-a+c*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return mN.copy(this).projectOnVector(e),this.sub(mN)}reflect(e){return this.sub(mN.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(jr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const mN=new q,XZ=new Rr;function Kx(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function gN(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const c6e=new Wr().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),u6e=new Wr().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),tm=new q;function h6e(t){return t.convertSRGBToLinear(),tm.set(t.r,t.g,t.b).applyMatrix3(u6e),t.setRGB(tm.x,tm.y,tm.z)}function d6e(t){return tm.set(t.r,t.g,t.b).applyMatrix3(c6e),t.setRGB(tm.x,tm.y,tm.z).convertLinearToSRGB()}const f6e={[yv]:t=>t,[Ja]:t=>t.convertSRGBToLinear(),[S9]:h6e},p6e={[yv]:t=>t,[Ja]:t=>t.convertLinearToSRGB(),[S9]:d6e},wo={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return yv},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const i=f6e[e],r=p6e[n];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return r(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let Ly;class M9{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Ly===void 0&&(Ly=m2("canvas")),Ly.width=e.width,Ly.height=e.height;const i=Ly.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=Ly}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=m2("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Kx(s[o]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(Kx(n[i]/255)*255):n[i]=Kx(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class L0{constructor(e=null){this.isSource=!0,this.uuid=gl(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(vN(r[o].image)):s.push(vN(r[o]))}else s=vN(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function vN(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?M9.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let m6e=0;class bi extends dd{constructor(e=bi.DEFAULT_IMAGE,n=bi.DEFAULT_MAPPING,i=zs,r=zs,s=Ei,o=Nc,a=fa,l=Nf,c=bi.DEFAULT_ANISOTROPY,h=Ra){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:m6e++}),this.uuid=gl(),this.name="",this.source=new L0(e),this.mipmaps=[],this.mapping=n,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Me(0,0),this.repeat=new Me(1,1),this.center=new Me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==LI)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ku:e.x=e.x-Math.floor(e.x);break;case zs:e.x=e.x<0?0:1;break;case mv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ku:e.y=e.y-Math.floor(e.y);break;case zs:e.y=e.y<0?0:1;break;case mv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}bi.DEFAULT_IMAGE=null;bi.DEFAULT_MAPPING=LI;bi.DEFAULT_ANISOTROPY=1;class sn{constructor(e=0,n=0,i=0,r=1){sn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const l=e.elements,c=l[0],h=l[4],u=l[8],d=l[1],f=l[5],p=l[9],m=l[2],g=l[6],v=l[10];if(Math.abs(h-d)<.01&&Math.abs(u-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(h+d)<.1&&Math.abs(u+m)<.1&&Math.abs(p+g)<.1&&Math.abs(c+f+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(c+1)/2,b=(f+1)/2,S=(v+1)/2,A=(h+d)/4,E=(u+m)/4,M=(p+g)/4;return x>b&&x>S?x<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=A/i,s=E/i):b>S?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=A/r,s=M/r):S<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(S),i=E/s,r=M/s),this.set(i,r,s,n),this}let y=Math.sqrt((g-p)*(g-p)+(u-m)*(u-m)+(d-h)*(d-h));return Math.abs(y)<.001&&(y=1),this.x=(g-p)/y,this.y=(u-m)/y,this.z=(d-h)/y,this.w=Math.acos((c+f+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Fu extends dd{constructor(e=1,n=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new sn(0,0,e,n),this.scissorTest=!1,this.viewport=new sn(0,0,e,n);const r={width:e,height:n,depth:1};this.texture=new bi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Ei,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,n,i=1){(this.width!==e||this.height!==n||this.depth!==i)&&(this.width=e,this.height=n,this.depth=i,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new L0(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class BI extends bi{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=ur,this.minFilter=ur,this.wrapR=zs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class g6e extends Fu{constructor(e=1,n=1,i=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new BI(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class E9 extends bi{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=ur,this.minFilter=ur,this.wrapR=zs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class v6e extends Fu{constructor(e=1,n=1,i=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new E9(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class y6e extends Fu{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=n,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,i=e.texture.length;n<i;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class ao{constructor(e=new q(1/0,1/0,1/0),n=new q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const h=e[l],u=e[l+1],d=e[l+2];h<n&&(n=h),u<i&&(i=u),d<r&&(r=d),h>s&&(s=h),u>o&&(o=u),d>a&&(a=d)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const h=e.getX(l),u=e.getY(l),d=e.getZ(l);h<n&&(n=h),u<i&&(i=u),d<r&&(r=d),h>s&&(s=h),u>o&&(o=u),d>a&&(a=d)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Cg.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(n&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Cg.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Cg)}else i.boundingBox===null&&i.computeBoundingBox(),yN.copy(i.boundingBox),yN.applyMatrix4(e.matrixWorld),this.union(yN);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Cg),Cg.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter($_),kT.subVectors(this.max,$_),Ry.subVectors(e.a,$_),Iy.subVectors(e.b,$_),By.subVectors(e.c,$_),mp.subVectors(Iy,Ry),gp.subVectors(By,Iy),Tg.subVectors(Ry,By);let n=[0,-mp.z,mp.y,0,-gp.z,gp.y,0,-Tg.z,Tg.y,mp.z,0,-mp.x,gp.z,0,-gp.x,Tg.z,0,-Tg.x,-mp.y,mp.x,0,-gp.y,gp.x,0,-Tg.y,Tg.x,0];return!xN(n,Ry,Iy,By,kT)||(n=[1,0,0,0,1,0,0,0,1],!xN(n,Ry,Iy,By,kT))?!1:(FT.crossVectors(mp,gp),n=[FT.x,FT.y,FT.z],xN(n,Ry,Iy,By,kT))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Cg).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Cg).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Pd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Pd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Pd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Pd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Pd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Pd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Pd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Pd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Pd),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Pd=[new q,new q,new q,new q,new q,new q,new q,new q],Cg=new q,yN=new ao,Ry=new q,Iy=new q,By=new q,mp=new q,gp=new q,Tg=new q,$_=new q,kT=new q,FT=new q,Pg=new q;function xN(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){Pg.fromArray(t,s);const a=r.x*Math.abs(Pg.x)+r.y*Math.abs(Pg.y)+r.z*Math.abs(Pg.z),l=e.dot(Pg),c=n.dot(Pg),h=i.dot(Pg);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}const x6e=new ao,q_=new q,bN=new q;class Oo{constructor(e=new q,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):x6e.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;q_.subVectors(e,this.center);const n=q_.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(q_,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(bN.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(q_.copy(e.center).add(bN)),this.expandByPoint(q_.copy(e.center).sub(bN))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Dd=new q,wN=new q,NT=new q,vp=new q,_N=new q,zT=new q,SN=new q;class sg{constructor(e=new q,n=new q(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Dd)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Dd.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Dd.copy(this.origin).addScaledVector(this.direction,n),Dd.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){wN.copy(e).add(n).multiplyScalar(.5),NT.copy(n).sub(e).normalize(),vp.copy(this.origin).sub(wN);const s=e.distanceTo(n)*.5,o=-this.direction.dot(NT),a=vp.dot(this.direction),l=-vp.dot(NT),c=vp.lengthSq(),h=Math.abs(1-o*o);let u,d,f,p;if(h>0)if(u=o*l-a,d=o*a-l,p=s*h,u>=0)if(d>=-p)if(d<=p){const m=1/h;u*=m,d*=m,f=u*(u+o*d+2*a)+d*(o*u+d+2*l)+c}else d=s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;else d=-s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;else d<=-p?(u=Math.max(0,-(-o*s+a)),d=u>0?-s:Math.min(Math.max(-s,-l),s),f=-u*u+d*(d+2*l)+c):d<=p?(u=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(u=Math.max(0,-(o*s+a)),d=u>0?s:Math.min(Math.max(-s,-l),s),f=-u*u+d*(d+2*l)+c);else d=o>0?-s:s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(wN).addScaledVector(NT,d),f}intersectSphere(e,n){Dd.subVectors(e.center,this.origin);const i=Dd.dot(this.direction),r=Dd.dot(Dd)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,o,a,l;const c=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,d=this.origin;return c>=0?(i=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(i=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),h>=0?(s=(e.min.y-d.y)*h,o=(e.max.y-d.y)*h):(s=(e.max.y-d.y)*h,o=(e.min.y-d.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),u>=0?(a=(e.min.z-d.z)*u,l=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,l=(e.min.z-d.z)*u),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Dd)!==null}intersectTriangle(e,n,i,r,s){_N.subVectors(n,e),zT.subVectors(i,e),SN.crossVectors(_N,zT);let o=this.direction.dot(SN),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;vp.subVectors(this.origin,e);const l=a*this.direction.dot(zT.crossVectors(vp,zT));if(l<0)return null;const c=a*this.direction.dot(_N.cross(vp));if(c<0||l+c>o)return null;const h=-a*vp.dot(SN);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class at{constructor(){at.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,i,r,s,o,a,l,c,h,u,d,f,p,m,g){const v=this.elements;return v[0]=e,v[4]=n,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=h,v[10]=u,v[14]=d,v[3]=f,v[7]=p,v[11]=m,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new at().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/ky.setFromMatrixColumn(e,0).length(),s=1/ky.setFromMatrixColumn(e,1).length(),o=1/ky.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),h=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const d=o*h,f=o*u,p=a*h,m=a*u;n[0]=l*h,n[4]=-l*u,n[8]=c,n[1]=f+p*c,n[5]=d-m*c,n[9]=-a*l,n[2]=m-d*c,n[6]=p+f*c,n[10]=o*l}else if(e.order==="YXZ"){const d=l*h,f=l*u,p=c*h,m=c*u;n[0]=d+m*a,n[4]=p*a-f,n[8]=o*c,n[1]=o*u,n[5]=o*h,n[9]=-a,n[2]=f*a-p,n[6]=m+d*a,n[10]=o*l}else if(e.order==="ZXY"){const d=l*h,f=l*u,p=c*h,m=c*u;n[0]=d-m*a,n[4]=-o*u,n[8]=p+f*a,n[1]=f+p*a,n[5]=o*h,n[9]=m-d*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const d=o*h,f=o*u,p=a*h,m=a*u;n[0]=l*h,n[4]=p*c-f,n[8]=d*c+m,n[1]=l*u,n[5]=m*c+d,n[9]=f*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,p=a*l,m=a*c;n[0]=l*h,n[4]=m-d*u,n[8]=p*u+f,n[1]=u,n[5]=o*h,n[9]=-a*h,n[2]=-c*h,n[6]=f*u+p,n[10]=d-m*u}else if(e.order==="XZY"){const d=o*l,f=o*c,p=a*l,m=a*c;n[0]=l*h,n[4]=-u,n[8]=c*h,n[1]=d*u+m,n[5]=o*h,n[9]=f*u-p,n[2]=p*u-f,n[6]=a*h,n[10]=m*u+d}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(b6e,e,w6e)}lookAt(e,n,i){const r=this.elements;return ja.subVectors(e,n),ja.lengthSq()===0&&(ja.z=1),ja.normalize(),yp.crossVectors(i,ja),yp.lengthSq()===0&&(Math.abs(i.z)===1?ja.x+=1e-4:ja.z+=1e-4,ja.normalize(),yp.crossVectors(i,ja)),yp.normalize(),UT.crossVectors(ja,yp),r[0]=yp.x,r[4]=UT.x,r[8]=ja.x,r[1]=yp.y,r[5]=UT.y,r[9]=ja.y,r[2]=yp.z,r[6]=UT.z,r[10]=ja.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],h=i[1],u=i[5],d=i[9],f=i[13],p=i[2],m=i[6],g=i[10],v=i[14],y=i[3],x=i[7],b=i[11],S=i[15],A=r[0],E=r[4],M=r[8],C=r[12],T=r[1],D=r[5],L=r[9],I=r[13],R=r[2],H=r[6],Z=r[10],ee=r[14],F=r[3],V=r[7],U=r[11],j=r[15];return s[0]=o*A+a*T+l*R+c*F,s[4]=o*E+a*D+l*H+c*V,s[8]=o*M+a*L+l*Z+c*U,s[12]=o*C+a*I+l*ee+c*j,s[1]=h*A+u*T+d*R+f*F,s[5]=h*E+u*D+d*H+f*V,s[9]=h*M+u*L+d*Z+f*U,s[13]=h*C+u*I+d*ee+f*j,s[2]=p*A+m*T+g*R+v*F,s[6]=p*E+m*D+g*H+v*V,s[10]=p*M+m*L+g*Z+v*U,s[14]=p*C+m*I+g*ee+v*j,s[3]=y*A+x*T+b*R+S*F,s[7]=y*E+x*D+b*H+S*V,s[11]=y*M+x*L+b*Z+S*U,s[15]=y*C+x*I+b*ee+S*j,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],h=e[2],u=e[6],d=e[10],f=e[14],p=e[3],m=e[7],g=e[11],v=e[15];return p*(+s*l*u-r*c*u-s*a*d+i*c*d+r*a*f-i*l*f)+m*(+n*l*f-n*c*d+s*o*d-r*o*f+r*c*h-s*l*h)+g*(+n*c*u-n*a*f-s*o*u+i*o*f+s*a*h-i*c*h)+v*(-r*a*h-n*l*u+n*a*d+r*o*u-i*o*d+i*l*h)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=u*g*c-m*d*c+m*l*f-a*g*f-u*l*v+a*d*v,x=p*d*c-h*g*c-p*l*f+o*g*f+h*l*v-o*d*v,b=h*m*c-p*u*c+p*a*f-o*m*f-h*a*v+o*u*v,S=p*u*l-h*m*l-p*a*d+o*m*d+h*a*g-o*u*g,A=n*y+i*x+r*b+s*S;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/A;return e[0]=y*E,e[1]=(m*d*s-u*g*s-m*r*f+i*g*f+u*r*v-i*d*v)*E,e[2]=(a*g*s-m*l*s+m*r*c-i*g*c-a*r*v+i*l*v)*E,e[3]=(u*l*s-a*d*s-u*r*c+i*d*c+a*r*f-i*l*f)*E,e[4]=x*E,e[5]=(h*g*s-p*d*s+p*r*f-n*g*f-h*r*v+n*d*v)*E,e[6]=(p*l*s-o*g*s-p*r*c+n*g*c+o*r*v-n*l*v)*E,e[7]=(o*d*s-h*l*s+h*r*c-n*d*c-o*r*f+n*l*f)*E,e[8]=b*E,e[9]=(p*u*s-h*m*s-p*i*f+n*m*f+h*i*v-n*u*v)*E,e[10]=(o*m*s-p*a*s+p*i*c-n*m*c-o*i*v+n*a*v)*E,e[11]=(h*a*s-o*u*s-h*i*c+n*u*c+o*i*f-n*a*f)*E,e[12]=S*E,e[13]=(h*m*r-p*u*r+p*i*d-n*m*d-h*i*g+n*u*g)*E,e[14]=(p*a*r-o*m*r-p*i*l+n*m*l+o*i*g-n*a*g)*E,e[15]=(o*u*r-h*a*r+h*i*l-n*u*l-o*i*d+n*a*d)*E,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,h=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,h*a+i,h*l-r*o,0,c*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,h=o+o,u=a+a,d=s*c,f=s*h,p=s*u,m=o*h,g=o*u,v=a*u,y=l*c,x=l*h,b=l*u,S=i.x,A=i.y,E=i.z;return r[0]=(1-(m+v))*S,r[1]=(f+b)*S,r[2]=(p-x)*S,r[3]=0,r[4]=(f-b)*A,r[5]=(1-(d+v))*A,r[6]=(g+y)*A,r[7]=0,r[8]=(p+x)*E,r[9]=(g-y)*E,r[10]=(1-(d+m))*E,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=ky.set(r[0],r[1],r[2]).length();const o=ky.set(r[4],r[5],r[6]).length(),a=ky.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Jc.copy(this);const c=1/s,h=1/o,u=1/a;return Jc.elements[0]*=c,Jc.elements[1]*=c,Jc.elements[2]*=c,Jc.elements[4]*=h,Jc.elements[5]*=h,Jc.elements[6]*=h,Jc.elements[8]*=u,Jc.elements[9]*=u,Jc.elements[10]*=u,n.setFromRotationMatrix(Jc),i.x=s,i.y=o,i.z=a,this}makePerspective(e,n,i,r,s,o){const a=this.elements,l=2*s/(n-e),c=2*s/(i-r),h=(n+e)/(n-e),u=(i+r)/(i-r),d=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,i,r,s,o){const a=this.elements,l=1/(n-e),c=1/(i-r),h=1/(o-s),u=(n+e)*l,d=(i+r)*c,f=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const ky=new q,Jc=new at,b6e=new q(0,0,0),w6e=new q(1,1,1),yp=new q,UT=new q,ja=new q,YZ=new at,KZ=new Rr;class Dc{constructor(e=0,n=0,i=0,r=Dc.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],h=r[9],u=r[2],d=r[6],f=r[10];switch(n){case"XYZ":this._y=Math.asin(jr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-jr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(jr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-jr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(jr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-jr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return YZ.makeRotationFromQuaternion(e),this.setFromRotationMatrix(YZ,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return KZ.setFromEuler(this),this.setFromQuaternion(KZ,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Dc.DEFAULT_ORDER="XYZ";class q0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let _6e=0;const JZ=new q,Fy=new Rr,Od=new at,GT=new q,X_=new q,S6e=new q,A6e=new Rr,ZZ=new q(1,0,0),QZ=new q(0,1,0),eQ=new q(0,0,1),M6e={type:"added"},tQ={type:"removed"};class wn extends dd{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_6e++}),this.uuid=gl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=wn.DEFAULT_UP.clone();const e=new q,n=new Dc,i=new Rr,r=new q(1,1,1);function s(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new at},normalMatrix:{value:new Wr}}),this.matrix=new at,this.matrixWorld=new at,this.matrixAutoUpdate=wn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=wn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new q0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Fy.setFromAxisAngle(e,n),this.quaternion.multiply(Fy),this}rotateOnWorldAxis(e,n){return Fy.setFromAxisAngle(e,n),this.quaternion.premultiply(Fy),this}rotateX(e){return this.rotateOnAxis(ZZ,e)}rotateY(e){return this.rotateOnAxis(QZ,e)}rotateZ(e){return this.rotateOnAxis(eQ,e)}translateOnAxis(e,n){return JZ.copy(e).applyQuaternion(this.quaternion),this.position.add(JZ.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(ZZ,e)}translateY(e){return this.translateOnAxis(QZ,e)}translateZ(e){return this.translateOnAxis(eQ,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Od.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?GT.copy(e):GT.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),X_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Od.lookAt(X_,GT,this.up):Od.lookAt(GT,X_,this.up),this.quaternion.setFromRotationMatrix(Od),r&&(Od.extractRotation(r.matrixWorld),Fy.setFromRotationMatrix(Od),this.quaternion.premultiply(Fy.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(M6e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(tQ)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(tQ)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Od.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Od.multiply(e.parent.matrixWorld)),e.applyMatrix4(Od),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n){let i=[];this[e]===n&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,n);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(X_,e,S6e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(X_,A6e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++){const s=n[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const u=l[c];s(e.shapes,u)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),h=o(e.images),u=o(e.shapes),d=o(e.skeletons),f=o(e.animations),p=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),h.length>0&&(i.images=h),u.length>0&&(i.shapes=u),d.length>0&&(i.skeletons=d),f.length>0&&(i.animations=f),p.length>0&&(i.nodes=p)}return i.object=r,i;function o(a){const l=[];for(const c in a){const h=a[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}wn.DEFAULT_UP=new q(0,1,0);wn.DEFAULT_MATRIX_AUTO_UPDATE=!0;wn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Zc=new q,Ld=new q,AN=new q,Rd=new q,Ny=new q,zy=new q,nQ=new q,MN=new q,EN=new q,CN=new q;class Zo{constructor(e=new q,n=new q,i=new q){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),Zc.subVectors(e,n),r.cross(Zc);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){Zc.subVectors(r,n),Ld.subVectors(i,n),AN.subVectors(e,n);const o=Zc.dot(Zc),a=Zc.dot(Ld),l=Zc.dot(AN),c=Ld.dot(Ld),h=Ld.dot(AN),u=o*c-a*a;if(u===0)return s.set(-2,-1,-1);const d=1/u,f=(c*l-a*h)*d,p=(o*h-a*l)*d;return s.set(1-f-p,p,f)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,Rd),Rd.x>=0&&Rd.y>=0&&Rd.x+Rd.y<=1}static getUV(e,n,i,r,s,o,a,l){return this.getBarycoord(e,n,i,r,Rd),l.set(0,0),l.addScaledVector(s,Rd.x),l.addScaledVector(o,Rd.y),l.addScaledVector(a,Rd.z),l}static isFrontFacing(e,n,i,r){return Zc.subVectors(i,n),Ld.subVectors(e,n),Zc.cross(Ld).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zc.subVectors(this.c,this.b),Ld.subVectors(this.a,this.b),Zc.cross(Ld).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Zo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Zo.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,r,s){return Zo.getUV(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return Zo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Zo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let o,a;Ny.subVectors(r,i),zy.subVectors(s,i),MN.subVectors(e,i);const l=Ny.dot(MN),c=zy.dot(MN);if(l<=0&&c<=0)return n.copy(i);EN.subVectors(e,r);const h=Ny.dot(EN),u=zy.dot(EN);if(h>=0&&u<=h)return n.copy(r);const d=l*u-h*c;if(d<=0&&l>=0&&h<=0)return o=l/(l-h),n.copy(i).addScaledVector(Ny,o);CN.subVectors(e,s);const f=Ny.dot(CN),p=zy.dot(CN);if(p>=0&&f<=p)return n.copy(s);const m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(i).addScaledVector(zy,a);const g=h*p-f*u;if(g<=0&&u-h>=0&&f-p>=0)return nQ.subVectors(s,r),a=(u-h)/(u-h+(f-p)),n.copy(r).addScaledVector(nQ,a);const v=1/(g+m+d);return o=m*v,a=d*v,n.copy(i).addScaledVector(Ny,o).addScaledVector(zy,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let E6e=0,gr=class extends dd{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:E6e++}),this.uuid=gl(),this.name="",this.type="Material",this.blending=j0,this.side=Bu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=y9,this.blendDst=x9,this.blendEquation=f0,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=KO,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Bge,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=RD,this.stencilZFail=RD,this.stencilZPass=RD,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}const r=this[n];if(r===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==j0&&(i.blending=this.blending),this.side!==Bu&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};const zge={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qc={h:0,s:0,l:0},HT={h:0,s:0,l:0};function TN(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class nt{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Ja){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,wo.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=wo.workingColorSpace){return this.r=e,this.g=n,this.b=i,wo.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=wo.workingColorSpace){if(e=A9(e,1),n=jr(n,0,1),i=jr(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=TN(o,s,e+1/3),this.g=TN(o,s,e),this.b=TN(o,s,e-1/3)}return wo.toWorkingColorSpace(this,r),this}setStyle(e,n=Ja){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,wo.toWorkingColorSpace(this,n),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,wo.toWorkingColorSpace(this,n),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,h=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,c,h,n)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,wo.toWorkingColorSpace(this,n),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,wo.toWorkingColorSpace(this,n),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Ja){const i=zge[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Kx(e.r),this.g=Kx(e.g),this.b=Kx(e.b),this}copyLinearToSRGB(e){return this.r=gN(e.r),this.g=gN(e.g),this.b=gN(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ja){return wo.fromWorkingColorSpace(vo.copy(this),e),jr(vo.r*255,0,255)<<16^jr(vo.g*255,0,255)<<8^jr(vo.b*255,0,255)<<0}getHexString(e=Ja){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=wo.workingColorSpace){wo.fromWorkingColorSpace(vo.copy(this),n);const i=vo.r,r=vo.g,s=vo.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const h=(a+o)/2;if(a===o)l=0,c=0;else{const u=o-a;switch(c=h<=.5?u/(o+a):u/(2-o-a),o){case i:l=(r-s)/u+(r<s?6:0);break;case r:l=(s-i)/u+2;break;case s:l=(i-r)/u+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,n=wo.workingColorSpace){return wo.fromWorkingColorSpace(vo.copy(this),n),e.r=vo.r,e.g=vo.g,e.b=vo.b,e}getStyle(e=Ja){wo.fromWorkingColorSpace(vo.copy(this),e);const n=vo.r,i=vo.g,r=vo.b;return e!==Ja?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${n*255|0},${i*255|0},${r*255|0})`}offsetHSL(e,n,i){return this.getHSL(Qc),Qc.h+=e,Qc.s+=n,Qc.l+=i,this.setHSL(Qc.h,Qc.s,Qc.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Qc),e.getHSL(HT);const i=nM(Qc.h,HT.h,n),r=nM(Qc.s,HT.s,n),s=nM(Qc.l,HT.l,n);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const vo=new nt;nt.NAMES=zge;class ls extends gr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=wE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Qr=new q,jT=new Me;class Nt{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=f2,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)jT.fromBufferAttribute(this,n),jT.applyMatrix3(e),this.setXY(n,jT.x,jT.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)Qr.fromBufferAttribute(this,n),Qr.applyMatrix3(e),this.setXYZ(n,Qr.x,Qr.y,Qr.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)Qr.fromBufferAttribute(this,n),Qr.applyMatrix4(e),this.setXYZ(n,Qr.x,Qr.y,Qr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Qr.fromBufferAttribute(this,n),Qr.applyNormalMatrix(e),this.setXYZ(n,Qr.x,Qr.y,Qr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Qr.fromBufferAttribute(this,n),Qr.transformDirection(e),this.setXYZ(n,Qr.x,Qr.y,Qr.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=gf(n,this.array)),n}setX(e,n){return this.normalized&&(n=Ai(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=gf(n,this.array)),n}setY(e,n){return this.normalized&&(n=Ai(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=gf(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Ai(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=gf(n,this.array)),n}setW(e,n){return this.normalized&&(n=Ai(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=Ai(n,this.array),i=Ai(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=Ai(n,this.array),i=Ai(i,this.array),r=Ai(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=Ai(n,this.array),i=Ai(i,this.array),r=Ai(r,this.array),s=Ai(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==f2&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class C6e extends Nt{constructor(e,n,i){super(new Int8Array(e),n,i)}}class T6e extends Nt{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class P6e extends Nt{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class D6e extends Nt{constructor(e,n,i){super(new Int16Array(e),n,i)}}class C9 extends Nt{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class O6e extends Nt{constructor(e,n,i){super(new Int32Array(e),n,i)}}class Jx extends Nt{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class Uge extends Nt{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}}class it extends Nt{constructor(e,n,i){super(new Float32Array(e),n,i)}}class L6e extends Nt{constructor(e,n,i){super(new Float64Array(e),n,i)}}let R6e=0;const Wl=new at,PN=new wn,Uy=new q,Va=new ao,Y_=new ao,Rs=new q;class yt extends dd{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:R6e++}),this.uuid=gl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Nge(e)?Jx:C9)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Wr().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Wl.makeRotationFromQuaternion(e),this.applyMatrix4(Wl),this}rotateX(e){return Wl.makeRotationX(e),this.applyMatrix4(Wl),this}rotateY(e){return Wl.makeRotationY(e),this.applyMatrix4(Wl),this}rotateZ(e){return Wl.makeRotationZ(e),this.applyMatrix4(Wl),this}translate(e,n,i){return Wl.makeTranslation(e,n,i),this.applyMatrix4(Wl),this}scale(e,n,i){return Wl.makeScale(e,n,i),this.applyMatrix4(Wl),this}lookAt(e){return PN.lookAt(e),PN.updateMatrix(),this.applyMatrix4(PN.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Uy).negate(),this.translate(Uy.x,Uy.y,Uy.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new it(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ao);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];Va.setFromBufferAttribute(s),this.morphTargetsRelative?(Rs.addVectors(this.boundingBox.min,Va.min),this.boundingBox.expandByPoint(Rs),Rs.addVectors(this.boundingBox.max,Va.max),this.boundingBox.expandByPoint(Rs)):(this.boundingBox.expandByPoint(Va.min),this.boundingBox.expandByPoint(Va.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Oo);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new q,1/0);return}if(e){const i=this.boundingSphere.center;if(Va.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Y_.setFromBufferAttribute(a),this.morphTargetsRelative?(Rs.addVectors(Va.min,Y_.min),Va.expandByPoint(Rs),Rs.addVectors(Va.max,Y_.max),Va.expandByPoint(Rs)):(Va.expandByPoint(Y_.min),Va.expandByPoint(Y_.max))}Va.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Rs.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Rs));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,h=a.count;c<h;c++)Rs.fromBufferAttribute(a,c),l&&(Uy.fromBufferAttribute(e,c),Rs.add(Uy)),r=Math.max(r,i.distanceToSquared(Rs))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=n.position.array,s=n.normal.array,o=n.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Nt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],h=[];for(let T=0;T<a;T++)c[T]=new q,h[T]=new q;const u=new q,d=new q,f=new q,p=new Me,m=new Me,g=new Me,v=new q,y=new q;function x(T,D,L){u.fromArray(r,T*3),d.fromArray(r,D*3),f.fromArray(r,L*3),p.fromArray(o,T*2),m.fromArray(o,D*2),g.fromArray(o,L*2),d.sub(u),f.sub(u),m.sub(p),g.sub(p);const I=1/(m.x*g.y-g.x*m.y);isFinite(I)&&(v.copy(d).multiplyScalar(g.y).addScaledVector(f,-m.y).multiplyScalar(I),y.copy(f).multiplyScalar(m.x).addScaledVector(d,-g.x).multiplyScalar(I),c[T].add(v),c[D].add(v),c[L].add(v),h[T].add(y),h[D].add(y),h[L].add(y))}let b=this.groups;b.length===0&&(b=[{start:0,count:i.length}]);for(let T=0,D=b.length;T<D;++T){const L=b[T],I=L.start,R=L.count;for(let H=I,Z=I+R;H<Z;H+=3)x(i[H+0],i[H+1],i[H+2])}const S=new q,A=new q,E=new q,M=new q;function C(T){E.fromArray(s,T*3),M.copy(E);const D=c[T];S.copy(D),S.sub(E.multiplyScalar(E.dot(D))).normalize(),A.crossVectors(M,D);const I=A.dot(h[T])<0?-1:1;l[T*4]=S.x,l[T*4+1]=S.y,l[T*4+2]=S.z,l[T*4+3]=I}for(let T=0,D=b.length;T<D;++T){const L=b[T],I=L.start,R=L.count;for(let H=I,Z=I+R;H<Z;H+=3)C(i[H+0]),C(i[H+1]),C(i[H+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Nt(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let d=0,f=i.count;d<f;d++)i.setXYZ(d,0,0,0);const r=new q,s=new q,o=new q,a=new q,l=new q,c=new q,h=new q,u=new q;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);r.fromBufferAttribute(n,p),s.fromBufferAttribute(n,m),o.fromBufferAttribute(n,g),h.subVectors(o,s),u.subVectors(r,s),h.cross(u),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,g),a.add(h),l.add(h),c.add(h),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let d=0,f=n.count;d<f;d+=3)r.fromBufferAttribute(n,d+0),s.fromBufferAttribute(n,d+1),o.fromBufferAttribute(n,d+2),h.subVectors(o,s),u.subVectors(r,s),h.cross(u),i.setXYZ(d+0,h.x,h.y,h.z),i.setXYZ(d+1,h.x,h.y,h.z),i.setXYZ(d+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Rs.fromBufferAttribute(e,n),Rs.normalize(),e.setXYZ(n,Rs.x,Rs.y,Rs.z)}toNonIndexed(){function e(a,l){const c=a.array,h=a.itemSize,u=a.normalized,d=new c.constructor(l.length*h);let f=0,p=0;for(let m=0,g=l.length;m<g;m++){a.isInterleavedBufferAttribute?f=l[m]*a.data.stride+a.offset:f=l[m]*h;for(let v=0;v<h;v++)d[p++]=c[f++]}return new Nt(d,h,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new yt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let h=0,u=c.length;h<u;h++){const d=c[h],f=e(d,i);l.push(f)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let u=0,d=c.length;u<d;u++){const f=c[u];h.push(f.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const c in r){const h=r[c];this.setAttribute(c,h.clone(n))}const s=e.morphAttributes;for(const c in s){const h=[],u=s[c];for(let d=0,f=u.length;d<f;d++)h.push(u[d].clone(n));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,h=o.length;c<h;c++){const u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const iQ=new at,rh=new sg,VT=new Oo,rQ=new q,K_=new q,J_=new q,Z_=new q,DN=new q,WT=new q,$T=new Me,qT=new Me,XT=new Me,ON=new q,YT=new q;class Lr extends wn{constructor(e=new yt,n=new ls){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){WT.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const h=a[l],u=s[l];h!==0&&(DN.fromBufferAttribute(u,e),o?WT.addScaledVector(DN,h):WT.addScaledVector(DN.sub(n),h))}n.add(WT)}return this.isSkinnedMesh&&this.boneTransform(e,n),n}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),VT.copy(i.boundingSphere),VT.applyMatrix4(s),rh.copy(e.ray).recast(e.near),VT.containsPoint(rh.origin)===!1&&(rh.intersectSphere(VT,rQ)===null||rh.origin.distanceToSquared(rQ)>(e.far-e.near)**2))||(iQ.copy(s).invert(),rh.copy(e.ray).applyMatrix4(iQ),i.boundingBox!==null&&rh.intersectsBox(i.boundingBox)===!1))return;let o;const a=i.index,l=i.attributes.position,c=i.attributes.uv,h=i.attributes.uv2,u=i.groups,d=i.drawRange;if(a!==null)if(Array.isArray(r))for(let f=0,p=u.length;f<p;f++){const m=u[f],g=r[m.materialIndex],v=Math.max(m.start,d.start),y=Math.min(a.count,Math.min(m.start+m.count,d.start+d.count));for(let x=v,b=y;x<b;x+=3){const S=a.getX(x),A=a.getX(x+1),E=a.getX(x+2);o=KT(this,g,e,rh,c,h,S,A,E),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=m.materialIndex,n.push(o))}}else{const f=Math.max(0,d.start),p=Math.min(a.count,d.start+d.count);for(let m=f,g=p;m<g;m+=3){const v=a.getX(m),y=a.getX(m+1),x=a.getX(m+2);o=KT(this,r,e,rh,c,h,v,y,x),o&&(o.faceIndex=Math.floor(m/3),n.push(o))}}else if(l!==void 0)if(Array.isArray(r))for(let f=0,p=u.length;f<p;f++){const m=u[f],g=r[m.materialIndex],v=Math.max(m.start,d.start),y=Math.min(l.count,Math.min(m.start+m.count,d.start+d.count));for(let x=v,b=y;x<b;x+=3){const S=x,A=x+1,E=x+2;o=KT(this,g,e,rh,c,h,S,A,E),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=m.materialIndex,n.push(o))}}else{const f=Math.max(0,d.start),p=Math.min(l.count,d.start+d.count);for(let m=f,g=p;m<g;m+=3){const v=m,y=m+1,x=m+2;o=KT(this,r,e,rh,c,h,v,y,x),o&&(o.faceIndex=Math.floor(m/3),n.push(o))}}}}function I6e(t,e,n,i,r,s,o,a){let l;if(e.side===Ca?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Bu,a),l===null)return null;YT.copy(a),YT.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(YT);return c<n.near||c>n.far?null:{distance:c,point:YT.clone(),object:t}}function KT(t,e,n,i,r,s,o,a,l){t.getVertexPosition(o,K_),t.getVertexPosition(a,J_),t.getVertexPosition(l,Z_);const c=I6e(t,e,n,i,K_,J_,Z_,ON);if(c){r&&($T.fromBufferAttribute(r,o),qT.fromBufferAttribute(r,a),XT.fromBufferAttribute(r,l),c.uv=Zo.getUV(ON,K_,J_,Z_,$T,qT,XT,new Me)),s&&($T.fromBufferAttribute(s,o),qT.fromBufferAttribute(s,a),XT.fromBufferAttribute(s,l),c.uv2=Zo.getUV(ON,K_,J_,Z_,$T,qT,XT,new Me));const h={a:o,b:a,c:l,normal:new q,materialIndex:0};Zo.getNormal(K_,J_,Z_,h.normal),c.face=h}return c}class Ia extends yt{constructor(e=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],h=[],u=[];let d=0,f=0;p("z","y","x",-1,-1,i,n,e,o,s,0),p("z","y","x",1,-1,i,n,-e,o,s,1),p("x","z","y",1,1,e,i,n,r,o,2),p("x","z","y",1,-1,e,i,-n,r,o,3),p("x","y","z",1,-1,e,n,i,r,s,4),p("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new it(c,3)),this.setAttribute("normal",new it(h,3)),this.setAttribute("uv",new it(u,2));function p(m,g,v,y,x,b,S,A,E,M,C){const T=b/E,D=S/M,L=b/2,I=S/2,R=A/2,H=E+1,Z=M+1;let ee=0,F=0;const V=new q;for(let U=0;U<Z;U++){const j=U*D-I;for(let z=0;z<H;z++){const Y=z*T-L;V[m]=Y*y,V[g]=j*x,V[v]=R,c.push(V.x,V.y,V.z),V[m]=0,V[g]=0,V[v]=A>0?1:-1,h.push(V.x,V.y,V.z),u.push(z/E),u.push(1-U/M),ee+=1}}for(let U=0;U<M;U++)for(let j=0;j<E;j++){const z=d+j+H*U,Y=d+j+H*(U+1),J=d+(j+1)+H*(U+1),K=d+(j+1)+H*U;l.push(z,Y,K),l.push(Y,J,K),F+=6}a.addGroup(f,F,C),f+=F,d+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ia(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function jb(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Wo(t){const e={};for(let n=0;n<t.length;n++){const i=jb(t[n]);for(const r in i)e[r]=i[r]}return e}function B6e(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function Gge(t){return t.getRenderTarget()===null&&t.outputEncoding===xn?Ja:yv}const Hv={clone:jb,merge:Wo};var k6e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,F6e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class zc extends gr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=k6e,this.fragmentShader=F6e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=jb(e.uniforms),this.uniformsGroups=B6e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?n.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[r]={type:"m4",value:o.toArray()}:n.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class jv extends wn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new at,this.projectionMatrix=new at,this.projectionMatrixInverse=new at}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Vr extends jv{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=p2*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan($0*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return p2*2*Math.atan(Math.tan($0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,i,r,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan($0*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,n-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Gy=-90,Hy=1;class Hge extends wn{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new Vr(Gy,Hy,e,n);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new Vr(Gy,Hy,e,n);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new Vr(Gy,Hy,e,n);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new Vr(Gy,Hy,e,n);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new Vr(Gy,Hy,e,n);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new Vr(Gy,Hy,e,n);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,n){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,h=e.getRenderTarget(),u=e.toneMapping,d=e.xr.enabled;e.toneMapping=Tu,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(n,r),e.setRenderTarget(i,1),e.render(n,s),e.setRenderTarget(i,2),e.render(n,o),e.setRenderTarget(i,3),e.render(n,a),e.setRenderTarget(i,4),e.render(n,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(n,c),e.setRenderTarget(h),e.toneMapping=u,e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class Sw extends bi{constructor(e,n,i,r,s,o,a,l,c,h){e=e!==void 0?e:[],n=n!==void 0?n:ed,super(e,n,i,r,s,o,a,l,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class T9 extends Fu{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Sw(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Ei}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ia(5,5,5),s=new zc({name:"CubemapFromEquirect",uniforms:jb(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ca,blending:Ef});s.uniforms.tEquirect.value=n;const o=new Lr(r,s),a=n.minFilter;return n.minFilter===Nc&&(n.minFilter=Ei),new Hge(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,r);e.setRenderTarget(s)}}const LN=new q,N6e=new q,z6e=new Wr;class lf{constructor(e=new q(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=LN.subVectors(i,n).cross(N6e.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(LN),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||z6e.getNormalMatrix(e),r=this.coplanarPoint(LN).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const jy=new Oo,JT=new q;class kI{constructor(e=new lf,n=new lf,i=new lf,r=new lf,s=new lf,o=new lf){this.planes=[e,n,i,r,s,o]}set(e,n,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],h=i[6],u=i[7],d=i[8],f=i[9],p=i[10],m=i[11],g=i[12],v=i[13],y=i[14],x=i[15];return n[0].setComponents(a-r,u-l,m-d,x-g).normalize(),n[1].setComponents(a+r,u+l,m+d,x+g).normalize(),n[2].setComponents(a+s,u+c,m+f,x+v).normalize(),n[3].setComponents(a-s,u-c,m-f,x-v).normalize(),n[4].setComponents(a-o,u-h,m-p,x-y).normalize(),n[5].setComponents(a+o,u+h,m+p,x+y).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),jy.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(jy)}intersectsSprite(e){return jy.center.set(0,0,0),jy.radius=.7071067811865476,jy.applyMatrix4(e.matrixWorld),this.intersectsSphere(jy)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(JT.x=r.normal.x>0?e.max.x:e.min.x,JT.y=r.normal.y>0?e.max.y:e.min.y,JT.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(JT)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function jge(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function U6e(t,e){const n=e.isWebGL2,i=new WeakMap;function r(c,h){const u=c.array,d=c.usage,f=t.createBuffer();t.bindBuffer(h,f),t.bufferData(h,u,d),c.onUploadCallback();let p;if(u instanceof Float32Array)p=5126;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(u instanceof Int16Array)p=5122;else if(u instanceof Uint32Array)p=5125;else if(u instanceof Int32Array)p=5124;else if(u instanceof Int8Array)p=5120;else if(u instanceof Uint8Array)p=5121;else if(u instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function s(c,h,u){const d=h.array,f=h.updateRange;t.bindBuffer(u,c),f.count===-1?t.bufferSubData(u,0,d):(n?t.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):t.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),h.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);h&&(t.deleteBuffer(h.buffer),i.delete(c))}function l(c,h){if(c.isGLBufferAttribute){const d=i.get(c);(!d||d.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u===void 0?i.set(c,r(c,h)):u.version<c.version&&(s(u.buffer,c,h),u.version=c.version)}return{get:o,remove:a,update:l}}class og extends yt{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,o=n/2,a=Math.floor(i),l=Math.floor(r),c=a+1,h=l+1,u=e/a,d=n/l,f=[],p=[],m=[],g=[];for(let v=0;v<h;v++){const y=v*d-o;for(let x=0;x<c;x++){const b=x*u-s;p.push(b,-y,0),m.push(0,0,1),g.push(x/a),g.push(1-v/l)}}for(let v=0;v<l;v++)for(let y=0;y<a;y++){const x=y+c*v,b=y+c*(v+1),S=y+1+c*(v+1),A=y+1+c*v;f.push(x,b,A),f.push(b,S,A)}this.setIndex(f),this.setAttribute("position",new it(p,3)),this.setAttribute("normal",new it(m,3)),this.setAttribute("uv",new it(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new og(e.width,e.height,e.widthSegments,e.heightSegments)}}var G6e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,H6e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,j6e=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,V6e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,W6e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,$6e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,q6e="vec3 transformed = vec3( position );",X6e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Y6e=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,K6e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,J6e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Z6e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Q6e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,eGe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,tGe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,nGe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,iGe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,rGe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,sGe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,oGe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,aGe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,lGe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,cGe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,uGe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,hGe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,dGe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,fGe="gl_FragColor = linearToOutputTexel( gl_FragColor );",pGe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,mGe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,gGe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,vGe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,yGe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,xGe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,bGe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,wGe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,_Ge=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,SGe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,AGe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,MGe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,EGe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,CGe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,TGe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,PGe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,DGe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,OGe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,LGe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,RGe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,IGe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,BGe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,kGe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,FGe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,NGe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,zGe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,UGe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,GGe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,HGe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,jGe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,VGe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,WGe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,$Ge=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,qGe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,XGe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,YGe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,KGe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,JGe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,ZGe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,QGe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,eHe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,tHe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,nHe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,iHe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,rHe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,sHe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,oHe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,aHe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,lHe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,cHe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,uHe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,hHe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,dHe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,fHe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,pHe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,mHe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,gHe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,vHe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,yHe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,xHe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,bHe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,wHe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,_He=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,SHe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,AHe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,MHe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,EHe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,CHe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,THe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,PHe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,DHe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,OHe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,LHe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,RHe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,IHe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,BHe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,kHe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,FHe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,NHe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const zHe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,UHe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,GHe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,HHe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,jHe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,VHe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,WHe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,$He=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,qHe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,XHe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,YHe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,KHe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,JHe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ZHe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,QHe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,eje=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tje=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nje=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ije=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,rje=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sje=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,oje=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,aje=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lje=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cje=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,uje=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hje=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dje=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fje=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,pje=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mje=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gje=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vje=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yje=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Mn={alphamap_fragment:G6e,alphamap_pars_fragment:H6e,alphatest_fragment:j6e,alphatest_pars_fragment:V6e,aomap_fragment:W6e,aomap_pars_fragment:$6e,begin_vertex:q6e,beginnormal_vertex:X6e,bsdfs:Y6e,iridescence_fragment:K6e,bumpmap_pars_fragment:J6e,clipping_planes_fragment:Z6e,clipping_planes_pars_fragment:Q6e,clipping_planes_pars_vertex:eGe,clipping_planes_vertex:tGe,color_fragment:nGe,color_pars_fragment:iGe,color_pars_vertex:rGe,color_vertex:sGe,common:oGe,cube_uv_reflection_fragment:aGe,defaultnormal_vertex:lGe,displacementmap_pars_vertex:cGe,displacementmap_vertex:uGe,emissivemap_fragment:hGe,emissivemap_pars_fragment:dGe,encodings_fragment:fGe,encodings_pars_fragment:pGe,envmap_fragment:mGe,envmap_common_pars_fragment:gGe,envmap_pars_fragment:vGe,envmap_pars_vertex:yGe,envmap_physical_pars_fragment:DGe,envmap_vertex:xGe,fog_vertex:bGe,fog_pars_vertex:wGe,fog_fragment:_Ge,fog_pars_fragment:SGe,gradientmap_pars_fragment:AGe,lightmap_fragment:MGe,lightmap_pars_fragment:EGe,lights_lambert_fragment:CGe,lights_lambert_pars_fragment:TGe,lights_pars_begin:PGe,lights_toon_fragment:OGe,lights_toon_pars_fragment:LGe,lights_phong_fragment:RGe,lights_phong_pars_fragment:IGe,lights_physical_fragment:BGe,lights_physical_pars_fragment:kGe,lights_fragment_begin:FGe,lights_fragment_maps:NGe,lights_fragment_end:zGe,logdepthbuf_fragment:UGe,logdepthbuf_pars_fragment:GGe,logdepthbuf_pars_vertex:HGe,logdepthbuf_vertex:jGe,map_fragment:VGe,map_pars_fragment:WGe,map_particle_fragment:$Ge,map_particle_pars_fragment:qGe,metalnessmap_fragment:XGe,metalnessmap_pars_fragment:YGe,morphcolor_vertex:KGe,morphnormal_vertex:JGe,morphtarget_pars_vertex:ZGe,morphtarget_vertex:QGe,normal_fragment_begin:eHe,normal_fragment_maps:tHe,normal_pars_fragment:nHe,normal_pars_vertex:iHe,normal_vertex:rHe,normalmap_pars_fragment:sHe,clearcoat_normal_fragment_begin:oHe,clearcoat_normal_fragment_maps:aHe,clearcoat_pars_fragment:lHe,iridescence_pars_fragment:cHe,output_fragment:uHe,packing:hHe,premultiplied_alpha_fragment:dHe,project_vertex:fHe,dithering_fragment:pHe,dithering_pars_fragment:mHe,roughnessmap_fragment:gHe,roughnessmap_pars_fragment:vHe,shadowmap_pars_fragment:yHe,shadowmap_pars_vertex:xHe,shadowmap_vertex:bHe,shadowmask_pars_fragment:wHe,skinbase_vertex:_He,skinning_pars_vertex:SHe,skinning_vertex:AHe,skinnormal_vertex:MHe,specularmap_fragment:EHe,specularmap_pars_fragment:CHe,tonemapping_fragment:THe,tonemapping_pars_fragment:PHe,transmission_fragment:DHe,transmission_pars_fragment:OHe,uv_pars_fragment:LHe,uv_pars_vertex:RHe,uv_vertex:IHe,uv2_pars_fragment:BHe,uv2_pars_vertex:kHe,uv2_vertex:FHe,worldpos_vertex:NHe,background_vert:zHe,background_frag:UHe,backgroundCube_vert:GHe,backgroundCube_frag:HHe,cube_vert:jHe,cube_frag:VHe,depth_vert:WHe,depth_frag:$He,distanceRGBA_vert:qHe,distanceRGBA_frag:XHe,equirect_vert:YHe,equirect_frag:KHe,linedashed_vert:JHe,linedashed_frag:ZHe,meshbasic_vert:QHe,meshbasic_frag:eje,meshlambert_vert:tje,meshlambert_frag:nje,meshmatcap_vert:ije,meshmatcap_frag:rje,meshnormal_vert:sje,meshnormal_frag:oje,meshphong_vert:aje,meshphong_frag:lje,meshphysical_vert:cje,meshphysical_frag:uje,meshtoon_vert:hje,meshtoon_frag:dje,points_vert:fje,points_frag:pje,shadow_vert:mje,shadow_frag:gje,sprite_vert:vje,sprite_frag:yje},ct={common:{diffuse:{value:new nt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Wr},uv2Transform:{value:new Wr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Me(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new nt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new nt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wr}},sprite:{diffuse:{value:new nt(16777215)},opacity:{value:1},center:{value:new Me(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wr}}},fc={basic:{uniforms:Wo([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.fog]),vertexShader:Mn.meshbasic_vert,fragmentShader:Mn.meshbasic_frag},lambert:{uniforms:Wo([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new nt(0)}}]),vertexShader:Mn.meshlambert_vert,fragmentShader:Mn.meshlambert_frag},phong:{uniforms:Wo([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new nt(0)},specular:{value:new nt(1118481)},shininess:{value:30}}]),vertexShader:Mn.meshphong_vert,fragmentShader:Mn.meshphong_frag},standard:{uniforms:Wo([ct.common,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.roughnessmap,ct.metalnessmap,ct.fog,ct.lights,{emissive:{value:new nt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag},toon:{uniforms:Wo([ct.common,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.gradientmap,ct.fog,ct.lights,{emissive:{value:new nt(0)}}]),vertexShader:Mn.meshtoon_vert,fragmentShader:Mn.meshtoon_frag},matcap:{uniforms:Wo([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,{matcap:{value:null}}]),vertexShader:Mn.meshmatcap_vert,fragmentShader:Mn.meshmatcap_frag},points:{uniforms:Wo([ct.points,ct.fog]),vertexShader:Mn.points_vert,fragmentShader:Mn.points_frag},dashed:{uniforms:Wo([ct.common,ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mn.linedashed_vert,fragmentShader:Mn.linedashed_frag},depth:{uniforms:Wo([ct.common,ct.displacementmap]),vertexShader:Mn.depth_vert,fragmentShader:Mn.depth_frag},normal:{uniforms:Wo([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,{opacity:{value:1}}]),vertexShader:Mn.meshnormal_vert,fragmentShader:Mn.meshnormal_frag},sprite:{uniforms:Wo([ct.sprite,ct.fog]),vertexShader:Mn.sprite_vert,fragmentShader:Mn.sprite_frag},background:{uniforms:{uvTransform:{value:new Wr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mn.background_vert,fragmentShader:Mn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Mn.backgroundCube_vert,fragmentShader:Mn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mn.cube_vert,fragmentShader:Mn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mn.equirect_vert,fragmentShader:Mn.equirect_frag},distanceRGBA:{uniforms:Wo([ct.common,ct.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mn.distanceRGBA_vert,fragmentShader:Mn.distanceRGBA_frag},shadow:{uniforms:Wo([ct.lights,ct.fog,{color:{value:new nt(0)},opacity:{value:1}}]),vertexShader:Mn.shadow_vert,fragmentShader:Mn.shadow_frag}};fc.physical={uniforms:Wo([fc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Me(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new nt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new nt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new nt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag};const ZT={r:0,b:0,g:0};function xje(t,e,n,i,r,s,o){const a=new nt(0);let l=s===!0?0:1,c,h,u=null,d=0,f=null;function p(g,v){let y=!1,x=v.isScene===!0?v.background:null;x&&x.isTexture&&(x=(v.backgroundBlurriness>0?n:e).get(x));const b=t.xr,S=b.getSession&&b.getSession();S&&S.environmentBlendMode==="additive"&&(x=null),x===null?m(a,l):x&&x.isColor&&(m(x,1),y=!0),(t.autoClear||y)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),x&&(x.isCubeTexture||x.mapping===Gv)?(h===void 0&&(h=new Lr(new Ia(1,1,1),new zc({name:"BackgroundCubeMaterial",uniforms:jb(fc.backgroundCube.uniforms),vertexShader:fc.backgroundCube.vertexShader,fragmentShader:fc.backgroundCube.fragmentShader,side:Ca,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(A,E,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=x,h.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,h.material.toneMapped=x.encoding!==xn,(u!==x||d!==x.version||f!==t.toneMapping)&&(h.material.needsUpdate=!0,u=x,d=x.version,f=t.toneMapping),h.layers.enableAll(),g.unshift(h,h.geometry,h.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new Lr(new og(2,2),new zc({name:"BackgroundMaterial",uniforms:jb(fc.background.uniforms),vertexShader:fc.background.vertexShader,fragmentShader:fc.background.fragmentShader,side:Bu,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=x.encoding!==xn,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||d!==x.version||f!==t.toneMapping)&&(c.material.needsUpdate=!0,u=x,d=x.version,f=t.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}function m(g,v){g.getRGB(ZT,Gge(t)),i.buffers.color.setClear(ZT.r,ZT.g,ZT.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(g,v=1){a.set(g),l=v,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,m(a,l)},render:p}}function bje(t,e,n,i){const r=t.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=g(null);let c=l,h=!1;function u(R,H,Z,ee,F){let V=!1;if(o){const U=m(ee,Z,H);c!==U&&(c=U,f(c.object)),V=v(R,ee,Z,F),V&&y(R,ee,Z,F)}else{const U=H.wireframe===!0;(c.geometry!==ee.id||c.program!==Z.id||c.wireframe!==U)&&(c.geometry=ee.id,c.program=Z.id,c.wireframe=U,V=!0)}F!==null&&n.update(F,34963),(V||h)&&(h=!1,M(R,H,Z,ee),F!==null&&t.bindBuffer(34963,n.get(F).buffer))}function d(){return i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function f(R){return i.isWebGL2?t.bindVertexArray(R):s.bindVertexArrayOES(R)}function p(R){return i.isWebGL2?t.deleteVertexArray(R):s.deleteVertexArrayOES(R)}function m(R,H,Z){const ee=Z.wireframe===!0;let F=a[R.id];F===void 0&&(F={},a[R.id]=F);let V=F[H.id];V===void 0&&(V={},F[H.id]=V);let U=V[ee];return U===void 0&&(U=g(d()),V[ee]=U),U}function g(R){const H=[],Z=[],ee=[];for(let F=0;F<r;F++)H[F]=0,Z[F]=0,ee[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:Z,attributeDivisors:ee,object:R,attributes:{},index:null}}function v(R,H,Z,ee){const F=c.attributes,V=H.attributes;let U=0;const j=Z.getAttributes();for(const z in j)if(j[z].location>=0){const J=F[z];let K=V[z];if(K===void 0&&(z==="instanceMatrix"&&R.instanceMatrix&&(K=R.instanceMatrix),z==="instanceColor"&&R.instanceColor&&(K=R.instanceColor)),J===void 0||J.attribute!==K||K&&J.data!==K.data)return!0;U++}return c.attributesNum!==U||c.index!==ee}function y(R,H,Z,ee){const F={},V=H.attributes;let U=0;const j=Z.getAttributes();for(const z in j)if(j[z].location>=0){let J=V[z];J===void 0&&(z==="instanceMatrix"&&R.instanceMatrix&&(J=R.instanceMatrix),z==="instanceColor"&&R.instanceColor&&(J=R.instanceColor));const K={};K.attribute=J,J&&J.data&&(K.data=J.data),F[z]=K,U++}c.attributes=F,c.attributesNum=U,c.index=ee}function x(){const R=c.newAttributes;for(let H=0,Z=R.length;H<Z;H++)R[H]=0}function b(R){S(R,0)}function S(R,H){const Z=c.newAttributes,ee=c.enabledAttributes,F=c.attributeDivisors;Z[R]=1,ee[R]===0&&(t.enableVertexAttribArray(R),ee[R]=1),F[R]!==H&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](R,H),F[R]=H)}function A(){const R=c.newAttributes,H=c.enabledAttributes;for(let Z=0,ee=H.length;Z<ee;Z++)H[Z]!==R[Z]&&(t.disableVertexAttribArray(Z),H[Z]=0)}function E(R,H,Z,ee,F,V){i.isWebGL2===!0&&(Z===5124||Z===5125)?t.vertexAttribIPointer(R,H,Z,F,V):t.vertexAttribPointer(R,H,Z,ee,F,V)}function M(R,H,Z,ee){if(i.isWebGL2===!1&&(R.isInstancedMesh||ee.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();const F=ee.attributes,V=Z.getAttributes(),U=H.defaultAttributeValues;for(const j in V){const z=V[j];if(z.location>=0){let Y=F[j];if(Y===void 0&&(j==="instanceMatrix"&&R.instanceMatrix&&(Y=R.instanceMatrix),j==="instanceColor"&&R.instanceColor&&(Y=R.instanceColor)),Y!==void 0){const J=Y.normalized,K=Y.itemSize,X=n.get(Y);if(X===void 0)continue;const te=X.buffer,re=X.type,se=X.bytesPerElement;if(Y.isInterleavedBufferAttribute){const ce=Y.data,ge=ce.stride,oe=Y.offset;if(ce.isInstancedInterleavedBuffer){for(let ae=0;ae<z.locationSize;ae++)S(z.location+ae,ce.meshPerAttribute);R.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let ae=0;ae<z.locationSize;ae++)b(z.location+ae);t.bindBuffer(34962,te);for(let ae=0;ae<z.locationSize;ae++)E(z.location+ae,K/z.locationSize,re,J,ge*se,(oe+K/z.locationSize*ae)*se)}else{if(Y.isInstancedBufferAttribute){for(let ce=0;ce<z.locationSize;ce++)S(z.location+ce,Y.meshPerAttribute);R.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let ce=0;ce<z.locationSize;ce++)b(z.location+ce);t.bindBuffer(34962,te);for(let ce=0;ce<z.locationSize;ce++)E(z.location+ce,K/z.locationSize,re,J,K*se,K/z.locationSize*ce*se)}}else if(U!==void 0){const J=U[j];if(J!==void 0)switch(J.length){case 2:t.vertexAttrib2fv(z.location,J);break;case 3:t.vertexAttrib3fv(z.location,J);break;case 4:t.vertexAttrib4fv(z.location,J);break;default:t.vertexAttrib1fv(z.location,J)}}}}A()}function C(){L();for(const R in a){const H=a[R];for(const Z in H){const ee=H[Z];for(const F in ee)p(ee[F].object),delete ee[F];delete H[Z]}delete a[R]}}function T(R){if(a[R.id]===void 0)return;const H=a[R.id];for(const Z in H){const ee=H[Z];for(const F in ee)p(ee[F].object),delete ee[F];delete H[Z]}delete a[R.id]}function D(R){for(const H in a){const Z=a[H];if(Z[R.id]===void 0)continue;const ee=Z[R.id];for(const F in ee)p(ee[F].object),delete ee[F];delete Z[R.id]}}function L(){I(),h=!0,c!==l&&(c=l,f(c.object))}function I(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:L,resetDefaultState:I,dispose:C,releaseStatesOfGeometry:T,releaseStatesOfProgram:D,initAttributes:x,enableAttribute:b,disableUnusedAttributes:A}}function wje(t,e,n,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,h){t.drawArrays(s,c,h),n.update(h,s,1)}function l(c,h,u){if(u===0)return;let d,f;if(r)d=t,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](s,c,h,u),n.update(h,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function _je(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(E){if(E==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return E==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),h=n.logarithmicDepthBuffer===!0,u=t.getParameter(34930),d=t.getParameter(35660),f=t.getParameter(3379),p=t.getParameter(34076),m=t.getParameter(34921),g=t.getParameter(36347),v=t.getParameter(36348),y=t.getParameter(36349),x=d>0,b=o||e.has("OES_texture_float"),S=x&&b,A=o?t.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:u,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:b,floatVertexTextures:S,maxSamples:A}}function Sje(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new lf,a=new Wr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d){const f=u.length!==0||d||i!==0||r;return r=d,i=u.length,f},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,d){n=h(u,d,0)},this.setState=function(u,d,f){const p=u.clippingPlanes,m=u.clipIntersection,g=u.clipShadows,v=t.get(u);if(!r||p===null||p.length===0||s&&!g)s?h(null):c();else{const y=s?0:i,x=y*4;let b=v.clippingState||null;l.value=b,b=h(p,d,x,f);for(let S=0;S!==x;++S)b[S]=n[S];v.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(u,d,f,p){const m=u!==null?u.length:0;let g=null;if(m!==0){if(g=l.value,p!==!0||g===null){const v=f+m*4,y=d.matrixWorldInverse;a.getNormalMatrix(y),(g===null||g.length<v)&&(g=new Float32Array(v));for(let x=0,b=f;x!==m;++x,b+=4)o.copy(u[x]).applyMatrix4(y,a),o.normal.toArray(g,b),g[b+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function Aje(t){let e=new WeakMap;function n(o,a){return a===Ub?o.mapping=ed:a===h2&&(o.mapping=Ff),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Ub||a===h2)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new T9(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Uf extends jv{constructor(e=-1,n=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Mx=4,sQ=[.125,.215,.35,.446,.526,.582],p0=20,RN=new Uf,oQ=new nt;let IN=null;const t0=(1+Math.sqrt(5))/2,Vy=1/t0,aQ=[new q(1,1,1),new q(-1,1,1),new q(1,1,-1),new q(-1,1,-1),new q(0,t0,Vy),new q(0,t0,-Vy),new q(Vy,0,t0),new q(-Vy,0,t0),new q(t0,Vy,0),new q(-t0,Vy,0)];class AG{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){IN=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=uQ(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=cQ(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(IN),e.scissorTest=!1,QT(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ed||e.mapping===Ff?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),IN=this._renderer.getRenderTarget();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:Ei,minFilter:Ei,generateMipmaps:!1,type:vu,format:fa,encoding:Ra,depthBuffer:!1},r=lQ(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=lQ(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Mje(s)),this._blurMaterial=Eje(s,e,n)}return r}_compileMaterial(e){const n=new Lr(this._lodPlanes[0],e);this._renderer.compile(n,RN)}_sceneToCubeUV(e,n,i,r){const a=new Vr(90,1,n,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,u=h.autoClear,d=h.toneMapping;h.getClearColor(oQ),h.toneMapping=Tu,h.autoClear=!1;const f=new ls({name:"PMREM.Background",side:Ca,depthWrite:!1,depthTest:!1}),p=new Lr(new Ia,f);let m=!1;const g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,m=!0):(f.color.copy(oQ),m=!0);for(let v=0;v<6;v++){const y=v%3;y===0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):y===1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const x=this._cubeSize;QT(r,y*x,v>2?x:0,x,x),h.setRenderTarget(r),m&&h.render(p,a),h.render(e,a)}p.geometry.dispose(),p.material.dispose(),h.toneMapping=d,h.autoClear=u,e.background=g}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===ed||e.mapping===Ff;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=uQ()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=cQ());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Lr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;QT(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,RN)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=aQ[(r-1)%aQ.length];this._blur(e,r-1,r,s,o)}n.autoClear=i}_blur(e,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,u=new Lr(this._lodPlanes[r],c),d=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*p0-1),m=s/p,g=isFinite(s)?1+Math.floor(h*m):p0;g>p0&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${p0}`);const v=[];let y=0;for(let E=0;E<p0;++E){const M=E/m,C=Math.exp(-M*M/2);v.push(C),E===0?y+=C:E<g&&(y+=2*C)}for(let E=0;E<v.length;E++)v[E]=v[E]/y;d.envMap.value=e.texture,d.samples.value=g,d.weights.value=v,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:x}=this;d.dTheta.value=p,d.mipInt.value=x-i;const b=this._sizeLods[r],S=3*b*(r>x-Mx?r-x+Mx:0),A=4*(this._cubeSize-b);QT(n,S,A,3*b,2*b),l.setRenderTarget(n),l.render(u,RN)}}function Mje(t){const e=[],n=[],i=[];let r=t;const s=t-Mx+1+sQ.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);n.push(a);let l=1/a;o>t-Mx?l=sQ[o-t+Mx-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),h=-c,u=1+c,d=[h,h,u,h,u,u,h,h,u,u,h,u],f=6,p=6,m=3,g=2,v=1,y=new Float32Array(m*p*f),x=new Float32Array(g*p*f),b=new Float32Array(v*p*f);for(let A=0;A<f;A++){const E=A%3*2/3-1,M=A>2?0:-1,C=[E,M,0,E+2/3,M,0,E+2/3,M+1,0,E,M,0,E+2/3,M+1,0,E,M+1,0];y.set(C,m*p*A),x.set(d,g*p*A);const T=[A,A,A,A,A,A];b.set(T,v*p*A)}const S=new yt;S.setAttribute("position",new Nt(y,m)),S.setAttribute("uv",new Nt(x,g)),S.setAttribute("faceIndex",new Nt(b,v)),e.push(S),r>Mx&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function lQ(t,e,n){const i=new Fu(t,e,n);return i.texture.mapping=Gv,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function QT(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Eje(t,e,n){const i=new Float32Array(p0),r=new q(0,1,0);return new zc({name:"SphericalGaussianBlur",defines:{n:p0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:P9(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ef,depthTest:!1,depthWrite:!1})}function cQ(){return new zc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:P9(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ef,depthTest:!1,depthWrite:!1})}function uQ(){return new zc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:P9(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ef,depthTest:!1,depthWrite:!1})}function P9(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Cje(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Ub||l===h2,h=l===ed||l===Ff;if(c||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=e.get(a);return n===null&&(n=new AG(t)),u=c?n.fromEquirectangular(a,u):n.fromCubemap(a,u),e.set(a,u),u.texture}else{if(e.has(a))return e.get(a).texture;{const u=a.image;if(c&&u&&u.height>0||h&&u&&r(u)){n===null&&(n=new AG(t));const d=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let h=0;h<c;h++)a[h]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function Tje(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Pje(t,e,n,i){const r={},s=new WeakMap;function o(u){const d=u.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",o),delete r[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,n.memory.geometries--}function a(u,d){return r[d.id]===!0||(d.addEventListener("dispose",o),r[d.id]=!0,n.memory.geometries++),d}function l(u){const d=u.attributes;for(const p in d)e.update(d[p],34962);const f=u.morphAttributes;for(const p in f){const m=f[p];for(let g=0,v=m.length;g<v;g++)e.update(m[g],34962)}}function c(u){const d=[],f=u.index,p=u.attributes.position;let m=0;if(f!==null){const y=f.array;m=f.version;for(let x=0,b=y.length;x<b;x+=3){const S=y[x+0],A=y[x+1],E=y[x+2];d.push(S,A,A,E,E,S)}}else{const y=p.array;m=p.version;for(let x=0,b=y.length/3-1;x<b;x+=3){const S=x+0,A=x+1,E=x+2;d.push(S,A,A,E,E,S)}}const g=new(Nge(d)?Jx:C9)(d,1);g.version=m;const v=s.get(u);v&&e.remove(v),s.set(u,g)}function h(u){const d=s.get(u);if(d){const f=u.index;f!==null&&d.version<f.version&&c(u)}else c(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:h}}function Dje(t,e,n,i){const r=i.isWebGL2;let s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function h(d,f){t.drawElements(s,f,a,d*l),n.update(f,s,1)}function u(d,f,p){if(p===0)return;let m,g;if(r)m=t,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,f,a,d*l,p),n.update(f,s,p)}this.setMode=o,this.setIndex=c,this.render=h,this.renderInstances=u}function Oje(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(s/3);break;case 1:n.lines+=a*(s/2);break;case 3:n.lines+=a*(s-1);break;case 2:n.lines+=a*s;break;case 0:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function Lje(t,e){return t[0]-e[0]}function Rje(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Ije(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,o=new sn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,h,u){const d=c.morphTargetInfluences;if(e.isWebGL2===!0){const p=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,m=p!==void 0?p.length:0;let g=s.get(h);if(g===void 0||g.count!==m){let H=function(){I.dispose(),s.delete(h),h.removeEventListener("dispose",H)};var f=H;g!==void 0&&g.texture.dispose();const x=h.morphAttributes.position!==void 0,b=h.morphAttributes.normal!==void 0,S=h.morphAttributes.color!==void 0,A=h.morphAttributes.position||[],E=h.morphAttributes.normal||[],M=h.morphAttributes.color||[];let C=0;x===!0&&(C=1),b===!0&&(C=2),S===!0&&(C=3);let T=h.attributes.position.count*C,D=1;T>e.maxTextureSize&&(D=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const L=new Float32Array(T*D*4*m),I=new BI(L,T,D,m);I.type=Cc,I.needsUpdate=!0;const R=C*4;for(let Z=0;Z<m;Z++){const ee=A[Z],F=E[Z],V=M[Z],U=T*D*4*Z;for(let j=0;j<ee.count;j++){const z=j*R;x===!0&&(o.fromBufferAttribute(ee,j),L[U+z+0]=o.x,L[U+z+1]=o.y,L[U+z+2]=o.z,L[U+z+3]=0),b===!0&&(o.fromBufferAttribute(F,j),L[U+z+4]=o.x,L[U+z+5]=o.y,L[U+z+6]=o.z,L[U+z+7]=0),S===!0&&(o.fromBufferAttribute(V,j),L[U+z+8]=o.x,L[U+z+9]=o.y,L[U+z+10]=o.z,L[U+z+11]=V.itemSize===4?o.w:1)}}g={count:m,texture:I,size:new Me(T,D)},s.set(h,g),h.addEventListener("dispose",H)}let v=0;for(let x=0;x<d.length;x++)v+=d[x];const y=h.morphTargetsRelative?1:1-v;u.getUniforms().setValue(t,"morphTargetBaseInfluence",y),u.getUniforms().setValue(t,"morphTargetInfluences",d),u.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}else{const p=d===void 0?0:d.length;let m=i[h.id];if(m===void 0||m.length!==p){m=[];for(let b=0;b<p;b++)m[b]=[b,0];i[h.id]=m}for(let b=0;b<p;b++){const S=m[b];S[0]=b,S[1]=d[b]}m.sort(Rje);for(let b=0;b<8;b++)b<p&&m[b][1]?(a[b][0]=m[b][0],a[b][1]=m[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(Lje);const g=h.morphAttributes.position,v=h.morphAttributes.normal;let y=0;for(let b=0;b<8;b++){const S=a[b],A=S[0],E=S[1];A!==Number.MAX_SAFE_INTEGER&&E?(g&&h.getAttribute("morphTarget"+b)!==g[A]&&h.setAttribute("morphTarget"+b,g[A]),v&&h.getAttribute("morphNormal"+b)!==v[A]&&h.setAttribute("morphNormal"+b,v[A]),r[b]=E,y+=E):(g&&h.hasAttribute("morphTarget"+b)===!0&&h.deleteAttribute("morphTarget"+b),v&&h.hasAttribute("morphNormal"+b)===!0&&h.deleteAttribute("morphNormal"+b),r[b]=0)}const x=h.morphTargetsRelative?1:1-y;u.getUniforms().setValue(t,"morphTargetBaseInfluence",x),u.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:l}}function Bje(t,e,n,i){let r=new WeakMap;function s(l){const c=i.render.frame,h=l.geometry,u=e.get(l,h);return r.get(u)!==c&&(e.update(u),r.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),u}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}const Vge=new bi,Wge=new BI,$ge=new E9,qge=new Sw,hQ=[],dQ=[],fQ=new Float32Array(16),pQ=new Float32Array(9),mQ=new Float32Array(4);function Aw(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=hQ[r];if(s===void 0&&(s=new Float32Array(r),hQ[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Ss(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function As(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function FI(t,e){let n=dQ[e];n===void 0&&(n=new Int32Array(e),dQ[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function kje(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Fje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ss(n,e))return;t.uniform2fv(this.addr,e),As(n,e)}}function Nje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ss(n,e))return;t.uniform3fv(this.addr,e),As(n,e)}}function zje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ss(n,e))return;t.uniform4fv(this.addr,e),As(n,e)}}function Uje(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ss(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),As(n,e)}else{if(Ss(n,i))return;mQ.set(i),t.uniformMatrix2fv(this.addr,!1,mQ),As(n,i)}}function Gje(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ss(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),As(n,e)}else{if(Ss(n,i))return;pQ.set(i),t.uniformMatrix3fv(this.addr,!1,pQ),As(n,i)}}function Hje(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ss(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),As(n,e)}else{if(Ss(n,i))return;fQ.set(i),t.uniformMatrix4fv(this.addr,!1,fQ),As(n,i)}}function jje(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Vje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ss(n,e))return;t.uniform2iv(this.addr,e),As(n,e)}}function Wje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ss(n,e))return;t.uniform3iv(this.addr,e),As(n,e)}}function $je(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ss(n,e))return;t.uniform4iv(this.addr,e),As(n,e)}}function qje(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Xje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ss(n,e))return;t.uniform2uiv(this.addr,e),As(n,e)}}function Yje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ss(n,e))return;t.uniform3uiv(this.addr,e),As(n,e)}}function Kje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ss(n,e))return;t.uniform4uiv(this.addr,e),As(n,e)}}function Jje(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||Vge,r)}function Zje(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||$ge,r)}function Qje(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||qge,r)}function eVe(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Wge,r)}function tVe(t){switch(t){case 5126:return kje;case 35664:return Fje;case 35665:return Nje;case 35666:return zje;case 35674:return Uje;case 35675:return Gje;case 35676:return Hje;case 5124:case 35670:return jje;case 35667:case 35671:return Vje;case 35668:case 35672:return Wje;case 35669:case 35673:return $je;case 5125:return qje;case 36294:return Xje;case 36295:return Yje;case 36296:return Kje;case 35678:case 36198:case 36298:case 36306:case 35682:return Jje;case 35679:case 36299:case 36307:return Zje;case 35680:case 36300:case 36308:case 36293:return Qje;case 36289:case 36303:case 36311:case 36292:return eVe}}function nVe(t,e){t.uniform1fv(this.addr,e)}function iVe(t,e){const n=Aw(e,this.size,2);t.uniform2fv(this.addr,n)}function rVe(t,e){const n=Aw(e,this.size,3);t.uniform3fv(this.addr,n)}function sVe(t,e){const n=Aw(e,this.size,4);t.uniform4fv(this.addr,n)}function oVe(t,e){const n=Aw(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function aVe(t,e){const n=Aw(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function lVe(t,e){const n=Aw(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function cVe(t,e){t.uniform1iv(this.addr,e)}function uVe(t,e){t.uniform2iv(this.addr,e)}function hVe(t,e){t.uniform3iv(this.addr,e)}function dVe(t,e){t.uniform4iv(this.addr,e)}function fVe(t,e){t.uniform1uiv(this.addr,e)}function pVe(t,e){t.uniform2uiv(this.addr,e)}function mVe(t,e){t.uniform3uiv(this.addr,e)}function gVe(t,e){t.uniform4uiv(this.addr,e)}function vVe(t,e,n){const i=this.cache,r=e.length,s=FI(n,r);Ss(i,s)||(t.uniform1iv(this.addr,s),As(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||Vge,s[o])}function yVe(t,e,n){const i=this.cache,r=e.length,s=FI(n,r);Ss(i,s)||(t.uniform1iv(this.addr,s),As(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||$ge,s[o])}function xVe(t,e,n){const i=this.cache,r=e.length,s=FI(n,r);Ss(i,s)||(t.uniform1iv(this.addr,s),As(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||qge,s[o])}function bVe(t,e,n){const i=this.cache,r=e.length,s=FI(n,r);Ss(i,s)||(t.uniform1iv(this.addr,s),As(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||Wge,s[o])}function wVe(t){switch(t){case 5126:return nVe;case 35664:return iVe;case 35665:return rVe;case 35666:return sVe;case 35674:return oVe;case 35675:return aVe;case 35676:return lVe;case 5124:case 35670:return cVe;case 35667:case 35671:return uVe;case 35668:case 35672:return hVe;case 35669:case 35673:return dVe;case 5125:return fVe;case 36294:return pVe;case 36295:return mVe;case 36296:return gVe;case 35678:case 36198:case 36298:case 36306:case 35682:return vVe;case 35679:case 36299:case 36307:return yVe;case 35680:case 36300:case 36308:case 36293:return xVe;case 36289:case 36303:case 36311:case 36292:return bVe}}class _Ve{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.setValue=tVe(n.type)}}class SVe{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.size=n.size,this.setValue=wVe(n.type)}}class AVe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,n[a.id],i)}}}const BN=/(\w+)(\])?(\[|\.)?/g;function gQ(t,e){t.seq.push(e),t.map[e.id]=e}function MVe(t,e,n){const i=t.name,r=i.length;for(BN.lastIndex=0;;){const s=BN.exec(i),o=BN.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){gQ(n,c===void 0?new _Ve(a,t,e):new SVe(a,t,e));break}else{let u=n.map[a];u===void 0&&(u=new AVe(a),gQ(n,u)),n=u}}}class ID{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),o=e.getUniformLocation(n,s.name);MVe(s,o,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in n&&i.push(o)}return i}}function vQ(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let EVe=0;function CVe(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function TVe(t){switch(t){case Ra:return["Linear","( value )"];case xn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function yQ(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+CVe(t.getShaderSource(e),o)}else return r}function PVe(t,e){const n=TVe(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function DVe(t,e){let n;switch(e){case cge:n="Linear";break;case uge:n="Reinhard";break;case hge:n="OptimizedCineon";break;case b9:n="ACESFilmic";break;case dge:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function OVe(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(yA).join(`
`)}function LVe(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function RVe(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function yA(t){return t!==""}function xQ(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function bQ(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const IVe=/^[ \t]*#include +<([\w\d./]+)>/gm;function MG(t){return t.replace(IVe,BVe)}function BVe(t,e){const n=Mn[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return MG(n)}const kVe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function wQ(t){return t.replace(kVe,FVe)}function FVe(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function _Q(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function NVe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===OI?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===tM?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===P0&&(e="SHADOWMAP_TYPE_VSM"),e}function zVe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ed:case Ff:e="ENVMAP_TYPE_CUBE";break;case Gv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function UVe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Ff:e="ENVMAP_MODE_REFRACTION";break}return e}function GVe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case wE:e="ENVMAP_BLENDING_MULTIPLY";break;case age:e="ENVMAP_BLENDING_MIX";break;case lge:e="ENVMAP_BLENDING_ADD";break}return e}function HVe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function jVe(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=NVe(n),c=zVe(n),h=UVe(n),u=GVe(n),d=HVe(n),f=n.isWebGL2?"":OVe(n),p=LVe(s),m=r.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=[p].filter(yA).join(`
`),g.length>0&&(g+=`
`),v=[f,p].filter(yA).join(`
`),v.length>0&&(v+=`
`)):(g=[_Q(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(yA).join(`
`),v=[f,_Q(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Tu?"#define TONE_MAPPING":"",n.toneMapping!==Tu?Mn.tonemapping_pars_fragment:"",n.toneMapping!==Tu?DVe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Mn.encodings_pars_fragment,PVe("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(yA).join(`
`)),o=MG(o),o=xQ(o,n),o=bQ(o,n),a=MG(a),a=xQ(a,n),a=bQ(a,n),o=wQ(o),a=wQ(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",n.glslVersion===_G?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===_G?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const x=y+g+o,b=y+v+a,S=vQ(r,35633,x),A=vQ(r,35632,b);if(r.attachShader(m,S),r.attachShader(m,A),n.index0AttributeName!==void 0?r.bindAttribLocation(m,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),t.debug.checkShaderErrors){const C=r.getProgramInfoLog(m).trim(),T=r.getShaderInfoLog(S).trim(),D=r.getShaderInfoLog(A).trim();let L=!0,I=!0;if(r.getProgramParameter(m,35714)===!1){L=!1;const R=yQ(r,S,"vertex"),H=yQ(r,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+`

Program Info Log: `+C+`
`+R+`
`+H)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(T===""||D==="")&&(I=!1);I&&(this.diagnostics={runnable:L,programLog:C,vertexShader:{log:T,prefix:g},fragmentShader:{log:D,prefix:v}})}r.deleteShader(S),r.deleteShader(A);let E;this.getUniforms=function(){return E===void 0&&(E=new ID(r,m)),E};let M;return this.getAttributes=function(){return M===void 0&&(M=RVe(r,m)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=EVe++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=S,this.fragmentShader=A,this}let VVe=0;class WVe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new $Ve(e),n.set(e,i)),i}}class $Ve{constructor(e){this.id=VVe++,this.code=e,this.usedTimes=0}}function qVe(t,e,n,i,r,s,o){const a=new q0,l=new WVe,c=[],h=r.isWebGL2,u=r.logarithmicDepthBuffer,d=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(M,C,T,D,L){const I=D.fog,R=L.geometry,H=M.isMeshStandardMaterial?D.environment:null,Z=(M.isMeshStandardMaterial?n:e).get(M.envMap||H),ee=Z&&Z.mapping===Gv?Z.image.height:null,F=p[M.type];M.precision!==null&&(f=r.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));const V=R.morphAttributes.position||R.morphAttributes.normal||R.morphAttributes.color,U=V!==void 0?V.length:0;let j=0;R.morphAttributes.position!==void 0&&(j=1),R.morphAttributes.normal!==void 0&&(j=2),R.morphAttributes.color!==void 0&&(j=3);let z,Y,J,K;if(F){const ge=fc[F];z=ge.vertexShader,Y=ge.fragmentShader}else z=M.vertexShader,Y=M.fragmentShader,l.update(M),J=l.getVertexShaderID(M),K=l.getFragmentShaderID(M);const X=t.getRenderTarget(),te=M.alphaTest>0,re=M.clearcoat>0,se=M.iridescence>0;return{isWebGL2:h,shaderID:F,shaderName:M.type,vertexShader:z,fragmentShader:Y,defines:M.defines,customVertexShaderID:J,customFragmentShaderID:K,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:f,instancing:L.isInstancedMesh===!0,instancingColor:L.isInstancedMesh===!0&&L.instanceColor!==null,supportsVertexTextures:d,outputEncoding:X===null?t.outputEncoding:X.isXRRenderTarget===!0?X.texture.encoding:Ra,map:!!M.map,matcap:!!M.matcap,envMap:!!Z,envMapMode:Z&&Z.mapping,envMapCubeUVHeight:ee,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:M.normalMapType===Ige,tangentSpaceNormalMap:M.normalMapType===Zf,decodeVideoTexture:!!M.map&&M.map.isVideoTexture===!0&&M.map.encoding===xn,clearcoat:re,clearcoatMap:re&&!!M.clearcoatMap,clearcoatRoughnessMap:re&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:re&&!!M.clearcoatNormalMap,iridescence:se,iridescenceMap:se&&!!M.iridescenceMap,iridescenceThicknessMap:se&&!!M.iridescenceThicknessMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:M.transparent===!1&&M.blending===j0,alphaMap:!!M.alphaMap,alphaTest:te,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!R.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!R.attributes.color&&R.attributes.color.itemSize===4,vertexUvs:!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatMap||!!M.clearcoatRoughnessMap||!!M.clearcoatNormalMap||!!M.iridescenceMap||!!M.iridescenceThicknessMap||!!M.displacementMap||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularColorMap||!!M.sheenColorMap||!!M.sheenRoughnessMap,uvsVertexOnly:!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatNormalMap||M.iridescenceMap||M.iridescenceThicknessMap||M.transmission>0||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheen>0||M.sheenColorMap||M.sheenRoughnessMap)&&!!M.displacementMap,fog:!!I,useFog:M.fog===!0,fogExp2:I&&I.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:u,skinning:L.isSkinnedMesh===!0,morphTargets:R.morphAttributes.position!==void 0,morphNormals:R.morphAttributes.normal!==void 0,morphColors:R.morphAttributes.color!==void 0,morphTargetsCount:U,morphTextureStride:j,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:t.shadowMap.enabled&&T.length>0,shadowMapType:t.shadowMap.type,toneMapping:M.toneMapped?t.toneMapping:Tu,useLegacyLights:t.useLegacyLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===Ec,flipSided:M.side===Ca,useDepthPacking:!!M.depthPacking,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function g(M){const C=[];if(M.shaderID?C.push(M.shaderID):(C.push(M.customVertexShaderID),C.push(M.customFragmentShaderID)),M.defines!==void 0)for(const T in M.defines)C.push(T),C.push(M.defines[T]);return M.isRawShaderMaterial===!1&&(v(C,M),y(C,M),C.push(t.outputEncoding)),C.push(M.customProgramCacheKey),C.join()}function v(M,C){M.push(C.precision),M.push(C.outputEncoding),M.push(C.envMapMode),M.push(C.envMapCubeUVHeight),M.push(C.combine),M.push(C.vertexUvs),M.push(C.fogExp2),M.push(C.sizeAttenuation),M.push(C.morphTargetsCount),M.push(C.morphAttributeCount),M.push(C.numDirLights),M.push(C.numPointLights),M.push(C.numSpotLights),M.push(C.numSpotLightMaps),M.push(C.numHemiLights),M.push(C.numRectAreaLights),M.push(C.numDirLightShadows),M.push(C.numPointLightShadows),M.push(C.numSpotLightShadows),M.push(C.numSpotLightShadowsWithMaps),M.push(C.shadowMapType),M.push(C.toneMapping),M.push(C.numClippingPlanes),M.push(C.numClipIntersection),M.push(C.depthPacking)}function y(M,C){a.disableAll(),C.isWebGL2&&a.enable(0),C.supportsVertexTextures&&a.enable(1),C.instancing&&a.enable(2),C.instancingColor&&a.enable(3),C.map&&a.enable(4),C.matcap&&a.enable(5),C.envMap&&a.enable(6),C.lightMap&&a.enable(7),C.aoMap&&a.enable(8),C.emissiveMap&&a.enable(9),C.bumpMap&&a.enable(10),C.normalMap&&a.enable(11),C.objectSpaceNormalMap&&a.enable(12),C.tangentSpaceNormalMap&&a.enable(13),C.clearcoat&&a.enable(14),C.clearcoatMap&&a.enable(15),C.clearcoatRoughnessMap&&a.enable(16),C.clearcoatNormalMap&&a.enable(17),C.iridescence&&a.enable(18),C.iridescenceMap&&a.enable(19),C.iridescenceThicknessMap&&a.enable(20),C.displacementMap&&a.enable(21),C.specularMap&&a.enable(22),C.roughnessMap&&a.enable(23),C.metalnessMap&&a.enable(24),C.gradientMap&&a.enable(25),C.alphaMap&&a.enable(26),C.alphaTest&&a.enable(27),C.vertexColors&&a.enable(28),C.vertexAlphas&&a.enable(29),C.vertexUvs&&a.enable(30),C.vertexTangents&&a.enable(31),C.uvsVertexOnly&&a.enable(32),M.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.skinning&&a.enable(4),C.morphTargets&&a.enable(5),C.morphNormals&&a.enable(6),C.morphColors&&a.enable(7),C.premultipliedAlpha&&a.enable(8),C.shadowMapEnabled&&a.enable(9),C.useLegacyLights&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.specularIntensityMap&&a.enable(15),C.specularColorMap&&a.enable(16),C.transmission&&a.enable(17),C.transmissionMap&&a.enable(18),C.thicknessMap&&a.enable(19),C.sheen&&a.enable(20),C.sheenColorMap&&a.enable(21),C.sheenRoughnessMap&&a.enable(22),C.decodeVideoTexture&&a.enable(23),C.opaque&&a.enable(24),M.push(a.mask)}function x(M){const C=p[M.type];let T;if(C){const D=fc[C];T=Hv.clone(D.uniforms)}else T=M.uniforms;return T}function b(M,C){let T;for(let D=0,L=c.length;D<L;D++){const I=c[D];if(I.cacheKey===C){T=I,++T.usedTimes;break}}return T===void 0&&(T=new jVe(t,C,M,s),c.push(T)),T}function S(M){if(--M.usedTimes===0){const C=c.indexOf(M);c[C]=c[c.length-1],c.pop(),M.destroy()}}function A(M){l.remove(M)}function E(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:x,acquireProgram:b,releaseProgram:S,releaseShaderCache:A,programs:c,dispose:E}}function XVe(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,a){t.get(s)[o]=a}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function YVe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function SQ(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function AQ(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(u,d,f,p,m,g){let v=t[e];return v===void 0?(v={id:u.id,object:u,geometry:d,material:f,groupOrder:p,renderOrder:u.renderOrder,z:m,group:g},t[e]=v):(v.id=u.id,v.object=u,v.geometry=d,v.material=f,v.groupOrder=p,v.renderOrder=u.renderOrder,v.z=m,v.group=g),e++,v}function a(u,d,f,p,m,g){const v=o(u,d,f,p,m,g);f.transmission>0?i.push(v):f.transparent===!0?r.push(v):n.push(v)}function l(u,d,f,p,m,g){const v=o(u,d,f,p,m,g);f.transmission>0?i.unshift(v):f.transparent===!0?r.unshift(v):n.unshift(v)}function c(u,d){n.length>1&&n.sort(u||YVe),i.length>1&&i.sort(d||SQ),r.length>1&&r.sort(d||SQ)}function h(){for(let u=e,d=t.length;u<d;u++){const f=t[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:c}}function KVe(){let t=new WeakMap;function e(i,r){const s=t.get(i);let o;return s===void 0?(o=new AQ,t.set(i,[o])):r>=s.length?(o=new AQ,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function JVe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new q,color:new nt};break;case"SpotLight":n={position:new q,direction:new q,color:new nt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new q,color:new nt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new q,skyColor:new nt,groundColor:new nt};break;case"RectAreaLight":n={color:new nt,position:new q,halfWidth:new q,halfHeight:new q};break}return t[e.id]=n,n}}}function ZVe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let QVe=0;function e8e(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function t8e(t,e){const n=new JVe,i=ZVe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)r.probe.push(new q);const s=new q,o=new at,a=new at;function l(h,u){let d=0,f=0,p=0;for(let D=0;D<9;D++)r.probe[D].set(0,0,0);let m=0,g=0,v=0,y=0,x=0,b=0,S=0,A=0,E=0,M=0;h.sort(e8e);const C=u===!0?Math.PI:1;for(let D=0,L=h.length;D<L;D++){const I=h[D],R=I.color,H=I.intensity,Z=I.distance,ee=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)d+=R.r*H*C,f+=R.g*H*C,p+=R.b*H*C;else if(I.isLightProbe)for(let F=0;F<9;F++)r.probe[F].addScaledVector(I.sh.coefficients[F],H);else if(I.isDirectionalLight){const F=n.get(I);if(F.color.copy(I.color).multiplyScalar(I.intensity*C),I.castShadow){const V=I.shadow,U=i.get(I);U.shadowBias=V.bias,U.shadowNormalBias=V.normalBias,U.shadowRadius=V.radius,U.shadowMapSize=V.mapSize,r.directionalShadow[m]=U,r.directionalShadowMap[m]=ee,r.directionalShadowMatrix[m]=I.shadow.matrix,b++}r.directional[m]=F,m++}else if(I.isSpotLight){const F=n.get(I);F.position.setFromMatrixPosition(I.matrixWorld),F.color.copy(R).multiplyScalar(H*C),F.distance=Z,F.coneCos=Math.cos(I.angle),F.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),F.decay=I.decay,r.spot[v]=F;const V=I.shadow;if(I.map&&(r.spotLightMap[E]=I.map,E++,V.updateMatrices(I),I.castShadow&&M++),r.spotLightMatrix[v]=V.matrix,I.castShadow){const U=i.get(I);U.shadowBias=V.bias,U.shadowNormalBias=V.normalBias,U.shadowRadius=V.radius,U.shadowMapSize=V.mapSize,r.spotShadow[v]=U,r.spotShadowMap[v]=ee,A++}v++}else if(I.isRectAreaLight){const F=n.get(I);F.color.copy(R).multiplyScalar(H),F.halfWidth.set(I.width*.5,0,0),F.halfHeight.set(0,I.height*.5,0),r.rectArea[y]=F,y++}else if(I.isPointLight){const F=n.get(I);if(F.color.copy(I.color).multiplyScalar(I.intensity*C),F.distance=I.distance,F.decay=I.decay,I.castShadow){const V=I.shadow,U=i.get(I);U.shadowBias=V.bias,U.shadowNormalBias=V.normalBias,U.shadowRadius=V.radius,U.shadowMapSize=V.mapSize,U.shadowCameraNear=V.camera.near,U.shadowCameraFar=V.camera.far,r.pointShadow[g]=U,r.pointShadowMap[g]=ee,r.pointShadowMatrix[g]=I.shadow.matrix,S++}r.point[g]=F,g++}else if(I.isHemisphereLight){const F=n.get(I);F.skyColor.copy(I.color).multiplyScalar(H*C),F.groundColor.copy(I.groundColor).multiplyScalar(H*C),r.hemi[x]=F,x++}}y>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ct.LTC_FLOAT_1,r.rectAreaLTC2=ct.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=ct.LTC_HALF_1,r.rectAreaLTC2=ct.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=f,r.ambient[2]=p;const T=r.hash;(T.directionalLength!==m||T.pointLength!==g||T.spotLength!==v||T.rectAreaLength!==y||T.hemiLength!==x||T.numDirectionalShadows!==b||T.numPointShadows!==S||T.numSpotShadows!==A||T.numSpotMaps!==E)&&(r.directional.length=m,r.spot.length=v,r.rectArea.length=y,r.point.length=g,r.hemi.length=x,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=A+E-M,r.spotLightMap.length=E,r.numSpotLightShadowsWithMaps=M,T.directionalLength=m,T.pointLength=g,T.spotLength=v,T.rectAreaLength=y,T.hemiLength=x,T.numDirectionalShadows=b,T.numPointShadows=S,T.numSpotShadows=A,T.numSpotMaps=E,r.version=QVe++)}function c(h,u){let d=0,f=0,p=0,m=0,g=0;const v=u.matrixWorldInverse;for(let y=0,x=h.length;y<x;y++){const b=h[y];if(b.isDirectionalLight){const S=r.directional[d];S.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(v),d++}else if(b.isSpotLight){const S=r.spot[p];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),S.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(v),p++}else if(b.isRectAreaLight){const S=r.rectArea[m];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),a.identity(),o.copy(b.matrixWorld),o.premultiply(v),a.extractRotation(o),S.halfWidth.set(b.width*.5,0,0),S.halfHeight.set(0,b.height*.5,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),m++}else if(b.isPointLight){const S=r.point[f];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),f++}else if(b.isHemisphereLight){const S=r.hemi[g];S.direction.setFromMatrixPosition(b.matrixWorld),S.direction.transformDirection(v),g++}}}return{setup:l,setupView:c,state:r}}function MQ(t,e){const n=new t8e(t,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(u){i.push(u)}function a(u){r.push(u)}function l(u){n.setup(i,u)}function c(u){n.setupView(i,u)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function n8e(t,e){let n=new WeakMap;function i(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new MQ(t,e),n.set(s,[l])):o>=a.length?(l=new MQ(t,e),a.push(l)):l=a[o],l}function r(){n=new WeakMap}return{get:i,dispose:r}}class D9 extends gr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Lge,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class O9 extends gr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new q,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const i8e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,r8e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function s8e(t,e,n){let i=new kI;const r=new Me,s=new Me,o=new sn,a=new D9({depthPacking:Rge}),l=new O9,c={},h=n.maxTextureSize,u={[Bu]:Ca,[Ca]:Bu,[Ec]:Ec},d=new zc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Me},radius:{value:4}},vertexShader:i8e,fragmentShader:r8e}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new yt;p.setAttribute("position",new Nt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Lr(p,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=OI,this.render=function(b,S,A){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||b.length===0)return;const E=t.getRenderTarget(),M=t.getActiveCubeFace(),C=t.getActiveMipmapLevel(),T=t.state;T.setBlending(Ef),T.buffers.color.setClear(1,1,1,1),T.buffers.depth.setTest(!0),T.setScissorTest(!1);for(let D=0,L=b.length;D<L;D++){const I=b[D],R=I.shadow;if(R===void 0){console.warn("THREE.WebGLShadowMap:",I,"has no shadow.");continue}if(R.autoUpdate===!1&&R.needsUpdate===!1)continue;r.copy(R.mapSize);const H=R.getFrameExtents();if(r.multiply(H),s.copy(R.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/H.x),r.x=s.x*H.x,R.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/H.y),r.y=s.y*H.y,R.mapSize.y=s.y)),R.map===null){const ee=this.type!==P0?{minFilter:ur,magFilter:ur}:{};R.map=new Fu(r.x,r.y,ee),R.map.texture.name=I.name+".shadowMap",R.camera.updateProjectionMatrix()}t.setRenderTarget(R.map),t.clear();const Z=R.getViewportCount();for(let ee=0;ee<Z;ee++){const F=R.getViewport(ee);o.set(s.x*F.x,s.y*F.y,s.x*F.z,s.y*F.w),T.viewport(o),R.updateMatrices(I,ee),i=R.getFrustum(),x(S,A,R.camera,I,this.type)}R.isPointLightShadow!==!0&&this.type===P0&&v(R,A),R.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(E,M,C)};function v(b,S){const A=e.update(m);d.defines.VSM_SAMPLES!==b.blurSamples&&(d.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Fu(r.x,r.y)),d.uniforms.shadow_pass.value=b.map.texture,d.uniforms.resolution.value=b.mapSize,d.uniforms.radius.value=b.radius,t.setRenderTarget(b.mapPass),t.clear(),t.renderBufferDirect(S,null,A,d,m,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,t.setRenderTarget(b.map),t.clear(),t.renderBufferDirect(S,null,A,f,m,null)}function y(b,S,A,E,M,C){let T=null;const D=A.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(D!==void 0)T=D;else if(T=A.isPointLight===!0?l:a,t.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){const L=T.uuid,I=S.uuid;let R=c[L];R===void 0&&(R={},c[L]=R);let H=R[I];H===void 0&&(H=T.clone(),R[I]=H),T=H}return T.visible=S.visible,T.wireframe=S.wireframe,C===P0?T.side=S.shadowSide!==null?S.shadowSide:S.side:T.side=S.shadowSide!==null?S.shadowSide:u[S.side],T.alphaMap=S.alphaMap,T.alphaTest=S.alphaTest,T.map=S.map,T.clipShadows=S.clipShadows,T.clippingPlanes=S.clippingPlanes,T.clipIntersection=S.clipIntersection,T.displacementMap=S.displacementMap,T.displacementScale=S.displacementScale,T.displacementBias=S.displacementBias,T.wireframeLinewidth=S.wireframeLinewidth,T.linewidth=S.linewidth,A.isPointLight===!0&&T.isMeshDistanceMaterial===!0&&(T.referencePosition.setFromMatrixPosition(A.matrixWorld),T.nearDistance=E,T.farDistance=M),T}function x(b,S,A,E,M){if(b.visible===!1)return;if(b.layers.test(S.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&M===P0)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,b.matrixWorld);const D=e.update(b),L=b.material;if(Array.isArray(L)){const I=D.groups;for(let R=0,H=I.length;R<H;R++){const Z=I[R],ee=L[Z.materialIndex];if(ee&&ee.visible){const F=y(b,ee,E,A.near,A.far,M);t.renderBufferDirect(A,null,D,F,b,Z)}}}else if(L.visible){const I=y(b,L,E,A.near,A.far,M);t.renderBufferDirect(A,null,D,I,b,null)}}const T=b.children;for(let D=0,L=T.length;D<L;D++)x(T[D],S,A,E,M)}}function o8e(t,e,n){const i=n.isWebGL2;function r(){let ie=!1;const ve=new sn;let Ce=null;const Ne=new sn(0,0,0,0);return{setMask:function($e){Ce!==$e&&!ie&&(t.colorMask($e,$e,$e,$e),Ce=$e)},setLocked:function($e){ie=$e},setClear:function($e,Ct,rn,Cn,Ir){Ir===!0&&($e*=Cn,Ct*=Cn,rn*=Cn),ve.set($e,Ct,rn,Cn),Ne.equals(ve)===!1&&(t.clearColor($e,Ct,rn,Cn),Ne.copy(ve))},reset:function(){ie=!1,Ce=null,Ne.set(-1,0,0,0)}}}function s(){let ie=!1,ve=null,Ce=null,Ne=null;return{setTest:function($e){$e?te(2929):re(2929)},setMask:function($e){ve!==$e&&!ie&&(t.depthMask($e),ve=$e)},setFunc:function($e){if(Ce!==$e){switch($e){case ege:t.depthFunc(512);break;case tge:t.depthFunc(519);break;case nge:t.depthFunc(513);break;case KO:t.depthFunc(515);break;case ige:t.depthFunc(514);break;case rge:t.depthFunc(518);break;case sge:t.depthFunc(516);break;case oge:t.depthFunc(517);break;default:t.depthFunc(515)}Ce=$e}},setLocked:function($e){ie=$e},setClear:function($e){Ne!==$e&&(t.clearDepth($e),Ne=$e)},reset:function(){ie=!1,ve=null,Ce=null,Ne=null}}}function o(){let ie=!1,ve=null,Ce=null,Ne=null,$e=null,Ct=null,rn=null,Cn=null,Ir=null;return{setTest:function(en){ie||(en?te(2960):re(2960))},setMask:function(en){ve!==en&&!ie&&(t.stencilMask(en),ve=en)},setFunc:function(en,Ui,Gi){(Ce!==en||Ne!==Ui||$e!==Gi)&&(t.stencilFunc(en,Ui,Gi),Ce=en,Ne=Ui,$e=Gi)},setOp:function(en,Ui,Gi){(Ct!==en||rn!==Ui||Cn!==Gi)&&(t.stencilOp(en,Ui,Gi),Ct=en,rn=Ui,Cn=Gi)},setLocked:function(en){ie=en},setClear:function(en){Ir!==en&&(t.clearStencil(en),Ir=en)},reset:function(){ie=!1,ve=null,Ce=null,Ne=null,$e=null,Ct=null,rn=null,Cn=null,Ir=null}}}const a=new r,l=new s,c=new o,h=new WeakMap,u=new WeakMap;let d={},f={},p=new WeakMap,m=[],g=null,v=!1,y=null,x=null,b=null,S=null,A=null,E=null,M=null,C=!1,T=null,D=null,L=null,I=null,R=null;const H=t.getParameter(35661);let Z=!1,ee=0;const F=t.getParameter(7938);F.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(F)[1]),Z=ee>=1):F.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),Z=ee>=2);let V=null,U={};const j=t.getParameter(3088),z=t.getParameter(2978),Y=new sn().fromArray(j),J=new sn().fromArray(z);function K(ie,ve,Ce){const Ne=new Uint8Array(4),$e=t.createTexture();t.bindTexture(ie,$e),t.texParameteri(ie,10241,9728),t.texParameteri(ie,10240,9728);for(let Ct=0;Ct<Ce;Ct++)t.texImage2D(ve+Ct,0,6408,1,1,0,6408,5121,Ne);return $e}const X={};X[3553]=K(3553,3553,1),X[34067]=K(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),te(2929),l.setFunc(KO),Se(!1),Pe(q6),te(2884),ye(Ef);function te(ie){d[ie]!==!0&&(t.enable(ie),d[ie]=!0)}function re(ie){d[ie]!==!1&&(t.disable(ie),d[ie]=!1)}function se(ie,ve){return f[ie]!==ve?(t.bindFramebuffer(ie,ve),f[ie]=ve,i&&(ie===36009&&(f[36160]=ve),ie===36160&&(f[36009]=ve)),!0):!1}function ce(ie,ve){let Ce=m,Ne=!1;if(ie)if(Ce=p.get(ve),Ce===void 0&&(Ce=[],p.set(ve,Ce)),ie.isWebGLMultipleRenderTargets){const $e=ie.texture;if(Ce.length!==$e.length||Ce[0]!==36064){for(let Ct=0,rn=$e.length;Ct<rn;Ct++)Ce[Ct]=36064+Ct;Ce.length=$e.length,Ne=!0}}else Ce[0]!==36064&&(Ce[0]=36064,Ne=!0);else Ce[0]!==1029&&(Ce[0]=1029,Ne=!0);Ne&&(n.isWebGL2?t.drawBuffers(Ce):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ce))}function ge(ie){return g!==ie?(t.useProgram(ie),g=ie,!0):!1}const oe={[f0]:32774,[jme]:32778,[Vme]:32779};if(i)oe[J6]=32775,oe[Z6]=32776;else{const ie=e.get("EXT_blend_minmax");ie!==null&&(oe[J6]=ie.MIN_EXT,oe[Z6]=ie.MAX_EXT)}const ae={[Wme]:0,[$me]:1,[qme]:768,[y9]:770,[Qme]:776,[Jme]:774,[Yme]:772,[Xme]:769,[x9]:771,[Zme]:775,[Kme]:773};function ye(ie,ve,Ce,Ne,$e,Ct,rn,Cn){if(ie===Ef){v===!0&&(re(3042),v=!1);return}if(v===!1&&(te(3042),v=!0),ie!==Hme){if(ie!==y||Cn!==C){if((x!==f0||A!==f0)&&(t.blendEquation(32774),x=f0,A=f0),Cn)switch(ie){case j0:t.blendFuncSeparate(1,771,1,771);break;case X6:t.blendFunc(1,1);break;case Y6:t.blendFuncSeparate(0,769,0,1);break;case K6:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}else switch(ie){case j0:t.blendFuncSeparate(770,771,1,771);break;case X6:t.blendFunc(770,1);break;case Y6:t.blendFuncSeparate(0,769,0,1);break;case K6:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}b=null,S=null,E=null,M=null,y=ie,C=Cn}return}$e=$e||ve,Ct=Ct||Ce,rn=rn||Ne,(ve!==x||$e!==A)&&(t.blendEquationSeparate(oe[ve],oe[$e]),x=ve,A=$e),(Ce!==b||Ne!==S||Ct!==E||rn!==M)&&(t.blendFuncSeparate(ae[Ce],ae[Ne],ae[Ct],ae[rn]),b=Ce,S=Ne,E=Ct,M=rn),y=ie,C=!1}function we(ie,ve){ie.side===Ec?re(2884):te(2884);let Ce=ie.side===Ca;ve&&(Ce=!Ce),Se(Ce),ie.blending===j0&&ie.transparent===!1?ye(Ef):ye(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.premultipliedAlpha),l.setFunc(ie.depthFunc),l.setTest(ie.depthTest),l.setMask(ie.depthWrite),a.setMask(ie.colorWrite);const Ne=ie.stencilWrite;c.setTest(Ne),Ne&&(c.setMask(ie.stencilWriteMask),c.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),c.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),Ie(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits),ie.alphaToCoverage===!0?te(32926):re(32926)}function Se(ie){T!==ie&&(ie?t.frontFace(2304):t.frontFace(2305),T=ie)}function Pe(ie){ie!==zme?(te(2884),ie!==D&&(ie===q6?t.cullFace(1029):ie===Ume?t.cullFace(1028):t.cullFace(1032))):re(2884),D=ie}function Te(ie){ie!==L&&(Z&&t.lineWidth(ie),L=ie)}function Ie(ie,ve,Ce){ie?(te(32823),(I!==ve||R!==Ce)&&(t.polygonOffset(ve,Ce),I=ve,R=Ce)):re(32823)}function xe(ie){ie?te(3089):re(3089)}function Re(ie){ie===void 0&&(ie=33984+H-1),V!==ie&&(t.activeTexture(ie),V=ie)}function N(ie,ve,Ce){Ce===void 0&&(V===null?Ce=33984+H-1:Ce=V);let Ne=U[Ce];Ne===void 0&&(Ne={type:void 0,texture:void 0},U[Ce]=Ne),(Ne.type!==ie||Ne.texture!==ve)&&(V!==Ce&&(t.activeTexture(Ce),V=Ce),t.bindTexture(ie,ve||X[ie]),Ne.type=ie,Ne.texture=ve)}function B(){const ie=U[V];ie!==void 0&&ie.type!==void 0&&(t.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)}function le(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function _e(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ee(){try{t.texSubImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Fe(){try{t.texSubImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ze(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ue(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function be(){try{t.texStorage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Xe(){try{t.texStorage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ge(){try{t.texImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function We(){try{t.texImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Je(ie){Y.equals(ie)===!1&&(t.scissor(ie.x,ie.y,ie.z,ie.w),Y.copy(ie))}function Qe(ie){J.equals(ie)===!1&&(t.viewport(ie.x,ie.y,ie.z,ie.w),J.copy(ie))}function xt(ie,ve){let Ce=u.get(ve);Ce===void 0&&(Ce=new WeakMap,u.set(ve,Ce));let Ne=Ce.get(ie);Ne===void 0&&(Ne=t.getUniformBlockIndex(ve,ie.name),Ce.set(ie,Ne))}function Vt(ie,ve){const Ne=u.get(ve).get(ie);h.get(ve)!==Ne&&(t.uniformBlockBinding(ve,Ne,ie.__bindingPointIndex),h.set(ve,Ne))}function gn(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),i===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},V=null,U={},f={},p=new WeakMap,m=[],g=null,v=!1,y=null,x=null,b=null,S=null,A=null,E=null,M=null,C=!1,T=null,D=null,L=null,I=null,R=null,Y.set(0,0,t.canvas.width,t.canvas.height),J.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:te,disable:re,bindFramebuffer:se,drawBuffers:ce,useProgram:ge,setBlending:ye,setMaterial:we,setFlipSided:Se,setCullFace:Pe,setLineWidth:Te,setPolygonOffset:Ie,setScissorTest:xe,activeTexture:Re,bindTexture:N,unbindTexture:B,compressedTexImage2D:le,compressedTexImage3D:_e,texImage2D:Ge,texImage3D:We,updateUBOMapping:xt,uniformBlockBinding:Vt,texStorage2D:be,texStorage3D:Xe,texSubImage2D:Ee,texSubImage3D:Fe,compressedTexSubImage2D:Ze,compressedTexSubImage3D:Ue,scissor:Je,viewport:Qe,reset:gn}}function a8e(t,e,n,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,h=r.maxTextureSize,u=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(N,B){return v?new OffscreenCanvas(N,B):m2("canvas")}function x(N,B,le,_e){let Ee=1;if((N.width>_e||N.height>_e)&&(Ee=_e/Math.max(N.width,N.height)),Ee<1||B===!0)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap){const Fe=B?Fge:Math.floor,Ze=Fe(Ee*N.width),Ue=Fe(Ee*N.height);m===void 0&&(m=y(Ze,Ue));const be=le?y(Ze,Ue):m;return be.width=Ze,be.height=Ue,be.getContext("2d").drawImage(N,0,0,Ze,Ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+N.width+"x"+N.height+") to ("+Ze+"x"+Ue+")."),be}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+N.width+"x"+N.height+")."),N;return N}function b(N){return SG(N.width)&&SG(N.height)}function S(N){return a?!1:N.wrapS!==zs||N.wrapT!==zs||N.minFilter!==ur&&N.minFilter!==Ei}function A(N,B){return N.generateMipmaps&&B&&N.minFilter!==ur&&N.minFilter!==Ei}function E(N){t.generateMipmap(N)}function M(N,B,le,_e,Ee=!1){if(a===!1)return B;if(N!==null){if(t[N]!==void 0)return t[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let Fe=B;return B===6403&&(le===5126&&(Fe=33326),le===5131&&(Fe=33325),le===5121&&(Fe=33321)),B===33319&&(le===5126&&(Fe=33328),le===5131&&(Fe=33327),le===5121&&(Fe=33323)),B===6408&&(le===5126&&(Fe=34836),le===5131&&(Fe=34842),le===5121&&(Fe=_e===xn&&Ee===!1?35907:32856),le===32819&&(Fe=32854),le===32820&&(Fe=32855)),(Fe===33325||Fe===33326||Fe===33327||Fe===33328||Fe===34842||Fe===34836)&&e.get("EXT_color_buffer_float"),Fe}function C(N,B,le){return A(N,le)===!0||N.isFramebufferTexture&&N.minFilter!==ur&&N.minFilter!==Ei?Math.log2(Math.max(B.width,B.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?B.mipmaps.length:1}function T(N){return N===ur||N===Gb||N===V0?9728:9729}function D(N){const B=N.target;B.removeEventListener("dispose",D),I(B),B.isVideoTexture&&p.delete(B)}function L(N){const B=N.target;B.removeEventListener("dispose",L),H(B)}function I(N){const B=i.get(N);if(B.__webglInit===void 0)return;const le=N.source,_e=g.get(le);if(_e){const Ee=_e[B.__cacheKey];Ee.usedTimes--,Ee.usedTimes===0&&R(N),Object.keys(_e).length===0&&g.delete(le)}i.remove(N)}function R(N){const B=i.get(N);t.deleteTexture(B.__webglTexture);const le=N.source,_e=g.get(le);delete _e[B.__cacheKey],o.memory.textures--}function H(N){const B=N.texture,le=i.get(N),_e=i.get(B);if(_e.__webglTexture!==void 0&&(t.deleteTexture(_e.__webglTexture),o.memory.textures--),N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++)t.deleteFramebuffer(le.__webglFramebuffer[Ee]),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer[Ee]);else{if(t.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&t.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let Ee=0;Ee<le.__webglColorRenderbuffer.length;Ee++)le.__webglColorRenderbuffer[Ee]&&t.deleteRenderbuffer(le.__webglColorRenderbuffer[Ee]);le.__webglDepthRenderbuffer&&t.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(N.isWebGLMultipleRenderTargets)for(let Ee=0,Fe=B.length;Ee<Fe;Ee++){const Ze=i.get(B[Ee]);Ze.__webglTexture&&(t.deleteTexture(Ze.__webglTexture),o.memory.textures--),i.remove(B[Ee])}i.remove(B),i.remove(N)}let Z=0;function ee(){Z=0}function F(){const N=Z;return N>=l&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+l),Z+=1,N}function V(N){const B=[];return B.push(N.wrapS),B.push(N.wrapT),B.push(N.wrapR||0),B.push(N.magFilter),B.push(N.minFilter),B.push(N.anisotropy),B.push(N.internalFormat),B.push(N.format),B.push(N.type),B.push(N.generateMipmaps),B.push(N.premultiplyAlpha),B.push(N.flipY),B.push(N.unpackAlignment),B.push(N.encoding),B.join()}function U(N,B){const le=i.get(N);if(N.isVideoTexture&&xe(N),N.isRenderTargetTexture===!1&&N.version>0&&le.__version!==N.version){const _e=N.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{re(le,N,B);return}}n.bindTexture(3553,le.__webglTexture,33984+B)}function j(N,B){const le=i.get(N);if(N.version>0&&le.__version!==N.version){re(le,N,B);return}n.bindTexture(35866,le.__webglTexture,33984+B)}function z(N,B){const le=i.get(N);if(N.version>0&&le.__version!==N.version){re(le,N,B);return}n.bindTexture(32879,le.__webglTexture,33984+B)}function Y(N,B){const le=i.get(N);if(N.version>0&&le.__version!==N.version){se(le,N,B);return}n.bindTexture(34067,le.__webglTexture,33984+B)}const J={[ku]:10497,[zs]:33071,[mv]:33648},K={[ur]:9728,[Gb]:9984,[V0]:9986,[Ei]:9729,[_E]:9985,[Nc]:9987};function X(N,B,le){if(le?(t.texParameteri(N,10242,J[B.wrapS]),t.texParameteri(N,10243,J[B.wrapT]),(N===32879||N===35866)&&t.texParameteri(N,32882,J[B.wrapR]),t.texParameteri(N,10240,K[B.magFilter]),t.texParameteri(N,10241,K[B.minFilter])):(t.texParameteri(N,10242,33071),t.texParameteri(N,10243,33071),(N===32879||N===35866)&&t.texParameteri(N,32882,33071),(B.wrapS!==zs||B.wrapT!==zs)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(N,10240,T(B.magFilter)),t.texParameteri(N,10241,T(B.minFilter)),B.minFilter!==ur&&B.minFilter!==Ei&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const _e=e.get("EXT_texture_filter_anisotropic");if(B.magFilter===ur||B.minFilter!==V0&&B.minFilter!==Nc||B.type===Cc&&e.has("OES_texture_float_linear")===!1||a===!1&&B.type===vu&&e.has("OES_texture_half_float_linear")===!1)return;(B.anisotropy>1||i.get(B).__currentAnisotropy)&&(t.texParameterf(N,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,r.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy)}}function te(N,B){let le=!1;N.__webglInit===void 0&&(N.__webglInit=!0,B.addEventListener("dispose",D));const _e=B.source;let Ee=g.get(_e);Ee===void 0&&(Ee={},g.set(_e,Ee));const Fe=V(B);if(Fe!==N.__cacheKey){Ee[Fe]===void 0&&(Ee[Fe]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,le=!0),Ee[Fe].usedTimes++;const Ze=Ee[N.__cacheKey];Ze!==void 0&&(Ee[N.__cacheKey].usedTimes--,Ze.usedTimes===0&&R(B)),N.__cacheKey=Fe,N.__webglTexture=Ee[Fe].texture}return le}function re(N,B,le){let _e=3553;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(_e=35866),B.isData3DTexture&&(_e=32879);const Ee=te(N,B),Fe=B.source;n.bindTexture(_e,N.__webglTexture,33984+le);const Ze=i.get(Fe);if(Fe.version!==Ze.__version||Ee===!0){n.activeTexture(33984+le),t.pixelStorei(37440,B.flipY),t.pixelStorei(37441,B.premultiplyAlpha),t.pixelStorei(3317,B.unpackAlignment),t.pixelStorei(37443,0);const Ue=S(B)&&b(B.image)===!1;let be=x(B.image,Ue,!1,h);be=Re(B,be);const Xe=b(be)||a,Ge=s.convert(B.format,B.encoding);let We=s.convert(B.type),Je=M(B.internalFormat,Ge,We,B.encoding,B.isVideoTexture);X(_e,B,Xe);let Qe;const xt=B.mipmaps,Vt=a&&B.isVideoTexture!==!0,gn=Ze.__version===void 0||Ee===!0,ie=C(B,be,Xe);if(B.isDepthTexture)Je=6402,a?B.type===Cc?Je=36012:B.type===em?Je=33190:B.type===W0?Je=35056:Je=33189:B.type===Cc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===Bm&&Je===6402&&B.type!==w9&&B.type!==em&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=em,We=s.convert(B.type)),B.format===gv&&Je===6402&&(Je=34041,B.type!==W0&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=W0,We=s.convert(B.type))),gn&&(Vt?n.texStorage2D(3553,1,Je,be.width,be.height):n.texImage2D(3553,0,Je,be.width,be.height,0,Ge,We,null));else if(B.isDataTexture)if(xt.length>0&&Xe){Vt&&gn&&n.texStorage2D(3553,ie,Je,xt[0].width,xt[0].height);for(let ve=0,Ce=xt.length;ve<Ce;ve++)Qe=xt[ve],Vt?n.texSubImage2D(3553,ve,0,0,Qe.width,Qe.height,Ge,We,Qe.data):n.texImage2D(3553,ve,Je,Qe.width,Qe.height,0,Ge,We,Qe.data);B.generateMipmaps=!1}else Vt?(gn&&n.texStorage2D(3553,ie,Je,be.width,be.height),n.texSubImage2D(3553,0,0,0,be.width,be.height,Ge,We,be.data)):n.texImage2D(3553,0,Je,be.width,be.height,0,Ge,We,be.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){Vt&&gn&&n.texStorage3D(35866,ie,Je,xt[0].width,xt[0].height,be.depth);for(let ve=0,Ce=xt.length;ve<Ce;ve++)Qe=xt[ve],B.format!==fa?Ge!==null?Vt?n.compressedTexSubImage3D(35866,ve,0,0,0,Qe.width,Qe.height,be.depth,Ge,Qe.data,0,0):n.compressedTexImage3D(35866,ve,Je,Qe.width,Qe.height,be.depth,0,Qe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Vt?n.texSubImage3D(35866,ve,0,0,0,Qe.width,Qe.height,be.depth,Ge,We,Qe.data):n.texImage3D(35866,ve,Je,Qe.width,Qe.height,be.depth,0,Ge,We,Qe.data)}else{Vt&&gn&&n.texStorage2D(3553,ie,Je,xt[0].width,xt[0].height);for(let ve=0,Ce=xt.length;ve<Ce;ve++)Qe=xt[ve],B.format!==fa?Ge!==null?Vt?n.compressedTexSubImage2D(3553,ve,0,0,Qe.width,Qe.height,Ge,Qe.data):n.compressedTexImage2D(3553,ve,Je,Qe.width,Qe.height,0,Qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Vt?n.texSubImage2D(3553,ve,0,0,Qe.width,Qe.height,Ge,We,Qe.data):n.texImage2D(3553,ve,Je,Qe.width,Qe.height,0,Ge,We,Qe.data)}else if(B.isDataArrayTexture)Vt?(gn&&n.texStorage3D(35866,ie,Je,be.width,be.height,be.depth),n.texSubImage3D(35866,0,0,0,0,be.width,be.height,be.depth,Ge,We,be.data)):n.texImage3D(35866,0,Je,be.width,be.height,be.depth,0,Ge,We,be.data);else if(B.isData3DTexture)Vt?(gn&&n.texStorage3D(32879,ie,Je,be.width,be.height,be.depth),n.texSubImage3D(32879,0,0,0,0,be.width,be.height,be.depth,Ge,We,be.data)):n.texImage3D(32879,0,Je,be.width,be.height,be.depth,0,Ge,We,be.data);else if(B.isFramebufferTexture){if(gn)if(Vt)n.texStorage2D(3553,ie,Je,be.width,be.height);else{let ve=be.width,Ce=be.height;for(let Ne=0;Ne<ie;Ne++)n.texImage2D(3553,Ne,Je,ve,Ce,0,Ge,We,null),ve>>=1,Ce>>=1}}else if(xt.length>0&&Xe){Vt&&gn&&n.texStorage2D(3553,ie,Je,xt[0].width,xt[0].height);for(let ve=0,Ce=xt.length;ve<Ce;ve++)Qe=xt[ve],Vt?n.texSubImage2D(3553,ve,0,0,Ge,We,Qe):n.texImage2D(3553,ve,Je,Ge,We,Qe);B.generateMipmaps=!1}else Vt?(gn&&n.texStorage2D(3553,ie,Je,be.width,be.height),n.texSubImage2D(3553,0,0,0,Ge,We,be)):n.texImage2D(3553,0,Je,Ge,We,be);A(B,Xe)&&E(_e),Ze.__version=Fe.version,B.onUpdate&&B.onUpdate(B)}N.__version=B.version}function se(N,B,le){if(B.image.length!==6)return;const _e=te(N,B),Ee=B.source;n.bindTexture(34067,N.__webglTexture,33984+le);const Fe=i.get(Ee);if(Ee.version!==Fe.__version||_e===!0){n.activeTexture(33984+le),t.pixelStorei(37440,B.flipY),t.pixelStorei(37441,B.premultiplyAlpha),t.pixelStorei(3317,B.unpackAlignment),t.pixelStorei(37443,0);const Ze=B.isCompressedTexture||B.image[0].isCompressedTexture,Ue=B.image[0]&&B.image[0].isDataTexture,be=[];for(let ve=0;ve<6;ve++)!Ze&&!Ue?be[ve]=x(B.image[ve],!1,!0,c):be[ve]=Ue?B.image[ve].image:B.image[ve],be[ve]=Re(B,be[ve]);const Xe=be[0],Ge=b(Xe)||a,We=s.convert(B.format,B.encoding),Je=s.convert(B.type),Qe=M(B.internalFormat,We,Je,B.encoding),xt=a&&B.isVideoTexture!==!0,Vt=Fe.__version===void 0||_e===!0;let gn=C(B,Xe,Ge);X(34067,B,Ge);let ie;if(Ze){xt&&Vt&&n.texStorage2D(34067,gn,Qe,Xe.width,Xe.height);for(let ve=0;ve<6;ve++){ie=be[ve].mipmaps;for(let Ce=0;Ce<ie.length;Ce++){const Ne=ie[Ce];B.format!==fa?We!==null?xt?n.compressedTexSubImage2D(34069+ve,Ce,0,0,Ne.width,Ne.height,We,Ne.data):n.compressedTexImage2D(34069+ve,Ce,Qe,Ne.width,Ne.height,0,Ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):xt?n.texSubImage2D(34069+ve,Ce,0,0,Ne.width,Ne.height,We,Je,Ne.data):n.texImage2D(34069+ve,Ce,Qe,Ne.width,Ne.height,0,We,Je,Ne.data)}}}else{ie=B.mipmaps,xt&&Vt&&(ie.length>0&&gn++,n.texStorage2D(34067,gn,Qe,be[0].width,be[0].height));for(let ve=0;ve<6;ve++)if(Ue){xt?n.texSubImage2D(34069+ve,0,0,0,be[ve].width,be[ve].height,We,Je,be[ve].data):n.texImage2D(34069+ve,0,Qe,be[ve].width,be[ve].height,0,We,Je,be[ve].data);for(let Ce=0;Ce<ie.length;Ce++){const $e=ie[Ce].image[ve].image;xt?n.texSubImage2D(34069+ve,Ce+1,0,0,$e.width,$e.height,We,Je,$e.data):n.texImage2D(34069+ve,Ce+1,Qe,$e.width,$e.height,0,We,Je,$e.data)}}else{xt?n.texSubImage2D(34069+ve,0,0,0,We,Je,be[ve]):n.texImage2D(34069+ve,0,Qe,We,Je,be[ve]);for(let Ce=0;Ce<ie.length;Ce++){const Ne=ie[Ce];xt?n.texSubImage2D(34069+ve,Ce+1,0,0,We,Je,Ne.image[ve]):n.texImage2D(34069+ve,Ce+1,Qe,We,Je,Ne.image[ve])}}}A(B,Ge)&&E(34067),Fe.__version=Ee.version,B.onUpdate&&B.onUpdate(B)}N.__version=B.version}function ce(N,B,le,_e,Ee){const Fe=s.convert(le.format,le.encoding),Ze=s.convert(le.type),Ue=M(le.internalFormat,Fe,Ze,le.encoding);i.get(B).__hasExternalTextures||(Ee===32879||Ee===35866?n.texImage3D(Ee,0,Ue,B.width,B.height,B.depth,0,Fe,Ze,null):n.texImage2D(Ee,0,Ue,B.width,B.height,0,Fe,Ze,null)),n.bindFramebuffer(36160,N),Ie(B)?d.framebufferTexture2DMultisampleEXT(36160,_e,Ee,i.get(le).__webglTexture,0,Te(B)):(Ee===3553||Ee>=34069&&Ee<=34074)&&t.framebufferTexture2D(36160,_e,Ee,i.get(le).__webglTexture,0),n.bindFramebuffer(36160,null)}function ge(N,B,le){if(t.bindRenderbuffer(36161,N),B.depthBuffer&&!B.stencilBuffer){let _e=33189;if(le||Ie(B)){const Ee=B.depthTexture;Ee&&Ee.isDepthTexture&&(Ee.type===Cc?_e=36012:Ee.type===em&&(_e=33190));const Fe=Te(B);Ie(B)?d.renderbufferStorageMultisampleEXT(36161,Fe,_e,B.width,B.height):t.renderbufferStorageMultisample(36161,Fe,_e,B.width,B.height)}else t.renderbufferStorage(36161,_e,B.width,B.height);t.framebufferRenderbuffer(36160,36096,36161,N)}else if(B.depthBuffer&&B.stencilBuffer){const _e=Te(B);le&&Ie(B)===!1?t.renderbufferStorageMultisample(36161,_e,35056,B.width,B.height):Ie(B)?d.renderbufferStorageMultisampleEXT(36161,_e,35056,B.width,B.height):t.renderbufferStorage(36161,34041,B.width,B.height),t.framebufferRenderbuffer(36160,33306,36161,N)}else{const _e=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let Ee=0;Ee<_e.length;Ee++){const Fe=_e[Ee],Ze=s.convert(Fe.format,Fe.encoding),Ue=s.convert(Fe.type),be=M(Fe.internalFormat,Ze,Ue,Fe.encoding),Xe=Te(B);le&&Ie(B)===!1?t.renderbufferStorageMultisample(36161,Xe,be,B.width,B.height):Ie(B)?d.renderbufferStorageMultisampleEXT(36161,Xe,be,B.width,B.height):t.renderbufferStorage(36161,be,B.width,B.height)}}t.bindRenderbuffer(36161,null)}function oe(N,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,N),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),U(B.depthTexture,0);const _e=i.get(B.depthTexture).__webglTexture,Ee=Te(B);if(B.depthTexture.format===Bm)Ie(B)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,_e,0,Ee):t.framebufferTexture2D(36160,36096,3553,_e,0);else if(B.depthTexture.format===gv)Ie(B)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,_e,0,Ee):t.framebufferTexture2D(36160,33306,3553,_e,0);else throw new Error("Unknown depthTexture format")}function ae(N){const B=i.get(N),le=N.isWebGLCubeRenderTarget===!0;if(N.depthTexture&&!B.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");oe(B.__webglFramebuffer,N)}else if(le){B.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)n.bindFramebuffer(36160,B.__webglFramebuffer[_e]),B.__webglDepthbuffer[_e]=t.createRenderbuffer(),ge(B.__webglDepthbuffer[_e],N,!1)}else n.bindFramebuffer(36160,B.__webglFramebuffer),B.__webglDepthbuffer=t.createRenderbuffer(),ge(B.__webglDepthbuffer,N,!1);n.bindFramebuffer(36160,null)}function ye(N,B,le){const _e=i.get(N);B!==void 0&&ce(_e.__webglFramebuffer,N,N.texture,36064,3553),le!==void 0&&ae(N)}function we(N){const B=N.texture,le=i.get(N),_e=i.get(B);N.addEventListener("dispose",L),N.isWebGLMultipleRenderTargets!==!0&&(_e.__webglTexture===void 0&&(_e.__webglTexture=t.createTexture()),_e.__version=B.version,o.memory.textures++);const Ee=N.isWebGLCubeRenderTarget===!0,Fe=N.isWebGLMultipleRenderTargets===!0,Ze=b(N)||a;if(Ee){le.__webglFramebuffer=[];for(let Ue=0;Ue<6;Ue++)le.__webglFramebuffer[Ue]=t.createFramebuffer()}else{if(le.__webglFramebuffer=t.createFramebuffer(),Fe)if(r.drawBuffers){const Ue=N.texture;for(let be=0,Xe=Ue.length;be<Xe;be++){const Ge=i.get(Ue[be]);Ge.__webglTexture===void 0&&(Ge.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&N.samples>0&&Ie(N)===!1){const Ue=Fe?B:[B];le.__webglMultisampledFramebuffer=t.createFramebuffer(),le.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,le.__webglMultisampledFramebuffer);for(let be=0;be<Ue.length;be++){const Xe=Ue[be];le.__webglColorRenderbuffer[be]=t.createRenderbuffer(),t.bindRenderbuffer(36161,le.__webglColorRenderbuffer[be]);const Ge=s.convert(Xe.format,Xe.encoding),We=s.convert(Xe.type),Je=M(Xe.internalFormat,Ge,We,Xe.encoding,N.isXRRenderTarget===!0),Qe=Te(N);t.renderbufferStorageMultisample(36161,Qe,Je,N.width,N.height),t.framebufferRenderbuffer(36160,36064+be,36161,le.__webglColorRenderbuffer[be])}t.bindRenderbuffer(36161,null),N.depthBuffer&&(le.__webglDepthRenderbuffer=t.createRenderbuffer(),ge(le.__webglDepthRenderbuffer,N,!0)),n.bindFramebuffer(36160,null)}}if(Ee){n.bindTexture(34067,_e.__webglTexture),X(34067,B,Ze);for(let Ue=0;Ue<6;Ue++)ce(le.__webglFramebuffer[Ue],N,B,36064,34069+Ue);A(B,Ze)&&E(34067),n.unbindTexture()}else if(Fe){const Ue=N.texture;for(let be=0,Xe=Ue.length;be<Xe;be++){const Ge=Ue[be],We=i.get(Ge);n.bindTexture(3553,We.__webglTexture),X(3553,Ge,Ze),ce(le.__webglFramebuffer,N,Ge,36064+be,3553),A(Ge,Ze)&&E(3553)}n.unbindTexture()}else{let Ue=3553;(N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(a?Ue=N.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Ue,_e.__webglTexture),X(Ue,B,Ze),ce(le.__webglFramebuffer,N,B,36064,Ue),A(B,Ze)&&E(Ue),n.unbindTexture()}N.depthBuffer&&ae(N)}function Se(N){const B=b(N)||a,le=N.isWebGLMultipleRenderTargets===!0?N.texture:[N.texture];for(let _e=0,Ee=le.length;_e<Ee;_e++){const Fe=le[_e];if(A(Fe,B)){const Ze=N.isWebGLCubeRenderTarget?34067:3553,Ue=i.get(Fe).__webglTexture;n.bindTexture(Ze,Ue),E(Ze),n.unbindTexture()}}}function Pe(N){if(a&&N.samples>0&&Ie(N)===!1){const B=N.isWebGLMultipleRenderTargets?N.texture:[N.texture],le=N.width,_e=N.height;let Ee=16384;const Fe=[],Ze=N.stencilBuffer?33306:36096,Ue=i.get(N),be=N.isWebGLMultipleRenderTargets===!0;if(be)for(let Xe=0;Xe<B.length;Xe++)n.bindFramebuffer(36160,Ue.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Xe,36161,null),n.bindFramebuffer(36160,Ue.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Xe,3553,null,0);n.bindFramebuffer(36008,Ue.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,Ue.__webglFramebuffer);for(let Xe=0;Xe<B.length;Xe++){Fe.push(36064+Xe),N.depthBuffer&&Fe.push(Ze);const Ge=Ue.__ignoreDepthValues!==void 0?Ue.__ignoreDepthValues:!1;if(Ge===!1&&(N.depthBuffer&&(Ee|=256),N.stencilBuffer&&(Ee|=1024)),be&&t.framebufferRenderbuffer(36008,36064,36161,Ue.__webglColorRenderbuffer[Xe]),Ge===!0&&(t.invalidateFramebuffer(36008,[Ze]),t.invalidateFramebuffer(36009,[Ze])),be){const We=i.get(B[Xe]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,We,0)}t.blitFramebuffer(0,0,le,_e,0,0,le,_e,Ee,9728),f&&t.invalidateFramebuffer(36008,Fe)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),be)for(let Xe=0;Xe<B.length;Xe++){n.bindFramebuffer(36160,Ue.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Xe,36161,Ue.__webglColorRenderbuffer[Xe]);const Ge=i.get(B[Xe]).__webglTexture;n.bindFramebuffer(36160,Ue.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Xe,3553,Ge,0)}n.bindFramebuffer(36009,Ue.__webglMultisampledFramebuffer)}}function Te(N){return Math.min(u,N.samples)}function Ie(N){const B=i.get(N);return a&&N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function xe(N){const B=o.render.frame;p.get(N)!==B&&(p.set(N,B),N.update())}function Re(N,B){const le=N.encoding,_e=N.format,Ee=N.type;return N.isCompressedTexture===!0||N.isVideoTexture===!0||N.format===JO||le!==Ra&&(le===xn?a===!1?e.has("EXT_sRGB")===!0&&_e===fa?(N.format=JO,N.minFilter=Ei,N.generateMipmaps=!1):B=M9.sRGBToLinear(B):(_e!==fa||Ee!==Nf)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",le)),B}this.allocateTextureUnit=F,this.resetTextureUnits=ee,this.setTexture2D=U,this.setTexture2DArray=j,this.setTexture3D=z,this.setTextureCube=Y,this.rebindTextures=ye,this.setupRenderTarget=we,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=Pe,this.setupDepthRenderbuffer=ae,this.setupFrameBufferTexture=ce,this.useMultisampledRTT=Ie}function Xge(t,e,n){const i=n.isWebGL2;function r(s,o=null){let a;if(s===Nf)return 5121;if(s===gge)return 32819;if(s===vge)return 32820;if(s===fge)return 5120;if(s===pge)return 5122;if(s===w9)return 5123;if(s===mge)return 5124;if(s===em)return 5125;if(s===Cc)return 5126;if(s===vu)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===yge)return 6406;if(s===fa)return 6408;if(s===xge)return 6409;if(s===bge)return 6410;if(s===Bm)return 6402;if(s===gv)return 34041;if(s===JO)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===wge)return 6403;if(s===_ge)return 36244;if(s===Sge)return 33319;if(s===Age)return 33320;if(s===Mge)return 36249;if(s===CD||s===TD||s===PD||s===DD)if(o===xn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===CD)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===TD)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===PD)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===DD)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===CD)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===TD)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===PD)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===DD)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Q6||s===eG||s===tG||s===nG)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===Q6)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===eG)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===tG)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===nG)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Ege)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===iG||s===rG)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===iG)return o===xn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===rG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===sG||s===oG||s===aG||s===lG||s===cG||s===uG||s===hG||s===dG||s===fG||s===pG||s===mG||s===gG||s===vG||s===yG)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===sG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===oG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===aG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===lG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===cG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===uG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===hG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===dG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===fG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===pG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===mG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===gG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===vG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===yG)return o===xn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===OD)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===OD)return o===xn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===Cge||s===xG||s===bG||s===wG)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===OD)return a.COMPRESSED_RED_RGTC1_EXT;if(s===xG)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===bG)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===wG)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===W0?i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:r}}class Yge extends Vr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ba extends wn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const l8e={type:"move"};class kN{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ba,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ba,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ba,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const m of e.hand.values()){const g=n.getJointPose(m,i),v=this._getHandJoint(c,m);g!==null&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=g.radius),v.visible=g!==null}const h=c.joints["index-finger-tip"],u=c.joints["thumb-tip"],d=h.position.distanceTo(u.position),f=.02,p=.005;c.inputState.pinching&&d>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(l8e)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new ba;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class Kge extends bi{constructor(e,n,i,r,s,o,a,l,c,h){if(h=h!==void 0?h:Bm,h!==Bm&&h!==gv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===Bm&&(i=em),i===void 0&&h===gv&&(i=W0),super(null,r,s,o,a,l,h,i,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:ur,this.minFilter=l!==void 0?l:ur,this.flipY=!1,this.generateMipmaps=!1}}class c8e extends dd{constructor(e,n){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,h=null,u=null,d=null,f=null,p=null;const m=n.getContextAttributes();let g=null,v=null;const y=[],x=[],b=new Set,S=new Map,A=new Vr;A.layers.enable(1),A.viewport=new sn;const E=new Vr;E.layers.enable(2),E.viewport=new sn;const M=[A,E],C=new Yge;C.layers.enable(1),C.layers.enable(2);let T=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let Y=y[z];return Y===void 0&&(Y=new kN,y[z]=Y),Y.getTargetRaySpace()},this.getControllerGrip=function(z){let Y=y[z];return Y===void 0&&(Y=new kN,y[z]=Y),Y.getGripSpace()},this.getHand=function(z){let Y=y[z];return Y===void 0&&(Y=new kN,y[z]=Y),Y.getHandSpace()};function L(z){const Y=x.indexOf(z.inputSource);if(Y===-1)return;const J=y[Y];J!==void 0&&J.dispatchEvent({type:z.type,data:z.inputSource})}function I(){r.removeEventListener("select",L),r.removeEventListener("selectstart",L),r.removeEventListener("selectend",L),r.removeEventListener("squeeze",L),r.removeEventListener("squeezestart",L),r.removeEventListener("squeezeend",L),r.removeEventListener("end",I),r.removeEventListener("inputsourceschange",R);for(let z=0;z<y.length;z++){const Y=x[z];Y!==null&&(x[z]=null,y[z].disconnect(Y))}T=null,D=null,e.setRenderTarget(g),f=null,d=null,u=null,r=null,v=null,j.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(z){s=z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){a=z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(z){c=z},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(z){if(r=z,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",L),r.addEventListener("selectstart",L),r.addEventListener("selectend",L),r.addEventListener("squeeze",L),r.addEventListener("squeezestart",L),r.addEventListener("squeezeend",L),r.addEventListener("end",I),r.addEventListener("inputsourceschange",R),m.xrCompatible!==!0&&await n.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Y={antialias:r.renderState.layers===void 0?m.antialias:!0,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,n,Y),r.updateRenderState({baseLayer:f}),v=new Fu(f.framebufferWidth,f.framebufferHeight,{format:fa,type:Nf,encoding:e.outputEncoding,stencilBuffer:m.stencil})}else{let Y=null,J=null,K=null;m.depth&&(K=m.stencil?35056:33190,Y=m.stencil?gv:Bm,J=m.stencil?W0:em);const X={colorFormat:32856,depthFormat:K,scaleFactor:s};u=new XRWebGLBinding(r,n),d=u.createProjectionLayer(X),r.updateRenderState({layers:[d]}),v=new Fu(d.textureWidth,d.textureHeight,{format:fa,type:Nf,depthTexture:new Kge(d.textureWidth,d.textureHeight,J,void 0,void 0,void 0,void 0,void 0,void 0,Y),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0});const te=e.properties.get(v);te.__ignoreDepthValues=d.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),j.setContext(r),j.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function R(z){for(let Y=0;Y<z.removed.length;Y++){const J=z.removed[Y],K=x.indexOf(J);K>=0&&(x[K]=null,y[K].disconnect(J))}for(let Y=0;Y<z.added.length;Y++){const J=z.added[Y];let K=x.indexOf(J);if(K===-1){for(let te=0;te<y.length;te++)if(te>=x.length){x.push(J),K=te;break}else if(x[te]===null){x[te]=J,K=te;break}if(K===-1)break}const X=y[K];X&&X.connect(J)}}const H=new q,Z=new q;function ee(z,Y,J){H.setFromMatrixPosition(Y.matrixWorld),Z.setFromMatrixPosition(J.matrixWorld);const K=H.distanceTo(Z),X=Y.projectionMatrix.elements,te=J.projectionMatrix.elements,re=X[14]/(X[10]-1),se=X[14]/(X[10]+1),ce=(X[9]+1)/X[5],ge=(X[9]-1)/X[5],oe=(X[8]-1)/X[0],ae=(te[8]+1)/te[0],ye=re*oe,we=re*ae,Se=K/(-oe+ae),Pe=Se*-oe;Y.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(Pe),z.translateZ(Se),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert();const Te=re+Se,Ie=se+Se,xe=ye-Pe,Re=we+(K-Pe),N=ce*se/Ie*Te,B=ge*se/Ie*Te;z.projectionMatrix.makePerspective(xe,Re,N,B,Te,Ie)}function F(z,Y){Y===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(Y.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.updateCamera=function(z){if(r===null)return;C.near=E.near=A.near=z.near,C.far=E.far=A.far=z.far,(T!==C.near||D!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),T=C.near,D=C.far);const Y=z.parent,J=C.cameras;F(C,Y);for(let X=0;X<J.length;X++)F(J[X],Y);C.matrixWorld.decompose(C.position,C.quaternion,C.scale),z.matrix.copy(C.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale);const K=z.children;for(let X=0,te=K.length;X<te;X++)K[X].updateMatrixWorld(!0);J.length===2?ee(C,A,E):C.projectionMatrix.copy(A.projectionMatrix)},this.getCamera=function(){return C},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(z){l=z,d!==null&&(d.fixedFoveation=z),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=z)},this.getPlanes=function(){return b};let V=null;function U(z,Y){if(h=Y.getViewerPose(c||o),p=Y,h!==null){const J=h.views;f!==null&&(e.setRenderTargetFramebuffer(v,f.framebuffer),e.setRenderTarget(v));let K=!1;J.length!==C.cameras.length&&(C.cameras.length=0,K=!0);for(let X=0;X<J.length;X++){const te=J[X];let re=null;if(f!==null)re=f.getViewport(te);else{const ce=u.getViewSubImage(d,te);re=ce.viewport,X===0&&(e.setRenderTargetTextures(v,ce.colorTexture,d.ignoreDepthValues?void 0:ce.depthStencilTexture),e.setRenderTarget(v))}let se=M[X];se===void 0&&(se=new Vr,se.layers.enable(X),se.viewport=new sn,M[X]=se),se.matrix.fromArray(te.transform.matrix),se.projectionMatrix.fromArray(te.projectionMatrix),se.viewport.set(re.x,re.y,re.width,re.height),X===0&&C.matrix.copy(se.matrix),K===!0&&C.cameras.push(se)}}for(let J=0;J<y.length;J++){const K=x[J],X=y[J];K!==null&&X!==void 0&&X.update(K,Y,c||o)}if(V&&V(z,Y),Y.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:Y.detectedPlanes});let J=null;for(const K of b)Y.detectedPlanes.has(K)||(J===null&&(J=[]),J.push(K));if(J!==null)for(const K of J)b.delete(K),S.delete(K),i.dispatchEvent({type:"planeremoved",data:K});for(const K of Y.detectedPlanes)if(!b.has(K))b.add(K),S.set(K,Y.lastChangedTime),i.dispatchEvent({type:"planeadded",data:K});else{const X=S.get(K);K.lastChangedTime>X&&(S.set(K,K.lastChangedTime),i.dispatchEvent({type:"planechanged",data:K}))}}p=null}const j=new jge;j.setAnimationLoop(U),this.setAnimationLoop=function(z){V=z},this.dispose=function(){}}}function u8e(t,e){function n(m,g){g.color.getRGB(m.fogColor.value,Gge(t)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function i(m,g,v,y,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(m,g):g.isMeshToonMaterial?(r(m,g),h(m,g)):g.isMeshPhongMaterial?(r(m,g),c(m,g)):g.isMeshStandardMaterial?(r(m,g),u(m,g),g.isMeshPhysicalMaterial&&d(m,g,x)):g.isMeshMatcapMaterial?(r(m,g),f(m,g)):g.isMeshDepthMaterial?r(m,g):g.isMeshDistanceMaterial?(r(m,g),p(m,g)):g.isMeshNormalMaterial?r(m,g):g.isLineBasicMaterial?(s(m,g),g.isLineDashedMaterial&&o(m,g)):g.isPointsMaterial?a(m,g,v,y):g.isSpriteMaterial?l(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function r(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===Ca&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===Ca&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const v=e.get(g).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const b=t.useLegacyLights===!0?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*b}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix));let x;g.aoMap?x=g.aoMap:g.lightMap&&(x=g.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uv2Transform.value.copy(x.matrix))}function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}function o(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function a(m,g,v,y){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=y*.5,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let x;g.map?x=g.map:g.alphaMap&&(x=g.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix))}function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))}function c(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function h(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function u(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function d(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Ca&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}function f(m,g){g.matcap&&(m.matcap.value=g.matcap)}function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function h8e(t,e,n,i){let r={},s={},o=[];const a=n.isWebGL2?t.getParameter(35375):0;function l(y,x){const b=x.program;i.uniformBlockBinding(y,b)}function c(y,x){let b=r[y.id];b===void 0&&(p(y),b=h(y),r[y.id]=b,y.addEventListener("dispose",g));const S=x.program;i.updateUBOMapping(y,S);const A=e.render.frame;s[y.id]!==A&&(d(y),s[y.id]=A)}function h(y){const x=u();y.__bindingPointIndex=x;const b=t.createBuffer(),S=y.__size,A=y.usage;return t.bindBuffer(35345,b),t.bufferData(35345,S,A),t.bindBuffer(35345,null),t.bindBufferBase(35345,x,b),b}function u(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){const x=r[y.id],b=y.uniforms,S=y.__cache;t.bindBuffer(35345,x);for(let A=0,E=b.length;A<E;A++){const M=b[A];if(f(M,A,S)===!0){const C=M.__offset,T=Array.isArray(M.value)?M.value:[M.value];let D=0;for(let L=0;L<T.length;L++){const I=T[L],R=m(I);typeof I=="number"?(M.__data[0]=I,t.bufferSubData(35345,C+D,M.__data)):I.isMatrix3?(M.__data[0]=I.elements[0],M.__data[1]=I.elements[1],M.__data[2]=I.elements[2],M.__data[3]=I.elements[0],M.__data[4]=I.elements[3],M.__data[5]=I.elements[4],M.__data[6]=I.elements[5],M.__data[7]=I.elements[0],M.__data[8]=I.elements[6],M.__data[9]=I.elements[7],M.__data[10]=I.elements[8],M.__data[11]=I.elements[0]):(I.toArray(M.__data,D),D+=R.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,C,M.__data)}}t.bindBuffer(35345,null)}function f(y,x,b){const S=y.value;if(b[x]===void 0){if(typeof S=="number")b[x]=S;else{const A=Array.isArray(S)?S:[S],E=[];for(let M=0;M<A.length;M++)E.push(A[M].clone());b[x]=E}return!0}else if(typeof S=="number"){if(b[x]!==S)return b[x]=S,!0}else{const A=Array.isArray(b[x])?b[x]:[b[x]],E=Array.isArray(S)?S:[S];for(let M=0;M<A.length;M++){const C=A[M];if(C.equals(E[M])===!1)return C.copy(E[M]),!0}}return!1}function p(y){const x=y.uniforms;let b=0;const S=16;let A=0;for(let E=0,M=x.length;E<M;E++){const C=x[E],T={boundary:0,storage:0},D=Array.isArray(C.value)?C.value:[C.value];for(let L=0,I=D.length;L<I;L++){const R=D[L],H=m(R);T.boundary+=H.boundary,T.storage+=H.storage}if(C.__data=new Float32Array(T.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=b,E>0){A=b%S;const L=S-A;A!==0&&L-T.boundary<0&&(b+=S-A,C.__offset=b)}b+=T.storage}return A=b%S,A>0&&(b+=S-A),y.__size=b,y.__cache={},this}function m(y){const x={boundary:0,storage:0};return typeof y=="number"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function g(y){const x=y.target;x.removeEventListener("dispose",g);const b=o.indexOf(x.__bindingPointIndex);o.splice(b,1),t.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function v(){for(const y in r)t.deleteBuffer(r[y]);o=[],r={},s={}}return{bind:l,update:c,dispose:v}}function d8e(){const t=m2("canvas");return t.style.display="block",t}function NI(t={}){this.isWebGLRenderer=!0;const e=t.canvas!==void 0?t.canvas:d8e(),n=t.context!==void 0?t.context:null,i=t.depth!==void 0?t.depth:!0,r=t.stencil!==void 0?t.stencil:!0,s=t.antialias!==void 0?t.antialias:!1,o=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,a=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,l=t.powerPreference!==void 0?t.powerPreference:"default",c=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let h;n!==null?h=n.getContextAttributes().alpha:h=t.alpha!==void 0?t.alpha:!1;let u=null,d=null;const f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ra,this.useLegacyLights=!0,this.toneMapping=Tu,this.toneMappingExposure=1;const m=this;let g=!1,v=0,y=0,x=null,b=-1,S=null;const A=new sn,E=new sn;let M=null,C=e.width,T=e.height,D=1,L=null,I=null;const R=new sn(0,0,C,T),H=new sn(0,0,C,T);let Z=!1;const ee=new kI;let F=!1,V=!1,U=null;const j=new at,z=new q,Y={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function J(){return x===null?D:1}let K=n;function X(fe,Q){for(let pe=0;pe<fe.length;pe++){const he=fe[pe],de=e.getContext(he,Q);if(de!==null)return de}return null}try{const fe={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${DI}`),e.addEventListener("webglcontextlost",We,!1),e.addEventListener("webglcontextrestored",Je,!1),e.addEventListener("webglcontextcreationerror",Qe,!1),K===null){const Q=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&Q.shift(),K=X(Q,fe),K===null)throw X(Q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}K.getShaderPrecisionFormat===void 0&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(fe){throw console.error("THREE.WebGLRenderer: "+fe.message),fe}let te,re,se,ce,ge,oe,ae,ye,we,Se,Pe,Te,Ie,xe,Re,N,B,le,_e,Ee,Fe,Ze,Ue,be;function Xe(){te=new Tje(K),re=new _je(K,te,t),te.init(re),Ze=new Xge(K,te,re),se=new o8e(K,te,re),ce=new Oje,ge=new XVe,oe=new a8e(K,te,se,ge,re,Ze,ce),ae=new Aje(m),ye=new Cje(m),we=new U6e(K,re),Ue=new bje(K,te,we,re),Se=new Pje(K,we,ce,Ue),Pe=new Bje(K,Se,we,ce),_e=new Ije(K,re,oe),N=new Sje(ge),Te=new qVe(m,ae,ye,te,re,Ue,N),Ie=new u8e(m,ge),xe=new KVe,Re=new n8e(te,re),le=new xje(m,ae,ye,se,Pe,h,o),B=new s8e(m,Pe,re),be=new h8e(K,ce,re,se),Ee=new wje(K,te,ce,re),Fe=new Dje(K,te,ce,re),ce.programs=Te.programs,m.capabilities=re,m.extensions=te,m.properties=ge,m.renderLists=xe,m.shadowMap=B,m.state=se,m.info=ce}Xe();const Ge=new c8e(m,K);this.xr=Ge,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const fe=te.get("WEBGL_lose_context");fe&&fe.loseContext()},this.forceContextRestore=function(){const fe=te.get("WEBGL_lose_context");fe&&fe.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(fe){fe!==void 0&&(D=fe,this.setSize(C,T,!1))},this.getSize=function(fe){return fe.set(C,T)},this.setSize=function(fe,Q,pe=!0){if(Ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=fe,T=Q,e.width=Math.floor(fe*D),e.height=Math.floor(Q*D),pe===!0&&(e.style.width=fe+"px",e.style.height=Q+"px"),this.setViewport(0,0,fe,Q)},this.getDrawingBufferSize=function(fe){return fe.set(C*D,T*D).floor()},this.setDrawingBufferSize=function(fe,Q,pe){C=fe,T=Q,D=pe,e.width=Math.floor(fe*pe),e.height=Math.floor(Q*pe),this.setViewport(0,0,fe,Q)},this.getCurrentViewport=function(fe){return fe.copy(A)},this.getViewport=function(fe){return fe.copy(R)},this.setViewport=function(fe,Q,pe,he){fe.isVector4?R.set(fe.x,fe.y,fe.z,fe.w):R.set(fe,Q,pe,he),se.viewport(A.copy(R).multiplyScalar(D).floor())},this.getScissor=function(fe){return fe.copy(H)},this.setScissor=function(fe,Q,pe,he){fe.isVector4?H.set(fe.x,fe.y,fe.z,fe.w):H.set(fe,Q,pe,he),se.scissor(E.copy(H).multiplyScalar(D).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(fe){se.setScissorTest(Z=fe)},this.setOpaqueSort=function(fe){L=fe},this.setTransparentSort=function(fe){I=fe},this.getClearColor=function(fe){return fe.copy(le.getClearColor())},this.setClearColor=function(){le.setClearColor.apply(le,arguments)},this.getClearAlpha=function(){return le.getClearAlpha()},this.setClearAlpha=function(){le.setClearAlpha.apply(le,arguments)},this.clear=function(fe=!0,Q=!0,pe=!0){let he=0;fe&&(he|=16384),Q&&(he|=256),pe&&(he|=1024),K.clear(he)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",We,!1),e.removeEventListener("webglcontextrestored",Je,!1),e.removeEventListener("webglcontextcreationerror",Qe,!1),xe.dispose(),Re.dispose(),ge.dispose(),ae.dispose(),ye.dispose(),Pe.dispose(),Ue.dispose(),be.dispose(),Te.dispose(),Ge.dispose(),Ge.removeEventListener("sessionstart",Ce),Ge.removeEventListener("sessionend",Ne),U&&(U.dispose(),U=null),$e.stop()};function We(fe){fe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Je(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const fe=ce.autoReset,Q=B.enabled,pe=B.autoUpdate,he=B.needsUpdate,de=B.type;Xe(),ce.autoReset=fe,B.enabled=Q,B.autoUpdate=pe,B.needsUpdate=he,B.type=de}function Qe(fe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",fe.statusMessage)}function xt(fe){const Q=fe.target;Q.removeEventListener("dispose",xt),Vt(Q)}function Vt(fe){gn(fe),ge.remove(fe)}function gn(fe){const Q=ge.get(fe).programs;Q!==void 0&&(Q.forEach(function(pe){Te.releaseProgram(pe)}),fe.isShaderMaterial&&Te.releaseShaderCache(fe))}this.renderBufferDirect=function(fe,Q,pe,he,de,Le){Q===null&&(Q=Y);const tt=de.isMesh&&de.matrixWorld.determinant()<0,ht=hy(fe,Q,pe,he,de);se.setMaterial(he,tt);let pt=pe.index,bt=1;he.wireframe===!0&&(pt=Se.getWireframeAttribute(pe),bt=2);const Tt=pe.drawRange,St=pe.attributes.position;let zt=Tt.start*bt,qn=(Tt.start+Tt.count)*bt;Le!==null&&(zt=Math.max(zt,Le.start*bt),qn=Math.min(qn,(Le.start+Le.count)*bt)),pt!==null?(zt=Math.max(zt,0),qn=Math.min(qn,pt.count)):St!=null&&(zt=Math.max(zt,0),qn=Math.min(qn,St.count));const Hi=qn-zt;if(Hi<0||Hi===1/0)return;Ue.setup(de,he,ht,pe,pt);let us,ni=Ee;if(pt!==null&&(us=we.get(pt),ni=Fe,ni.setIndex(us)),de.isMesh)he.wireframe===!0?(se.setLineWidth(he.wireframeLinewidth*J()),ni.setMode(1)):ni.setMode(4);else if(de.isLine){let It=he.linewidth;It===void 0&&(It=1),se.setLineWidth(It*J()),de.isLineSegments?ni.setMode(1):de.isLineLoop?ni.setMode(2):ni.setMode(3)}else de.isPoints?ni.setMode(0):de.isSprite&&ni.setMode(4);if(de.isInstancedMesh)ni.renderInstances(zt,Hi,de.count);else if(pe.isInstancedBufferGeometry){const It=pe._maxInstanceCount!==void 0?pe._maxInstanceCount:1/0,fn=Math.min(pe.instanceCount,It);ni.renderInstances(zt,Hi,fn)}else ni.render(zt,Hi)},this.compile=function(fe,Q){function pe(he,de,Le){he.transparent===!0&&he.side===Ec&&he.forceSinglePass===!1?(he.side=Ca,he.needsUpdate=!0,Ui(he,de,Le),he.side=Bu,he.needsUpdate=!0,Ui(he,de,Le),he.side=Ec):Ui(he,de,Le)}d=Re.get(fe),d.init(),p.push(d),fe.traverseVisible(function(he){he.isLight&&he.layers.test(Q.layers)&&(d.pushLight(he),he.castShadow&&d.pushShadow(he))}),d.setupLights(m.useLegacyLights),fe.traverse(function(he){const de=he.material;if(de)if(Array.isArray(de))for(let Le=0;Le<de.length;Le++){const tt=de[Le];pe(tt,fe,he)}else pe(de,fe,he)}),p.pop(),d=null};let ie=null;function ve(fe){ie&&ie(fe)}function Ce(){$e.stop()}function Ne(){$e.start()}const $e=new jge;$e.setAnimationLoop(ve),typeof self<"u"&&$e.setContext(self),this.setAnimationLoop=function(fe){ie=fe,Ge.setAnimationLoop(fe),fe===null?$e.stop():$e.start()},Ge.addEventListener("sessionstart",Ce),Ge.addEventListener("sessionend",Ne),this.render=function(fe,Q){if(Q!==void 0&&Q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;fe.matrixWorldAutoUpdate===!0&&fe.updateMatrixWorld(),Q.parent===null&&Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),Ge.enabled===!0&&Ge.isPresenting===!0&&(Ge.cameraAutoUpdate===!0&&Ge.updateCamera(Q),Q=Ge.getCamera()),fe.isScene===!0&&fe.onBeforeRender(m,fe,Q,x),d=Re.get(fe,p.length),d.init(),p.push(d),j.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),ee.setFromProjectionMatrix(j),V=this.localClippingEnabled,F=N.init(this.clippingPlanes,V),u=xe.get(fe,f.length),u.init(),f.push(u),Ct(fe,Q,0,m.sortObjects),u.finish(),m.sortObjects===!0&&u.sort(L,I),F===!0&&N.beginShadows();const pe=d.state.shadowsArray;if(B.render(pe,fe,Q),F===!0&&N.endShadows(),this.info.autoReset===!0&&this.info.reset(),le.render(u,fe),d.setupLights(m.useLegacyLights),Q.isArrayCamera){const he=Q.cameras;for(let de=0,Le=he.length;de<Le;de++){const tt=he[de];rn(u,fe,tt,tt.viewport)}}else rn(u,fe,Q);x!==null&&(oe.updateMultisampleRenderTarget(x),oe.updateRenderTargetMipmap(x)),fe.isScene===!0&&fe.onAfterRender(m,fe,Q),Ue.resetDefaultState(),b=-1,S=null,p.pop(),p.length>0?d=p[p.length-1]:d=null,f.pop(),f.length>0?u=f[f.length-1]:u=null};function Ct(fe,Q,pe,he){if(fe.visible===!1)return;if(fe.layers.test(Q.layers)){if(fe.isGroup)pe=fe.renderOrder;else if(fe.isLOD)fe.autoUpdate===!0&&fe.update(Q);else if(fe.isLight)d.pushLight(fe),fe.castShadow&&d.pushShadow(fe);else if(fe.isSprite){if(!fe.frustumCulled||ee.intersectsSprite(fe)){he&&z.setFromMatrixPosition(fe.matrixWorld).applyMatrix4(j);const tt=Pe.update(fe),ht=fe.material;ht.visible&&u.push(fe,tt,ht,pe,z.z,null)}}else if((fe.isMesh||fe.isLine||fe.isPoints)&&(fe.isSkinnedMesh&&fe.skeleton.frame!==ce.render.frame&&(fe.skeleton.update(),fe.skeleton.frame=ce.render.frame),!fe.frustumCulled||ee.intersectsObject(fe))){he&&z.setFromMatrixPosition(fe.matrixWorld).applyMatrix4(j);const tt=Pe.update(fe),ht=fe.material;if(Array.isArray(ht)){const pt=tt.groups;for(let bt=0,Tt=pt.length;bt<Tt;bt++){const St=pt[bt],zt=ht[St.materialIndex];zt&&zt.visible&&u.push(fe,tt,zt,pe,z.z,St)}}else ht.visible&&u.push(fe,tt,ht,pe,z.z,null)}}const Le=fe.children;for(let tt=0,ht=Le.length;tt<ht;tt++)Ct(Le[tt],Q,pe,he)}function rn(fe,Q,pe,he){const de=fe.opaque,Le=fe.transmissive,tt=fe.transparent;d.setupLightsView(pe),F===!0&&N.setGlobalState(m.clippingPlanes,pe),Le.length>0&&Cn(de,Q,pe),he&&se.viewport(A.copy(he)),de.length>0&&Ir(de,Q,pe),Le.length>0&&Ir(Le,Q,pe),tt.length>0&&Ir(tt,Q,pe),se.buffers.depth.setTest(!0),se.buffers.depth.setMask(!0),se.buffers.color.setMask(!0),se.setPolygonOffset(!1)}function Cn(fe,Q,pe){const he=re.isWebGL2;U===null&&(U=new Fu(1024,1024,{generateMipmaps:!0,type:te.has("EXT_color_buffer_half_float")?vu:Nf,minFilter:Nc,samples:he&&s===!0?4:0}));const de=m.getRenderTarget();m.setRenderTarget(U),m.clear();const Le=m.toneMapping;m.toneMapping=Tu,Ir(fe,Q,pe),m.toneMapping=Le,oe.updateMultisampleRenderTarget(U),oe.updateRenderTargetMipmap(U),m.setRenderTarget(de)}function Ir(fe,Q,pe){const he=Q.isScene===!0?Q.overrideMaterial:null;for(let de=0,Le=fe.length;de<Le;de++){const tt=fe[de],ht=tt.object,pt=tt.geometry,bt=he===null?tt.material:he,Tt=tt.group;ht.layers.test(pe.layers)&&en(ht,Q,pe,pt,bt,Tt)}}function en(fe,Q,pe,he,de,Le){fe.onBeforeRender(m,Q,pe,he,de,Le),fe.modelViewMatrix.multiplyMatrices(pe.matrixWorldInverse,fe.matrixWorld),fe.normalMatrix.getNormalMatrix(fe.modelViewMatrix),de.onBeforeRender(m,Q,pe,he,fe,Le),de.transparent===!0&&de.side===Ec&&de.forceSinglePass===!1?(de.side=Ca,de.needsUpdate=!0,m.renderBufferDirect(pe,Q,he,de,fe,Le),de.side=Bu,de.needsUpdate=!0,m.renderBufferDirect(pe,Q,he,de,fe,Le),de.side=Ec):m.renderBufferDirect(pe,Q,he,de,fe,Le),fe.onAfterRender(m,Q,pe,he,de,Le)}function Ui(fe,Q,pe){Q.isScene!==!0&&(Q=Y);const he=ge.get(fe),de=d.state.lights,Le=d.state.shadowsArray,tt=de.state.version,ht=Te.getParameters(fe,de.state,Le,Q,pe),pt=Te.getProgramCacheKey(ht);let bt=he.programs;he.environment=fe.isMeshStandardMaterial?Q.environment:null,he.fog=Q.fog,he.envMap=(fe.isMeshStandardMaterial?ye:ae).get(fe.envMap||he.environment),bt===void 0&&(fe.addEventListener("dispose",xt),bt=new Map,he.programs=bt);let Tt=bt.get(pt);if(Tt!==void 0){if(he.currentProgram===Tt&&he.lightsStateVersion===tt)return Gi(fe,ht),Tt}else ht.uniforms=Te.getUniforms(fe),fe.onBuild(pe,ht,m),fe.onBeforeCompile(ht,m),Tt=Te.acquireProgram(ht,pt),bt.set(pt,Tt),he.uniforms=ht.uniforms;const St=he.uniforms;(!fe.isShaderMaterial&&!fe.isRawShaderMaterial||fe.clipping===!0)&&(St.clippingPlanes=N.uniform),Gi(fe,ht),he.needsLights=dy(fe),he.lightsStateVersion=tt,he.needsLights&&(St.ambientLightColor.value=de.state.ambient,St.lightProbe.value=de.state.probe,St.directionalLights.value=de.state.directional,St.directionalLightShadows.value=de.state.directionalShadow,St.spotLights.value=de.state.spot,St.spotLightShadows.value=de.state.spotShadow,St.rectAreaLights.value=de.state.rectArea,St.ltc_1.value=de.state.rectAreaLTC1,St.ltc_2.value=de.state.rectAreaLTC2,St.pointLights.value=de.state.point,St.pointLightShadows.value=de.state.pointShadow,St.hemisphereLights.value=de.state.hemi,St.directionalShadowMap.value=de.state.directionalShadowMap,St.directionalShadowMatrix.value=de.state.directionalShadowMatrix,St.spotShadowMap.value=de.state.spotShadowMap,St.spotLightMatrix.value=de.state.spotLightMatrix,St.spotLightMap.value=de.state.spotLightMap,St.pointShadowMap.value=de.state.pointShadowMap,St.pointShadowMatrix.value=de.state.pointShadowMatrix);const zt=Tt.getUniforms(),qn=ID.seqWithValue(zt.seq,St);return he.currentProgram=Tt,he.uniformsList=qn,Tt}function Gi(fe,Q){const pe=ge.get(fe);pe.outputEncoding=Q.outputEncoding,pe.instancing=Q.instancing,pe.skinning=Q.skinning,pe.morphTargets=Q.morphTargets,pe.morphNormals=Q.morphNormals,pe.morphColors=Q.morphColors,pe.morphTargetsCount=Q.morphTargetsCount,pe.numClippingPlanes=Q.numClippingPlanes,pe.numIntersection=Q.numClipIntersection,pe.vertexAlphas=Q.vertexAlphas,pe.vertexTangents=Q.vertexTangents,pe.toneMapping=Q.toneMapping}function hy(fe,Q,pe,he,de){Q.isScene!==!0&&(Q=Y),oe.resetTextureUnits();const Le=Q.fog,tt=he.isMeshStandardMaterial?Q.environment:null,ht=x===null?m.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:Ra,pt=(he.isMeshStandardMaterial?ye:ae).get(he.envMap||tt),bt=he.vertexColors===!0&&!!pe.attributes.color&&pe.attributes.color.itemSize===4,Tt=!!he.normalMap&&!!pe.attributes.tangent,St=!!pe.morphAttributes.position,zt=!!pe.morphAttributes.normal,qn=!!pe.morphAttributes.color,Hi=he.toneMapped?m.toneMapping:Tu,us=pe.morphAttributes.position||pe.morphAttributes.normal||pe.morphAttributes.color,ni=us!==void 0?us.length:0,It=ge.get(he),fn=d.state.lights;if(F===!0&&(V===!0||fe!==S)){const Oi=fe===S&&he.id===b;N.setState(he,fe,Oi)}let Di=!1;he.version===It.__version?(It.needsLights&&It.lightsStateVersion!==fn.state.version||It.outputEncoding!==ht||de.isInstancedMesh&&It.instancing===!1||!de.isInstancedMesh&&It.instancing===!0||de.isSkinnedMesh&&It.skinning===!1||!de.isSkinnedMesh&&It.skinning===!0||It.envMap!==pt||he.fog===!0&&It.fog!==Le||It.numClippingPlanes!==void 0&&(It.numClippingPlanes!==N.numPlanes||It.numIntersection!==N.numIntersection)||It.vertexAlphas!==bt||It.vertexTangents!==Tt||It.morphTargets!==St||It.morphNormals!==zt||It.morphColors!==qn||It.toneMapping!==Hi||re.isWebGL2===!0&&It.morphTargetsCount!==ni)&&(Di=!0):(Di=!0,It.__version=he.version);let ko=It.currentProgram;Di===!0&&(ko=Ui(he,Q,de));let Ll=!1,Rl=!1,lo=!1;const gi=ko.getUniforms(),tn=It.uniforms;if(se.useProgram(ko.program)&&(Ll=!0,Rl=!0,lo=!0),he.id!==b&&(b=he.id,Rl=!0),Ll||S!==fe){if(gi.setValue(K,"projectionMatrix",fe.projectionMatrix),re.logarithmicDepthBuffer&&gi.setValue(K,"logDepthBufFC",2/(Math.log(fe.far+1)/Math.LN2)),S!==fe&&(S=fe,Rl=!0,lo=!0),he.isShaderMaterial||he.isMeshPhongMaterial||he.isMeshToonMaterial||he.isMeshStandardMaterial||he.envMap){const Oi=gi.map.cameraPosition;Oi!==void 0&&Oi.setValue(K,z.setFromMatrixPosition(fe.matrixWorld))}(he.isMeshPhongMaterial||he.isMeshToonMaterial||he.isMeshLambertMaterial||he.isMeshBasicMaterial||he.isMeshStandardMaterial||he.isShaderMaterial)&&gi.setValue(K,"isOrthographic",fe.isOrthographicCamera===!0),(he.isMeshPhongMaterial||he.isMeshToonMaterial||he.isMeshLambertMaterial||he.isMeshBasicMaterial||he.isMeshStandardMaterial||he.isShaderMaterial||he.isShadowMaterial||de.isSkinnedMesh)&&gi.setValue(K,"viewMatrix",fe.matrixWorldInverse)}if(de.isSkinnedMesh){gi.setOptional(K,de,"bindMatrix"),gi.setOptional(K,de,"bindMatrixInverse");const Oi=de.skeleton;Oi&&(re.floatVertexTextures?(Oi.boneTexture===null&&Oi.computeBoneTexture(),gi.setValue(K,"boneTexture",Oi.boneTexture,oe),gi.setValue(K,"boneTextureSize",Oi.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Pn=pe.morphAttributes;if((Pn.position!==void 0||Pn.normal!==void 0||Pn.color!==void 0&&re.isWebGL2===!0)&&_e.update(de,pe,ko),(Rl||It.receiveShadow!==de.receiveShadow)&&(It.receiveShadow=de.receiveShadow,gi.setValue(K,"receiveShadow",de.receiveShadow)),he.isMeshGouraudMaterial&&he.envMap!==null&&(tn.envMap.value=pt,tn.flipEnvMap.value=pt.isCubeTexture&&pt.isRenderTargetTexture===!1?-1:1),Rl&&(gi.setValue(K,"toneMappingExposure",m.toneMappingExposure),It.needsLights&&h_(tn,lo),Le&&he.fog===!0&&Ie.refreshFogUniforms(tn,Le),Ie.refreshMaterialUniforms(tn,he,D,T,U),ID.upload(K,It.uniformsList,tn,oe)),he.isShaderMaterial&&he.uniformsNeedUpdate===!0&&(ID.upload(K,It.uniformsList,tn,oe),he.uniformsNeedUpdate=!1),he.isSpriteMaterial&&gi.setValue(K,"center",de.center),gi.setValue(K,"modelViewMatrix",de.modelViewMatrix),gi.setValue(K,"normalMatrix",de.normalMatrix),gi.setValue(K,"modelMatrix",de.matrixWorld),he.isShaderMaterial||he.isRawShaderMaterial){const Oi=he.uniformsGroups;for(let Gn=0,Kr=Oi.length;Gn<Kr;Gn++)if(re.isWebGL2){const Il=Oi[Gn];be.update(Il,ko),be.bind(Il,ko)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ko}function h_(fe,Q){fe.ambientLightColor.needsUpdate=Q,fe.lightProbe.needsUpdate=Q,fe.directionalLights.needsUpdate=Q,fe.directionalLightShadows.needsUpdate=Q,fe.pointLights.needsUpdate=Q,fe.pointLightShadows.needsUpdate=Q,fe.spotLights.needsUpdate=Q,fe.spotLightShadows.needsUpdate=Q,fe.rectAreaLights.needsUpdate=Q,fe.hemisphereLights.needsUpdate=Q}function dy(fe){return fe.isMeshLambertMaterial||fe.isMeshToonMaterial||fe.isMeshPhongMaterial||fe.isMeshStandardMaterial||fe.isShadowMaterial||fe.isShaderMaterial&&fe.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(fe,Q,pe){ge.get(fe.texture).__webglTexture=Q,ge.get(fe.depthTexture).__webglTexture=pe;const he=ge.get(fe);he.__hasExternalTextures=!0,he.__hasExternalTextures&&(he.__autoAllocateDepthBuffer=pe===void 0,he.__autoAllocateDepthBuffer||te.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),he.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(fe,Q){const pe=ge.get(fe);pe.__webglFramebuffer=Q,pe.__useDefaultFramebuffer=Q===void 0},this.setRenderTarget=function(fe,Q=0,pe=0){x=fe,v=Q,y=pe;let he=!0,de=null,Le=!1,tt=!1;if(fe){const pt=ge.get(fe);pt.__useDefaultFramebuffer!==void 0?(se.bindFramebuffer(36160,null),he=!1):pt.__webglFramebuffer===void 0?oe.setupRenderTarget(fe):pt.__hasExternalTextures&&oe.rebindTextures(fe,ge.get(fe.texture).__webglTexture,ge.get(fe.depthTexture).__webglTexture);const bt=fe.texture;(bt.isData3DTexture||bt.isDataArrayTexture||bt.isCompressedArrayTexture)&&(tt=!0);const Tt=ge.get(fe).__webglFramebuffer;fe.isWebGLCubeRenderTarget?(de=Tt[Q],Le=!0):re.isWebGL2&&fe.samples>0&&oe.useMultisampledRTT(fe)===!1?de=ge.get(fe).__webglMultisampledFramebuffer:de=Tt,A.copy(fe.viewport),E.copy(fe.scissor),M=fe.scissorTest}else A.copy(R).multiplyScalar(D).floor(),E.copy(H).multiplyScalar(D).floor(),M=Z;if(se.bindFramebuffer(36160,de)&&re.drawBuffers&&he&&se.drawBuffers(fe,de),se.viewport(A),se.scissor(E),se.setScissorTest(M),Le){const pt=ge.get(fe.texture);K.framebufferTexture2D(36160,36064,34069+Q,pt.__webglTexture,pe)}else if(tt){const pt=ge.get(fe.texture),bt=Q||0;K.framebufferTextureLayer(36160,36064,pt.__webglTexture,pe||0,bt)}b=-1},this.readRenderTargetPixels=function(fe,Q,pe,he,de,Le,tt){if(!(fe&&fe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ht=ge.get(fe).__webglFramebuffer;if(fe.isWebGLCubeRenderTarget&&tt!==void 0&&(ht=ht[tt]),ht){se.bindFramebuffer(36160,ht);try{const pt=fe.texture,bt=pt.format,Tt=pt.type;if(bt!==fa&&Ze.convert(bt)!==K.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const St=Tt===vu&&(te.has("EXT_color_buffer_half_float")||re.isWebGL2&&te.has("EXT_color_buffer_float"));if(Tt!==Nf&&Ze.convert(Tt)!==K.getParameter(35738)&&!(Tt===Cc&&(re.isWebGL2||te.has("OES_texture_float")||te.has("WEBGL_color_buffer_float")))&&!St){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Q>=0&&Q<=fe.width-he&&pe>=0&&pe<=fe.height-de&&K.readPixels(Q,pe,he,de,Ze.convert(bt),Ze.convert(Tt),Le)}finally{const pt=x!==null?ge.get(x).__webglFramebuffer:null;se.bindFramebuffer(36160,pt)}}},this.copyFramebufferToTexture=function(fe,Q,pe=0){const he=Math.pow(2,-pe),de=Math.floor(Q.image.width*he),Le=Math.floor(Q.image.height*he);oe.setTexture2D(Q,0),K.copyTexSubImage2D(3553,pe,0,0,fe.x,fe.y,de,Le),se.unbindTexture()},this.copyTextureToTexture=function(fe,Q,pe,he=0){const de=Q.image.width,Le=Q.image.height,tt=Ze.convert(pe.format),ht=Ze.convert(pe.type);oe.setTexture2D(pe,0),K.pixelStorei(37440,pe.flipY),K.pixelStorei(37441,pe.premultiplyAlpha),K.pixelStorei(3317,pe.unpackAlignment),Q.isDataTexture?K.texSubImage2D(3553,he,fe.x,fe.y,de,Le,tt,ht,Q.image.data):Q.isCompressedTexture?K.compressedTexSubImage2D(3553,he,fe.x,fe.y,Q.mipmaps[0].width,Q.mipmaps[0].height,tt,Q.mipmaps[0].data):K.texSubImage2D(3553,he,fe.x,fe.y,tt,ht,Q.image),he===0&&pe.generateMipmaps&&K.generateMipmap(3553),se.unbindTexture()},this.copyTextureToTexture3D=function(fe,Q,pe,he,de=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Le=fe.max.x-fe.min.x+1,tt=fe.max.y-fe.min.y+1,ht=fe.max.z-fe.min.z+1,pt=Ze.convert(he.format),bt=Ze.convert(he.type);let Tt;if(he.isData3DTexture)oe.setTexture3D(he,0),Tt=32879;else if(he.isDataArrayTexture)oe.setTexture2DArray(he,0),Tt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(37440,he.flipY),K.pixelStorei(37441,he.premultiplyAlpha),K.pixelStorei(3317,he.unpackAlignment);const St=K.getParameter(3314),zt=K.getParameter(32878),qn=K.getParameter(3316),Hi=K.getParameter(3315),us=K.getParameter(32877),ni=pe.isCompressedTexture?pe.mipmaps[0]:pe.image;K.pixelStorei(3314,ni.width),K.pixelStorei(32878,ni.height),K.pixelStorei(3316,fe.min.x),K.pixelStorei(3315,fe.min.y),K.pixelStorei(32877,fe.min.z),pe.isDataTexture||pe.isData3DTexture?K.texSubImage3D(Tt,de,Q.x,Q.y,Q.z,Le,tt,ht,pt,bt,ni.data):pe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),K.compressedTexSubImage3D(Tt,de,Q.x,Q.y,Q.z,Le,tt,ht,pt,ni.data)):K.texSubImage3D(Tt,de,Q.x,Q.y,Q.z,Le,tt,ht,pt,bt,ni),K.pixelStorei(3314,St),K.pixelStorei(32878,zt),K.pixelStorei(3316,qn),K.pixelStorei(3315,Hi),K.pixelStorei(32877,us),de===0&&he.generateMipmaps&&K.generateMipmap(Tt),se.unbindTexture()},this.initTexture=function(fe){fe.isCubeTexture?oe.setTextureCube(fe,0):fe.isData3DTexture?oe.setTexture3D(fe,0):fe.isDataArrayTexture||fe.isCompressedArrayTexture?oe.setTexture2DArray(fe,0):oe.setTexture2D(fe,0),se.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,se.reset(),Ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(NI.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(t){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}}});class Jge extends NI{}Jge.prototype.isWebGL1Renderer=!0;class zI{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new nt(e),this.density=n}clone(){return new zI(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class SE{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new nt(e),this.near=n,this.far=i}clone(){return new SE(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Vb extends wn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Mw{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=f2,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=gl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const zo=new q;class Gf{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)zo.fromBufferAttribute(this,n),zo.applyMatrix4(e),this.setXYZ(n,zo.x,zo.y,zo.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)zo.fromBufferAttribute(this,n),zo.applyNormalMatrix(e),this.setXYZ(n,zo.x,zo.y,zo.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)zo.fromBufferAttribute(this,n),zo.transformDirection(e),this.setXYZ(n,zo.x,zo.y,zo.z);return this}setX(e,n){return this.normalized&&(n=Ai(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Ai(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Ai(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Ai(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=gf(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=gf(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=gf(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=gf(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ai(n,this.array),i=Ai(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ai(n,this.array),i=Ai(i,this.array),r=Ai(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ai(n,this.array),i=Ai(i,this.array),r=Ai(r,this.array),s=Ai(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new Nt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Gf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class L9 extends gr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new nt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Wy;const Q_=new q,$y=new q,qy=new q,Xy=new Me,eS=new Me,Zge=new at,eP=new q,tS=new q,tP=new q,EQ=new Me,FN=new Me,CQ=new Me;class Qge extends wn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Wy===void 0){Wy=new yt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Mw(n,5);Wy.setIndex([0,1,2,0,2,3]),Wy.setAttribute("position",new Gf(i,3,0,!1)),Wy.setAttribute("uv",new Gf(i,2,3,!1))}this.geometry=Wy,this.material=e!==void 0?e:new L9,this.center=new Me(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),$y.setFromMatrixScale(this.matrixWorld),Zge.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),qy.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&$y.multiplyScalar(-qy.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;nP(eP.set(-.5,-.5,0),qy,o,$y,r,s),nP(tS.set(.5,-.5,0),qy,o,$y,r,s),nP(tP.set(.5,.5,0),qy,o,$y,r,s),EQ.set(0,0),FN.set(1,0),CQ.set(1,1);let a=e.ray.intersectTriangle(eP,tS,tP,!1,Q_);if(a===null&&(nP(tS.set(-.5,.5,0),qy,o,$y,r,s),FN.set(0,1),a=e.ray.intersectTriangle(eP,tP,tS,!1,Q_),a===null))return;const l=e.ray.origin.distanceTo(Q_);l<e.near||l>e.far||n.push({distance:l,point:Q_.clone(),uv:Zo.getUV(Q_,eP,tS,tP,EQ,FN,CQ,new Me),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function nP(t,e,n,i,r,s){Xy.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(eS.x=s*Xy.x-r*Xy.y,eS.y=r*Xy.x+s*Xy.y):eS.copy(Xy),t.copy(e),t.x+=eS.x,t.y+=eS.y,t.applyMatrix4(Zge)}const iP=new q,TQ=new q;class e0e extends wn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let s;for(s=0;s<r.length&&!(n<r[s].distance);s++);return r.splice(s,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),e<s)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){iP.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(iP);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){iP.setFromMatrixPosition(e.matrixWorld),TQ.setFromMatrixPosition(this.matrixWorld);const i=iP.distanceTo(TQ)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),i>=o)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const PQ=new q,DQ=new sn,OQ=new sn,f8e=new q,LQ=new at;class UI extends Lr{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new at,this.bindMatrixInverse=new at}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new sn,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const i=this.skeleton,r=this.geometry;DQ.fromBufferAttribute(r.attributes.skinIndex,e),OQ.fromBufferAttribute(r.attributes.skinWeight,e),PQ.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=OQ.getComponent(s);if(o!==0){const a=DQ.getComponent(s);LQ.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),n.addScaledVector(f8e.copy(PQ).applyMatrix4(LQ),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class AE extends wn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Zx extends bi{constructor(e=null,n=1,i=1,r,s,o,a,l,c=ur,h=ur,u,d){super(null,o,a,l,c,h,r,s,u,d),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const RQ=new at,p8e=new at;class Ew{constructor(e=[],n=[]){this.uuid=gl(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new at)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new at;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:p8e;RQ.multiplyMatrices(a,n[s]),RQ.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Ew(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=kge(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new Zx(n,e,e,fa,Cc);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new AE),this.bones.push(o),this.boneInverses.push(new at().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const o=n[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Wb extends Nt{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const IQ=new at,BQ=new at,rP=[],m8e=new at,nS=new Lr;class R9 extends Lr{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Wb(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,m8e)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const i=this.matrixWorld,r=this.count;if(nS.geometry=this.geometry,nS.material=this.material,nS.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,IQ),BQ.multiplyMatrices(i,IQ),nS.matrixWorld=BQ,nS.raycast(e,rP);for(let o=0,a=rP.length;o<a;o++){const l=rP[o];l.instanceId=s,l.object=this,n.push(l)}rP.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Wb(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class $s extends gr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new nt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const kQ=new q,FQ=new q,NQ=new at,NN=new sg,sP=new Oo;class td extends wn{constructor(e=new yt,n=new $s){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,s=n.count;r<s;r++)kQ.fromBufferAttribute(n,r-1),FQ.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=kQ.distanceTo(FQ);e.setAttribute("lineDistance",new it(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),sP.copy(i.boundingSphere),sP.applyMatrix4(r),sP.radius+=s,e.ray.intersectsSphere(sP)===!1)return;NQ.copy(r).invert(),NN.copy(e.ray).applyMatrix4(NQ);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new q,h=new q,u=new q,d=new q,f=this.isLineSegments?2:1,p=i.index,g=i.attributes.position;if(p!==null){const v=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let x=v,b=y-1;x<b;x+=f){const S=p.getX(x),A=p.getX(x+1);if(c.fromBufferAttribute(g,S),h.fromBufferAttribute(g,A),NN.distanceSqToSegment(c,h,d,u)>l)continue;d.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(d);M<e.near||M>e.far||n.push({distance:M,point:u.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,o.start),y=Math.min(g.count,o.start+o.count);for(let x=v,b=y-1;x<b;x+=f){if(c.fromBufferAttribute(g,x),h.fromBufferAttribute(g,x+1),NN.distanceSqToSegment(c,h,d,u)>l)continue;d.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(d);A<e.near||A>e.far||n.push({distance:A,point:u.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const zQ=new q,UQ=new q;class Tl extends td{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,s=n.count;r<s;r+=2)zQ.fromBufferAttribute(n,r),UQ.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+zQ.distanceTo(UQ);e.setAttribute("lineDistance",new it(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class GI extends td{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class ME extends gr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new nt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const GQ=new at,EG=new sg,oP=new Oo,aP=new q;class HI extends wn{constructor(e=new yt,n=new ME){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),oP.copy(i.boundingSphere),oP.applyMatrix4(r),oP.radius+=s,e.ray.intersectsSphere(oP)===!1)return;GQ.copy(r).invert(),EG.copy(e.ray).applyMatrix4(GQ);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,u=i.attributes.position;if(c!==null){const d=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let p=d,m=f;p<m;p++){const g=c.getX(p);aP.fromBufferAttribute(u,g),HQ(aP,g,l,r,e,n,this)}}else{const d=Math.max(0,o.start),f=Math.min(u.count,o.start+o.count);for(let p=d,m=f;p<m;p++)aP.fromBufferAttribute(u,p),HQ(aP,p,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function HQ(t,e,n,i,r,s,o){const a=EG.distanceSqToPoint(t);if(a<n){const l=new q;EG.closestPointToPoint(t,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class t0e extends bi{constructor(e,n,i,r,s,o,a,l,c){super(e,n,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Ei,this.magFilter=s!==void 0?s:Ei,this.generateMipmaps=!1;const h=this;function u(){h.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class g8e extends bi{constructor(e,n,i){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=ur,this.minFilter=ur,this.generateMipmaps=!1,this.needsUpdate=!0}}class I9 extends bi{constructor(e,n,i,r,s,o,a,l,c,h,u,d){super(null,o,a,l,c,h,r,s,u,d),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class v8e extends I9{constructor(e,n,i,r,s,o){super(e,n,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=zs}}class y8e extends bi{constructor(e,n,i,r,s,o,a,l,c){super(e,n,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Vu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let r=0;const s=i.length;let o;n?o=n:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],d=i[r+1]-h,f=(o-h)/d;return(r+f)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=n||(o.isVector2?new Me:new q);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new q,r=[],s=[],o=[],a=new q,l=new at;for(let f=0;f<=e;f++){const p=f/e;r[f]=this.getTangentAt(p,new q)}s[0]=new q,o[0]=new q;let c=Number.MAX_VALUE;const h=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=c&&(c=h,i.set(1,0,0)),u<=c&&(c=u,i.set(0,1,0)),d<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(jr(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(n===!0){let f=Math.acos(jr(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class EE extends Vu{constructor(e=0,n=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const i=n||new Me,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),u=Math.sin(this.aRotation),d=l-this.aX,f=c-this.aY;l=d*h-f*u+this.aX,c=d*u+f*h+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class n0e extends EE{constructor(e,n,i,r,s,o){super(e,n,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function B9(){let t=0,e=0,n=0,i=0;function r(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,u){let d=(o-s)/c-(a-s)/(c+h)+(a-o)/h,f=(a-o)/h-(l-o)/(h+u)+(l-a)/u;d*=h,f*=h,r(o,a,d,f)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+i*a}}}const lP=new q,zN=new B9,UN=new B9,GN=new B9;class i0e extends Vu{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new q){const i=n,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,h;this.closed||a>0?c=r[(a-1)%s]:(lP.subVectors(r[0],r[1]).add(r[0]),c=lP);const u=r[a%s],d=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(lP.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=lP),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(u),f),m=Math.pow(u.distanceToSquared(d),f),g=Math.pow(d.distanceToSquared(h),f);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),zN.initNonuniformCatmullRom(c.x,u.x,d.x,h.x,p,m,g),UN.initNonuniformCatmullRom(c.y,u.y,d.y,h.y,p,m,g),GN.initNonuniformCatmullRom(c.z,u.z,d.z,h.z,p,m,g)}else this.curveType==="catmullrom"&&(zN.initCatmullRom(c.x,u.x,d.x,h.x,this.tension),UN.initCatmullRom(c.y,u.y,d.y,h.y,this.tension),GN.initCatmullRom(c.z,u.z,d.z,h.z,this.tension));return i.set(zN.calc(l),UN.calc(l),GN.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new q().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function jQ(t,e,n,i,r){const s=(i-e)*.5,o=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*t+n}function x8e(t,e){const n=1-t;return n*n*e}function b8e(t,e){return 2*(1-t)*t*e}function w8e(t,e){return t*t*e}function iM(t,e,n,i){return x8e(t,e)+b8e(t,n)+w8e(t,i)}function _8e(t,e){const n=1-t;return n*n*n*e}function S8e(t,e){const n=1-t;return 3*n*n*t*e}function A8e(t,e){return 3*(1-t)*t*t*e}function M8e(t,e){return t*t*t*e}function rM(t,e,n,i,r){return _8e(t,e)+S8e(t,n)+A8e(t,i)+M8e(t,r)}class Tc extends Vu{constructor(e=new Me,n=new Me,i=new Me,r=new Me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new Me){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(rM(e,r.x,s.x,o.x,a.x),rM(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sM extends Vu{constructor(e=new q,n=new q,i=new q,r=new q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new q){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(rM(e,r.x,s.x,o.x,a.x),rM(e,r.y,s.y,o.y,a.y),rM(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Oc extends Vu{constructor(e=new Me,n=new Me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Me){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Me){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class k9 extends Vu{constructor(e=new q,n=new q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new q){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new q){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Hf extends Vu{constructor(e=new Me,n=new Me,i=new Me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new Me){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(iM(e,r.x,s.x,o.x),iM(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class F9 extends Vu{constructor(e=new q,n=new q,i=new q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new q){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(iM(e,r.x,s.x,o.x),iM(e,r.y,s.y,o.y),iM(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jI extends Vu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Me){const i=n,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],h=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return i.set(jQ(a,l.x,c.x,h.x,u.x),jQ(a,l.y,c.y,h.y,u.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new Me().fromArray(r))}return this}}var N9=Object.freeze({__proto__:null,ArcCurve:n0e,CatmullRomCurve3:i0e,CubicBezierCurve:Tc,CubicBezierCurve3:sM,EllipseCurve:EE,LineCurve:Oc,LineCurve3:k9,QuadraticBezierCurve:Hf,QuadraticBezierCurve3:F9,SplineCurve:jI});class z9 extends Vu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new Oc(n,e))}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const h=l[c];i&&i.equals(h)||(n.push(h),i=h)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new N9[r.type]().fromJSON(r))}return this}}class xv extends z9{constructor(e){super(),this.type="Path",this.currentPoint=new Me,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new Oc(this.currentPoint.clone(),new Me(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const s=new Hf(this.currentPoint.clone(),new Me(e,n),new Me(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,s,o){const a=new Tc(this.currentPoint.clone(),new Me(e,n),new Me(i,r),new Me(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new jI(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,i,r,s,o),this}absarc(e,n,i,r,s,o){return this.absellipse(e,n,i,i,r,s,o),this}ellipse(e,n,i,r,s,o,a,l){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+c,n+h,i,r,s,o,a,l),this}absellipse(e,n,i,r,s,o,a,l){const c=new EE(e,n,i,r,s,o,a,l);if(this.curves.length>0){const u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);const h=c.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Vv extends yt{constructor(e=[new Me(0,-.5),new Me(.5,0),new Me(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=jr(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],h=1/n,u=new q,d=new Me,f=new q,p=new q,m=new q;let g=0,v=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:g=e[y+1].x-e[y].x,v=e[y+1].y-e[y].y,f.x=v*1,f.y=-g,f.z=v*0,m.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(m.x,m.y,m.z);break;default:g=e[y+1].x-e[y].x,v=e[y+1].y-e[y].y,f.x=v*1,f.y=-g,f.z=v*0,p.copy(f),f.x+=m.x,f.y+=m.y,f.z+=m.z,f.normalize(),l.push(f.x,f.y,f.z),m.copy(p)}for(let y=0;y<=n;y++){const x=i+y*h*r,b=Math.sin(x),S=Math.cos(x);for(let A=0;A<=e.length-1;A++){u.x=e[A].x*b,u.y=e[A].y,u.z=e[A].x*S,o.push(u.x,u.y,u.z),d.x=y/n,d.y=A/(e.length-1),a.push(d.x,d.y);const E=l[3*A+0]*b,M=l[3*A+1],C=l[3*A+0]*S;c.push(E,M,C)}}for(let y=0;y<n;y++)for(let x=0;x<e.length-1;x++){const b=x+y*e.length,S=b,A=b+e.length,E=b+e.length+1,M=b+1;s.push(S,A,M),s.push(E,M,A)}this.setIndex(s),this.setAttribute("position",new it(o,3)),this.setAttribute("uv",new it(a,2)),this.setAttribute("normal",new it(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vv(e.points,e.segments,e.phiStart,e.phiLength)}}class CE extends Vv{constructor(e=1,n=1,i=4,r=8){const s=new xv;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r}}static fromJSON(e){return new CE(e.radius,e.length,e.capSegments,e.radialSegments)}}class TE extends yt{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new q,h=new Me;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let u=0,d=3;u<=n;u++,d+=3){const f=i+u/n*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),o.push(c.x,c.y,c.z),a.push(0,0,1),h.x=(o[d]/e+1)/2,h.y=(o[d+1]/e+1)/2,l.push(h.x,h.y)}for(let u=1;u<=n;u++)s.push(u,u+1,0);this.setIndex(s),this.setAttribute("position",new it(o,3)),this.setAttribute("normal",new it(a,3)),this.setAttribute("uv",new it(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TE(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ag extends yt{constructor(e=1,n=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const h=[],u=[],d=[],f=[];let p=0;const m=[],g=i/2;let v=0;y(),o===!1&&(e>0&&x(!0),n>0&&x(!1)),this.setIndex(h),this.setAttribute("position",new it(u,3)),this.setAttribute("normal",new it(d,3)),this.setAttribute("uv",new it(f,2));function y(){const b=new q,S=new q;let A=0;const E=(n-e)/i;for(let M=0;M<=s;M++){const C=[],T=M/s,D=T*(n-e)+e;for(let L=0;L<=r;L++){const I=L/r,R=I*l+a,H=Math.sin(R),Z=Math.cos(R);S.x=D*H,S.y=-T*i+g,S.z=D*Z,u.push(S.x,S.y,S.z),b.set(H,E,Z).normalize(),d.push(b.x,b.y,b.z),f.push(I,1-T),C.push(p++)}m.push(C)}for(let M=0;M<r;M++)for(let C=0;C<s;C++){const T=m[C][M],D=m[C+1][M],L=m[C+1][M+1],I=m[C][M+1];h.push(T,D,I),h.push(D,L,I),A+=6}c.addGroup(v,A,0),v+=A}function x(b){const S=p,A=new Me,E=new q;let M=0;const C=b===!0?e:n,T=b===!0?1:-1;for(let L=1;L<=r;L++)u.push(0,g*T,0),d.push(0,T,0),f.push(.5,.5),p++;const D=p;for(let L=0;L<=r;L++){const R=L/r*l+a,H=Math.cos(R),Z=Math.sin(R);E.x=C*Z,E.y=g*T,E.z=C*H,u.push(E.x,E.y,E.z),d.push(0,T,0),A.x=H*.5+.5,A.y=Z*.5*T+.5,f.push(A.x,A.y),p++}for(let L=0;L<r;L++){const I=S+L,R=D+L;b===!0?h.push(R,R+1,I):h.push(R+1,R,I),M+=3}c.addGroup(v,M,b===!0?1:2),v+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ag(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Cw extends ag{constructor(e=1,n=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Cw(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Qf extends yt{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const s=[],o=[];a(r),c(i),h(),this.setAttribute("position",new it(s,3)),this.setAttribute("normal",new it(s.slice(),3)),this.setAttribute("uv",new it(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(y){const x=new q,b=new q,S=new q;for(let A=0;A<n.length;A+=3)f(n[A+0],x),f(n[A+1],b),f(n[A+2],S),l(x,b,S,y)}function l(y,x,b,S){const A=S+1,E=[];for(let M=0;M<=A;M++){E[M]=[];const C=y.clone().lerp(b,M/A),T=x.clone().lerp(b,M/A),D=A-M;for(let L=0;L<=D;L++)L===0&&M===A?E[M][L]=C:E[M][L]=C.clone().lerp(T,L/D)}for(let M=0;M<A;M++)for(let C=0;C<2*(A-M)-1;C++){const T=Math.floor(C/2);C%2===0?(d(E[M][T+1]),d(E[M+1][T]),d(E[M][T])):(d(E[M][T+1]),d(E[M+1][T+1]),d(E[M+1][T]))}}function c(y){const x=new q;for(let b=0;b<s.length;b+=3)x.x=s[b+0],x.y=s[b+1],x.z=s[b+2],x.normalize().multiplyScalar(y),s[b+0]=x.x,s[b+1]=x.y,s[b+2]=x.z}function h(){const y=new q;for(let x=0;x<s.length;x+=3){y.x=s[x+0],y.y=s[x+1],y.z=s[x+2];const b=g(y)/2/Math.PI+.5,S=v(y)/Math.PI+.5;o.push(b,1-S)}p(),u()}function u(){for(let y=0;y<o.length;y+=6){const x=o[y+0],b=o[y+2],S=o[y+4],A=Math.max(x,b,S),E=Math.min(x,b,S);A>.9&&E<.1&&(x<.2&&(o[y+0]+=1),b<.2&&(o[y+2]+=1),S<.2&&(o[y+4]+=1))}}function d(y){s.push(y.x,y.y,y.z)}function f(y,x){const b=y*3;x.x=e[b+0],x.y=e[b+1],x.z=e[b+2]}function p(){const y=new q,x=new q,b=new q,S=new q,A=new Me,E=new Me,M=new Me;for(let C=0,T=0;C<s.length;C+=9,T+=6){y.set(s[C+0],s[C+1],s[C+2]),x.set(s[C+3],s[C+4],s[C+5]),b.set(s[C+6],s[C+7],s[C+8]),A.set(o[T+0],o[T+1]),E.set(o[T+2],o[T+3]),M.set(o[T+4],o[T+5]),S.copy(y).add(x).add(b).divideScalar(3);const D=g(S);m(A,T+0,y,D),m(E,T+2,x,D),m(M,T+4,b,D)}}function m(y,x,b,S){S<0&&y.x===1&&(o[x]=y.x-1),b.x===0&&b.z===0&&(o[x]=S/2/Math.PI+.5)}function g(y){return Math.atan2(y.z,-y.x)}function v(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qf(e.vertices,e.indices,e.radius,e.details)}}class Tw extends Qf{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Tw(e.radius,e.detail)}}const cP=new q,uP=new q,HN=new q,hP=new Zo;class r0e extends yt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos($0*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],h=["a","b","c"],u=new Array(3),d={},f=[];for(let p=0;p<l;p+=3){o?(c[0]=o.getX(p),c[1]=o.getX(p+1),c[2]=o.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:m,b:g,c:v}=hP;if(m.fromBufferAttribute(a,c[0]),g.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),hP.getNormal(HN),u[0]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,u[1]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,u[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let y=0;y<3;y++){const x=(y+1)%3,b=u[y],S=u[x],A=hP[h[y]],E=hP[h[x]],M=`${b}_${S}`,C=`${S}_${b}`;C in d&&d[C]?(HN.dot(d[C].normal)<=s&&(f.push(A.x,A.y,A.z),f.push(E.x,E.y,E.z)),d[C]=null):M in d||(d[M]={index0:c[y],index1:c[x],normal:HN.clone()})}}for(const p in d)if(d[p]){const{index0:m,index1:g}=d[p];cP.fromBufferAttribute(a,m),uP.fromBufferAttribute(a,g),f.push(cP.x,cP.y,cP.z),f.push(uP.x,uP.y,uP.z)}this.setAttribute("position",new it(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Pu extends xv{constructor(e){super(e),this.uuid=gl(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new xv().fromJSON(r))}return this}}const E8e={triangulate:function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=s0e(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,u,d,f;if(i&&(s=O8e(t,e,s,n)),t.length>80*n){a=c=t[0],l=h=t[1];for(let p=n;p<r;p+=n)u=t[p],d=t[p+1],u<a&&(a=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);f=Math.max(c-a,h-l),f=f!==0?32767/f:0}return g2(s,o,n,a,l,f,0),o}};function s0e(t,e,n,i,r){let s,o;if(r===H8e(t,e,n,i)>0)for(s=e;s<n;s+=i)o=VQ(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=VQ(s,t[s],t[s+1],o);return o&&VI(o,o.next)&&(y2(o),o=o.next),o}function bv(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(VI(n,n.next)||fr(n.prev,n,n.next)===0)){if(y2(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function g2(t,e,n,i,r,s,o){if(!t)return;!o&&s&&k8e(t,i,r,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?T8e(t,i,r,s):C8e(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),y2(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=P8e(bv(t),e,n),g2(t,e,n,i,r,s,2)):o===2&&D8e(t,e,n,i,r,s):g2(bv(t),e,n,i,r,s,1);break}}}function C8e(t){const e=t.prev,n=t,i=t.next;if(fr(e,n,i)>=0)return!1;const r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,c=i.y,h=r<s?r<o?r:o:s<o?s:o,u=a<l?a<c?a:c:l<c?l:c,d=r>s?r>o?r:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c;let p=i.next;for(;p!==e;){if(p.x>=h&&p.x<=d&&p.y>=u&&p.y<=f&&Ex(r,a,s,l,o,c,p.x,p.y)&&fr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function T8e(t,e,n,i){const r=t.prev,s=t,o=t.next;if(fr(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,h=r.y,u=s.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,p=h<u?h<d?h:d:u<d?u:d,m=a>l?a>c?a:c:l>c?l:c,g=h>u?h>d?h:d:u>d?u:d,v=CG(f,p,e,n,i),y=CG(m,g,e,n,i);let x=t.prevZ,b=t.nextZ;for(;x&&x.z>=v&&b&&b.z<=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==o&&Ex(a,h,l,u,c,d,x.x,x.y)&&fr(x.prev,x,x.next)>=0||(x=x.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==r&&b!==o&&Ex(a,h,l,u,c,d,b.x,b.y)&&fr(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==o&&Ex(a,h,l,u,c,d,x.x,x.y)&&fr(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==r&&b!==o&&Ex(a,h,l,u,c,d,b.x,b.y)&&fr(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function P8e(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!VI(r,s)&&o0e(r,i,i.next,s)&&v2(r,s)&&v2(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),y2(i),y2(i.next),i=t=s),i=i.next}while(i!==t);return bv(i)}function D8e(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&z8e(o,a)){let l=a0e(o,a);o=bv(o,o.next),l=bv(l,l.next),g2(o,e,n,i,r,s,0),g2(l,e,n,i,r,s,0);return}a=a.next}o=o.next}while(o!==t)}function O8e(t,e,n,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,c=s0e(t,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(N8e(c));for(r.sort(L8e),s=0;s<r.length;s++)n=R8e(r[s],n);return n}function L8e(t,e){return t.x-e.x}function R8e(t,e){const n=I8e(t,e);if(!n)return e;const i=a0e(n,t);return bv(i,i.next),bv(n,n.next)}function I8e(t,e){let n=e,i=-1/0,r;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const d=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=s&&d>i&&(i=d,r=n.x<n.next.x?n:n.next,d===s))return r}n=n.next}while(n!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let h=1/0,u;n=r;do s>=n.x&&n.x>=l&&s!==n.x&&Ex(o<c?s:i,o,l,c,o<c?i:s,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(s-n.x),v2(n,t)&&(u<h||u===h&&(n.x>r.x||n.x===r.x&&B8e(r,n)))&&(r=n,h=u)),n=n.next;while(n!==a);return r}function B8e(t,e){return fr(t.prev,t,e.prev)<0&&fr(e.next,t,t.next)<0}function k8e(t,e,n,i){let r=t;do r.z===0&&(r.z=CG(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,F8e(r)}function F8e(t){let e,n,i,r,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1);return t}function CG(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function N8e(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Ex(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function z8e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!U8e(t,e)&&(v2(t,e)&&v2(e,t)&&G8e(t,e)&&(fr(t.prev,t,e.prev)||fr(t,e.prev,e))||VI(t,e)&&fr(t.prev,t,t.next)>0&&fr(e.prev,e,e.next)>0)}function fr(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function VI(t,e){return t.x===e.x&&t.y===e.y}function o0e(t,e,n,i){const r=fP(fr(t,e,n)),s=fP(fr(t,e,i)),o=fP(fr(n,i,t)),a=fP(fr(n,i,e));return!!(r!==s&&o!==a||r===0&&dP(t,n,e)||s===0&&dP(t,i,e)||o===0&&dP(n,t,i)||a===0&&dP(n,e,i))}function dP(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function fP(t){return t>0?1:t<0?-1:0}function U8e(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&o0e(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function v2(t,e){return fr(t.prev,t,t.next)<0?fr(t,e,t.next)>=0&&fr(t,t.prev,e)>=0:fr(t,e,t.prev)<0||fr(t,t.next,e)<0}function G8e(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function a0e(t,e){const n=new TG(t.i,t.x,t.y),i=new TG(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function VQ(t,e,n,i){const r=new TG(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function y2(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function TG(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function H8e(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}class Du{static area(e){const n=e.length;let i=0;for(let r=n-1,s=0;s<n;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Du.area(e)<0}static triangulateShape(e,n){const i=[],r=[],s=[];WQ(e),$Q(i,e);let o=e.length;n.forEach(WQ);for(let l=0;l<n.length;l++)r.push(o),o+=n[l].length,$Q(i,n[l]);const a=E8e.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function WQ(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function $Q(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class PE extends yt{constructor(e=new Pu([new Me(.5,.5),new Me(-.5,.5),new Me(-.5,-.5),new Me(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new it(r,3)),this.setAttribute("uv",new it(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1,u=n.depth!==void 0?n.depth:1;let d=n.bevelEnabled!==void 0?n.bevelEnabled:!0,f=n.bevelThickness!==void 0?n.bevelThickness:.2,p=n.bevelSize!==void 0?n.bevelSize:f-.1,m=n.bevelOffset!==void 0?n.bevelOffset:0,g=n.bevelSegments!==void 0?n.bevelSegments:3;const v=n.extrudePath,y=n.UVGenerator!==void 0?n.UVGenerator:j8e;let x,b=!1,S,A,E,M;v&&(x=v.getSpacedPoints(h),b=!0,d=!1,S=v.computeFrenetFrames(h,!1),A=new q,E=new q,M=new q),d||(g=0,f=0,p=0,m=0);const C=a.extractPoints(c);let T=C.shape;const D=C.holes;if(!Du.isClockWise(T)){T=T.reverse();for(let oe=0,ae=D.length;oe<ae;oe++){const ye=D[oe];Du.isClockWise(ye)&&(D[oe]=ye.reverse())}}const I=Du.triangulateShape(T,D),R=T;for(let oe=0,ae=D.length;oe<ae;oe++){const ye=D[oe];T=T.concat(ye)}function H(oe,ae,ye){return ae||console.error("THREE.ExtrudeGeometry: vec does not exist"),oe.clone().addScaledVector(ae,ye)}const Z=T.length,ee=I.length;function F(oe,ae,ye){let we,Se,Pe;const Te=oe.x-ae.x,Ie=oe.y-ae.y,xe=ye.x-oe.x,Re=ye.y-oe.y,N=Te*Te+Ie*Ie,B=Te*Re-Ie*xe;if(Math.abs(B)>Number.EPSILON){const le=Math.sqrt(N),_e=Math.sqrt(xe*xe+Re*Re),Ee=ae.x-Ie/le,Fe=ae.y+Te/le,Ze=ye.x-Re/_e,Ue=ye.y+xe/_e,be=((Ze-Ee)*Re-(Ue-Fe)*xe)/(Te*Re-Ie*xe);we=Ee+Te*be-oe.x,Se=Fe+Ie*be-oe.y;const Xe=we*we+Se*Se;if(Xe<=2)return new Me(we,Se);Pe=Math.sqrt(Xe/2)}else{let le=!1;Te>Number.EPSILON?xe>Number.EPSILON&&(le=!0):Te<-Number.EPSILON?xe<-Number.EPSILON&&(le=!0):Math.sign(Ie)===Math.sign(Re)&&(le=!0),le?(we=-Ie,Se=Te,Pe=Math.sqrt(N)):(we=Te,Se=Ie,Pe=Math.sqrt(N/2))}return new Me(we/Pe,Se/Pe)}const V=[];for(let oe=0,ae=R.length,ye=ae-1,we=oe+1;oe<ae;oe++,ye++,we++)ye===ae&&(ye=0),we===ae&&(we=0),V[oe]=F(R[oe],R[ye],R[we]);const U=[];let j,z=V.concat();for(let oe=0,ae=D.length;oe<ae;oe++){const ye=D[oe];j=[];for(let we=0,Se=ye.length,Pe=Se-1,Te=we+1;we<Se;we++,Pe++,Te++)Pe===Se&&(Pe=0),Te===Se&&(Te=0),j[we]=F(ye[we],ye[Pe],ye[Te]);U.push(j),z=z.concat(j)}for(let oe=0;oe<g;oe++){const ae=oe/g,ye=f*Math.cos(ae*Math.PI/2),we=p*Math.sin(ae*Math.PI/2)+m;for(let Se=0,Pe=R.length;Se<Pe;Se++){const Te=H(R[Se],V[Se],we);te(Te.x,Te.y,-ye)}for(let Se=0,Pe=D.length;Se<Pe;Se++){const Te=D[Se];j=U[Se];for(let Ie=0,xe=Te.length;Ie<xe;Ie++){const Re=H(Te[Ie],j[Ie],we);te(Re.x,Re.y,-ye)}}}const Y=p+m;for(let oe=0;oe<Z;oe++){const ae=d?H(T[oe],z[oe],Y):T[oe];b?(E.copy(S.normals[0]).multiplyScalar(ae.x),A.copy(S.binormals[0]).multiplyScalar(ae.y),M.copy(x[0]).add(E).add(A),te(M.x,M.y,M.z)):te(ae.x,ae.y,0)}for(let oe=1;oe<=h;oe++)for(let ae=0;ae<Z;ae++){const ye=d?H(T[ae],z[ae],Y):T[ae];b?(E.copy(S.normals[oe]).multiplyScalar(ye.x),A.copy(S.binormals[oe]).multiplyScalar(ye.y),M.copy(x[oe]).add(E).add(A),te(M.x,M.y,M.z)):te(ye.x,ye.y,u/h*oe)}for(let oe=g-1;oe>=0;oe--){const ae=oe/g,ye=f*Math.cos(ae*Math.PI/2),we=p*Math.sin(ae*Math.PI/2)+m;for(let Se=0,Pe=R.length;Se<Pe;Se++){const Te=H(R[Se],V[Se],we);te(Te.x,Te.y,u+ye)}for(let Se=0,Pe=D.length;Se<Pe;Se++){const Te=D[Se];j=U[Se];for(let Ie=0,xe=Te.length;Ie<xe;Ie++){const Re=H(Te[Ie],j[Ie],we);b?te(Re.x,Re.y+x[h-1].y,x[h-1].x+ye):te(Re.x,Re.y,u+ye)}}}J(),K();function J(){const oe=r.length/3;if(d){let ae=0,ye=Z*ae;for(let we=0;we<ee;we++){const Se=I[we];re(Se[2]+ye,Se[1]+ye,Se[0]+ye)}ae=h+g*2,ye=Z*ae;for(let we=0;we<ee;we++){const Se=I[we];re(Se[0]+ye,Se[1]+ye,Se[2]+ye)}}else{for(let ae=0;ae<ee;ae++){const ye=I[ae];re(ye[2],ye[1],ye[0])}for(let ae=0;ae<ee;ae++){const ye=I[ae];re(ye[0]+Z*h,ye[1]+Z*h,ye[2]+Z*h)}}i.addGroup(oe,r.length/3-oe,0)}function K(){const oe=r.length/3;let ae=0;X(R,ae),ae+=R.length;for(let ye=0,we=D.length;ye<we;ye++){const Se=D[ye];X(Se,ae),ae+=Se.length}i.addGroup(oe,r.length/3-oe,1)}function X(oe,ae){let ye=oe.length;for(;--ye>=0;){const we=ye;let Se=ye-1;Se<0&&(Se=oe.length-1);for(let Pe=0,Te=h+g*2;Pe<Te;Pe++){const Ie=Z*Pe,xe=Z*(Pe+1),Re=ae+we+Ie,N=ae+Se+Ie,B=ae+Se+xe,le=ae+we+xe;se(Re,N,B,le)}}}function te(oe,ae,ye){l.push(oe),l.push(ae),l.push(ye)}function re(oe,ae,ye){ce(oe),ce(ae),ce(ye);const we=r.length/3,Se=y.generateTopUV(i,r,we-3,we-2,we-1);ge(Se[0]),ge(Se[1]),ge(Se[2])}function se(oe,ae,ye,we){ce(oe),ce(ae),ce(we),ce(ae),ce(ye),ce(we);const Se=r.length/3,Pe=y.generateSideWallUV(i,r,Se-6,Se-3,Se-2,Se-1);ge(Pe[0]),ge(Pe[1]),ge(Pe[3]),ge(Pe[1]),ge(Pe[2]),ge(Pe[3])}function ce(oe){r.push(l[oe*3+0]),r.push(l[oe*3+1]),r.push(l[oe*3+2])}function ge(oe){s.push(oe.x),s.push(oe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return V8e(n,i,e)}static fromJSON(e,n){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new N9[r.type]().fromJSON(r)),new PE(i,e.options)}}const j8e={generateTopUV:function(t,e,n,i,r){const s=e[n*3],o=e[n*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],h=e[r*3+1];return[new Me(s,o),new Me(a,l),new Me(c,h)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[i*3],h=e[i*3+1],u=e[i*3+2],d=e[r*3],f=e[r*3+1],p=e[r*3+2],m=e[s*3],g=e[s*3+1],v=e[s*3+2];return Math.abs(a-h)<Math.abs(o-c)?[new Me(o,1-l),new Me(c,1-u),new Me(d,1-p),new Me(m,1-v)]:[new Me(a,1-l),new Me(h,1-u),new Me(f,1-p),new Me(g,1-v)]}};function V8e(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const s=t[i];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Wv extends Qf{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Wv(e.radius,e.detail)}}class Pw extends Qf{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Pw(e.radius,e.detail)}}class DE extends yt{constructor(e=.5,n=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],h=[];let u=e;const d=(n-e)/r,f=new q,p=new Me;for(let m=0;m<=r;m++){for(let g=0;g<=i;g++){const v=s+g/i*o;f.x=u*Math.cos(v),f.y=u*Math.sin(v),l.push(f.x,f.y,f.z),c.push(0,0,1),p.x=(f.x/n+1)/2,p.y=(f.y/n+1)/2,h.push(p.x,p.y)}u+=d}for(let m=0;m<r;m++){const g=m*(i+1);for(let v=0;v<i;v++){const y=v+g,x=y,b=y+i+1,S=y+i+2,A=y+1;a.push(x,b,A),a.push(b,S,A)}}this.setIndex(a),this.setAttribute("position",new it(l,3)),this.setAttribute("normal",new it(c,3)),this.setAttribute("uv",new it(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new DE(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class OE extends yt{constructor(e=new Pu([new Me(0,.5),new Me(-.5,-.5),new Me(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let h=0;h<e.length;h++)c(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new it(r,3)),this.setAttribute("normal",new it(s,3)),this.setAttribute("uv",new it(o,2));function c(h){const u=r.length/3,d=h.extractPoints(n);let f=d.shape;const p=d.holes;Du.isClockWise(f)===!1&&(f=f.reverse());for(let g=0,v=p.length;g<v;g++){const y=p[g];Du.isClockWise(y)===!0&&(p[g]=y.reverse())}const m=Du.triangulateShape(f,p);for(let g=0,v=p.length;g<v;g++){const y=p[g];f=f.concat(y)}for(let g=0,v=f.length;g<v;g++){const y=f[g];r.push(y.x,y.y,0),s.push(0,0,1),o.push(y.x,y.y)}for(let g=0,v=m.length;g<v;g++){const y=m[g],x=y[0]+u,b=y[1]+u,S=y[2]+u;i.push(x,b,S),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return W8e(n,e)}static fromJSON(e,n){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=n[e.shapes[r]];i.push(o)}return new OE(i,e.curveSegments)}}function W8e(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class $v extends yt{constructor(e=1,n=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const h=[],u=new q,d=new q,f=[],p=[],m=[],g=[];for(let v=0;v<=i;v++){const y=[],x=v/i;let b=0;v==0&&o==0?b=.5/n:v==i&&l==Math.PI&&(b=-.5/n);for(let S=0;S<=n;S++){const A=S/n;u.x=-e*Math.cos(r+A*s)*Math.sin(o+x*a),u.y=e*Math.cos(o+x*a),u.z=e*Math.sin(r+A*s)*Math.sin(o+x*a),p.push(u.x,u.y,u.z),d.copy(u).normalize(),m.push(d.x,d.y,d.z),g.push(A+b,1-x),y.push(c++)}h.push(y)}for(let v=0;v<i;v++)for(let y=0;y<n;y++){const x=h[v][y+1],b=h[v][y],S=h[v+1][y],A=h[v+1][y+1];(v!==0||o>0)&&f.push(x,b,A),(v!==i-1||l<Math.PI)&&f.push(b,S,A)}this.setIndex(f),this.setAttribute("position",new it(p,3)),this.setAttribute("normal",new it(m,3)),this.setAttribute("uv",new it(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $v(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class LE extends Qf{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new LE(e.radius,e.detail)}}class RE extends yt{constructor(e=1,n=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],h=new q,u=new q,d=new q;for(let f=0;f<=i;f++)for(let p=0;p<=r;p++){const m=p/r*s,g=f/i*Math.PI*2;u.x=(e+n*Math.cos(g))*Math.cos(m),u.y=(e+n*Math.cos(g))*Math.sin(m),u.z=n*Math.sin(g),a.push(u.x,u.y,u.z),h.x=e*Math.cos(m),h.y=e*Math.sin(m),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(p/r),c.push(f/i)}for(let f=1;f<=i;f++)for(let p=1;p<=r;p++){const m=(r+1)*f+p-1,g=(r+1)*(f-1)+p-1,v=(r+1)*(f-1)+p,y=(r+1)*f+p;o.push(m,g,y),o.push(g,v,y)}this.setIndex(o),this.setAttribute("position",new it(a,3)),this.setAttribute("normal",new it(l,3)),this.setAttribute("uv",new it(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new RE(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Dw extends yt{constructor(e=1,n=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],h=[],u=new q,d=new q,f=new q,p=new q,m=new q,g=new q,v=new q;for(let x=0;x<=i;++x){const b=x/i*s*Math.PI*2;y(b,s,o,e,f),y(b+.01,s,o,e,p),g.subVectors(p,f),v.addVectors(p,f),m.crossVectors(g,v),v.crossVectors(m,g),m.normalize(),v.normalize();for(let S=0;S<=r;++S){const A=S/r*Math.PI*2,E=-n*Math.cos(A),M=n*Math.sin(A);u.x=f.x+(E*v.x+M*m.x),u.y=f.y+(E*v.y+M*m.y),u.z=f.z+(E*v.z+M*m.z),l.push(u.x,u.y,u.z),d.subVectors(u,f).normalize(),c.push(d.x,d.y,d.z),h.push(x/i),h.push(S/r)}}for(let x=1;x<=i;x++)for(let b=1;b<=r;b++){const S=(r+1)*(x-1)+(b-1),A=(r+1)*x+(b-1),E=(r+1)*x+b,M=(r+1)*(x-1)+b;a.push(S,A,M),a.push(A,E,M)}this.setIndex(a),this.setAttribute("position",new it(l,3)),this.setAttribute("normal",new it(c,3)),this.setAttribute("uv",new it(h,2));function y(x,b,S,A,E){const M=Math.cos(x),C=Math.sin(x),T=S/b*x,D=Math.cos(T);E.x=A*(2+D)*.5*M,E.y=A*(2+D)*C*.5,E.z=A*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dw(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class IE extends yt{constructor(e=new F9(new q(-1,-1,0),new q(-1,1,0),new q(1,1,0)),n=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new q,l=new q,c=new Me;let h=new q;const u=[],d=[],f=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new it(u,3)),this.setAttribute("normal",new it(d,3)),this.setAttribute("uv",new it(f,2));function m(){for(let x=0;x<n;x++)g(x);g(s===!1?n:0),y(),v()}function g(x){h=e.getPointAt(x/n,h);const b=o.normals[x],S=o.binormals[x];for(let A=0;A<=r;A++){const E=A/r*Math.PI*2,M=Math.sin(E),C=-Math.cos(E);l.x=C*b.x+M*S.x,l.y=C*b.y+M*S.y,l.z=C*b.z+M*S.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,u.push(a.x,a.y,a.z)}}function v(){for(let x=1;x<=n;x++)for(let b=1;b<=r;b++){const S=(r+1)*(x-1)+(b-1),A=(r+1)*x+(b-1),E=(r+1)*x+b,M=(r+1)*(x-1)+b;p.push(S,A,M),p.push(A,E,M)}}function y(){for(let x=0;x<=n;x++)for(let b=0;b<=r;b++)c.x=x/n,c.y=b/r,f.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new IE(new N9[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class l0e extends yt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new q,s=new q;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,h=l.length;c<h;++c){const u=l[c],d=u.start,f=u.count;for(let p=d,m=d+f;p<m;p+=3)for(let g=0;g<3;g++){const v=a.getX(p+g),y=a.getX(p+(g+1)%3);r.fromBufferAttribute(o,v),s.fromBufferAttribute(o,y),qQ(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const h=3*a+c,u=3*a+(c+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,u),qQ(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new it(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function qQ(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var XQ=Object.freeze({__proto__:null,BoxGeometry:Ia,CapsuleGeometry:CE,CircleGeometry:TE,ConeGeometry:Cw,CylinderGeometry:ag,DodecahedronGeometry:Tw,EdgesGeometry:r0e,ExtrudeGeometry:PE,IcosahedronGeometry:Wv,LatheGeometry:Vv,OctahedronGeometry:Pw,PlaneGeometry:og,PolyhedronGeometry:Qf,RingGeometry:DE,ShapeGeometry:OE,SphereGeometry:$v,TetrahedronGeometry:LE,TorusGeometry:RE,TorusKnotGeometry:Dw,TubeGeometry:IE,WireframeGeometry:l0e});class c0e extends gr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new nt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class u0e extends zc{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class lg extends gr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new nt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zf,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ro extends lg{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return jr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new nt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new nt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new nt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class h0e extends gr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new nt(16777215),this.specular=new nt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zf,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=wE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class d0e extends gr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new nt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zf,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class f0e extends gr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zf,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class p0e extends gr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zf,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=wE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class m0e extends gr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new nt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zf,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class g0e extends $s{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ic(t,e,n){return U9(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function R0(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function U9(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function v0e(t){function e(r,s){return t[r]-t[s]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function PG(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const a=n[s]*e;for(let l=0;l!==e;++l)r[o++]=t[a+l]}return r}function G9(t,e,n,i){let r=1,s=t[0];for(;s!==void 0&&s[i]===void 0;)s=t[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),n.push(o)),s=t[r++];while(s!==void 0)}function $8e(t,e,n,i,r=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],h=c.getValueSize(),u=[],d=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<n||p>=i)){u.push(c.times[f]);for(let m=0;m<h;++m)d.push(c.values[f*h+m])}}u.length!==0&&(c.times=R0(u,c.times.constructor),c.values=R0(d,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function q8e(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let h=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=u/3);let d=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const p=a.times.length-1;let m;if(s<=a.times[0]){const v=h,y=u-h;m=ic(a.values,v,y)}else if(s>=a.times[p]){const v=p*u+h,y=v+u-h;m=ic(a.values,v,y)}else{const v=a.createInterpolant(),y=h,x=u-h;v.evaluate(s),m=ic(v.resultBuffer,y,x)}l==="quaternion"&&new Rr().fromArray(m).normalize().conjugate().toArray(m);const g=c.times.length;for(let v=0;v<g;++v){const y=v*f+d;if(l==="quaternion")Rr.multiplyQuaternionsFlat(c.values,y,m,0,c.values,y);else{const x=f-d*2;for(let b=0;b<x;++b)c.values[y+b]-=m[b]}}}return t.blendMode=_9,t}const X8e={arraySlice:ic,convertArray:R0,isTypedArray:U9,getKeyframeOrder:v0e,sortedArray:PG,flattenJSON:G9,subclip:$8e,makeClipAdditive:q8e};class qv{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=n[++i],e<r)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=n[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<n[a]?o=a:i=a+1}if(r=n[i],s=n[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)n[o]=i[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class y0e extends qv{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:D0,endingEnd:D0}}intervalChanged_(e,n,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case O0:s=e,a=2*n-i;break;case d2:s=r.length-2,a=n+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case O0:o=e,l=2*i-n;break;case d2:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=n}const c=(i-n)*.5,h=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(i-n)/(r-n),m=p*p,g=m*p,v=-d*g+2*d*m-d*p,y=(1+d)*g+(-1.5-2*d)*m+(-.5+d)*p+1,x=(-1-f)*g+(1.5+f)*m+.5*p,b=f*g-f*m;for(let S=0;S!==a;++S)s[S]=v*o[h+S]+y*o[c+S]+x*o[l+S]+b*o[u+S];return s}}class H9 extends qv{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=(i-n)/(r-n),u=1-h;for(let d=0;d!==a;++d)s[d]=o[c+d]*u+o[l+d]*h;return s}}class x0e extends qv{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Wu{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=R0(n,this.TimeBufferType),this.values=R0(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:R0(e.times,Array),values:R0(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new x0e(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new H9(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new y0e(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case vv:n=this.InterpolantFactoryMethodDiscrete;break;case zf:n=this.InterpolantFactoryMethodLinear;break;case LD:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return vv;case this.InterpolantFactoryMethodLinear:return zf;case this.InterpolantFactoryMethodSmooth:return LD}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>n;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=ic(i,s,o),this.values=ic(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&U9(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=ic(this.times),n=ic(this.values),i=this.getValueSize(),r=this.getInterpolation()===LD,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],h=e[a+1];if(c!==h&&(a!==1||c!==e[0]))if(r)l=!0;else{const u=a*i,d=u-i,f=u+i;for(let p=0;p!==i;++p){const m=n[u+p];if(m!==n[d+p]||m!==n[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const u=a*i,d=o*i;for(let f=0;f!==i;++f)n[d+f]=n[u+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=ic(e,0,o),this.values=ic(n,0,o*i)):(this.times=e,this.values=n),this}clone(){const e=ic(this.times,0),n=ic(this.values,0),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}Wu.prototype.TimeBufferType=Float32Array;Wu.prototype.ValueBufferType=Float32Array;Wu.prototype.DefaultInterpolation=zf;class Xv extends Wu{}Xv.prototype.ValueTypeName="bool";Xv.prototype.ValueBufferType=Array;Xv.prototype.DefaultInterpolation=vv;Xv.prototype.InterpolantFactoryMethodLinear=void 0;Xv.prototype.InterpolantFactoryMethodSmooth=void 0;class j9 extends Wu{}j9.prototype.ValueTypeName="color";class wv extends Wu{}wv.prototype.ValueTypeName="number";class b0e extends qv{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-n)/(r-n);let c=e*a;for(let h=c+a;c!==h;c+=4)Rr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class nd extends Wu{InterpolantFactoryMethodLinear(e){return new b0e(this.times,this.values,this.getValueSize(),e)}}nd.prototype.ValueTypeName="quaternion";nd.prototype.DefaultInterpolation=zf;nd.prototype.InterpolantFactoryMethodSmooth=void 0;class Yv extends Wu{}Yv.prototype.ValueTypeName="string";Yv.prototype.ValueBufferType=Array;Yv.prototype.DefaultInterpolation=vv;Yv.prototype.InterpolantFactoryMethodLinear=void 0;Yv.prototype.InterpolantFactoryMethodSmooth=void 0;class _v extends Wu{}_v.prototype.ValueTypeName="vector";class Sv{constructor(e,n=-1,i,r=RI){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=gl(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)n.push(K8e(i[o]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)n.push(Wu.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const h=v0e(l);l=PG(l,1,h),c=PG(c,1,h),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new wv(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.name.match(s);if(h&&h.length>1){const u=h[1];let d=r[u];d||(r[u]=d=[]),d.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],n,i));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(u,d,f,p,m){if(f.length!==0){const g=[],v=[];G9(f,g,v,p),g.length!==0&&m.push(new u(d,g,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const d=c[u].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let m=0;m<d[p].morphTargets.length;m++)f[d[p].morphTargets[m]]=-1;for(const m in f){const g=[],v=[];for(let y=0;y!==d[p].morphTargets.length;++y){const x=d[p];g.push(x.time),v.push(x.morphTarget===m?1:0)}r.push(new wv(".morphTargetInfluence["+m+"]",g,v))}l=f.length*o}else{const f=".bones["+n[u].name+"]";i(_v,f+".position",d,"pos",r),i(nd,f+".quaternion",d,"rot",r),i(_v,f+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Y8e(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return wv;case"vector":case"vector2":case"vector3":case"vector4":return _v;case"color":return j9;case"quaternion":return nd;case"bool":case"boolean":return Xv;case"string":return Yv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function K8e(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Y8e(t.type);if(t.times===void 0){const n=[],i=[];G9(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Av={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class V9{constructor(e,n,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,u){return c.push(h,u),this},this.removeHandler=function(h){const u=c.indexOf(h);return u!==-1&&c.splice(u,2),this},this.getHandler=function(h){for(let u=0,d=c.length;u<d;u+=2){const f=c[u],p=c[u+1];if(f.global&&(f.lastIndex=0),f.test(h))return p}return null}}}const w0e=new V9;class qs{constructor(e){this.manager=e!==void 0?e:w0e,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,s){i.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Id={};class J8e extends Error{constructor(e,n){super(e),this.response=n}}class js extends qs{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Av.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Id[e]!==void 0){Id[e].push({onLoad:n,onProgress:i,onError:r});return}Id[e]=[],Id[e].push({onLoad:n,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const h=Id[e],u=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=d?parseInt(d):0,p=f!==0;let m=0;const g=new ReadableStream({start(v){y();function y(){u.read().then(({done:x,value:b})=>{if(x)v.close();else{m+=b.byteLength;const S=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let A=0,E=h.length;A<E;A++){const M=h[A];M.onProgress&&M.onProgress(S)}v.enqueue(b),y()}})}}});return new Response(g)}else throw new J8e(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return c.json();default:if(a===void 0)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),d=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(d);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{Av.add(e,c);const h=Id[e];delete Id[e];for(let u=0,d=h.length;u<d;u++){const f=h[u];f.onLoad&&f.onLoad(c)}}).catch(c=>{const h=Id[e];if(h===void 0)throw this.manager.itemError(e),c;delete Id[e];for(let u=0,d=h.length;u<d;u++){const f=h[u];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Z8e extends qs{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new js(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=Sv.parse(e[i]);n.push(r)}return n}}class Q8e extends qs{constructor(e){super(e)}load(e,n,i,r){const s=this,o=[],a=new I9,l=new js(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function h(u){l.load(e[u],function(d){const f=s.parse(d,!0);o[u]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(a.minFilter=Ei),a.image=o,a.format=f.format,a.needsUpdate=!0,n&&n(a))},i,r)}if(Array.isArray(e))for(let u=0,d=e.length;u<d;++u)h(u);else l.load(e,function(u){const d=s.parse(u,!0);if(d.isCubemap){const f=d.mipmaps.length/d.mipmapCount;for(let p=0;p<f;p++){o[p]={mipmaps:[]};for(let m=0;m<d.mipmapCount;m++)o[p].mipmaps.push(d.mipmaps[p*d.mipmapCount+m]),o[p].format=d.format,o[p].width=d.width,o[p].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=Ei),a.format=d.format,a.needsUpdate=!0,n&&n(a)},i,r);return a}}class x2 extends qs{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Av.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=m2("img");function l(){h(),Av.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(u){h(),r&&r(u),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class _0e extends qs{constructor(e){super(e)}load(e,n,i,r){const s=new Sw,o=new x2(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(h){s.images[c]=h,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class S0e extends qs{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Zx,a=new js(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:zs,o.wrapT=c.wrapT!==void 0?c.wrapT:zs,o.magFilter=c.magFilter!==void 0?c.magFilter:Ei,o.minFilter=c.minFilter!==void 0?c.minFilter:Ei,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Nc),c.mipmapCount===1&&(o.minFilter=Ei),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c))},i,r),o}}class Ow extends qs{constructor(e){super(e)}load(e,n,i,r){const s=new bi,o=new x2(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},i,r),s}}class ep extends wn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new nt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class W9 extends ep{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(wn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new nt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const jN=new at,YQ=new q,KQ=new q;class $9{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Me(512,512),this.map=null,this.mapPass=null,this.matrix=new at,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new kI,this._frameExtents=new Me(1,1),this._viewportCount=1,this._viewports=[new sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;YQ.setFromMatrixPosition(e.matrixWorld),n.position.copy(YQ),KQ.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(KQ),n.updateMatrixWorld(),jN.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jN),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(jN)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class e9e extends $9{constructor(){super(new Vr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=p2*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(i!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=i,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class BE extends ep{constructor(e,n,i=0,r=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(wn.DEFAULT_UP),this.updateMatrix(),this.target=new wn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new e9e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const JQ=new at,iS=new q,VN=new q;class t9e extends $9{constructor(){super(new Vr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Me(4,2),this._viewportCount=6,this._viewports=[new sn(2,1,1,1),new sn(0,1,1,1),new sn(3,1,1,1),new sn(1,1,1,1),new sn(3,0,1,1),new sn(1,0,1,1)],this._cubeDirections=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)],this._cubeUps=[new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),iS.setFromMatrixPosition(e.matrixWorld),i.position.copy(iS),VN.copy(i.position),VN.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(VN),i.updateMatrixWorld(),r.makeTranslation(-iS.x,-iS.y,-iS.z),JQ.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(JQ)}}class kE extends ep{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new t9e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class n9e extends $9{constructor(){super(new Uf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class FE extends ep{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(wn.DEFAULT_UP),this.updateMatrix(),this.target=new wn,this.shadow=new n9e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class A0e extends ep{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class M0e extends ep{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class E0e{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new q)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(i*s)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*i*s),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}class WI extends ep{constructor(e=new E0e,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class $I extends qs{constructor(e){super(e),this.textures={}}load(e,n,i,r){const s=this,o=new js(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=$I.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new nt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new nt().setHex(o.value);break;case"v2":r.uniforms[s].value=new Me().fromArray(o.value);break;case"v3":r.uniforms[s].value=new q().fromArray(o.value);break;case"v4":r.uniforms[s].value=new sn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Wr().fromArray(o.value);break;case"m4":r.uniforms[s].value=new at().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Me().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Me().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:c0e,SpriteMaterial:L9,RawShaderMaterial:u0e,ShaderMaterial:zc,PointsMaterial:ME,MeshPhysicalMaterial:Ro,MeshStandardMaterial:lg,MeshPhongMaterial:h0e,MeshToonMaterial:d0e,MeshNormalMaterial:f0e,MeshLambertMaterial:p0e,MeshDepthMaterial:D9,MeshDistanceMaterial:O9,MeshBasicMaterial:ls,MeshMatcapMaterial:m0e,LineDashedMaterial:g0e,LineBasicMaterial:$s,Material:gr};return new n[e]}}class vl{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class C0e extends yt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class qI extends qs{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new js(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(f,p){if(n[p]!==void 0)return n[p];const g=f.interleavedBuffers[p],v=s(f,g.buffer),y=Ax(g.type,v),x=new Mw(y,g.stride);return x.uuid=g.uuid,n[p]=x,x}function s(f,p){if(i[p]!==void 0)return i[p];const g=f.arrayBuffers[p],v=new Uint32Array(g).buffer;return i[p]=v,v}const o=e.isInstancedBufferGeometry?new C0e:new yt,a=e.data.index;if(a!==void 0){const f=Ax(a.type,a.array);o.setIndex(new Nt(f,1))}const l=e.data.attributes;for(const f in l){const p=l[f];let m;if(p.isInterleavedBufferAttribute){const g=r(e.data,p.data);m=new Gf(g,p.itemSize,p.offset,p.normalized)}else{const g=Ax(p.type,p.array),v=p.isInstancedBufferAttribute?Wb:Nt;m=new v(g,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),p.updateRange!==void 0&&(m.updateRange.offset=p.updateRange.offset,m.updateRange.count=p.updateRange.count),o.setAttribute(f,m)}const c=e.data.morphAttributes;if(c)for(const f in c){const p=c[f],m=[];for(let g=0,v=p.length;g<v;g++){const y=p[g];let x;if(y.isInterleavedBufferAttribute){const b=r(e.data,y.data);x=new Gf(b,y.itemSize,y.offset,y.normalized)}else{const b=Ax(y.type,y.array);x=new Nt(b,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),m.push(x)}o.morphAttributes[f]=m}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let f=0,p=u.length;f!==p;++f){const m=u[f];o.addGroup(m.start,m.count,m.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const f=new q;d.center!==void 0&&f.fromArray(d.center),o.boundingSphere=new Oo(f,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class i9e extends qs{constructor(e){super(e)}load(e,n,i,r){const s=this,o=this.path===""?vl.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new js(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(u){r!==void 0&&r(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}const h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?vl.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new js(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,h),n!==void 0){let u=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){u=!0;break}u===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Pu().fromJSON(e[i]);n[s.uuid]=s}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Ew().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new qI;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in XQ?a=XQ[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const s=new $I;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Sv.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(h)}else return l.data?{data:Ax(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new V9(n);s=new x2(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const u=e[c],d=u.url;if(Array.isArray(d)){const f=[];for(let p=0,m=d.length;p<m;p++){const g=d[p],v=a(g);v!==null&&(v instanceof HTMLImageElement?f.push(v):f.push(new Zx(v.data,v.width,v.height)))}r[u.uuid]=new L0(f)}else{const f=a(u.url);r[u.uuid]=new L0(f)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Ax(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new x2(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const h=[];for(let u=0,d=c.length;u<d;u++){const f=c[u],p=await s(f);p!==null&&(p instanceof HTMLImageElement?h.push(p):h.push(new Zx(p.data,p.width,p.height)))}i[l.uuid]=new L0(h)}else{const h=await s(l.url);i[l.uuid]=new L0(h)}}}return i}parseTextures(e,n){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let h;Array.isArray(c)?(h=new Sw,c.length===6&&(h.needsUpdate=!0)):(c&&c.data?h=new Zx:h=new bi,c&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,r9e)),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],ZQ),h.wrapT=i(a.wrap[1],ZQ)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.encoding!==void 0&&(h.encoding=a.encoding),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,QQ)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,QQ)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,n,i,r,s){let o;function a(d){return n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),n[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const f=[];for(let p=0,m=d.length;p<m;p++){const g=d[p];i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),f.push(i[g])}return f}return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),i[d]}}function c(d){return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),r[d]}let h,u;switch(e.type){case"Scene":o=new Vb,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new nt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new SE(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new zI(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Vr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Uf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new A0e(e.color,e.intensity);break;case"DirectionalLight":o=new FE(e.color,e.intensity);break;case"PointLight":o=new kE(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new M0e(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new BE(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new W9(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new WI().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),u=l(e.material),o=new UI(h,u),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),u=l(e.material),o=new Lr(h,u);break;case"InstancedMesh":h=a(e.geometry),u=l(e.material);const d=e.count,f=e.instanceMatrix,p=e.instanceColor;o=new R9(h,u,d),o.instanceMatrix=new Wb(new Float32Array(f.array),16),p!==void 0&&(o.instanceColor=new Wb(new Float32Array(p.array),p.itemSize));break;case"LOD":o=new e0e;break;case"Line":o=new td(a(e.geometry),l(e.material));break;case"LineLoop":o=new GI(a(e.geometry),l(e.material));break;case"LineSegments":o=new Tl(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new HI(a(e.geometry),l(e.material));break;case"Sprite":o=new Qge(l(e.material));break;case"Group":o=new ba;break;case"Bone":o=new AE;break;default:o=new wn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let f=0;f<d.length;f++)o.add(this.parseObject(d[f],n,i,r,s))}if(e.animations!==void 0){const d=e.animations;for(let f=0;f<d.length;f++){const p=d[f];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let f=0;f<d.length;f++){const p=d[f],m=o.getObjectByProperty("uuid",p.object);m!==void 0&&o.addLevel(m,p.distance,p.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const r9e={UVMapping:LI,CubeReflectionMapping:ed,CubeRefractionMapping:Ff,EquirectangularReflectionMapping:Ub,EquirectangularRefractionMapping:h2,CubeUVReflectionMapping:Gv},ZQ={RepeatWrapping:ku,ClampToEdgeWrapping:zs,MirroredRepeatWrapping:mv},QQ={NearestFilter:ur,NearestMipmapNearestFilter:Gb,NearestMipmapLinearFilter:V0,LinearFilter:Ei,LinearMipmapNearestFilter:_E,LinearMipmapLinearFilter:Nc};class q9 extends qs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Av.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Av.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let pP,X9=class{static getContext(){return pP===void 0&&(pP=new(window.AudioContext||window.webkitAudioContext)),pP}static setContext(e){pP=e}};class s9e extends qs{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new js(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);X9.getContext().decodeAudioData(l,function(h){n(h)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class o9e extends WI{constructor(e,n,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new nt().set(e),s=new nt().set(n),o=new q(r.r,r.g,r.b),a=new q(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class a9e extends WI{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const i=new nt().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const eee=new at,tee=new at,Dg=new at;class l9e{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Vr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Vr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Dg.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,o=n.near*Math.tan($0*n.fov*.5)/n.zoom;let a,l;tee.elements[12]=-r,eee.elements[12]=r,a=-o*n.aspect+s,l=o*n.aspect+s,Dg.elements[0]=2*n.near/(l-a),Dg.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Dg),a=-o*n.aspect-s,l=o*n.aspect-s,Dg.elements[0]=2*n.near/(l-a),Dg.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Dg)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(tee),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(eee)}}class Y9{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=nee(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=nee();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function nee(){return(typeof performance>"u"?Date:performance).now()}const Og=new q,iee=new Rr,c9e=new q,Lg=new q;class u9e extends wn{constructor(){super(),this.type="AudioListener",this.context=X9.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Y9}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Og,iee,c9e),Lg.set(0,0,-1).applyQuaternion(iee),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Og.x,r),n.positionY.linearRampToValueAtTime(Og.y,r),n.positionZ.linearRampToValueAtTime(Og.z,r),n.forwardX.linearRampToValueAtTime(Lg.x,r),n.forwardY.linearRampToValueAtTime(Lg.y,r),n.forwardZ.linearRampToValueAtTime(Lg.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(Og.x,Og.y,Og.z),n.setOrientation(Lg.x,Lg.y,Lg.z,i.x,i.y,i.z)}}let T0e=class extends wn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const Rg=new q,ree=new Rr,h9e=new q,Ig=new q;class d9e extends T0e{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Rg,ree,h9e),Ig.set(0,0,1).applyQuaternion(ree);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Rg.x,i),n.positionY.linearRampToValueAtTime(Rg.y,i),n.positionZ.linearRampToValueAtTime(Rg.z,i),n.orientationX.linearRampToValueAtTime(Ig.x,i),n.orientationY.linearRampToValueAtTime(Ig.y,i),n.orientationZ.linearRampToValueAtTime(Ig.z,i)}else n.setPosition(Rg.x,Rg.y,Rg.z),n.setOrientation(Ig.x,Ig.y,Ig.z)}}class f9e{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class P0e{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,s,o;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(i[l]!==i[l+n]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let s=i,o=r;s!==o;++s)n[s]=n[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[n+o]=e[i+o]}_slerp(e,n,i,r){Rr.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,s){const o=this._workIndex*s;Rr.multiplyQuaternionsFlat(e,o,e,n,e,i),Rr.slerpFlat(e,n,e,n,e,o,r)}_lerp(e,n,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,n,i,r,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[i+o]*r}}}const K9="\\[\\]\\.:\\/",p9e=new RegExp("["+K9+"]","g"),J9="[^"+K9+"]",m9e="[^"+K9.replace("\\.","")+"]",g9e=/((?:WC+[\/:])*)/.source.replace("WC",J9),v9e=/(WCOD+)?/.source.replace("WCOD",m9e),y9e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",J9),x9e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",J9),b9e=new RegExp("^"+g9e+v9e+y9e+x9e+"$"),w9e=["material","materials","bones","map"];class _9e{constructor(e,n,i){const r=i||zn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class zn{constructor(e,n,i){this.path=n,this.parsedPath=i||zn.parseTrackName(n),this.node=zn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new zn.Composite(e,n,i):new zn(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(p9e,"")}static parseTrackName(e){const n=b9e.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);w9e.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=zn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}zn.Composite=_9e;zn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};zn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};zn.prototype.GetterByBindingType=[zn.prototype._getValue_direct,zn.prototype._getValue_array,zn.prototype._getValue_arrayElement,zn.prototype._getValue_toArray];zn.prototype.SetterByBindingTypeAndVersioning=[[zn.prototype._setValue_direct,zn.prototype._setValue_direct_setNeedsUpdate,zn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[zn.prototype._setValue_array,zn.prototype._setValue_array_setNeedsUpdate,zn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[zn.prototype._setValue_arrayElement,zn.prototype._setValue_arrayElement_setNeedsUpdate,zn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[zn.prototype._setValue_fromArray,zn.prototype._setValue_fromArray_setNeedsUpdate,zn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class S9e{constructor(){this.isAnimationObjectGroup=!0,this.uuid=gl(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let h=0,u=arguments.length;h!==u;++h){const d=arguments[h],f=d.uuid;let p=n[f];if(p===void 0){p=l++,n[f]=p,e.push(d);for(let m=0,g=o;m!==g;++m)s[m].push(new zn(d,i[m],r[m]))}else if(p<c){a=e[p];const m=--c,g=e[m];n[g.uuid]=p,e[p]=g,n[f]=m,e[m]=d;for(let v=0,y=o;v!==y;++v){const x=s[v],b=x[m];let S=x[p];x[p]=b,S===void 0&&(S=new zn(d,i[v],r[v])),x[m]=S}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,h=n[c];if(h!==void 0&&h>=s){const u=s++,d=e[u];n[d.uuid]=h,e[h]=d,n[c]=u,e[u]=l;for(let f=0,p=r;f!==p;++f){const m=i[f],g=m[u],v=m[h];m[h]=g,m[u]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],h=c.uuid,u=n[h];if(u!==void 0)if(delete n[h],u<s){const d=--s,f=e[d],p=--o,m=e[p];n[f.uuid]=u,e[u]=f,n[m.uuid]=d,e[d]=m,e.pop();for(let g=0,v=r;g!==v;++g){const y=i[g],x=y[d],b=y[p];y[u]=x,y[d]=b,y.pop()}}else{const d=--o,f=e[d];d>0&&(n[f.uuid]=u),e[u]=f,e.pop();for(let p=0,m=r;p!==m;++p){const g=i[p];g[u]=g[d],g.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,h=this.nCachedObjects_,u=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(n),s.push(u);for(let d=h,f=l.length;d!==f;++d){const p=l[d];u[d]=new zn(p,e,n)}return u}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class A9e{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:D0,endingEnd:D0};for(let c=0;c!==o;++c){const h=s[c].createInterpolant(null);a[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Pge,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case _9:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulateAdditive(a);break;case RI:default:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulate(r,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===Dge;if(e===0)return s===-1?r:o&&(s&1)===1?n-r:r;if(i===Tge){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=O0,r.endingEnd=O0):(e?r.endingStart=this.zeroSlopeAtStart?O0:D0:r.endingStart=d2,n?r.endingEnd=this.zeroSlopeAtEnd?O0:D0:r.endingEnd=d2)}_scheduleFading(e,n,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=i,this}}const M9e=new Float32Array(1);class E9e extends dd{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let h=c[l];h===void 0&&(h={},c[l]=h);for(let u=0;u!==s;++u){const d=r[u],f=d.name;let p=h[f];if(p!==void 0)++p.referenceCount,o[u]=p;else{if(p=o[u],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}const m=n&&n._propertyBindings[u].binding.parsedPath;p=new P0e(zn.create(i,f,m),d.ValueTypeName,d.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[u]=p}a[u].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,l[h]=c,l.pop(),e._byClipCacheIndex=null;const u=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete u[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[n];o===void 0&&(o={},r[n]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new H9(new Float32Array(2),new Float32Array(2),1,M9e),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=i,n[i]=s}clipAction(e,n,i){const r=n||this._root,s=r.uuid;let o=typeof e=="string"?Sv.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=RI),l!==void 0){const u=l.actionByRoot[s];if(u!==void 0&&u.blendMode===i)return u;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const h=new A9e(this,o,n,i);return this._bindAction(h,c),this._addInactiveAction(h,a,s),h}existingAction(e,n){const i=n||this._root,r=i.uuid,s=typeof e=="string"?Sv.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)n[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const h=c._cacheIndex,u=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=h,n[h]=u,n.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Z9{constructor(e){this.value=e}clone(){return new Z9(this.value.clone===void 0?this.value:this.value.clone())}}let C9e=0;class T9e extends dd{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:C9e++}),this.name="",this.usage=f2,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++)this.uniforms.push(n[i].clone());return this}clone(){return new this.constructor().copy(this)}}class P9e extends Mw{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class D9e{constructor(e,n,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class XI{constructor(e,n,i=0,r=1/0){this.ray=new sg(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new q0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,i=[]){return DG(e,this,i,n),i.sort(see),i}intersectObjects(e,n=!0,i=[]){for(let r=0,s=e.length;r<s;r++)DG(e[r],this,i,n);return i.sort(see),i}}function see(t,e){return t.distance-e.distance}function DG(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const r=t.children;for(let s=0,o=r.length;s<o;s++)DG(r[s],e,n,!0)}}class D0e{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(jr(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class O9e{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const oee=new Me;class O0e{constructor(e=new Me(1/0,1/0),n=new Me(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=oee.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,oee).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const aee=new q,mP=new q;class L0e{constructor(e=new q,n=new q){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){aee.subVectors(e,this.start),mP.subVectors(this.end,this.start);const i=mP.dot(mP);let s=mP.dot(aee)/i;return n&&(s=jr(s,0,1)),s}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const lee=new q;class R0e extends wn{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new yt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new it(r,3));const s=new $s({fog:!1,toneMapped:!1});this.cone=new Tl(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),lee.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(lee),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const xp=new q,gP=new at,WN=new at;class L9e extends Tl{constructor(e){const n=I0e(e),i=new yt,r=[],s=[],o=new nt(0,0,1),a=new nt(0,1,0);for(let c=0;c<n.length;c++){const h=n[c];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new it(r,3)),i.setAttribute("color",new it(s,3));const l=new $s({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");WN.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(gP.multiplyMatrices(WN,a.matrixWorld),xp.setFromMatrixPosition(gP),r.setXYZ(o,xp.x,xp.y,xp.z),gP.multiplyMatrices(WN,a.parent.matrixWorld),xp.setFromMatrixPosition(gP),r.setXYZ(o+1,xp.x,xp.y,xp.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function I0e(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,I0e(t.children[n]));return e}class B0e extends Lr{constructor(e,n,i){const r=new $v(n,4,2),s=new ls({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const R9e=new q,cee=new nt,uee=new nt;class I9e extends wn{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Pw(n);r.rotateY(Math.PI*.5),this.material=new ls({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Nt(o,3)),this.add(new Lr(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");cee.copy(this.light.color),uee.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?cee:uee;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(R9e.setFromMatrixPosition(this.light.matrixWorld).negate())}}class B9e extends Tl{constructor(e=10,n=10,i=4473924,r=8947848){i=new nt(i),r=new nt(r);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let d=0,f=0,p=-a;d<=n;d++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const m=d===s?i:r;m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3}const h=new yt;h.setAttribute("position",new it(l,3)),h.setAttribute("color",new it(c,3));const u=new $s({vertexColors:!0,toneMapped:!1});super(h,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class k9e extends Tl{constructor(e=10,n=16,i=8,r=64,s=4473924,o=8947848){s=new nt(s),o=new nt(o);const a=[],l=[];if(n>1)for(let u=0;u<n;u++){const d=u/n*(Math.PI*2),f=Math.sin(d)*e,p=Math.cos(d)*e;a.push(0,0,0),a.push(f,0,p);const m=u&1?s:o;l.push(m.r,m.g,m.b),l.push(m.r,m.g,m.b)}for(let u=0;u<i;u++){const d=u&1?s:o,f=e-e/i*u;for(let p=0;p<r;p++){let m=p/r*(Math.PI*2),g=Math.sin(m)*f,v=Math.cos(m)*f;a.push(g,0,v),l.push(d.r,d.g,d.b),m=(p+1)/r*(Math.PI*2),g=Math.sin(m)*f,v=Math.cos(m)*f,a.push(g,0,v),l.push(d.r,d.g,d.b)}}const c=new yt;c.setAttribute("position",new it(a,3)),c.setAttribute("color",new it(l,3));const h=new $s({vertexColors:!0,toneMapped:!1});super(c,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const hee=new q,vP=new q,dee=new q;class k0e extends wn{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new yt;r.setAttribute("position",new it([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new $s({fog:!1,toneMapped:!1});this.lightPlane=new td(r,s),this.add(this.lightPlane),r=new yt,r.setAttribute("position",new it([0,0,0,0,0,1],3)),this.targetLine=new td(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),hee.setFromMatrixPosition(this.light.matrixWorld),vP.setFromMatrixPosition(this.light.target.matrixWorld),dee.subVectors(vP,hee),this.lightPlane.lookAt(vP),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(vP),this.targetLine.scale.z=dee.length()}}const yP=new q,xr=new jv;class b2 extends Tl{constructor(e){const n=new yt,i=new $s({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,m){l(p),l(m)}function l(p){r.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(r.length/3-1)}n.setAttribute("position",new it(r,3)),n.setAttribute("color",new it(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new nt(16755200),h=new nt(16711680),u=new nt(43775),d=new nt(16777215),f=new nt(3355443);this.setColors(c,h,u,d,f)}setColors(e,n,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;xr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),kr("c",n,e,xr,0,0,-1),kr("t",n,e,xr,0,0,1),kr("n1",n,e,xr,-i,-r,-1),kr("n2",n,e,xr,i,-r,-1),kr("n3",n,e,xr,-i,r,-1),kr("n4",n,e,xr,i,r,-1),kr("f1",n,e,xr,-i,-r,1),kr("f2",n,e,xr,i,-r,1),kr("f3",n,e,xr,-i,r,1),kr("f4",n,e,xr,i,r,1),kr("u1",n,e,xr,i*.7,r*1.1,-1),kr("u2",n,e,xr,-i*.7,r*1.1,-1),kr("u3",n,e,xr,0,r*2,-1),kr("cf1",n,e,xr,-i,0,1),kr("cf2",n,e,xr,i,0,1),kr("cf3",n,e,xr,0,-r,1),kr("cf4",n,e,xr,0,r,1),kr("cn1",n,e,xr,-i,0,-1),kr("cn2",n,e,xr,i,0,-1),kr("cn3",n,e,xr,0,-r,-1),kr("cn4",n,e,xr,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function kr(t,e,n,i,r,s,o){yP.set(r,s,o).unproject(i);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],yP.x,yP.y,yP.z)}}const xP=new ao;class F9e extends Tl{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new yt;s.setIndex(new Nt(i,1)),s.setAttribute("position",new Nt(r,3)),super(s,new $s({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&xP.setFromObject(this.object),xP.isEmpty())return;const n=xP.min,i=xP.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class w2 extends Tl{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new yt;s.setIndex(new Nt(i,1)),s.setAttribute("position",new it(r,3)),super(s,new $s({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class N9e extends td{constructor(e,n=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new yt;o.setAttribute("position",new it(s,3)),o.computeBoundingSphere(),super(o,new $s({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new yt;l.setAttribute("position",new it(a,3)),l.computeBoundingSphere(),this.add(new Lr(l,new ls({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const fee=new q;let bP,$N;class z9e extends wn{constructor(e=new q(0,0,1),n=new q(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",bP===void 0&&(bP=new yt,bP.setAttribute("position",new it([0,0,0,0,1,0],3)),$N=new ag(0,.5,1,5,1),$N.translate(0,-.5,0)),this.position.copy(n),this.line=new td(bP,new $s({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Lr($N,new ls({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{fee.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(fee,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class F0e extends Tl{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new yt;r.setAttribute("position",new it(n,3)),r.setAttribute("color",new it(i,3));const s=new $s({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,i){const r=new nt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class U9e{constructor(){this.type="ShapePath",this.color=new nt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new xv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,o){return this.currentPath.bezierCurveTo(e,n,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(v){const y=[];for(let x=0,b=v.length;x<b;x++){const S=v[x],A=new Pu;A.curves=S.curves,y.push(A)}return y}function i(v,y){const x=y.length;let b=!1;for(let S=x-1,A=0;A<x;S=A++){let E=y[S],M=y[A],C=M.x-E.x,T=M.y-E.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(E=y[A],C=-C,M=y[S],T=-T),v.y<E.y||v.y>M.y)continue;if(v.y===E.y){if(v.x===E.x)return!0}else{const D=T*(v.x-E.x)-C*(v.y-E.y);if(D===0)return!0;if(D<0)continue;b=!b}}else{if(v.y!==E.y)continue;if(M.x<=v.x&&v.x<=E.x||E.x<=v.x&&v.x<=M.x)return!0}}return b}const r=Du.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Pu,l.curves=a.curves,c.push(l),c;let h=!r(s[0].getPoints());h=e?!h:h;const u=[],d=[];let f=[],p=0,m;d[p]=void 0,f[p]=[];for(let v=0,y=s.length;v<y;v++)a=s[v],m=a.getPoints(),o=r(m),o=e?!o:o,o?(!h&&d[p]&&p++,d[p]={s:new Pu,p:m},d[p].s.curves=a.curves,h&&p++,f[p]=[]):f[p].push({h:a,p:m[0]});if(!d[0])return n(s);if(d.length>1){let v=!1,y=0;for(let x=0,b=d.length;x<b;x++)u[x]=[];for(let x=0,b=d.length;x<b;x++){const S=f[x];for(let A=0;A<S.length;A++){const E=S[A];let M=!0;for(let C=0;C<d.length;C++)i(E.p,d[C].p)&&(x!==C&&y++,M?(M=!1,u[C].push(E)):v=!0);M&&u[x].push(E)}}y>0&&v===!1&&(f=u)}let g;for(let v=0,y=d.length;v<y;v++){l=d[v].s,c.push(l),g=f[v];for(let x=0,b=g.length;x<b;x++)l.holes.push(g[x].h)}return c}}const cf=G9e();function G9e(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,h=0;for(;!(c&8388608);)c<<=1,h-=8388608;c&=-8388609,h+=947912704,s[l]=c|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function H9e(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=jr(t,-65504,65504),cf.floatView[0]=t;const e=cf.uint32View[0],n=e>>23&511;return cf.baseTable[n]+((e&8388607)>>cf.shiftTable[n])}function j9e(t){const e=t>>10;return cf.uint32View[0]=cf.mantissaTable[cf.offsetTable[e]+(t&1023)]+cf.exponentTable[e],cf.floatView[0]}const xA={toHalfFloat:H9e,fromHalfFloat:j9e};class V9e extends Ia{constructor(e,n,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,i,r,s,o)}}class W9e extends CE{constructor(e,n,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,i,r)}}class $9e extends TE{constructor(e,n,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,i,r)}}class q9e extends Cw{constructor(e,n,i,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,i,r,s,o,a)}}class X9e extends ag{constructor(e,n,i,r,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,i,r,s,o,a,l)}}class Y9e extends Tw{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class K9e extends PE{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class J9e extends Wv{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class Z9e extends Vv{constructor(e,n,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,i,r)}}class Q9e extends Pw{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class eWe extends og{constructor(e,n,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,i,r)}}class tWe extends Qf{constructor(e,n,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,i,r)}}class nWe extends DE{constructor(e,n,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,i,r,s,o)}}class iWe extends OE{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class rWe extends $v{constructor(e,n,i,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,i,r,s,o,a)}}class sWe extends LE{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class oWe extends RE{constructor(e,n,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,i,r,s)}}class aWe extends Dw{constructor(e,n,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,i,r,s,o)}}class lWe extends IE{constructor(e,n,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:DI}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=DI);const cWe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:b9,AddEquation:f0,AddOperation:lge,AdditiveAnimationBlendMode:_9,AdditiveBlending:X6,AlphaFormat:yge,AlwaysDepth:tge,AlwaysStencilFunc:Bge,AmbientLight:A0e,AmbientLightProbe:a9e,AnimationClip:Sv,AnimationLoader:Z8e,AnimationMixer:E9e,AnimationObjectGroup:S9e,AnimationUtils:X8e,ArcCurve:n0e,ArrayCamera:Yge,ArrowHelper:z9e,Audio:T0e,AudioAnalyser:f9e,AudioContext:X9,AudioListener:u9e,AudioLoader:s9e,AxesHelper:F0e,BackSide:Ca,BasicDepthPacking:Lge,BasicShadowMap:Gme,Bone:AE,BooleanKeyframeTrack:Xv,Box2:O0e,Box3:ao,Box3Helper:w2,BoxBufferGeometry:V9e,BoxGeometry:Ia,BoxHelper:F9e,BufferAttribute:Nt,BufferGeometry:yt,BufferGeometryLoader:qI,ByteType:fge,Cache:Av,Camera:jv,CameraHelper:b2,CanvasTexture:y8e,CapsuleBufferGeometry:W9e,CapsuleGeometry:CE,CatmullRomCurve3:i0e,CineonToneMapping:hge,CircleBufferGeometry:$9e,CircleGeometry:TE,ClampToEdgeWrapping:zs,Clock:Y9,Color:nt,ColorKeyframeTrack:j9,ColorManagement:wo,CompressedArrayTexture:v8e,CompressedTexture:I9,CompressedTextureLoader:Q8e,ConeBufferGeometry:q9e,ConeGeometry:Cw,CubeCamera:Hge,CubeReflectionMapping:ed,CubeRefractionMapping:Ff,CubeTexture:Sw,CubeTextureLoader:_0e,CubeUVReflectionMapping:Gv,CubicBezierCurve:Tc,CubicBezierCurve3:sM,CubicInterpolant:y0e,CullFaceBack:q6,CullFaceFront:Ume,CullFaceFrontBack:xUe,CullFaceNone:zme,Curve:Vu,CurvePath:z9,CustomBlending:Hme,CustomToneMapping:dge,CylinderBufferGeometry:X9e,CylinderGeometry:ag,Cylindrical:O9e,Data3DTexture:E9,DataArrayTexture:BI,DataTexture:Zx,DataTextureLoader:S0e,DataUtils:xA,DecrementStencilOp:PUe,DecrementWrapStencilOp:OUe,DefaultLoadingManager:w0e,DepthFormat:Bm,DepthStencilFormat:gv,DepthTexture:Kge,DirectionalLight:FE,DirectionalLightHelper:k0e,DiscreteInterpolant:x0e,DisplayP3ColorSpace:S9,DodecahedronBufferGeometry:Y9e,DodecahedronGeometry:Tw,DoubleSide:Ec,DstAlphaFactor:Yme,DstColorFactor:Jme,DynamicCopyUsage:$Ue,DynamicDrawUsage:UUe,DynamicReadUsage:jUe,EdgesGeometry:r0e,EllipseCurve:EE,EqualDepth:ige,EqualStencilFunc:BUe,EquirectangularReflectionMapping:Ub,EquirectangularRefractionMapping:h2,Euler:Dc,EventDispatcher:dd,ExtrudeBufferGeometry:K9e,ExtrudeGeometry:PE,FileLoader:js,Float16BufferAttribute:Uge,Float32BufferAttribute:it,Float64BufferAttribute:L6e,FloatType:Cc,Fog:SE,FogExp2:zI,FramebufferTexture:g8e,FrontSide:Bu,Frustum:kI,GLBufferAttribute:D9e,GLSL1:XUe,GLSL3:_G,GreaterDepth:sge,GreaterEqualDepth:rge,GreaterEqualStencilFunc:zUe,GreaterStencilFunc:FUe,GridHelper:B9e,Group:ba,HalfFloatType:vu,HemisphereLight:W9,HemisphereLightHelper:I9e,HemisphereLightProbe:o9e,IcosahedronBufferGeometry:J9e,IcosahedronGeometry:Wv,ImageBitmapLoader:q9,ImageLoader:x2,ImageUtils:M9,IncrementStencilOp:TUe,IncrementWrapStencilOp:DUe,InstancedBufferAttribute:Wb,InstancedBufferGeometry:C0e,InstancedInterleavedBuffer:P9e,InstancedMesh:R9,Int16BufferAttribute:D6e,Int32BufferAttribute:O6e,Int8BufferAttribute:C6e,IntType:mge,InterleavedBuffer:Mw,InterleavedBufferAttribute:Gf,Interpolant:qv,InterpolateDiscrete:vv,InterpolateLinear:zf,InterpolateSmooth:LD,InvertStencilOp:LUe,KeepStencilOp:RD,KeyframeTrack:Wu,LOD:e0e,LatheBufferGeometry:Z9e,LatheGeometry:Vv,Layers:q0,LessDepth:nge,LessEqualDepth:KO,LessEqualStencilFunc:kUe,LessStencilFunc:IUe,Light:ep,LightProbe:WI,Line:td,Line3:L0e,LineBasicMaterial:$s,LineCurve:Oc,LineCurve3:k9,LineDashedMaterial:g0e,LineLoop:GI,LineSegments:Tl,LinearEncoding:Ra,LinearFilter:Ei,LinearInterpolant:H9,LinearMipMapLinearFilter:AUe,LinearMipMapNearestFilter:SUe,LinearMipmapLinearFilter:Nc,LinearMipmapNearestFilter:_E,LinearSRGBColorSpace:yv,LinearToneMapping:cge,Loader:qs,LoaderUtils:vl,LoadingManager:V9,LoopOnce:Tge,LoopPingPong:Dge,LoopRepeat:Pge,LuminanceAlphaFormat:bge,LuminanceFormat:xge,MOUSE:vUe,Material:gr,MaterialLoader:$I,MathUtils:zi,Matrix3:Wr,Matrix4:at,MaxEquation:Z6,Mesh:Lr,MeshBasicMaterial:ls,MeshDepthMaterial:D9,MeshDistanceMaterial:O9,MeshLambertMaterial:p0e,MeshMatcapMaterial:m0e,MeshNormalMaterial:f0e,MeshPhongMaterial:h0e,MeshPhysicalMaterial:Ro,MeshStandardMaterial:lg,MeshToonMaterial:d0e,MinEquation:J6,MirroredRepeatWrapping:mv,MixOperation:age,MultiplyBlending:K6,MultiplyOperation:wE,NearestFilter:ur,NearestMipMapLinearFilter:_Ue,NearestMipMapNearestFilter:wUe,NearestMipmapLinearFilter:V0,NearestMipmapNearestFilter:Gb,NeverDepth:ege,NeverStencilFunc:RUe,NoBlending:Ef,NoColorSpace:MUe,NoToneMapping:Tu,NormalAnimationBlendMode:RI,NormalBlending:j0,NotEqualDepth:oge,NotEqualStencilFunc:NUe,NumberKeyframeTrack:wv,Object3D:wn,ObjectLoader:i9e,ObjectSpaceNormalMap:Ige,OctahedronBufferGeometry:Q9e,OctahedronGeometry:Pw,OneFactor:$me,OneMinusDstAlphaFactor:Kme,OneMinusDstColorFactor:Zme,OneMinusSrcAlphaFactor:x9,OneMinusSrcColorFactor:Xme,OrthographicCamera:Uf,PCFShadowMap:OI,PCFSoftShadowMap:tM,PMREMGenerator:AG,Path:xv,PerspectiveCamera:Vr,Plane:lf,PlaneBufferGeometry:eWe,PlaneGeometry:og,PlaneHelper:N9e,PointLight:kE,PointLightHelper:B0e,Points:HI,PointsMaterial:ME,PolarGridHelper:k9e,PolyhedronBufferGeometry:tWe,PolyhedronGeometry:Qf,PositionalAudio:d9e,PropertyBinding:zn,PropertyMixer:P0e,QuadraticBezierCurve:Hf,QuadraticBezierCurve3:F9,Quaternion:Rr,QuaternionKeyframeTrack:nd,QuaternionLinearInterpolant:b0e,RED_GREEN_RGTC2_Format:bG,RED_RGTC1_Format:Cge,REVISION:DI,RGBADepthPacking:Rge,RGBAFormat:fa,RGBAIntegerFormat:Mge,RGBA_ASTC_10x10_Format:gG,RGBA_ASTC_10x5_Format:fG,RGBA_ASTC_10x6_Format:pG,RGBA_ASTC_10x8_Format:mG,RGBA_ASTC_12x10_Format:vG,RGBA_ASTC_12x12_Format:yG,RGBA_ASTC_4x4_Format:sG,RGBA_ASTC_5x4_Format:oG,RGBA_ASTC_5x5_Format:aG,RGBA_ASTC_6x5_Format:lG,RGBA_ASTC_6x6_Format:cG,RGBA_ASTC_8x5_Format:uG,RGBA_ASTC_8x6_Format:hG,RGBA_ASTC_8x8_Format:dG,RGBA_BPTC_Format:OD,RGBA_ETC2_EAC_Format:rG,RGBA_PVRTC_2BPPV1_Format:nG,RGBA_PVRTC_4BPPV1_Format:tG,RGBA_S3TC_DXT1_Format:TD,RGBA_S3TC_DXT3_Format:PD,RGBA_S3TC_DXT5_Format:DD,RGB_ETC1_Format:Ege,RGB_ETC2_Format:iG,RGB_PVRTC_2BPPV1_Format:eG,RGB_PVRTC_4BPPV1_Format:Q6,RGB_S3TC_DXT1_Format:CD,RGFormat:Sge,RGIntegerFormat:Age,RawShaderMaterial:u0e,Ray:sg,Raycaster:XI,RectAreaLight:M0e,RedFormat:wge,RedIntegerFormat:_ge,ReinhardToneMapping:uge,RepeatWrapping:ku,ReplaceStencilOp:CUe,ReverseSubtractEquation:Vme,RingBufferGeometry:nWe,RingGeometry:DE,SIGNED_RED_GREEN_RGTC2_Format:wG,SIGNED_RED_RGTC1_Format:xG,SRGBColorSpace:Ja,Scene:Vb,ShaderChunk:Mn,ShaderLib:fc,ShaderMaterial:zc,ShadowMaterial:c0e,Shape:Pu,ShapeBufferGeometry:iWe,ShapeGeometry:OE,ShapePath:U9e,ShapeUtils:Du,ShortType:pge,Skeleton:Ew,SkeletonHelper:L9e,SkinnedMesh:UI,Source:L0,Sphere:Oo,SphereBufferGeometry:rWe,SphereGeometry:$v,Spherical:D0e,SphericalHarmonics3:E0e,SplineCurve:jI,SpotLight:BE,SpotLightHelper:R0e,Sprite:Qge,SpriteMaterial:L9,SrcAlphaFactor:y9,SrcAlphaSaturateFactor:Qme,SrcColorFactor:qme,StaticCopyUsage:WUe,StaticDrawUsage:f2,StaticReadUsage:HUe,StereoCamera:l9e,StreamCopyUsage:qUe,StreamDrawUsage:GUe,StreamReadUsage:VUe,StringKeyframeTrack:Yv,SubtractEquation:jme,SubtractiveBlending:Y6,TOUCH:yUe,TangentSpaceNormalMap:Zf,TetrahedronBufferGeometry:sWe,TetrahedronGeometry:LE,Texture:bi,TextureLoader:Ow,TorusBufferGeometry:oWe,TorusGeometry:RE,TorusKnotBufferGeometry:aWe,TorusKnotGeometry:Dw,Triangle:Zo,TriangleFanDrawMode:Hb,TriangleStripDrawMode:II,TrianglesDrawMode:Oge,TubeBufferGeometry:lWe,TubeGeometry:IE,TwoPassDoubleSide:bUe,UVMapping:LI,Uint16BufferAttribute:C9,Uint32BufferAttribute:Jx,Uint8BufferAttribute:T6e,Uint8ClampedBufferAttribute:P6e,Uniform:Z9,UniformsGroup:T9e,UniformsLib:ct,UniformsUtils:Hv,UnsignedByteType:Nf,UnsignedInt248Type:W0,UnsignedIntType:em,UnsignedShort4444Type:gge,UnsignedShort5551Type:vge,UnsignedShortType:w9,VSMShadowMap:P0,Vector2:Me,Vector3:q,Vector4:sn,VectorKeyframeTrack:_v,VideoTexture:t0e,WebGL1Renderer:Jge,WebGL3DRenderTarget:v6e,WebGLArrayRenderTarget:g6e,WebGLCubeRenderTarget:T9,WebGLMultipleRenderTargets:y6e,WebGLRenderTarget:Fu,WebGLRenderer:NI,WebGLUtils:Xge,WireframeGeometry:l0e,WrapAroundEnding:d2,ZeroCurvatureEnding:D0,ZeroFactor:Wme,ZeroSlopeEnding:O0,ZeroStencilOp:EUe,_SRGBAFormat:JO,sRGBEncoding:xn},Symbol.toStringTag,{value:"Module"}));var nm={},uWe={get exports(){return nm},set exports(t){nm=t}},Kv={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Kv.ConcurrentRoot=1;Kv.ContinuousEventPriority=4;Kv.DefaultEventPriority=16;Kv.DiscreteEventPriority=1;Kv.IdleEventPriority=536870912;Kv.LegacyRoot=0;(function(t){t.exports=Kv})(uWe);function hWe(t){let e;const n=new Set,i=(c,h)=>{const u=typeof c=="function"?c(e):c;if(u!==e){const d=e;e=h?u:Object.assign({},e,u),n.forEach(f=>f(e,d))}},r=()=>e,s=(c,h=r,u=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=h(e);function f(){const p=h(e);if(!u(d,p)){const m=d;c(d=p,m)}}return n.add(f),()=>n.delete(f)},l={setState:i,getState:r,subscribe:(c,h,u)=>h||u?s(c,h,u):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(i,r,l),l}const dWe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),pee=dWe?W.useEffect:W.useLayoutEffect;function N0e(t){const e=typeof t=="function"?hWe(t):t,n=(i=e.getState,r=Object.is)=>{const[,s]=W.useReducer(g=>g+1,0),o=e.getState(),a=W.useRef(o),l=W.useRef(i),c=W.useRef(r),h=W.useRef(!1),u=W.useRef();u.current===void 0&&(u.current=i(o));let d,f=!1;(a.current!==o||l.current!==i||c.current!==r||h.current)&&(d=i(o),f=!r(u.current,d)),pee(()=>{f&&(u.current=d),a.current=o,l.current=i,c.current=r,h.current=!1});const p=W.useRef(o);pee(()=>{const g=()=>{try{const y=e.getState(),x=l.current(y);c.current(u.current,x)||(a.current=y,u.current=x,s())}catch{h.current=!0,s()}},v=e.subscribe(g);return e.getState()!==p.current&&g(),v},[]);const m=f?d:u.current;return W.useDebugValue(m),m};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}var OG={},fWe={get exports(){return OG},set exports(t){OG=t}},_2={},pWe={get exports(){return _2},set exports(t){_2=t}},z0e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,V){var U=F.length;F.push(V);e:for(;0<U;){var j=U-1>>>1,z=F[j];if(0<r(z,V))F[j]=V,F[U]=z,U=j;else break e}}function n(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var V=F[0],U=F.pop();if(U!==V){F[0]=U;e:for(var j=0,z=F.length,Y=z>>>1;j<Y;){var J=2*(j+1)-1,K=F[J],X=J+1,te=F[X];if(0>r(K,U))X<z&&0>r(te,K)?(F[j]=te,F[X]=U,j=X):(F[j]=K,F[J]=U,j=J);else if(X<z&&0>r(te,U))F[j]=te,F[X]=U,j=X;else break e}}return V}function r(F,V){var U=F.sortIndex-V.sortIndex;return U!==0?U:F.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,u=null,d=3,f=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(F){for(var V=n(c);V!==null;){if(V.callback===null)i(c);else if(V.startTime<=F)i(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function b(F){if(m=!1,x(F),!p)if(n(l)!==null)p=!0,Z(S);else{var V=n(c);V!==null&&ee(b,V.startTime-F)}}function S(F,V){p=!1,m&&(m=!1,v(M),M=-1),f=!0;var U=d;try{for(x(V),u=n(l);u!==null&&(!(u.expirationTime>V)||F&&!D());){var j=u.callback;if(typeof j=="function"){u.callback=null,d=u.priorityLevel;var z=j(u.expirationTime<=V);V=t.unstable_now(),typeof z=="function"?u.callback=z:u===n(l)&&i(l),x(V)}else i(l);u=n(l)}if(u!==null)var Y=!0;else{var J=n(c);J!==null&&ee(b,J.startTime-V),Y=!1}return Y}finally{u=null,d=U,f=!1}}var A=!1,E=null,M=-1,C=5,T=-1;function D(){return!(t.unstable_now()-T<C)}function L(){if(E!==null){var F=t.unstable_now();T=F;var V=!0;try{V=E(!0,F)}finally{V?I():(A=!1,E=null)}}else A=!1}var I;if(typeof y=="function")I=function(){y(L)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,H=R.port2;R.port1.onmessage=L,I=function(){H.postMessage(null)}}else I=function(){g(L,0)};function Z(F){E=F,A||(A=!0,I())}function ee(F,V){M=g(function(){F(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,Z(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var U=d;d=V;try{return F()}finally{d=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,V){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var U=d;d=F;try{return V()}finally{d=U}},t.unstable_scheduleCallback=function(F,V,U){var j=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?j+U:j):U=j,F){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=U+z,F={id:h++,callback:V,priorityLevel:F,startTime:U,expirationTime:z,sortIndex:-1},U>j?(F.sortIndex=U,e(c,F),n(l)===null&&F===n(c)&&(m?(v(M),M=-1):m=!0,ee(b,U-j))):(F.sortIndex=z,e(l,F),p||f||(p=!0,Z(S))),F},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(F){var V=d;return function(){var U=d;d=V;try{return F.apply(this,arguments)}finally{d=U}}}})(z0e);(function(t){t.exports=z0e})(pWe);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mWe=function(e){var n={},i=W,r=_2,s=Object.assign;function o(w){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+w,P=1;P<arguments.length;P++)_+="&args[]="+encodeURIComponent(arguments[P]);return"Minified React error #"+w+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),S=Symbol.iterator;function A(w){return w===null||typeof w!="object"?null:(w=S&&w[S]||w["@@iterator"],typeof w=="function"?w:null)}function E(w){if(w==null)return null;if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case h:return"Fragment";case c:return"Portal";case d:return"Profiler";case u:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case p:return(w.displayName||"Context")+".Consumer";case f:return(w._context.displayName||"Context")+".Provider";case m:var _=w.render;return w=w.displayName,w||(w=_.displayName||_.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case y:return _=w.displayName||null,_!==null?_:E(w.type)||"Memo";case x:_=w._payload,w=w._init;try{return E(w(_))}catch{}}return null}function M(w){var _=w.type;switch(w.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return w=_.render,w=w.displayName||w.name||"",_.displayName||(w!==""?"ForwardRef("+w+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(_);case 8:return _===u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function C(w){var _=w,P=w;if(w.alternate)for(;_.return;)_=_.return;else{w=_;do _=w,_.flags&4098&&(P=_.return),w=_.return;while(w)}return _.tag===3?P:null}function T(w){if(C(w)!==w)throw Error(o(188))}function D(w){var _=w.alternate;if(!_){if(_=C(w),_===null)throw Error(o(188));return _!==w?null:w}for(var P=w,O=_;;){var k=P.return;if(k===null)break;var $=k.alternate;if($===null){if(O=k.return,O!==null){P=O;continue}break}if(k.child===$.child){for($=k.child;$;){if($===P)return T(k),w;if($===O)return T(k),_;$=$.sibling}throw Error(o(188))}if(P.return!==O.return)P=k,O=$;else{for(var me=!1,De=k.child;De;){if(De===P){me=!0,P=k,O=$;break}if(De===O){me=!0,O=k,P=$;break}De=De.sibling}if(!me){for(De=$.child;De;){if(De===P){me=!0,P=$,O=k;break}if(De===O){me=!0,O=$,P=k;break}De=De.sibling}if(!me)throw Error(o(189))}}if(P.alternate!==O)throw Error(o(190))}if(P.tag!==3)throw Error(o(188));return P.stateNode.current===P?w:_}function L(w){return w=D(w),w!==null?I(w):null}function I(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){var _=I(w);if(_!==null)return _;w=w.sibling}return null}function R(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){if(w.tag!==4){var _=R(w);if(_!==null)return _}w=w.sibling}return null}var H=Array.isArray,Z=e.getPublicInstance,ee=e.getRootHostContext,F=e.getChildHostContext,V=e.prepareForCommit,U=e.resetAfterCommit,j=e.createInstance,z=e.appendInitialChild,Y=e.finalizeInitialChildren,J=e.prepareUpdate,K=e.shouldSetTextContent,X=e.createTextInstance,te=e.scheduleTimeout,re=e.cancelTimeout,se=e.noTimeout,ce=e.isPrimaryRenderer,ge=e.supportsMutation,oe=e.supportsPersistence,ae=e.supportsHydration,ye=e.getInstanceFromNode,we=e.preparePortalMount,Se=e.getCurrentEventPriority,Pe=e.detachDeletedInstance,Te=e.supportsMicrotasks,Ie=e.scheduleMicrotask,xe=e.supportsTestSelectors,Re=e.findFiberRoot,N=e.getBoundingRect,B=e.getTextContent,le=e.isHiddenSubtree,_e=e.matchAccessibilityRole,Ee=e.setFocusIfFocusable,Fe=e.setupIntersectionObserver,Ze=e.appendChild,Ue=e.appendChildToContainer,be=e.commitTextUpdate,Xe=e.commitMount,Ge=e.commitUpdate,We=e.insertBefore,Je=e.insertInContainerBefore,Qe=e.removeChild,xt=e.removeChildFromContainer,Vt=e.resetTextContent,gn=e.hideInstance,ie=e.hideTextInstance,ve=e.unhideInstance,Ce=e.unhideTextInstance,Ne=e.clearContainer,$e=e.cloneInstance,Ct=e.createContainerChildSet,rn=e.appendChildToContainerChildSet,Cn=e.finalizeContainerChildren,Ir=e.replaceContainerChildren,en=e.cloneHiddenInstance,Ui=e.cloneHiddenTextInstance,Gi=e.canHydrateInstance,hy=e.canHydrateTextInstance,h_=e.canHydrateSuspenseInstance,dy=e.isSuspenseInstancePending,fe=e.isSuspenseInstanceFallback,Q=e.registerSuspenseInstanceRetry,pe=e.getNextHydratableSibling,he=e.getFirstHydratableChild,de=e.getFirstHydratableChildWithinContainer,Le=e.getFirstHydratableChildWithinSuspenseInstance,tt=e.hydrateInstance,ht=e.hydrateTextInstance,pt=e.hydrateSuspenseInstance,bt=e.getNextHydratableInstanceAfterSuspenseInstance,Tt=e.commitHydratedContainer,St=e.commitHydratedSuspenseInstance,zt=e.clearSuspenseBoundary,qn=e.clearSuspenseBoundaryFromContainer,Hi=e.shouldDeleteUnhydratedTailInstances,us=e.didNotMatchHydratedContainerTextInstance,ni=e.didNotMatchHydratedTextInstance,It;function fn(w){if(It===void 0)try{throw Error()}catch(P){var _=P.stack.trim().match(/\n( *(at )?)/);It=_&&_[1]||""}return`
`+It+w}var Di=!1;function ko(w,_){if(!w||Di)return"";Di=!0;var P=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(lt){var O=lt}Reflect.construct(w,[],_)}else{try{_.call()}catch(lt){O=lt}w.call(_.prototype)}else{try{throw Error()}catch(lt){O=lt}w()}}catch(lt){if(lt&&O&&typeof lt.stack=="string"){for(var k=lt.stack.split(`
`),$=O.stack.split(`
`),me=k.length-1,De=$.length-1;1<=me&&0<=De&&k[me]!==$[De];)De--;for(;1<=me&&0<=De;me--,De--)if(k[me]!==$[De]){if(me!==1||De!==1)do if(me--,De--,0>De||k[me]!==$[De]){var qe=`
`+k[me].replace(" at new "," at ");return w.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",w.displayName)),qe}while(1<=me&&0<=De);break}}}finally{Di=!1,Error.prepareStackTrace=P}return(w=w?w.displayName||w.name:"")?fn(w):""}var Ll=Object.prototype.hasOwnProperty,Rl=[],lo=-1;function gi(w){return{current:w}}function tn(w){0>lo||(w.current=Rl[lo],Rl[lo]=null,lo--)}function Pn(w,_){lo++,Rl[lo]=w.current,w.current=_}var Oi={},Gn=gi(Oi),Kr=gi(!1),Il=Oi;function _d(w,_){var P=w.type.contextTypes;if(!P)return Oi;var O=w.stateNode;if(O&&O.__reactInternalMemoizedUnmaskedChildContext===_)return O.__reactInternalMemoizedMaskedChildContext;var k={},$;for($ in P)k[$]=_[$];return O&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=_,w.__reactInternalMemoizedMaskedChildContext=k),k}function oa(w){return w=w.childContextTypes,w!=null}function vC(){tn(Kr),tn(Gn)}function Iq(w,_,P){if(Gn.current!==Oi)throw Error(o(168));Pn(Gn,_),Pn(Kr,P)}function Bq(w,_,P){var O=w.stateNode;if(_=_.childContextTypes,typeof O.getChildContext!="function")return P;O=O.getChildContext();for(var k in O)if(!(k in _))throw Error(o(108,M(w)||"Unknown",k));return s({},P,O)}function yC(w){return w=(w=w.stateNode)&&w.__reactInternalMemoizedMergedChildContext||Oi,Il=Gn.current,Pn(Gn,w),Pn(Kr,Kr.current),!0}function kq(w,_,P){var O=w.stateNode;if(!O)throw Error(o(169));P?(w=Bq(w,_,Il),O.__reactInternalMemoizedMergedChildContext=w,tn(Kr),tn(Gn),Pn(Gn,w)):tn(Kr),Pn(Kr,P)}var qc=Math.clz32?Math.clz32:pMe,dMe=Math.log,fMe=Math.LN2;function pMe(w){return w>>>=0,w===0?32:31-(dMe(w)/fMe|0)|0}var xC=64,bC=4194304;function d_(w){switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return w&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return w}}function wC(w,_){var P=w.pendingLanes;if(P===0)return 0;var O=0,k=w.suspendedLanes,$=w.pingedLanes,me=P&268435455;if(me!==0){var De=me&~k;De!==0?O=d_(De):($&=me,$!==0&&(O=d_($)))}else me=P&~k,me!==0?O=d_(me):$!==0&&(O=d_($));if(O===0)return 0;if(_!==0&&_!==O&&!(_&k)&&(k=O&-O,$=_&-_,k>=$||k===16&&($&4194240)!==0))return _;if(O&4&&(O|=P&16),_=w.entangledLanes,_!==0)for(w=w.entanglements,_&=O;0<_;)P=31-qc(_),k=1<<P,O|=w[P],_&=~k;return O}function mMe(w,_){switch(w){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gMe(w,_){for(var P=w.suspendedLanes,O=w.pingedLanes,k=w.expirationTimes,$=w.pendingLanes;0<$;){var me=31-qc($),De=1<<me,qe=k[me];qe===-1?(!(De&P)||De&O)&&(k[me]=mMe(De,_)):qe<=_&&(w.expiredLanes|=De),$&=~De}}function fk(w){return w=w.pendingLanes&-1073741825,w!==0?w:w&1073741824?1073741824:0}function pk(w){for(var _=[],P=0;31>P;P++)_.push(w);return _}function f_(w,_,P){w.pendingLanes|=_,_!==536870912&&(w.suspendedLanes=0,w.pingedLanes=0),w=w.eventTimes,_=31-qc(_),w[_]=P}function vMe(w,_){var P=w.pendingLanes&~_;w.pendingLanes=_,w.suspendedLanes=0,w.pingedLanes=0,w.expiredLanes&=_,w.mutableReadLanes&=_,w.entangledLanes&=_,_=w.entanglements;var O=w.eventTimes;for(w=w.expirationTimes;0<P;){var k=31-qc(P),$=1<<k;_[k]=0,O[k]=-1,w[k]=-1,P&=~$}}function mk(w,_){var P=w.entangledLanes|=_;for(w=w.entanglements;P;){var O=31-qc(P),k=1<<O;k&_|w[O]&_&&(w[O]|=_),P&=~k}}var Xn=0;function Fq(w){return w&=-w,1<w?4<w?w&268435455?16:536870912:4:1}var gk=r.unstable_scheduleCallback,Nq=r.unstable_cancelCallback,yMe=r.unstable_shouldYield,xMe=r.unstable_requestPaint,Ps=r.unstable_now,vk=r.unstable_ImmediatePriority,bMe=r.unstable_UserBlockingPriority,yk=r.unstable_NormalPriority,wMe=r.unstable_IdlePriority,_C=null,Ku=null;function _Me(w){if(Ku&&typeof Ku.onCommitFiberRoot=="function")try{Ku.onCommitFiberRoot(_C,w,void 0,(w.current.flags&128)===128)}catch{}}function SMe(w,_){return w===_&&(w!==0||1/w===1/_)||w!==w&&_!==_}var Ju=typeof Object.is=="function"?Object.is:SMe,Sd=null,SC=!1,xk=!1;function zq(w){Sd===null?Sd=[w]:Sd.push(w)}function AMe(w){SC=!0,zq(w)}function Zu(){if(!xk&&Sd!==null){xk=!0;var w=0,_=Xn;try{var P=Sd;for(Xn=1;w<P.length;w++){var O=P[w];do O=O(!0);while(O!==null)}Sd=null,SC=!1}catch(k){throw Sd!==null&&(Sd=Sd.slice(w+1)),gk(vk,Zu),k}finally{Xn=_,xk=!1}}return null}var MMe=a.ReactCurrentBatchConfig;function AC(w,_){if(Ju(w,_))return!0;if(typeof w!="object"||w===null||typeof _!="object"||_===null)return!1;var P=Object.keys(w),O=Object.keys(_);if(P.length!==O.length)return!1;for(O=0;O<P.length;O++){var k=P[O];if(!Ll.call(_,k)||!Ju(w[k],_[k]))return!1}return!0}function EMe(w){switch(w.tag){case 5:return fn(w.type);case 16:return fn("Lazy");case 13:return fn("Suspense");case 19:return fn("SuspenseList");case 0:case 2:case 15:return w=ko(w.type,!1),w;case 11:return w=ko(w.type.render,!1),w;case 1:return w=ko(w.type,!0),w;default:return""}}function Xc(w,_){if(w&&w.defaultProps){_=s({},_),w=w.defaultProps;for(var P in w)_[P]===void 0&&(_[P]=w[P]);return _}return _}var MC=gi(null),EC=null,fy=null,bk=null;function wk(){bk=fy=EC=null}function Uq(w,_,P){ce?(Pn(MC,_._currentValue),_._currentValue=P):(Pn(MC,_._currentValue2),_._currentValue2=P)}function _k(w){var _=MC.current;tn(MC),ce?w._currentValue=_:w._currentValue2=_}function Sk(w,_,P){for(;w!==null;){var O=w.alternate;if((w.childLanes&_)!==_?(w.childLanes|=_,O!==null&&(O.childLanes|=_)):O!==null&&(O.childLanes&_)!==_&&(O.childLanes|=_),w===P)break;w=w.return}}function py(w,_){EC=w,bk=fy=null,w=w.dependencies,w!==null&&w.firstContext!==null&&(w.lanes&_&&(Ga=!0),w.firstContext=null)}function Bl(w){var _=ce?w._currentValue:w._currentValue2;if(bk!==w)if(w={context:w,memoizedValue:_,next:null},fy===null){if(EC===null)throw Error(o(308));fy=w,EC.dependencies={lanes:0,firstContext:w}}else fy=fy.next=w;return _}var Qu=null,op=!1;function Ak(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gq(w,_){w=w.updateQueue,_.updateQueue===w&&(_.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,effects:w.effects})}function Ad(w,_){return{eventTime:w,lane:_,tag:0,payload:null,callback:null,next:null}}function ap(w,_){var P=w.updateQueue;P!==null&&(P=P.shared,Jr!==null&&w.mode&1&&!(Tn&2)?(w=P.interleaved,w===null?(_.next=_,Qu===null?Qu=[P]:Qu.push(P)):(_.next=w.next,w.next=_),P.interleaved=_):(w=P.pending,w===null?_.next=_:(_.next=w.next,w.next=_),P.pending=_))}function CC(w,_,P){if(_=_.updateQueue,_!==null&&(_=_.shared,(P&4194240)!==0)){var O=_.lanes;O&=w.pendingLanes,P|=O,_.lanes=P,mk(w,P)}}function Hq(w,_){var P=w.updateQueue,O=w.alternate;if(O!==null&&(O=O.updateQueue,P===O)){var k=null,$=null;if(P=P.firstBaseUpdate,P!==null){do{var me={eventTime:P.eventTime,lane:P.lane,tag:P.tag,payload:P.payload,callback:P.callback,next:null};$===null?k=$=me:$=$.next=me,P=P.next}while(P!==null);$===null?k=$=_:$=$.next=_}else k=$=_;P={baseState:O.baseState,firstBaseUpdate:k,lastBaseUpdate:$,shared:O.shared,effects:O.effects},w.updateQueue=P;return}w=P.lastBaseUpdate,w===null?P.firstBaseUpdate=_:w.next=_,P.lastBaseUpdate=_}function TC(w,_,P,O){var k=w.updateQueue;op=!1;var $=k.firstBaseUpdate,me=k.lastBaseUpdate,De=k.shared.pending;if(De!==null){k.shared.pending=null;var qe=De,lt=qe.next;qe.next=null,me===null?$=lt:me.next=lt,me=qe;var Pt=w.alternate;Pt!==null&&(Pt=Pt.updateQueue,De=Pt.lastBaseUpdate,De!==me&&(De===null?Pt.firstBaseUpdate=lt:De.next=lt,Pt.lastBaseUpdate=qe))}if($!==null){var vn=k.baseState;me=0,Pt=lt=qe=null,De=$;do{var Xt=De.lane,Si=De.eventTime;if((O&Xt)===Xt){Pt!==null&&(Pt=Pt.next={eventTime:Si,lane:0,tag:De.tag,payload:De.payload,callback:De.callback,next:null});e:{var Ut=w,fo=De;switch(Xt=_,Si=P,fo.tag){case 1:if(Ut=fo.payload,typeof Ut=="function"){vn=Ut.call(Si,vn,Xt);break e}vn=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=fo.payload,Xt=typeof Ut=="function"?Ut.call(Si,vn,Xt):Ut,Xt==null)break e;vn=s({},vn,Xt);break e;case 2:op=!0}}De.callback!==null&&De.lane!==0&&(w.flags|=64,Xt=k.effects,Xt===null?k.effects=[De]:Xt.push(De))}else Si={eventTime:Si,lane:Xt,tag:De.tag,payload:De.payload,callback:De.callback,next:null},Pt===null?(lt=Pt=Si,qe=vn):Pt=Pt.next=Si,me|=Xt;if(De=De.next,De===null){if(De=k.shared.pending,De===null)break;Xt=De,De=Xt.next,Xt.next=null,k.lastBaseUpdate=Xt,k.shared.pending=null}}while(1);if(Pt===null&&(qe=vn),k.baseState=qe,k.firstBaseUpdate=lt,k.lastBaseUpdate=Pt,_=k.shared.interleaved,_!==null){k=_;do me|=k.lane,k=k.next;while(k!==_)}else $===null&&(k.shared.lanes=0);Sy|=me,w.lanes=me,w.memoizedState=vn}}function jq(w,_,P){if(w=_.effects,_.effects=null,w!==null)for(_=0;_<w.length;_++){var O=w[_],k=O.callback;if(k!==null){if(O.callback=null,O=P,typeof k!="function")throw Error(o(191,k));k.call(O)}}}var Vq=new i.Component().refs;function Mk(w,_,P,O){_=w.memoizedState,P=P(O,_),P=P==null?_:s({},_,P),w.memoizedState=P,w.lanes===0&&(w.updateQueue.baseState=P)}var PC={isMounted:function(w){return(w=w._reactInternals)?C(w)===w:!1},enqueueSetState:function(w,_,P){w=w._reactInternals;var O=No(),k=up(w),$=Ad(O,k);$.payload=_,P!=null&&($.callback=P),ap(w,$),_=Ul(w,k,O),_!==null&&CC(_,w,k)},enqueueReplaceState:function(w,_,P){w=w._reactInternals;var O=No(),k=up(w),$=Ad(O,k);$.tag=1,$.payload=_,P!=null&&($.callback=P),ap(w,$),_=Ul(w,k,O),_!==null&&CC(_,w,k)},enqueueForceUpdate:function(w,_){w=w._reactInternals;var P=No(),O=up(w),k=Ad(P,O);k.tag=2,_!=null&&(k.callback=_),ap(w,k),_=Ul(w,O,P),_!==null&&CC(_,w,O)}};function Wq(w,_,P,O,k,$,me){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate(O,$,me):_.prototype&&_.prototype.isPureReactComponent?!AC(P,O)||!AC(k,$):!0}function $q(w,_,P){var O=!1,k=Oi,$=_.contextType;return typeof $=="object"&&$!==null?$=Bl($):(k=oa(_)?Il:Gn.current,O=_.contextTypes,$=(O=O!=null)?_d(w,k):Oi),_=new _(P,$),w.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=PC,w.stateNode=_,_._reactInternals=w,O&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=k,w.__reactInternalMemoizedMaskedChildContext=$),_}function qq(w,_,P,O){w=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(P,O),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(P,O),_.state!==w&&PC.enqueueReplaceState(_,_.state,null)}function Ek(w,_,P,O){var k=w.stateNode;k.props=P,k.state=w.memoizedState,k.refs=Vq,Ak(w);var $=_.contextType;typeof $=="object"&&$!==null?k.context=Bl($):($=oa(_)?Il:Gn.current,k.context=_d(w,$)),k.state=w.memoizedState,$=_.getDerivedStateFromProps,typeof $=="function"&&(Mk(w,_,$,P),k.state=w.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(_=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),_!==k.state&&PC.enqueueReplaceState(k,k.state,null),TC(w,P,k,O),k.state=w.memoizedState),typeof k.componentDidMount=="function"&&(w.flags|=4194308)}var my=[],gy=0,DC=null,OC=0,kl=[],Fl=0,gg=null,Md=1,Ed="";function vg(w,_){my[gy++]=OC,my[gy++]=DC,DC=w,OC=_}function Xq(w,_,P){kl[Fl++]=Md,kl[Fl++]=Ed,kl[Fl++]=gg,gg=w;var O=Md;w=Ed;var k=32-qc(O)-1;O&=~(1<<k),P+=1;var $=32-qc(_)+k;if(30<$){var me=k-k%5;$=(O&(1<<me)-1).toString(32),O>>=me,k-=me,Md=1<<32-qc(_)+k|P<<k|O,Ed=$+w}else Md=1<<$|P<<k|O,Ed=w}function Ck(w){w.return!==null&&(vg(w,1),Xq(w,1,0))}function Tk(w){for(;w===DC;)DC=my[--gy],my[gy]=null,OC=my[--gy],my[gy]=null;for(;w===gg;)gg=kl[--Fl],kl[Fl]=null,Ed=kl[--Fl],kl[Fl]=null,Md=kl[--Fl],kl[Fl]=null}var za=null,Ua=null,tr=!1,p_=!1,Yc=null;function Yq(w,_){var P=Gl(5,null,null,0);P.elementType="DELETED",P.stateNode=_,P.return=w,_=w.deletions,_===null?(w.deletions=[P],w.flags|=16):_.push(P)}function Kq(w,_){switch(w.tag){case 5:return _=Gi(_,w.type,w.pendingProps),_!==null?(w.stateNode=_,za=w,Ua=he(_),!0):!1;case 6:return _=hy(_,w.pendingProps),_!==null?(w.stateNode=_,za=w,Ua=null,!0):!1;case 13:if(_=h_(_),_!==null){var P=gg!==null?{id:Md,overflow:Ed}:null;return w.memoizedState={dehydrated:_,treeContext:P,retryLane:1073741824},P=Gl(18,null,null,0),P.stateNode=_,P.return=w,w.child=P,za=w,Ua=null,!0}return!1;default:return!1}}function Pk(w){return(w.mode&1)!==0&&(w.flags&128)===0}function Dk(w){if(tr){var _=Ua;if(_){var P=_;if(!Kq(w,_)){if(Pk(w))throw Error(o(418));_=pe(P);var O=za;_&&Kq(w,_)?Yq(O,P):(w.flags=w.flags&-4097|2,tr=!1,za=w)}}else{if(Pk(w))throw Error(o(418));w.flags=w.flags&-4097|2,tr=!1,za=w}}}function Jq(w){for(w=w.return;w!==null&&w.tag!==5&&w.tag!==3&&w.tag!==13;)w=w.return;za=w}function m_(w){if(!ae||w!==za)return!1;if(!tr)return Jq(w),tr=!0,!1;if(w.tag!==3&&(w.tag!==5||Hi(w.type)&&!K(w.type,w.memoizedProps))){var _=Ua;if(_){if(Pk(w)){for(w=Ua;w;)w=pe(w);throw Error(o(418))}for(;_;)Yq(w,_),_=pe(_)}}if(Jq(w),w.tag===13){if(!ae)throw Error(o(316));if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(o(317));Ua=bt(w)}else Ua=za?pe(w.stateNode):null;return!0}function vy(){ae&&(Ua=za=null,p_=tr=!1)}function Ok(w){Yc===null?Yc=[w]:Yc.push(w)}function g_(w,_,P){if(w=P.ref,w!==null&&typeof w!="function"&&typeof w!="object"){if(P._owner){if(P=P._owner,P){if(P.tag!==1)throw Error(o(309));var O=P.stateNode}if(!O)throw Error(o(147,w));var k=O,$=""+w;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===$?_.ref:(_=function(me){var De=k.refs;De===Vq&&(De=k.refs={}),me===null?delete De[$]:De[$]=me},_._stringRef=$,_)}if(typeof w!="string")throw Error(o(284));if(!P._owner)throw Error(o(290,w))}return w}function LC(w,_){throw w=Object.prototype.toString.call(_),Error(o(31,w==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":w))}function Zq(w){var _=w._init;return _(w._payload)}function Qq(w){function _(ze,Oe){if(w){var Ve=ze.deletions;Ve===null?(ze.deletions=[Oe],ze.flags|=16):Ve.push(Oe)}}function P(ze,Oe){if(!w)return null;for(;Oe!==null;)_(ze,Oe),Oe=Oe.sibling;return null}function O(ze,Oe){for(ze=new Map;Oe!==null;)Oe.key!==null?ze.set(Oe.key,Oe):ze.set(Oe.index,Oe),Oe=Oe.sibling;return ze}function k(ze,Oe){return ze=dp(ze,Oe),ze.index=0,ze.sibling=null,ze}function $(ze,Oe,Ve){return ze.index=Ve,w?(Ve=ze.alternate,Ve!==null?(Ve=Ve.index,Ve<Oe?(ze.flags|=2,Oe):Ve):(ze.flags|=2,Oe)):(ze.flags|=1048576,Oe)}function me(ze){return w&&ze.alternate===null&&(ze.flags|=2),ze}function De(ze,Oe,Ve,vt){return Oe===null||Oe.tag!==6?(Oe=pF(Ve,ze.mode,vt),Oe.return=ze,Oe):(Oe=k(Oe,Ve),Oe.return=ze,Oe)}function qe(ze,Oe,Ve,vt){var Ft=Ve.type;return Ft===h?Pt(ze,Oe,Ve.props.children,vt,Ve.key):Oe!==null&&(Oe.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===x&&Zq(Ft)===Oe.type)?(vt=k(Oe,Ve.props),vt.ref=g_(ze,Oe,Ve),vt.return=ze,vt):(vt=cT(Ve.type,Ve.key,Ve.props,null,ze.mode,vt),vt.ref=g_(ze,Oe,Ve),vt.return=ze,vt)}function lt(ze,Oe,Ve,vt){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==Ve.containerInfo||Oe.stateNode.implementation!==Ve.implementation?(Oe=mF(Ve,ze.mode,vt),Oe.return=ze,Oe):(Oe=k(Oe,Ve.children||[]),Oe.return=ze,Oe)}function Pt(ze,Oe,Ve,vt,Ft){return Oe===null||Oe.tag!==7?(Oe=Ag(Ve,ze.mode,vt,Ft),Oe.return=ze,Oe):(Oe=k(Oe,Ve),Oe.return=ze,Oe)}function vn(ze,Oe,Ve){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Oe=pF(""+Oe,ze.mode,Ve),Oe.return=ze,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case l:return Ve=cT(Oe.type,Oe.key,Oe.props,null,ze.mode,Ve),Ve.ref=g_(ze,null,Oe),Ve.return=ze,Ve;case c:return Oe=mF(Oe,ze.mode,Ve),Oe.return=ze,Oe;case x:var vt=Oe._init;return vn(ze,vt(Oe._payload),Ve)}if(H(Oe)||A(Oe))return Oe=Ag(Oe,ze.mode,Ve,null),Oe.return=ze,Oe;LC(ze,Oe)}return null}function Xt(ze,Oe,Ve,vt){var Ft=Oe!==null?Oe.key:null;if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return Ft!==null?null:De(ze,Oe,""+Ve,vt);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case l:return Ve.key===Ft?qe(ze,Oe,Ve,vt):null;case c:return Ve.key===Ft?lt(ze,Oe,Ve,vt):null;case x:return Ft=Ve._init,Xt(ze,Oe,Ft(Ve._payload),vt)}if(H(Ve)||A(Ve))return Ft!==null?null:Pt(ze,Oe,Ve,vt,null);LC(ze,Ve)}return null}function Si(ze,Oe,Ve,vt,Ft){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return ze=ze.get(Ve)||null,De(Oe,ze,""+vt,Ft);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case l:return ze=ze.get(vt.key===null?Ve:vt.key)||null,qe(Oe,ze,vt,Ft);case c:return ze=ze.get(vt.key===null?Ve:vt.key)||null,lt(Oe,ze,vt,Ft);case x:var An=vt._init;return Si(ze,Oe,Ve,An(vt._payload),Ft)}if(H(vt)||A(vt))return ze=ze.get(Ve)||null,Pt(Oe,ze,vt,Ft,null);LC(Oe,vt)}return null}function Ut(ze,Oe,Ve,vt){for(var Ft=null,An=null,yn=Oe,Yn=Oe=0,Os=null;yn!==null&&Yn<Ve.length;Yn++){yn.index>Yn?(Os=yn,yn=null):Os=yn.sibling;var Kn=Xt(ze,yn,Ve[Yn],vt);if(Kn===null){yn===null&&(yn=Os);break}w&&yn&&Kn.alternate===null&&_(ze,yn),Oe=$(Kn,Oe,Yn),An===null?Ft=Kn:An.sibling=Kn,An=Kn,yn=Os}if(Yn===Ve.length)return P(ze,yn),tr&&vg(ze,Yn),Ft;if(yn===null){for(;Yn<Ve.length;Yn++)yn=vn(ze,Ve[Yn],vt),yn!==null&&(Oe=$(yn,Oe,Yn),An===null?Ft=yn:An.sibling=yn,An=yn);return tr&&vg(ze,Yn),Ft}for(yn=O(ze,yn);Yn<Ve.length;Yn++)Os=Si(yn,ze,Yn,Ve[Yn],vt),Os!==null&&(w&&Os.alternate!==null&&yn.delete(Os.key===null?Yn:Os.key),Oe=$(Os,Oe,Yn),An===null?Ft=Os:An.sibling=Os,An=Os);return w&&yn.forEach(function(fp){return _(ze,fp)}),tr&&vg(ze,Yn),Ft}function fo(ze,Oe,Ve,vt){var Ft=A(Ve);if(typeof Ft!="function")throw Error(o(150));if(Ve=Ft.call(Ve),Ve==null)throw Error(o(151));for(var An=Ft=null,yn=Oe,Yn=Oe=0,Os=null,Kn=Ve.next();yn!==null&&!Kn.done;Yn++,Kn=Ve.next()){yn.index>Yn?(Os=yn,yn=null):Os=yn.sibling;var fp=Xt(ze,yn,Kn.value,vt);if(fp===null){yn===null&&(yn=Os);break}w&&yn&&fp.alternate===null&&_(ze,yn),Oe=$(fp,Oe,Yn),An===null?Ft=fp:An.sibling=fp,An=fp,yn=Os}if(Kn.done)return P(ze,yn),tr&&vg(ze,Yn),Ft;if(yn===null){for(;!Kn.done;Yn++,Kn=Ve.next())Kn=vn(ze,Kn.value,vt),Kn!==null&&(Oe=$(Kn,Oe,Yn),An===null?Ft=Kn:An.sibling=Kn,An=Kn);return tr&&vg(ze,Yn),Ft}for(yn=O(ze,yn);!Kn.done;Yn++,Kn=Ve.next())Kn=Si(yn,ze,Yn,Kn.value,vt),Kn!==null&&(w&&Kn.alternate!==null&&yn.delete(Kn.key===null?Yn:Kn.key),Oe=$(Kn,Oe,Yn),An===null?Ft=Kn:An.sibling=Kn,An=Kn);return w&&yn.forEach(function(n2e){return _(ze,n2e)}),tr&&vg(ze,Yn),Ft}function Hl(ze,Oe,Ve,vt){if(typeof Ve=="object"&&Ve!==null&&Ve.type===h&&Ve.key===null&&(Ve=Ve.props.children),typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case l:e:{for(var Ft=Ve.key,An=Oe;An!==null;){if(An.key===Ft){if(Ft=Ve.type,Ft===h){if(An.tag===7){P(ze,An.sibling),Oe=k(An,Ve.props.children),Oe.return=ze,ze=Oe;break e}}else if(An.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===x&&Zq(Ft)===An.type){P(ze,An.sibling),Oe=k(An,Ve.props),Oe.ref=g_(ze,An,Ve),Oe.return=ze,ze=Oe;break e}P(ze,An);break}else _(ze,An);An=An.sibling}Ve.type===h?(Oe=Ag(Ve.props.children,ze.mode,vt,Ve.key),Oe.return=ze,ze=Oe):(vt=cT(Ve.type,Ve.key,Ve.props,null,ze.mode,vt),vt.ref=g_(ze,Oe,Ve),vt.return=ze,ze=vt)}return me(ze);case c:e:{for(An=Ve.key;Oe!==null;){if(Oe.key===An)if(Oe.tag===4&&Oe.stateNode.containerInfo===Ve.containerInfo&&Oe.stateNode.implementation===Ve.implementation){P(ze,Oe.sibling),Oe=k(Oe,Ve.children||[]),Oe.return=ze,ze=Oe;break e}else{P(ze,Oe);break}else _(ze,Oe);Oe=Oe.sibling}Oe=mF(Ve,ze.mode,vt),Oe.return=ze,ze=Oe}return me(ze);case x:return An=Ve._init,Hl(ze,Oe,An(Ve._payload),vt)}if(H(Ve))return Ut(ze,Oe,Ve,vt);if(A(Ve))return fo(ze,Oe,Ve,vt);LC(ze,Ve)}return typeof Ve=="string"&&Ve!==""||typeof Ve=="number"?(Ve=""+Ve,Oe!==null&&Oe.tag===6?(P(ze,Oe.sibling),Oe=k(Oe,Ve),Oe.return=ze,ze=Oe):(P(ze,Oe),Oe=pF(Ve,ze.mode,vt),Oe.return=ze,ze=Oe),me(ze)):P(ze,Oe)}return Hl}var yy=Qq(!0),eX=Qq(!1),v_={},Nl=gi(v_),y_=gi(v_),xy=gi(v_);function eh(w){if(w===v_)throw Error(o(174));return w}function Lk(w,_){Pn(xy,_),Pn(y_,w),Pn(Nl,v_),w=ee(_),tn(Nl),Pn(Nl,w)}function by(){tn(Nl),tn(y_),tn(xy)}function tX(w){var _=eh(xy.current),P=eh(Nl.current);_=F(P,w.type,_),P!==_&&(Pn(y_,w),Pn(Nl,_))}function Rk(w){y_.current===w&&(tn(Nl),tn(y_))}var lr=gi(0);function RC(w){for(var _=w;_!==null;){if(_.tag===13){var P=_.memoizedState;if(P!==null&&(P=P.dehydrated,P===null||dy(P)||fe(P)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===w)break;for(;_.sibling===null;){if(_.return===null||_.return===w)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Ik=[];function Bk(){for(var w=0;w<Ik.length;w++){var _=Ik[w];ce?_._workInProgressVersionPrimary=null:_._workInProgressVersionSecondary=null}Ik.length=0}var IC=a.ReactCurrentDispatcher,zl=a.ReactCurrentBatchConfig,wy=0,yr=null,co=null,Ds=null,BC=!1,x_=!1,b_=0,CMe=0;function uo(){throw Error(o(321))}function kk(w,_){if(_===null)return!1;for(var P=0;P<_.length&&P<w.length;P++)if(!Ju(w[P],_[P]))return!1;return!0}function Fk(w,_,P,O,k,$){if(wy=$,yr=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,IC.current=w===null||w.memoizedState===null?OMe:LMe,w=P(O,k),x_){$=0;do{if(x_=!1,b_=0,25<=$)throw Error(o(301));$+=1,Ds=co=null,_.updateQueue=null,IC.current=RMe,w=P(O,k)}while(x_)}if(IC.current=UC,_=co!==null&&co.next!==null,wy=0,Ds=co=yr=null,BC=!1,_)throw Error(o(300));return w}function Nk(){var w=b_!==0;return b_=0,w}function Cd(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ds===null?yr.memoizedState=Ds=w:Ds=Ds.next=w,Ds}function th(){if(co===null){var w=yr.alternate;w=w!==null?w.memoizedState:null}else w=co.next;var _=Ds===null?yr.memoizedState:Ds.next;if(_!==null)Ds=_,co=w;else{if(w===null)throw Error(o(310));co=w,w={memoizedState:co.memoizedState,baseState:co.baseState,baseQueue:co.baseQueue,queue:co.queue,next:null},Ds===null?yr.memoizedState=Ds=w:Ds=Ds.next=w}return Ds}function yg(w,_){return typeof _=="function"?_(w):_}function kC(w){var _=th(),P=_.queue;if(P===null)throw Error(o(311));P.lastRenderedReducer=w;var O=co,k=O.baseQueue,$=P.pending;if($!==null){if(k!==null){var me=k.next;k.next=$.next,$.next=me}O.baseQueue=k=$,P.pending=null}if(k!==null){$=k.next,O=O.baseState;var De=me=null,qe=null,lt=$;do{var Pt=lt.lane;if((wy&Pt)===Pt)qe!==null&&(qe=qe.next={lane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),O=lt.hasEagerState?lt.eagerState:w(O,lt.action);else{var vn={lane:Pt,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};qe===null?(De=qe=vn,me=O):qe=qe.next=vn,yr.lanes|=Pt,Sy|=Pt}lt=lt.next}while(lt!==null&&lt!==$);qe===null?me=O:qe.next=De,Ju(O,_.memoizedState)||(Ga=!0),_.memoizedState=O,_.baseState=me,_.baseQueue=qe,P.lastRenderedState=O}if(w=P.interleaved,w!==null){k=w;do $=k.lane,yr.lanes|=$,Sy|=$,k=k.next;while(k!==w)}else k===null&&(P.lanes=0);return[_.memoizedState,P.dispatch]}function FC(w){var _=th(),P=_.queue;if(P===null)throw Error(o(311));P.lastRenderedReducer=w;var O=P.dispatch,k=P.pending,$=_.memoizedState;if(k!==null){P.pending=null;var me=k=k.next;do $=w($,me.action),me=me.next;while(me!==k);Ju($,_.memoizedState)||(Ga=!0),_.memoizedState=$,_.baseQueue===null&&(_.baseState=$),P.lastRenderedState=$}return[$,O]}function nX(){}function iX(w,_){var P=yr,O=th(),k=_(),$=!Ju(O.memoizedState,k);if($&&(O.memoizedState=k,Ga=!0),O=O.queue,__(oX.bind(null,P,O,w),[w]),O.getSnapshot!==_||$||Ds!==null&&Ds.memoizedState.tag&1){if(P.flags|=2048,w_(9,sX.bind(null,P,O,k,_),void 0,null),Jr===null)throw Error(o(349));wy&30||rX(P,_,k)}return k}function rX(w,_,P){w.flags|=16384,w={getSnapshot:_,value:P},_=yr.updateQueue,_===null?(_={lastEffect:null,stores:null},yr.updateQueue=_,_.stores=[w]):(P=_.stores,P===null?_.stores=[w]:P.push(w))}function sX(w,_,P,O){_.value=P,_.getSnapshot=O,aX(_)&&Ul(w,1,-1)}function oX(w,_,P){return P(function(){aX(_)&&Ul(w,1,-1)})}function aX(w){var _=w.getSnapshot;w=w.value;try{var P=_();return!Ju(w,P)}catch{return!0}}function zk(w){var _=Cd();return typeof w=="function"&&(w=w()),_.memoizedState=_.baseState=w,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yg,lastRenderedState:w},_.queue=w,w=w.dispatch=DMe.bind(null,yr,w),[_.memoizedState,w]}function w_(w,_,P,O){return w={tag:w,create:_,destroy:P,deps:O,next:null},_=yr.updateQueue,_===null?(_={lastEffect:null,stores:null},yr.updateQueue=_,_.lastEffect=w.next=w):(P=_.lastEffect,P===null?_.lastEffect=w.next=w:(O=P.next,P.next=w,w.next=O,_.lastEffect=w)),w}function lX(){return th().memoizedState}function NC(w,_,P,O){var k=Cd();yr.flags|=w,k.memoizedState=w_(1|_,P,void 0,O===void 0?null:O)}function zC(w,_,P,O){var k=th();O=O===void 0?null:O;var $=void 0;if(co!==null){var me=co.memoizedState;if($=me.destroy,O!==null&&kk(O,me.deps)){k.memoizedState=w_(_,P,$,O);return}}yr.flags|=w,k.memoizedState=w_(1|_,P,$,O)}function Uk(w,_){return NC(8390656,8,w,_)}function __(w,_){return zC(2048,8,w,_)}function cX(w,_){return zC(4,2,w,_)}function uX(w,_){return zC(4,4,w,_)}function hX(w,_){if(typeof _=="function")return w=w(),_(w),function(){_(null)};if(_!=null)return w=w(),_.current=w,function(){_.current=null}}function dX(w,_,P){return P=P!=null?P.concat([w]):null,zC(4,4,hX.bind(null,_,w),P)}function Gk(){}function fX(w,_){var P=th();_=_===void 0?null:_;var O=P.memoizedState;return O!==null&&_!==null&&kk(_,O[1])?O[0]:(P.memoizedState=[w,_],w)}function pX(w,_){var P=th();_=_===void 0?null:_;var O=P.memoizedState;return O!==null&&_!==null&&kk(_,O[1])?O[0]:(w=w(),P.memoizedState=[w,_],w)}function TMe(w,_){var P=Xn;Xn=P!==0&&4>P?P:4,w(!0);var O=zl.transition;zl.transition={};try{w(!1),_()}finally{Xn=P,zl.transition=O}}function mX(){return th().memoizedState}function PMe(w,_,P){var O=up(w);P={lane:O,action:P,hasEagerState:!1,eagerState:null,next:null},gX(w)?vX(_,P):(yX(w,_,P),P=No(),w=Ul(w,O,P),w!==null&&xX(w,_,O))}function DMe(w,_,P){var O=up(w),k={lane:O,action:P,hasEagerState:!1,eagerState:null,next:null};if(gX(w))vX(_,k);else{yX(w,_,k);var $=w.alternate;if(w.lanes===0&&($===null||$.lanes===0)&&($=_.lastRenderedReducer,$!==null))try{var me=_.lastRenderedState,De=$(me,P);if(k.hasEagerState=!0,k.eagerState=De,Ju(De,me))return}catch{}finally{}P=No(),w=Ul(w,O,P),w!==null&&xX(w,_,O)}}function gX(w){var _=w.alternate;return w===yr||_!==null&&_===yr}function vX(w,_){x_=BC=!0;var P=w.pending;P===null?_.next=_:(_.next=P.next,P.next=_),w.pending=_}function yX(w,_,P){Jr!==null&&w.mode&1&&!(Tn&2)?(w=_.interleaved,w===null?(P.next=P,Qu===null?Qu=[_]:Qu.push(_)):(P.next=w.next,w.next=P),_.interleaved=P):(w=_.pending,w===null?P.next=P:(P.next=w.next,w.next=P),_.pending=P)}function xX(w,_,P){if(P&4194240){var O=_.lanes;O&=w.pendingLanes,P|=O,_.lanes=P,mk(w,P)}}var UC={readContext:Bl,useCallback:uo,useContext:uo,useEffect:uo,useImperativeHandle:uo,useInsertionEffect:uo,useLayoutEffect:uo,useMemo:uo,useReducer:uo,useRef:uo,useState:uo,useDebugValue:uo,useDeferredValue:uo,useTransition:uo,useMutableSource:uo,useSyncExternalStore:uo,useId:uo,unstable_isNewReconciler:!1},OMe={readContext:Bl,useCallback:function(w,_){return Cd().memoizedState=[w,_===void 0?null:_],w},useContext:Bl,useEffect:Uk,useImperativeHandle:function(w,_,P){return P=P!=null?P.concat([w]):null,NC(4194308,4,hX.bind(null,_,w),P)},useLayoutEffect:function(w,_){return NC(4194308,4,w,_)},useInsertionEffect:function(w,_){return NC(4,2,w,_)},useMemo:function(w,_){var P=Cd();return _=_===void 0?null:_,w=w(),P.memoizedState=[w,_],w},useReducer:function(w,_,P){var O=Cd();return _=P!==void 0?P(_):_,O.memoizedState=O.baseState=_,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:_},O.queue=w,w=w.dispatch=PMe.bind(null,yr,w),[O.memoizedState,w]},useRef:function(w){var _=Cd();return w={current:w},_.memoizedState=w},useState:zk,useDebugValue:Gk,useDeferredValue:function(w){var _=zk(w),P=_[0],O=_[1];return Uk(function(){var k=zl.transition;zl.transition={};try{O(w)}finally{zl.transition=k}},[w]),P},useTransition:function(){var w=zk(!1),_=w[0];return w=TMe.bind(null,w[1]),Cd().memoizedState=w,[_,w]},useMutableSource:function(){},useSyncExternalStore:function(w,_,P){var O=yr,k=Cd();if(tr){if(P===void 0)throw Error(o(407));P=P()}else{if(P=_(),Jr===null)throw Error(o(349));wy&30||rX(O,_,P)}k.memoizedState=P;var $={value:P,getSnapshot:_};return k.queue=$,Uk(oX.bind(null,O,$,w),[w]),O.flags|=2048,w_(9,sX.bind(null,O,$,P,_),void 0,null),P},useId:function(){var w=Cd(),_=Jr.identifierPrefix;if(tr){var P=Ed,O=Md;P=(O&~(1<<32-qc(O)-1)).toString(32)+P,_=":"+_+"R"+P,P=b_++,0<P&&(_+="H"+P.toString(32)),_+=":"}else P=CMe++,_=":"+_+"r"+P.toString(32)+":";return w.memoizedState=_},unstable_isNewReconciler:!1},LMe={readContext:Bl,useCallback:fX,useContext:Bl,useEffect:__,useImperativeHandle:dX,useInsertionEffect:cX,useLayoutEffect:uX,useMemo:pX,useReducer:kC,useRef:lX,useState:function(){return kC(yg)},useDebugValue:Gk,useDeferredValue:function(w){var _=kC(yg),P=_[0],O=_[1];return __(function(){var k=zl.transition;zl.transition={};try{O(w)}finally{zl.transition=k}},[w]),P},useTransition:function(){var w=kC(yg)[0],_=th().memoizedState;return[w,_]},useMutableSource:nX,useSyncExternalStore:iX,useId:mX,unstable_isNewReconciler:!1},RMe={readContext:Bl,useCallback:fX,useContext:Bl,useEffect:__,useImperativeHandle:dX,useInsertionEffect:cX,useLayoutEffect:uX,useMemo:pX,useReducer:FC,useRef:lX,useState:function(){return FC(yg)},useDebugValue:Gk,useDeferredValue:function(w){var _=FC(yg),P=_[0],O=_[1];return __(function(){var k=zl.transition;zl.transition={};try{O(w)}finally{zl.transition=k}},[w]),P},useTransition:function(){var w=FC(yg)[0],_=th().memoizedState;return[w,_]},useMutableSource:nX,useSyncExternalStore:iX,useId:mX,unstable_isNewReconciler:!1};function Hk(w,_){try{var P="",O=_;do P+=EMe(O),O=O.return;while(O);var k=P}catch($){k=`
Error generating stack: `+$.message+`
`+$.stack}return{value:w,source:_,stack:k}}function jk(w,_){try{console.error(_.value)}catch(P){setTimeout(function(){throw P})}}var IMe=typeof WeakMap=="function"?WeakMap:Map;function bX(w,_,P){P=Ad(-1,P),P.tag=3,P.payload={element:null};var O=_.value;return P.callback=function(){nT||(nT=!0,aF=O),jk(w,_)},P}function wX(w,_,P){P=Ad(-1,P),P.tag=3;var O=w.type.getDerivedStateFromError;if(typeof O=="function"){var k=_.value;P.payload=function(){return O(k)},P.callback=function(){jk(w,_)}}var $=w.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(P.callback=function(){jk(w,_),typeof O!="function"&&(lp===null?lp=new Set([this]):lp.add(this));var me=_.stack;this.componentDidCatch(_.value,{componentStack:me!==null?me:""})}),P}function _X(w,_,P){var O=w.pingCache;if(O===null){O=w.pingCache=new IMe;var k=new Set;O.set(_,k)}else k=O.get(_),k===void 0&&(k=new Set,O.set(_,k));k.has(P)||(k.add(P),w=XMe.bind(null,w,_,P),_.then(w,w))}function SX(w){do{var _;if((_=w.tag===13)&&(_=w.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return w;w=w.return}while(w!==null);return null}function AX(w,_,P,O,k){return w.mode&1?(w.flags|=65536,w.lanes=k,w):(w===_?w.flags|=65536:(w.flags|=128,P.flags|=131072,P.flags&=-52805,P.tag===1&&(P.alternate===null?P.tag=17:(_=Ad(-1,1),_.tag=2,ap(P,_))),P.lanes|=1),w)}function nh(w){w.flags|=4}function MX(w,_){if(w!==null&&w.child===_.child)return!0;if(_.flags&16)return!1;for(w=_.child;w!==null;){if(w.flags&12854||w.subtreeFlags&12854)return!1;w=w.sibling}return!0}var S_,A_,GC,HC;if(ge)S_=function(w,_){for(var P=_.child;P!==null;){if(P.tag===5||P.tag===6)z(w,P.stateNode);else if(P.tag!==4&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return}P.sibling.return=P.return,P=P.sibling}},A_=function(){},GC=function(w,_,P,O,k){if(w=w.memoizedProps,w!==O){var $=_.stateNode,me=eh(Nl.current);P=J($,P,w,O,k,me),(_.updateQueue=P)&&nh(_)}},HC=function(w,_,P,O){P!==O&&nh(_)};else if(oe){S_=function(w,_,P,O){for(var k=_.child;k!==null;){if(k.tag===5){var $=k.stateNode;P&&O&&($=en($,k.type,k.memoizedProps,k)),z(w,$)}else if(k.tag===6)$=k.stateNode,P&&O&&($=Ui($,k.memoizedProps,k)),z(w,$);else if(k.tag!==4){if(k.tag===22&&k.memoizedState!==null)$=k.child,$!==null&&($.return=k),S_(w,k,!0,!0);else if(k.child!==null){k.child.return=k,k=k.child;continue}}if(k===_)break;for(;k.sibling===null;){if(k.return===null||k.return===_)return;k=k.return}k.sibling.return=k.return,k=k.sibling}};var EX=function(w,_,P,O){for(var k=_.child;k!==null;){if(k.tag===5){var $=k.stateNode;P&&O&&($=en($,k.type,k.memoizedProps,k)),rn(w,$)}else if(k.tag===6)$=k.stateNode,P&&O&&($=Ui($,k.memoizedProps,k)),rn(w,$);else if(k.tag!==4){if(k.tag===22&&k.memoizedState!==null)$=k.child,$!==null&&($.return=k),EX(w,k,!0,!0);else if(k.child!==null){k.child.return=k,k=k.child;continue}}if(k===_)break;for(;k.sibling===null;){if(k.return===null||k.return===_)return;k=k.return}k.sibling.return=k.return,k=k.sibling}};A_=function(w,_){var P=_.stateNode;if(!MX(w,_)){w=P.containerInfo;var O=Ct(w);EX(O,_,!1,!1),P.pendingChildren=O,nh(_),Cn(w,O)}},GC=function(w,_,P,O,k){var $=w.stateNode,me=w.memoizedProps;if((w=MX(w,_))&&me===O)_.stateNode=$;else{var De=_.stateNode,qe=eh(Nl.current),lt=null;me!==O&&(lt=J(De,P,me,O,k,qe)),w&&lt===null?_.stateNode=$:($=$e($,lt,P,me,O,_,w,De),Y($,P,O,k,qe)&&nh(_),_.stateNode=$,w?nh(_):S_($,_,!1,!1))}},HC=function(w,_,P,O){P!==O?(w=eh(xy.current),P=eh(Nl.current),_.stateNode=X(O,w,P,_),nh(_)):_.stateNode=w.stateNode}}else A_=function(){},GC=function(){},HC=function(){};function M_(w,_){if(!tr)switch(w.tailMode){case"hidden":_=w.tail;for(var P=null;_!==null;)_.alternate!==null&&(P=_),_=_.sibling;P===null?w.tail=null:P.sibling=null;break;case"collapsed":P=w.tail;for(var O=null;P!==null;)P.alternate!==null&&(O=P),P=P.sibling;O===null?_||w.tail===null?w.tail=null:w.tail.sibling=null:O.sibling=null}}function ho(w){var _=w.alternate!==null&&w.alternate.child===w.child,P=0,O=0;if(_)for(var k=w.child;k!==null;)P|=k.lanes|k.childLanes,O|=k.subtreeFlags&14680064,O|=k.flags&14680064,k.return=w,k=k.sibling;else for(k=w.child;k!==null;)P|=k.lanes|k.childLanes,O|=k.subtreeFlags,O|=k.flags,k.return=w,k=k.sibling;return w.subtreeFlags|=O,w.childLanes=P,_}function BMe(w,_,P){var O=_.pendingProps;switch(Tk(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ho(_),null;case 1:return oa(_.type)&&vC(),ho(_),null;case 3:return O=_.stateNode,by(),tn(Kr),tn(Gn),Bk(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(w===null||w.child===null)&&(m_(_)?nh(_):w===null||w.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,Yc!==null&&(uF(Yc),Yc=null))),A_(w,_),ho(_),null;case 5:Rk(_),P=eh(xy.current);var k=_.type;if(w!==null&&_.stateNode!=null)GC(w,_,k,O,P),w.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!O){if(_.stateNode===null)throw Error(o(166));return ho(_),null}if(w=eh(Nl.current),m_(_)){if(!ae)throw Error(o(175));w=tt(_.stateNode,_.type,_.memoizedProps,P,w,_,!p_),_.updateQueue=w,w!==null&&nh(_)}else{var $=j(k,O,P,w,_);S_($,_,!1,!1),_.stateNode=$,Y($,k,O,P,w)&&nh(_)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return ho(_),null;case 6:if(w&&_.stateNode!=null)HC(w,_,w.memoizedProps,O);else{if(typeof O!="string"&&_.stateNode===null)throw Error(o(166));if(w=eh(xy.current),P=eh(Nl.current),m_(_)){if(!ae)throw Error(o(176));if(w=_.stateNode,O=_.memoizedProps,(P=ht(w,O,_,!p_))&&(k=za,k!==null))switch($=(k.mode&1)!==0,k.tag){case 3:us(k.stateNode.containerInfo,w,O,$);break;case 5:ni(k.type,k.memoizedProps,k.stateNode,w,O,$)}P&&nh(_)}else _.stateNode=X(O,w,P,_)}return ho(_),null;case 13:if(tn(lr),O=_.memoizedState,tr&&Ua!==null&&_.mode&1&&!(_.flags&128)){for(w=Ua;w;)w=pe(w);return vy(),_.flags|=98560,_}if(O!==null&&O.dehydrated!==null){if(O=m_(_),w===null){if(!O)throw Error(o(318));if(!ae)throw Error(o(344));if(w=_.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(o(317));pt(w,_)}else vy(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;return ho(_),null}return Yc!==null&&(uF(Yc),Yc=null),_.flags&128?(_.lanes=P,_):(O=O!==null,P=!1,w===null?m_(_):P=w.memoizedState!==null,O&&!P&&(_.child.flags|=8192,_.mode&1&&(w===null||lr.current&1?hs===0&&(hs=3):dF())),_.updateQueue!==null&&(_.flags|=4),ho(_),null);case 4:return by(),A_(w,_),w===null&&we(_.stateNode.containerInfo),ho(_),null;case 10:return _k(_.type._context),ho(_),null;case 17:return oa(_.type)&&vC(),ho(_),null;case 19:if(tn(lr),k=_.memoizedState,k===null)return ho(_),null;if(O=(_.flags&128)!==0,$=k.rendering,$===null)if(O)M_(k,!1);else{if(hs!==0||w!==null&&w.flags&128)for(w=_.child;w!==null;){if($=RC(w),$!==null){for(_.flags|=128,M_(k,!1),w=$.updateQueue,w!==null&&(_.updateQueue=w,_.flags|=4),_.subtreeFlags=0,w=P,O=_.child;O!==null;)P=O,k=w,P.flags&=14680066,$=P.alternate,$===null?(P.childLanes=0,P.lanes=k,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=$.childLanes,P.lanes=$.lanes,P.child=$.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=$.memoizedProps,P.memoizedState=$.memoizedState,P.updateQueue=$.updateQueue,P.type=$.type,k=$.dependencies,P.dependencies=k===null?null:{lanes:k.lanes,firstContext:k.firstContext}),O=O.sibling;return Pn(lr,lr.current&1|2),_.child}w=w.sibling}k.tail!==null&&Ps()>oF&&(_.flags|=128,O=!0,M_(k,!1),_.lanes=4194304)}else{if(!O)if(w=RC($),w!==null){if(_.flags|=128,O=!0,w=w.updateQueue,w!==null&&(_.updateQueue=w,_.flags|=4),M_(k,!0),k.tail===null&&k.tailMode==="hidden"&&!$.alternate&&!tr)return ho(_),null}else 2*Ps()-k.renderingStartTime>oF&&P!==1073741824&&(_.flags|=128,O=!0,M_(k,!1),_.lanes=4194304);k.isBackwards?($.sibling=_.child,_.child=$):(w=k.last,w!==null?w.sibling=$:_.child=$,k.last=$)}return k.tail!==null?(_=k.tail,k.rendering=_,k.tail=_.sibling,k.renderingStartTime=Ps(),_.sibling=null,w=lr.current,Pn(lr,O?w&1|2:w&1),_):(ho(_),null);case 22:case 23:return hF(),O=_.memoizedState!==null,w!==null&&w.memoizedState!==null!==O&&(_.flags|=8192),O&&_.mode&1?Ha&1073741824&&(ho(_),ge&&_.subtreeFlags&6&&(_.flags|=8192)):ho(_),null;case 24:return null;case 25:return null}throw Error(o(156,_.tag))}var kMe=a.ReactCurrentOwner,Ga=!1;function Fo(w,_,P,O){_.child=w===null?eX(_,null,P,O):yy(_,w.child,P,O)}function CX(w,_,P,O,k){P=P.render;var $=_.ref;return py(_,k),O=Fk(w,_,P,O,$,k),P=Nk(),w!==null&&!Ga?(_.updateQueue=w.updateQueue,_.flags&=-2053,w.lanes&=~k,Td(w,_,k)):(tr&&P&&Ck(_),_.flags|=1,Fo(w,_,O,k),_.child)}function TX(w,_,P,O,k){if(w===null){var $=P.type;return typeof $=="function"&&!fF($)&&$.defaultProps===void 0&&P.compare===null&&P.defaultProps===void 0?(_.tag=15,_.type=$,PX(w,_,$,O,k)):(w=cT(P.type,null,O,_,_.mode,k),w.ref=_.ref,w.return=_,_.child=w)}if($=w.child,!(w.lanes&k)){var me=$.memoizedProps;if(P=P.compare,P=P!==null?P:AC,P(me,O)&&w.ref===_.ref)return Td(w,_,k)}return _.flags|=1,w=dp($,O),w.ref=_.ref,w.return=_,_.child=w}function PX(w,_,P,O,k){if(w!==null&&AC(w.memoizedProps,O)&&w.ref===_.ref)if(Ga=!1,(w.lanes&k)!==0)w.flags&131072&&(Ga=!0);else return _.lanes=w.lanes,Td(w,_,k);return Vk(w,_,P,O,k)}function DX(w,_,P){var O=_.pendingProps,k=O.children,$=w!==null?w.memoizedState:null;if(O.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null},Pn(_y,Ha),Ha|=P;else if(P&1073741824)_.memoizedState={baseLanes:0,cachePool:null},O=$!==null?$.baseLanes:P,Pn(_y,Ha),Ha|=O;else return w=$!==null?$.baseLanes|P:P,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:w,cachePool:null},_.updateQueue=null,Pn(_y,Ha),Ha|=w,null;else $!==null?(O=$.baseLanes|P,_.memoizedState=null):O=P,Pn(_y,Ha),Ha|=O;return Fo(w,_,k,P),_.child}function OX(w,_){var P=_.ref;(w===null&&P!==null||w!==null&&w.ref!==P)&&(_.flags|=512,_.flags|=2097152)}function Vk(w,_,P,O,k){var $=oa(P)?Il:Gn.current;return $=_d(_,$),py(_,k),P=Fk(w,_,P,O,$,k),O=Nk(),w!==null&&!Ga?(_.updateQueue=w.updateQueue,_.flags&=-2053,w.lanes&=~k,Td(w,_,k)):(tr&&O&&Ck(_),_.flags|=1,Fo(w,_,P,k),_.child)}function LX(w,_,P,O,k){if(oa(P)){var $=!0;yC(_)}else $=!1;if(py(_,k),_.stateNode===null)w!==null&&(w.alternate=null,_.alternate=null,_.flags|=2),$q(_,P,O),Ek(_,P,O,k),O=!0;else if(w===null){var me=_.stateNode,De=_.memoizedProps;me.props=De;var qe=me.context,lt=P.contextType;typeof lt=="object"&&lt!==null?lt=Bl(lt):(lt=oa(P)?Il:Gn.current,lt=_d(_,lt));var Pt=P.getDerivedStateFromProps,vn=typeof Pt=="function"||typeof me.getSnapshotBeforeUpdate=="function";vn||typeof me.UNSAFE_componentWillReceiveProps!="function"&&typeof me.componentWillReceiveProps!="function"||(De!==O||qe!==lt)&&qq(_,me,O,lt),op=!1;var Xt=_.memoizedState;me.state=Xt,TC(_,O,me,k),qe=_.memoizedState,De!==O||Xt!==qe||Kr.current||op?(typeof Pt=="function"&&(Mk(_,P,Pt,O),qe=_.memoizedState),(De=op||Wq(_,P,De,O,Xt,qe,lt))?(vn||typeof me.UNSAFE_componentWillMount!="function"&&typeof me.componentWillMount!="function"||(typeof me.componentWillMount=="function"&&me.componentWillMount(),typeof me.UNSAFE_componentWillMount=="function"&&me.UNSAFE_componentWillMount()),typeof me.componentDidMount=="function"&&(_.flags|=4194308)):(typeof me.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=O,_.memoizedState=qe),me.props=O,me.state=qe,me.context=lt,O=De):(typeof me.componentDidMount=="function"&&(_.flags|=4194308),O=!1)}else{me=_.stateNode,Gq(w,_),De=_.memoizedProps,lt=_.type===_.elementType?De:Xc(_.type,De),me.props=lt,vn=_.pendingProps,Xt=me.context,qe=P.contextType,typeof qe=="object"&&qe!==null?qe=Bl(qe):(qe=oa(P)?Il:Gn.current,qe=_d(_,qe));var Si=P.getDerivedStateFromProps;(Pt=typeof Si=="function"||typeof me.getSnapshotBeforeUpdate=="function")||typeof me.UNSAFE_componentWillReceiveProps!="function"&&typeof me.componentWillReceiveProps!="function"||(De!==vn||Xt!==qe)&&qq(_,me,O,qe),op=!1,Xt=_.memoizedState,me.state=Xt,TC(_,O,me,k);var Ut=_.memoizedState;De!==vn||Xt!==Ut||Kr.current||op?(typeof Si=="function"&&(Mk(_,P,Si,O),Ut=_.memoizedState),(lt=op||Wq(_,P,lt,O,Xt,Ut,qe)||!1)?(Pt||typeof me.UNSAFE_componentWillUpdate!="function"&&typeof me.componentWillUpdate!="function"||(typeof me.componentWillUpdate=="function"&&me.componentWillUpdate(O,Ut,qe),typeof me.UNSAFE_componentWillUpdate=="function"&&me.UNSAFE_componentWillUpdate(O,Ut,qe)),typeof me.componentDidUpdate=="function"&&(_.flags|=4),typeof me.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof me.componentDidUpdate!="function"||De===w.memoizedProps&&Xt===w.memoizedState||(_.flags|=4),typeof me.getSnapshotBeforeUpdate!="function"||De===w.memoizedProps&&Xt===w.memoizedState||(_.flags|=1024),_.memoizedProps=O,_.memoizedState=Ut),me.props=O,me.state=Ut,me.context=qe,O=lt):(typeof me.componentDidUpdate!="function"||De===w.memoizedProps&&Xt===w.memoizedState||(_.flags|=4),typeof me.getSnapshotBeforeUpdate!="function"||De===w.memoizedProps&&Xt===w.memoizedState||(_.flags|=1024),O=!1)}return Wk(w,_,P,O,$,k)}function Wk(w,_,P,O,k,$){OX(w,_);var me=(_.flags&128)!==0;if(!O&&!me)return k&&kq(_,P,!1),Td(w,_,$);O=_.stateNode,kMe.current=_;var De=me&&typeof P.getDerivedStateFromError!="function"?null:O.render();return _.flags|=1,w!==null&&me?(_.child=yy(_,w.child,null,$),_.child=yy(_,null,De,$)):Fo(w,_,De,$),_.memoizedState=O.state,k&&kq(_,P,!0),_.child}function RX(w){var _=w.stateNode;_.pendingContext?Iq(w,_.pendingContext,_.pendingContext!==_.context):_.context&&Iq(w,_.context,!1),Lk(w,_.containerInfo)}function IX(w,_,P,O,k){return vy(),Ok(k),_.flags|=256,Fo(w,_,P,O),_.child}var jC={dehydrated:null,treeContext:null,retryLane:0};function VC(w){return{baseLanes:w,cachePool:null}}function BX(w,_,P){var O=_.pendingProps,k=lr.current,$=!1,me=(_.flags&128)!==0,De;if((De=me)||(De=w!==null&&w.memoizedState===null?!1:(k&2)!==0),De?($=!0,_.flags&=-129):(w===null||w.memoizedState!==null)&&(k|=1),Pn(lr,k&1),w===null)return Dk(_),w=_.memoizedState,w!==null&&(w=w.dehydrated,w!==null)?(_.mode&1?fe(w)?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(k=O.children,w=O.fallback,$?(O=_.mode,$=_.child,k={mode:"hidden",children:k},!(O&1)&&$!==null?($.childLanes=0,$.pendingProps=k):$=uT(k,O,0,null),w=Ag(w,O,P,null),$.return=_,w.return=_,$.sibling=w,_.child=$,_.child.memoizedState=VC(P),_.memoizedState=jC,w):$k(_,k));if(k=w.memoizedState,k!==null){if(De=k.dehydrated,De!==null){if(me)return _.flags&256?(_.flags&=-257,WC(w,_,P,Error(o(422)))):_.memoizedState!==null?(_.child=w.child,_.flags|=128,null):($=O.fallback,k=_.mode,O=uT({mode:"visible",children:O.children},k,0,null),$=Ag($,k,P,null),$.flags|=2,O.return=_,$.return=_,O.sibling=$,_.child=O,_.mode&1&&yy(_,w.child,null,P),_.child.memoizedState=VC(P),_.memoizedState=jC,$);if(!(_.mode&1))_=WC(w,_,P,null);else if(fe(De))_=WC(w,_,P,Error(o(419)));else if(O=(P&w.childLanes)!==0,Ga||O){if(O=Jr,O!==null){switch(P&-P){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}O=$&(O.suspendedLanes|P)?0:$,O!==0&&O!==k.retryLane&&(k.retryLane=O,Ul(w,O,-1))}dF(),_=WC(w,_,P,Error(o(421)))}else dy(De)?(_.flags|=128,_.child=w.child,_=YMe.bind(null,w),Q(De,_),_=null):(P=k.treeContext,ae&&(Ua=Le(De),za=_,tr=!0,Yc=null,p_=!1,P!==null&&(kl[Fl++]=Md,kl[Fl++]=Ed,kl[Fl++]=gg,Md=P.id,Ed=P.overflow,gg=_)),_=$k(_,_.pendingProps.children),_.flags|=4096);return _}return $?(O=FX(w,_,O.children,O.fallback,P),$=_.child,k=w.child.memoizedState,$.memoizedState=k===null?VC(P):{baseLanes:k.baseLanes|P,cachePool:null},$.childLanes=w.childLanes&~P,_.memoizedState=jC,O):(P=kX(w,_,O.children,P),_.memoizedState=null,P)}return $?(O=FX(w,_,O.children,O.fallback,P),$=_.child,k=w.child.memoizedState,$.memoizedState=k===null?VC(P):{baseLanes:k.baseLanes|P,cachePool:null},$.childLanes=w.childLanes&~P,_.memoizedState=jC,O):(P=kX(w,_,O.children,P),_.memoizedState=null,P)}function $k(w,_){return _=uT({mode:"visible",children:_},w.mode,0,null),_.return=w,w.child=_}function kX(w,_,P,O){var k=w.child;return w=k.sibling,P=dp(k,{mode:"visible",children:P}),!(_.mode&1)&&(P.lanes=O),P.return=_,P.sibling=null,w!==null&&(O=_.deletions,O===null?(_.deletions=[w],_.flags|=16):O.push(w)),_.child=P}function FX(w,_,P,O,k){var $=_.mode;w=w.child;var me=w.sibling,De={mode:"hidden",children:P};return!($&1)&&_.child!==w?(P=_.child,P.childLanes=0,P.pendingProps=De,_.deletions=null):(P=dp(w,De),P.subtreeFlags=w.subtreeFlags&14680064),me!==null?O=dp(me,O):(O=Ag(O,$,k,null),O.flags|=2),O.return=_,P.return=_,P.sibling=O,_.child=P,O}function WC(w,_,P,O){return O!==null&&Ok(O),yy(_,w.child,null,P),w=$k(_,_.pendingProps.children),w.flags|=2,_.memoizedState=null,w}function NX(w,_,P){w.lanes|=_;var O=w.alternate;O!==null&&(O.lanes|=_),Sk(w.return,_,P)}function qk(w,_,P,O,k){var $=w.memoizedState;$===null?w.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:O,tail:P,tailMode:k}:($.isBackwards=_,$.rendering=null,$.renderingStartTime=0,$.last=O,$.tail=P,$.tailMode=k)}function zX(w,_,P){var O=_.pendingProps,k=O.revealOrder,$=O.tail;if(Fo(w,_,O.children,P),O=lr.current,O&2)O=O&1|2,_.flags|=128;else{if(w!==null&&w.flags&128)e:for(w=_.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&NX(w,P,_);else if(w.tag===19)NX(w,P,_);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===_)break e;for(;w.sibling===null;){if(w.return===null||w.return===_)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}O&=1}if(Pn(lr,O),!(_.mode&1))_.memoizedState=null;else switch(k){case"forwards":for(P=_.child,k=null;P!==null;)w=P.alternate,w!==null&&RC(w)===null&&(k=P),P=P.sibling;P=k,P===null?(k=_.child,_.child=null):(k=P.sibling,P.sibling=null),qk(_,!1,k,P,$);break;case"backwards":for(P=null,k=_.child,_.child=null;k!==null;){if(w=k.alternate,w!==null&&RC(w)===null){_.child=k;break}w=k.sibling,k.sibling=P,P=k,k=w}qk(_,!0,P,null,$);break;case"together":qk(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Td(w,_,P){if(w!==null&&(_.dependencies=w.dependencies),Sy|=_.lanes,!(P&_.childLanes))return null;if(w!==null&&_.child!==w.child)throw Error(o(153));if(_.child!==null){for(w=_.child,P=dp(w,w.pendingProps),_.child=P,P.return=_;w.sibling!==null;)w=w.sibling,P=P.sibling=dp(w,w.pendingProps),P.return=_;P.sibling=null}return _.child}function FMe(w,_,P){switch(_.tag){case 3:RX(_),vy();break;case 5:tX(_);break;case 1:oa(_.type)&&yC(_);break;case 4:Lk(_,_.stateNode.containerInfo);break;case 10:Uq(_,_.type._context,_.memoizedProps.value);break;case 13:var O=_.memoizedState;if(O!==null)return O.dehydrated!==null?(Pn(lr,lr.current&1),_.flags|=128,null):P&_.child.childLanes?BX(w,_,P):(Pn(lr,lr.current&1),w=Td(w,_,P),w!==null?w.sibling:null);Pn(lr,lr.current&1);break;case 19:if(O=(P&_.childLanes)!==0,w.flags&128){if(O)return zX(w,_,P);_.flags|=128}var k=_.memoizedState;if(k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),Pn(lr,lr.current),O)break;return null;case 22:case 23:return _.lanes=0,DX(w,_,P)}return Td(w,_,P)}function NMe(w,_){switch(Tk(_),_.tag){case 1:return oa(_.type)&&vC(),w=_.flags,w&65536?(_.flags=w&-65537|128,_):null;case 3:return by(),tn(Kr),tn(Gn),Bk(),w=_.flags,w&65536&&!(w&128)?(_.flags=w&-65537|128,_):null;case 5:return Rk(_),null;case 13:if(tn(lr),w=_.memoizedState,w!==null&&w.dehydrated!==null){if(_.alternate===null)throw Error(o(340));vy()}return w=_.flags,w&65536?(_.flags=w&-65537|128,_):null;case 19:return tn(lr),null;case 4:return by(),null;case 10:return _k(_.type._context),null;case 22:case 23:return hF(),null;case 24:return null;default:return null}}var $C=!1,xg=!1,zMe=typeof WeakSet=="function"?WeakSet:Set,mt=null;function qC(w,_){var P=w.ref;if(P!==null)if(typeof P=="function")try{P(null)}catch(O){ca(w,_,O)}else P.current=null}function Xk(w,_,P){try{P()}catch(O){ca(w,_,O)}}var UX=!1;function UMe(w,_){for(V(w.containerInfo),mt=_;mt!==null;)if(w=mt,_=w.child,(w.subtreeFlags&1028)!==0&&_!==null)_.return=w,mt=_;else for(;mt!==null;){w=mt;try{var P=w.alternate;if(w.flags&1024)switch(w.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var O=P.memoizedProps,k=P.memoizedState,$=w.stateNode,me=$.getSnapshotBeforeUpdate(w.elementType===w.type?O:Xc(w.type,O),k);$.__reactInternalSnapshotBeforeUpdate=me}break;case 3:ge&&Ne(w.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(De){ca(w,w.return,De)}if(_=w.sibling,_!==null){_.return=w.return,mt=_;break}mt=w.return}return P=UX,UX=!1,P}function bg(w,_,P){var O=_.updateQueue;if(O=O!==null?O.lastEffect:null,O!==null){var k=O=O.next;do{if((k.tag&w)===w){var $=k.destroy;k.destroy=void 0,$!==void 0&&Xk(_,P,$)}k=k.next}while(k!==O)}}function E_(w,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var P=_=_.next;do{if((P.tag&w)===w){var O=P.create;P.destroy=O()}P=P.next}while(P!==_)}}function Yk(w){var _=w.ref;if(_!==null){var P=w.stateNode;switch(w.tag){case 5:w=Z(P);break;default:w=P}typeof _=="function"?_(w):_.current=w}}function GX(w,_,P){if(Ku&&typeof Ku.onCommitFiberUnmount=="function")try{Ku.onCommitFiberUnmount(_C,_)}catch{}switch(_.tag){case 0:case 11:case 14:case 15:if(w=_.updateQueue,w!==null&&(w=w.lastEffect,w!==null)){var O=w=w.next;do{var k=O,$=k.destroy;k=k.tag,$!==void 0&&(k&2||k&4)&&Xk(_,P,$),O=O.next}while(O!==w)}break;case 1:if(qC(_,P),w=_.stateNode,typeof w.componentWillUnmount=="function")try{w.props=_.memoizedProps,w.state=_.memoizedState,w.componentWillUnmount()}catch(me){ca(_,P,me)}break;case 5:qC(_,P);break;case 4:ge?qX(w,_,P):oe&&oe&&(_=_.stateNode.containerInfo,P=Ct(_),Ir(_,P))}}function HX(w,_,P){for(var O=_;;)if(GX(w,O,P),O.child===null||ge&&O.tag===4){if(O===_)break;for(;O.sibling===null;){if(O.return===null||O.return===_)return;O=O.return}O.sibling.return=O.return,O=O.sibling}else O.child.return=O,O=O.child}function jX(w){var _=w.alternate;_!==null&&(w.alternate=null,jX(_)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(_=w.stateNode,_!==null&&Pe(_)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}function VX(w){return w.tag===5||w.tag===3||w.tag===4}function WX(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||VX(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function $X(w){if(ge){e:{for(var _=w.return;_!==null;){if(VX(_))break e;_=_.return}throw Error(o(160))}var P=_;switch(P.tag){case 5:_=P.stateNode,P.flags&32&&(Vt(_),P.flags&=-33),P=WX(w),Jk(w,P,_);break;case 3:case 4:_=P.stateNode.containerInfo,P=WX(w),Kk(w,P,_);break;default:throw Error(o(161))}}}function Kk(w,_,P){var O=w.tag;if(O===5||O===6)w=w.stateNode,_?Je(P,w,_):Ue(P,w);else if(O!==4&&(w=w.child,w!==null))for(Kk(w,_,P),w=w.sibling;w!==null;)Kk(w,_,P),w=w.sibling}function Jk(w,_,P){var O=w.tag;if(O===5||O===6)w=w.stateNode,_?We(P,w,_):Ze(P,w);else if(O!==4&&(w=w.child,w!==null))for(Jk(w,_,P),w=w.sibling;w!==null;)Jk(w,_,P),w=w.sibling}function qX(w,_,P){for(var O=_,k=!1,$,me;;){if(!k){k=O.return;e:for(;;){if(k===null)throw Error(o(160));switch($=k.stateNode,k.tag){case 5:me=!1;break e;case 3:$=$.containerInfo,me=!0;break e;case 4:$=$.containerInfo,me=!0;break e}k=k.return}k=!0}if(O.tag===5||O.tag===6)HX(w,O,P),me?xt($,O.stateNode):Qe($,O.stateNode);else if(O.tag===18)me?qn($,O.stateNode):zt($,O.stateNode);else if(O.tag===4){if(O.child!==null){$=O.stateNode.containerInfo,me=!0,O.child.return=O,O=O.child;continue}}else if(GX(w,O,P),O.child!==null){O.child.return=O,O=O.child;continue}if(O===_)break;for(;O.sibling===null;){if(O.return===null||O.return===_)return;O=O.return,O.tag===4&&(k=!1)}O.sibling.return=O.return,O=O.sibling}}function Zk(w,_){if(ge){switch(_.tag){case 0:case 11:case 14:case 15:bg(3,_,_.return),E_(3,_),bg(5,_,_.return);return;case 1:return;case 5:var P=_.stateNode;if(P!=null){var O=_.memoizedProps;w=w!==null?w.memoizedProps:O;var k=_.type,$=_.updateQueue;_.updateQueue=null,$!==null&&Ge(P,$,k,w,O,_)}return;case 6:if(_.stateNode===null)throw Error(o(162));P=_.memoizedProps,be(_.stateNode,w!==null?w.memoizedProps:P,P);return;case 3:ae&&w!==null&&w.memoizedState.isDehydrated&&Tt(_.stateNode.containerInfo);return;case 12:return;case 13:XC(_);return;case 19:XC(_);return;case 17:return}throw Error(o(163))}switch(_.tag){case 0:case 11:case 14:case 15:bg(3,_,_.return),E_(3,_),bg(5,_,_.return);return;case 12:return;case 13:XC(_);return;case 19:XC(_);return;case 3:ae&&w!==null&&w.memoizedState.isDehydrated&&Tt(_.stateNode.containerInfo);break;case 22:case 23:return}e:if(oe){switch(_.tag){case 1:case 5:case 6:break e;case 3:case 4:_=_.stateNode,Ir(_.containerInfo,_.pendingChildren);break e}throw Error(o(163))}}function XC(w){var _=w.updateQueue;if(_!==null){w.updateQueue=null;var P=w.stateNode;P===null&&(P=w.stateNode=new zMe),_.forEach(function(O){var k=KMe.bind(null,w,O);P.has(O)||(P.add(O),O.then(k,k))})}}function GMe(w,_){for(mt=_;mt!==null;){_=mt;var P=_.deletions;if(P!==null)for(var O=0;O<P.length;O++){var k=P[O];try{var $=w;ge?qX($,k,_):HX($,k,_);var me=k.alternate;me!==null&&(me.return=null),k.return=null}catch(Ft){ca(k,_,Ft)}}if(P=_.child,_.subtreeFlags&12854&&P!==null)P.return=_,mt=P;else for(;mt!==null;){_=mt;try{var De=_.flags;if(De&32&&ge&&Vt(_.stateNode),De&512){var qe=_.alternate;if(qe!==null){var lt=qe.ref;lt!==null&&(typeof lt=="function"?lt(null):lt.current=null)}}if(De&8192)switch(_.tag){case 13:if(_.memoizedState!==null){var Pt=_.alternate;(Pt===null||Pt.memoizedState===null)&&(sF=Ps())}break;case 22:var vn=_.memoizedState!==null,Xt=_.alternate,Si=Xt!==null&&Xt.memoizedState!==null;if(P=_,ge){e:if(O=P,k=vn,$=null,ge)for(var Ut=O;;){if(Ut.tag===5){if($===null){$=Ut;var fo=Ut.stateNode;k?gn(fo):ve(Ut.stateNode,Ut.memoizedProps)}}else if(Ut.tag===6){if($===null){var Hl=Ut.stateNode;k?ie(Hl):Ce(Hl,Ut.memoizedProps)}}else if((Ut.tag!==22&&Ut.tag!==23||Ut.memoizedState===null||Ut===O)&&Ut.child!==null){Ut.child.return=Ut,Ut=Ut.child;continue}if(Ut===O)break;for(;Ut.sibling===null;){if(Ut.return===null||Ut.return===O)break e;$===Ut&&($=null),Ut=Ut.return}$===Ut&&($=null),Ut.sibling.return=Ut.return,Ut=Ut.sibling}}if(vn&&!Si&&P.mode&1){mt=P;for(var ze=P.child;ze!==null;){for(P=mt=ze;mt!==null;){O=mt;var Oe=O.child;switch(O.tag){case 0:case 11:case 14:case 15:bg(4,O,O.return);break;case 1:qC(O,O.return);var Ve=O.stateNode;if(typeof Ve.componentWillUnmount=="function"){var vt=O.return;try{Ve.props=O.memoizedProps,Ve.state=O.memoizedState,Ve.componentWillUnmount()}catch(Ft){ca(O,vt,Ft)}}break;case 5:qC(O,O.return);break;case 22:if(O.memoizedState!==null){KX(P);continue}}Oe!==null?(Oe.return=O,mt=Oe):KX(P)}ze=ze.sibling}}}switch(De&4102){case 2:$X(_),_.flags&=-3;break;case 6:$X(_),_.flags&=-3,Zk(_.alternate,_);break;case 4096:_.flags&=-4097;break;case 4100:_.flags&=-4097,Zk(_.alternate,_);break;case 4:Zk(_.alternate,_)}}catch(Ft){ca(_,_.return,Ft)}if(P=_.sibling,P!==null){P.return=_.return,mt=P;break}mt=_.return}}}function HMe(w,_,P){mt=w,XX(w)}function XX(w,_,P){for(var O=(w.mode&1)!==0;mt!==null;){var k=mt,$=k.child;if(k.tag===22&&O){var me=k.memoizedState!==null||$C;if(!me){var De=k.alternate,qe=De!==null&&De.memoizedState!==null||xg;De=$C;var lt=xg;if($C=me,(xg=qe)&&!lt)for(mt=k;mt!==null;)me=mt,qe=me.child,me.tag===22&&me.memoizedState!==null?JX(k):qe!==null?(qe.return=me,mt=qe):JX(k);for(;$!==null;)mt=$,XX($),$=$.sibling;mt=k,$C=De,xg=lt}YX(w)}else k.subtreeFlags&8772&&$!==null?($.return=k,mt=$):YX(w)}}function YX(w){for(;mt!==null;){var _=mt;if(_.flags&8772){var P=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:xg||E_(5,_);break;case 1:var O=_.stateNode;if(_.flags&4&&!xg)if(P===null)O.componentDidMount();else{var k=_.elementType===_.type?P.memoizedProps:Xc(_.type,P.memoizedProps);O.componentDidUpdate(k,P.memoizedState,O.__reactInternalSnapshotBeforeUpdate)}var $=_.updateQueue;$!==null&&jq(_,$,O);break;case 3:var me=_.updateQueue;if(me!==null){if(P=null,_.child!==null)switch(_.child.tag){case 5:P=Z(_.child.stateNode);break;case 1:P=_.child.stateNode}jq(_,me,P)}break;case 5:var De=_.stateNode;P===null&&_.flags&4&&Xe(De,_.type,_.memoizedProps,_);break;case 6:break;case 4:break;case 12:break;case 13:if(ae&&_.memoizedState===null){var qe=_.alternate;if(qe!==null){var lt=qe.memoizedState;if(lt!==null){var Pt=lt.dehydrated;Pt!==null&&St(Pt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}xg||_.flags&512&&Yk(_)}catch(vn){ca(_,_.return,vn)}}if(_===w){mt=null;break}if(P=_.sibling,P!==null){P.return=_.return,mt=P;break}mt=_.return}}function KX(w){for(;mt!==null;){var _=mt;if(_===w){mt=null;break}var P=_.sibling;if(P!==null){P.return=_.return,mt=P;break}mt=_.return}}function JX(w){for(;mt!==null;){var _=mt;try{switch(_.tag){case 0:case 11:case 15:var P=_.return;try{E_(4,_)}catch(qe){ca(_,P,qe)}break;case 1:var O=_.stateNode;if(typeof O.componentDidMount=="function"){var k=_.return;try{O.componentDidMount()}catch(qe){ca(_,k,qe)}}var $=_.return;try{Yk(_)}catch(qe){ca(_,$,qe)}break;case 5:var me=_.return;try{Yk(_)}catch(qe){ca(_,me,qe)}}}catch(qe){ca(_,_.return,qe)}if(_===w){mt=null;break}var De=_.sibling;if(De!==null){De.return=_.return,mt=De;break}mt=_.return}}var YC=0,KC=1,JC=2,ZC=3,QC=4;if(typeof Symbol=="function"&&Symbol.for){var C_=Symbol.for;YC=C_("selector.component"),KC=C_("selector.has_pseudo_class"),JC=C_("selector.role"),ZC=C_("selector.test_id"),QC=C_("selector.text")}function Qk(w){var _=ye(w);if(_!=null){if(typeof _.memoizedProps["data-testname"]!="string")throw Error(o(364));return _}if(w=Re(w),w===null)throw Error(o(362));return w.stateNode.current}function eF(w,_){switch(_.$$typeof){case YC:if(w.type===_.value)return!0;break;case KC:e:{_=_.value,w=[w,0];for(var P=0;P<w.length;){var O=w[P++],k=w[P++],$=_[k];if(O.tag!==5||!le(O)){for(;$!=null&&eF(O,$);)k++,$=_[k];if(k===_.length){_=!0;break e}else for(O=O.child;O!==null;)w.push(O,k),O=O.sibling}}_=!1}return _;case JC:if(w.tag===5&&_e(w.stateNode,_.value))return!0;break;case QC:if((w.tag===5||w.tag===6)&&(w=B(w),w!==null&&0<=w.indexOf(_.value)))return!0;break;case ZC:if(w.tag===5&&(w=w.memoizedProps["data-testname"],typeof w=="string"&&w.toLowerCase()===_.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function tF(w){switch(w.$$typeof){case YC:return"<"+(E(w.value)||"Unknown")+">";case KC:return":has("+(tF(w)||"")+")";case JC:return'[role="'+w.value+'"]';case QC:return'"'+w.value+'"';case ZC:return'[data-testname="'+w.value+'"]';default:throw Error(o(365))}}function ZX(w,_){var P=[];w=[w,0];for(var O=0;O<w.length;){var k=w[O++],$=w[O++],me=_[$];if(k.tag!==5||!le(k)){for(;me!=null&&eF(k,me);)$++,me=_[$];if($===_.length)P.push(k);else for(k=k.child;k!==null;)w.push(k,$),k=k.sibling}}return P}function nF(w,_){if(!xe)throw Error(o(363));w=Qk(w),w=ZX(w,_),_=[],w=Array.from(w);for(var P=0;P<w.length;){var O=w[P++];if(O.tag===5)le(O)||_.push(O.stateNode);else for(O=O.child;O!==null;)w.push(O),O=O.sibling}return _}var jMe=Math.ceil,eT=a.ReactCurrentDispatcher,iF=a.ReactCurrentOwner,Br=a.ReactCurrentBatchConfig,Tn=0,Jr=null,Zr=null,Xs=0,Ha=0,_y=gi(0),hs=0,T_=null,Sy=0,tT=0,rF=0,P_=null,aa=null,sF=0,oF=1/0;function Ay(){oF=Ps()+500}var nT=!1,aF=null,lp=null,iT=!1,cp=null,rT=0,D_=0,lF=null,sT=-1,oT=0;function No(){return Tn&6?Ps():sT!==-1?sT:sT=Ps()}function up(w){return w.mode&1?Tn&2&&Xs!==0?Xs&-Xs:MMe.transition!==null?(oT===0&&(w=xC,xC<<=1,!(xC&4194240)&&(xC=64),oT=w),oT):(w=Xn,w!==0?w:Se()):1}function Ul(w,_,P){if(50<D_)throw D_=0,lF=null,Error(o(185));var O=aT(w,_);return O===null?null:(f_(O,_,P),(!(Tn&2)||O!==Jr)&&(O===Jr&&(!(Tn&2)&&(tT|=_),hs===4&&hp(O,Xs)),la(O,P),_===1&&Tn===0&&!(w.mode&1)&&(Ay(),SC&&Zu())),O)}function aT(w,_){w.lanes|=_;var P=w.alternate;for(P!==null&&(P.lanes|=_),P=w,w=w.return;w!==null;)w.childLanes|=_,P=w.alternate,P!==null&&(P.childLanes|=_),P=w,w=w.return;return P.tag===3?P.stateNode:null}function la(w,_){var P=w.callbackNode;gMe(w,_);var O=wC(w,w===Jr?Xs:0);if(O===0)P!==null&&Nq(P),w.callbackNode=null,w.callbackPriority=0;else if(_=O&-O,w.callbackPriority!==_){if(P!=null&&Nq(P),_===1)w.tag===0?AMe(eY.bind(null,w)):zq(eY.bind(null,w)),Te?Ie(function(){Tn===0&&Zu()}):gk(vk,Zu),P=null;else{switch(Fq(O)){case 1:P=vk;break;case 4:P=bMe;break;case 16:P=yk;break;case 536870912:P=wMe;break;default:P=yk}P=cY(P,QX.bind(null,w))}w.callbackPriority=_,w.callbackNode=P}}function QX(w,_){if(sT=-1,oT=0,Tn&6)throw Error(o(327));var P=w.callbackNode;if(Sg()&&w.callbackNode!==P)return null;var O=wC(w,w===Jr?Xs:0);if(O===0)return null;if(O&30||O&w.expiredLanes||_)_=lT(w,O);else{_=O;var k=Tn;Tn|=2;var $=iY();(Jr!==w||Xs!==_)&&(Ay(),wg(w,_));do try{$Me();break}catch(De){nY(w,De)}while(1);wk(),eT.current=$,Tn=k,Zr!==null?_=0:(Jr=null,Xs=0,_=hs)}if(_!==0){if(_===2&&(k=fk(w),k!==0&&(O=k,_=cF(w,k))),_===1)throw P=T_,wg(w,0),hp(w,O),la(w,Ps()),P;if(_===6)hp(w,O);else{if(k=w.current.alternate,!(O&30)&&!VMe(k)&&(_=lT(w,O),_===2&&($=fk(w),$!==0&&(O=$,_=cF(w,$))),_===1))throw P=T_,wg(w,0),hp(w,O),la(w,Ps()),P;switch(w.finishedWork=k,w.finishedLanes=O,_){case 0:case 1:throw Error(o(345));case 2:_g(w,aa);break;case 3:if(hp(w,O),(O&130023424)===O&&(_=sF+500-Ps(),10<_)){if(wC(w,0)!==0)break;if(k=w.suspendedLanes,(k&O)!==O){No(),w.pingedLanes|=w.suspendedLanes&k;break}w.timeoutHandle=te(_g.bind(null,w,aa),_);break}_g(w,aa);break;case 4:if(hp(w,O),(O&4194240)===O)break;for(_=w.eventTimes,k=-1;0<O;){var me=31-qc(O);$=1<<me,me=_[me],me>k&&(k=me),O&=~$}if(O=k,O=Ps()-O,O=(120>O?120:480>O?480:1080>O?1080:1920>O?1920:3e3>O?3e3:4320>O?4320:1960*jMe(O/1960))-O,10<O){w.timeoutHandle=te(_g.bind(null,w,aa),O);break}_g(w,aa);break;case 5:_g(w,aa);break;default:throw Error(o(329))}}}return la(w,Ps()),w.callbackNode===P?QX.bind(null,w):null}function cF(w,_){var P=P_;return w.current.memoizedState.isDehydrated&&(wg(w,_).flags|=256),w=lT(w,_),w!==2&&(_=aa,aa=P,_!==null&&uF(_)),w}function uF(w){aa===null?aa=w:aa.push.apply(aa,w)}function VMe(w){for(var _=w;;){if(_.flags&16384){var P=_.updateQueue;if(P!==null&&(P=P.stores,P!==null))for(var O=0;O<P.length;O++){var k=P[O],$=k.getSnapshot;k=k.value;try{if(!Ju($(),k))return!1}catch{return!1}}}if(P=_.child,_.subtreeFlags&16384&&P!==null)P.return=_,_=P;else{if(_===w)break;for(;_.sibling===null;){if(_.return===null||_.return===w)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function hp(w,_){for(_&=~rF,_&=~tT,w.suspendedLanes|=_,w.pingedLanes&=~_,w=w.expirationTimes;0<_;){var P=31-qc(_),O=1<<P;w[P]=-1,_&=~O}}function eY(w){if(Tn&6)throw Error(o(327));Sg();var _=wC(w,0);if(!(_&1))return la(w,Ps()),null;var P=lT(w,_);if(w.tag!==0&&P===2){var O=fk(w);O!==0&&(_=O,P=cF(w,O))}if(P===1)throw P=T_,wg(w,0),hp(w,_),la(w,Ps()),P;if(P===6)throw Error(o(345));return w.finishedWork=w.current.alternate,w.finishedLanes=_,_g(w,aa),la(w,Ps()),null}function tY(w){cp!==null&&cp.tag===0&&!(Tn&6)&&Sg();var _=Tn;Tn|=1;var P=Br.transition,O=Xn;try{if(Br.transition=null,Xn=1,w)return w()}finally{Xn=O,Br.transition=P,Tn=_,!(Tn&6)&&Zu()}}function hF(){Ha=_y.current,tn(_y)}function wg(w,_){w.finishedWork=null,w.finishedLanes=0;var P=w.timeoutHandle;if(P!==se&&(w.timeoutHandle=se,re(P)),Zr!==null)for(P=Zr.return;P!==null;){var O=P;switch(Tk(O),O.tag){case 1:O=O.type.childContextTypes,O!=null&&vC();break;case 3:by(),tn(Kr),tn(Gn),Bk();break;case 5:Rk(O);break;case 4:by();break;case 13:tn(lr);break;case 19:tn(lr);break;case 10:_k(O.type._context);break;case 22:case 23:hF()}P=P.return}if(Jr=w,Zr=w=dp(w.current,null),Xs=Ha=_,hs=0,T_=null,rF=tT=Sy=0,aa=P_=null,Qu!==null){for(_=0;_<Qu.length;_++)if(P=Qu[_],O=P.interleaved,O!==null){P.interleaved=null;var k=O.next,$=P.pending;if($!==null){var me=$.next;$.next=k,O.next=me}P.pending=O}Qu=null}return w}function nY(w,_){do{var P=Zr;try{if(wk(),IC.current=UC,BC){for(var O=yr.memoizedState;O!==null;){var k=O.queue;k!==null&&(k.pending=null),O=O.next}BC=!1}if(wy=0,Ds=co=yr=null,x_=!1,b_=0,iF.current=null,P===null||P.return===null){hs=1,T_=_,Zr=null;break}e:{var $=w,me=P.return,De=P,qe=_;if(_=Xs,De.flags|=32768,qe!==null&&typeof qe=="object"&&typeof qe.then=="function"){var lt=qe,Pt=De,vn=Pt.tag;if(!(Pt.mode&1)&&(vn===0||vn===11||vn===15)){var Xt=Pt.alternate;Xt?(Pt.updateQueue=Xt.updateQueue,Pt.memoizedState=Xt.memoizedState,Pt.lanes=Xt.lanes):(Pt.updateQueue=null,Pt.memoizedState=null)}var Si=SX(me);if(Si!==null){Si.flags&=-257,AX(Si,me,De,$,_),Si.mode&1&&_X($,lt,_),_=Si,qe=lt;var Ut=_.updateQueue;if(Ut===null){var fo=new Set;fo.add(qe),_.updateQueue=fo}else Ut.add(qe);break e}else{if(!(_&1)){_X($,lt,_),dF();break e}qe=Error(o(426))}}else if(tr&&De.mode&1){var Hl=SX(me);if(Hl!==null){!(Hl.flags&65536)&&(Hl.flags|=256),AX(Hl,me,De,$,_),Ok(qe);break e}}$=qe,hs!==4&&(hs=2),P_===null?P_=[$]:P_.push($),qe=Hk(qe,De),De=me;do{switch(De.tag){case 3:De.flags|=65536,_&=-_,De.lanes|=_;var ze=bX(De,qe,_);Hq(De,ze);break e;case 1:$=qe;var Oe=De.type,Ve=De.stateNode;if(!(De.flags&128)&&(typeof Oe.getDerivedStateFromError=="function"||Ve!==null&&typeof Ve.componentDidCatch=="function"&&(lp===null||!lp.has(Ve)))){De.flags|=65536,_&=-_,De.lanes|=_;var vt=wX(De,$,_);Hq(De,vt);break e}}De=De.return}while(De!==null)}sY(P)}catch(Ft){_=Ft,Zr===P&&P!==null&&(Zr=P=P.return);continue}break}while(1)}function iY(){var w=eT.current;return eT.current=UC,w===null?UC:w}function dF(){(hs===0||hs===3||hs===2)&&(hs=4),Jr===null||!(Sy&268435455)&&!(tT&268435455)||hp(Jr,Xs)}function lT(w,_){var P=Tn;Tn|=2;var O=iY();Jr===w&&Xs===_||wg(w,_);do try{WMe();break}catch(k){nY(w,k)}while(1);if(wk(),Tn=P,eT.current=O,Zr!==null)throw Error(o(261));return Jr=null,Xs=0,hs}function WMe(){for(;Zr!==null;)rY(Zr)}function $Me(){for(;Zr!==null&&!yMe();)rY(Zr)}function rY(w){var _=lY(w.alternate,w,Ha);w.memoizedProps=w.pendingProps,_===null?sY(w):Zr=_,iF.current=null}function sY(w){var _=w;do{var P=_.alternate;if(w=_.return,_.flags&32768){if(P=NMe(P,_),P!==null){P.flags&=32767,Zr=P;return}if(w!==null)w.flags|=32768,w.subtreeFlags=0,w.deletions=null;else{hs=6,Zr=null;return}}else if(P=BMe(P,_,Ha),P!==null){Zr=P;return}if(_=_.sibling,_!==null){Zr=_;return}Zr=_=w}while(_!==null);hs===0&&(hs=5)}function _g(w,_){var P=Xn,O=Br.transition;try{Br.transition=null,Xn=1,qMe(w,_,P)}finally{Br.transition=O,Xn=P}return null}function qMe(w,_,P){do Sg();while(cp!==null);if(Tn&6)throw Error(o(327));var O=w.finishedWork,k=w.finishedLanes;if(O===null)return null;if(w.finishedWork=null,w.finishedLanes=0,O===w.current)throw Error(o(177));w.callbackNode=null,w.callbackPriority=0;var $=O.lanes|O.childLanes;if(vMe(w,$),w===Jr&&(Zr=Jr=null,Xs=0),!(O.subtreeFlags&2064)&&!(O.flags&2064)||iT||(iT=!0,cY(yk,function(){return Sg(),null})),$=(O.flags&15990)!==0,O.subtreeFlags&15990||$){$=Br.transition,Br.transition=null;var me=Xn;Xn=1;var De=Tn;Tn|=4,iF.current=null,UMe(w,O),GMe(w,O),U(w.containerInfo),w.current=O,HMe(O),xMe(),Tn=De,Xn=me,Br.transition=$}else w.current=O;if(iT&&(iT=!1,cp=w,rT=k),$=w.pendingLanes,$===0&&(lp=null),_Me(O.stateNode),la(w,Ps()),_!==null)for(P=w.onRecoverableError,O=0;O<_.length;O++)P(_[O]);if(nT)throw nT=!1,w=aF,aF=null,w;return rT&1&&w.tag!==0&&Sg(),$=w.pendingLanes,$&1?w===lF?D_++:(D_=0,lF=w):D_=0,Zu(),null}function Sg(){if(cp!==null){var w=Fq(rT),_=Br.transition,P=Xn;try{if(Br.transition=null,Xn=16>w?16:w,cp===null)var O=!1;else{if(w=cp,cp=null,rT=0,Tn&6)throw Error(o(331));var k=Tn;for(Tn|=4,mt=w.current;mt!==null;){var $=mt,me=$.child;if(mt.flags&16){var De=$.deletions;if(De!==null){for(var qe=0;qe<De.length;qe++){var lt=De[qe];for(mt=lt;mt!==null;){var Pt=mt;switch(Pt.tag){case 0:case 11:case 15:bg(8,Pt,$)}var vn=Pt.child;if(vn!==null)vn.return=Pt,mt=vn;else for(;mt!==null;){Pt=mt;var Xt=Pt.sibling,Si=Pt.return;if(jX(Pt),Pt===lt){mt=null;break}if(Xt!==null){Xt.return=Si,mt=Xt;break}mt=Si}}}var Ut=$.alternate;if(Ut!==null){var fo=Ut.child;if(fo!==null){Ut.child=null;do{var Hl=fo.sibling;fo.sibling=null,fo=Hl}while(fo!==null)}}mt=$}}if($.subtreeFlags&2064&&me!==null)me.return=$,mt=me;else e:for(;mt!==null;){if($=mt,$.flags&2048)switch($.tag){case 0:case 11:case 15:bg(9,$,$.return)}var ze=$.sibling;if(ze!==null){ze.return=$.return,mt=ze;break e}mt=$.return}}var Oe=w.current;for(mt=Oe;mt!==null;){me=mt;var Ve=me.child;if(me.subtreeFlags&2064&&Ve!==null)Ve.return=me,mt=Ve;else e:for(me=Oe;mt!==null;){if(De=mt,De.flags&2048)try{switch(De.tag){case 0:case 11:case 15:E_(9,De)}}catch(Ft){ca(De,De.return,Ft)}if(De===me){mt=null;break e}var vt=De.sibling;if(vt!==null){vt.return=De.return,mt=vt;break e}mt=De.return}}if(Tn=k,Zu(),Ku&&typeof Ku.onPostCommitFiberRoot=="function")try{Ku.onPostCommitFiberRoot(_C,w)}catch{}O=!0}return O}finally{Xn=P,Br.transition=_}}return!1}function oY(w,_,P){_=Hk(P,_),_=bX(w,_,1),ap(w,_),_=No(),w=aT(w,1),w!==null&&(f_(w,1,_),la(w,_))}function ca(w,_,P){if(w.tag===3)oY(w,w,P);else for(;_!==null;){if(_.tag===3){oY(_,w,P);break}else if(_.tag===1){var O=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(lp===null||!lp.has(O))){w=Hk(P,w),w=wX(_,w,1),ap(_,w),w=No(),_=aT(_,1),_!==null&&(f_(_,1,w),la(_,w));break}}_=_.return}}function XMe(w,_,P){var O=w.pingCache;O!==null&&O.delete(_),_=No(),w.pingedLanes|=w.suspendedLanes&P,Jr===w&&(Xs&P)===P&&(hs===4||hs===3&&(Xs&130023424)===Xs&&500>Ps()-sF?wg(w,0):rF|=P),la(w,_)}function aY(w,_){_===0&&(w.mode&1?(_=bC,bC<<=1,!(bC&130023424)&&(bC=4194304)):_=1);var P=No();w=aT(w,_),w!==null&&(f_(w,_,P),la(w,P))}function YMe(w){var _=w.memoizedState,P=0;_!==null&&(P=_.retryLane),aY(w,P)}function KMe(w,_){var P=0;switch(w.tag){case 13:var O=w.stateNode,k=w.memoizedState;k!==null&&(P=k.retryLane);break;case 19:O=w.stateNode;break;default:throw Error(o(314))}O!==null&&O.delete(_),aY(w,P)}var lY;lY=function(w,_,P){if(w!==null)if(w.memoizedProps!==_.pendingProps||Kr.current)Ga=!0;else{if(!(w.lanes&P)&&!(_.flags&128))return Ga=!1,FMe(w,_,P);Ga=!!(w.flags&131072)}else Ga=!1,tr&&_.flags&1048576&&Xq(_,OC,_.index);switch(_.lanes=0,_.tag){case 2:var O=_.type;w!==null&&(w.alternate=null,_.alternate=null,_.flags|=2),w=_.pendingProps;var k=_d(_,Gn.current);py(_,P),k=Fk(null,_,O,w,k,P);var $=Nk();return _.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,oa(O)?($=!0,yC(_)):$=!1,_.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Ak(_),k.updater=PC,_.stateNode=k,k._reactInternals=_,Ek(_,O,w,P),_=Wk(null,_,O,!0,$,P)):(_.tag=0,tr&&$&&Ck(_),Fo(null,_,k,P),_=_.child),_;case 16:O=_.elementType;e:{switch(w!==null&&(w.alternate=null,_.alternate=null,_.flags|=2),w=_.pendingProps,k=O._init,O=k(O._payload),_.type=O,k=_.tag=ZMe(O),w=Xc(O,w),k){case 0:_=Vk(null,_,O,w,P);break e;case 1:_=LX(null,_,O,w,P);break e;case 11:_=CX(null,_,O,w,P);break e;case 14:_=TX(null,_,O,Xc(O.type,w),P);break e}throw Error(o(306,O,""))}return _;case 0:return O=_.type,k=_.pendingProps,k=_.elementType===O?k:Xc(O,k),Vk(w,_,O,k,P);case 1:return O=_.type,k=_.pendingProps,k=_.elementType===O?k:Xc(O,k),LX(w,_,O,k,P);case 3:e:{if(RX(_),w===null)throw Error(o(387));O=_.pendingProps,$=_.memoizedState,k=$.element,Gq(w,_),TC(_,O,null,P);var me=_.memoizedState;if(O=me.element,ae&&$.isDehydrated)if($={element:O,isDehydrated:!1,cache:me.cache,transitions:me.transitions},_.updateQueue.baseState=$,_.memoizedState=$,_.flags&256){k=Error(o(423)),_=IX(w,_,O,P,k);break e}else if(O!==k){k=Error(o(424)),_=IX(w,_,O,P,k);break e}else for(ae&&(Ua=de(_.stateNode.containerInfo),za=_,tr=!0,Yc=null,p_=!1),P=eX(_,null,O,P),_.child=P;P;)P.flags=P.flags&-3|4096,P=P.sibling;else{if(vy(),O===k){_=Td(w,_,P);break e}Fo(w,_,O,P)}_=_.child}return _;case 5:return tX(_),w===null&&Dk(_),O=_.type,k=_.pendingProps,$=w!==null?w.memoizedProps:null,me=k.children,K(O,k)?me=null:$!==null&&K(O,$)&&(_.flags|=32),OX(w,_),Fo(w,_,me,P),_.child;case 6:return w===null&&Dk(_),null;case 13:return BX(w,_,P);case 4:return Lk(_,_.stateNode.containerInfo),O=_.pendingProps,w===null?_.child=yy(_,null,O,P):Fo(w,_,O,P),_.child;case 11:return O=_.type,k=_.pendingProps,k=_.elementType===O?k:Xc(O,k),CX(w,_,O,k,P);case 7:return Fo(w,_,_.pendingProps,P),_.child;case 8:return Fo(w,_,_.pendingProps.children,P),_.child;case 12:return Fo(w,_,_.pendingProps.children,P),_.child;case 10:e:{if(O=_.type._context,k=_.pendingProps,$=_.memoizedProps,me=k.value,Uq(_,O,me),$!==null)if(Ju($.value,me)){if($.children===k.children&&!Kr.current){_=Td(w,_,P);break e}}else for($=_.child,$!==null&&($.return=_);$!==null;){var De=$.dependencies;if(De!==null){me=$.child;for(var qe=De.firstContext;qe!==null;){if(qe.context===O){if($.tag===1){qe=Ad(-1,P&-P),qe.tag=2;var lt=$.updateQueue;if(lt!==null){lt=lt.shared;var Pt=lt.pending;Pt===null?qe.next=qe:(qe.next=Pt.next,Pt.next=qe),lt.pending=qe}}$.lanes|=P,qe=$.alternate,qe!==null&&(qe.lanes|=P),Sk($.return,P,_),De.lanes|=P;break}qe=qe.next}}else if($.tag===10)me=$.type===_.type?null:$.child;else if($.tag===18){if(me=$.return,me===null)throw Error(o(341));me.lanes|=P,De=me.alternate,De!==null&&(De.lanes|=P),Sk(me,P,_),me=$.sibling}else me=$.child;if(me!==null)me.return=$;else for(me=$;me!==null;){if(me===_){me=null;break}if($=me.sibling,$!==null){$.return=me.return,me=$;break}me=me.return}$=me}Fo(w,_,k.children,P),_=_.child}return _;case 9:return k=_.type,O=_.pendingProps.children,py(_,P),k=Bl(k),O=O(k),_.flags|=1,Fo(w,_,O,P),_.child;case 14:return O=_.type,k=Xc(O,_.pendingProps),k=Xc(O.type,k),TX(w,_,O,k,P);case 15:return PX(w,_,_.type,_.pendingProps,P);case 17:return O=_.type,k=_.pendingProps,k=_.elementType===O?k:Xc(O,k),w!==null&&(w.alternate=null,_.alternate=null,_.flags|=2),_.tag=1,oa(O)?(w=!0,yC(_)):w=!1,py(_,P),$q(_,O,k),Ek(_,O,k,P),Wk(null,_,O,!0,w,P);case 19:return zX(w,_,P);case 22:return DX(w,_,P)}throw Error(o(156,_.tag))};function cY(w,_){return gk(w,_)}function JMe(w,_,P,O){this.tag=w,this.key=P,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gl(w,_,P,O){return new JMe(w,_,P,O)}function fF(w){return w=w.prototype,!(!w||!w.isReactComponent)}function ZMe(w){if(typeof w=="function")return fF(w)?1:0;if(w!=null){if(w=w.$$typeof,w===m)return 11;if(w===y)return 14}return 2}function dp(w,_){var P=w.alternate;return P===null?(P=Gl(w.tag,_,w.key,w.mode),P.elementType=w.elementType,P.type=w.type,P.stateNode=w.stateNode,P.alternate=w,w.alternate=P):(P.pendingProps=_,P.type=w.type,P.flags=0,P.subtreeFlags=0,P.deletions=null),P.flags=w.flags&14680064,P.childLanes=w.childLanes,P.lanes=w.lanes,P.child=w.child,P.memoizedProps=w.memoizedProps,P.memoizedState=w.memoizedState,P.updateQueue=w.updateQueue,_=w.dependencies,P.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},P.sibling=w.sibling,P.index=w.index,P.ref=w.ref,P}function cT(w,_,P,O,k,$){var me=2;if(O=w,typeof w=="function")fF(w)&&(me=1);else if(typeof w=="string")me=5;else e:switch(w){case h:return Ag(P.children,k,$,_);case u:me=8,k|=8;break;case d:return w=Gl(12,P,_,k|2),w.elementType=d,w.lanes=$,w;case g:return w=Gl(13,P,_,k),w.elementType=g,w.lanes=$,w;case v:return w=Gl(19,P,_,k),w.elementType=v,w.lanes=$,w;case b:return uT(P,k,$,_);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case f:me=10;break e;case p:me=9;break e;case m:me=11;break e;case y:me=14;break e;case x:me=16,O=null;break e}throw Error(o(130,w==null?w:typeof w,""))}return _=Gl(me,P,_,k),_.elementType=w,_.type=O,_.lanes=$,_}function Ag(w,_,P,O){return w=Gl(7,w,O,_),w.lanes=P,w}function uT(w,_,P,O){return w=Gl(22,w,O,_),w.elementType=b,w.lanes=P,w.stateNode={},w}function pF(w,_,P){return w=Gl(6,w,null,_),w.lanes=P,w}function mF(w,_,P){return _=Gl(4,w.children!==null?w.children:[],w.key,_),_.lanes=P,_.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},_}function QMe(w,_,P,O,k){this.tag=_,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=se,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pk(0),this.expirationTimes=pk(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pk(0),this.identifierPrefix=O,this.onRecoverableError=k,ae&&(this.mutableSourceEagerHydrationData=null)}function uY(w,_,P,O,k,$,me,De,qe){return w=new QMe(w,_,P,De,qe),_===1?(_=1,$===!0&&(_|=8)):_=0,$=Gl(3,null,null,_),w.current=$,$.stateNode=w,$.memoizedState={element:O,isDehydrated:P,cache:null,transitions:null},Ak($),w}function hY(w){if(!w)return Oi;w=w._reactInternals;e:{if(C(w)!==w||w.tag!==1)throw Error(o(170));var _=w;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(oa(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(o(171))}if(w.tag===1){var P=w.type;if(oa(P))return Bq(w,P,_)}return _}function dY(w){var _=w._reactInternals;if(_===void 0)throw typeof w.render=="function"?Error(o(188)):(w=Object.keys(w).join(","),Error(o(268,w)));return w=L(_),w===null?null:w.stateNode}function fY(w,_){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var P=w.retryLane;w.retryLane=P!==0&&P<_?P:_}}function gF(w,_){fY(w,_),(w=w.alternate)&&fY(w,_)}function e2e(w){return w=L(w),w===null?null:w.stateNode}function t2e(){return null}return n.attemptContinuousHydration=function(w){if(w.tag===13){var _=No();Ul(w,134217728,_),gF(w,134217728)}},n.attemptHydrationAtCurrentPriority=function(w){if(w.tag===13){var _=No(),P=up(w);Ul(w,P,_),gF(w,P)}},n.attemptSynchronousHydration=function(w){switch(w.tag){case 3:var _=w.stateNode;if(_.current.memoizedState.isDehydrated){var P=d_(_.pendingLanes);P!==0&&(mk(_,P|1),la(_,Ps()),!(Tn&6)&&(Ay(),Zu()))}break;case 13:var O=No();tY(function(){return Ul(w,1,O)}),gF(w,1)}},n.batchedUpdates=function(w,_){var P=Tn;Tn|=1;try{return w(_)}finally{Tn=P,Tn===0&&(Ay(),SC&&Zu())}},n.createComponentSelector=function(w){return{$$typeof:YC,value:w}},n.createContainer=function(w,_,P,O,k,$,me){return uY(w,_,!1,null,P,O,k,$,me)},n.createHasPseudoClassSelector=function(w){return{$$typeof:KC,value:w}},n.createHydrationContainer=function(w,_,P,O,k,$,me,De,qe){return w=uY(P,O,!0,w,k,$,me,De,qe),w.context=hY(null),P=w.current,O=No(),k=up(P),$=Ad(O,k),$.callback=_??null,ap(P,$),w.current.lanes=k,f_(w,k,O),la(w,O),w},n.createPortal=function(w,_,P){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:O==null?null:""+O,children:w,containerInfo:_,implementation:P}},n.createRoleSelector=function(w){return{$$typeof:JC,value:w}},n.createTestNameSelector=function(w){return{$$typeof:ZC,value:w}},n.createTextSelector=function(w){return{$$typeof:QC,value:w}},n.deferredUpdates=function(w){var _=Xn,P=Br.transition;try{return Br.transition=null,Xn=16,w()}finally{Xn=_,Br.transition=P}},n.discreteUpdates=function(w,_,P,O,k){var $=Xn,me=Br.transition;try{return Br.transition=null,Xn=1,w(_,P,O,k)}finally{Xn=$,Br.transition=me,Tn===0&&Ay()}},n.findAllNodes=nF,n.findBoundingRects=function(w,_){if(!xe)throw Error(o(363));_=nF(w,_),w=[];for(var P=0;P<_.length;P++)w.push(N(_[P]));for(_=w.length-1;0<_;_--){P=w[_];for(var O=P.x,k=O+P.width,$=P.y,me=$+P.height,De=_-1;0<=De;De--)if(_!==De){var qe=w[De],lt=qe.x,Pt=lt+qe.width,vn=qe.y,Xt=vn+qe.height;if(O>=lt&&$>=vn&&k<=Pt&&me<=Xt){w.splice(_,1);break}else if(O!==lt||P.width!==qe.width||Xt<$||vn>me){if(!($!==vn||P.height!==qe.height||Pt<O||lt>k)){lt>O&&(qe.width+=lt-O,qe.x=O),Pt<k&&(qe.width=k-lt),w.splice(_,1);break}}else{vn>$&&(qe.height+=vn-$,qe.y=$),Xt<me&&(qe.height=me-vn),w.splice(_,1);break}}}return w},n.findHostInstance=dY,n.findHostInstanceWithNoPortals=function(w){return w=D(w),w=w!==null?R(w):null,w===null?null:w.stateNode},n.findHostInstanceWithWarning=function(w){return dY(w)},n.flushControlled=function(w){var _=Tn;Tn|=1;var P=Br.transition,O=Xn;try{Br.transition=null,Xn=1,w()}finally{Xn=O,Br.transition=P,Tn=_,Tn===0&&(Ay(),Zu())}},n.flushPassiveEffects=Sg,n.flushSync=tY,n.focusWithin=function(w,_){if(!xe)throw Error(o(363));for(w=Qk(w),_=ZX(w,_),_=Array.from(_),w=0;w<_.length;){var P=_[w++];if(!le(P)){if(P.tag===5&&Ee(P.stateNode))return!0;for(P=P.child;P!==null;)_.push(P),P=P.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Xn},n.getFindAllNodesFailureDescription=function(w,_){if(!xe)throw Error(o(363));var P=0,O=[];w=[Qk(w),0];for(var k=0;k<w.length;){var $=w[k++],me=w[k++],De=_[me];if(($.tag!==5||!le($))&&(eF($,De)&&(O.push(tF(De)),me++,me>P&&(P=me)),me<_.length))for($=$.child;$!==null;)w.push($,me),$=$.sibling}if(P<_.length){for(w=[];P<_.length;P++)w.push(tF(_[P]));return`findAllNodes was able to match part of the selector:
  `+(O.join(" > ")+`

No matching component was found for:
  `)+w.join(" > ")}return null},n.getPublicRootInstance=function(w){if(w=w.current,!w.child)return null;switch(w.child.tag){case 5:return Z(w.child.stateNode);default:return w.child.stateNode}},n.injectIntoDevTools=function(w){if(w={bundleType:w.bundleType,version:w.version,rendererPackageName:w.rendererPackageName,rendererConfig:w.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:e2e,findFiberByHostInstance:w.findFiberByHostInstance||t2e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")w=!1;else{var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(_.isDisabled||!_.supportsFiber)w=!0;else{try{_C=_.inject(w),Ku=_}catch{}w=!!_.checkDCE}}return w},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(w,_,P,O){if(!xe)throw Error(o(363));w=nF(w,_);var k=Fe(w,P,O).disconnect;return{disconnect:function(){k()}}},n.registerMutableSourceForHydration=function(w,_){var P=_._getVersion;P=P(_._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[_,P]:w.mutableSourceEagerHydrationData.push(_,P)},n.runWithPriority=function(w,_){var P=Xn;try{return Xn=w,_()}finally{Xn=P}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(w,_,P,O){var k=_.current,$=No(),me=up(k);return P=hY(P),_.context===null?_.context=P:_.pendingContext=P,_=Ad($,me),_.payload={element:w},O=O===void 0?null:O,O!==null&&(_.callback=O),ap(k,_),w=Ul(k,me,$),w!==null&&CC(w,k,me),me},n};(function(t){t.exports=mWe})(fWe);const gWe=PR(OG);function U0e(t,e,n=(i,r)=>i===r){if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}const uf=[];function G0e(t,e,n=!1,i={}){for(const s of uf)if(U0e(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!n)throw s.promise}const r={keys:e,equal:i.equal,promise:t(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=uf.indexOf(r);s!==-1&&uf.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(uf.push(r),!n)throw r.promise}const vWe=(t,e,n)=>G0e(t,e,!1,n),yWe=(t,e,n)=>void G0e(t,e,!0,n),xWe=t=>{if(t===void 0||t.length===0)uf.splice(0,uf.length);else{const e=uf.find(n=>U0e(t,n.keys,n.equal));if(e){const n=uf.indexOf(e);n!==-1&&uf.splice(n,1)}}},Q9={},H0e=t=>void Object.assign(Q9,t);function bWe(t,e){function n(h,{args:u=[],attach:d,...f},p){let m=`${h[0].toUpperCase()}${h.slice(1)}`,g;if(h==="primitive"){if(f.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=f.object;g=I1(v,{type:h,root:p,attach:d,primitive:!0})}else{const v=Q9[m];if(!v)throw new Error(`R3F: ${m} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(u))throw new Error("R3F: The args prop must be an array!");g=I1(new v(...u),{type:h,root:p,attach:d,memoizedProps:{args:u}})}return g.__r3f.attach===void 0&&(g instanceof yt?g.__r3f.attach="geometry":g instanceof gr&&(g.__r3f.attach="material")),m!=="inject"&&XN(g,f),g}function i(h,u){let d=!1;if(u){var f,p;(f=u.__r3f)!=null&&f.attach?qN(h,u,u.__r3f.attach):u.isObject3D&&h.isObject3D&&(h.add(u),d=!0),d||(p=h.__r3f)==null||p.objects.push(u),u.__r3f||I1(u,{}),u.__r3f.parent=h,RG(u),B1(u)}}function r(h,u,d){let f=!1;if(u){var p,m;if((p=u.__r3f)!=null&&p.attach)qN(h,u,u.__r3f.attach);else if(u.isObject3D&&h.isObject3D){u.parent=h,u.dispatchEvent({type:"added"});const g=h.children.filter(y=>y!==u),v=g.indexOf(d);h.children=[...g.slice(0,v),u,...g.slice(v)],f=!0}f||(m=h.__r3f)==null||m.objects.push(u),u.__r3f||I1(u,{}),u.__r3f.parent=h,RG(u),B1(u)}}function s(h,u,d=!1){h&&[...h].forEach(f=>o(u,f,d))}function o(h,u,d){if(u){var f,p,m;if(u.__r3f&&(u.__r3f.parent=null),(f=h.__r3f)!=null&&f.objects&&(h.__r3f.objects=h.__r3f.objects.filter(b=>b!==u)),(p=u.__r3f)!=null&&p.attach)xee(h,u,u.__r3f.attach);else if(u.isObject3D&&h.isObject3D){var g;h.remove(u),(g=u.__r3f)!=null&&g.root&&EWe(u.__r3f.root,u)}const y=(m=u.__r3f)==null?void 0:m.primitive,x=d===void 0?u.dispose!==null&&!y:d;if(!y){var v;s((v=u.__r3f)==null?void 0:v.objects,u,x),s(u.children,u,x)}u.__r3f&&(delete u.__r3f.root,delete u.__r3f.objects,delete u.__r3f.handlers,delete u.__r3f.memoizedProps,y||delete u.__r3f),x&&u.dispose&&u.type!=="Scene"&&_2.unstable_scheduleCallback(_2.unstable_IdlePriority,()=>{try{u.dispose()}catch{}}),B1(h)}}function a(h,u,d,f){var p;const m=(p=h.__r3f)==null?void 0:p.parent;if(!m)return;const g=n(u,d,h.__r3f.root);if(h.children){for(const v of h.children)v.__r3f&&i(g,v);h.children=h.children.filter(v=>!v.__r3f)}h.__r3f.objects.forEach(v=>i(g,v)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(m,h),g.parent&&(g.__r3f.autoRemovedBeforeAppend=!0),i(m,g),g.raycast&&g.__r3f.eventCount&&g.__r3f.root.getState().internal.interaction.push(g),[f,f.alternate].forEach(v=>{v!==null&&(v.stateNode=g,v.ref&&(typeof v.ref=="function"?v.ref(g):v.ref.current=g))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:gWe({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,u)=>{if(!u)return;const d=h.getState().scene;d.__r3f&&(d.__r3f.root=h,i(d,u))},removeChildFromContainer:(h,u)=>{u&&o(h.getState().scene,u)},insertInContainerBefore:(h,u,d)=>{if(!u||!d)return;const f=h.getState().scene;f.__r3f&&r(f,u,d)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var u;return!!((u=h==null?void 0:h.__r3f)!=null?u:{}).handlers},prepareUpdate(h,u,d,f){if(h.__r3f.primitive&&f.object&&f.object!==h)return[!0];{const{args:p=[],children:m,...g}=f,{args:v=[],children:y,...x}=d;if(!Array.isArray(p))throw new Error("R3F: the args prop must be an array!");if(p.some((S,A)=>S!==v[A]))return[!0];const b=K0e(h,g,x,!0);return b.changes.length?[!1,b]:null}},commitUpdate(h,[u,d],f,p,m,g){u?a(h,f,m,g):XN(h,d)},commitMount(h,u,d,f){var p;const m=(p=h.__r3f)!=null?p:{};h.raycast&&m.handlers&&m.eventCount&&h.__r3f.root.getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>I1(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var u;const{attach:d,parent:f}=(u=h.__r3f)!=null?u:{};d&&f&&xee(f,h,d),h.isObject3D&&(h.visible=!1),B1(h)},unhideInstance(h,u){var d;const{attach:f,parent:p}=(d=h.__r3f)!=null?d:{};f&&p&&qN(p,h,f),(h.isObject3D&&u.visible==null||u.visible)&&(h.visible=!0),B1(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():nm.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Ki.fun(performance.now)?performance.now:Ki.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Ki.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Ki.fun(clearTimeout)?clearTimeout:void 0}),applyProps:XN}}var mee,gee;const j0e=()=>{var t;return(t=Q9.ColorManagement)!=null?t:null},V0e=t=>t&&t.isOrthographicCamera,wWe=t=>t&&t.hasOwnProperty("current"),NE=typeof window<"u"&&((mee=window.document)!=null&&mee.createElement||((gee=window.navigator)==null?void 0:gee.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function W0e(t){const e=W.useRef(t);return NE(()=>void(e.current=t),[t]),e}function _We({set:t}){return NE(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class $0e extends W.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}$0e.getDerivedStateFromError=()=>({error:!0});const q0e="__default",vee=new Map,SWe=t=>t&&!!t.memoized&&!!t.changes;function X0e(t){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(t)?Math.min(Math.max(t[0],e),t[1]):t}const rS=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},Ki={obj:t=>t===Object(t)&&!Ki.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Ki.str(t)||Ki.num(t))return t===e;const s=Ki.obj(t);if(s&&i==="reference")return t===e;const o=Ki.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&i==="shallow"){for(a in r?e:t)if(!Ki.equ(t[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:t)if(t[a]!==e[a])return!1;if(Ki.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function Y0e(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function AWe(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function I1(t,e){const n=t;return(e!=null&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function LG(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((s,o)=>s[o],t),{target:n,key:r}}else return{target:n,key:e}}const yee=/-\d+$/;function qN(t,e,n){if(Ki.str(n)){if(yee.test(n)){const s=n.replace(yee,""),{target:o,key:a}=LG(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=LG(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function xee(t,e,n){var i,r;if(Ki.str(n)){const{target:s,key:o}=LG(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(t,e);(r=e.__r3f)==null||delete r.previousAttach}function K0e(t,{children:e,key:n,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){var h;const u=(h=t==null?void 0:t.__r3f)!=null?h:{},d=Object.entries(r),f=[];if(c){const m=Object.keys(l);for(let g=0;g<m.length;g++)r.hasOwnProperty(m[g])||d.unshift([m[g],q0e+"remove"])}d.forEach(([m,g])=>{var v;if((v=t.__r3f)!=null&&v.primitive&&m==="object"||Ki.equ(g,l[m]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(m))return f.push([m,g,!0,[]]);let y=[];m.includes("-")&&(y=m.split("-")),f.push([m,g,!1,y]);for(const x in r){const b=r[x];x.startsWith(`${m}-`)&&f.push([x,b,!1,x.split("-")])}});const p={...r};return u.memoizedProps&&u.memoizedProps.args&&(p.args=u.memoizedProps.args),u.memoizedProps&&u.memoizedProps.attach&&(p.attach=u.memoizedProps.attach),{memoized:p,changes:f}}function XN(t,e){var n,i,r;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:c}=SWe(e)?e:K0e(t,e),h=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let d=0;d<c.length;d++){let[f,p,m,g]=c[d],v=t,y=v[f];if(g.length&&(y=g.reduce((x,b)=>x[b],t),!(y&&y.set))){const[x,...b]=g.reverse();v=b.reverse().reduce((S,A)=>S[A],t),f=x}if(p===q0e+"remove")if(v.constructor){let x=vee.get(v.constructor);x||(x=new v.constructor,vee.set(v.constructor,x)),p=x[f]}else p=0;if(m)p?s.handlers[f]=p:delete s.handlers[f],s.eventCount=Object.keys(s.handlers).length;else if(y&&y.set&&(y.copy||y instanceof q0)){if(Array.isArray(p))y.fromArray?y.fromArray(p):y.set(...p);else if(y.copy&&p&&p.constructor&&y.constructor===p.constructor)y.copy(p);else if(p!==void 0){const x=y instanceof nt;!x&&y.setScalar?y.setScalar(p):y instanceof q0&&p instanceof q0?y.mask=p.mask:y.set(p),!j0e()&&!a.linear&&x&&y.convertSRGBToLinear()}}else v[f]=p,!a.linear&&v[f]instanceof bi&&v[f].format===fa&&v[f].type===Nf&&(v[f].encoding=xn);B1(t)}if(s.parent&&a.internal&&t.raycast&&h!==s.eventCount){const d=a.internal.interaction.indexOf(t);d>-1&&a.internal.interaction.splice(d,1),s.eventCount&&a.internal.interaction.push(t)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(r=t.__r3f)!=null&&r.parent&&RG(t),t}function B1(t){var e,n;const i=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function RG(t){t.onUpdate==null||t.onUpdate(t)}function J0e(t,e){t.manual||(V0e(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function wP(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function MWe(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return nm.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return nm.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return nm.ContinuousEventPriority;default:return nm.DefaultEventPriority}}function Z0e(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function EWe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{Z0e(n.capturedMap,e,i,r)})}function CWe(t){function e(l){const{internal:c}=t.getState(),h=l.offsetX-c.initialClick[0],u=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(h*h+u*u))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(h=>{var u;return(u=c.__r3f)==null?void 0:u.handlers["onPointer"+h]}))}function i(l,c){const h=t.getState(),u=new Set,d=[],f=c?c(h.internal.interaction):h.internal.interaction;for(let v=0;v<f.length;v++){const y=rS(f[v]);y&&(y.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function p(v){const y=rS(v);if(!y||!y.events.enabled||y.raycaster.camera===null)return[];if(y.raycaster.camera===void 0){var x;y.events.compute==null||y.events.compute(l,y,(x=y.previousRoot)==null?void 0:x.getState()),y.raycaster.camera===void 0&&(y.raycaster.camera=null)}return y.raycaster.camera?y.raycaster.intersectObject(v,!0):[]}let m=f.flatMap(p).sort((v,y)=>{const x=rS(v.object),b=rS(y.object);return!x||!b?v.distance-y.distance:b.events.priority-x.events.priority||v.distance-y.distance}).filter(v=>{const y=wP(v);return u.has(y)?!1:(u.add(y),!0)});h.events.filter&&(m=h.events.filter(m,h));for(const v of m){let y=v.object;for(;y;){var g;(g=y.__r3f)!=null&&g.eventCount&&d.push({...v,eventObject:y}),y=y.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let v of h.internal.capturedMap.get(l.pointerId).values())u.has(wP(v.intersection))||d.push(v.intersection);return d}function r(l,c,h,u){const d=t.getState();if(l.length){const f={stopped:!1};for(const p of l){const m=rS(p.object)||d,{raycaster:g,pointer:v,camera:y,internal:x}=m,b=new q(v.x,v.y,0).unproject(y),S=T=>{var D,L;return(D=(L=x.capturedMap.get(T))==null?void 0:L.has(p.eventObject))!=null?D:!1},A=T=>{const D={intersection:p,target:c.target};x.capturedMap.has(T)?x.capturedMap.get(T).set(p.eventObject,D):x.capturedMap.set(T,new Map([[p.eventObject,D]])),c.target.setPointerCapture(T)},E=T=>{const D=x.capturedMap.get(T);D&&Z0e(x.capturedMap,p.eventObject,D,T)};let M={};for(let T in c){let D=c[T];typeof D!="function"&&(M[T]=D)}let C={...p,...M,pointer:v,intersections:l,stopped:f.stopped,delta:h,unprojectedPoint:b,ray:g.ray,camera:y,stopPropagation(){const T="pointerId"in c&&x.capturedMap.get(c.pointerId);if((!T||T.has(p.eventObject))&&(C.stopped=f.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(D=>D.eventObject===p.eventObject))){const D=l.slice(0,l.indexOf(p));s([...D,p])}},target:{hasPointerCapture:S,setPointerCapture:A,releasePointerCapture:E},currentTarget:{hasPointerCapture:S,setPointerCapture:A,releasePointerCapture:E},nativeEvent:c};if(u(C),f.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const h of c.hovered.values())if(!l.length||!l.find(u=>u.object===h.object&&u.index===h.index&&u.instanceId===h.instanceId)){const d=h.eventObject.__r3f,f=d==null?void 0:d.handlers;if(c.hovered.delete(wP(h)),d!=null&&d.eventCount){const p={...h,intersections:l};f.onPointerOut==null||f.onPointerOut(p),f.onPointerLeave==null||f.onPointerLeave(p)}}}function o(l,c){for(let h=0;h<c.length;h++){const u=c[h].__r3f;u==null||u.handlers.onPointerMissed==null||u.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:h}=t.getState();"pointerId"in c&&h.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(c.pointerId)&&(h.capturedMap.delete(c.pointerId),s([]))})}}return function(h){const{onPointerMissed:u,internal:d}=t.getState();d.lastEvent.current=h;const f=l==="onPointerMove",p=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",g=i(h,f?n:void 0),v=p?e(h):0;l==="onPointerDown"&&(d.initialClick=[h.offsetX,h.offsetY],d.initialHits=g.map(x=>x.eventObject)),p&&!g.length&&v<=2&&(o(h,d.interaction),u&&u(h)),f&&s(g);function y(x){const b=x.eventObject,S=b.__r3f,A=S==null?void 0:S.handlers;if(S!=null&&S.eventCount)if(f){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const E=wP(x),M=d.hovered.get(E);M?M.stopped&&x.stopPropagation():(d.hovered.set(E,x),A.onPointerOver==null||A.onPointerOver(x),A.onPointerEnter==null||A.onPointerEnter(x))}A.onPointerMove==null||A.onPointerMove(x)}else{const E=A[l];E?(!p||d.initialHits.includes(b))&&(o(h,d.interaction.filter(M=>!d.initialHits.includes(M))),E(x)):p&&d.initialHits.includes(b)&&o(h,d.interaction.filter(M=>!d.initialHits.includes(M)))}}r(g,h,v,y)}}return{handlePointer:a}}const TWe=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Q0e=t=>!!(t!=null&&t.render),eW=W.createContext(null),PWe=(t,e)=>{const n=N0e((a,l)=>{const c=new q,h=new q,u=new q;function d(v=l().camera,y=h,x=l().size){const{width:b,height:S,top:A,left:E}=x,M=b/S;y instanceof q?u.copy(y):u.set(...y);const C=v.getWorldPosition(c).distanceTo(u);if(V0e(v))return{width:b/v.zoom,height:S/v.zoom,top:A,left:E,factor:1,distance:C,aspect:M};{const T=v.fov*Math.PI/180,D=2*Math.tan(T/2)*C,L=D*(b/S);return{width:L,height:D,top:A,left:E,factor:b/L,distance:C,aspect:M}}}let f;const p=v=>a(y=>({performance:{...y.performance,current:v}})),m=new Me;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>t(l(),v),advance:(v,y)=>e(v,y,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Y9,pointer:m,mouse:m,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();f&&clearTimeout(f),v.performance.current!==v.performance.min&&p(v.performance.min),f=setTimeout(()=>p(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:v=>a(y=>({...y,events:{...y.events,...v}})),setSize:(v,y,x,b,S)=>{const A=l().camera,E={width:v,height:y,top:b||0,left:S||0,updateStyle:x};a(M=>({size:E,viewport:{...M.viewport,...d(A,h,E)}}))},setDpr:v=>a(y=>{const x=X0e(v);return{viewport:{...y.viewport,dpr:x,initialDpr:y.viewport.initialDpr||x}}}),setFrameloop:(v="always")=>{const y=l().clock;y.stop(),y.elapsedTime=0,v!=="never"&&(y.start(),y.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:W.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,y,x)=>{const b=l().internal;return b.priority=b.priority+(y>0?1:0),b.subscribers.push({ref:v,priority:y,store:x}),b.subscribers=b.subscribers.sort((S,A)=>S.priority-A.priority),()=>{const S=l().internal;S!=null&&S.subscribers&&(S.priority=S.priority-(y>0?1:0),S.subscribers=S.subscribers.filter(A=>A.ref!==v))}}}}}),i=n.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:h,set:u}=n.getState();if(l!==r||c.dpr!==s){var d;r=l,s=c.dpr,J0e(a,l),h.setPixelRatio(c.dpr);const f=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,f)}a!==o&&(o=a,u(f=>({viewport:{...f.viewport,...f.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let _P,DWe=new Set,OWe=new Set,LWe=new Set;function YN(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function sS(t,e){switch(t){case"before":return YN(DWe,e);case"after":return YN(OWe,e);case"tail":return YN(LWe,e)}}let KN,JN;function ZN(t,e,n){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),KN=e.internal.subscribers,_P=0;_P<KN.length;_P++)JN=KN[_P],JN.ref.current(JN.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function RWe(t){let e=!1,n,i,r;function s(l){i=requestAnimationFrame(s),e=!0,n=0,sS("before",l);for(const h of t.values()){var c;r=h.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((c=r.gl.xr)!=null&&c.isPresenting)&&(n+=ZN(l,r))}if(sS("after",l),n===0)return sS("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,c=1){var h;if(!l)return t.forEach(u=>o(u.store.getState()),c);(h=l.gl.xr)!=null&&h.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,h,u){if(c&&sS("before",l),h)ZN(l,h,u);else for(const d of t.values())ZN(l,d.store.getState());c&&sS("after",l)}return{loop:s,invalidate:o,advance:a}}function tW(){const t=W.useContext(eW);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function S2(t=n=>n,e){return tW()(t,e)}function YI(t,e=0){const n=tW(),i=n.getState().internal.subscribe,r=W0e(t);return NE(()=>i(r,e,n),[e,i,n]),null}function IWe(t){return W.useMemo(()=>Y0e(t),[t])}function eve(t,e){return function(n,...i){const r=new n;return t&&t(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,Y0e(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function $u(t,e,n,i){const r=Array.isArray(e)?e:[e],s=vWe(eve(n,i),[t,...r],{equal:Ki.equ});return Array.isArray(e)?s:s[0]}$u.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return yWe(eve(n),[t,...i])};$u.clear=function(t,e){const n=Array.isArray(e)?e:[e];return xWe([t,...n])};const $b=new Map,{invalidate:bee,advance:wee}=RWe($b),{reconciler:A2,applyProps:hf}=bWe($b,MWe),Yy={objects:"shallow",strict:!1},BWe=(t,e)=>{const n=typeof t=="function"?t(e):t;return Q0e(n)?n:new NI({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function kWe(t,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:i,top:r,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function FWe(t){const e=$b.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||PWe(bee,wee),o=n||A2.createContainer(s,nm.ConcurrentRoot,null,!1,null,"",r,null);e||$b.set(t,{fiber:o,store:s});let a,l=!1,c;return{configure(h={}){let{gl:u,size:d,scene:f,events:p,onCreated:m,shadows:g=!1,linear:v=!1,flat:y=!1,legacy:x=!1,orthographic:b=!1,frameloop:S="always",dpr:A=[1,2],performance:E,raycaster:M,camera:C,onPointerMissed:T}=h,D=s.getState(),L=D.gl;D.gl||D.set({gl:L=BWe(u,t)});let I=D.raycaster;I||D.set({raycaster:I=new XI});const{params:R,...H}=M||{};if(Ki.equ(H,I,Yy)||hf(I,{...H}),Ki.equ(R,I.params,Yy)||hf(I,{params:{...I.params,...R}}),!D.camera||D.camera===c&&!Ki.equ(c,C,Yy)){c=C;const j=C instanceof jv,z=j?C:b?new Uf(0,0,0,0,.1,1e3):new Vr(75,0,.1,1e3);j||(z.position.z=5,C&&hf(z,C),!D.camera&&!(C!=null&&C.rotation)&&z.lookAt(0,0,0)),D.set({camera:z})}if(!D.scene){let j;f instanceof Vb?j=f:(j=new Vb,f&&hf(j,f)),D.set({scene:I1(j)})}if(!D.xr){const j=(J,K)=>{const X=s.getState();X.frameloop!=="never"&&wee(J,!0,X,K)},z=()=>{const J=s.getState();J.gl.xr.enabled=J.gl.xr.isPresenting,J.gl.xr.setAnimationLoop(J.gl.xr.isPresenting?j:null),J.gl.xr.isPresenting||bee(J)},Y={connect(){const J=s.getState().gl;J.xr.addEventListener("sessionstart",z),J.xr.addEventListener("sessionend",z)},disconnect(){const J=s.getState().gl;J.xr.removeEventListener("sessionstart",z),J.xr.removeEventListener("sessionend",z)}};L.xr&&Y.connect(),D.set({xr:Y})}if(L.shadowMap){const j=L.shadowMap.enabled,z=L.shadowMap.type;if(L.shadowMap.enabled=!!g,Ki.boo(g))L.shadowMap.type=tM;else if(Ki.str(g)){var Z;const Y={basic:Gme,percentage:OI,soft:tM,variance:P0};L.shadowMap.type=(Z=Y[g])!=null?Z:tM}else Ki.obj(g)&&Object.assign(L.shadowMap,g);(j!==L.shadowMap.enabled||z!==L.shadowMap.type)&&(L.shadowMap.needsUpdate=!0)}const ee=j0e();ee&&("enabled"in ee?ee.enabled=!x:"legacyMode"in ee&&(ee.legacyMode=x));const F=v?Ra:xn,V=y?Tu:b9;L.outputEncoding!==F&&(L.outputEncoding=F),L.toneMapping!==V&&(L.toneMapping=V),D.legacy!==x&&D.set(()=>({legacy:x})),D.linear!==v&&D.set(()=>({linear:v})),D.flat!==y&&D.set(()=>({flat:y})),u&&!Ki.fun(u)&&!Q0e(u)&&!Ki.equ(u,L,Yy)&&hf(L,u),p&&!D.events.handlers&&D.set({events:p(s)});const U=kWe(t,d);return Ki.equ(U,D.size,Yy)||D.setSize(U.width,U.height,U.updateStyle,U.top,U.left),A&&D.viewport.dpr!==X0e(A)&&D.setDpr(A),D.frameloop!==S&&D.setFrameloop(S),D.onPointerMissed||D.set({onPointerMissed:T}),E&&!Ki.equ(E,D.performance,Yy)&&D.set(j=>({performance:{...j.performance,...E}})),a=m,l=!0,this},render(h){return l||this.configure(),A2.updateContainer(W.createElement(NWe,{store:s,children:h,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){tve(t)}}}function NWe({store:t,children:e,onCreated:n,rootElement:i}){return NE(()=>{const r=t.getState();r.set(s=>({internal:{...s.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),W.createElement(eW.Provider,{value:t},e)}function tve(t,e){const n=$b.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),A2.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),AWe(r),$b.delete(t),e&&e(t)}catch{}},500)})}}function zWe(t,e,n){return W.createElement(UWe,{key:e.uuid,children:t,container:e,state:n})}function UWe({state:t={},children:e,container:n}){const{events:i,size:r,...s}=t,o=tW(),[a]=W.useState(()=>new XI),[l]=W.useState(()=>new Me),c=W.useCallback((u,d)=>{const f={...u};Object.keys(u).forEach(m=>{(TWe.includes(m)||u[m]!==d[m]&&d[m])&&delete f[m]});let p;if(d&&r){const m=d.camera;p=u.viewport.getCurrentViewport(m,new q,r),m!==u.camera&&J0e(m,r)}return{...f,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...u.events,...d==null?void 0:d.events,...i},size:{...u.size,...r},viewport:{...u.viewport,...p},...s}},[t]),[h]=W.useState(()=>{const u=o.getState();return N0e((f,p)=>({...u,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...u.events,...i},size:{...u.size,...r},...s,set:f,get:p,setEvents:m=>f(g=>({...g,events:{...g.events,...m}}))}))});return W.useEffect(()=>{const u=o.subscribe(d=>h.setState(f=>c(d,f)));return()=>{u(),h.destroy()}},[]),W.useEffect(()=>{h.setState(u=>c(o.getState(),u))},[c]),W.createElement(W.Fragment,null,A2.createPortal(W.createElement(eW.Provider,{value:h},e),h,null))}A2.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:W.version});function IG(t,e,n){var i,r,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?i=setTimeout(l,e-h):(i=null,n||(a=t.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var h=n&&!i;return i||(i=setTimeout(l,e)),h&&(a=t.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=t.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}IG.debounce=IG;var _ee=IG;function GWe(t){let{debounce:e,scroll:n,polyfill:i,offsetSize:r}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=W.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=W.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,u=W.useRef(!1);W.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[d,f,p]=W.useMemo(()=>{const y=()=>{if(!l.current.element)return;const{left:x,top:b,width:S,height:A,bottom:E,right:M,x:C,y:T}=l.current.element.getBoundingClientRect(),D={left:x,top:b,width:S,height:A,bottom:E,right:M,x:C,y:T};l.current.element instanceof HTMLElement&&r&&(D.height=l.current.element.offsetHeight,D.width=l.current.element.offsetWidth),Object.freeze(D),u.current&&!WWe(l.current.lastBounds,D)&&a(l.current.lastBounds=D)};return[y,h?_ee(y,h):y,c?_ee(y,c):y]},[a,r,c,h]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function g(){l.current.element&&(l.current.resizeObserver=new s(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(y=>y.addEventListener("scroll",p,{capture:!0,passive:!0})))}const v=y=>{!y||y===l.current.element||(m(),l.current.element=y,l.current.scrollContainers=nve(y),g())};return jWe(p,!!n),HWe(f),W.useEffect(()=>{m(),g()},[n,p,f]),W.useEffect(()=>m,[]),[v,o,d]}function HWe(t){W.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function jWe(t,e){W.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function nve(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...nve(t.parentElement)]}const VWe=["x","y","top","bottom","left","right","width","height"],WWe=(t,e)=>VWe.every(n=>t[n]===e[n]);var $We=Object.defineProperty,qWe=Object.defineProperties,XWe=Object.getOwnPropertyDescriptors,See=Object.getOwnPropertySymbols,YWe=Object.prototype.hasOwnProperty,KWe=Object.prototype.propertyIsEnumerable,Aee=(t,e,n)=>e in t?$We(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mee=(t,e)=>{for(var n in e||(e={}))YWe.call(e,n)&&Aee(t,n,e[n]);if(See)for(var n of See(e))KWe.call(e,n)&&Aee(t,n,e[n]);return t},JWe=(t,e)=>qWe(t,XWe(e));function ive(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=ive(i,e,n);if(r)return r;i=e?null:i.sibling}}function rve(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const nW=rve(W.createContext(null));class sve extends W.Component{render(){return W.createElement(nW.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:Eee,ReactCurrentDispatcher:Cee}=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function ZWe(){const t=W.useContext(nW);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=W.useId();return W.useMemo(()=>{var i;return(i=Eee==null?void 0:Eee.current)!=null?i:ive(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[t,e])}function QWe(){var t,e;const n=ZWe(),[i]=W.useState(()=>new Map);i.clear();let r=n;for(;r;){const s=(t=r.type)==null?void 0:t._context;s&&s!==nW&&!i.has(s)&&i.set(s,(e=Cee==null?void 0:Cee.current)==null?void 0:e.readContext(rve(s))),r=r.return}return i}function e$e(){const t=QWe();return W.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>W.createElement(e,null,W.createElement(n.Provider,JWe(Mee({},i),{value:t.get(n)}))),e=>W.createElement(sve,Mee({},e))),[t])}const QN={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function t$e(t){const{handlePointer:e}=CWe(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(QN).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{var i;const{set:r,events:s}=t.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:n}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=QN[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=QN[s];i.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const n$e=W.forwardRef(function({children:e,fallback:n,resize:i,style:r,gl:s,events:o=t$e,eventSource:a,eventPrefix:l,shadows:c,linear:h,flat:u,legacy:d,orthographic:f,frameloop:p,dpr:m,performance:g,raycaster:v,camera:y,onPointerMissed:x,onCreated:b,...S},A){W.useMemo(()=>H0e(cWe),[]);const E=e$e(),[M,C]=GWe({scroll:!0,debounce:{scroll:50,resize:0},...i}),T=W.useRef(null),D=W.useRef(null);W.useImperativeHandle(A,()=>T.current);const L=W0e(x),[I,R]=W.useState(!1),[H,Z]=W.useState(!1);if(I)throw I;if(H)throw H;const ee=W.useRef(null);NE(()=>{const V=T.current;C.width>0&&C.height>0&&V&&(ee.current||(ee.current=FWe(V)),ee.current.configure({gl:s,events:o,shadows:c,linear:h,flat:u,legacy:d,orthographic:f,frameloop:p,dpr:m,performance:g,raycaster:v,camera:y,size:C,onPointerMissed:(...U)=>L.current==null?void 0:L.current(...U),onCreated:U=>{U.events.connect==null||U.events.connect(a?wWe(a)?a.current:a:D.current),l&&U.setEvents({compute:(j,z)=>{const Y=j[l+"X"],J=j[l+"Y"];z.pointer.set(Y/z.size.width*2-1,-(J/z.size.height)*2+1),z.raycaster.setFromCamera(z.pointer,z.camera)}}),b==null||b(U)}}),ee.current.render(W.createElement(E,null,W.createElement($0e,{set:Z},W.createElement(W.Suspense,{fallback:W.createElement(_We,{set:R})},e)))))}),W.useEffect(()=>{const V=T.current;if(V)return()=>tve(V)},[]);const F=a?"none":"auto";return W.createElement("div",st({ref:D,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F,...r}},S),W.createElement("div",{ref:M,style:{width:"100%",height:"100%"}},W.createElement("canvas",{ref:T,style:{display:"block"}},n)))}),i$e=W.forwardRef(function(e,n){return W.createElement(sve,null,W.createElement(n$e,st({},e,{ref:n})))});let r$e={data:""},s$e=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||r$e,o$e=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,a$e=/\/\*[^]*?\*\/|  +/g,Tee=/\n+/g,m0=(t,e)=>{let n="",i="",r="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":i+=s[1]=="f"?m0(o,s):s+"{"+m0(o,s[1]=="k"?"":e)+"}":typeof o=="object"?i+=m0(o,e?e.replace(/([^,])+/g,a=>s.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=m0.p?m0.p(s,o):s+":"+o+";")}return n+(e&&r?e+"{"+r+"}":r)+i},Bd={},ove=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+ove(t[n]);return e}return t},l$e=(t,e,n,i,r)=>{let s=ove(t),o=Bd[s]||(Bd[s]=(l=>{let c=0,h=11;for(;c<l.length;)h=101*h+l.charCodeAt(c++)>>>0;return"go"+h})(s));if(!Bd[o]){let l=s!==t?t:(c=>{let h,u,d=[{}];for(;h=o$e.exec(c.replace(a$e,""));)h[4]?d.shift():h[3]?(u=h[3].replace(Tee," ").trim(),d.unshift(d[0][u]=d[0][u]||{})):d[0][h[1]]=h[2].replace(Tee," ").trim();return d[0]})(t);Bd[o]=m0(r?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Bd.g?Bd.g:null;return n&&(Bd.g=Bd[o]),((l,c,h,u)=>{u?c.data=c.data.replace(u,l):c.data.indexOf(l)===-1&&(c.data=h?l+c.data:c.data+l)})(Bd[o],e,i,a),o},c$e=(t,e,n)=>t.reduce((i,r,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":m0(a,""):a===!1?"":a}return i+r+(o??"")},"");function iW(t){let e=this||{},n=t.call?t(e.p):t;return l$e(n.unshift?n.raw?c$e(n,[].slice.call(arguments,1),e.p):n.reduce((i,r)=>Object.assign(i,r&&r.call?r(e.p):r),{}):n,s$e(e.target),e.g,e.o,e.k)}iW.bind({g:1});iW.bind({k:1});function Pee(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ave(t,e,n){return e&&Pee(t.prototype,e),n&&Pee(t,n),t}function xi(){return xi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xi.apply(this,arguments)}function lve(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function zE(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function Dee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Oee=function(){return""},cve=ue.createContext({enqueueSnackbar:Oee,closeSnackbar:Oee}),n0={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},Lee=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},rW=function(e){return""+Lee(e.vertical)+Lee(e.horizontal)},SP=function(e){return!!e||e===0},AP="unmounted",Ky="exited",Jy="entering",oS="entered",Ree="exiting",sW=function(t){lve(e,t);function e(i){var r;r=t.call(this,i)||this;var s=i.appear,o;return r.appearStatus=null,i.in?s?(o=Ky,r.appearStatus=Jy):o=oS:i.unmountOnExit||i.mountOnEnter?o=AP:o=Ky,r.state={status:o},r.nextCallback=null,r}e.getDerivedStateFromProps=function(r,s){var o=r.in;return o&&s.status===AP?{status:Ky}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var s=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==Jy&&o!==oS&&(s=Jy):(o===Jy||o===oS)&&(s=Ree)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,s=r,o=r;return r!=null&&typeof r!="number"&&typeof r!="string"&&(o=r.exit,s=r.enter),{exit:o,enter:s}},n.updateStatus=function(r,s){r===void 0&&(r=!1),s!==null?(this.cancelNextCallback(),s===Jy?this.performEnter(r):this.performExit()):this.props.unmountOnExit&&this.state.status===Ky&&this.setState({status:AP})},n.performEnter=function(r){var s=this,o=this.props.enter,a=r,l=this.getTimeouts();if(!r&&!o){this.safeSetState({status:oS},function(){s.props.onEntered&&s.props.onEntered(s.node,a)});return}this.props.onEnter&&this.props.onEnter(this.node,a),this.safeSetState({status:Jy},function(){s.props.onEntering&&s.props.onEntering(s.node,a),s.onTransitionEnd(l.enter,function(){s.safeSetState({status:oS},function(){s.props.onEntered&&s.props.onEntered(s.node,a)})})})},n.performExit=function(){var r=this,s=this.props.exit,o=this.getTimeouts();if(!s){this.safeSetState({status:Ky},function(){r.props.onExited&&r.props.onExited(r.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:Ree},function(){r.props.onExiting&&r.props.onExiting(r.node),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:Ky},function(){r.props.onExited&&r.props.onExited(r.node)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},n.setNextCallback=function(r){var s=this,o=!0;return this.nextCallback=function(){o&&(o=!1,s.nextCallback=null,r())},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(r,s){this.setNextCallback(s);var o=r==null&&!this.props.addEndListener;if(!this.node||o){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===AP)return null;var s=this.props,o=s.children,a=zE(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return o(r,a)},ave(e,[{key:"node",get:function(){var r,s=(r=this.props.nodeRef)===null||r===void 0?void 0:r.current;if(!s)throw new Error("notistack - Custom snackbar is not refForwarding");return s}}]),e}(ue.Component);function Zy(){}sW.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Zy,onEntering:Zy,onEntered:Zy,onExit:Zy,onExiting:Zy,onExited:Zy};function Iee(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function BG(t,e){return W.useMemo(function(){return t==null&&e==null?null:function(n){Iee(t,n),Iee(e,n)}},[t,e])}function ZO(t){var e=t.timeout,n=t.style,i=n===void 0?{}:n,r=t.mode;return{duration:typeof e=="object"?e[r]||0:e,easing:i.transitionTimingFunction,delay:i.transitionDelay}}var kG={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},uve=function(e){e.scrollTop=e.scrollTop},Bee=function(e){return Math.round(e)+"ms"};function Cx(t,e){t===void 0&&(t=["all"]);var n=e||{},i=n.duration,r=i===void 0?300:i,s=n.easing,o=s===void 0?kG.easeInOut:s,a=n.delay,l=a===void 0?0:a,c=Array.isArray(t)?t:[t];return c.map(function(h){var u=typeof r=="string"?r:Bee(r),d=typeof l=="string"?l:Bee(l);return h+" "+u+" "+o+" "+d}).join(",")}function u$e(t){return t&&t.ownerDocument||document}function hve(t){var e=u$e(t);return e.defaultView||window}function h$e(t,e){e===void 0&&(e=166);var n;function i(){for(var r=this,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];var l=function(){t.apply(r,o)};clearTimeout(n),n=setTimeout(l,e)}return i.clear=function(){clearTimeout(n)},i}function d$e(t,e){var n=e.getBoundingClientRect(),i=hve(e),r;if(e.fakeTransform)r=e.fakeTransform;else{var s=i.getComputedStyle(e);r=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("transform")}var o=0,a=0;if(r&&r!=="none"&&typeof r=="string"){var l=r.split("(")[1].split(")")[0].split(",");o=parseInt(l[4],10),a=parseInt(l[5],10)}switch(t){case"left":return"translateX("+(i.innerWidth+o-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-o)+"px)";case"up":return"translateY("+(i.innerHeight+a-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-a)+"px)"}}function MP(t,e){if(e){var n=d$e(t,e);n&&(e.style.webkitTransform=n,e.style.transform=n)}}var dve=W.forwardRef(function(t,e){var n=t.children,i=t.direction,r=i===void 0?"down":i,s=t.in,o=t.style,a=t.timeout,l=a===void 0?0:a,c=t.onEnter,h=t.onEntered,u=t.onExit,d=t.onExited,f=zE(t,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),p=W.useRef(null),m=BG(n.ref,p),g=BG(m,e),v=function(E,M){MP(r,E),uve(E),c&&c(E,M)},y=function(E){var M=(o==null?void 0:o.transitionTimingFunction)||kG.easeOut,C=ZO({timeout:l,mode:"enter",style:xi({},o,{transitionTimingFunction:M})});E.style.webkitTransition=Cx("-webkit-transform",C),E.style.transition=Cx("transform",C),E.style.webkitTransform="none",E.style.transform="none"},x=function(E){var M=(o==null?void 0:o.transitionTimingFunction)||kG.sharp,C=ZO({timeout:l,mode:"exit",style:xi({},o,{transitionTimingFunction:M})});E.style.webkitTransition=Cx("-webkit-transform",C),E.style.transition=Cx("transform",C),MP(r,E),u&&u(E)},b=function(E){E.style.webkitTransition="",E.style.transition="",d&&d(E)},S=W.useCallback(function(){p.current&&MP(r,p.current)},[r]);return W.useEffect(function(){if(!(s||r==="down"||r==="right")){var A=h$e(function(){p.current&&MP(r,p.current)}),E=hve(p.current);return E.addEventListener("resize",A),function(){A.clear(),E.removeEventListener("resize",A)}}},[r,s]),W.useEffect(function(){s||S()},[s,S]),W.createElement(sW,Object.assign({appear:!0,nodeRef:p,onEnter:v,onEntered:h,onEntering:y,onExit:x,onExited:b,in:s,timeout:l},f),function(A,E){return W.cloneElement(n,xi({ref:g,style:xi({visibility:A==="exited"&&!s?"hidden":void 0},o,{},n.props.style)},E))})});dve.displayName="Slide";var KI=function(e){return ue.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},e))},f$e=function(){return ue.createElement(KI,null,ue.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},p$e=function(){return ue.createElement(KI,null,ue.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},m$e=function(){return ue.createElement(KI,null,ue.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},g$e=function(){return ue.createElement(KI,null,ue.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},v$e={default:void 0,success:ue.createElement(f$e,null),warning:ue.createElement(p$e,null),error:ue.createElement(m$e,null),info:ue.createElement(g$e,null)},X0={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:v$e,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:dve,transitionDuration:{enter:225,exit:195}},y$e=function(e,n){var i=function(s){return typeof s=="number"||s===null};return i(e)?e:i(n)?n:X0.autoHideDuration},x$e=function(e,n){var i=function(s,o){return o.some(function(a){return typeof s===a})};return i(e,["string","number"])?e:i(e,["object"])?xi({},X0.transitionDuration,{},i(n,["object"])&&n,{},e):i(n,["string","number"])?n:i(n,["object"])?xi({},X0.transitionDuration,{},n):X0.transitionDuration},b$e=function(e,n){return function(i,r){return r===void 0&&(r=!1),r?xi({},X0[i],{},n[i],{},e[i]):i==="autoHideDuration"?y$e(e.autoHideDuration,n.autoHideDuration):i==="transitionDuration"?x$e(e.transitionDuration,n.transitionDuration):e[i]||n[i]||X0[i]}};function UE(t){return Object.entries(t).reduce(function(e,n){var i,r=n[0],s=n[1];return xi({},e,(i={},i[r]=iW(s),i))},{})}var qb={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(e){return"notistack-MuiContent-"+e}},kee=UE({root:{height:0},entered:{height:"auto"}}),e4="0px",t4=175,fve=W.forwardRef(function(t,e){var n=t.children,i=t.in,r=t.onExited,s=W.useRef(null),o=W.useRef(null),a=BG(e,o),l=function(){return s.current?s.current.clientHeight:0},c=function(m){m.style.height=e4},h=function(m){var g=l(),v=ZO({timeout:t4,mode:"enter"}),y=v.duration,x=v.easing;m.style.transitionDuration=typeof y=="string"?y:y+"ms",m.style.height=g+"px",m.style.transitionTimingFunction=x||""},u=function(m){m.style.height="auto"},d=function(m){m.style.height=l()+"px"},f=function(m){uve(m);var g=ZO({timeout:t4,mode:"exit"}),v=g.duration,y=g.easing;m.style.transitionDuration=typeof v=="string"?v:v+"ms",m.style.height=e4,m.style.transitionTimingFunction=y||""};return W.createElement(sW,{in:i,unmountOnExit:!0,onEnter:c,onEntered:u,onEntering:h,onExit:d,onExited:r,onExiting:f,nodeRef:o,timeout:t4},function(p,m){return W.createElement("div",Object.assign({ref:a,className:Xr(kee.root,p==="entered"&&kee.entered),style:xi({pointerEvents:"all",overflow:"hidden",minHeight:e4,transition:Cx("height")},p==="entered"&&{overflow:"visible"},{},p==="exited"&&!i&&{visibility:"hidden"})},m),W.createElement("div",{ref:s,className:qb.CollapseWrapper,style:{display:"flex",width:"100%"}},n))})});fve.displayName="Collapse";var Fee={right:"left",left:"right",bottom:"up",top:"down"},w$e=function(e){return e.horizontal!=="center"?Fee[e.horizontal]:Fee[e.vertical]},_$e=function(e){return"anchorOrigin"+rW(e)},S$e=function(e){e===void 0&&(e={});var n={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(e).filter(function(i){return!n[i]}).reduce(function(i,r){var s;return xi({},i,(s={},s[r]=e[r],s))},{})},A$e=function(){};function oM(t,e){return t.reduce(function(n,i){return i==null?n:function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];var l=[].concat(o);e&&l.indexOf(e)===-1&&l.push(e),n.apply(this,l),i.apply(this,l)}},A$e)}var M$e=typeof window<"u"?W.useLayoutEffect:W.useEffect;function Nee(t){var e=W.useRef(t);return M$e(function(){e.current=t}),W.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var pve=W.forwardRef(function(t,e){var n=t.children,i=t.className,r=t.autoHideDuration,s=t.disableWindowBlurListener,o=s===void 0?!1:s,a=t.onClose,l=t.id,c=t.open,h=t.SnackbarProps,u=h===void 0?{}:h,d=W.useRef(),f=Nee(function(){a&&a.apply(void 0,arguments)}),p=Nee(function(x){!a||x==null||(d.current&&clearTimeout(d.current),d.current=setTimeout(function(){f(null,"timeout",l)},x))});W.useEffect(function(){return c&&p(r),function(){d.current&&clearTimeout(d.current)}},[c,r,p]);var m=function(){d.current&&clearTimeout(d.current)},g=W.useCallback(function(){r!=null&&p(r*.5)},[r,p]),v=function(b){u.onMouseEnter&&u.onMouseEnter(b),m()},y=function(b){u.onMouseLeave&&u.onMouseLeave(b),g()};return W.useEffect(function(){if(!o&&c)return window.addEventListener("focus",g),window.addEventListener("blur",m),function(){window.removeEventListener("focus",g),window.removeEventListener("blur",m)}},[o,g,c]),W.createElement("div",Object.assign({ref:e},u,{className:Xr(qb.Snackbar,i),onMouseEnter:v,onMouseLeave:y}),n)});pve.displayName="Snackbar";var n4,E$e=UE({root:(n4={display:"flex",flexWrap:"wrap",flexGrow:1},n4[n0.upSm]={flexGrow:"initial",minWidth:"288px"},n4)}),mve=W.forwardRef(function(t,e){var n=t.className,i=zE(t,["className"]);return ue.createElement("div",Object.assign({ref:e,className:Xr(E$e.root,n)},i))});mve.displayName="SnackbarContent";var aS=UE({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),zee="notistack-snackbar",gve=W.forwardRef(function(t,e){var n=t.id,i=t.message,r=t.action,s=t.iconVariant,o=t.variant,a=t.hideIconVariant,l=t.style,c=t.className,h=s[o],u=r;return typeof u=="function"&&(u=u(n)),ue.createElement(mve,{ref:e,role:"alert","aria-describedby":zee,style:l,className:Xr(qb.MuiContent,qb.MuiContentVariant(o),aS.root,aS[o],c,!a&&h&&aS.lessPadding)},ue.createElement("div",{id:zee,className:aS.message},a?null:h,i),u&&ue.createElement("div",{className:aS.action},u))});gve.displayName="MaterialDesignContent";var C$e=W.memo(gve),T$e=UE({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),P$e=function(e){var n=W.useRef(),i=W.useState(!0),r=i[0],s=i[1],o=oM([e.snack.onClose,e.onClose]),a=function(){e.snack.requestClose&&o(null,"instructed",e.snack.id)},l=W.useCallback(function(){n.current=setTimeout(function(){s(function(C){return!C})},125)},[]);W.useEffect(function(){return function(){n.current&&clearTimeout(n.current)}},[]);var c=e.snack,h=e.classes,u=e.Component,d=u===void 0?C$e:u,f=W.useMemo(function(){return S$e(h)},[h]),p=c.open,m=c.SnackbarProps,g=c.TransitionComponent,v=c.TransitionProps,y=c.transitionDuration,x=c.disableWindowBlurListener,b=c.content,S=zE(c,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),A=xi({direction:w$e(S.anchorOrigin),timeout:y},v),E=b;typeof E=="function"&&(E=E(S.id,S.message));var M=["onEnter","onEntered","onExit","onExited"].reduce(function(C,T){var D;return xi({},C,(D={},D[T]=oM([e.snack[T],e[T]],S.id),D))},{});return ue.createElement(fve,{in:r,onExited:M.onExited},ue.createElement(pve,{open:p,id:S.id,disableWindowBlurListener:x,autoHideDuration:S.autoHideDuration,className:Xr(T$e.wrappedRoot,f.root,f[_$e(S.anchorOrigin)]),SnackbarProps:m,onClose:o},ue.createElement(g,Object.assign({},A,{appear:!0,in:p,onExit:M.onExit,onExited:l,onEnter:M.onEnter,onEntered:oM([M.onEntered,a],S.id)}),E||ue.createElement(d,Object.assign({},S)))))},lS,i4,EP,CP,r4,kd={view:{default:20,dense:4},snackbar:{default:6,dense:2}},Uee="."+qb.CollapseWrapper,s4=16,TP=UE({root:(lS={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:Cx(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},lS[Uee]={padding:kd.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},lS.maxWidth="calc(100% - "+kd.view.default*2+"px)",lS[n0.downXs]={width:"100%",maxWidth:"calc(100% - "+s4*2+"px)"},lS),rootDense:(i4={},i4[Uee]={padding:kd.snackbar.dense+"px 0px"},i4),top:{top:kd.view.default-kd.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:kd.view.default-kd.snackbar.default+"px",flexDirection:"column-reverse"},left:(EP={left:kd.view.default+"px"},EP[n0.upSm]={alignItems:"flex-start"},EP[n0.downXs]={left:s4+"px"},EP),right:(CP={right:kd.view.default+"px"},CP[n0.upSm]={alignItems:"flex-end"},CP[n0.downXs]={right:s4+"px"},CP),center:(r4={left:"50%",transform:"translateX(-50%)"},r4[n0.upSm]={alignItems:"center"},r4)}),D$e=function(e){var n=e.classes,i=n===void 0?{}:n,r=e.anchorOrigin,s=e.dense,o=e.children,a=Xr(qb.SnackbarContainer,TP[r.vertical],TP[r.horizontal],TP.root,i.containerRoot,i["containerAnchorOrigin"+rW(r)],s&&TP.rootDense);return ue.createElement("div",{className:a},o)},O$e=W.memo(D$e),Gee=function(e){var n=typeof e=="string"||W.isValidElement(e);return!n},L$e=function(t){lve(e,t);function e(i){var r;return r=t.call(this,i)||this,r.enqueueSnackbar=function(s,o){if(o===void 0&&(o={}),s==null)throw new Error("enqueueSnackbar called with invalid argument");var a=Gee(s)?s:o,l=Gee(s)?s.message:s,c=a.key,h=a.preventDuplicate,u=zE(a,["key","preventDuplicate"]),d=SP(c),f=d?c:new Date().getTime()+Math.random(),p=b$e(u,r.props),m=xi({id:f},u,{message:l,open:!0,entered:!1,requestClose:!1,persist:p("persist"),action:p("action"),content:p("content"),variant:p("variant"),anchorOrigin:p("anchorOrigin"),disableWindowBlurListener:p("disableWindowBlurListener"),autoHideDuration:p("autoHideDuration"),hideIconVariant:p("hideIconVariant"),TransitionComponent:p("TransitionComponent"),transitionDuration:p("transitionDuration"),TransitionProps:p("TransitionProps",!0),iconVariant:p("iconVariant",!0),style:p("style",!0),SnackbarProps:p("SnackbarProps",!0),className:Xr(r.props.className,u.className)});return m.persist&&(m.autoHideDuration=void 0),r.setState(function(g){if(h===void 0&&r.props.preventDuplicate||h){var v=function(S){return d?S.id===f:S.message===l},y=g.queue.findIndex(v)>-1,x=g.snacks.findIndex(v)>-1;if(y||x)return g}return r.handleDisplaySnack(xi({},g,{queue:[].concat(g.queue,[m])}))}),f},r.handleDisplaySnack=function(s){var o=s.snacks;return o.length>=r.maxSnack?r.handleDismissOldest(s):r.processQueue(s)},r.processQueue=function(s){var o=s.queue,a=s.snacks;return o.length>0?xi({},s,{snacks:[].concat(a,[o[0]]),queue:o.slice(1,o.length)}):s},r.handleDismissOldest=function(s){if(s.snacks.some(function(h){return!h.open||h.requestClose}))return s;var o=!1,a=!1,l=s.snacks.reduce(function(h,u){return h+(u.open&&u.persist?1:0)},0);l===r.maxSnack&&(a=!0);var c=s.snacks.map(function(h){return!o&&(!h.persist||a)?(o=!0,h.entered?(h.onClose&&h.onClose(null,"maxsnack",h.id),r.props.onClose&&r.props.onClose(null,"maxsnack",h.id),xi({},h,{open:!1})):xi({},h,{requestClose:!0})):xi({},h)});return xi({},s,{snacks:c})},r.handleEnteredSnack=function(s,o,a){if(!SP(a))throw new Error("handleEnteredSnack Cannot be called with undefined key");r.setState(function(l){var c=l.snacks;return{snacks:c.map(function(h){return h.id===a?xi({},h,{entered:!0}):xi({},h)})}})},r.handleCloseSnack=function(s,o,a){r.props.onClose&&r.props.onClose(s,o,a);var l=a===void 0;r.setState(function(c){var h=c.snacks,u=c.queue;return{snacks:h.map(function(d){return!l&&d.id!==a?xi({},d):d.entered?xi({},d,{open:!1}):xi({},d,{requestClose:!0})}),queue:u.filter(function(d){return d.id!==a})}})},r.closeSnackbar=function(s){var o=r.state.snacks.find(function(a){return a.id===s});SP(s)&&o&&o.onClose&&o.onClose(null,"instructed",s),r.handleCloseSnack(null,"instructed",s)},r.handleExitedSnack=function(s,o){if(!SP(o))throw new Error("handleExitedSnack Cannot be called with undefined key");r.setState(function(a){var l=r.processQueue(xi({},a,{snacks:a.snacks.filter(function(c){return c.id!==o})}));return l.queue.length===0?l:r.handleDismissOldest(l)})},r.enqueueSnackbar,r.closeSnackbar,r.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:r.enqueueSnackbar.bind(Dee(r)),closeSnackbar:r.closeSnackbar.bind(Dee(r))}},r}var n=e.prototype;return n.render=function(){var r=this,s=this.state.contextValue,o=this.props,a=o.domRoot,l=o.children,c=o.dense,h=c===void 0?!1:c,u=o.Components,d=u===void 0?{}:u,f=o.classes,p=this.state.snacks.reduce(function(g,v){var y,x=rW(v.anchorOrigin),b=g[x]||[];return xi({},g,(y={},y[x]=[].concat(b,[v]),y))},{}),m=Object.keys(p).map(function(g){var v=p[g],y=v[0];return ue.createElement(O$e,{key:g,dense:h,anchorOrigin:y.anchorOrigin,classes:f},v.map(function(x){return ue.createElement(P$e,{key:x.id,snack:x,classes:f,Component:d[x.variant],onClose:r.handleCloseSnack,onEnter:r.props.onEnter,onExit:r.props.onExit,onExited:oM([r.handleExitedSnack,r.props.onExited],x.id),onEntered:oM([r.handleEnteredSnack,r.props.onEntered],x.id)})}))});return ue.createElement(cve.Provider,{value:s},l,a?Mb.createPortal(m,a):m)},ave(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||X0.maxSnack}}]),e}(W.Component),oW=function(){return W.useContext(cve)};function R$e(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function aM(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function I$e(t,e){if(t){if(typeof t=="string")return FG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FG(t,e)}}function B$e(t){if(Array.isArray(t))return FG(t)}function k$e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function F$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N$e(t){return B$e(t)||k$e(t)||I$e(t)||F$e()}new Me;new Me;function z$e(t,e,n){return Math.max(e,Math.min(n,t))}function U$e(t,e){return z$e(t-Math.floor(t/e)*e,0,e)}function G$e(t,e){var n=U$e(e-t,Math.PI*2);return n>Math.PI&&(n-=Math.PI*2),n}function vve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var $l=function t(e,n,i){var r=this;vve(this,t),aM(this,"dot2",function(s,o){return r.x*s+r.y*o}),aM(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=n,this.z=i},H$e=[new $l(1,1,0),new $l(-1,1,0),new $l(1,-1,0),new $l(-1,-1,0),new $l(1,0,1),new $l(-1,0,1),new $l(1,0,-1),new $l(-1,0,-1),new $l(0,1,1),new $l(0,-1,1),new $l(0,1,-1),new $l(0,-1,-1)],Hee=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],jee=new Array(512),Vee=new Array(512),j$e=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var n=0;n<256;n++){var i;n&1?i=Hee[n]^e&255:i=Hee[n]^e>>8&255,jee[n]=jee[n+256]=i,Vee[n]=Vee[n+256]=H$e[i%12]}};j$e(0);function V$e(t){if(typeof t=="number")t=Math.abs(t);else if(typeof t=="string"){var e=t;t=0;for(var n=0;n<e.length;n++)t=(t+(n+1)*(e.charCodeAt(n)%96))%2147483647}return t===0&&(t=311),t}function Wee(t){var e=V$e(t);return function(){var n=e*48271%2147483647;return e=n,n/2147483647}}var W$e=function t(e){var n=this;vve(this,t),aM(this,"seed",0),aM(this,"init",function(i){n.seed=i,n.value=Wee(i)}),aM(this,"value",Wee(this.seed)),this.init(e)};new W$e(Math.random());var $$e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/n)*Math.atan(Math.sin(2*Math.PI*e*r)/n)},yve=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function xs(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:yve,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(t.__damp===void 0&&(t.__damp={}),t.__damp[l]===void 0&&(t.__damp[l]=0),Math.abs(t[e]-n)<=a)return t[e]=n,!1;i=Math.max(1e-4,i);var c=2/i,h=o(c*r),u=t[e]-n,d=n,f=s*i;u=Math.min(Math.max(u,-f),f),n=t[e]-u;var p=(t.__damp[l]+c*u)*r;t.__damp[l]=(t.__damp[l]-c*p)*h;var m=n+(u+p)*h;return d-t[e]>0==m>d&&(m=d,t.__damp[l]=(m-d)/r),t[e]=m,!0}function Qx(t,e,n,i,r,s,o,a){return xs(t,e,t[e]+G$e(t[e],n),i,r,s,o,a)}var cS=new Me,$ee,qee;function q$e(t,e,n,i,r,s,o){return typeof e=="number"?cS.setScalar(e):Array.isArray(e)?cS.set(e[0],e[1]):cS.copy(e),$ee=xs(t,"x",cS.x,n,i,r,s,o),qee=xs(t,"y",cS.y,n,i,r,s,o),$ee||qee}var Qy=new q,Xee,Yee,Kee;function NG(t,e,n,i,r,s,o){return typeof e=="number"?Qy.setScalar(e):Array.isArray(e)?Qy.set(e[0],e[1],e[2]):Qy.copy(e),Xee=xs(t,"x",Qy.x,n,i,r,s,o),Yee=xs(t,"y",Qy.y,n,i,r,s,o),Kee=xs(t,"z",Qy.z,n,i,r,s,o),Xee||Yee||Kee}var Bg=new sn,Jee,Zee,Qee,ete;function X$e(t,e,n,i,r,s,o){return typeof e=="number"?Bg.setScalar(e):Array.isArray(e)?Bg.set(e[0],e[1],e[2],e[3]):Bg.copy(e),Jee=xs(t,"x",Bg.x,n,i,r,s,o),Zee=xs(t,"y",Bg.y,n,i,r,s,o),Qee=xs(t,"z",Bg.z,n,i,r,s,o),ete=xs(t,"w",Bg.w,n,i,r,s,o),Jee||Zee||Qee||ete}var uS=new Dc,tte,nte,ite;function Y$e(t,e,n,i,r,s,o){return Array.isArray(e)?uS.set(e[0],e[1],e[2],e[3]):uS.copy(e),tte=Qx(t,"x",uS.x,n,i,r,s,o),nte=Qx(t,"y",uS.y,n,i,r,s,o),ite=Qx(t,"z",uS.z,n,i,r,s,o),tte||nte||ite}var e1=new nt,rte,ste,ote;function K$e(t,e,n,i,r,s,o){return e instanceof nt?e1.copy(e):Array.isArray(e)?e1.setRGB(e[0],e[1],e[2]):e1.set(e),rte=xs(t,"r",e1.r,n,i,r,s,o),ste=xs(t,"g",e1.g,n,i,r,s,o),ote=xs(t,"b",e1.b,n,i,r,s,o),rte||ste||ote}var eu=new Rr,Fd=new sn,ate=new sn,hS=new sn,lte,cte,ute,hte;function xve(t,e,n,i,r,s,o){var a=t;Array.isArray(e)?eu.set(e[0],e[1],e[2],e[3]):eu.copy(e);var l=t.dot(eu)>0?1:-1;return eu.x*=l,eu.y*=l,eu.z*=l,eu.w*=l,lte=xs(t,"x",eu.x,n,i,r,s,o),cte=xs(t,"y",eu.y,n,i,r,s,o),ute=xs(t,"z",eu.z,n,i,r,s,o),hte=xs(t,"w",eu.w,n,i,r,s,o),Fd.set(t.x,t.y,t.z,t.w).normalize(),ate.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),hS.copy(Fd).multiplyScalar(ate.dot(Fd)/Fd.dot(Fd)),a.__damp.velocity_x-=hS.x,a.__damp.velocity_y-=hS.y,a.__damp.velocity_z-=hS.z,a.__damp.velocity_w-=hS.w,t.set(Fd.x,Fd.y,Fd.z,Fd.w),lte||cte||ute||hte}var dS=new D0e,dte,fte,pte;function J$e(t,e,n,i,r,s,o){return Array.isArray(e)?dS.set(e[0],e[1],e[2]):dS.copy(e),dte=xs(t,"radius",dS.radius,n,i,r,s,o),fte=Qx(t,"phi",dS.phi,n,i,r,s,o),pte=Qx(t,"theta",dS.theta,n,i,r,s,o),dte||fte||pte}var PP=new at,mte=new q,gte=new Rr,vte=new q,yte,xte,bte;function Z$e(t,e,n,i,r,s,o){var a=t;return a.__damp===void 0&&(a.__damp={position:new q,rotation:new Rr,scale:new q},t.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?PP.set.apply(PP,N$e(e)):PP.copy(e),PP.decompose(mte,gte,vte),yte=NG(a.__damp.position,mte,n,i,r,s,o),xte=xve(a.__damp.rotation,gte,n,i,r,s,o),bte=NG(a.__damp.scale,vte,n,i,r,s,o),t.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),yte||xte||bte}var bA=Object.freeze({__proto__:null,rsqw:$$e,exp:yve,damp:xs,dampAngle:Qx,damp2:q$e,damp3:NG,damp4:X$e,dampE:Y$e,dampC:K$e,dampQ:xve,dampS:J$e,dampM:Z$e});const Q$e=t=>t&&t.isCubeTexture;class e7e extends Lr{constructor(e,n){var i,r;const s=Q$e(e),a=((i=s?(r=e.image[0])===null||r===void 0?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),h=3*Math.max(c,16*7),u=4*c,d=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/h}`,`#define CUBEUV_TEXEL_HEIGHT ${1/u}`,`#define CUBEUV_MAX_MIP ${l}.0`],f=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,p=d.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,m={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},g=new Wv(1,16),v=new zc({uniforms:m,fragmentShader:p,vertexShader:f,side:Ec});super(g,v)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}let aW=class extends qs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new s7e(n)}),this.register(function(n){return new d7e(n)}),this.register(function(n){return new f7e(n)}),this.register(function(n){return new a7e(n)}),this.register(function(n){return new l7e(n)}),this.register(function(n){return new c7e(n)}),this.register(function(n){return new u7e(n)}),this.register(function(n){return new r7e(n)}),this.register(function(n){return new h7e(n)}),this.register(function(n){return new o7e(n)}),this.register(function(n){return new n7e(n)}),this.register(function(n){return new p7e(n)})}load(e,n,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=vl.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new js(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(h){n(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,r){let s;const o={},a={};if(typeof e=="string")s=e;else if(vl.decodeText(new Uint8Array(e,0,4))===bve){try{o[Bn.KHR_BINARY_GLTF]=new m7e(e)}catch(u){r&&r(u);return}s=o[Bn.KHR_BINARY_GLTF].content}else s=vl.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(l.asset===void 0||l.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new T7e(l,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const u=this.pluginCallbacks[h](c);a[u.name]=u,o[u.name]=!0}if(l.extensionsUsed)for(let h=0;h<l.extensionsUsed.length;++h){const u=l.extensionsUsed[h],d=l.extensionsRequired||[];switch(u){case Bn.KHR_MATERIALS_UNLIT:o[u]=new i7e;break;case Bn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[u]=new y7e;break;case Bn.KHR_DRACO_MESH_COMPRESSION:o[u]=new g7e(l,this.dracoLoader);break;case Bn.KHR_TEXTURE_TRANSFORM:o[u]=new v7e;break;case Bn.KHR_MESH_QUANTIZATION:o[u]=new x7e;break;default:d.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,n){const i=this;return new Promise(function(r,s){i.parse(e,n,r,s)})}};function t7e(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Bn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};let n7e=class{constructor(e){this.parser=e,this.name=Bn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const s=n[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let r=n.cache.get(i);if(r)return r;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const h=new nt(16777215);l.color!==void 0&&h.fromArray(l.color);const u=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new FE(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new kE(h),c.distance=u;break;case"spot":c=new BE(h),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),n.cache.add(i,r),r}createNodeAttachment(e){const n=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(n.cache,a,l)})}},i7e=class{constructor(){this.name=Bn.KHR_MATERIALS_UNLIT}getMaterialType(){return ls}extendParams(e,n,i){const r=[];e.color=new nt(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,xn))}return Promise.all(r)}},r7e=class{constructor(e){this.parser=e,this.name=Bn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}},s7e=class{constructor(e){this.parser=e,this.name=Bn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Me(a,a)}return Promise.all(s)}},o7e=class{constructor(e){this.parser=e,this.name=Bn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}},a7e=class{constructor(e){this.parser=e,this.name=Bn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new nt(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(n,"sheenColorMap",o.sheenColorTexture,xn)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}},l7e=class{constructor(e){this.parser=e,this.name=Bn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}},c7e=class{constructor(e){this.parser=e,this.name=Bn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new nt(a[0],a[1],a[2]),Promise.all(s)}},u7e=class{constructor(e){this.parser=e,this.name=Bn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}},h7e=class{constructor(e){this.parser=e,this.name=Bn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new nt(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(n,"specularColorMap",o.specularColorTexture,xn)),Promise.all(s)}},d7e=class{constructor(e){this.parser=e,this.name=Bn.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}},f7e=class{constructor(e){this.parser=e,this.name=Bn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}},p7e=class{constructor(e){this.name=Bn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,h=r.count,u=r.byteStride,d=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,u,d,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(h*u);return o.decodeGltfBuffer(new Uint8Array(f),h,u,d,r.mode,r.filter),f})})}else return null}};const bve="glTF",fS=12,wte={JSON:1313821514,BIN:5130562};let m7e=class{constructor(e){this.name=Bn.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,fS);if(this.header={magic:vl.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==bve)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-fS,r=new DataView(e,fS);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===wte.JSON){const l=new Uint8Array(e,fS+s,o);this.content=vl.decodeText(l)}else if(a===wte.BIN){const l=fS+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},g7e=class{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Bn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const h in o){const u=UG[h]||h.toLowerCase();a[u]=o[h]}for(const h in e.attributes){const u=UG[h]||h.toLowerCase();if(o[h]!==void 0){const d=i.accessors[e.attributes[h]],f=M2[d.componentType];c[u]=f.name,l[u]=d.normalized===!0}}return n.getDependency("bufferView",s).then(function(h){return new Promise(function(u){r.decodeDracoFile(h,function(d){for(const f in d.attributes){const p=d.attributes[f],m=l[f];m!==void 0&&(p.normalized=m)}u(d)},a,c)})})}},v7e=class{constructor(){this.name=Bn.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return n.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}};class zG extends lg{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const n=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new nt().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",n).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class y7e{constructor(){this.name=Bn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return zG}extendParams(e,n,i){const r=n.extensions[this.name];e.color=new nt(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(r.diffuseTexture!==void 0&&s.push(i.assignTexture(e,"map",r.diffuseTexture,xn)),e.emissive=new nt(0,0,0),e.glossiness=r.glossinessFactor!==void 0?r.glossinessFactor:1,e.specular=new nt(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),r.specularGlossinessTexture!==void 0){const o=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",o)),s.push(i.assignTexture(e,"specularMap",o,xn))}return Promise.all(s)}createMaterial(e){const n=new zG(e);return n.fog=!0,n.color=e.color,n.map=e.map===void 0?null:e.map,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=e.aoMap===void 0?null:e.aoMap,n.aoMapIntensity=1,n.emissive=e.emissive,n.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,n.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,n.bumpMap=e.bumpMap===void 0?null:e.bumpMap,n.bumpScale=1,n.normalMap=e.normalMap===void 0?null:e.normalMap,n.normalMapType=Zf,e.normalScale&&(n.normalScale=e.normalScale),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=e.specularMap===void 0?null:e.specularMap,n.specular=e.specular,n.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,n.glossiness=e.glossiness,n.alphaMap=null,n.envMap=e.envMap===void 0?null:e.envMap,n.envMapIntensity=1,n.refractionRatio=.98,n}}let x7e=class{constructor(){this.name=Bn.KHR_MESH_QUANTIZATION}},wve=class extends qv{constructor(e,n,i,r){super(e,n,i,r)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)n[o]=i[s+o];return n}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,h=r-n,u=(i-n)/h,d=u*u,f=d*u,p=e*c,m=p-c,g=-2*f+3*d,v=f-d,y=1-g,x=v-d+u;for(let b=0;b!==a;b++){const S=o[m+b+a],A=o[m+b+l]*h,E=o[p+b+a],M=o[p+b]*h;s[b]=y*S+x*A+g*E+v*M}return s}};const b7e=new Rr;let w7e=class extends wve{interpolate_(e,n,i,r){const s=super.interpolate_(e,n,i,r);return b7e.fromArray(s).normalize().toArray(s),s}};const Nd={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},M2={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_te={9728:ur,9729:Ei,9984:Gb,9985:_E,9986:V0,9987:Nc},Ste={33071:zs,33648:mv,10497:ku},Ate={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},UG={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},bp={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},_7e={CUBICSPLINE:void 0,LINEAR:zf,STEP:vv},o4={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function S7e(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new lg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Bu})),t.DefaultMaterial}function pS(t,e,n){for(const i in n.extensions)t[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function i0(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function A7e(t,e,n){let i=!1,r=!1,s=!1;for(let c=0,h=e.length;c<h;c++){const u=e[c];if(u.POSITION!==void 0&&(i=!0),u.NORMAL!==void 0&&(r=!0),u.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let c=0,h=e.length;c<h;c++){const u=e[c];if(i){const d=u.POSITION!==void 0?n.getDependency("accessor",u.POSITION):t.attributes.position;o.push(d)}if(r){const d=u.NORMAL!==void 0?n.getDependency("accessor",u.NORMAL):t.attributes.normal;a.push(d)}if(s){const d=u.COLOR_0!==void 0?n.getDependency("accessor",u.COLOR_0):t.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],u=c[1],d=c[2];return i&&(t.morphAttributes.position=h),r&&(t.morphAttributes.normal=u),s&&(t.morphAttributes.color=d),t.morphTargetsRelative=!0,t})}function M7e(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function E7e(t){const e=t.extensions&&t.extensions[Bn.KHR_DRACO_MESH_COMPRESSION];let n;return e?n="draco:"+e.bufferView+":"+e.indices+":"+Mte(e.attributes):n=t.indices+":"+Mte(t.attributes)+":"+t.mode,n}function Mte(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function GG(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function C7e(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}let T7e=class{constructor(e={},n={}){var i,r;this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new t7e,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const s=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,o=typeof navigator<"u"&&((i=navigator.userAgent)===null||i===void 0?void 0:i.indexOf("Firefox"))>-1,a=typeof navigator<"u"&&o?(r=navigator.userAgent)===null||r===void 0?void 0:r.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||s||o&&a<98?this.textureLoader=new Ow(this.options.manager):this.textureLoader=new q9(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new js(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};pS(s,a,r),i0(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=n.length;r<s;r++){const o=n[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,h]of o.children.entries())s(h,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=e(n[i]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const s=e(n[r]);s&&i.push(s)}return i}getDependency(e,n){const i=e+":"+n;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this.loadNode(n);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Bn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(vl.resolveURL(n.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,s=n.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const n=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0)return Promise.resolve(null);const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=Ate[r.type],c=M2[r.componentType],h=c.BYTES_PER_ELEMENT,u=h*l,d=r.byteOffset||0,f=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let m,g;if(f&&f!==u){const v=Math.floor(d/f),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let x=n.cache.get(y);x||(m=new c(a,v*f,r.count*f/h),x=new Mw(m,f/h),n.cache.add(y,x)),g=new Gf(x,l,d%f/h,p)}else a===null?m=new c(r.count*l):m=new c(a,d,r.count*l),g=new Nt(m,l,p);if(r.sparse!==void 0){const v=Ate.SCALAR,y=M2[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,b=r.sparse.values.byteOffset||0,S=new y(o[1],x,r.sparse.count*v),A=new c(o[2],b,r.sparse.count*l);a!==null&&(g=new Nt(g.array.slice(),g.itemSize,g.normalized));for(let E=0,M=S.length;E<M;E++){const C=S[E];if(g.setX(C,A[E*l]),l>=2&&g.setY(C,A[E*l+1]),l>=3&&g.setZ(C,A[E*l+2]),l>=4&&g.setW(C,A[E*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const n=this.json,i=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,i){const r=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,i).then(function(h){h.flipY=!1,o.name&&(h.name=o.name);const d=(s.samplers||{})[o.sampler]||{};return h.magFilter=_te[d.magFilter]||Ei,h.minFilter=_te[d.minFilter]||Nc,h.wrapS=Ste[d.wrapS]||ku,h.wrapT=Ste[d.wrapT]||ku,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(u){c=!0;const d=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(u){return new Promise(function(d,f){let p=d;n.isImageBitmapLoader===!0&&(p=function(m){const g=new bi(m);g.needsUpdate=!0,d(g)}),n.load(vl.resolveURL(u,s.path),p,void 0,f)})}).then(function(u){return c===!0&&a.revokeObjectURL(l),u.userData.mimeType=o.mimeType||C7e(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=h,h}assignTexture(e,n,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(i.texCoord!==void 0&&i.texCoord!=0&&!(n==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+n+" not yet supported."),s.extensions[Bn.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Bn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Bn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(o.encoding=r),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const r=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new ME,gr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new $s,gr.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&n.attributes.uv2===void 0&&n.attributes.uv!==void 0&&n.setAttribute("uv2",n.attributes.uv),e.material=i}getMaterialType(){return lg}loadMaterial(e){const n=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Bn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=r[Bn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=u.getMaterialType(),c.push(u.extendParams(a,s,n))}else if(l[Bn.KHR_MATERIALS_UNLIT]){const u=r[Bn.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,s,n))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new nt(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const d=u.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}u.baseColorTexture!==void 0&&c.push(n.assignTexture(a,"map",u.baseColorTexture,xn)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Ec);const h=s.alphaMode||o4.OPAQUE;if(h===o4.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===o4.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==ls&&(c.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Me(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&o!==ls&&(c.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==ls&&(a.emissive=new nt().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==ls&&c.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,xn)),Promise.all(c).then(function(){let u;return o===zG?u=r[Bn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):u=new o(a),s.name&&(u.name=s.name),i0(u,s),n.associations.set(u,{materials:e}),s.extensions&&pS(r,u,s),u})}createUniqueName(e){const n=zn.sanitizeNodeName(e||"");let i=n;for(let r=1;this.nodeNamesUsed[i];++r)i=n+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const n=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Bn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return Ete(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],h=E7e(c),u=r[h];if(u)o.push(u.promise);else{let d;c.extensions&&c.extensions[Bn.KHR_DRACO_MESH_COMPRESSION]?d=s(c):d=Ete(new yt,c,n),r[h]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const n=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const h=o[l].material===void 0?S7e(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),h=l[l.length-1],u=[];for(let f=0,p=h.length;f<p;f++){const m=h[f],g=o[f];let v;const y=c[f];if(g.mode===Nd.TRIANGLES||g.mode===Nd.TRIANGLE_STRIP||g.mode===Nd.TRIANGLE_FAN||g.mode===void 0)v=s.isSkinnedMesh===!0?new UI(m,y):new Lr(m,y),v.isSkinnedMesh===!0&&!v.geometry.attributes.skinWeight.normalized&&v.normalizeSkinWeights(),g.mode===Nd.TRIANGLE_STRIP?v.geometry=Cte(v.geometry,II):g.mode===Nd.TRIANGLE_FAN&&(v.geometry=Cte(v.geometry,Hb));else if(g.mode===Nd.LINES)v=new Tl(m,y);else if(g.mode===Nd.LINE_STRIP)v=new td(m,y);else if(g.mode===Nd.LINE_LOOP)v=new GI(m,y);else if(g.mode===Nd.POINTS)v=new HI(m,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(v.geometry.morphAttributes).length>0&&M7e(v,s),v.name=n.createUniqueName(s.name||"mesh_"+e),i0(v,s),g.extensions&&pS(r,v,g),n.assignFinalMaterial(v),u.push(v)}for(let f=0,p=u.length;f<p;f++)n.associations.set(u[f],{meshes:e,primitives:f});if(u.length===1)return u[0];const d=new ba;n.associations.set(d,{meshes:e});for(let f=0,p=u.length;f<p;f++)d.add(u[f]);return d})}loadCamera(e){let n;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new Vr(zi.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new Uf(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),i0(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i={joints:n.joints};return n.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",n.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],l=[];for(let c=0,h=i.channels.length;c<h;c++){const u=i.channels[c],d=i.samplers[u.sampler],f=u.target,p=f.node,m=i.parameters!==void 0?i.parameters[d.input]:d.input,g=i.parameters!==void 0?i.parameters[d.output]:d.output;r.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",g)),a.push(d),l.push(f)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],u=c[1],d=c[2],f=c[3],p=c[4],m=[];for(let v=0,y=h.length;v<y;v++){const x=h[v],b=u[v],S=d[v],A=f[v],E=p[v];if(x===void 0)continue;x.updateMatrix();let M;switch(bp[E.path]){case bp.weights:M=wv;break;case bp.rotation:M=nd;break;case bp.position:case bp.scale:default:M=_v;break}const C=x.name?x.name:x.uuid,T=A.interpolation!==void 0?_7e[A.interpolation]:zf,D=[];bp[E.path]===bp.weights?x.traverse(function(I){I.morphTargetInfluences&&D.push(I.name?I.name:I.uuid)}):D.push(C);let L=S.array;if(S.normalized){const I=GG(L.constructor),R=new Float32Array(L.length);for(let H=0,Z=L.length;H<Z;H++)R[H]=L[H]*I;L=R}for(let I=0,R=D.length;I<R;I++){const H=new M(D[I]+"."+bp[E.path],b.array,L,T);A.interpolation==="CUBICSPLINE"&&(H.createInterpolant=function(ee){const F=this instanceof nd?w7e:wve;return new F(this.times,this.values,this.getValueSize()/3,ee)},H.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(H)}}const g=i.name?i.name:"animation_"+e;return new Sv(g,void 0,m)})}createNodeMesh(e){const n=this.json,i=this,r=n.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this.json,i=this.extensions,r=this,s=n.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(s.isBone===!0?l=new AE:a.length>1?l=new ba:a.length===1?l=a[0]:l=new wn,l!==a[0])for(let c=0,h=a.length;c<h;c++)l.add(a[c]);if(s.name&&(l.userData.name=s.name,l.name=o),i0(l,s),s.extensions&&pS(i,l,s),s.matrix!==void 0){const c=new at;c.fromArray(s.matrix),l.applyMatrix4(c)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const n=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new ba;r.name&&(o.name=s.createUniqueName(r.name)),i0(o,r),r.extensions&&pS(i,o,r);const a=r.nodes||[],l=[];for(let c=0,h=a.length;c<h;c++)l.push(_ve(a[c],o,n,s));return Promise.all(l).then(function(){const c=h=>{const u=new Map;for(const[d,f]of s.associations)(d instanceof gr||d instanceof bi)&&u.set(d,f);return h.traverse(d=>{const f=s.associations.get(d);f!=null&&u.set(d,f)}),u};return s.associations=c(o),o})}};function _ve(t,e,n,i){const r=n.nodes[t];return i.getDependency("node",t).then(function(s){if(r.skin===void 0)return s;let o;return i.getDependency("skin",r.skin).then(function(a){o=a;const l=[];for(let c=0,h=o.joints.length;c<h;c++)l.push(i.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const c=[],h=[];for(let u=0,d=a.length;u<d;u++){const f=a[u];if(f){c.push(f);const p=new at;o.inverseBindMatrices!==void 0&&p.fromArray(o.inverseBindMatrices.array,u*16),h.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[u])}l.bind(new Ew(c,h),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let l=0,c=a.length;l<c;l++){const h=a[l];o.push(_ve(h,s,n,i))}}return Promise.all(o)})}function P7e(t,e,n){const i=e.attributes,r=new ao;if(i.POSITION!==void 0){const a=n.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new q(l[0],l[1],l[2]),new q(c[0],c[1],c[2])),a.normalized){const h=GG(M2[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new q,l=new q;for(let c=0,h=s.length;c<h;c++){const u=s[c];if(u.POSITION!==void 0){const d=n.json.accessors[u.POSITION],f=d.min,p=d.max;if(f!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),d.normalized){const m=GG(M2[d.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}t.boundingBox=r;const o=new Oo;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}function Ete(t,e,n){const i=e.attributes,r=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in i){const a=UG[o]||o.toLowerCase();a in t.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});r.push(o)}return i0(t,e),P7e(t,e,n),Promise.all(r).then(function(){return e.targets!==void 0?A7e(t,e.targets,n):t})}function Cte(t,e){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const i=n.count-2,r=[];if(e===Hb)for(let o=1;o<=i;o++)r.push(n.getX(0)),r.push(n.getX(o)),r.push(n.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(n.getX(o)),r.push(n.getX(o+1)),r.push(n.getX(o+2))):(r.push(n.getX(o+2)),r.push(n.getX(o+1)),r.push(n.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s}class D7e extends yt{constructor(e,n,i,r){super();const s=[],o=[],a=[],l=new q,c=new at;c.makeRotationFromEuler(i),c.setPosition(n);const h=new at;h.copy(c).invert(),u(),this.setAttribute("position",new it(s,3)),this.setAttribute("normal",new it(o,3)),this.setAttribute("uv",new it(a,2));function u(){let m,g=[];const v=new q,y=new q;if(e.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const x=e.geometry,b=x.attributes.position,S=x.attributes.normal;if(x.index!==null){const A=x.index;for(m=0;m<A.count;m++)v.fromBufferAttribute(b,A.getX(m)),y.fromBufferAttribute(S,A.getX(m)),d(g,v,y)}else for(m=0;m<b.count;m++)v.fromBufferAttribute(b,m),y.fromBufferAttribute(S,m),d(g,v,y);for(g=f(g,l.set(1,0,0)),g=f(g,l.set(-1,0,0)),g=f(g,l.set(0,1,0)),g=f(g,l.set(0,-1,0)),g=f(g,l.set(0,0,1)),g=f(g,l.set(0,0,-1)),m=0;m<g.length;m++){const A=g[m];a.push(.5+A.position.x/r.x,.5+A.position.y/r.y),A.position.applyMatrix4(c),s.push(A.position.x,A.position.y,A.position.z),o.push(A.normal.x,A.normal.y,A.normal.z)}}function d(m,g,v){g.applyMatrix4(e.matrixWorld),g.applyMatrix4(h),v.transformDirection(e.matrixWorld),m.push(new Tte(g.clone(),v.clone()))}function f(m,g){const v=[],y=.5*Math.abs(r.dot(g));for(let x=0;x<m.length;x+=3){let b,S,A,E=0,M,C,T,D;const L=m[x+0].position.dot(g)-y,I=m[x+1].position.dot(g)-y,R=m[x+2].position.dot(g)-y;switch(b=L>0,S=I>0,A=R>0,E=(b?1:0)+(S?1:0)+(A?1:0),E){case 0:{v.push(m[x]),v.push(m[x+1]),v.push(m[x+2]);break}case 1:{if(b&&(M=m[x+1],C=m[x+2],T=p(m[x],M,g,y),D=p(m[x],C,g,y)),S){M=m[x],C=m[x+2],T=p(m[x+1],M,g,y),D=p(m[x+1],C,g,y),v.push(T),v.push(C.clone()),v.push(M.clone()),v.push(C.clone()),v.push(T.clone()),v.push(D);break}A&&(M=m[x],C=m[x+1],T=p(m[x+2],M,g,y),D=p(m[x+2],C,g,y)),v.push(M.clone()),v.push(C.clone()),v.push(T),v.push(D),v.push(T.clone()),v.push(C.clone());break}case 2:{b||(M=m[x].clone(),C=p(M,m[x+1],g,y),T=p(M,m[x+2],g,y),v.push(M),v.push(C),v.push(T)),S||(M=m[x+1].clone(),C=p(M,m[x+2],g,y),T=p(M,m[x],g,y),v.push(M),v.push(C),v.push(T)),A||(M=m[x+2].clone(),C=p(M,m[x],g,y),T=p(M,m[x+1],g,y),v.push(M),v.push(C),v.push(T));break}}}return v}function p(m,g,v,y){const x=m.position.dot(v)-y,b=g.position.dot(v)-y,S=x/(x-b);return new Tte(new q(m.position.x+S*(g.position.x-m.position.x),m.position.y+S*(g.position.y-m.position.y),m.position.z+S*(g.position.z-m.position.z)),new q(m.normal.x+S*(g.normal.x-m.normal.x),m.normal.y+S*(g.normal.y-m.normal.y),m.normal.z+S*(g.normal.z-m.normal.z)))}}}class Tte{constructor(e,n){this.position=e,this.normal=n}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}var O7e=Object.prototype;function L7e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||O7e;return t===n}var lW=L7e;function R7e(t,e){return function(n){return t(e(n))}}var Sve=R7e,I7e=Sve,B7e=I7e(Object.keys,Object),k7e=B7e,F7e=lW,N7e=k7e,z7e=Object.prototype,U7e=z7e.hasOwnProperty;function G7e(t){if(!F7e(t))return N7e(t);var e=[];for(var n in Object(t))U7e.call(t,n)&&n!="constructor"&&e.push(n);return e}var H7e=G7e,j7e=typeof Ac=="object"&&Ac&&Ac.Object===Object&&Ac,Ave=j7e,V7e=Ave,W7e=typeof self=="object"&&self&&self.Object===Object&&self,$7e=V7e||W7e||Function("return this")(),fd=$7e,q7e=fd,X7e=q7e.Symbol,GE=X7e,Pte=GE,Mve=Object.prototype,Y7e=Mve.hasOwnProperty,K7e=Mve.toString,mS=Pte?Pte.toStringTag:void 0;function J7e(t){var e=Y7e.call(t,mS),n=t[mS];try{t[mS]=void 0;var i=!0}catch{}var r=K7e.call(t);return i&&(e?t[mS]=n:delete t[mS]),r}var Z7e=J7e,Q7e=Object.prototype,eqe=Q7e.toString;function tqe(t){return eqe.call(t)}var nqe=tqe,Dte=GE,iqe=Z7e,rqe=nqe,sqe="[object Null]",oqe="[object Undefined]",Ote=Dte?Dte.toStringTag:void 0;function aqe(t){return t==null?t===void 0?oqe:sqe:Ote&&Ote in Object(t)?iqe(t):rqe(t)}var Jv=aqe;function lqe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Lw=lqe,cqe=Jv,uqe=Lw,hqe="[object AsyncFunction]",dqe="[object Function]",fqe="[object GeneratorFunction]",pqe="[object Proxy]";function mqe(t){if(!uqe(t))return!1;var e=cqe(t);return e==dqe||e==fqe||e==hqe||e==pqe}var Eve=mqe,gqe=fd,vqe=gqe["__core-js_shared__"],yqe=vqe,a4=yqe,Lte=function(){var t=/[^.]+$/.exec(a4&&a4.keys&&a4.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function xqe(t){return!!Lte&&Lte in t}var bqe=xqe,wqe=Function.prototype,_qe=wqe.toString;function Sqe(t){if(t!=null){try{return _qe.call(t)}catch{}try{return t+""}catch{}}return""}var Cve=Sqe,Aqe=Eve,Mqe=bqe,Eqe=Lw,Cqe=Cve,Tqe=/[\\^$.*+?()[\]{}|]/g,Pqe=/^\[object .+?Constructor\]$/,Dqe=Function.prototype,Oqe=Object.prototype,Lqe=Dqe.toString,Rqe=Oqe.hasOwnProperty,Iqe=RegExp("^"+Lqe.call(Rqe).replace(Tqe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Bqe(t){if(!Eqe(t)||Mqe(t))return!1;var e=Aqe(t)?Iqe:Pqe;return e.test(Cqe(t))}var kqe=Bqe;function Fqe(t,e){return t==null?void 0:t[e]}var Nqe=Fqe,zqe=kqe,Uqe=Nqe;function Gqe(t,e){var n=Uqe(t,e);return zqe(n)?n:void 0}var Zv=Gqe,Hqe=Zv,jqe=fd,Vqe=Hqe(jqe,"DataView"),Wqe=Vqe,$qe=Zv,qqe=fd,Xqe=$qe(qqe,"Map"),cW=Xqe,Yqe=Zv,Kqe=fd,Jqe=Yqe(Kqe,"Promise"),Zqe=Jqe,Qqe=Zv,eXe=fd,tXe=Qqe(eXe,"Set"),nXe=tXe,iXe=Zv,rXe=fd,sXe=iXe(rXe,"WeakMap"),oXe=sXe,HG=Wqe,jG=cW,VG=Zqe,WG=nXe,$G=oXe,Tve=Jv,Rw=Cve,Rte="[object Map]",aXe="[object Object]",Ite="[object Promise]",Bte="[object Set]",kte="[object WeakMap]",Fte="[object DataView]",lXe=Rw(HG),cXe=Rw(jG),uXe=Rw(VG),hXe=Rw(WG),dXe=Rw($G),r0=Tve;(HG&&r0(new HG(new ArrayBuffer(1)))!=Fte||jG&&r0(new jG)!=Rte||VG&&r0(VG.resolve())!=Ite||WG&&r0(new WG)!=Bte||$G&&r0(new $G)!=kte)&&(r0=function(t){var e=Tve(t),n=e==aXe?t.constructor:void 0,i=n?Rw(n):"";if(i)switch(i){case lXe:return Fte;case cXe:return Rte;case uXe:return Ite;case hXe:return Bte;case dXe:return kte}return e});var JI=r0;function fXe(t){return t!=null&&typeof t=="object"}var tp=fXe,pXe=Jv,mXe=tp,gXe="[object Arguments]";function vXe(t){return mXe(t)&&pXe(t)==gXe}var yXe=vXe,Nte=yXe,xXe=tp,Pve=Object.prototype,bXe=Pve.hasOwnProperty,wXe=Pve.propertyIsEnumerable,_Xe=Nte(function(){return arguments}())?Nte:function(t){return xXe(t)&&bXe.call(t,"callee")&&!wXe.call(t,"callee")},Dve=_Xe,SXe=Array.isArray,qu=SXe,AXe=9007199254740991;function MXe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=AXe}var uW=MXe,EXe=Eve,CXe=uW;function TXe(t){return t!=null&&CXe(t.length)&&!EXe(t)}var ZI=TXe,Xb={},PXe={get exports(){return Xb},set exports(t){Xb=t}};function DXe(){return!1}var OXe=DXe;(function(t,e){var n=fd,i=OXe,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===r,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||i;t.exports=c})(PXe,Xb);var LXe=Jv,RXe=uW,IXe=tp,BXe="[object Arguments]",kXe="[object Array]",FXe="[object Boolean]",NXe="[object Date]",zXe="[object Error]",UXe="[object Function]",GXe="[object Map]",HXe="[object Number]",jXe="[object Object]",VXe="[object RegExp]",WXe="[object Set]",$Xe="[object String]",qXe="[object WeakMap]",XXe="[object ArrayBuffer]",YXe="[object DataView]",KXe="[object Float32Array]",JXe="[object Float64Array]",ZXe="[object Int8Array]",QXe="[object Int16Array]",eYe="[object Int32Array]",tYe="[object Uint8Array]",nYe="[object Uint8ClampedArray]",iYe="[object Uint16Array]",rYe="[object Uint32Array]",Wi={};Wi[KXe]=Wi[JXe]=Wi[ZXe]=Wi[QXe]=Wi[eYe]=Wi[tYe]=Wi[nYe]=Wi[iYe]=Wi[rYe]=!0;Wi[BXe]=Wi[kXe]=Wi[XXe]=Wi[FXe]=Wi[YXe]=Wi[NXe]=Wi[zXe]=Wi[UXe]=Wi[GXe]=Wi[HXe]=Wi[jXe]=Wi[VXe]=Wi[WXe]=Wi[$Xe]=Wi[qXe]=!1;function sYe(t){return IXe(t)&&RXe(t.length)&&!!Wi[LXe(t)]}var oYe=sYe;function aYe(t){return function(e){return t(e)}}var hW=aYe,Yb={},lYe={get exports(){return Yb},set exports(t){Yb=t}};(function(t,e){var n=Ave,i=e&&!e.nodeType&&e,r=i&&!0&&t&&!t.nodeType&&t,s=r&&r.exports===i,o=s&&n.process,a=function(){try{var l=r&&r.require&&r.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(lYe,Yb);var cYe=oYe,uYe=hW,zte=Yb,Ute=zte&&zte.isTypedArray,hYe=Ute?uYe(Ute):cYe,Ove=hYe;function dYe(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}var Lve=dYe;function fYe(){this.__data__=[],this.size=0}var pYe=fYe;function mYe(t,e){return t===e||t!==t&&e!==e}var dW=mYe,gYe=dW;function vYe(t,e){for(var n=t.length;n--;)if(gYe(t[n][0],e))return n;return-1}var QI=vYe,yYe=QI,xYe=Array.prototype,bYe=xYe.splice;function wYe(t){var e=this.__data__,n=yYe(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():bYe.call(e,n,1),--this.size,!0}var _Ye=wYe,SYe=QI;function AYe(t){var e=this.__data__,n=SYe(e,t);return n<0?void 0:e[n][1]}var MYe=AYe,EYe=QI;function CYe(t){return EYe(this.__data__,t)>-1}var TYe=CYe,PYe=QI;function DYe(t,e){var n=this.__data__,i=PYe(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}var OYe=DYe,LYe=pYe,RYe=_Ye,IYe=MYe,BYe=TYe,kYe=OYe;function Iw(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Iw.prototype.clear=LYe;Iw.prototype.delete=RYe;Iw.prototype.get=IYe;Iw.prototype.has=BYe;Iw.prototype.set=kYe;var eB=Iw,FYe=eB;function NYe(){this.__data__=new FYe,this.size=0}var zYe=NYe;function UYe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var GYe=UYe;function HYe(t){return this.__data__.get(t)}var jYe=HYe;function VYe(t){return this.__data__.has(t)}var WYe=VYe,$Ye=Zv,qYe=$Ye(Object,"create"),tB=qYe,Gte=tB;function XYe(){this.__data__=Gte?Gte(null):{},this.size=0}var YYe=XYe;function KYe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var JYe=KYe,ZYe=tB,QYe="__lodash_hash_undefined__",eKe=Object.prototype,tKe=eKe.hasOwnProperty;function nKe(t){var e=this.__data__;if(ZYe){var n=e[t];return n===QYe?void 0:n}return tKe.call(e,t)?e[t]:void 0}var iKe=nKe,rKe=tB,sKe=Object.prototype,oKe=sKe.hasOwnProperty;function aKe(t){var e=this.__data__;return rKe?e[t]!==void 0:oKe.call(e,t)}var lKe=aKe,cKe=tB,uKe="__lodash_hash_undefined__";function hKe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=cKe&&e===void 0?uKe:e,this}var dKe=hKe,fKe=YYe,pKe=JYe,mKe=iKe,gKe=lKe,vKe=dKe;function Bw(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Bw.prototype.clear=fKe;Bw.prototype.delete=pKe;Bw.prototype.get=mKe;Bw.prototype.has=gKe;Bw.prototype.set=vKe;var yKe=Bw,Hte=yKe,xKe=eB,bKe=cW;function wKe(){this.size=0,this.__data__={hash:new Hte,map:new(bKe||xKe),string:new Hte}}var _Ke=wKe;function SKe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var AKe=SKe,MKe=AKe;function EKe(t,e){var n=t.__data__;return MKe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var nB=EKe,CKe=nB;function TKe(t){var e=CKe(this,t).delete(t);return this.size-=e?1:0,e}var PKe=TKe,DKe=nB;function OKe(t){return DKe(this,t).get(t)}var LKe=OKe,RKe=nB;function IKe(t){return RKe(this,t).has(t)}var BKe=IKe,kKe=nB;function FKe(t,e){var n=kKe(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}var NKe=FKe,zKe=_Ke,UKe=PKe,GKe=LKe,HKe=BKe,jKe=NKe;function kw(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}kw.prototype.clear=zKe;kw.prototype.delete=UKe;kw.prototype.get=GKe;kw.prototype.has=HKe;kw.prototype.set=jKe;var fW=kw,VKe=eB,WKe=cW,$Ke=fW,qKe=200;function XKe(t,e){var n=this.__data__;if(n instanceof VKe){var i=n.__data__;if(!WKe||i.length<qKe-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new $Ke(i)}return n.set(t,e),this.size=n.size,this}var YKe=XKe,KKe=eB,JKe=zYe,ZKe=GYe,QKe=jYe,eJe=WYe,tJe=YKe;function Fw(t){var e=this.__data__=new KKe(t);this.size=e.size}Fw.prototype.clear=JKe;Fw.prototype.delete=ZKe;Fw.prototype.get=QKe;Fw.prototype.has=eJe;Fw.prototype.set=tJe;var pW=Fw,nJe="__lodash_hash_undefined__";function iJe(t){return this.__data__.set(t,nJe),this}var rJe=iJe;function sJe(t){return this.__data__.has(t)}var oJe=sJe,aJe=fW,lJe=rJe,cJe=oJe;function QO(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new aJe;++e<n;)this.add(t[e])}QO.prototype.add=QO.prototype.push=lJe;QO.prototype.has=cJe;var uJe=QO;function hJe(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var dJe=hJe;function fJe(t,e){return t.has(e)}var pJe=fJe,mJe=uJe,gJe=dJe,vJe=pJe,yJe=1,xJe=2;function bJe(t,e,n,i,r,s){var o=n&yJe,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),h=s.get(e);if(c&&h)return c==e&&h==t;var u=-1,d=!0,f=n&xJe?new mJe:void 0;for(s.set(t,e),s.set(e,t);++u<a;){var p=t[u],m=e[u];if(i)var g=o?i(m,p,u,e,t,s):i(p,m,u,t,e,s);if(g!==void 0){if(g)continue;d=!1;break}if(f){if(!gJe(e,function(v,y){if(!vJe(f,y)&&(p===v||r(p,v,n,i,s)))return f.push(y)})){d=!1;break}}else if(!(p===m||r(p,m,n,i,s))){d=!1;break}}return s.delete(t),s.delete(e),d}var Rve=bJe,wJe=fd,_Je=wJe.Uint8Array,Ive=_Je;function SJe(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n}var AJe=SJe;function MJe(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var EJe=MJe,jte=GE,Vte=Ive,CJe=dW,TJe=Rve,PJe=AJe,DJe=EJe,OJe=1,LJe=2,RJe="[object Boolean]",IJe="[object Date]",BJe="[object Error]",kJe="[object Map]",FJe="[object Number]",NJe="[object RegExp]",zJe="[object Set]",UJe="[object String]",GJe="[object Symbol]",HJe="[object ArrayBuffer]",jJe="[object DataView]",Wte=jte?jte.prototype:void 0,l4=Wte?Wte.valueOf:void 0;function VJe(t,e,n,i,r,s,o){switch(n){case jJe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case HJe:return!(t.byteLength!=e.byteLength||!s(new Vte(t),new Vte(e)));case RJe:case IJe:case FJe:return CJe(+t,+e);case BJe:return t.name==e.name&&t.message==e.message;case NJe:case UJe:return t==e+"";case kJe:var a=PJe;case zJe:var l=i&OJe;if(a||(a=DJe),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;i|=LJe,o.set(t,e);var h=TJe(a(t),a(e),i,r,s,o);return o.delete(t),h;case GJe:if(l4)return l4.call(t)==l4.call(e)}return!1}var WJe=VJe;function $Je(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var Bve=$Je,qJe=Bve,XJe=qu;function YJe(t,e,n){var i=e(t);return XJe(t)?i:qJe(i,n(t))}var kve=YJe;function KJe(t,e){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}var JJe=KJe;function ZJe(){return[]}var Fve=ZJe,QJe=JJe,eZe=Fve,tZe=Object.prototype,nZe=tZe.propertyIsEnumerable,$te=Object.getOwnPropertySymbols,iZe=$te?function(t){return t==null?[]:(t=Object(t),QJe($te(t),function(e){return nZe.call(t,e)}))}:eZe,mW=iZe;function rZe(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var sZe=rZe,oZe=9007199254740991,aZe=/^(?:0|[1-9]\d*)$/;function lZe(t,e){var n=typeof t;return e=e??oZe,!!e&&(n=="number"||n!="symbol"&&aZe.test(t))&&t>-1&&t%1==0&&t<e}var Nve=lZe,cZe=sZe,uZe=Dve,hZe=qu,dZe=Xb,fZe=Nve,pZe=Ove,mZe=Object.prototype,gZe=mZe.hasOwnProperty;function vZe(t,e){var n=hZe(t),i=!n&&uZe(t),r=!n&&!i&&dZe(t),s=!n&&!i&&!r&&pZe(t),o=n||i||r||s,a=o?cZe(t.length,String):[],l=a.length;for(var c in t)(e||gZe.call(t,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||fZe(c,l)))&&a.push(c);return a}var zve=vZe,yZe=zve,xZe=H7e,bZe=ZI;function wZe(t){return bZe(t)?yZe(t):xZe(t)}var HE=wZe,_Ze=kve,SZe=mW,AZe=HE;function MZe(t){return _Ze(t,AZe,SZe)}var Uve=MZe,qte=Uve,EZe=1,CZe=Object.prototype,TZe=CZe.hasOwnProperty;function PZe(t,e,n,i,r,s){var o=n&EZe,a=qte(t),l=a.length,c=qte(e),h=c.length;if(l!=h&&!o)return!1;for(var u=l;u--;){var d=a[u];if(!(o?d in e:TZe.call(e,d)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=o;++u<l;){d=a[u];var v=t[d],y=e[d];if(i)var x=o?i(y,v,d,e,t,s):i(v,y,d,t,e,s);if(!(x===void 0?v===y||r(v,y,n,i,s):x)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var b=t.constructor,S=e.constructor;b!=S&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof S=="function"&&S instanceof S)&&(m=!1)}return s.delete(t),s.delete(e),m}var DZe=PZe,c4=pW,OZe=Rve,LZe=WJe,RZe=DZe,Xte=JI,Yte=qu,Kte=Xb,IZe=Ove,BZe=1,Jte="[object Arguments]",Zte="[object Array]",DP="[object Object]",kZe=Object.prototype,Qte=kZe.hasOwnProperty;function FZe(t,e,n,i,r,s){var o=Yte(t),a=Yte(e),l=o?Zte:Xte(t),c=a?Zte:Xte(e);l=l==Jte?DP:l,c=c==Jte?DP:c;var h=l==DP,u=c==DP,d=l==c;if(d&&Kte(t)){if(!Kte(e))return!1;o=!0,h=!1}if(d&&!h)return s||(s=new c4),o||IZe(t)?OZe(t,e,n,i,r,s):LZe(t,e,l,n,i,r,s);if(!(n&BZe)){var f=h&&Qte.call(t,"__wrapped__"),p=u&&Qte.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return s||(s=new c4),r(m,g,n,i,s)}}return d?(s||(s=new c4),RZe(t,e,n,i,r,s)):!1}var NZe=FZe,zZe=NZe,ene=tp;function Gve(t,e,n,i,r){return t===e?!0:t==null||e==null||!ene(t)&&!ene(e)?t!==t&&e!==e:zZe(t,e,n,i,Gve,r)}var Hve=Gve,UZe=pW,GZe=Hve,HZe=1,jZe=2;function VZe(t,e,n,i){var r=n.length,s=r,o=!i;if(t==null)return!s;for(t=Object(t);r--;){var a=n[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<s;){a=n[r];var l=a[0],c=t[l],h=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var u=new UZe;if(i)var d=i(c,h,l,t,e,u);if(!(d===void 0?GZe(h,c,HZe|jZe,i,u):d))return!1}}return!0}var WZe=VZe,$Ze=Lw;function qZe(t){return t===t&&!$Ze(t)}var jve=qZe,XZe=jve,YZe=HE;function KZe(t){for(var e=YZe(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,XZe(r)]}return e}var JZe=KZe;function ZZe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var Vve=ZZe,QZe=WZe,eQe=JZe,tQe=Vve;function nQe(t){var e=eQe(t);return e.length==1&&e[0][2]?tQe(e[0][0],e[0][1]):function(n){return n===t||QZe(n,t,e)}}var iQe=nQe,rQe=Jv,sQe=tp,oQe="[object Symbol]";function aQe(t){return typeof t=="symbol"||sQe(t)&&rQe(t)==oQe}var gW=aQe,lQe=qu,cQe=gW,uQe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hQe=/^\w*$/;function dQe(t,e){if(lQe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||cQe(t)?!0:hQe.test(t)||!uQe.test(t)||e!=null&&t in Object(e)}var vW=dQe,Wve=fW,fQe="Expected a function";function yW(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(fQe);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(yW.Cache||Wve),n}yW.Cache=Wve;var pQe=yW,mQe=pQe,gQe=500;function vQe(t){var e=mQe(t,function(i){return n.size===gQe&&n.clear(),i}),n=e.cache;return e}var yQe=vQe,xQe=yQe,bQe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wQe=/\\(\\)?/g,_Qe=xQe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(bQe,function(n,i,r,s){e.push(r?s.replace(wQe,"$1"):i||n)}),e}),SQe=_Qe,tne=GE,AQe=Lve,MQe=qu,EQe=gW,CQe=1/0,nne=tne?tne.prototype:void 0,ine=nne?nne.toString:void 0;function $ve(t){if(typeof t=="string")return t;if(MQe(t))return AQe(t,$ve)+"";if(EQe(t))return ine?ine.call(t):"";var e=t+"";return e=="0"&&1/t==-CQe?"-0":e}var TQe=$ve,PQe=TQe;function DQe(t){return t==null?"":PQe(t)}var OQe=DQe,LQe=qu,RQe=vW,IQe=SQe,BQe=OQe;function kQe(t,e){return LQe(t)?t:RQe(t,e)?[t]:IQe(BQe(t))}var qve=kQe,FQe=gW,NQe=1/0;function zQe(t){if(typeof t=="string"||FQe(t))return t;var e=t+"";return e=="0"&&1/t==-NQe?"-0":e}var iB=zQe,UQe=qve,GQe=iB;function HQe(t,e){e=UQe(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[GQe(e[n++])];return n&&n==i?t:void 0}var Xve=HQe,jQe=Xve;function VQe(t,e,n){var i=t==null?void 0:jQe(t,e);return i===void 0?n:i}var WQe=VQe;function $Qe(t,e){return t!=null&&e in Object(t)}var qQe=$Qe,XQe=qve,YQe=Dve,KQe=qu,JQe=Nve,ZQe=uW,QQe=iB;function eet(t,e,n){e=XQe(e,t);for(var i=-1,r=e.length,s=!1;++i<r;){var o=QQe(e[i]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++i!=r?s:(r=t==null?0:t.length,!!r&&ZQe(r)&&JQe(o,r)&&(KQe(t)||YQe(t)))}var tet=eet,net=qQe,iet=tet;function ret(t,e){return t!=null&&iet(t,e,net)}var set=ret,oet=Hve,aet=WQe,cet=set,uet=vW,het=jve,det=Vve,fet=iB,pet=1,met=2;function get(t,e){return uet(t)&&het(e)?det(fet(t),e):function(n){var i=aet(n,t);return i===void 0&&i===e?cet(n,t):oet(e,i,pet|met)}}var vet=get;function yet(t){return t}var Yve=yet;function xet(t){return function(e){return e==null?void 0:e[t]}}var bet=xet,wet=Xve;function _et(t){return function(e){return wet(e,t)}}var Aet=_et,Met=bet,Eet=Aet,Cet=vW,Tet=iB;function Pet(t){return Cet(t)?Met(Tet(t)):Eet(t)}var Det=Pet,Oet=iQe,Let=vet,Ret=Yve,Iet=qu,Bet=Det;function ket(t){return typeof t=="function"?t:t==null?Ret:typeof t=="object"?Iet(t)?Let(t[0],t[1]):Oet(t):Bet(t)}var Fet=ket;function Net(t){return function(e,n,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[t?a:++r];if(n(s[l],l,s)===!1)break}return e}}var zet=Net,Uet=zet,Get=Uet(),Het=Get,jet=Het,Vet=HE;function Wet(t,e){return t&&jet(t,e,Vet)}var Kve=Wet,$et=ZI;function qet(t,e){return function(n,i){if(n==null)return n;if(!$et(n))return t(n,i);for(var r=n.length,s=e?r:-1,o=Object(n);(e?s--:++s<r)&&i(o[s],s,o)!==!1;);return n}}var Xet=qet,Yet=Kve,Ket=Xet,Jet=Ket(Yet),Zet=Jet,Qet=Zet,ett=ZI;function ttt(t,e){var n=-1,i=ett(t)?Array(t.length):[];return Qet(t,function(r,s,o){i[++n]=e(r,s,o)}),i}var ntt=ttt,itt=Lve,rtt=Fet,stt=ntt,ott=qu;function att(t,e){var n=ott(t)?itt:stt;return n(t,rtt(e))}var ltt=att;function ctt(t,e){for(var n=-1,i=t==null?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}var utt=ctt,htt=Yve;function dtt(t){return typeof t=="function"?t:htt}var ftt=dtt,ptt=Zv,mtt=function(){try{var t=ptt(Object,"defineProperty");return t({},"",{}),t}catch{}}(),gtt=mtt,rne=gtt;function vtt(t,e,n){e=="__proto__"&&rne?rne(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Jve=vtt,ytt=Jve,xtt=dW,btt=Object.prototype,wtt=btt.hasOwnProperty;function _tt(t,e,n){var i=t[e];(!(wtt.call(t,e)&&xtt(i,n))||n===void 0&&!(e in t))&&ytt(t,e,n)}var Zve=_tt,Stt=Zve,Att=Jve;function Mtt(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),r?Att(n,a,l):Stt(n,a,l)}return n}var rB=Mtt,Ett=rB,Ctt=HE;function Ttt(t,e){return t&&Ett(e,Ctt(e),t)}var Ptt=Ttt;function Dtt(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Ott=Dtt,Ltt=Lw,Rtt=lW,Itt=Ott,Btt=Object.prototype,ktt=Btt.hasOwnProperty;function Ftt(t){if(!Ltt(t))return Itt(t);var e=Rtt(t),n=[];for(var i in t)i=="constructor"&&(e||!ktt.call(t,i))||n.push(i);return n}var Ntt=Ftt,ztt=zve,Utt=Ntt,Gtt=ZI;function Htt(t){return Gtt(t)?ztt(t,!0):Utt(t)}var xW=Htt,jtt=rB,Vtt=xW;function Wtt(t,e){return t&&jtt(e,Vtt(e),t)}var $tt=Wtt,eL={},qtt={get exports(){return eL},set exports(t){eL=t}};(function(t,e){var n=fd,i=e&&!e.nodeType&&e,r=i&&!0&&t&&!t.nodeType&&t,s=r&&r.exports===i,o=s?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,h){if(h)return c.slice();var u=c.length,d=a?a(u):new c.constructor(u);return c.copy(d),d}t.exports=l})(qtt,eL);function Xtt(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}var Ytt=Xtt,Ktt=rB,Jtt=mW;function Ztt(t,e){return Ktt(t,Jtt(t),e)}var Qtt=Ztt,ent=Sve,tnt=ent(Object.getPrototypeOf,Object),bW=tnt,nnt=Bve,int=bW,rnt=mW,snt=Fve,ont=Object.getOwnPropertySymbols,ant=ont?function(t){for(var e=[];t;)nnt(e,rnt(t)),t=int(t);return e}:snt,Qve=ant,lnt=rB,cnt=Qve;function unt(t,e){return lnt(t,cnt(t),e)}var hnt=unt,dnt=kve,fnt=Qve,pnt=xW;function mnt(t){return dnt(t,pnt,fnt)}var gnt=mnt,vnt=Object.prototype,ynt=vnt.hasOwnProperty;function xnt(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&ynt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var bnt=xnt,sne=Ive;function wnt(t){var e=new t.constructor(t.byteLength);return new sne(e).set(new sne(t)),e}var wW=wnt,_nt=wW;function Snt(t,e){var n=e?_nt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Ant=Snt,Mnt=/\w*$/;function Ent(t){var e=new t.constructor(t.source,Mnt.exec(t));return e.lastIndex=t.lastIndex,e}var Cnt=Ent,one=GE,ane=one?one.prototype:void 0,lne=ane?ane.valueOf:void 0;function Tnt(t){return lne?Object(lne.call(t)):{}}var Pnt=Tnt,Dnt=wW;function Ont(t,e){var n=e?Dnt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Lnt=Ont,Rnt=wW,Int=Ant,Bnt=Cnt,knt=Pnt,Fnt=Lnt,Nnt="[object Boolean]",znt="[object Date]",Unt="[object Map]",Gnt="[object Number]",Hnt="[object RegExp]",jnt="[object Set]",Vnt="[object String]",Wnt="[object Symbol]",$nt="[object ArrayBuffer]",qnt="[object DataView]",Xnt="[object Float32Array]",Ynt="[object Float64Array]",Knt="[object Int8Array]",Jnt="[object Int16Array]",Znt="[object Int32Array]",Qnt="[object Uint8Array]",eit="[object Uint8ClampedArray]",tit="[object Uint16Array]",nit="[object Uint32Array]";function iit(t,e,n){var i=t.constructor;switch(e){case $nt:return Rnt(t);case Nnt:case znt:return new i(+t);case qnt:return Int(t,n);case Xnt:case Ynt:case Knt:case Jnt:case Znt:case Qnt:case eit:case tit:case nit:return Fnt(t,n);case Unt:return new i;case Gnt:case Vnt:return new i(t);case Hnt:return Bnt(t);case jnt:return new i;case Wnt:return knt(t)}}var rit=iit,sit=Lw,cne=Object.create,oit=function(){function t(){}return function(e){if(!sit(e))return{};if(cne)return cne(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),ait=oit,lit=ait,cit=bW,uit=lW;function hit(t){return typeof t.constructor=="function"&&!uit(t)?lit(cit(t)):{}}var dit=hit,fit=JI,pit=tp,mit="[object Map]";function git(t){return pit(t)&&fit(t)==mit}var vit=git,yit=vit,xit=hW,une=Yb,hne=une&&une.isMap,bit=hne?xit(hne):yit,wit=bit,_it=JI,Sit=tp,Ait="[object Set]";function Mit(t){return Sit(t)&&_it(t)==Ait}var Eit=Mit,Cit=Eit,Tit=hW,dne=Yb,fne=dne&&dne.isSet,Pit=fne?Tit(fne):Cit,Dit=Pit,Oit=pW,Lit=utt,Rit=Zve,Iit=Ptt,Bit=$tt,kit=eL,Fit=Ytt,Nit=Qtt,zit=hnt,Uit=Uve,Git=gnt,Hit=JI,jit=bnt,Vit=rit,Wit=dit,$it=qu,qit=Xb,Xit=wit,Yit=Lw,Kit=Dit,Jit=HE,Zit=xW,Qit=1,ert=2,trt=4,eye="[object Arguments]",nrt="[object Array]",irt="[object Boolean]",rrt="[object Date]",srt="[object Error]",tye="[object Function]",ort="[object GeneratorFunction]",art="[object Map]",lrt="[object Number]",nye="[object Object]",crt="[object RegExp]",urt="[object Set]",hrt="[object String]",drt="[object Symbol]",frt="[object WeakMap]",prt="[object ArrayBuffer]",mrt="[object DataView]",grt="[object Float32Array]",vrt="[object Float64Array]",yrt="[object Int8Array]",xrt="[object Int16Array]",brt="[object Int32Array]",wrt="[object Uint8Array]",_rt="[object Uint8ClampedArray]",Srt="[object Uint16Array]",Art="[object Uint32Array]",Ri={};Ri[eye]=Ri[nrt]=Ri[prt]=Ri[mrt]=Ri[irt]=Ri[rrt]=Ri[grt]=Ri[vrt]=Ri[yrt]=Ri[xrt]=Ri[brt]=Ri[art]=Ri[lrt]=Ri[nye]=Ri[crt]=Ri[urt]=Ri[hrt]=Ri[drt]=Ri[wrt]=Ri[_rt]=Ri[Srt]=Ri[Art]=!0;Ri[srt]=Ri[tye]=Ri[frt]=!1;function BD(t,e,n,i,r,s){var o,a=e&Qit,l=e&ert,c=e&trt;if(n&&(o=r?n(t,i,r,s):n(t)),o!==void 0)return o;if(!Yit(t))return t;var h=$it(t);if(h){if(o=jit(t),!a)return Fit(t,o)}else{var u=Hit(t),d=u==tye||u==ort;if(qit(t))return kit(t,a);if(u==nye||u==eye||d&&!r){if(o=l||d?{}:Wit(t),!a)return l?zit(t,Bit(o,t)):Nit(t,Iit(o,t))}else{if(!Ri[u])return r?t:{};o=Vit(t,u,a)}}s||(s=new Oit);var f=s.get(t);if(f)return f;s.set(t,o),Kit(t)?t.forEach(function(g){o.add(BD(g,e,n,g,t,s))}):Xit(t)&&t.forEach(function(g,v){o.set(v,BD(g,e,n,v,t,s))});var p=c?l?Git:Uit:l?Zit:Jit,m=h?void 0:p(t);return Lit(m||t,function(g,v){m&&(v=g,g=t[v]),Rit(o,v,BD(g,e,n,v,t,s))}),o}var Mrt=BD,Ert=Jv,Crt=qu,Trt=tp,Prt="[object String]";function Drt(t){return typeof t=="string"||!Crt(t)&&Trt(t)&&Ert(t)==Prt}var Ort=Drt;class Lrt extends S0e{constructor(e){super(e),this.type=vu}parse(e){const a=function(x,b){switch(x){case 1:console.error("THREE.RGBELoader Read Error: "+(b||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(b||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(b||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(b||""))}return-1},u=`
`,d=function(x,b,S){b=b||1024;let E=x.pos,M=-1,C=0,T="",D=String.fromCharCode.apply(null,new Uint16Array(x.subarray(E,E+128)));for(;0>(M=D.indexOf(u))&&C<b&&E<x.byteLength;)T+=D,C+=D.length,E+=128,D+=String.fromCharCode.apply(null,new Uint16Array(x.subarray(E,E+128)));return-1<M?(S!==!1&&(x.pos+=C+M+1),T+D.slice(0,M)):!1},f=function(x){const b=/^#\?(\S+)/,S=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,A=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,E=/^\s*FORMAT=(\S+)\s*$/,M=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,C={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let T,D;if(x.pos>=x.byteLength||!(T=d(x)))return a(1,"no header found");if(!(D=T.match(b)))return a(3,"bad initial token");for(C.valid|=1,C.programtype=D[1],C.string+=T+`
`;T=d(x),T!==!1;){if(C.string+=T+`
`,T.charAt(0)==="#"){C.comments+=T+`
`;continue}if((D=T.match(S))&&(C.gamma=parseFloat(D[1])),(D=T.match(A))&&(C.exposure=parseFloat(D[1])),(D=T.match(E))&&(C.valid|=2,C.format=D[1]),(D=T.match(M))&&(C.valid|=4,C.height=parseInt(D[1],10),C.width=parseInt(D[2],10)),C.valid&2&&C.valid&4)break}return C.valid&2?C.valid&4?C:a(3,"missing image size specifier"):a(3,"missing format specifier")},p=function(x,b,S){const A=b;if(A<8||A>32767||x[0]!==2||x[1]!==2||x[2]&128)return new Uint8Array(x);if(A!==(x[2]<<8|x[3]))return a(3,"wrong scanline width");const E=new Uint8Array(4*b*S);if(!E.length)return a(4,"unable to allocate buffer space");let M=0,C=0;const T=4*A,D=new Uint8Array(4),L=new Uint8Array(T);let I=S;for(;I>0&&C<x.byteLength;){if(C+4>x.byteLength)return a(1);if(D[0]=x[C++],D[1]=x[C++],D[2]=x[C++],D[3]=x[C++],D[0]!=2||D[1]!=2||(D[2]<<8|D[3])!=A)return a(3,"bad rgbe scanline format");let R=0,H;for(;R<T&&C<x.byteLength;){H=x[C++];const ee=H>128;if(ee&&(H-=128),H===0||R+H>T)return a(3,"bad scanline data");if(ee){const F=x[C++];for(let V=0;V<H;V++)L[R++]=F}else L.set(x.subarray(C,C+H),R),R+=H,C+=H}const Z=A;for(let ee=0;ee<Z;ee++){let F=0;E[M]=L[ee+F],F+=A,E[M+1]=L[ee+F],F+=A,E[M+2]=L[ee+F],F+=A,E[M+3]=L[ee+F],M+=4}I--}return E},m=function(x,b,S,A){const E=x[b+3],M=Math.pow(2,E-128)/255;S[A+0]=x[b+0]*M,S[A+1]=x[b+1]*M,S[A+2]=x[b+2]*M,S[A+3]=1},g=function(x,b,S,A){const E=x[b+3],M=Math.pow(2,E-128)/255;S[A+0]=xA.toHalfFloat(Math.min(x[b+0]*M,65504)),S[A+1]=xA.toHalfFloat(Math.min(x[b+1]*M,65504)),S[A+2]=xA.toHalfFloat(Math.min(x[b+2]*M,65504)),S[A+3]=xA.toHalfFloat(1)},v=new Uint8Array(e);v.pos=0;const y=f(v);if(y!==-1){const x=y.width,b=y.height,S=p(v.subarray(v.pos),x,b);if(S!==-1){let A,E,M;switch(this.type){case Cc:M=S.length/4;const C=new Float32Array(M*4);for(let D=0;D<M;D++)m(S,D*4,C,D*4);A=C,E=Cc;break;case vu:M=S.length/4;const T=new Uint16Array(M*4);for(let D=0;D<M;D++)g(S,D*4,T,D*4);A=T,E=vu;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:x,height:b,data:A,header:y.string,gamma:y.gamma,exposure:y.exposure,type:E}}}return null}setDataType(e){return this.type=e,this}load(e,n,i,r){function s(o,a){switch(o.type){case Cc:case vu:o.encoding=Ra,o.minFilter=Ei,o.magFilter=Ei,o.generateMipmaps=!1,o.flipY=!0;break}n&&n(o,a)}return super.load(e,s,i,r)}}const u4=new WeakMap;let Rrt=class extends qs{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,i,r){const s=new js(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(n).catch(r)},i,r)}decodeDracoFile(e,n,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const l in n.attributeTypes){const c=n.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=c.name)}const i=JSON.stringify(n);if(u4.has(e)){const l=u4.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,h)=>{r._callbacks[s]={resolve:c,reject:h},r.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),u4.set(e,{key:i,promise:a}),a}_createGeometry(e){const n=new yt;e.index&&n.setIndex(new Nt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;n.setAttribute(s,new Nt(o,a))}return n}_loadLibrary(e,n){const i=new js(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=Irt.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=n,i._taskLoad+=n,i})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}};function Irt(){let t,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(h){t.onModuleLoaded=function(u){h({draco:u})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(h=>{const u=h.draco,d=new u.Decoder,f=new u.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{const p=n(u,d,f,c),m=p.attributes.map(g=>g.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:a.id,error:p.message})}finally{u.destroy(f),u.destroy(d)}});break}};function n(o,a,l,c){const h=c.attributeIDs,u=c.attributeTypes;let d,f;const p=a.GetEncodedGeometryType(l);if(p===o.TRIANGULAR_MESH)d=new o.Mesh,f=a.DecodeBufferToMesh(l,d);else if(p===o.POINT_CLOUD)d=new o.PointCloud,f=a.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const m={index:null,attributes:[]};for(const g in h){const v=self[u[g]];let y,x;if(c.useUniqueIDs)x=h[g],y=a.GetAttributeByUniqueId(d,x);else{if(x=a.GetAttributeId(d,o[h[g]]),x===-1)continue;y=a.GetAttribute(d,x)}m.attributes.push(r(o,a,d,g,v,y))}return p===o.TRIANGULAR_MESH&&(m.index=i(o,a,d)),o.destroy(d),m}function i(o,a,l){const h=l.num_faces()*3,u=h*4,d=o._malloc(u);a.GetTrianglesUInt32Array(l,u,d);const f=new Uint32Array(o.HEAPF32.buffer,d,h).slice();return o._free(d),{array:f,itemSize:1}}function r(o,a,l,c,h,u){const d=u.num_components(),p=l.num_points()*d,m=p*h.BYTES_PER_ELEMENT,g=s(o,h),v=o._malloc(m);a.GetAttributeDataArrayForAllPoints(l,u,g,m,v);const y=new h(o.HEAPF32.buffer,v,p).slice();return o._free(v),{name:c,array:y,itemSize:d}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let OP;const h4=()=>{if(OP)return OP;const t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=t;WebAssembly.validate(n)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(u=>{s=u.instance,s.exports.__wasm_call_ctors()});function a(u){const d=new Uint8Array(u.length);for(let p=0;p<u.length;++p){const m=u.charCodeAt(p);d[p]=m>96?m-71:m>64?m-65:m>47?m+4:m>46?63:62}let f=0;for(let p=0;p<u.length;++p)d[f++]=d[p]<60?i[d[p]]:(d[p]-60)*64+d[++p];return d.buffer.slice(0,f)}function l(u,d,f,p,m,g){const v=s.exports.sbrk,y=f+3&-4,x=v(y*p),b=v(m.length),S=new Uint8Array(s.exports.memory.buffer);S.set(m,b);const A=u(x,f,p,b,m.length);if(A===0&&g&&g(x,y,p),d.set(S.subarray(x,x+f*p)),v(x-v(0)),A!==0)throw new Error(`Malformed buffer data: ${A}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return OP={ready:o,supported:!0,decodeVertexBuffer(u,d,f,p,m){l(s.exports.meshopt_decodeVertexBuffer,u,d,f,p,s.exports[c[m]])},decodeIndexBuffer(u,d,f,p){l(s.exports.meshopt_decodeIndexBuffer,u,d,f,p)},decodeIndexSequence(u,d,f,p){l(s.exports.meshopt_decodeIndexSequence,u,d,f,p)},decodeGltfBuffer(u,d,f,p,m,g){l(s.exports[h[m]],u,d,f,p,s.exports[c[g]])}},OP},pne=t=>t===Object(t)&&!Array.isArray(t)&&typeof t!="function";function tL(t,e){const n=S2(r=>r.gl),i=$u(Ow,pne(t)?Object.values(t):t);if(W.useLayoutEffect(()=>{e==null||e(i)},[e]),W.useEffect(()=>{(Array.isArray(i)?i:[i]).forEach(n.initTexture)},[n,i]),pne(t)){const r=Object.keys(t),s={};return r.forEach(o=>Object.assign(s,{[o]:i[r.indexOf(o)]})),s}else return i}tL.preload=t=>$u.preload(Ow,t);tL.clear=t=>$u.clear(Ow,t);function Brt(t){return Array.isArray(t)}function d4(t=[0,0,0]){return Brt(t)?t:t instanceof q||t instanceof Dc?[t.x,t.y,t.z]:[t,t,t]}const mne=W.forwardRef(function({debug:e,mesh:n,children:i,position:r,rotation:s,scale:o,...a},l){const c=W.useRef(null);W.useImperativeHandle(l,()=>c.current);const h=W.useRef(null);return W.useLayoutEffect(()=>{const u=(n==null?void 0:n.current)||c.current.parent,d=c.current;if(!(u instanceof Lr))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const f={position:new q,rotation:new Dc,scale:new q(1,1,1)};if(u){hf(f,{position:r,scale:o});const p=u.matrixWorld.clone();if(u.matrixWorld.identity(),!s||typeof s=="number"){const m=new wn;m.position.copy(f.position),m.lookAt(u.position),typeof s=="number"&&m.rotateZ(s),hf(f,{rotation:m.rotation})}else hf(f,{rotation:s});return d.geometry=new D7e(u,f.position,f.rotation,f.scale),h.current&&hf(h.current,f),u.matrixWorld=p,()=>{d.geometry.dispose()}}},[n,...d4(r),...d4(o),...d4(s)]),W.createElement("mesh",{ref:c},i||W.createElement("meshStandardMaterial",st({transparent:!0,polygonOffset:!0,polygonOffsetFactor:-10},a)),e&&W.createElement("mesh",{ref:h},W.createElement("boxGeometry",null),W.createElement("meshNormalMaterial",{wireframe:!0}),W.createElement("axesHelper",null)))});let LP=null;function iye(t,e,n){return i=>{n&&n(i),t&&(LP||(LP=new Rrt),LP.setDecoderPath(typeof t=="string"?t:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),i.setDRACOLoader(LP)),e&&i.setMeshoptDecoder(typeof h4=="function"?h4():h4)}}function _W(t,e=!0,n=!0,i){return $u(aW,t,iye(e,n,i))}_W.preload=(t,e=!0,n=!0,i)=>$u.preload(aW,t,iye(e,n,i));_W.clear=t=>$u.clear(aW,t);const krt=W.forwardRef(function({children:e,disable:n,disableX:i,disableY:r,disableZ:s,left:o,right:a,top:l,bottom:c,front:h,back:u,onCentered:d,precise:f=!0,...p},m){const g=W.useRef(null),v=W.useRef(null),y=W.useRef(null);return W.useLayoutEffect(()=>{v.current.matrixWorld.identity();const x=new ao().setFromObject(y.current,f),b=new q,S=new Oo,A=x.max.x-x.min.x,E=x.max.y-x.min.y,M=x.max.z-x.min.z;x.getCenter(b),x.getBoundingSphere(S);const C=l?E/2:c?-E/2:0,T=o?-A/2:a?A/2:0,D=h?M/2:u?-M/2:0;v.current.position.set(n||i?0:-b.x+T,n||r?0:-b.y+C,n||s?0:-b.z+D),typeof d<"u"&&d({parent:g.current.parent,container:g.current,width:A,height:E,depth:M,boundingBox:x,boundingSphere:S,center:b,verticalAlignment:C,horizontalAlignment:T,depthAlignment:D})}),W.useImperativeHandle(m,()=>g.current,[]),W.createElement("group",st({ref:g},p),W.createElement("group",{ref:v},W.createElement("group",{ref:y},e)))}),Frt=W.forwardRef(({children:t,speed:e=1,rotationIntensity:n=1,floatIntensity:i=1,floatingRange:r=[-.1,.1],...s},o)=>{const a=W.useRef(null),l=W.useRef(Math.random()*1e4);return YI(c=>{var h,u;const d=l.current+c.clock.getElapsedTime();a.current.rotation.x=Math.cos(d/4*e)/8*n,a.current.rotation.y=Math.sin(d/4*e)/8*n,a.current.rotation.z=Math.sin(d/4*e)/20*n;let f=Math.sin(d/4*e)/10;f=zi.mapLinear(f,-.1,.1,(h=r==null?void 0:r[0])!==null&&h!==void 0?h:-.1,(u=r==null?void 0:r[1])!==null&&u!==void 0?u:.1),a.current.position.y=f*i}),W.createElement("group",s,W.createElement("group",{ref:R$e([a,o])},t))}),f4={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},Nrt="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/";function rye({files:t=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:n=void 0,encoding:i=void 0,extensions:r}={}){if(n){if(!(n in f4))throw new Error("Preset must be one of: "+Object.keys(f4).join(", "));t=f4[n],e=Nrt}const s=Array.isArray(t),a=$u(s?_0e:Lrt,s?[t]:t,c=>{c.setPath(e),r&&r(c)}),l=s?a[0]:a;return l.mapping=s?ed:Ub,l.encoding=i??s?xn:Ra,l}const zrt=t=>t.current&&t.current.isScene,Urt=t=>zrt(t)?t.current:t;function SW(t,e,n,i,r=0){const s=Urt(e||n),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return t!=="only"&&(s.environment=i),t&&(s.background=i),t&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=r),()=>{t!=="only"&&(s.environment=a),t&&(s.background=o),t&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function AW({scene:t,background:e=!1,blur:n,map:i}){const r=S2(s=>s.scene);return W.useLayoutEffect(()=>{if(i)return SW(e,t,r,i,n)},[r,t,i,e,n]),null}function sye({background:t=!1,scene:e,blur:n,...i}){const r=rye(i),s=S2(o=>o.scene);return W.useLayoutEffect(()=>SW(t,e,s,r,n),[r,t,e,s,n]),null}function Grt({children:t,near:e=1,far:n=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,scene:l,files:c,path:h,preset:u=void 0,extensions:d}){const f=S2(x=>x.gl),p=S2(x=>x.scene),m=W.useRef(null),[g]=W.useState(()=>new Vb),v=W.useMemo(()=>{const x=new T9(i);return x.texture.type=vu,x},[i]);W.useLayoutEffect(()=>(r===1&&m.current.update(f,g),SW(o,l,p,v.texture,a)),[t,g,v.texture,l,p,o,r,f]);let y=1;return YI(()=>{(r===1/0||y<r)&&(m.current.update(f,g),y++)}),W.createElement(W.Fragment,null,zWe(W.createElement(W.Fragment,null,t,W.createElement("cubeCamera",{ref:m,args:[e,n,v]}),c||u?W.createElement(sye,{background:!0,files:c,preset:u,path:h,extensions:d}):s?W.createElement(AW,{background:!0,map:s,extensions:d}):null),g))}function Hrt(t){var e,n,i,r;const s=rye(t),o=t.map||s;W.useMemo(()=>H0e({GroundProjectedEnvImpl:e7e}),[]);const a=W.useMemo(()=>[o],[o]),l=(e=t.ground)==null?void 0:e.height,c=(n=t.ground)==null?void 0:n.radius,h=(i=(r=t.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return W.createElement(W.Fragment,null,W.createElement(AW,st({},t,{map:o})),W.createElement("groundProjectedEnvImpl",{args:a,scale:h,height:l,radius:c}))}function jrt(t){return t.ground?W.createElement(Hrt,t):t.map?W.createElement(AW,t):t.children?W.createElement(Grt,t):W.createElement(sye,t)}const Vrt="modulepreload",Wrt=function(t){return"/auction_house_project/"+t},gne={},Nw=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=Wrt(s),s in gne)return;gne[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let h=r.length-1;h>=0;h--){const u=r[h];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Vrt,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,u)=>{c.addEventListener("load",h),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};function oye(t,e=!1){const n=t[0].index!==null,i=new Set(Object.keys(t[0].attributes)),r=new Set(Object.keys(t[0].morphAttributes)),s={},o={},a=t[0].morphTargetsRelative,l=new yt;let c=0;for(let h=0;h<t.length;++h){const u=t[h];let d=0;if(n!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const f in u.attributes){if(!i.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;s[f]===void 0&&(s[f]=[]),s[f].push(u.attributes[f]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(a!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const f in u.morphAttributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(u.morphAttributes[f])}if(e){let f;if(n)f=u.index.count;else if(u.attributes.position!==void 0)f=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,f,h),c+=f}}if(n){let h=0;const u=[];for(let d=0;d<t.length;++d){const f=t[d].index;for(let p=0;p<f.count;++p)u.push(f.getX(p)+h);h+=t[d].attributes.position.count}l.setIndex(u)}for(const h in s){const u=vne(s[h]);if(!u)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" attribute."),null;l.setAttribute(h,u)}for(const h in o){const u=o[h][0].length;if(u===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[h]=[];for(let d=0;d<u;++d){const f=[];for(let m=0;m<o[h].length;++m)f.push(o[h][m][d]);const p=vne(f);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" morphAttribute."),null;l.morphAttributes[h].push(p)}}return l}function vne(t){let e,n,i,r=0;for(let a=0;a<t.length;++a){const l=t[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=l.array.constructor),e!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(n===void 0&&(n=l.itemSize),n!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=l.array.length}const s=new e(r);let o=0;for(let a=0;a<t.length;++a)s.set(t[a].array,o),o+=t[a].array.length;return new Nt(s,n,i)}function yne(t,e){if(e===Oge)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===Hb||e===II){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const i=n.count-2,r=[];if(e===Hb)for(let o=1;o<=i;o++)r.push(n.getX(0)),r.push(n.getX(o)),r.push(n.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(n.getX(o)),r.push(n.getX(o+1)),r.push(n.getX(o+2))):(r.push(n.getX(o+2)),r.push(n.getX(o+1)),r.push(n.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}const p4=new WeakMap;class $rt extends qs{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,i,r){const s=new js(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{this.parse(o,n,r)},i,r)}parse(e,n,i){this.decodeDracoFile(e,n,null,null,Ja).catch(i)}decodeDracoFile(e,n,i,r,s=yv){const o={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:s};return this.decodeGeometry(e,o).then(n)}decodeGeometry(e,n){const i=JSON.stringify(n);if(p4.has(e)){const l=p4.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,h)=>{r._callbacks[s]={resolve:c,reject:h},r.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),p4.set(e,{key:i,promise:a}),a}_createGeometry(e){const n=new yt;e.index&&n.setIndex(new Nt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize,l=new Nt(o,a);s==="color"&&this._assignVertexColorSpace(l,r.vertexColorSpace),n.setAttribute(s,l)}return n}_assignVertexColorSpace(e,n){if(n!==Ja)return;const i=new nt;for(let r=0,s=e.count;r<s;r++)i.fromBufferAttribute(e,r).convertSRGBToLinear(),e.setXYZ(r,i.r,i.g,i.b)}_loadLibrary(e,n){const i=new js(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=qrt.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=n,i._taskLoad+=n,i})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function qrt(){let t,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(h){t.onModuleLoaded=function(u){h({draco:u})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(h=>{const u=h.draco,d=new u.Decoder;try{const f=n(u,d,new Int8Array(l),c),p=f.attributes.map(m=>m.array.buffer);f.index&&p.push(f.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:f},p)}catch(f){console.error(f),self.postMessage({type:"error",id:a.id,error:f.message})}finally{u.destroy(d)}});break}};function n(o,a,l,c){const h=c.attributeIDs,u=c.attributeTypes;let d,f;const p=a.GetEncodedGeometryType(l);if(p===o.TRIANGULAR_MESH)d=new o.Mesh,f=a.DecodeArrayToMesh(l,l.byteLength,d);else if(p===o.POINT_CLOUD)d=new o.PointCloud,f=a.DecodeArrayToPointCloud(l,l.byteLength,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const m={index:null,attributes:[]};for(const g in h){const v=self[u[g]];let y,x;if(c.useUniqueIDs)x=h[g],y=a.GetAttributeByUniqueId(d,x);else{if(x=a.GetAttributeId(d,o[h[g]]),x===-1)continue;y=a.GetAttribute(d,x)}const b=r(o,a,d,g,v,y);g==="color"&&(b.vertexColorSpace=c.vertexColorSpace),m.attributes.push(b)}return p===o.TRIANGULAR_MESH&&(m.index=i(o,a,d)),o.destroy(d),m}function i(o,a,l){const h=l.num_faces()*3,u=h*4,d=o._malloc(u);a.GetTrianglesUInt32Array(l,u,d);const f=new Uint32Array(o.HEAPF32.buffer,d,h).slice();return o._free(d),{array:f,itemSize:1}}function r(o,a,l,c,h,u){const d=u.num_components(),p=l.num_points()*d,m=p*h.BYTES_PER_ELEMENT,g=s(o,h),v=o._malloc(m);a.GetAttributeDataArrayForAllPoints(l,u,g,m,v);const y=new h(o.HEAPF32.buffer,v,p).slice();return o._free(v),{name:c,array:y,itemSize:d}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var Xrt=Object.create,MW=Object.defineProperty,Yrt=Object.getOwnPropertyDescriptor,Krt=Object.getOwnPropertyNames,Jrt=Object.getPrototypeOf,Zrt=Object.prototype.hasOwnProperty,sB=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Qrt=(t,e)=>{for(var n in e)MW(t,n,{get:e[n],enumerable:!0})},est=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Krt(e))!Zrt.call(t,r)&&r!==n&&MW(t,r,{get:()=>e[r],enumerable:!(i=Yrt(e,r))||i.enumerable});return t},oB=(t,e,n)=>(n=t!=null?Xrt(Jrt(t)):{},est(e||!t||!t.__esModule?MW(n,"default",{value:t,enumerable:!0}):n,t)),tst=sB((t,e)=>{(function(n,i){typeof t=="object"?e.exports=i():typeof define=="function"&&define.amd?define(i):n.Alea=i()})(t,function(){return n.importState=function(r){var s=new n;return s.importState(r),s},n;function n(){return function(r){var s=0,o=0,a=0,l=1;r.length==0&&(r=[+new Date]);var c=i();s=c(" "),o=c(" "),a=c(" ");for(var h=0;h<r.length;h++)s-=c(r[h]),s<0&&(s+=1),o-=c(r[h]),o<0&&(o+=1),a-=c(r[h]),a<0&&(a+=1);c=null;var u=function(){var d=2091639*s+l*23283064365386963e-26;return s=o,o=a,a=d-(l=d|0)};return u.next=u,u.uint32=function(){return u()*4294967296},u.fract53=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.version="Alea 0.9",u.args=r,u.exportState=function(){return[s,o,a,l]},u.importState=function(d){s=+d[0]||0,o=+d[1]||0,a=+d[2]||0,l=+d[3]||0},u}(Array.prototype.slice.call(arguments))}function i(){var r=4022871197,s=function(o){o=o.toString();for(var a=0;a<o.length;a++){r+=o.charCodeAt(a);var l=.02519603282416938*r;r=l>>>0,l-=r,l*=r,r=l>>>0,l-=r,r+=l*4294967296}return(r>>>0)*23283064365386963e-26};return s.version="Mash 0.9",s}})}),nst=sB((t,e)=>{(function(n,i){typeof t=="object"&&typeof e<"u"?i(t):typeof define=="function"&&define.amd?define(["exports"],i):i((n=typeof globalThis<"u"?globalThis:n||self).SVDJS={})})(t,function(n){n.SVD=function(i,r,s,o,a){if(r=r===void 0||r,s=s===void 0||s,a=1e-64/(o=o||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,c,h,u,d,f,p,m,g,v,y,x,b=i[0].length,S=i.length;if(S<b)throw new TypeError("Invalid matrix: m < n");for(var A=[],E=[],M=[],C=r==="f"?S:b,T=v=p=0;T<S;T++)E[T]=new Array(C).fill(0);for(T=0;T<b;T++)M[T]=new Array(b).fill(0);var D,L=new Array(b).fill(0);for(T=0;T<S;T++)for(l=0;l<b;l++)E[T][l]=i[T][l];for(T=0;T<b;T++){for(A[T]=p,g=0,h=T+1,l=T;l<S;l++)g+=Math.pow(E[l][T],2);if(g<a)p=0;else for(m=(f=E[T][T])*(p=f<0?Math.sqrt(g):-Math.sqrt(g))-g,E[T][T]=f-p,l=h;l<b;l++){for(g=0,c=T;c<S;c++)g+=E[c][T]*E[c][l];for(f=g/m,c=T;c<S;c++)E[c][l]=E[c][l]+f*E[c][T]}for(L[T]=p,g=0,l=h;l<b;l++)g+=Math.pow(E[T][l],2);if(g<a)p=0;else{for(m=(f=E[T][T+1])*(p=f<0?Math.sqrt(g):-Math.sqrt(g))-g,E[T][T+1]=f-p,l=h;l<b;l++)A[l]=E[T][l]/m;for(l=h;l<S;l++){for(g=0,c=h;c<b;c++)g+=E[l][c]*E[T][c];for(c=h;c<b;c++)E[l][c]=E[l][c]+g*A[c]}}v<(y=Math.abs(L[T])+Math.abs(A[T]))&&(v=y)}if(s)for(T=b-1;0<=T;T--){if(p!==0){for(m=E[T][T+1]*p,l=h;l<b;l++)M[l][T]=E[T][l]/m;for(l=h;l<b;l++){for(g=0,c=h;c<b;c++)g+=E[T][c]*M[c][l];for(c=h;c<b;c++)M[c][l]=M[c][l]+g*M[c][T]}}for(l=h;l<b;l++)M[T][l]=0,M[l][T]=0;M[T][T]=1,p=A[T],h=T}if(r){if(r==="f")for(T=b;T<S;T++){for(l=b;l<S;l++)E[T][l]=0;E[T][T]=1}for(T=b-1;0<=T;T--){for(h=T+1,p=L[T],l=h;l<C;l++)E[T][l]=0;if(p!==0){for(m=E[T][T]*p,l=h;l<C;l++){for(g=0,c=h;c<S;c++)g+=E[c][T]*E[c][l];for(f=g/m,c=T;c<S;c++)E[c][l]=E[c][l]+f*E[c][T]}for(l=T;l<S;l++)E[l][T]=E[l][T]/p}else for(l=T;l<S;l++)E[l][T]=0;E[T][T]=E[T][T]+1}}for(o*=v,c=b-1;0<=c;c--)for(var I=0;I<50;I++){for(D=!1,h=c;0<=h;h--){if(Math.abs(A[h])<=o){D=!0;break}if(Math.abs(L[h-1])<=o)break}if(!D){for(d=0,u=h-(g=1),T=h;T<c+1&&(f=g*A[T],A[T]=d*A[T],!(Math.abs(f)<=o));T++)if(p=L[T],L[T]=Math.sqrt(f*f+p*p),d=p/(m=L[T]),g=-f/m,r)for(l=0;l<S;l++)y=E[l][u],x=E[l][T],E[l][u]=y*d+x*g,E[l][T]=-y*g+x*d}if(x=L[c],h===c){if(x<0&&(L[c]=-x,s))for(l=0;l<b;l++)M[l][c]=-M[l][c];break}for(v=L[h],f=(((y=L[c-1])-x)*(y+x)+((p=A[c-1])-(m=A[c]))*(p+m))/(2*m*y),p=Math.sqrt(f*f+1),f=((v-x)*(v+x)+m*(y/(f<0?f-p:f+p)-m))/v,T=h+(g=d=1);T<c+1;T++){if(p=A[T],y=L[T],m=g*p,p*=d,x=Math.sqrt(f*f+m*m),f=v*(d=f/(A[T-1]=x))+p*(g=m/x),p=-v*g+p*d,m=y*g,y*=d,s)for(l=0;l<b;l++)v=M[l][T-1],x=M[l][T],M[l][T-1]=v*d+x*g,M[l][T]=-v*g+x*d;if(x=Math.sqrt(f*f+m*m),f=(d=f/(L[T-1]=x))*p+(g=m/x)*y,v=-g*p+d*y,r)for(l=0;l<S;l++)y=E[l][T-1],x=E[l][T],E[l][T-1]=y*d+x*g,E[l][T]=-y*g+x*d}A[h]=0,A[c]=f,L[c]=v}for(T=0;T<b;T++)L[T]<o&&(L[T]=0);return{u:E,q:L,v:M}},n.VERSION="1.1.1",Object.defineProperty(n,"__esModule",{value:!0})})}),ist=sB(t=>{(function(){var e=function(){this.init()};e.prototype={init:function(){var u=this||n;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var d=this||n;if(u=parseFloat(u),d.ctx||h(),typeof u<"u"&&u>=0&&u<=1){if(d._volume=u,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u,n.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),m=0;m<p.length;m++){var g=d._howls[f]._soundById(p[m]);g&&g._node&&(g._node.volume=g._volume*u)}return d}return d._volume},mute:function(u){var d=this||n;d.ctx||h(),d._muted=u,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u?0:d._volume,n.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),m=0;m<p.length;m++){var g=d._howls[f]._soundById(p[m]);g&&g._node&&(g._node.muted=u?!0:g._muted)}return d},stop:function(){for(var u=this||n,d=0;d<u._howls.length;d++)u._howls[d].stop();return u},unload:function(){for(var u=this||n,d=u._howls.length-1;d>=0;d--)u._howls[d].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,h()),u},codecs:function(u){return(this||n)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||n;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var d=new Audio;d.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||n,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return u}if(!d||typeof d.canPlayType!="function")return u;var f=d.canPlayType("audio/mpeg;").replace(/^no$/,""),p=u._navigator?u._navigator.userAgent:"",m=p.match(/OPR\/([0-6].)/g),g=m&&parseInt(m[0].split("/")[1],10)<33,v=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,y=p.match(/Version\/(.*?) /),x=v&&y&&parseInt(y[1],10)<15;return u._codecs={mp3:!!(!g&&(f||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||n;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var d=function(f){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,u._releaseHtml5Audio(p)}catch{u.noAudio=!0;break}for(var m=0;m<u._howls.length;m++)if(!u._howls[m]._webAudio)for(var g=u._howls[m]._getSoundIds(),v=0;v<g.length;v++){var y=u._howls[m]._soundById(g[v]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}u._autoResume();var x=u.ctx.createBufferSource();x.buffer=u._scratchBuffer,x.connect(u.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),x.onended=function(){x.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var b=0;b<u._howls.length;b++)u._howls[b]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),u}},_obtainHtml5Audio:function(){var u=this||n;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var d=this||n;return u._unlocked&&d._html5AudioPool.push(u),d},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!n.usingWebAudio)){for(var d=0;d<u._howls.length;d++)if(u._howls[d]._webAudio){for(var f=0;f<u._howls[d]._sounds.length;f++)if(!u._howls[d]._sounds[f]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var p=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(p,p)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!n.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var d=0;d<u._howls.length;d++)u._howls[d]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var n=new e,i=function(u){var d=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(u)};i.prototype={init:function(u){var d=this;return n.ctx||h(),d._autoplay=u.autoplay||!1,d._format=typeof u.format!="string"?u.format:[u.format],d._html5=u.html5||!1,d._muted=u.mute||!1,d._loop=u.loop||!1,d._pool=u.pool||5,d._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,d._rate=u.rate||1,d._sprite=u.sprite||{},d._src=typeof u.src!="string"?u.src:[u.src],d._volume=u.volume!==void 0?u.volume:1,d._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=u.onend?[{fn:u.onend}]:[],d._onfade=u.onfade?[{fn:u.onfade}]:[],d._onload=u.onload?[{fn:u.onload}]:[],d._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],d._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],d._onpause=u.onpause?[{fn:u.onpause}]:[],d._onplay=u.onplay?[{fn:u.onplay}]:[],d._onstop=u.onstop?[{fn:u.onstop}]:[],d._onmute=u.onmute?[{fn:u.onmute}]:[],d._onvolume=u.onvolume?[{fn:u.onvolume}]:[],d._onrate=u.onrate?[{fn:u.onrate}]:[],d._onseek=u.onseek?[{fn:u.onseek}]:[],d._onunlock=u.onunlock?[{fn:u.onunlock}]:[],d._onresume=[],d._webAudio=n.usingWebAudio&&!d._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var u=this,d=null;if(n.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var f=0;f<u._src.length;f++){var p,m;if(u._format&&u._format[f])p=u._format[f];else{if(m=u._src[f],typeof m!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(m),p||(p=/\.([^.]+)$/.exec(m.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&n.codecs(p)){d=u._src[f];break}}if(!d){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=d,u._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new r(u),u._webAudio&&o(u),u},play:function(u,d){var f=this,p=null;if(typeof u=="number")p=u,u=null;else{if(typeof u=="string"&&f._state==="loaded"&&!f._sprite[u])return null;if(typeof u>"u"&&(u="__default",!f._playLock)){for(var m=0,g=0;g<f._sounds.length;g++)f._sounds[g]._paused&&!f._sounds[g]._ended&&(m++,p=f._sounds[g]._id);m===1?u=null:p=null}}var v=p?f._soundById(p):f._inactiveSound();if(!v)return null;if(p&&!u&&(u=v._sprite||"__default"),f._state!=="loaded"){v._sprite=u,v._ended=!1;var y=v._id;return f._queue.push({event:"play",action:function(){f.play(y)}}),y}if(p&&!v._paused)return d||f._loadQueue("play"),v._id;f._webAudio&&n._autoResume();var x=Math.max(0,v._seek>0?v._seek:f._sprite[u][0]/1e3),b=Math.max(0,(f._sprite[u][0]+f._sprite[u][1])/1e3-x),S=b*1e3/Math.abs(v._rate),A=f._sprite[u][0]/1e3,E=(f._sprite[u][0]+f._sprite[u][1])/1e3;v._sprite=u,v._ended=!1;var M=function(){v._paused=!1,v._seek=x,v._start=A,v._stop=E,v._loop=!!(v._loop||f._sprite[u][2])};if(x>=E){f._ended(v);return}var C=v._node;if(f._webAudio){var T=function(){f._playLock=!1,M(),f._refreshBuffer(v);var R=v._muted||f._muted?0:v._volume;C.gain.setValueAtTime(R,n.ctx.currentTime),v._playStart=n.ctx.currentTime,typeof C.bufferSource.start>"u"?v._loop?C.bufferSource.noteGrainOn(0,x,86400):C.bufferSource.noteGrainOn(0,x,b):v._loop?C.bufferSource.start(0,x,86400):C.bufferSource.start(0,x,b),S!==1/0&&(f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),S)),d||setTimeout(function(){f._emit("play",v._id),f._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?T():(f._playLock=!0,f.once("resume",T),f._clearTimer(v._id))}else{var D=function(){C.currentTime=x,C.muted=v._muted||f._muted||n._muted||C.muted,C.volume=v._volume*n.volume(),C.playbackRate=v._rate;try{var R=C.play();if(R&&typeof Promise<"u"&&(R instanceof Promise||typeof R.then=="function")?(f._playLock=!0,M(),R.then(function(){f._playLock=!1,C._unlocked=!0,d?f._loadQueue():f._emit("play",v._id)}).catch(function(){f._playLock=!1,f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):d||(f._playLock=!1,M(),f._emit("play",v._id)),C.playbackRate=v._rate,C.paused){f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||v._loop?f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),S):(f._endTimers[v._id]=function(){f._ended(v),C.removeEventListener("ended",f._endTimers[v._id],!1)},C.addEventListener("ended",f._endTimers[v._id],!1))}catch(H){f._emit("playerror",v._id,H)}};C.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(C.src=f._src,C.load());var L=window&&window.ejecta||!C.readyState&&n._navigator.isCocoonJS;if(C.readyState>=3||L)D();else{f._playLock=!0,f._state="loading";var I=function(){f._state="loaded",D(),C.removeEventListener(n._canPlayEvent,I,!1)};C.addEventListener(n._canPlayEvent,I,!1),f._clearTimer(v._id)}}return v._id},pause:function(u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(u)}}),d;for(var f=d._getSoundIds(u),p=0;p<f.length;p++){d._clearTimer(f[p]);var m=d._soundById(f[p]);if(m&&!m._paused&&(m._seek=d.seek(f[p]),m._rateSeek=0,m._paused=!0,d._stopFade(f[p]),m._node))if(d._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),d._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||d._emit("pause",m?m._id:null)}return d},stop:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(u)}}),f;for(var p=f._getSoundIds(u),m=0;m<p.length;m++){f._clearTimer(p[m]);var g=f._soundById(p[m]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,f._stopFade(p[m]),g._node&&(f._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),f._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&f._clearSound(g._node))),d||f._emit("stop",g._id))}return f},mute:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(u,d)}}),f;if(typeof d>"u")if(typeof u=="boolean")f._muted=u;else return f._muted;for(var p=f._getSoundIds(d),m=0;m<p.length;m++){var g=f._soundById(p[m]);g&&(g._muted=u,g._interval&&f._stopFade(g._id),f._webAudio&&g._node?g._node.gain.setValueAtTime(u?0:g._volume,n.ctx.currentTime):g._node&&(g._node.muted=n._muted?!0:u),f._emit("mute",g._id))}return f},volume:function(){var u=this,d=arguments,f,p;if(d.length===0)return u._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length>=2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var v;if(typeof f<"u"&&f>=0&&f<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,d)}}),u;typeof p>"u"&&(u._volume=f),p=u._getSoundIds(p);for(var y=0;y<p.length;y++)v=u._soundById(p[y]),v&&(v._volume=f,d[2]||u._stopFade(p[y]),u._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(f,n.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=f*n.volume()),u._emit("volume",v._id))}else return v=p?u._soundById(p):u._sounds[0],v?v._volume:0;return u},fade:function(u,d,f,p){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(u,d,f,p)}}),m;u=Math.min(Math.max(0,parseFloat(u)),1),d=Math.min(Math.max(0,parseFloat(d)),1),f=parseFloat(f),m.volume(u,p);for(var g=m._getSoundIds(p),v=0;v<g.length;v++){var y=m._soundById(g[v]);if(y){if(p||m._stopFade(g[v]),m._webAudio&&!y._muted){var x=n.ctx.currentTime,b=x+f/1e3;y._volume=u,y._node.gain.setValueAtTime(u,x),y._node.gain.linearRampToValueAtTime(d,b)}m._startFadeInterval(y,u,d,f,g[v],typeof p>"u")}}return m},_startFadeInterval:function(u,d,f,p,m,g){var v=this,y=d,x=f-d,b=Math.abs(x/.01),S=Math.max(4,b>0?p/b:p),A=Date.now();u._fadeTo=f,u._interval=setInterval(function(){var E=(Date.now()-A)/p;A=Date.now(),y+=x*E,y=Math.round(y*100)/100,x<0?y=Math.max(f,y):y=Math.min(f,y),v._webAudio?u._volume=y:v.volume(y,u._id,!0),g&&(v._volume=y),(f<d&&y<=f||f>d&&y>=f)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,v.volume(f,u._id),v._emit("fade",u._id))},S)},_stopFade:function(u){var d=this,f=d._soundById(u);return f&&f._interval&&(d._webAudio&&f._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(f._interval),f._interval=null,d.volume(f._fadeTo,u),f._fadeTo=null,d._emit("fade",u)),d},loop:function(){var u=this,d=arguments,f,p,m;if(d.length===0)return u._loop;if(d.length===1)if(typeof d[0]=="boolean")f=d[0],u._loop=f;else return m=u._soundById(parseInt(d[0],10)),m?m._loop:!1;else d.length===2&&(f=d[0],p=parseInt(d[1],10));for(var g=u._getSoundIds(p),v=0;v<g.length;v++)m=u._soundById(g[v]),m&&(m._loop=f,u._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=f,f&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,u.playing(g[v])&&(u.pause(g[v],!0),u.play(g[v],!0)))));return u},rate:function(){var u=this,d=arguments,f,p;if(d.length===0)p=u._sounds[0]._id;else if(d.length===1){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var v;if(typeof f=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,d)}}),u;typeof p>"u"&&(u._rate=f),p=u._getSoundIds(p);for(var y=0;y<p.length;y++)if(v=u._soundById(p[y]),v){u.playing(p[y])&&(v._rateSeek=u.seek(p[y]),v._playStart=u._webAudio?n.ctx.currentTime:v._playStart),v._rate=f,u._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(f,n.ctx.currentTime):v._node&&(v._node.playbackRate=f);var x=u.seek(p[y]),b=(u._sprite[v._sprite][0]+u._sprite[v._sprite][1])/1e3-x,S=b*1e3/Math.abs(v._rate);(u._endTimers[p[y]]||!v._paused)&&(u._clearTimer(p[y]),u._endTimers[p[y]]=setTimeout(u._ended.bind(u,v),S)),u._emit("rate",v._id)}}else return v=u._soundById(p),v?v._rate:u._rate;return u},seek:function(){var u=this,d=arguments,f,p;if(d.length===0)u._sounds.length&&(p=u._sounds[0]._id);else if(d.length===1){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?p=parseInt(d[0],10):u._sounds.length&&(p=u._sounds[0]._id,f=parseFloat(d[0]))}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));if(typeof p>"u")return 0;if(typeof f=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,d)}}),u;var v=u._soundById(p);if(v)if(typeof f=="number"&&f>=0){var y=u.playing(p);y&&u.pause(p,!0),v._seek=f,v._ended=!1,u._clearTimer(p),!u._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=f);var x=function(){y&&u.play(p,!0),u._emit("seek",p)};if(y&&!u._webAudio){var b=function(){u._playLock?setTimeout(b,0):x()};setTimeout(b,0)}else x()}else if(u._webAudio){var S=u.playing(p)?n.ctx.currentTime-v._playStart:0,A=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(A+S*Math.abs(v._rate))}else return v._node.currentTime;return u},playing:function(u){var d=this;if(typeof u=="number"){var f=d._soundById(u);return f?!f._paused:!1}for(var p=0;p<d._sounds.length;p++)if(!d._sounds[p]._paused)return!0;return!1},duration:function(u){var d=this,f=d._duration,p=d._soundById(u);return p&&(f=d._sprite[p._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var u=this,d=u._sounds,f=0;f<d.length;f++)d[f]._paused||u.stop(d[f]._id),u._webAudio||(u._clearSound(d[f]._node),d[f]._node.removeEventListener("error",d[f]._errorFn,!1),d[f]._node.removeEventListener(n._canPlayEvent,d[f]._loadFn,!1),d[f]._node.removeEventListener("ended",d[f]._endFn,!1),n._releaseHtml5Audio(d[f]._node)),delete d[f]._node,u._clearTimer(d[f]._id);var p=n._howls.indexOf(u);p>=0&&n._howls.splice(p,1);var m=!0;for(f=0;f<n._howls.length;f++)if(n._howls[f]._src===u._src||u._src.indexOf(n._howls[f]._src)>=0){m=!1;break}return s&&m&&delete s[u._src],n.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,d,f,p){var m=this,g=m["_on"+u];return typeof d=="function"&&g.push(p?{id:f,fn:d,once:p}:{id:f,fn:d}),m},off:function(u,d,f){var p=this,m=p["_on"+u],g=0;if(typeof d=="number"&&(f=d,d=null),d||f)for(g=0;g<m.length;g++){var v=f===m[g].id;if(d===m[g].fn&&v||!d&&v){m.splice(g,1);break}}else if(u)p["_on"+u]=[];else{var y=Object.keys(p);for(g=0;g<y.length;g++)y[g].indexOf("_on")===0&&Array.isArray(p[y[g]])&&(p[y[g]]=[])}return p},once:function(u,d,f){var p=this;return p.on(u,d,f,1),p},_emit:function(u,d,f){for(var p=this,m=p["_on"+u],g=m.length-1;g>=0;g--)(!m[g].id||m[g].id===d||u==="load")&&(setTimeout(function(v){v.call(this,d,f)}.bind(p,m[g].fn),0),m[g].once&&p.off(u,m[g].fn,m[g].id));return p._loadQueue(u),p},_loadQueue:function(u){var d=this;if(d._queue.length>0){var f=d._queue[0];f.event===u&&(d._queue.shift(),d._loadQueue()),u||f.action()}return d},_ended:function(u){var d=this,f=u._sprite;if(!d._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(d._ended.bind(d,u),100),d;var p=!!(u._loop||d._sprite[f][2]);if(d._emit("end",u._id),!d._webAudio&&p&&d.stop(u._id,!0).play(u._id),d._webAudio&&p){d._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=n.ctx.currentTime;var m=(u._stop-u._start)*1e3/Math.abs(u._rate);d._endTimers[u._id]=setTimeout(d._ended.bind(d,u),m)}return d._webAudio&&!p&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,d._clearTimer(u._id),d._cleanBuffer(u._node),n._autoSuspend()),!d._webAudio&&!p&&d.stop(u._id,!0),d},_clearTimer:function(u){var d=this;if(d._endTimers[u]){if(typeof d._endTimers[u]!="function")clearTimeout(d._endTimers[u]);else{var f=d._soundById(u);f&&f._node&&f._node.removeEventListener("ended",d._endTimers[u],!1)}delete d._endTimers[u]}return d},_soundById:function(u){for(var d=this,f=0;f<d._sounds.length;f++)if(u===d._sounds[f]._id)return d._sounds[f];return null},_inactiveSound:function(){var u=this;u._drain();for(var d=0;d<u._sounds.length;d++)if(u._sounds[d]._ended)return u._sounds[d].reset();return new r(u)},_drain:function(){var u=this,d=u._pool,f=0,p=0;if(!(u._sounds.length<d)){for(p=0;p<u._sounds.length;p++)u._sounds[p]._ended&&f++;for(p=u._sounds.length-1;p>=0;p--){if(f<=d)return;u._sounds[p]._ended&&(u._webAudio&&u._sounds[p]._node&&u._sounds[p]._node.disconnect(0),u._sounds.splice(p,1),f--)}}},_getSoundIds:function(u){var d=this;if(typeof u>"u"){for(var f=[],p=0;p<d._sounds.length;p++)f.push(d._sounds[p]._id);return f}else return[u]},_refreshBuffer:function(u){var d=this;return u._node.bufferSource=n.ctx.createBufferSource(),u._node.bufferSource.buffer=s[d._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,n.ctx.currentTime),d},_cleanBuffer:function(u){var d=this,f=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),f))try{u.bufferSource.buffer=n._scratchBuffer}catch{}return u.bufferSource=null,d},_clearSound:function(u){var d=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);d||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(u){this._parent=u,this.init()};r.prototype={init:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,d._sounds.push(u),u.create(),u},create:function(){var u=this,d=u._parent,f=n._muted||u._muted||u._parent._muted?0:u._volume;return d._webAudio?(u._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),u._node.gain.setValueAtTime(f,n.ctx.currentTime),u._node.paused=!0,u._node.connect(n.masterGain)):n.noAudio||(u._node=n._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(n._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=d._src,u._node.preload=d._preload===!0?"auto":d._preload,u._node.volume=f*n.volume(),u._node.load()),u},reset:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,d=u._parent;d._duration=Math.ceil(u._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),u._node.removeEventListener(n._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,d=u._parent;d._duration===1/0&&(d._duration=Math.ceil(u._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},o=function(u){var d=u._src;if(s[d]){u._duration=s[d].duration,c(u);return}if(/^data:[^;]+;base64,/.test(d)){for(var f=atob(d.split(",")[1]),p=new Uint8Array(f.length),m=0;m<f.length;++m)p[m]=f.charCodeAt(m);l(p.buffer,u)}else{var g=new XMLHttpRequest;g.open(u._xhr.method,d,!0),g.withCredentials=u._xhr.withCredentials,g.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(v){g.setRequestHeader(v,u._xhr.headers[v])}),g.onload=function(){var v=(g.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,u)},g.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[d],u.load())},a(g)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,d){var f=function(){d._emit("loaderror",null,"Decoding audio data failed.")},p=function(m){m&&d._sounds.length>0?(s[d._src]=m,c(d,m)):f()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(u).then(p).catch(f):n.ctx.decodeAudioData(u,p,f)},c=function(u,d){d&&!u._duration&&(u._duration=d.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},h=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),d=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=d?parseInt(d[1],10):null;if(u&&f&&f<9){var p=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!p&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:n,Howl:i}}),typeof t<"u"&&(t.Howler=n,t.Howl=i),typeof global<"u"?(global.HowlerGlobal=e,global.Howler=n,global.Howl=i,global.Sound=r):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=i,window.Sound=r)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var r=i._howls.length-1;r>=0;r--)i._howls[r].stereo(n);return i},HowlerGlobal.prototype.pos=function(n,i,r){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(i=typeof i!="number"?s._pos[1]:i,r=typeof r!="number"?s._pos[2]:r,typeof n=="number")s._pos=[n,i,r],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(n,i,r,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(i=typeof i!="number"?c[1]:i,r=typeof r!="number"?c[2]:r,s=typeof s!="number"?c[3]:s,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof n=="number")l._orientation=[n,i,r,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(n,i,r,s,o,a);else return c;return l},Howl.prototype.init=function(n){return function(i){var r=this;return r._orientation=i.orientation||[1,0,0],r._stereo=i.stereo||null,r._pos=i.pos||null,r._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},r._onstereo=i.onstereo?[{fn:i.onstereo}]:[],r._onpos=i.onpos?[{fn:i.onpos}]:[],r._onorientation=i.onorientation?[{fn:i.onorientation}]:[],n.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,i){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"stereo",action:function(){r.stereo(n,i)}}),r;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof n=="number")r._stereo=n,r._pos=[n,0,0];else return r._stereo;for(var o=r._getSoundIds(i),a=0;a<o.length;a++){var l=r._soundById(o[a]);if(l)if(typeof n=="number")l._stereo=n,l._pos=[n,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(n,0,0):l._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),r._emit("stereo",l._id);else return l._stereo}return r},Howl.prototype.pos=function(n,i,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,i,r,s)}}),o;if(i=typeof i!="number"?0:i,r=typeof r!="number"?-.5:r,typeof s>"u")if(typeof n=="number")o._pos=[n,i,r];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._pos=[n,i,r],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setPosition(n,i,r)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(n,i,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,i,r,s)}}),o;if(i=typeof i!="number"?o._orientation[1]:i,r=typeof r!="number"?o._orientation[2]:r,typeof s>"u")if(typeof n=="number")o._orientation=[n,i,r];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._orientation=[n,i,r],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setOrientation(n,i,r)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,i=arguments,r,s,o;if(!n._webAudio)return n;if(i.length===0)return n._pannerAttr;if(i.length===1)if(typeof i[0]=="object")r=i[0],typeof s>"u"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),n._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle<"u"?r.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle<"u"?r.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain<"u"?r.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel<"u"?r.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance<"u"?r.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof r.pannerAttr.refDistance<"u"?r.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor<"u"?r.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel<"u"?r.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(i[0],10)),o?o._pannerAttr:n._pannerAttr;else i.length===2&&(r=i[0],s=parseInt(i[1],10));for(var a=n._getSoundIds(s),l=0;l<a.length;l++)if(o=n._soundById(a[l]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:c.coneOuterGain,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:c.distanceModel,maxDistance:typeof r.maxDistance<"u"?r.maxDistance:c.maxDistance,refDistance:typeof r.refDistance<"u"?r.refDistance:c.refDistance,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:c.rolloffFactor,panningModel:typeof r.panningModel<"u"?r.panningModel:c.panningModel};var h=o._panner;h?(h.coneInnerAngle=c.coneInnerAngle,h.coneOuterAngle=c.coneOuterAngle,h.coneOuterGain=c.coneOuterGain,h.distanceModel=c.distanceModel,h.maxDistance=c.maxDistance,h.refDistance=c.refDistance,h.rolloffFactor=c.rolloffFactor,h.panningModel=c.panningModel):(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"))}return n},Sound.prototype.init=function(n){return function(){var i=this,r=i._parent;i._orientation=r._orientation,i._stereo=r._stereo,i._pos=r._pos,i._pannerAttr=r._pannerAttr,n.call(this),i._stereo?r.stereo(i._stereo):i._pos&&r.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var i=this,r=i._parent;return i._orientation=r._orientation,i._stereo=r._stereo,i._pos=r._pos,i._pannerAttr=r._pannerAttr,i._stereo?r.stereo(i._stereo):i._pos?r.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,r._refreshBuffer(i)),n.call(this)}}(Sound.prototype.reset);var e=function(n,i){i=i||"spatial",i==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}}()}),rst=sB((t,e)=>{e.exports=function(n,i){for(var r=n.split("."),s=i.split("."),o=0;o<3;o++){var a=Number(r[o]),l=Number(s[o]);if(a>l)return 1;if(l>a)return-1;if(!isNaN(a)&&isNaN(l))return 1;if(isNaN(a)&&!isNaN(l))return-1}return 0}}),ns=class{modifyById(t,e){let n=this;if(n[t]===void 0)throw new Error("not expected");{let i={...n,[t]:e};return Object.setPrototypeOf(i,ns.prototype),i}}add(t,e){var n;return((n=this.runOp({type:1,id:t,data:e}))==null?void 0:n.data)??this}runOp(t){let e=this;if(t.type===1){let n=e[t.id],i;n===void 0?i={type:2,id:t.id}:i={type:1,id:t.id,data:n};let{id:r,data:s}=t,o={...e,[r]:s};return Object.setPrototypeOf(o,ns.prototype),{data:o,actual:t,reverse:i}}else if(t.type===2){let{id:n}=t,i=e[n];if(i===void 0)return null;{let r={...e};return Object.setPrototypeOf(r,ns.prototype),delete r[n],{data:r,actual:t,reverse:{type:1,id:n,data:i}}}}return null}};function EW(t){if(t.deepFreeze!==void 0){t.deepFreeze(t);return}let e=Object.getOwnPropertyNames(t);for(let n of e){let i=t[n];i&&typeof i=="object"&&EW(i)}return Object.freeze(t)}function sst(t,e){let n=0;for(;n<t.length&&n<e.length;){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1;n+=1}return n!==e.length?-1:n!==t.length?1:0}var aye=class extends Error{};function m4(t){let e={...t};return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),e}function im(t,e,n){if(t===void 0?e===void 0?(t=0,e=10):t=e-10:e===void 0&&(e=t+10),t>e){let s=t;t=e,e=s}let i=[],r=1/(n+1);for(let s=0;s<n;s++){let o=t+(e-t)*(s+.75+Math.random()*.5)*r;i.push(o)}return i}function CW(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array}function ost(){return typeof process<"u"}function lye(t,e){for(let n of t)e(n.id,n.data)!==!0&&lye(n.children,e)}function cye(t,e){if(e(t.id,t.data)!==!0)for(let n of t.children)cye(n,e)}var Ou=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ou.prototype)}deepFreeze(){let e=0;for(;e<this.length;)EW(this[e]),e++}fillCaches0(e,n){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,n);for(let i of e.children)this.fillCaches0(i,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,n){if(!this.has(e))return!0;for(;e;){let i=this.parent(e);if(i===n)return!0;e=i}return!1}isDescendantOf(e,n){for(;e;){let i=this.parent(e);if(i===n)return!0;e=i}return!1}data(e){var n;return(n=this.get(e))==null?void 0:n.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var n;return e===null?this:(n=this.get(e))==null?void 0:n.children}traverseFrom(e,n){if(e===null)this.traverse(n);else{let i=this.get(e);i&&cye(i,n)}}traverse(e){lye(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,n){if(this.get(e)===void 0)throw new Error("not expected");{let i=this.parent(e),r=this.childrenArray(i),s=r.findIndex(a=>a.id===e);if(s<0)throw new Error("not expected");let o=r[s];return r=[...r],r[s]={...o,data:n},this.modifyArrayBy(i,r)}}modifyArrayBy(e,n){let i=e,r=n;for(;i!==null;){let o=r,a=i;if(i=this.parent(i),i===void 0)throw new Error;r=this.childrenArray(i);let l=r.findIndex(c=>c.id===a);if(l<0)throw new Error;r=[...r],r[l]={...r[l],children:o}}Object.setPrototypeOf(r,Ou.prototype);let s=r;return s.fillCaches(),s}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:n}){if(this.get(e)!==void 0)return!0;for(let i of n)if(this.checkDuplicatedIdRec(i))return!0;return!1}addOp(e){let{parent:n,fi:i,id:r,data:s,children:o}=e;if(n!==null&&this.get(n)===void 0||this.checkDuplicatedIdRec(e))return null;{let a=n,l=this.childrenArray(a),c={fi:i,id:r,data:s,children:o};return l=[...l,c],l.sort((h,u)=>h.fi-u.fi),e.localIndex=l.indexOf(c),{data:this.modifyArrayBy(a,l),actual:e,reverse:{type:8,id:r}}}}deleteOp(e){let{id:n}=e;if(this.get(n)===null)return null;{let i=this.parent(n);if(i===void 0)return null;let r=this.childrenArray(i),s=r.findIndex(a=>a.id===n);e.localIndex=s,r=[...r];let o=r.splice(s,1)[0];return{data:this.modifyArrayBy(i,r),actual:e,reverse:{type:7,...o,parent:i}}}}moveOp(e){let{parent:n,fi:i,id:r}=e;if(n!==null&&this.get(n)===void 0)return this.deleteOp({type:8,id:r});if(n!==null){let d=n;for(;d!==null;){if(d===void 0)throw new Error;if(d===r)throw new aye("cyclic tree");d=this.parent(d)}}let s=this.parent(r);if(s===void 0)return null;let o=s,a=this.childrenArray(s),l=a.findIndex(d=>d.id===r);a=[...a];let c=a.splice(l,1)[0],h=this.modifyArrayBy(s,a);s=n,a=h.childrenArray(s);let u=c.fi;return c={...c,fi:i},a=[...a,c],a.sort((d,f)=>d.fi-f.fi),e.localIndex=a.indexOf(c),h=h.modifyArrayBy(s,a),{data:h,actual:e,reverse:{type:9,parent:o,fi:u,id:r}}}previous(e,n){if(n===null){let r=this.childrenArray(e);return r.length===0?null:r[r.length-1].id}let i=null;for(let r of this.childrenArray(e)){if(r.id===n)return i;i=r.id}return null}traverseSortNext(e){let n=this.parent(e);if(n!==void 0){let i=this.childrenArray(n),r=i.findIndex(s=>s.id===e)+1;if(r<i.length)return i[r].id;if(n)return this.traverseSortNext(n)}}sortNext(e){let n=this.childrenArray(e);return n.length>0?n[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let n=this.childrenArray(e);return n.length>0?this.traverseSortPrevious(n[n.length-1].id):e}sortPrevious(e){let n=this.parent(e);if(n!==void 0){let i=this.childrenArray(n),r=i.findIndex(s=>s.id===e)-1;return r>=0?this.traverseSortPrevious(i[r].id):n}}getAllSorted(e){let n=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&n.push({...i,...r})}n.sort((i,r)=>sst(i.sortKey,r.sortKey));for(let i of n)delete i.sortKey;return n}getWithSortKey(e){var n=e;let i=[],r=this.get(n),s=r;if(r!==void 0){for(;n;)i.splice(0,0,r.fi),n=this.parent(n),n!==null&&(r=this.get(n));return{...s,sortKey:i}}}insertBeforeHelper(e,n,i){return this.insertAfterHelper(e,this.previous(e,n),i)}insertAfterHelper(e,n,i){let r=this.childrenArray(e);if(n===null){if(r.length===0)return im(0,i,i);{let s=r[0].fi;return im(s-i,s,i)}}else{let s=this.get(n);if(s===void 0||this.parent(n)!==e)throw new Error("illegal args");let o=r.find(a=>a.fi>s.fi);if(o===void 0){let a=r[r.length-1].fi;return im(a,a+i,i)}else return im(s.fi,o.fi,i)}}},nL;(t=>{function e(n,i){if(i.type!==0)return null;if(Array.isArray(n)){let r=i.props,s={},o=[...n],a=!1;if(r)for(let l of Object.keys(r)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");s[l]=o[c],o[c]=r[l],a=!0}return a?{data:o,actual:i,reverse:{type:0,props:s}}:null}else{let r=i.props,s={},o={...n},a=!1;if(r)for(let l of Object.keys(r)){s[l]=o[l];let c=r[l];c===void 0?delete o[l]:o[l]=c,a=!0}return a?{data:o,actual:i,reverse:{type:0,props:s}}:null}}t.runOp=e})(nL||(nL={}));var Ci=class extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ci.prototype)}deepFreeze(){let t=0;for(;t<this.length;)EW(this[t]),t++}fillCaches0(t){this.objCaches.set(t.id,t)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let t of this)this.fillCaches0(t)}}randomId(){this.fillCaches();let t=Array.from(this.objCaches.keys());if(t.length!==0)return t[Math.max(0,Math.floor(Math.random()*t.length)-1)]}data(t){var e;return(e=this.get(t))==null?void 0:e.data}get(t){return this.fillCaches(),this.objCaches.get(t)}modifyById(t,e){if(this.get(t)===void 0)throw new Error("not expected");{let n=this,i=n.findIndex(s=>s.id===t);if(i<0)throw new Error("not expected");let r=n[i];return n=[...n],n[i]={...r,data:e},this.modifyArrayBy(n)}}modifyArrayBy(t){Object.setPrototypeOf(t,Ci.prototype);let e=t;return ost()||e.fillCaches(),e}runOp(t){switch(t.type){case 4:return this.addOp(t);case 5:return this.deleteOp(t);case 6:return this.moveOp(t)}return null}addOp(t){let{fi:e,id:n,data:i}=t,r=this,s={fi:e,id:n,data:i};return r=[...r,s],r.sort((o,a)=>o.fi-a.fi),t.localIndex=r.indexOf(s),{data:this.modifyArrayBy(r),actual:t,reverse:{type:5,id:n}}}deleteOp(t){let{id:e}=t,n=this,i=n.findIndex(s=>s.id===e);if(i===-1)return null;t.localIndex=i,n=[...n];let r=n.splice(i,1)[0];return{data:this.modifyArrayBy(n),actual:t,reverse:{type:4,...r}}}moveOp(t){let{fi:e,id:n}=t,i=this;i=[...i];let r=i.findIndex(a=>a.id===n);if(r===-1)return null;let s=i[r].fi,o={...i[r],fi:e};return i[r]=o,i.sort((a,l)=>a.fi-l.fi),t.localIndex=i.indexOf(o),{data:this.modifyArrayBy(i),actual:t,reverse:{type:6,fi:s,id:n}}}previous(t){if(t===null)return this.length===0?null:this[this.length-1].id;let e=null;for(let n of this){if(n.id===t)return e;e=n.id}return null}insertBeforeHelper(t,e){return this.insertAfterHelper(this.previous(t),e)}insertAfterHelper(t,e){let n=this;if(t===null){if(n.length===0)return im(0,e,e);{let i=n[0].fi;return im(i-e,i,e)}}else{let i=this.get(t);if(i===void 0)throw new Error("illegal args");let r=n.find(s=>s.fi>i.fi);if(r===void 0){let s=n[n.length-1].fi;return im(s,s+e,e)}else return im(i.fi,r.fi,e)}}};function Kb(t){return t&&typeof t=="object"&&t instanceof no}var no=class{unusedFunOverridesTable(e){}runOp(e){let n=[],i=this,r=0,s={};for(;r<e.path.length;){if(n.push(i),i=i===void 0?void 0:i[e.path[r]],i!==void 0&&!Kb(i))return null;r+=1}i=i?m4(i):new no;for(let[l,c]of Object.entries(e.props)){let h=i[l];s[l]=h,c===void 0?delete i[l]:i[l]=c}for(;r>0;){if(Object.keys(i).length===0){let l=n[r-1];l&&(i=m4(l),delete i[e.path[r-1]])}else{let l=n[r-1];if(l){let c=m4(l);c[e.path[r-1]]=i,i=c}else{let c=new no;c[e.path[r-1]]=i,i=c}}r-=1}let o=Object.setPrototypeOf(i,no.prototype),a={...e,props:s};return{data:o,actual:e,reverse:a}}},Y0;(t=>{function e(r,s){return E2(r,s)??r}t.apply=e;function n(r,s){return PW(r,s)}t.merge=n;function i(r,s){let o=0,a=s.path,l=r;for(;o<a.length&&l!==void 0;){if(l=qh.zoomOnce(l,a[o]),l===void 0)return s;if(!Kb(l))return;o+=1}if(l===void 0)return s;if(Kb(l))if(s.type===0){let c={...s.props};for(let h of Object.keys(l))delete c[h];return{...s,props:c}}else if(s.type===1||s.type===4||s.type===7){let c=TW([s],l);return c?(console.log(c),c):s}else return s}t.filterOp=i})(Y0||(Y0={}));function TW(t,e){if(e===void 0)return;let n=!1,i=t.map(r=>{let s=r.id,o=E2(r.data,e[s]);if(n=n||o!==void 0,o===void 0&&(o=r.data),r.children){let a=TW(r.children,e);return a!==void 0?n=!0:a=r.children,{...r,id:s,data:o,children:a}}else return{...r,id:s,data:o}});if(n)return i}function ast(t,e){if(e===void 0)return;let n=!1,i=t.map(r=>{let s=r.id,o=E2(r.data,e[s]);return n=n||o!==void 0,o===void 0&&(o=r.data),{...r,id:s,data:o}});if(n)return Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i}function E2(t,e){if(!Kb(e))return e;if(t instanceof Ou){let n=TW(t,e);return n!==void 0&&Object.setPrototypeOf(n,Object.getPrototypeOf(t)),n}else{if(t instanceof Ci)return ast(t,e);if(Array.isArray(t)){let n=!1,i=t.map((r,s)=>{let o=E2(r,e[s]);return n=n||o!==void 0,o===void 0&&(o=r),o});return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i):void 0}else{if(t instanceof no)return PW(t,e);if(t&&typeof t=="object"){let n={},i=!1;for(let[r,s]of Object.entries(t)){let o=E2(s,e[r]);i=i||o!==void 0,o===void 0&&(o=s),n[r]=o}return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(t)),n):void 0}}}}function PW(t,e){if(t===void 0)return e;if(e===void 0)return t;if(!Kb(e))return e;if(!Kb(t))return Y0.apply(t,e);let n=new Set;for(let r of Object.keys(t))n.add(r);for(let r of Object.keys(e))n.add(r);let i=new no;for(let r of n){let s=PW(t===void 0?void 0:t[r],e===void 0?void 0:e[r]);i[r]=s}return i}function lst(t,e){let n={cur:[],result:[],len:0};return t=C2(t,e,n)??t,[t,n.result]}function iL(t,e){return t===null?null:(t.cur[t.len]=e,t.len+=1,t)}function rL(t){t&&(t.len-=1)}function cst(t){if(t===null)return null;t.result.push(t.cur.slice(0,t.len))}function uye(t,e,n){let i=!1,r=t.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(i=!0,o=a,n!==null))throw new Error("not supported");let l=C2(s.data,e,iL(n,o));rL(n),i=i||l!==void 0,l===void 0&&(l=s.data);let c=uye(s.children,e,n);return c!==void 0?i=!0:c=s.children,{...s,id:o,data:l,children:c}});if(i)return r}function ust(t,e,n){let i=!1,r=t.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(i=!0,o=a,n!==null))throw new Error("not supported");let l=C2(s.data,e,iL(n,o));return rL(n),i=i||l!==void 0,l===void 0&&(l=s.data),{...s,id:o,data:l}});if(i)return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r}function C2(t,e,n){if(t instanceof Ou){let i=uye(t,e,n);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i}else{if(t instanceof Ci)return ust(t,e,n);if(Array.isArray(t)){let i=!1,r=t.map((s,o)=>{let a=C2(s,e,iL(n,o));return rL(n),i=i||a!==void 0,a===void 0&&(a=s),a});return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r):void 0}else if(t&&typeof t=="object"&&!CW(t)){let i={},r=!1;for(let[s,o]of Object.entries(t))if(s!=="name"&&s!=="text"){let a=e[s];if(typeof a=="string"){if(n!==null)throw new Error("not supported");r=!0,s=a}let l=C2(o,e,iL(n,s));rL(n),r=r||l!==void 0,l===void 0&&(l=o),i[s]=l}else i[s]=o;return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i):void 0}else if(typeof t=="string"){let i=e[t];if(i!==void 0){if(t.length!==36)throw new Error("for now you should only call this method when the key is a uuid");cst(n)}return i}else return}}var qG;(t=>{function e(n,i){let r=qh.zoom(i,n.path);if(typeof r=="object"){let s={};for(let o of Object.keys(n.props))s[o]=r[o];return{...n,props:s}}else return{...n,props:{}}}t.replaceProps=e})(qG||(qG={}));var ol;(t=>{function e(l,c){return{...l,path:l.path.slice(c)}}t.drop=e;function n(l,c){var h;return((h=i(l,c))==null?void 0:h.data)??l}t.applySimple=n;function i(l,c){var d,f;let h=c.path;for(var u=[];;){let p;if(l instanceof no&&c.type===0&&(p=l.runOp({...c,path:h.slice(u.length)}),p===null&&(p=void 0)),u.length===h.length&&(l instanceof Ou||l instanceof Ci||l instanceof ns?p=l.runOp(c):p=nL.runOp(l,c)),p!==void 0)if(p!==null){let v=p.data;for(let y=u.length-1;y>=0;y--){let x=h[y],b=u[y];if(b instanceof Ou){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof Ci){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof ns){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof no){let S={...b,[x]:v};v=Object.setPrototypeOf(S,no.prototype)}else if(typeof b=="object")if(Array.isArray(b)){if(typeof x=="string"&&(x=parseInt(x),isNaN(x)))throw new Error("Invalid path");let S=v;v=[...b],v[x]=S}else v={...b,[x]:v};else return null}return{data:v,actual:{...p.actual,path:h},reverse:{...p.reverse,path:h}}}else return null;let m=h[u.length],g;if(l instanceof Ou){if(typeof m=="number")throw new Error("");g=(d=l.get(m))==null?void 0:d.data}else if(l instanceof Ci){if(typeof m=="number")throw new Error("");g=(f=l.get(m))==null?void 0:f.data}else l!==null&&(g=l[m]);if(g!==void 0)u.push(l),l=g;else return null}}t.apply=i;function r(l,c){for(let h=0;h<l.length&&h<c.length;h++)if(l[h]!==c[h])return!0;return!1}t.pathDisjoint=r;function s(l,c){if(l.length!==c.length)return!1;for(let h=0;h<l.length;h++)if(l[h]!==c[h])return!1;return!0}t.pathEq=s;function o(l,c){return r(l.path,c.path)}t.commutative=o;function a(l,c){return l.type===0&&c.type===0&&s(l.path,c.path)?Object.keys(l.props).every(h=>c.props[h]!==void 0):!1}t.subsumed=a})(ol||(ol={}));var xne;(t=>{function e(){return[]}t.empty=e;function n(c,h){let u=[];for(let d of c){let[f,...p]=d.path;f===h&&u.push({...d,path:p})}return u}t.removePrefix=n;function i(c,h){return c.map(u=>({...u,path:[h,...u.path]}))}t.addPrefix=i;function r(c,h){return[...c,...h]}t.concat=r;function s(c,h){return[...c.filter(u=>!h.some(d=>ol.subsumed(u,d))),...h]}t.compress=s;function o(c,h){return c.every(u=>h.every(d=>ol.commutative(u,d)))}t.commutative=o;function a(c,h){for(let u of h){let d=l(c,u);d!==null&&(c=d.data)}return c}t.applyAll=a;function l(c,h){var u=c;let d=[],f=[];for(let p of h)try{if(p.type===3){let m=qh.zoom(u,[...p.path,p.id]),g=ol.apply(u,{...p,type:2});if(g!==null){u=g.data;let[v,y]=lst(u,{[p.id]:m});u=v;for(let x of y){let b=x[x.length-1];x.splice(x.length-1,1),d.push({type:0,path:x,props:{[b]:m}}),f.push({type:0,path:x,props:{[b]:p.id}})}f.push(g.reverse),d.push(g.actual)}}else{let m=ol.apply(u,p);m!==null&&(d.push(m.actual),u=m.data,f.push(m.reverse))}}catch(m){if(m instanceof aye)return null;throw m}return{data:u,actual:d,reverse:f.reverse()}}t.apply=l})(xne||(xne={}));var hye=Symbol(),hst=Symbol(),aB=Symbol(),jE=class{reportOp(e,n,i=[]){let r=this;if(n===null)return;r._current=n.data;let s=i;for(;!(r instanceof fye);){let o=r._path,a=r._current;if(o!==""&&s.splice(0,0,o),r=r._parent,r===null)return;r.update(o,a)}r.push(s,e,n.actual,n.reverse)}deleteChildren(e){if(this._children){let n=this._children[e];if(n){let i=n[aB];i&&i(),delete this._children[e]}}}},dst=class extends jE{constructor(e,n,i){super(),this._parent=e,this._path=n,this._current=i}update(e,n){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=n}else this._current={...this._current,[e]:n}}runOp(e){this.reportOp(e,nL.runOp(this._current,e),e.path)}},fst=class extends jE{constructor(t,e,n){super(),this._parent=t,this._path=e,this._current=n}update(t,e){this._current={...this._current,[t]:e},Object.setPrototypeOf(this._current,ns.prototype)}runOp(t){this.reportOp(t,this._current.runOp(t))}},dye={get(t,e){if(e===aB)return()=>{t._parent=null};if(e===hye)return t._current;if(e===hst)return t;let{_current:n,_children:i}=t;if(e==="push"&&Array.isArray(n))throw new Error("not supported to expand array");let r=i===void 0?void 0:i[e];if(r!==void 0)return r;let s=n[e],o=lB(t,e,s);return o!==s?(i===void 0&&(i={},t._children=i),i[e]=o,o):s},has(t,e){return e in t._current},ownKeys(t){return Reflect.ownKeys(t._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(t){return Object.getPrototypeOf(t._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(t,e){let n=t._current,i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:n[e]}}},pst={...dye,set(t,e,n){let i={type:0,props:{[e]:Co(n)??n}};return t.deleteChildren(e),t.runOp(i),!0},deleteProperty(t,e){let n={type:0,props:{[e]:void 0}};return t.deleteChildren(e),t.runOp(n),!0}},mst={...dye,set(t,e,n){return n===void 0?this.deleteProperty(t,e):(t.deleteChildren(e),t.runOp({type:1,id:e,data:n})),!0},deleteProperty(t,e){return t.runOp({type:2,id:e}),!0}},DW=class extends jE{constructor(e,n,i){super(),this._children={},this._parent=e,this._path=n,this._current=i,this[aB]=()=>{this._parent=null}}unproxy(){return this._current}update(e,n){this._current=this._current.modifyById(e,n)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,n){return this._current.isDescendantOf(e,n)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((n,i)=>{e(n,this.data(n))})}data(e){var a;let{_current:n,_children:i}=this,r=i===void 0?void 0:i[e];if(r!==void 0)return r;let s=(a=n.get(e))==null?void 0:a.data,o=lB(this,e,s);return o!==s?(i===void 0&&(i={},this._children=i),i[e]=o,o):s}add(e,n,i,r,s){this.runOp({type:7,parent:e,fi:n,id:i,data:r,children:s})}move(e,n,i){this.runOp({type:9,parent:e,fi:n,id:i})}insertAfter(e,n,i){let r=this._current.insertAfterHelper(e,n,i.length);for(let s=0;s<i.length;s++){let o=i[s];this.add(e,r[s],o.id,o.data,o.children)}}insertBefore(e,n,i){let r=this._current.insertBeforeHelper(e,n,i.length);for(let s=0;s<i.length;s++){let o=i[s];this.add(e,r[s],o.id,o.data,o.children)}}moveAfter(e,n,i){let r=this._current.insertAfterHelper(e,n,i.length);for(let s=0;s<i.length;s++){let o=i[s];this.move(e,r[s],o)}}moveBefore(e,n,i){let r=this._current.insertBeforeHelper(e,n,i.length);for(let s=0;s<i.length;s++){let o=i[s];this.move(e,r[s],o)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},OW=class extends jE{constructor(e,n,i){super(),this._children={},this._parent=e,this._path=n,this._current=i,this[aB]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let n=this.length;for(let i=0;i<n;i++){let r=this._current[i].id,s=this._current[i].fi;e(this.data(this._current[i].id),r,s)}}find(e){let n=this.length;for(let i=0;i<n;i++){let r=this._current[i].id;if(e(this.data(r),r))return this.get(r)}}update(e,n){this._current=this._current.modifyById(e,n)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var a;let{_current:n,_children:i}=this,r=i===void 0?void 0:i[e];if(r!==void 0)return r;let s=(a=n.get(e))==null?void 0:a.data,o=lB(this,e,s);return o!==s?(i===void 0&&(i={},this._children=i),i[e]=o,o):s}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,n,i){this.runOp({type:4,fi:e,id:n,data:i})}move(e,n){this.runOp({type:6,fi:e,id:n})}insertAfter(e,n){let i=this._current.insertAfterHelper(e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.add(i[r],s.id,s.data)}}insertBefore(e,n){let i=this._current.insertBeforeHelper(e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.add(i[r],s.id,s.data)}}moveAfter(e,n){let i=this._current.insertAfterHelper(e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.move(i[r],s)}}moveBefore(e,n){let i=this._current.insertBeforeHelper(e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.move(i[r],s)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function g4(t,e,n){if(t.length>0){let i=t[t.length-1];if(i.type===0&&e.type===0&&qh.equal(i.path,n)){Object.assign(i.props,e.props);return}}t.push({...e,path:n})}var fye=class extends jE{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,n){if(e!=="")throw new Error("");this._current=n}push(e,n,i,r){g4(this.ts,n,e),g4(this.actual,i,e),g4(this.reverse,r,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function lB(t,e,n){return n instanceof Ou?new DW(t,e,n):n instanceof Ci?new OW(t,e,n):n instanceof ns?new Proxy(new fst(t,e,n),mst):n!==null&&typeof n=="object"?CW(n)?n:new Proxy(new dst(t,e,n),pst):n}function pye(t){let e=new fye(t);return[lB(e,"",t),e]}function sL(t,e){let[n,i]=pye(t);return e(n),i.result()}function Co(t){return t instanceof DW||t instanceof OW?t._current:t!==null&&typeof t=="object"?t[hye]:t}var qh;(t=>{function e(s,o){if(o.length===s.length)for(var a=0;a<s.length;){if(s[a]!==o[a])return!1;a+=1}else return!1;return!0}t.equal=e;function n(s,o,a){let l=r(a,s);if(l!==void 0&&typeof l=="object"&&l!==null){let c={...o};return Object.keys(l).forEach(h=>{delete c[h]}),c}else return o}t.removeOverridden=n;function i(s,o){if((s instanceof Ou||s instanceof DW)&&typeof o=="string"||(s instanceof Ci||s instanceof OW)&&typeof o=="string")return s.data(o);if(typeof o=="number"&&Array.isArray(s)||typeof o=="string"&&typeof s=="object"&&s!==null)return s[o]}t.zoomOnce=i;function r(s,o,a=0){for(;a<o.length&&s!==void 0;)s=i(s,o[a]),a+=1;return s}t.zoom=r})(qh||(qh={}));function gst(t,e){let n=[];if(e.length===t.length)for(var i=0;i<t.length;){if(e[i]==="*")n.push(t[i]);else if(t[i]!==e[i])return null;i+=1}else return null;return n}function qp(t,e){let n=[];if(e.length<=t.length)for(var i=0;i<e.length;){if(e[i]==="*")n.push(t[i]);else if(t[i]!==e[i])return null;i+=1}else return null;return n}var mye=class{},bne=class extends mye{constructor(e){super(),this.id=e}},wne=class extends mye{constructor(e){super(),this.data=e}},XG;try{XG=new TextDecoder}catch{}var wt,km,Be=0,pa={},Jn,rm,rc=0,Lh=0,Za,Cf,na=[],ii,_ne={useRecords:!1,mapsAsObjects:!0},gye=class{},vye=new gye;vye.name="MessagePack 0xC1";var Jb=!1,oL=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,n){if(wt)return Sye(()=>(KG(),this?this.unpack(e,n):oL.prototype.unpack.call(_ne,e,n)));km=n>-1?n:e.length,Be=0,Lh=0,rm=null,Za=null,wt=e;try{ii=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(i){throw wt=null,e instanceof Uint8Array?i:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof oL){if(pa=this,this.structures)return Jn=this.structures,RP();(!Jn||Jn.length>0)&&(Jn=[])}else pa=_ne,(!Jn||Jn.length>0)&&(Jn=[]);return RP()}unpackMultiple(e,n){let i,r=0;try{Jb=!0;let s=e.length,o=this?this.unpack(e,s):uB.unpack(e,s);if(n){for(n(o);Be<s;)if(r=Be,n(RP())===!1)return}else{for(i=[o];Be<s;)r=Be,i.push(RP());return i}}catch(s){throw s.lastPosition=r,s.values=i,s}finally{Jb=!1,KG()}}_mergeStructures(e,n){e=e||[];for(let i=0,r=e.length;i<r;i++){let s=e[i];s&&(s.isShared=!0,i>=32&&(s.highByte=i-32>>5))}e.sharedLength=e.length;for(let i in n||[])if(i>=0){let r=e[i],s=n[i];s&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[i]=r),e[i]=s)}return this.structures=e}decode(e,n){return this.unpack(e,n)}};function RP(){try{if(!pa.trusted&&!Jb){let e=Jn.sharedLength||0;e<Jn.length&&(Jn.length=e)}let t=Er();if(Be==km)Jn.restoreStructures&&Sne(),Jn=null,wt=null,Cf&&(Cf=null);else if(Be>km){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}else if(!Jb)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw Jn.restoreStructures&&Sne(),KG(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function Sne(){for(let t in Jn.restoreStructures)Jn[t]=Jn.restoreStructures[t];Jn.restoreStructures=null}function Er(){let t=wt[Be++];if(t<160)if(t<128){if(t<64)return t;{let e=Jn[t&63]||pa.getStructures&&yye()[t&63];return e?(e.read||(e.read=LW(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,pa.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[bye()]=Er();return e}else{let e=new Map;for(let n=0;n<t;n++)e.set(Er(),Er());return e}else{t-=144;let e=new Array(t);for(let n=0;n<t;n++)e[n]=Er();return e}else if(t<192){let e=t-160;if(Lh>=Be)return rm.slice(Be-rc,(Be+=e)-rc);if(Lh==0&&km<140){let n=e<16?RW(e):xye(e);if(n!=null)return n}return YG(e)}else{let e;switch(t){case 192:return null;case 193:return Za?(e=Er(),e>0?Za[1].slice(Za.position1,Za.position1+=e):Za[0].slice(Za.position0,Za.position0-=e)):vye;case 194:return!1;case 195:return!0;case 196:return v4(wt[Be++]);case 197:return e=ii.getUint16(Be),Be+=2,v4(e);case 198:return e=ii.getUint32(Be),Be+=4,v4(e);case 199:return kg(wt[Be++]);case 200:return e=ii.getUint16(Be),Be+=2,kg(e);case 201:return e=ii.getUint32(Be),Be+=4,kg(e);case 202:if(e=ii.getFloat32(Be),pa.useFloat32>2){let n=IW[(wt[Be]&127)<<1|wt[Be+1]>>7];return Be+=4,(n*e+(e>0?.5:-.5)>>0)/n}return Be+=4,e;case 203:return e=ii.getFloat64(Be),Be+=8,e;case 204:return wt[Be++];case 205:return e=ii.getUint16(Be),Be+=2,e;case 206:return e=ii.getUint32(Be),Be+=4,e;case 207:return pa.int64AsNumber?(e=ii.getUint32(Be)*4294967296,e+=ii.getUint32(Be+4)):e=ii.getBigUint64(Be),Be+=8,e;case 208:return ii.getInt8(Be++);case 209:return e=ii.getInt16(Be),Be+=2,e;case 210:return e=ii.getInt32(Be),Be+=4,e;case 211:return pa.int64AsNumber?(e=ii.getInt32(Be)*4294967296,e+=ii.getUint32(Be+4)):e=ii.getBigInt64(Be),Be+=8,e;case 212:if(e=wt[Be++],e==114)return Tne(wt[Be++]&63);{let n=na[e];if(n)return n.read?(Be++,n.read(Er())):n.noBuffer?(Be++,n()):n(wt.subarray(Be,++Be));throw new Error("Unknown extension "+e)}case 213:return e=wt[Be],e==114?(Be++,Tne(wt[Be++]&63,wt[Be++])):kg(2);case 214:return kg(4);case 215:return kg(8);case 216:return kg(16);case 217:return e=wt[Be++],Lh>=Be?rm.slice(Be-rc,(Be+=e)-rc):yst(e);case 218:return e=ii.getUint16(Be),Be+=2,Lh>=Be?rm.slice(Be-rc,(Be+=e)-rc):xst(e);case 219:return e=ii.getUint32(Be),Be+=4,Lh>=Be?rm.slice(Be-rc,(Be+=e)-rc):bst(e);case 220:return e=ii.getUint16(Be),Be+=2,Mne(e);case 221:return e=ii.getUint32(Be),Be+=4,Mne(e);case 222:return e=ii.getUint16(Be),Be+=2,Ene(e);case 223:return e=ii.getUint32(Be),Be+=4,Ene(e);default:if(t>=224)return t-256;if(t===void 0){let n=new Error("Unexpected end of MessagePack data");throw n.incomplete=!0,n}throw new Error("Unknown MessagePack token "+t)}}}var vst=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function LW(t,e){function n(){if(n.count++>2){let r=t.read=new Function("r","return function(){return {"+t.map(s=>vst.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(Er);return t.highByte===0&&(t.read=Ane(e,t.read)),r()}let i={};for(let r=0,s=t.length;r<s;r++){let o=t[r];i[o]=Er()}return i}return n.count=0,t.highByte===0?Ane(e,n):n}var Ane=(t,e)=>function(){let n=wt[Be++];if(n===0)return e();let i=t<32?-(t+(n<<5)):t+(n<<5),r=Jn[i]||yye()[i];if(!r)throw new Error("Record id is not defined for "+i);return r.read||(r.read=LW(r,t)),r.read()};function yye(){let t=Sye(()=>(wt=null,pa.getStructures()));return Jn=pa._mergeStructures(t,Jn)}var YG=cB,yst=cB,xst=cB,bst=cB;function cB(t){let e;if(t<16&&(e=RW(t)))return e;if(t>64&&XG)return XG.decode(wt.subarray(Be,Be+=t));let n=Be+t,i=[];for(e="";Be<n;){let r=wt[Be++];if(!(r&128))i.push(r);else if((r&224)===192){let s=wt[Be++]&63;i.push((r&31)<<6|s)}else if((r&240)===224){let s=wt[Be++]&63,o=wt[Be++]&63;i.push((r&31)<<12|s<<6|o)}else if((r&248)===240){let s=wt[Be++]&63,o=wt[Be++]&63,a=wt[Be++]&63,l=(r&7)<<18|s<<12|o<<6|a;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(r);i.length>=4096&&(e+=Bs.apply(String,i),i.length=0)}return i.length>0&&(e+=Bs.apply(String,i)),e}function Mne(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=Er();return e}function Ene(t){if(pa.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[bye()]=Er();return e}else{let e=new Map;for(let n=0;n<t;n++)e.set(Er(),Er());return e}}var Bs=String.fromCharCode;function xye(t){let e=Be,n=new Array(t);for(let i=0;i<t;i++){let r=wt[Be++];if((r&128)>0){Be=e;return}n[i]=r}return Bs.apply(String,n)}function RW(t){if(t<4)if(t<2){if(t===0)return"";{let e=wt[Be++];if((e&128)>1){Be-=1;return}return Bs(e)}}else{let e=wt[Be++],n=wt[Be++];if((e&128)>0||(n&128)>0){Be-=2;return}if(t<3)return Bs(e,n);let i=wt[Be++];if((i&128)>0){Be-=3;return}return Bs(e,n,i)}else{let e=wt[Be++],n=wt[Be++],i=wt[Be++],r=wt[Be++];if((e&128)>0||(n&128)>0||(i&128)>0||(r&128)>0){Be-=4;return}if(t<6){if(t===4)return Bs(e,n,i,r);{let s=wt[Be++];if((s&128)>0){Be-=5;return}return Bs(e,n,i,r,s)}}else if(t<8){let s=wt[Be++],o=wt[Be++];if((s&128)>0||(o&128)>0){Be-=6;return}if(t<7)return Bs(e,n,i,r,s,o);let a=wt[Be++];if((a&128)>0){Be-=7;return}return Bs(e,n,i,r,s,o,a)}else{let s=wt[Be++],o=wt[Be++],a=wt[Be++],l=wt[Be++];if((s&128)>0||(o&128)>0||(a&128)>0||(l&128)>0){Be-=8;return}if(t<10){if(t===8)return Bs(e,n,i,r,s,o,a,l);{let c=wt[Be++];if((c&128)>0){Be-=9;return}return Bs(e,n,i,r,s,o,a,l,c)}}else if(t<12){let c=wt[Be++],h=wt[Be++];if((c&128)>0||(h&128)>0){Be-=10;return}if(t<11)return Bs(e,n,i,r,s,o,a,l,c,h);let u=wt[Be++];if((u&128)>0){Be-=11;return}return Bs(e,n,i,r,s,o,a,l,c,h,u)}else{let c=wt[Be++],h=wt[Be++],u=wt[Be++],d=wt[Be++];if((c&128)>0||(h&128)>0||(u&128)>0||(d&128)>0){Be-=12;return}if(t<14){if(t===12)return Bs(e,n,i,r,s,o,a,l,c,h,u,d);{let f=wt[Be++];if((f&128)>0){Be-=13;return}return Bs(e,n,i,r,s,o,a,l,c,h,u,d,f)}}else{let f=wt[Be++],p=wt[Be++];if((f&128)>0||(p&128)>0){Be-=14;return}if(t<15)return Bs(e,n,i,r,s,o,a,l,c,h,u,d,f,p);let m=wt[Be++];if((m&128)>0){Be-=15;return}return Bs(e,n,i,r,s,o,a,l,c,h,u,d,f,p,m)}}}}}function v4(t){return pa.copyBuffers?Uint8Array.prototype.slice.call(wt,Be,Be+=t):wt.subarray(Be,Be+=t)}function kg(t){let e=wt[Be++];if(na[e])return na[e](wt.subarray(Be,Be+=t));throw new Error("Unknown extension type "+e)}var Cne=new Array(4096);function bye(){let t=wt[Be++];if(t>=160&&t<192){if(t=t-160,Lh>=Be)return rm.slice(Be-rc,(Be+=t)-rc);if(!(Lh==0&&km<180))return YG(t)}else return Be--,Er();let e=(t<<5^(t>1?ii.getUint16(Be):t>0?wt[Be]:0))&4095,n=Cne[e],i=Be,r=Be+t-3,s,o=0;if(n&&n.bytes==t){for(;i<r;){if(s=ii.getUint32(i),s!=n[o++]){i=1879048192;break}i+=4}for(r+=3;i<r;)if(s=wt[i++],s!=n[o++]){i=1879048192;break}if(i===r)return Be=i,n.string;r-=3,i=Be}for(n=[],Cne[e]=n,n.bytes=t;i<r;)s=ii.getUint32(i),n.push(s),i+=4;for(r+=3;i<r;)s=wt[i++],n.push(s);let a=t<16?RW(t):xye(t);return a!=null?n.string=a:n.string=YG(t)}var Tne=(t,e)=>{var n=Er();let i=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,n.highByte=e);let r=Jn[t];return r&&r.isShared&&((Jn.restoreStructures||(Jn.restoreStructures=[]))[t]=r),Jn[t]=n,n.read=LW(n,i),n.read()},wye=typeof self=="object"?self:global;na[0]=()=>{};na[0].noBuffer=!0;na[101]=()=>{let t=Er();return(wye[t[0]]||Error)(t[1])};na[105]=t=>{let e=ii.getUint32(Be-4);Cf||(Cf=new Map);let n=wt[Be],i;n>=144&&n<160||n==220||n==221?i=[]:i={};let r={target:i};Cf.set(e,r);let s=Er();return r.used?Object.assign(i,s):(r.target=s,s)};na[112]=t=>{let e=ii.getUint32(Be-4),n=Cf.get(e);return n.used=!0,n.target};na[115]=()=>new Set(Er());var _ye=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");na[116]=t=>{let e=t[0],n=_ye[e];if(!n)throw new Error("Could not find typed array for code "+e);return new wye[n](Uint8Array.prototype.slice.call(t,1).buffer)};na[120]=()=>{let t=Er();return new RegExp(t[0],t[1])};na[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],n=Be;Be+=e-4,Za=[Er(),Er()],Za.position0=0,Za.position1=0;let i=Be;Be=n;try{return Er()}finally{Be=i}};na[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function Sye(t){let e=km,n=Be,i=rc,r=Lh,s=rm,o=Cf,a=Za,l=new Uint8Array(wt.slice(0,km)),c=Jn,h=Jn.slice(0,Jn.length),u=pa,d=Jb,f=t();return km=e,Be=n,rc=i,Lh=r,rm=s,Cf=o,Za=a,wt=l,Jb=d,Jn=c,Jn.splice(0,Jn.length,...h),pa=u,ii=new DataView(wt.buffer,wt.byteOffset,wt.byteLength),f}function KG(){wt=null,Cf=null,Jn=null}function wst(t){t.unpack?na[t.type]=t.unpack:na[t.type]=t}var IW=new Array(147);for(let t=0;t<256;t++)IW[t]=+("1e"+Math.floor(45.15-t*.30103));var uB=new oL({useRecords:!1});uB.unpack;uB.unpackMultiple;uB.unpack;var _st=new Float32Array(1);new Uint8Array(_st.buffer,0,4);var kD;try{kD=new TextEncoder}catch{}var aL,BW,hB=typeof Buffer<"u",y4=hB?Buffer.allocUnsafeSlow:Uint8Array,Aye=hB?Buffer:Uint8Array,Pne=hB?4294967296:2144337920,Ye,Fr,He=0,sh,oh=null,Sst=/[\u0080-\uFFFF]/,gS=Symbol("record-id"),Mye=class extends oL{constructor(e){super(e),this.offset=0;let n,i,r,s,o,a=0,l=Aye.prototype.utf8Write?function(E,M,C){return Ye.utf8Write(E,M,C)}:kD&&kD.encodeInto?function(E,M){return kD.encodeInto(E,Ye.subarray(M)).written}:!1,c=this;e||(e={});let h=e&&e.sequential,u=e.structures||e.saveStructures,d=e.maxSharedStructures;if(d==null&&(d=u?32:0),d>8160)throw new Error("Maximum maxSharedStructure is 8160");let f=e.maxOwnStructures;f==null&&(f=u?32:64),h&&!e.saveStructures&&(this.structures=[]);let p=d>32||f+d>64,m=d+64,g=d+f+64;if(g>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let v=[],y=0,x=0;this.pack=this.encode=function(E,M){if(Ye||(Ye=new y4(8192),Fr=new DataView(Ye.buffer,0,8192),He=0),sh=Ye.length-10,sh-He<2048?(Ye=new y4(Ye.length),Fr=new DataView(Ye.buffer,0,Ye.length),sh=Ye.length-10,He=0):He=He+7&2147483640,n=He,o=c.structuredClone?new Map:null,c.bundleStrings?(oh=["",""],Ye[He++]=214,Ye[He++]=98,oh.position=He-n,He+=4):oh=null,i=c.structures,i){i.uninitialized&&(i=c._mergeStructures(c.getStructures()));let C=i.sharedLength||0;if(C>d)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let T=0;T<C;T++){let D=i[T];if(!D)continue;let L,I=i.transitions;for(let R=0,H=D.length;R<H;R++){let Z=D[R];L=I[Z],L||(L=I[Z]=Object.create(null)),I=L}I[gS]=T+64}a=C}h||(i.nextId=C+64)}r&&(r=!1),s=i||[];try{if(b(E),oh){Fr.setUint32(oh.position+n,He-oh.position-n);let C=oh;oh=null,b(C[0]),b(C[1])}if(c.offset=He,o&&o.idsToInsert){He+=o.idsToInsert.length*6,He>sh&&A(He),c.offset=He;let C=Mst(Ye.subarray(n,He),o.idsToInsert);return o=null,C}return M&Est?(Ye.start=n,Ye.end=He,Ye):Ye.subarray(n,He)}finally{if(i){if(x<10&&x++,y>1e4)i.transitions=null,x=0,y=0,v.length>0&&(v=[]);else if(v.length>0&&!h){for(let C=0,T=v.length;C<T;C++)v[C][gS]=0;v=[]}if(r&&c.saveStructures){let C=i.sharedLength||d;i.length>C&&(i=i.slice(0,C));let T=Ye.subarray(n,He);return c.saveStructures(i,a)===!1?(c._mergeStructures(c.getStructures()),c.pack(E)):(a=C,T)}}M&Cst&&(He=n)}};let b=E=>{He>sh&&(Ye=A(He));var M=typeof E,C;if(M==="string"){let T=E.length;if(oh&&T>=8&&T<4096){let I=Sst.test(E);oh[I?0:1]+=E,Ye[He++]=193,b(I?-T:T);return}let D;T<32?D=1:T<256?D=2:T<65536?D=3:D=5;let L=T*3;if(He+L>sh&&(Ye=A(He+L)),T<64||!l){let I,R,H,Z=He+D;for(I=0;I<T;I++)R=E.charCodeAt(I),R<128?Ye[Z++]=R:R<2048?(Ye[Z++]=R>>6|192,Ye[Z++]=R&63|128):(R&64512)===55296&&((H=E.charCodeAt(I+1))&64512)===56320?(R=65536+((R&1023)<<10)+(H&1023),I++,Ye[Z++]=R>>18|240,Ye[Z++]=R>>12&63|128,Ye[Z++]=R>>6&63|128,Ye[Z++]=R&63|128):(Ye[Z++]=R>>12|224,Ye[Z++]=R>>6&63|128,Ye[Z++]=R&63|128);C=Z-He-D}else C=l(E,He+D,L);C<32?Ye[He++]=160|C:C<256?(D<2&&Ye.copyWithin(He+2,He+1,He+1+C),Ye[He++]=217,Ye[He++]=C):C<65536?(D<3&&Ye.copyWithin(He+3,He+2,He+2+C),Ye[He++]=218,Ye[He++]=C>>8,Ye[He++]=C&255):(D<5&&Ye.copyWithin(He+5,He+3,He+3+C),Ye[He++]=219,Fr.setUint32(He,C),He+=4),He+=C}else if(M==="number")if(E>>>0===E)E<64?Ye[He++]=E:E<256?(Ye[He++]=204,Ye[He++]=E):E<65536?(Ye[He++]=205,Ye[He++]=E>>8,Ye[He++]=E&255):(Ye[He++]=206,Fr.setUint32(He,E),He+=4);else if(E>>0===E)E>=-32?Ye[He++]=256+E:E>=-128?(Ye[He++]=208,Ye[He++]=E+256):E>=-32768?(Ye[He++]=209,Fr.setInt16(He,E),He+=2):(Ye[He++]=210,Fr.setInt32(He,E),He+=4);else{let T;if((T=this.useFloat32)>0&&E<4294967296&&E>=-2147483648){Ye[He++]=202,Fr.setFloat32(He,E);let D;if(T<4||(D=E*IW[(Ye[He]&127)<<1|Ye[He+1]>>7])>>0===D){He+=4;return}else He--}Ye[He++]=203,Fr.setFloat64(He,E),He+=8}else if(M==="object")if(!E)Ye[He++]=192;else{if(o){let D=o.get(E);if(D){if(!D.id){let L=o.idsToInsert||(o.idsToInsert=[]);D.id=L.push(D)}Ye[He++]=214,Ye[He++]=112,Fr.setUint32(He,D.id),He+=4;return}else o.set(E,{offset:He-n})}let T=E.constructor;if(T===Object)S(E,!0);else if(T===Array){C=E.length,C<16?Ye[He++]=144|C:C<65536?(Ye[He++]=220,Ye[He++]=C>>8,Ye[He++]=C&255):(Ye[He++]=221,Fr.setUint32(He,C),He+=4);for(let D=0;D<C;D++)b(E[D])}else if(T===Map){C=E.size,C<16?Ye[He++]=128|C:C<65536?(Ye[He++]=222,Ye[He++]=C>>8,Ye[He++]=C&255):(Ye[He++]=223,Fr.setUint32(He,C),He+=4);for(let[D,L]of E)b(D),b(L)}else{for(let D=0,L=aL.length;D<L;D++){let I=BW[D];if(E instanceof I){let R=aL[D];if(R.write){R.type&&(Ye[He++]=212,Ye[He++]=R.type,Ye[He++]=0),b(R.write.call(this,E));return}let H=Ye,Z=Fr,ee=He;Ye=null;let F;try{F=R.pack.call(this,E,V=>(Ye=H,H=null,He+=V,He>sh&&A(He),{target:Ye,targetView:Fr,position:He-V}),b)}finally{H&&(Ye=H,Fr=Z,He=ee,sh=Ye.length-10)}F&&(F.length+He>sh&&A(F.length+He),He=Ast(F,Ye,He,R.type));return}}S(E,!E.hasOwnProperty)}}else if(M==="boolean")Ye[He++]=E?195:194;else if(M==="bigint"){if(E<BigInt(1)<<BigInt(63)&&E>=-(BigInt(1)<<BigInt(63)))Ye[He++]=211,Fr.setBigInt64(He,E);else if(E<BigInt(1)<<BigInt(64)&&E>0)Ye[He++]=207,Fr.setBigUint64(He,E);else if(this.largeBigIntToFloat)Ye[He++]=203,Fr.setFloat64(He,Number(E));else throw new RangeError(E+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");He+=8}else if(M==="undefined")this.encodeUndefinedAsNil?Ye[He++]=192:(Ye[He++]=212,Ye[He++]=0,Ye[He++]=0);else if(M==="function")b(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+M)},S=this.useRecords===!1?this.variableMapSize?E=>{let M=Object.keys(E),C=M.length;C<16?Ye[He++]=128|C:C<65536?(Ye[He++]=222,Ye[He++]=C>>8,Ye[He++]=C&255):(Ye[He++]=223,Fr.setUint32(He,C),He+=4);let T;for(let D=0;D<C;D++)b(T=M[D]),b(E[T])}:(E,M)=>{Ye[He++]=222;let C=He-n;He+=2;let T=0;for(let D in E)(M||E.hasOwnProperty(D))&&(b(D),b(E[D]),T++);Ye[C+++n]=T>>8,Ye[C+n]=T&255}:E=>{let M=Object.keys(E),C,T=s.transitions||(s.transitions=Object.create(null)),D=0;for(let I=0,R=M.length;I<R;I++){let H=M[I];C=T[H],C||(C=T[H]=Object.create(null),D++),T=C}let L=T[gS];if(L)L>=96&&p?(Ye[He++]=((L-=96)&31)+96,Ye[He++]=L>>5):Ye[He++]=L;else{L=s.nextId,L||(L=64),L<m&&this.shouldShareStructure&&!this.shouldShareStructure(M)?(L=s.nextOwnId,L<g||(L=m),s.nextOwnId=L+1):(L>=g&&(L=m),s.nextId=L+1);let I=M.highByte=L>=96&&p?L-96>>5:-1;T[gS]=L,s[L-64]=M,L<m?(M.isShared=!0,s.sharedLength=L-63,r=!0,I>=0?(Ye[He++]=(L&31)+96,Ye[He++]=I):Ye[He++]=L):(I>=0?(Ye[He++]=213,Ye[He++]=114,Ye[He++]=(L&31)+96,Ye[He++]=I):(Ye[He++]=212,Ye[He++]=114,Ye[He++]=L),D&&(y+=x*D),v.length>=f&&(v.shift()[gS]=0),v.push(T),b(M))}for(let I=0,R=M.length;I<R;I++)b(E[M[I]])},A=E=>{let M;if(E>16777216){if(E-n>Pne)throw new Error("Packed buffer would be larger than maximum buffer size");M=Math.min(Pne,Math.round(Math.max((E-n)*(E>67108864?1.25:2),4194304)/4096)*4096)}else M=(Math.max(E-n<<2,Ye.length-1)>>12)+1<<12;let C=new y4(M);return Fr=new DataView(C.buffer,0,M),Ye.copy?Ye.copy(C,0,n,E):C.set(Ye.slice(n,E)),He-=n,n=0,sh=C.length-10,Ye=C}}useBuffer(e){Ye=e,Fr=new DataView(Ye.buffer,Ye.byteOffset,Ye.byteLength),He=0}};BW=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,gye];aL=[{pack(t,e,n){let i=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:r,targetView:s,position:o}=e(6);r[o++]=214,r[o++]=255,s.setUint32(o,i)}else if(i>0&&i<17179869184){let{target:r,targetView:s,position:o}=e(10);r[o++]=215,r[o++]=255,s.setUint32(o,t.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),s.setUint32(o+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return e(0),n(this.onInvalidDate());let{target:r,targetView:s,position:o}=e(3);r[o++]=212,r[o++]=255,r[o++]=255}else{let{target:r,targetView:s,position:o}=e(15);r[o++]=199,r[o++]=12,r[o++]=255,s.setUint32(o,t.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(i)))}}},{pack(t,e,n){let i=Array.from(t),{target:r,position:s}=e(this.structuredClone?3:0);this.structuredClone&&(r[s++]=212,r[s++]=115,r[s++]=0),n(i)}},{pack(t,e,n){let{target:i,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=101,i[r++]=0),n([t.name,t.message])}},{pack(t,e,n){let{target:i,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=120,i[r++]=0),n([t.source,t.flags])}},{pack(t,e){this.structuredClone?Dne(t,16,e):One(hB?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let n=t.constructor;n!==Aye&&this.structuredClone?Dne(t,_ye.indexOf(n.name),e):One(t,e)}},{pack(t,e){let{target:n,position:i}=e(1);n[i]=193}}];function Dne(t,e,n,i){let r=t.byteLength;if(r+1<256){var{target:s,position:o}=n(4+r);s[o++]=199,s[o++]=r+1}else if(r+1<65536){var{target:s,position:o}=n(5+r);s[o++]=200,s[o++]=r+1>>8,s[o++]=r+1&255}else{var{target:s,position:o,targetView:a}=n(7+r);s[o++]=201,a.setUint32(o,r+1),o+=4}s[o++]=116,s[o++]=e,s.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o)}function One(t,e){let n=t.byteLength;var i,r;if(n<256){var{target:i,position:r}=e(n+2);i[r++]=196,i[r++]=n}else if(n<65536){var{target:i,position:r}=e(n+3);i[r++]=197,i[r++]=n>>8,i[r++]=n&255}else{var{target:i,position:r,targetView:s}=e(n+5);i[r++]=198,s.setUint32(r,n),r+=4}i.set(t,r)}function Ast(t,e,n,i){let r=t.length;switch(r){case 1:e[n++]=212;break;case 2:e[n++]=213;break;case 4:e[n++]=214;break;case 8:e[n++]=215;break;case 16:e[n++]=216;break;default:r<256?(e[n++]=199,e[n++]=r):r<65536?(e[n++]=200,e[n++]=r>>8,e[n++]=r&255):(e[n++]=201,e[n++]=r>>24,e[n++]=r>>16&255,e[n++]=r>>8&255,e[n++]=r&255)}return e[n++]=i,e.set(t,n),n+=r,n}function Mst(t,e){let n,i=e.length*6,r=t.length-i;for(e.sort((s,o)=>s.offset>o.offset?1:-1);n=e.pop();){let s=n.offset,o=n.id;t.copyWithin(s+i,s,r),i-=6;let a=s+i;t[a++]=214,t[a++]=105,t[a++]=o>>24,t[a++]=o>>16&255,t[a++]=o>>8&255,t[a++]=o&255,r=s}return t}function zw(t){if(t.Class){if(!t.pack&&!t.write)throw new Error("Extension has no pack or write function");if(t.pack&&!t.type)throw new Error("Extension has no type (numeric code to identify the extension)");BW.unshift(t.Class),aL.unshift(t)}wst(t)}var Eye=new Mye({useRecords:!1});Eye.pack;Eye.pack;var Est=512,Cst=1024,Lne=new Mye({structuredClone:!0});zw({Class:ns.prototype.constructor,type:1,write(t){return{...t}},read(t){return Object.setPrototypeOf(t,ns.prototype),t}});zw({Class:Ci.prototype.constructor,type:2,write(t){return[...t]},read(t){return Object.setPrototypeOf(t,Ci.prototype),t}});zw({Class:Ou.prototype.constructor,type:3,write(t){return[...t]},read(t){return Object.setPrototypeOf(t,Ou.prototype),t}});zw({Class:bne.prototype.constructor,type:4,write(t){return t.id},read(t){return new bne(t)}});zw({Class:wne.prototype.constructor,type:5,write(t){return t.data},read(t){return new wne(t)}});zw({Class:no.prototype.constructor,type:6,write(t){return{...t}},read(t){return Object.setPrototypeOf(t,no.prototype),t}});function Tst(t){var e=0;if(t.length===0)return e;for(let n=0;n<t.length;n++){let i=t[n];e=(e<<5)-e+i,e=e&e}return e}function JG(t){if(CW(t))return t;if(Array.isArray(t))return t.map(JG);if(typeof t=="object"&&t!==null){let e={};for(let n of Object.keys(t).sort())e[n]=JG(t[n]);return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),e}else return t}var ZG;(t=>{function e(r){return Lne.pack(r)}t.serialize=e;function n(r){return Lne.unpack(r)}t.deserialize=n;function i(r){return Tst(e(JG(r))).toString()}t.checksum=i})(ZG||(ZG={}));var Rne;(t=>{function e(i,r){return i[0]===r[0]&&i[1]===r[1]}t.isEqual=e;function n(i,r,s){return[i[0]+(r[0]-i[0])*s,i[1]+(r[1]-i[1])*s]}t.lerp=n})(Rne||(Rne={}));var eb;(t=>{function e(l,c){return l[0]===c[0]&&l[1]===c[1]&&l[2]===c[2]}t.isEqual=e;function n(l,c){return[l[0]+c[0],l[1]+c[1],l[2]+c[2]]}t.add=n;function i(l,c){return[l[0]-c[0],l[1]-c[1],l[2]-c[2]]}t.sub=i;function r(l,c){return[l[0]/c[0],l[1]/c[1],l[2]/c[2]]}t.div=r;function s(l,c){return[l[0]*c[0],l[1]*c[1],l[2]*c[2]]}t.mul=s;function o(l,c){return Math.hypot(l[0]-c[0],l[1]-c[1],l[2]-c[2])}t.dist=o;function a(l,c,h){return[l[0]+(c[0]-l[0])*h,l[1]+(c[1]-l[1])*h,l[2]+(c[2]-l[2])*h]}t.lerp=a})(eb||(eb={}));var Ine;(t=>{function e(i,r){return i[0]===r[0]&&i[1]===r[1]&&i[2]===r[2]&&i[3]===r[3]}t.isEqual=e;function n(i,r,s){return[i[0]+(r[0]-i[0])*s,i[1]+(r[1]-i[1])*s,i[2]+(r[2]-i[2])*s,i[3]+(r[3]-i[3])*s]}t.lerp=n})(Ine||(Ine={}));var Zb;(t=>{t.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function e(r,s){for(let o=0;o<16;o++)if(r[o]!==s[o])return!1;return!0}t.isEqual=e;function n(r){return r??t.identity}t.simplify=n;function i(r,s){let o=s.slice(0);for(var a=0,l=s.length;a<l;a+=3){let c=r[3]*s[a]+r[7]*s[a+1]+r[11]*s[a+2]+r[15];o[a]=(r[0]*s[a]+r[4]*s[a+1]+r[8]*s[a+2]+r[12])/c,o[a+1]=(r[1]*s[a]+r[5]*s[a+1]+r[9]*s[a+2]+r[13])/c,o[a+2]=(r[2]*s[a]+r[6]*s[a+1]+r[10]*s[a+2]+r[14])/c}return o}t.applyMatrix4=i})(Zb||(Zb={}));var bc;(t=>{function e(a){return typeof a=="object"&&typeof a.r=="number"&&typeof a.g=="number"&&typeof a.b=="number"}t.isRGB=e,t.white={r:1,g:1,b:1},t.red={r:1,g:0,b:0},t.black={r:0,g:0,b:0};function n(a){return{r:Math.round(a.r*255),g:Math.round(a.g*255),b:Math.round(a.b*255),a:1}}t.toRgb255a1=n;function i(a){return{r:a.r,g:a.g,b:a.b}}t.clone=i;function r(a){return a=Math.floor(a),{r:(a>>16&255)/255,g:(a>>8&255)/255,b:(a&255)/255}}t.fromHex=r;function s(a,l){return a.r===l.r&&a.g===l.g&&a.b===l.b}t.equals=s;function o(a,l,c){return{r:a.r+(l.r-a.r)*c,g:a.g+(l.g-a.g)*c,b:a.b+(l.b-a.b)*c}}t.lerp=o})(bc||(bc={}));var vf;(t=>{t.white={...bc.white,a:1},t.transparent={...bc.white,a:0};function e(o){return{r:o[0],g:o[1],b:o[2],a:o[3]}}t.from0to1=e;function n(o,a){return{...bc.fromHex(o),a}}t.fromHexAndA=n;function i(o){return{r:Math.round(o.r*255),g:Math.round(o.g*255),b:Math.round(o.b*255),a:o.a}}t.toRgb255a1=i;function r(o,a){return bc.equals(o,a)&&o.a===a.a}t.equals=r;function s(o,a,l){return{r:o.r+(a.r-o.r)*l,g:o.g+(a.g-o.g)*l,b:o.b+(a.b-o.b)*l,a:o.a+(a.a-o.a)*l}}t.lerp=s})(vf||(vf={}));var QG;(t=>t.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(QG||(QG={}));var Bne;(t=>t.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(Bne||(Bne={}));var kne;(t=>t.defaultData={control1:[.5,.05],control2:[.1,.3]})(kne||(kne={}));var Mv;(t=>{t.all=["PerspectiveCamera","OrthographicCamera"];function e(n){return t.all.includes(n)}t.is=e})(Mv||(Mv={}));var T2;(t=>{t.DefaultUp=[0,1,0],t.DefaultTargetOffset=1e3,t.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1,autoZoom:!1,autoZoomFrustumSize:790},up:t.DefaultUp,isUpVectorFlipped:!1,targetOffset:t.DefaultTargetOffset};function e(n){return n.type==="PerspectiveCamera"?n.perspective.zoom:n.orthographic.zoom}t.getZoom=e})(T2||(T2={}));var sm;(t=>{function e(i,r=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(i[0],i[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[i[0]+i[0]*r,0,0]},grid:{count:[2,2,2],size:i.map(s=>s*(1+r)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}t.defaultData=e;function n(i,r){let s={...i};if(Pst.forEach(o=>{Object.assign(s,{[o]:r[o]??i[o]})}),s.radial={...i.radial},r.radial){let o=i.radial,a=r.radial;Dst.forEach(l=>{Object.assign(s.radial,{[l]:a[l]??o[l]})})}if(s.linear={...i.linear},r.linear){let o=i.linear,a=r.linear;Ost.forEach(l=>{Object.assign(s.linear,{[l]:a[l]??o[l]})})}if(s.grid={...i.grid},r.grid){let o=i.grid,a=r.grid;Lst.forEach(l=>{Object.assign(s.grid,{[l]:a[l]??o[l]})})}if(s.toObject={...i.toObject},r.toObject){let o=i.toObject,a=r.toObject;Rst.forEach(l=>{Object.assign(s.toObject,{[l]:a[l]??o[l]})})}if(s.randomnessObject={...i.randomnessObject},r.randomnessObject){let o=i.randomnessObject,a=r.randomnessObject;Ist.forEach(l=>{Object.assign(s.randomnessObject,{[l]:a[l]??o[l]})})}return s}t.merge=n})(sm||(sm={}));var eH;(t=>{t.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let e=["radial","linear","grid","toObject","randomnessObject"];function n(i,r){let s=[];i.count!==void 0&&s.push({type:0,path:r,props:{count:i.count}});for(let o of e){let a=i[o];a&&Object.keys(a).length>0&&s.push({type:0,path:[...r,o],props:a})}return s}t.toOps=n})(eH||(eH={}));var Pst=["count"],Dst=["radius","start","end","position","scale","rotation"],Ost=["position","scale","rotation"],Lst=["count","size"],Rst=["count","position","scale","rotation"],Ist=["strength","scale","rotation","position","movement","seed","freqScale"],tH;(t=>{t.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function e(n){return t.all.includes(n)}t.is=e})(tH||(tH={}));var nH;(t=>{function e(i){return n(i)}t.defaultData=e;function n(i){if(i==="PointLight")return{type:i,color:vf.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:1e5};if(i==="SpotLight")return{type:i,color:vf.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,shadowResolution:1024,shadowRadius:1};if(i==="DirectionalLight")return{type:i,color:vf.white,intensity:1,shadows:!0,size:2e3,depth:1e5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(nH||(nH={}));var iH;(t=>{t.defaultData={castShadow:!0,receiveShadow:!0};function e(n,i){return n.castShadow===i.castShadow&&n.receiveShadow===i.receiveShadow}t.equals=e})(iH||(iH={}));var rH;(t=>{t.defaultData={flatShading:!1,wireframe:!1,side:0};function e(n,i){return n.flatShading===i.flatShading&&n.side===i.side&&n.wireframe===i.wireframe}t.equals=e})(rH||(rH={}));var sH;(t=>t.defaultData={...rH.defaultData,...iH.defaultData})(sH||(sH={}));var lL;(t=>(t.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},t.maxSize=3e7))(lL||(lL={}));var Fne;(t=>{function e(n){return n==="texture"||n==="video"||n==="color"||n==="depth"||n==="normal"||n==="gradient"||n==="noise"||n==="fresnel"||n==="rainbow"||n==="toon"||n==="outline"||n==="transmission"||n==="matcap"||n==="displace"||n==="light"}t.is=e})(Fne||(Fne={}));var Nne;(t=>{function e(n){return n==="phong"||n==="toon"||n==="lambert"||n==="physical"}t.is=e})(Nne||(Nne={}));var Bst=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],kst=["wrapping","image","video"],pc;(t=>{function e(s,o){let{texture:a,...l}=o;if(Object.assign(s,l),a){let c=s.texture;c&&Object.assign(c,a)}}t.patch=e;function n(s,o){return s==="light"&&o?i(o):r(s)}t.defaultData=n;function i(s){switch(s){case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",alpha:.6,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}function r(s){switch(s){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"texture",projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"video",projection:0,texture:{video:lL.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:bc.fromHex(5526619)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...bc.fromHex(6710886),a:1},colorB:{...bc.fromHex(6710886),a:1},colorC:{...bc.fromHex(16777215),a:1},colorD:{...bc.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:vf.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{type:"toon",alpha:1,visible:!0,mode:0,positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:vf.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{type:"outline",alpha:1,visible:!0,mode:0,outlineColor:vf.fromHexAndA(0,1),contourColor:vf.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}})(pc||(pc={}));var Xh;(t=>{function e(c){return!c.layers.some(h=>h.data.type==="texture"&&h.data.projection!==0||h.data.type==="depth"&&!h.data.isWorldSpace||h.data.type==="noise"||h.data.type==="displace")}t.isMergable=e;function n(c){let h="";return c.layers.forEach(u=>{Object.entries(u.data).forEach(([d,f])=>{h+=`${d}${f}`,Array.isArray(f)?f.forEach(p=>h+=`${p}`):typeof f=="object"?Object.values(f).forEach(p=>{typeof p=="number"?h+=`${p.toFixed(4)}`:h+=`${p}`}):h+=`${f}`})}),h}t.getHash=n;function i(){return{layers:new Ci}}t.defaultEmptyData=i;function r(c="layer1",h="layer2"){return o("phong",c,h)}t.defaultData=r;function s(c,h){return{...c,name:h}}t.withName=s;function o(c,h="layer1",u="layer2"){let d=new Ci;return d.push({fi:0,data:pc.defaultData("light",c),id:h}),d.push({fi:1,data:pc.defaultData("color"),id:u}),{layers:d}}t.defaultTwoLayerData=o;function a(c,h="phong",u="layer1",d="layer2"){let f=pc.defaultData("texture");Object.assign(f.texture,{image:c});let p=new Ci;return p.push({fi:0,data:f,id:u}),p.push({fi:1,data:pc.defaultData("light",h),id:d}),{layers:p}}t.defaultTwoLayerTextureData=a;function l(c,h="phong",u="layer1",d="layer2"){let f=pc.defaultData("video");Object.assign(f.texture,{video:c});let p=new Ci;return p.push({fi:0,data:f,id:u}),p.push({fi:1,data:pc.defaultData("light",h),id:d}),{layers:p}}t.defaultTwoLayerVideoTextureData=l})(Xh||(Xh={}));var cL;(t=>{function e(){return{points:new Ci,roundness:0,shapeHoles:[],isClosed:!1}}t.defaultData=e})(cL||(cL={}));var uL;(t=>{function e(){return{points:new Ci,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}t.defaultData=e})(uL||(uL={}));var Cye={type:"Ellipse",width:100,height:100,spikes:64,angle:360,innerRadius:0},oH;(t=>{function e(n,i){let r={...n};return Fst.forEach(s=>{Object.assign(r,{[s]:i[s]??n[s]})}),r}t.merge=e})(oH||(oH={}));var Tye={shape:Cye,depth:1,offset:0,bevel:0,bevelSides:1,angle:0,twist:0,startScale:1,endScale:1},Fst=["depth","offset","angle","twist","startScale","endScale"],hL;(t=>{function e(i){return i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"}t.is2DParametricMesh=e;function n(i){return i==="PolygonGeometry"||i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"||i==="PathGeometry"||i==="VectorGeometry"||i==="ConeGeometry"||i==="CubeGeometry"||i==="CylinderGeometry"||i==="DodecahedronGeometry"||i==="HelixGeometry"||i==="IcosahedronGeometry"||i==="LatheGeometry"||i==="PyramidGeometry"||i==="SphereGeometry"||i==="PlaneGeometry"||i==="BackdropGeometry"||i==="TorusGeometry"||i==="TorusKnotGeometry"||i==="BooleanGeometry"||i==="TextGeometry"}t.isParametricMesh=n})(hL||(hL={}));var aH;(t=>{function e(n,i){let r={...n};return Object.assign(r,i),r.type==="PathGeometry"&&"extrusion"in i&&i.extrusion&&(r.extrusion={...n.extrusion},Object.assign(r.extrusion,oH.merge(r.extrusion,i.extrusion))),r}t.merge=e})(aH||(aH={}));var tb;(t=>{function e(n){if(n==="RectangleGeometry")return{width:320,height:320,type:n,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(n==="PathGeometry")return{type:n,width:1,height:1,depth:1,path:uL.defaultData(),extrusion:Tye};if(n==="VectorGeometry")return{width:1,height:1,type:n,subdivisions:12,shape:cL.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(n==="BooleanGeometry")return{type:n,operation:2,width:0,height:0,depth:0,phongAngle:35};if(n==="TextGeometry")return{type:n,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:"",textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};throw new Error("not implemented")}t.defaultData=e})(tb||(tb={}));var zne;(t=>{function e(i){return i==="Component"||i==="Instance"}t.isComponentRelated=e;function n(i){return i==="Empty"||i==="Instance"}t.isEmptyOrComponent=n})(zne||(zne={}));var Qb;(t=>{t.identity={...QG.identity,hiddenMatrix:Zb.identity};function e(r){return{position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix}}t.fromObject=e;function n(r,s){return{position:(s==null?void 0:s.position)||r.position,rotation:(s==null?void 0:s.rotation)||r.rotation,scale:(s==null?void 0:s.scale)||r.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||r.hiddenMatrix}}t.merge=n;function i(r,s){return{position:eb.isEqual(r.position,s.position)?null:s.position,rotation:eb.isEqual(r.rotation,s.rotation)?null:s.rotation,scale:eb.isEqual(r.scale,s.scale)?null:s.scale,hiddenMatrix:Zb.isEqual(r.hiddenMatrix,s.hiddenMatrix)?null:s.hiddenMatrix}}t.diff=i})(Qb||(Qb={}));var lH;(t=>t.defaultData={fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(lH||(lH={}));var Lc;(t=>t.defaultData={states:new Ci,events:new Ci,visible:!0,raycastLock:!1,physics:null,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...Qb.identity,cloner:null})(Lc||(Lc={}));var Une;(t=>t.defaultData={type:"Empty",...Lc.defaultData})(Une||(Une={}));var Gne;(t=>t.defaultData={type:"Component",...Lc.defaultData})(Gne||(Gne={}));var nb;(t=>t.defaultData={type:"Mesh",...Lc.defaultData,...sH.defaultData})(nb||(nb={}));var dL;(t=>t.defaultData={...Lc.defaultData,...Qb.identity,...T2.defaultData})(dL||(dL={}));var Hne;(t=>{function e(n){return{...Lc.defaultData,...nH.defaultData(n)}}t.defaultData=e})(Hne||(Hne={}));var fL;(t=>{function e(i,r,s=0){for(;s<r.length;){let o=i?i[r[s]]:void 0;if(r.length===s+1)return o;if(o)i=o.descendants,s+=1;else return}}t.resolveWithDes=e;function n(i,r,s=0){let o=e(i,r,s);if(o){let a=Object.keys(o);if(a.length===1&&a[0]==="descendants")return}return o}t.resolve=n})(fL||(fL={}));var ew;(t=>{t.rootOverrideProps=["physics"],t.compositeNonOptionalOverrideProps=["geometry"],t.compositeEntireOverrideOverrideProps=["material"];function e(i,r){return{...Lc.defaultData,...r,component:i,overrides:new no,physics:void 0,type:"Instance"}}t.ofComponent=e;function n(i){let r=Qb.fromObject(i.data);return e(i.id,r)}t.fromComponentData=n})(ew||(ew={}));var jne;(t=>(t.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Zb.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:lH.defaultData,states:new Ci,events:new Ci,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...T2.defaultData},t.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},t.defaultMeshObject={name:"Rectangle",...Lc.defaultData,...nb.defaultData,geometry:tb.defaultData("RectangleGeometry"),material:Xh.defaultTwoLayerData("phong","layer1","layer2")},t.defaultBooleanObject={name:"Boolean",...Lc.defaultData,...nb.defaultData,geometry:tb.defaultData("BooleanGeometry"),material:Xh.defaultTwoLayerData("phong","layer1","layer2")},t.defaultTextObject={name:"Text",...Lc.defaultData,...nb.defaultData,geometry:tb.defaultData("TextGeometry"),material:Xh.defaultTwoLayerData("phong","layer1","layer2")}))(jne||(jne={}));var Tx;(t=>{function e(s,o){let a={name:o};return s.type==="Mesh"?(a.geometry={},"material"in s&&(a.material={layers:new no}),"materials"in s&&(a.materials=s.materials.map(l=>({layers:new no})))):Mv.is(s.type)&&(a.perspective={},a.orthographic={}),a}t.newEmpty=e;function n(s,o){if(o===void 0)return s;let a={...s};return"material"in a&&"material"in o&&o.material&&(a.material=sL(a.material,l=>{if(typeof l!="string")for(let[c,h]of Object.entries(o.material.layers)){let u=l.layers.data(c);u&&pc.patch(u,h)}}).data),a.materials&&o.materials&&(a.materials=sL(a.materials,l=>{var c,h;for(let u=0;u<a.materials.length;u++){let d=o.materials[u];if(typeof d!="string")for(let[f,p]of Object.entries(d.layers)){let m=(h=(c=l[u])==null?void 0:c.layers)==null?void 0:h.data(f);m&&pc.patch(m,p)}}}).data),a}function i(s,o){let a,l=[],c={orthographic:0,perspective:0,geometry:0};function h(u,d){for(let[f,p]of Object.entries(d.layers)){let{texture:m,...g}=p;if(m!==void 0&&Object.keys(m).length>0){let v={path:[...u,"layers",f,"texture"],props:m,type:0};l.push(v)}if(Object.keys(g).length>0){let v={path:[...u,"layers",f],props:g,type:0};l.push(v)}}}for(let[u,d]of Object.entries(o))if(u!=="name")if(u==="cloner")l.push(...eH.toOps(d,["cloner"]));else if(u==="pathSnapping")l.push({path:[u],props:{slide:d.slide,offset:d.offset},type:0});else if(u==="material")h(["material"],d);else if(u==="materials")for(let[f,p]of Object.entries(d))h(["materials",f],p);else if(c[u]===0){if(u==="geometry"&&d.extrusion!==void 0){let f={path:[u,"extrusion"],props:d.extrusion,type:0};l.push(f),d={...d},delete d.extrusion}if(Object.keys(d).length>0){let f={path:[u],props:d,type:0};l.push(f)}}else a===void 0&&(a={path:[],props:{},type:0},l.push(a)),a.props[u]=d;return l}t.toOps=i;function r(s,o){var l,c,h,u,d,f;if(o===void 0)return s;let a={...s};if(Object.assign(a,Qb.merge(a,o)),Object.assign(a,{pathSnapping:Object.assign({},a.pathSnapping,{slide:((l=o.pathSnapping)==null?void 0:l.slide)??((c=a.pathSnapping)==null?void 0:c.slide)??0,offset:((h=o.pathSnapping)==null?void 0:h.offset)??((u=a.pathSnapping)==null?void 0:u.offset)??0})}),Mv.is(s.type)){a.orthographic={...a.orthographic},a.perspective={...a.perspective};let p=o;((d=p.orthographic)==null?void 0:d.zoom)!==void 0&&(a.orthographic.zoom=p.orthographic.zoom),((f=p.perspective)==null?void 0:f.zoom)!==void 0&&(a.perspective.zoom=p.perspective.zoom),p.isUpVectorFlipped!==void 0&&(a.isUpVectorFlipped=p.isUpVectorFlipped),p.targetOffset!==void 0&&(a.targetOffset=p.targetOffset)}else if(s.type==="Mesh")"geometry"in o&&Object.assign(a,{geometry:aH.merge(a.geometry,o.geometry)}),(o.material||o.materials)&&(a=n(a,o)),a.cloner&&"cloner"in o&&Object.assign(a,{cloner:sm.merge(a.cloner,o.cloner)});else if(s.type==="Empty")a.cloner&&"cloner"in o&&Object.assign(a,{cloner:sm.merge(a.cloner,o.cloner)});else if(tH.is(s.type)){let p=o;p.intensity!==void 0&&(a.intensity=p.intensity),p.color!==void 0&&(typeof p.color=="string"?a.color=p.color:a.color=bc.clone(p.color))}return a}t.patch=r})(Tx||(Tx={}));var pL;(t=>t.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0,autoZoom:!1})(pL||(pL={}));var cH;(t=>t.defaultData={orbitControls:pL.defaultData,playCamera:null,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:typeof window<"u"?Math.floor(window.devicePixelRatio):1,stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,joystickSizeAndXYOffset:Array(12).fill(0).map((e,n)=>{let i=0,r=0;return n<5?r=-30:n<10&&(r=30),n===0||n===10||n===5?i=30:(n===4||n===11||n===9)&&(i=-30),[120,[i,r],"show"]}),gameControlObject:null})(cH||(cH={}));function tw(t,e){return Object.setPrototypeOf(t,e),t}function Pye(t){return Array.isArray(t)?t:[t]}function Nst(t,e){let n=0;for(;n<t.length&&n<e.length;){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1;n+=1}return n!==e.length?-1:n!==t.length?1:0}var mL;(t=>t.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="})(mL||(mL={}));var uH;(t=>{function e(){let r={};return r["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},tw(r,ns.prototype)}t.defaultColors=e;function n(r){let s={};return r!=null&&r.withAITexture&&(s["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...mL.emptyImage,name:"AI generated image"}),tw(s,ns.prototype)}t.defaultImages=n;function i(){return{materials:new ns,images:new ns,videos:new ns,colors:new ns,audios:new ns,fonts:new ns,penumbraSize:[2,2,2]}}t.emptyData=i})(uH||(uH={}));var zst=typeof global=="object"&&global&&global.Object===Object&&global,Dye=zst,Ust=typeof self=="object"&&self&&self.Object===Object&&self,Gst=Dye||Ust||Function("return this")(),pd=Gst,Hst=pd.Symbol,Uc=Hst,Oye=Object.prototype,jst=Oye.hasOwnProperty,Vst=Oye.toString,vS=Uc?Uc.toStringTag:void 0;function Wst(t){var e=jst.call(t,vS),n=t[vS];try{t[vS]=void 0;var i=!0}catch{}var r=Vst.call(t);return i&&(e?t[vS]=n:delete t[vS]),r}var $st=Wst,qst=Object.prototype,Xst=qst.toString;function Yst(t){return Xst.call(t)}var Kst=Yst,Jst="[object Null]",Zst="[object Undefined]",Vne=Uc?Uc.toStringTag:void 0;function Qst(t){return t==null?t===void 0?Zst:Jst:Vne&&Vne in Object(t)?$st(t):Kst(t)}var Qv=Qst;function eot(t){return t!=null&&typeof t=="object"}var jf=eot,tot="[object Symbol]";function not(t){return typeof t=="symbol"||jf(t)&&Qv(t)==tot}var kW=not;function iot(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}var Lye=iot,rot=Array.isArray,Nu=rot,sot=1/0,Wne=Uc?Uc.prototype:void 0,$ne=Wne?Wne.toString:void 0;function Rye(t){if(typeof t=="string")return t;if(Nu(t))return Lye(t,Rye)+"";if(kW(t))return $ne?$ne.call(t):"";var e=t+"";return e=="0"&&1/t==-sot?"-0":e}var oot=Rye;function aot(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ev=aot;function lot(t){return t}var cot=lot,uot="[object AsyncFunction]",hot="[object Function]",dot="[object GeneratorFunction]",fot="[object Proxy]";function pot(t){if(!Ev(t))return!1;var e=Qv(t);return e==hot||e==dot||e==uot||e==fot}var Iye=pot,mot=pd["__core-js_shared__"],x4=mot,qne=function(){var t=/[^.]+$/.exec(x4&&x4.keys&&x4.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function got(t){return!!qne&&qne in t}var vot=got,yot=Function.prototype,xot=yot.toString;function bot(t){if(t!=null){try{return xot.call(t)}catch{}try{return t+""}catch{}}return""}var ey=bot,wot=/[\\^$.*+?()[\]{}|]/g,_ot=/^\[object .+?Constructor\]$/,Sot=Function.prototype,Aot=Object.prototype,Mot=Sot.toString,Eot=Aot.hasOwnProperty,Cot=RegExp("^"+Mot.call(Eot).replace(wot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tot(t){if(!Ev(t)||vot(t))return!1;var e=Iye(t)?Cot:_ot;return e.test(ey(t))}var Pot=Tot;function Dot(t,e){return t==null?void 0:t[e]}var Oot=Dot;function Lot(t,e){var n=Oot(t,e);return Pot(n)?n:void 0}var ty=Lot,Rot=ty(pd,"WeakMap"),hH=Rot,Xne=Object.create,Iot=function(){function t(){}return function(e){if(!Ev(e))return{};if(Xne)return Xne(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Bot=Iot;function kot(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Fot=kot;function Not(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}var zot=Not,Uot=800,Got=16,Hot=Date.now;function jot(t){var e=0,n=0;return function(){var i=Hot(),r=Got-(i-n);if(n=i,r>0){if(++e>=Uot)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Vot=jot;function Wot(t){return function(){return t}}var $ot=Wot,qot=function(){try{var t=ty(Object,"defineProperty");return t({},"",{}),t}catch{}}(),gL=qot,Xot=gL?function(t,e){return gL(t,"toString",{configurable:!0,enumerable:!1,value:$ot(e),writable:!0})}:cot,Yot=Xot,Kot=Vot(Yot),Jot=Kot;function Zot(t,e){for(var n=-1,i=t==null?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}var Qot=Zot,eat=9007199254740991,tat=/^(?:0|[1-9]\d*)$/;function nat(t,e){var n=typeof t;return e=e??eat,!!e&&(n=="number"||n!="symbol"&&tat.test(t))&&t>-1&&t%1==0&&t<e}var FW=nat;function iat(t,e,n){e=="__proto__"&&gL?gL(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Bye=iat;function rat(t,e){return t===e||t!==t&&e!==e}var NW=rat,sat=Object.prototype,oat=sat.hasOwnProperty;function aat(t,e,n){var i=t[e];(!(oat.call(t,e)&&NW(i,n))||n===void 0&&!(e in t))&&Bye(t,e,n)}var zW=aat;function lat(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),r?Bye(n,a,l):zW(n,a,l)}return n}var VE=lat,Yne=Math.max;function cat(t,e,n){return e=Yne(e===void 0?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=Yne(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),Fot(t,this,a)}}var uat=cat,hat=9007199254740991;function dat(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=hat}var UW=dat;function fat(t){return t!=null&&UW(t.length)&&!Iye(t)}var kye=fat,pat=Object.prototype;function mat(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||pat;return t===n}var GW=mat;function gat(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var vat=gat,yat="[object Arguments]";function xat(t){return jf(t)&&Qv(t)==yat}var Kne=xat,Fye=Object.prototype,bat=Fye.hasOwnProperty,wat=Fye.propertyIsEnumerable,_at=Kne(function(){return arguments}())?Kne:function(t){return jf(t)&&bat.call(t,"callee")&&!wat.call(t,"callee")},HW=_at;function Sat(){return!1}var Aat=Sat,Nye=typeof kn=="object"&&kn&&!kn.nodeType&&kn,Jne=Nye&&typeof En=="object"&&En&&!En.nodeType&&En,Mat=Jne&&Jne.exports===Nye,Zne=Mat?pd.Buffer:void 0,Eat=Zne?Zne.isBuffer:void 0,Cat=Eat||Aat,vL=Cat,Tat="[object Arguments]",Pat="[object Array]",Dat="[object Boolean]",Oat="[object Date]",Lat="[object Error]",Rat="[object Function]",Iat="[object Map]",Bat="[object Number]",kat="[object Object]",Fat="[object RegExp]",Nat="[object Set]",zat="[object String]",Uat="[object WeakMap]",Gat="[object ArrayBuffer]",Hat="[object DataView]",jat="[object Float32Array]",Vat="[object Float64Array]",Wat="[object Int8Array]",$at="[object Int16Array]",qat="[object Int32Array]",Xat="[object Uint8Array]",Yat="[object Uint8ClampedArray]",Kat="[object Uint16Array]",Jat="[object Uint32Array]",$i={};$i[jat]=$i[Vat]=$i[Wat]=$i[$at]=$i[qat]=$i[Xat]=$i[Yat]=$i[Kat]=$i[Jat]=!0;$i[Tat]=$i[Pat]=$i[Gat]=$i[Dat]=$i[Hat]=$i[Oat]=$i[Lat]=$i[Rat]=$i[Iat]=$i[Bat]=$i[kat]=$i[Fat]=$i[Nat]=$i[zat]=$i[Uat]=!1;function Zat(t){return jf(t)&&UW(t.length)&&!!$i[Qv(t)]}var Qat=Zat;function elt(t){return function(e){return t(e)}}var jW=elt,zye=typeof kn=="object"&&kn&&!kn.nodeType&&kn,lM=zye&&typeof En=="object"&&En&&!En.nodeType&&En,tlt=lM&&lM.exports===zye,b4=tlt&&Dye.process,nlt=function(){try{var t=lM&&lM.require&&lM.require("util").types;return t||b4&&b4.binding&&b4.binding("util")}catch{}}(),nw=nlt,Qne=nw&&nw.isTypedArray,ilt=Qne?jW(Qne):Qat,Uye=ilt,rlt=Object.prototype,slt=rlt.hasOwnProperty;function olt(t,e){var n=Nu(t),i=!n&&HW(t),r=!n&&!i&&vL(t),s=!n&&!i&&!r&&Uye(t),o=n||i||r||s,a=o?vat(t.length,String):[],l=a.length;for(var c in t)(e||slt.call(t,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||FW(c,l)))&&a.push(c);return a}var Gye=olt;function alt(t,e){return function(n){return t(e(n))}}var Hye=alt,llt=Hye(Object.keys,Object),clt=llt,ult=Object.prototype,hlt=ult.hasOwnProperty;function dlt(t){if(!GW(t))return clt(t);var e=[];for(var n in Object(t))hlt.call(t,n)&&n!="constructor"&&e.push(n);return e}var flt=dlt;function plt(t){return kye(t)?Gye(t):flt(t)}var VW=plt;function mlt(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var glt=mlt,vlt=Object.prototype,ylt=vlt.hasOwnProperty;function xlt(t){if(!Ev(t))return glt(t);var e=GW(t),n=[];for(var i in t)i=="constructor"&&(e||!ylt.call(t,i))||n.push(i);return n}var blt=xlt;function wlt(t){return kye(t)?Gye(t,!0):blt(t)}var WW=wlt,_lt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Slt=/^\w*$/;function Alt(t,e){if(Nu(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||kW(t)?!0:Slt.test(t)||!_lt.test(t)||e!=null&&t in Object(e)}var Mlt=Alt,Elt=ty(Object,"create"),P2=Elt;function Clt(){this.__data__=P2?P2(null):{},this.size=0}var Tlt=Clt;function Plt(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Dlt=Plt,Olt="__lodash_hash_undefined__",Llt=Object.prototype,Rlt=Llt.hasOwnProperty;function Ilt(t){var e=this.__data__;if(P2){var n=e[t];return n===Olt?void 0:n}return Rlt.call(e,t)?e[t]:void 0}var Blt=Ilt,klt=Object.prototype,Flt=klt.hasOwnProperty;function Nlt(t){var e=this.__data__;return P2?e[t]!==void 0:Flt.call(e,t)}var zlt=Nlt,Ult="__lodash_hash_undefined__";function Glt(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=P2&&e===void 0?Ult:e,this}var Hlt=Glt;function Uw(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Uw.prototype.clear=Tlt;Uw.prototype.delete=Dlt;Uw.prototype.get=Blt;Uw.prototype.has=zlt;Uw.prototype.set=Hlt;var eie=Uw;function jlt(){this.__data__=[],this.size=0}var Vlt=jlt;function Wlt(t,e){for(var n=t.length;n--;)if(NW(t[n][0],e))return n;return-1}var dB=Wlt,$lt=Array.prototype,qlt=$lt.splice;function Xlt(t){var e=this.__data__,n=dB(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():qlt.call(e,n,1),--this.size,!0}var Ylt=Xlt;function Klt(t){var e=this.__data__,n=dB(e,t);return n<0?void 0:e[n][1]}var Jlt=Klt;function Zlt(t){return dB(this.__data__,t)>-1}var Qlt=Zlt;function ect(t,e){var n=this.__data__,i=dB(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}var tct=ect;function Gw(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Gw.prototype.clear=Vlt;Gw.prototype.delete=Ylt;Gw.prototype.get=Jlt;Gw.prototype.has=Qlt;Gw.prototype.set=tct;var fB=Gw,nct=ty(pd,"Map"),D2=nct;function ict(){this.size=0,this.__data__={hash:new eie,map:new(D2||fB),string:new eie}}var rct=ict;function sct(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var oct=sct;function act(t,e){var n=t.__data__;return oct(e)?n[typeof e=="string"?"string":"hash"]:n.map}var pB=act;function lct(t){var e=pB(this,t).delete(t);return this.size-=e?1:0,e}var cct=lct;function uct(t){return pB(this,t).get(t)}var hct=uct;function dct(t){return pB(this,t).has(t)}var fct=dct;function pct(t,e){var n=pB(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}var mct=pct;function Hw(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Hw.prototype.clear=rct;Hw.prototype.delete=cct;Hw.prototype.get=hct;Hw.prototype.has=fct;Hw.prototype.set=mct;var mB=Hw,gct="Expected a function";function $W(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(gct);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new($W.Cache||mB),n}$W.Cache=mB;var vct=$W,yct=500;function xct(t){var e=vct(t,function(i){return n.size===yct&&n.clear(),i}),n=e.cache;return e}var bct=xct,wct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_ct=/\\(\\)?/g,Sct=bct(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(wct,function(n,i,r,s){e.push(r?s.replace(_ct,"$1"):i||n)}),e}),Act=Sct;function Mct(t){return t==null?"":oot(t)}var Ect=Mct;function Cct(t,e){return Nu(t)?t:Mlt(t,e)?[t]:Act(Ect(t))}var jw=Cct,Tct=1/0;function Pct(t){if(typeof t=="string"||kW(t))return t;var e=t+"";return e=="0"&&1/t==-Tct?"-0":e}var gB=Pct;function Dct(t,e){e=jw(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[gB(e[n++])];return n&&n==i?t:void 0}var jye=Dct;function Oct(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var qW=Oct,tie=Uc?Uc.isConcatSpreadable:void 0;function Lct(t){return Nu(t)||HW(t)||!!(tie&&t&&t[tie])}var Rct=Lct;function Vye(t,e,n,i,r){var s=-1,o=t.length;for(n||(n=Rct),r||(r=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?Vye(a,e-1,n,i,r):qW(r,a):i||(r[r.length]=a)}return r}var Ict=Vye;function Bct(t){var e=t==null?0:t.length;return e?Ict(t,1):[]}var kct=Bct;function Fct(t){return Jot(uat(t,void 0,kct),t+"")}var Wye=Fct,Nct=Hye(Object.getPrototypeOf,Object),XW=Nct,zct="[object Object]",Uct=Function.prototype,Gct=Object.prototype,$ye=Uct.toString,Hct=Gct.hasOwnProperty,jct=$ye.call(Object);function Vct(t){if(!jf(t)||Qv(t)!=zct)return!1;var e=XW(t);if(e===null)return!0;var n=Hct.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&$ye.call(n)==jct}var Wct=Vct;function $ct(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=t[i+e];return s}var qct=$ct;function Xct(){this.__data__=new fB,this.size=0}var Yct=Xct;function Kct(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var Jct=Kct;function Zct(t){return this.__data__.get(t)}var Qct=Zct;function eut(t){return this.__data__.has(t)}var tut=eut,nut=200;function iut(t,e){var n=this.__data__;if(n instanceof fB){var i=n.__data__;if(!D2||i.length<nut-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new mB(i)}return n.set(t,e),this.size=n.size,this}var rut=iut;function Vw(t){var e=this.__data__=new fB(t);this.size=e.size}Vw.prototype.clear=Yct;Vw.prototype.delete=Jct;Vw.prototype.get=Qct;Vw.prototype.has=tut;Vw.prototype.set=rut;var FD=Vw;function sut(t,e){return t&&VE(e,VW(e),t)}var out=sut;function aut(t,e){return t&&VE(e,WW(e),t)}var lut=aut,qye=typeof kn=="object"&&kn&&!kn.nodeType&&kn,nie=qye&&typeof En=="object"&&En&&!En.nodeType&&En,cut=nie&&nie.exports===qye,iie=cut?pd.Buffer:void 0,rie=iie?iie.allocUnsafe:void 0;function uut(t,e){if(e)return t.slice();var n=t.length,i=rie?rie(n):new t.constructor(n);return t.copy(i),i}var hut=uut;function dut(t,e){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}var fut=dut;function put(){return[]}var Xye=put,mut=Object.prototype,gut=mut.propertyIsEnumerable,sie=Object.getOwnPropertySymbols,vut=sie?function(t){return t==null?[]:(t=Object(t),fut(sie(t),function(e){return gut.call(t,e)}))}:Xye,YW=vut;function yut(t,e){return VE(t,YW(t),e)}var xut=yut,but=Object.getOwnPropertySymbols,wut=but?function(t){for(var e=[];t;)qW(e,YW(t)),t=XW(t);return e}:Xye,Yye=wut;function _ut(t,e){return VE(t,Yye(t),e)}var Sut=_ut;function Aut(t,e,n){var i=e(t);return Nu(t)?i:qW(i,n(t))}var Kye=Aut;function Mut(t){return Kye(t,VW,YW)}var dH=Mut;function Eut(t){return Kye(t,WW,Yye)}var Jye=Eut,Cut=ty(pd,"DataView"),fH=Cut,Tut=ty(pd,"Promise"),pH=Tut,Put=ty(pd,"Set"),mH=Put,oie="[object Map]",Dut="[object Object]",aie="[object Promise]",lie="[object Set]",cie="[object WeakMap]",uie="[object DataView]",Out=ey(fH),Lut=ey(D2),Rut=ey(pH),Iut=ey(mH),But=ey(hH),s0=Qv;(fH&&s0(new fH(new ArrayBuffer(1)))!=uie||D2&&s0(new D2)!=oie||pH&&s0(pH.resolve())!=aie||mH&&s0(new mH)!=lie||hH&&s0(new hH)!=cie)&&(s0=function(t){var e=Qv(t),n=e==Dut?t.constructor:void 0,i=n?ey(n):"";if(i)switch(i){case Out:return uie;case Lut:return oie;case Rut:return aie;case Iut:return lie;case But:return cie}return e});var O2=s0,kut=Object.prototype,Fut=kut.hasOwnProperty;function Nut(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Fut.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var zut=Nut,Uut=pd.Uint8Array,yL=Uut;function Gut(t){var e=new t.constructor(t.byteLength);return new yL(e).set(new yL(t)),e}var KW=Gut;function Hut(t,e){var n=e?KW(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var jut=Hut,Vut=/\w*$/;function Wut(t){var e=new t.constructor(t.source,Vut.exec(t));return e.lastIndex=t.lastIndex,e}var $ut=Wut,hie=Uc?Uc.prototype:void 0,die=hie?hie.valueOf:void 0;function qut(t){return die?Object(die.call(t)):{}}var Xut=qut;function Yut(t,e){var n=e?KW(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Kut=Yut,Jut="[object Boolean]",Zut="[object Date]",Qut="[object Map]",eht="[object Number]",tht="[object RegExp]",nht="[object Set]",iht="[object String]",rht="[object Symbol]",sht="[object ArrayBuffer]",oht="[object DataView]",aht="[object Float32Array]",lht="[object Float64Array]",cht="[object Int8Array]",uht="[object Int16Array]",hht="[object Int32Array]",dht="[object Uint8Array]",fht="[object Uint8ClampedArray]",pht="[object Uint16Array]",mht="[object Uint32Array]";function ght(t,e,n){var i=t.constructor;switch(e){case sht:return KW(t);case Jut:case Zut:return new i(+t);case oht:return jut(t,n);case aht:case lht:case cht:case uht:case hht:case dht:case fht:case pht:case mht:return Kut(t,n);case Qut:return new i;case eht:case iht:return new i(t);case tht:return $ut(t);case nht:return new i;case rht:return Xut(t)}}var vht=ght;function yht(t){return typeof t.constructor=="function"&&!GW(t)?Bot(XW(t)):{}}var xht=yht,bht="[object Map]";function wht(t){return jf(t)&&O2(t)==bht}var _ht=wht,fie=nw&&nw.isMap,Sht=fie?jW(fie):_ht,Aht=Sht,Mht="[object Set]";function Eht(t){return jf(t)&&O2(t)==Mht}var Cht=Eht,pie=nw&&nw.isSet,Tht=pie?jW(pie):Cht,Pht=Tht,Dht=1,Oht=2,Lht=4,Zye="[object Arguments]",Rht="[object Array]",Iht="[object Boolean]",Bht="[object Date]",kht="[object Error]",Qye="[object Function]",Fht="[object GeneratorFunction]",Nht="[object Map]",zht="[object Number]",e1e="[object Object]",Uht="[object RegExp]",Ght="[object Set]",Hht="[object String]",jht="[object Symbol]",Vht="[object WeakMap]",Wht="[object ArrayBuffer]",$ht="[object DataView]",qht="[object Float32Array]",Xht="[object Float64Array]",Yht="[object Int8Array]",Kht="[object Int16Array]",Jht="[object Int32Array]",Zht="[object Uint8Array]",Qht="[object Uint8ClampedArray]",edt="[object Uint16Array]",tdt="[object Uint32Array]",Ii={};Ii[Zye]=Ii[Rht]=Ii[Wht]=Ii[$ht]=Ii[Iht]=Ii[Bht]=Ii[qht]=Ii[Xht]=Ii[Yht]=Ii[Kht]=Ii[Jht]=Ii[Nht]=Ii[zht]=Ii[e1e]=Ii[Uht]=Ii[Ght]=Ii[Hht]=Ii[jht]=Ii[Zht]=Ii[Qht]=Ii[edt]=Ii[tdt]=!0;Ii[kht]=Ii[Qye]=Ii[Vht]=!1;function ND(t,e,n,i,r,s){var o,a=e&Dht,l=e&Oht,c=e&Lht;if(n&&(o=r?n(t,i,r,s):n(t)),o!==void 0)return o;if(!Ev(t))return t;var h=Nu(t);if(h){if(o=zut(t),!a)return zot(t,o)}else{var u=O2(t),d=u==Qye||u==Fht;if(vL(t))return hut(t,a);if(u==e1e||u==Zye||d&&!r){if(o=l||d?{}:xht(t),!a)return l?Sut(t,lut(o,t)):xut(t,out(o,t))}else{if(!Ii[u])return r?t:{};o=vht(t,u,a)}}s||(s=new FD);var f=s.get(t);if(f)return f;s.set(t,o),Pht(t)?t.forEach(function(g){o.add(ND(g,e,n,g,t,s))}):Aht(t)&&t.forEach(function(g,v){o.set(v,ND(g,e,n,v,t,s))});var p=c?l?Jye:dH:l?WW:VW,m=h?void 0:p(t);return Qot(m||t,function(g,v){m&&(v=g,g=t[v]),zW(o,v,ND(g,e,n,v,t,s))}),o}var t1e=ND,ndt=1,idt=4;function rdt(t){return t1e(t,ndt|idt)}var vB=rdt,sdt="__lodash_hash_undefined__";function odt(t){return this.__data__.set(t,sdt),this}var adt=odt;function ldt(t){return this.__data__.has(t)}var cdt=ldt;function xL(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new mB;++e<n;)this.add(t[e])}xL.prototype.add=xL.prototype.push=adt;xL.prototype.has=cdt;var udt=xL;function hdt(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var ddt=hdt;function fdt(t,e){return t.has(e)}var pdt=fdt,mdt=1,gdt=2;function vdt(t,e,n,i,r,s){var o=n&mdt,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),h=s.get(e);if(c&&h)return c==e&&h==t;var u=-1,d=!0,f=n&gdt?new udt:void 0;for(s.set(t,e),s.set(e,t);++u<a;){var p=t[u],m=e[u];if(i)var g=o?i(m,p,u,e,t,s):i(p,m,u,t,e,s);if(g!==void 0){if(g)continue;d=!1;break}if(f){if(!ddt(e,function(v,y){if(!pdt(f,y)&&(p===v||r(p,v,n,i,s)))return f.push(y)})){d=!1;break}}else if(!(p===m||r(p,m,n,i,s))){d=!1;break}}return s.delete(t),s.delete(e),d}var n1e=vdt;function ydt(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n}var xdt=ydt;function bdt(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var wdt=bdt,_dt=1,Sdt=2,Adt="[object Boolean]",Mdt="[object Date]",Edt="[object Error]",Cdt="[object Map]",Tdt="[object Number]",Pdt="[object RegExp]",Ddt="[object Set]",Odt="[object String]",Ldt="[object Symbol]",Rdt="[object ArrayBuffer]",Idt="[object DataView]",mie=Uc?Uc.prototype:void 0,w4=mie?mie.valueOf:void 0;function Bdt(t,e,n,i,r,s,o){switch(n){case Idt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Rdt:return!(t.byteLength!=e.byteLength||!s(new yL(t),new yL(e)));case Adt:case Mdt:case Tdt:return NW(+t,+e);case Edt:return t.name==e.name&&t.message==e.message;case Pdt:case Odt:return t==e+"";case Cdt:var a=xdt;case Ddt:var l=i&_dt;if(a||(a=wdt),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;i|=Sdt,o.set(t,e);var h=n1e(a(t),a(e),i,r,s,o);return o.delete(t),h;case Ldt:if(w4)return w4.call(t)==w4.call(e)}return!1}var kdt=Bdt,Fdt=1,Ndt=Object.prototype,zdt=Ndt.hasOwnProperty;function Udt(t,e,n,i,r,s){var o=n&Fdt,a=dH(t),l=a.length,c=dH(e),h=c.length;if(l!=h&&!o)return!1;for(var u=l;u--;){var d=a[u];if(!(o?d in e:zdt.call(e,d)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=o;++u<l;){d=a[u];var v=t[d],y=e[d];if(i)var x=o?i(y,v,d,e,t,s):i(v,y,d,t,e,s);if(!(x===void 0?v===y||r(v,y,n,i,s):x)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var b=t.constructor,S=e.constructor;b!=S&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof S=="function"&&S instanceof S)&&(m=!1)}return s.delete(t),s.delete(e),m}var Gdt=Udt,Hdt=1,gie="[object Arguments]",vie="[object Array]",IP="[object Object]",jdt=Object.prototype,yie=jdt.hasOwnProperty;function Vdt(t,e,n,i,r,s){var o=Nu(t),a=Nu(e),l=o?vie:O2(t),c=a?vie:O2(e);l=l==gie?IP:l,c=c==gie?IP:c;var h=l==IP,u=c==IP,d=l==c;if(d&&vL(t)){if(!vL(e))return!1;o=!0,h=!1}if(d&&!h)return s||(s=new FD),o||Uye(t)?n1e(t,e,n,i,r,s):kdt(t,e,l,n,i,r,s);if(!(n&Hdt)){var f=h&&yie.call(t,"__wrapped__"),p=u&&yie.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return s||(s=new FD),r(m,g,n,i,s)}}return d?(s||(s=new FD),Gdt(t,e,n,i,r,s)):!1}var Wdt=Vdt;function i1e(t,e,n,i,r){return t===e?!0:t==null||e==null||!jf(t)&&!jf(e)?t!==t&&e!==e:Wdt(t,e,n,i,i1e,r)}var $dt=i1e;function qdt(t,e){return t!=null&&e in Object(t)}var Xdt=qdt;function Ydt(t,e,n){e=jw(e,t);for(var i=-1,r=e.length,s=!1;++i<r;){var o=gB(e[i]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++i!=r?s:(r=t==null?0:t.length,!!r&&UW(r)&&FW(o,r)&&(Nu(t)||HW(t)))}var Kdt=Ydt;function Jdt(t,e){return t!=null&&Kdt(t,e,Xdt)}var Zdt=Jdt;function Qdt(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var eft=Qdt;function tft(t,e){return e.length<2?t:jye(t,qct(e,0,-1))}var nft=tft;function ift(t,e){return $dt(t,e)}var r1e=ift;function rft(t,e){return e=jw(e,t),t=nft(t,e),t==null||delete t[gB(eft(e))]}var sft=rft;function oft(t){return Wct(t)?void 0:t}var aft=oft,lft=1,cft=2,uft=4,hft=Wye(function(t,e){var n={};if(t==null)return n;var i=!1;e=Lye(e,function(s){return s=jw(s,t),i||(i=s.length>1),s}),VE(t,Jye(t),n),i&&(n=t1e(n,lft|cft|uft,aft));for(var r=e.length;r--;)sft(n,e[r]);return n}),gH=hft;function dft(t,e,n,i){if(!Ev(t))return t;e=jw(e,t);for(var r=-1,s=e.length,o=s-1,a=t;a!=null&&++r<s;){var l=gB(e[r]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(r!=o){var h=a[l];c=i?i(h,l,a):void 0,c===void 0&&(c=Ev(h)?h:FW(e[r+1])?[]:{})}zW(a,l,c),a=a[l]}return t}var fft=dft;function pft(t,e,n){for(var i=-1,r=e.length,s={};++i<r;){var o=e[i],a=jye(t,o);n(a,o)&&fft(s,jw(o,t),a)}return s}var mft=pft;function gft(t,e){return mft(t,e,function(n,i){return Zdt(t,i)})}var vft=gft,yft=Wye(function(t,e){return t==null?{}:vft(t,e)}),bL=yft;function xie(t){t.layers.forEach(e=>{if(e.type==="depth"&&e.colorA!==void 0){let n=e.colorA,i=e.colorB,r=[[n.r,n.g,n.b,n.a],[i.r,i.g,i.b,i.a]],s=[0,1];for(let a=2;a<10;a++)r.push(r[1]),s.push(1);let o={...bL(Co(e),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,e.near),far:Math.max(0,e.far),colors:r,steps:s,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(e,o)}else if(e.type==="depth"&&e.gradientType===1&&(e.near<0||e.far<0)){let n={...Co(e),near:Math.max(e.near,0),far:Math.max(e.far,0)};Object.assign(e,n)}})}function zD(t,e){Object.values(t.shared.materials).forEach(n=>e(n))}function UD(t,e){t.scene.objects.traverse((n,i)=>{"materials"in i?i.materials.forEach(r=>{typeof r!="string"&&e(r)}):"material"in i&&typeof i.material!="string"&&e(i.material)})}function xft(t){Object.assign(t.scene.publish,{orbitControls:{...pL.defaultData,...Co(t.scene.publish.orbitControls)}})}function bft(t){Object.assign(t.scene.publish.settings,{video:{...cH.defaultData.settings.video,...Co(t.scene.publish.settings.video)}})}function wft(t){function e(n){if(n.layers){for(let i of Object.values(n.layers))if(i){for(let[r,s]of Object.entries(i))if((Bst.includes(r)||typeof s=="boolean")&&delete i[r],r==="texture")for(let[o,a]of Object.entries(s))(kst.includes(o)||typeof a=="boolean")&&delete s[o]}}}t.scene.objects.traverse((n,i)=>{i.states.forEach(r=>{let s=r;s.material?e(s.material):s.materials&&s.materials.forEach(o=>{e(o)})})})}function _ft(t){t.scene.publish.withBackground=!0}function Sft(t){t.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function Aft(t){t.scene.objects.traverse((e,n)=>{let i=n.cloner;i&&(i.radial.scale=i.radial.scale.map(r=>r+1),i.linear.scale=i.linear.scale.map(r=>r+1))})}function Mft(t){t.scene.objects.traverse((e,n)=>{let i=n.geometry;i&&(i.type==="DodecahedronGeometry"||i.type==="IcosahedronGeometry")&&(i.detail=Math.round(i.detail))})}function Eft(t){t.scene.objects.traverse((e,n)=>{let i=t.scene.objects.unproxy().parent(e);if(i){let r=Co(t.scene.objects.data(i));r&&r.type==="Mesh"&&r.geometry.type==="BooleanGeometry"&&n.type==="Mesh"&&(n.visible=Co(n).booleanExclude!==!0)}})}function Cft(t){t.scene.objects.traverse((e,n)=>{if(n.type==="Mesh"){let i=n;n.geometry.type==="NonParametricGeometry"?i.material!==void 0&&delete i.material:i.materials!==void 0&&delete i.materials}})}function Tft(t){function e(i){Object.setPrototypeOf(i,no.prototype),i.texture&&Object.setPrototypeOf(i.texture,no.prototype)}function n(i){Object.setPrototypeOf(i,no.prototype);for(let r in i)e(i[r])}t.scene.objects.traverse((i,r)=>{r.states.forEach(s=>{let o=s;if(o.material){let a=Co(o.material).layers;n(a),o.material.layers=a}if(o.materials)for(let a=0;a<o.materials.length;a++){let l=o.materials[a],c=Co(l).layers;n(c),l.layers=c}})})}function bie(t){t.layers===void 0&&Object.assign(t,Xh.defaultTwoLayerData("lambert"))}function _4(t){!t.layers||t.layers.forEach(e=>{if(e.type==="depth"&&e.colors.length===10){let n=[...e.colors];n.push(e.colors[9]);let i=[...e.steps];i.push(e.steps[9]);let r={...Co(e),colors:n,steps:i};Object.assign(e,r)}})}function Pft(t){t.scene.objects.traverse((e,n)=>{n.type==="Mesh"&&(n.geometry.type==="BooleanGeometry"||n.geometry.type==="SubdivGeometry")&&(n.geometry.phongAngle=35)})}function wie(t){t.scene.objects.traverse((e,n)=>{"materials"in n?n.materials.forEach(i=>{typeof i!="string"&&_4(i)}):"material"in n&&typeof n.material!="string"&&_4(n.material)}),Object.values(t.shared.materials).forEach(e=>_4(e))}function Dft(t){t.scene.environment.ambientLight.softShadows=!1,t.scene.environment.ambientLight.softShadowQuality="low",t.scene.objects.traverse((e,n)=>{(n.type==="DirectionalLight"||n.type==="SpotLight")&&(n.shadowResolution=1024,n.shadowRadius=1,n.depth=1e5)}),t.shared.penumbraSize=new Array(5).fill(.5)}function Oft(t){t.shared.audios=tw({},ns.prototype)}function Lft(t){t.shared.videos=tw({},ns.prototype)}function Rft(t){let e=t.shared.materials;Object.entries(e).forEach(([n,i])=>{if(!i.layers){let r={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(e,{[n]:r})}})}function Ift(t){Object.entries(Co(t.shared.images)).filter(e=>e[1].asset===!1).map(e=>e[0]).forEach(e=>{delete t.shared.images[e]}),Object.entries(Co(t.shared.audios)).filter(e=>e[1].asset===!1).map(e=>e[0]).forEach(e=>{delete t.shared.audios[e]})}function Bft(t){t.scene.publish.settings.web.preload=!1}function _ie(t){t.layers&&t.layers.forEach(e=>{e.type==="depth"&&e.num!==void 0&&(e.colors=e.colors.slice(0,e.num),e.steps=e.steps.slice(0,e.num),delete e.num)})}function kft(t){t.shared.fonts=tw({},ns.prototype)}function Fft(t){return t.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function Nft(t){let e=[];t.scene.objects.traverse((n,i)=>{let r=i;if(r.type==="TextFrame"){let s=Xh.defaultTwoLayerData("phong"),o=typeof r.color=="string"?t.shared.colors[r.color]:r.color;s.layers[1].data.color={r:o.r,g:o.g,b:o.b},s.layers[1].data.alpha=r.alpha;let a=Fft(r.font);t.shared.fonts[a]===void 0&&(t.shared.fonts[a]={name:a});let l={name:r.name,...Lc.defaultData,...nb.defaultData,flatShading:!1,wireframe:!1,geometry:{...tb.defaultData("TextGeometry"),width:r.width,height:r.height,font:a,depth:0,horizontalAlign:r.horizontalAlign,verticalAlign:r.verticalAlign,fontSize:r.fontSize*1.40625,lineHeight:r.lineHeight/1.40625,letterSpacing:r.letterSpacing-1,text:r.text,textTransform:r.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:s,states:Co(r.states),events:Co(r.events),visible:r.visible,raycastLock:r.raycastLock,position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix},c=Co(t.scene.objects).parent(n);t.scene.objects.insertAfter(c??null,n,[{id:n+"new",data:l,children:[]}]),e.push(n)}}),e.forEach(n=>{t.scene.objects.delete(n)})}function zft(t){let e={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};t.scene.objects.traverse((n,i)=>{i.events.forEach(r=>{if(e[Number(r.type)])if(Object.assign(r,{type:e[Number(r.type)]}),r.type==="Audio"&&"audioEvent"in r&&(Object.assign(r,{playAudio:r.audioEvent}),delete r.audioEvent),r.type==="GameControl")Object.assign(r,{gameActions:{idle:new Ci,move:new Ci,jump:new Ci}});else{let s=new Ci;Object.assign(r,{actions:s}),(r.type==="MouseDown"||r.type==="MouseUp"||r.type==="KeyDown"||r.type==="KeyUp")&&"url"in r&&s.push({fi:0,id:zi.generateUUID(),data:{type:"Link",url:r.url,delay:0}}),"targets"in r&&(r.targets.forEach((o,a,l)=>{let c={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},h={easing:o.easing,duration:o.duration};o.easing===6?Object.assign(h,bL(o,"mass","stiffness","damping","velocity")):o.easing===5&&Object.assign(h,{control1:{...o.control1},control2:{...o.control2}});let u={repeat:o.repeat?-1:0,delay:o.delay,delayDirection:o.delayDirection,direction:o.cycle&&o.rewind?"pingpong-rewind":o.cycle?"pingpong":"normal"},d={state:o.state,...u,...h},f={allowSlerp:!0,type:"Transition",object:o.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Ci({fi:0,id:zi.generateUUID(),data:c},{fi:1,id:zi.generateUUID(),data:d})};s.push({fi:l,id:a,data:f})}),delete r.targets)}})})}function Uft(t){t.scene.objects.traverse((e,n)=>{function i(r,s){var l;let o=new Ci,a=[];if(n.events.forEach((c,h,u)=>{if(c.type==="Audio"&&c.trigger===s){let d;a.push(h),c.interaction==="play"?d={...bL(c,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in c?c.after:void 0,toggle:"after"in c?c.toggle:void 0,type:"Audio"}:(c.interaction==="pause"||c.interaction==="stop")&&(d={...bL(c,"interaction","delay","object","playAudio"),type:"Audio"}),d&&o.push({fi:u,id:h,data:d})}}),a.forEach(c=>n.events.delete(c)),o.length){let c=(l=n.events.find(h=>h.type===r))==null?void 0:l.data;c?"actions"in c&&c.actions.insertBefore(null,o):n.events.insertBefore(null,[{id:zi.generateUUID(),data:{type:r,actions:o}}])}}i("Start","start"),i("MouseDown","mouseDown"),i("MouseUp","mouseUp"),i("KeyDown","keyDown"),i("KeyUp","keyUp")})}function Sie(t){var n;let e=(n=t.layers.find(i=>i.type==="light"))==null?void 0:n.data;if((e==null?void 0:e.category)==="basic"){let i=pc.defaultData("light","phong"),r=e;Object.assign(r,i),r.visible=!1}}function Aie(t){zD(t,Sie),UD(t,Sie)}function Gft(t){t.scene.objects.traverse((e,n)=>{n.type==="Mesh"&&n.geometry.type==="SubdivGeometry"&&(n.geometry.scaleBaked||(n.geometry.scaleBaked=[1,1,1]))})}function Hft(t){t.scene.objects.traverse((e,n)=>{(n.type==="Empty"||n.type==="Mesh")&&n.cloner&&!n.cloner.randomnessObject&&!n.cloner.toObject&&!n.cloner.randomness&&(n.cloner={...n.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function jft(t){t.scene.objects.traverse((e,n)=>{n.type==="Mesh"&&n.geometry.type==="NonParametricGeometry"&&!("material"in n)&&!("materials"in n)&&(n.material=Xh.defaultTwoLayerData("phong"))})}function Vft(t){t.scene.publish.orbitControls.autoZoom===void 0&&(t.scene.publish.orbitControls.autoZoom=!1),t.scene.objects.traverse((e,n)=>{(n.type==="OrthographicCamera"||n.type==="PerspectiveCamera")&&(n.orthographic.autoZoom===void 0&&(n.orthographic.autoZoom=!1),n.orthographic.autoZoomFrustumSize===void 0&&(n.orthographic.autoZoomFrustumSize=790))})}function Wft(t){t.scene.objects.traverse((e,n)=>{n.pathSnapping===void 0&&(n.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),n.pathSnapping.offset===void 0&&(n.pathSnapping.offset=0)})}function $ft(t){t.scene.publish.mouseEventTarget===void 0&&(t.scene.publish.mouseEventTarget="canvas"),t.scene.publish.settings.web.hint===void 0&&(t.scene.publish.settings.web.hint=!1)}function qft(t){let{video:e}=t.scene.publish.settings;e.format==="gif"&&e.fps>48&&(e.fps=15)}function Xft(t){t.scene.objects.traverse((e,n)=>{n.events.forEach(i=>{i.type==="GameControl"&&(i.resetYPosition=Math.abs(i.resetYPosition-n.position[1]))})})}var Mie=36;function Yft(t){let e=t.schema??0;e!==Mie&&(console.warn("updating from ",e,"to ",Mie),e<1&&(UD(t,xie),zD(t,xie),t.schema=1),e<2&&(xft(t),t.schema=2),e<3&&(wft(t),t.schema=3),e<4&&(_ft(t),t.schema=4),e<5&&(Sft(t),t.schema=5),e<6&&(Aft(t),t.schema=6),e<7&&(Mft(t),t.schema=7),e<8&&(t.schema=8),e<9&&(wie(t),t.schema=9),e<10&&(Pft(t),t.schema=10),e<11&&(Dft(t),t.schema=11),e<12&&(wie(t),t.schema=12),e<13&&(Oft(t),t.schema=13),e<14&&(Rft(t),t.schema=14),e<15&&(Ift(t),t.schema=15),e<16&&(Bft(t),t.schema=16),e<17&&(UD(t,_ie),zD(t,_ie),t.schema=17),e<18&&(UD(t,bie),zD(t,bie),t.schema=18),e<19&&(bft(t),t.schema=19),e<20&&(kft(t),Nft(t),t.schema=20),e<21&&(zft(t),Uft(t),t.schema=21),e<22&&(Aie(t),t.schema=22),e<23&&(Gft(t),t.schema=23),e<24&&(Hft(t),t.schema=24),(e<25||t.shared.videos===void 0)&&(Lft(t),e<25&&(t.schema=25)),e<26&&(Eft(t),t.schema=26),e<27&&(Cft(t),t.schema=27),e<28&&(Aie(t),t.schema=28),e<29&&(Tft(t),t.schema=29),e<30&&(jft(t),t.schema=30),e<31&&(Vft(t),t.schema=31),e<33&&(Wft(t),t.schema=33),e<34&&($ft(t),t.schema=34),e<35&&(qft(t),t.schema=35),e<36&&(Xft(t),t.schema=36))}var yS=oB(tst()),Kft=.5*(Math.sqrt(3)-1),xS=(3-Math.sqrt(3))/6,Jft=1/3,ah=1/6,cM=t=>Math.floor(t)|0,Eie=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),S4=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function A4(t=Math.random){let e=s1e(t),n=new Float64Array(e).map(r=>Eie[r%12*2]),i=new Float64Array(e).map(r=>Eie[r%12*2+1]);return function(r,s){let o=0,a=0,l=0,c=(r+s)*Kft,h=cM(r+c),u=cM(s+c),d=(h+u)*xS,f=h-d,p=u-d,m=r-f,g=s-p,v,y;m>g?(v=1,y=0):(v=0,y=1);let x=m-v+xS,b=g-y+xS,S=m-1+2*xS,A=g-1+2*xS,E=h&255,M=u&255,C=.5-m*m-g*g;if(C>=0){let L=E+e[M],I=n[L],R=i[L];C*=C,o=C*C*(I*m+R*g)}let T=.5-x*x-b*b;if(T>=0){let L=E+v+e[M+y],I=n[L],R=i[L];T*=T,a=T*T*(I*x+R*b)}let D=.5-S*S-A*A;if(D>=0){let L=E+1+e[M+1],I=n[L],R=i[L];D*=D,l=D*D*(I*S+R*A)}return 70*(o+a+l)}}function Zft(t=Math.random){let e=s1e(t),n=new Float64Array(e).map(s=>S4[s%12*3]),i=new Float64Array(e).map(s=>S4[s%12*3+1]),r=new Float64Array(e).map(s=>S4[s%12*3+2]);return function(s,o,a){let l,c,h,u,d=(s+o+a)*Jft,f=cM(s+d),p=cM(o+d),m=cM(a+d),g=(f+p+m)*ah,v=f-g,y=p-g,x=m-g,b=s-v,S=o-y,A=a-x,E,M,C,T,D,L;b>=S?S>=A?(E=1,M=0,C=0,T=1,D=1,L=0):b>=A?(E=1,M=0,C=0,T=1,D=0,L=1):(E=0,M=0,C=1,T=1,D=0,L=1):S<A?(E=0,M=0,C=1,T=0,D=1,L=1):b<A?(E=0,M=1,C=0,T=0,D=1,L=1):(E=0,M=1,C=0,T=1,D=1,L=0);let I=b-E+ah,R=S-M+ah,H=A-C+ah,Z=b-T+2*ah,ee=S-D+2*ah,F=A-L+2*ah,V=b-1+3*ah,U=S-1+3*ah,j=A-1+3*ah,z=f&255,Y=p&255,J=m&255,K=.6-b*b-S*S-A*A;if(K<0)l=0;else{let se=z+e[Y+e[J]];K*=K,l=K*K*(n[se]*b+i[se]*S+r[se]*A)}let X=.6-I*I-R*R-H*H;if(X<0)c=0;else{let se=z+E+e[Y+M+e[J+C]];X*=X,c=X*X*(n[se]*I+i[se]*R+r[se]*H)}let te=.6-Z*Z-ee*ee-F*F;if(te<0)h=0;else{let se=z+T+e[Y+D+e[J+L]];te*=te,h=te*te*(n[se]*Z+i[se]*ee+r[se]*F)}let re=.6-V*V-U*U-j*j;if(re<0)u=0;else{let se=z+1+e[Y+1+e[J+1]];re*=re,u=re*re*(n[se]*V+i[se]*U+r[se]*j)}return 32*(l+c+h+u)}}function s1e(t){let e=new Uint8Array(512);for(let n=0;n<512/2;n++)e[n]=n;for(let n=0;n<512/2-1;n++){let i=n+~~(t()*(256-n)),r=e[n];e[n]=e[i],e[i]=r}for(let n=256;n<512;n++)e[n]=e[n-256];return e}var tu=new Zo,Qft=class{constructor(t){this.weightAttribute=null;let e=t.geometry;if(!e.isBufferGeometry||e.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");e.index&&(e=e.toNonIndexed()),this.geometry=e,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let t=this.positionAttribute,e=new Float32Array(t.count/3);for(let i=0;i<t.count;i+=3){let r=1;tu.a.fromBufferAttribute(t,i),tu.b.fromBufferAttribute(t,i+1),tu.c.fromBufferAttribute(t,i+2),r*=tu.getArea(),e[i/3]=r}this.distribution=new Float32Array(t.count/3);let n=0;for(let i=0;i<e.length;i++)n+=e[i],this.distribution[i]=n;return this}setRandomGenerator(t){return this.randomFunction=t,this}sample(t,e){if(this.distribution){let n=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*n);return this.sampleFace(i,t,e)}}binarySearch(t){if(!this.distribution)return 0;let e=this.distribution,n=0,i=e.length-1,r=-1;for(;n<=i;){let s=Math.ceil((n+i)/2);if(s===0||e[s-1]<=t&&e[s]>t){r=s;break}else t<e[s]?i=s-1:n=s+1}return r}sampleFace(t,e,n){let i=this.randomFunction(),r=this.randomFunction();return i+r>1&&(i=1-i,r=1-r),tu.a.fromBufferAttribute(this.positionAttribute,t*3),tu.b.fromBufferAttribute(this.positionAttribute,t*3+1),tu.c.fromBufferAttribute(this.positionAttribute,t*3+2),e.set(0,0,0).addScaledVector(tu.a,i).addScaledVector(tu.b,r).addScaledVector(tu.c,1-(i+r)),tu.getNormal(n),this}},ept=oB(nst()),tpt=new at,npt=new at,ipt=new at,wL;(t=>{function e(n){return n&&n.__isSPEObject}t.is=e})(wL||(wL={}));var JW=t=>class extends t{constructor(){super(...arguments),this.hiddenMatrix=new at,this.matrixWorldRigid=new at,this.shearScale=new at,this.shearScaleInv=new at}get __isSPEObject(){return!0}isDescendantOf(e){e instanceof wn&&(e=e.uuid);let n=this;for(;n.parent;){if(n.parent.uuid===e)return!0;n=n.parent}return!1}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(let n of this.children)n.updateMatrixWorld(e)}updateWorldMatrix(e,n){let i=this.parent;if(e&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),n)for(let r of this.children)r.updateWorldMatrix(!1,!0)}traverseObject(e,n=0){if(e(this,n)!==!0)for(let i of this.children)wL.is(i)&&i.traverseObject(e,n+1)}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,n=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:i,v:r,q:s}=(0,ept.SVD)(n),o=tpt.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),a=npt.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),l=ipt.copy(a).transpose();this.shearScale.makeScale(s[0],s[1],s[2]).multiply(l).premultiply(a),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,l).copyPosition(this.matrixWorld),s.every(c=>Math.abs(s[0]-c)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(e,n){this.updateWorldMatrix(!0,!1);let i=new at().copy(this.matrixWorld).invert();return e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),i.multiply(e.parent.matrixWorld)),"hiddenMatrix"in e&&e.hiddenMatrix instanceof at?e.hiddenMatrix.premultiply(i):e.applyMatrix4(i),e.updateWorldMatrix(!1,!1),this.add(e),n!==void 0&&(this.children.pop(),this.children.splice(n,0,e)),this}},rpt=class extends JW(wn){},spt=t=>t.type==="Mesh",wA=class extends rpt{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1}expand(){let e=0,n=this.object.entityChildren(e);for(;n;){let i=this.children[e];(i==null?void 0:i.object)!==n&&(i&&this.remove(i),i=new wA(n),this.add(i),this.children.splice(e,0,this.children.pop()),i.matrixWorldNeedsUpdate=!0,i.matrixAutoUpdate=!1,i.matrix=n.matrix,i.hiddenMatrix=n.hiddenMatrix),i.expand(),e+=1,n=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return spt(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},g0=new q,v0=new q,ib=new at,o1e=[new q(-1,1,1),new q(-1,-1,1),new q(1,-1,1),new q(1,1,1),new q(-1,1,-1),new q(-1,-1,-1),new q(1,-1,-1),new q(1,1,-1)],opt=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],apt=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],Cie=(t,e,n)=>{t.updateEntityBoxSize(g0,v0),ib.copy(e).multiply(t.matrixWorld),v0.x===0&&v0.y===0&&v0.z===0?n.push(new q(g0.x,g0.y,g0.z).applyMatrix4(ib)):o1e.forEach(i=>{n.push(i.clone().multiply(v0).add(g0).applyMatrix4(ib))})},Tie=class extends ao{constructor(){super(...arguments),this.matrix=new at,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(n=>n.clone()),this.faces=e.faces.map(n=>n.clone()),this.edges=e.edges.map(n=>n.clone()),this.centerEdges=e.centerEdges.map(n=>n.clone()),this}setFromObjectSize(e,n=!1){e.updateWorldMatrix(!1,n),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let i=new at().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,i,n)}expandByObjectSize(e,n,i=!1){let r=[];return i===!0?e.traverseEntity(s=>{(s.visible||s.cloner&&s.data.visible)&&Cie(s,n,r)}):Cie(e,n,r),this.setFromPoints(r)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(ib.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(v0).multiplyScalar(.5),this.getCenter(g0),ib.copy(this.matrix).setPosition(g0),this.vertices=o1e.map(e=>e.clone().multiply(v0).applyMatrix4(ib))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=opt.map(([e,n])=>new L0e(this.vertices[e],this.vertices[n])),this.centerEdges=this.edges.map(e=>e.getCenter(new q))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=apt.map(([e,n])=>this.vertices[e].clone().add(this.vertices[n]).multiplyScalar(.5))}},om={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},lpt=class extends z9{constructor(){super()}getPoints(e=12){let n=[],i,r=this.getCurveLengths(),s=r[r.length-1]/r.length;for(let o=0,a=this.curves;o<a.length;o++){let l=a[o],c=o===0?r[o]:r[o]-r[o-1],h=Math.ceil(e*c/s),u=l.getPoints(h);for(let d=0;d<u.length;d++){let f=u[d];i&&i.equals(f)||(n.push(f),i=f)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},vH=.001;function yH(t,e,n){return e.clone().sub(t).cross(e.clone().sub(n)).length()<=vH}function M4(t,e){let n=new q(...t.position),i=new q(...t.controlNext.position),r=new q(...e.controlPrevious.position),s=new q(...e.position);return yH(n,i,s)&&yH(n,r,s)}function a1e(t){let e=t.points.map(h=>new q(...h.data.position)),n=[t.points[0]],i=new q(...n[0].data.position);for(let h=0;h<t.points.length-1;h++)yH(i,e[h],e[h+1])||(n.push(t.points[h]),i=e[h]);n.push(t.points[t.points.length-1]);let r=t.isClosed,s=n.length-(r?0:1),o=n.length,a=[];for(let h=0;h<o;h++){let u=n[h].data,d=new q(...u.position),f=new q(...u.controlPrevious.position),p=new q(...u.controlNext.position),m={position:d,baseRoundness:u.roundness,controlPrevious:f,controlNext:p};if(u.roundness===0||!t.isClosed&&(h===0||h===o-1)){a[h]={...m,removedLength:0};continue}let g=r&&h==0?o-1:h-1,v=r&&h==o-1?0:h+1,y=n[g].data,x=n[v].data,b=new q(...y.position),S=new q(...x.position),A=b.clone().sub(d).normalize(),E=S.clone().sub(d).normalize();Object.assign(m,{prevDir:A,nextDir:E});let M=M4(y,u),C=M4(u,x);if(!M||!C)a[h]={...m,removedLength:0};else{let T=A.clone().add(E).normalize(),D=T.clone().cross(A).length()/A.dot(T);a[h]={...m,tan:D,removedLength:u.roundness/D}}}for(let h=0;h<s;h++){let u=h,d=r&&h===o-1?0:h+1,f=a[u],p=a[d];if(f.removedLength!==0||p.removedLength!==0){let m=f.position.distanceTo(p.position);f.removedLength=Math.min(f.removedLength,m/2),p.removedLength=Math.min(p.removedLength,m/2)}}let l=[];for(let h=0;h<s;h++){let u=h,d=r&&h===o-1?0:h+1,f=a[u],p=a[d],m=null;if(!M4(n[u].data,n[d].data))f.position.distanceTo(p.position)>vH&&(m=new sM(f.position,f.controlNext,p.controlPrevious,p.position));else{let g=f.position.clone(),v=p.position.clone();(f.removedLength!==0||p.removedLength!==0)&&(f.nextDir&&g.add(f.nextDir.clone().setLength(f.removedLength)),p.prevDir&&v.add(p.prevDir.clone().setLength(p.removedLength))),g.distanceTo(v)>vH&&(m=new sM(g,g.clone().lerp(v,.3),v.clone().lerp(g,.3),v))}l[2*h+1]=m}for(let h=0;h<o;h++){let u=a[h];if(u.removedLength===0){l[2*h]=null;continue}let d=u.position,f=u.prevDir.clone().multiplyScalar(u.removedLength).add(d),p=u.nextDir.clone().multiplyScalar(u.removedLength).add(d),m=u.tan*u.removedLength,g=u.prevDir.clone().add(u.nextDir).normalize(),v=f.clone().lerp(p,.5),y=f.distanceTo(p)/2,x=g.clone().multiplyScalar(Math.sqrt(Math.pow(m,2)-Math.pow(y,2))).add(v),b=g.clone().multiplyScalar(-m).add(x),S=d.distanceTo(b)/d.distanceTo(v),A=u.prevDir.clone().multiplyScalar(S*d.distanceTo(f)).add(d),E=A.clone().lerp(b,2),M=f.clone().lerp(A,4/3),C=p.clone().lerp(E,4/3);l[2*h]=new sM(f,M,C,p)}let c=new lpt;return l.forEach(h=>{h&&c.add(h)}),c}var Ji;(t=>{function e(n){return n&&n.__isEntity}t.is=e})(Ji||(Ji={}));var bS=t=>Ji.is(t),cpt={type:"completeState",isfromEntity:!0},l1e=t=>class extends JW(t){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new Tie,this._recursiveBBox=new Tie,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(e){let n=this.children[e];if(Ji.is(n))return n}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let e=this;for(;e.data.type!=="Instance";){let n=e.parent;if(Ji.is(n))e=n;else return}return e}forInstancesRec(e){this.instances.forEach(n=>{n.disposed||e(n),n.forInstancesRec(e)})}super_Entity(e,n){typeof e=="string"&&(this.uuid=e),this.identity=e,this.data=n,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(e,n,i=!1){if(!(this.data.states.length===0&&!i)){for(let r of this.data.states)Tx.toOps(this.data,r.data).forEach(s=>{let o=qG.replaceProps(s,this.data);this.dataPatched=this.data,this.updateByPatchedOp(o,this.data,n)});if(e!==null){let r=this.data.states.data(e);r&&(this.dataPatched=Tx.patch(this.data,r),Tx.toOps(this.data,r).forEach(s=>{this.updateByPatchedOp(s,this.dataPatched,n)}))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=e,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(e,n){e.setScalar(0),n.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{bS(e)&&e.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(e=>{e.resetBBoxNeedsUpdateSelf()})}find(e){let n;return this.traverseEntity(i=>{i.uuid===e&&(n=i)}),n}traverseSortNextHelper(){let e=this.parent;if(e){let n=e.children,i=n.indexOf(this)+1;if(Ji.is(n[i]))return n[i];if(Ji.is(e))return e.traverseSortNextHelper()}}sortNext(){let e=this.children;return this.children.length>0&&Ji.is(this.children[0])?e[0]:this.traverseSortNextHelper()}goUp(e){let n=this;for(;e>0&&n!==null;)n=n.parent,e-=1;return n}hasAnccestorOrSelf(e){return this===e||this.hasAnccestor(e)}hasAnccestor(e){let n=this.parent;for(;n;){if(e===n)return!0;n=n.parent}return!1}countToAccestor(e){let n=0,i=this;for(;i!==e;){if(i===null)return-1;i=i.parent,n+=1}return n}forEachEntity(e){for(let n of this.children)bS(n)&&e(n)}traverseEntityAncestors(e){this.traverseAncestors(n=>{Ji.is(n)&&e(n)})}traverseEntity(e,n=0){if(e(this,n)!==!0)for(let i of this.children)bS(i)&&i.traverseEntity(e,n+1)}traverseVisibleEntity(e){e(this);for(let n of this.children)bS(n)&&n.visible&&n.traverseVisibleEntity(e)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}copy(e,n=!0){return super.copy(e,!1),this.raycastLock=e.raycastLock,this.scaleLock=e.scaleLock,this.hiddenMatrix.copy(e.hiddenMatrix),this}hasEntityChild(){return this.children.some(e=>bS(e))}isAncestorOf(e){if(this.uuid===e)return!1;let n=!1;return this.traverseEntity(i=>{i.uuid===e&&(n=!0)}),n}toObjectTransformState(e=[]){this.updateWorldMatrix(!0,!1);let n={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return gH(n,e)}updateTransformState(e){let n=!1;return e.position&&(this.position.fromArray(e.position),n=!0),e.rotation&&(this.rotation.fromArray(e.rotation),n=!0),e.scale&&(n=!0,this.scale.fromArray(e.scale)),e.hiddenMatrix!==void 0&&(n=!0,this.hiddenMatrix.fromArray(e.hiddenMatrix??Zb.identity)),n&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(i=>{i.invalidateClonerTransform(this)})),e.position&&e.rotation&&e.scale&&e.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),n}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let e of this.children)Ji.is(e)&&e.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(e=>{Ji.is(e)&&e.disposeRecursively()})}toState(e=[]){let n={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(e)};return gH(n,e)}updateByOp(e,n,i,r){let s=this.data;this.data=n;let o=e,a=qp(e.path,["states","*"]);if(a!==null){if(e.type===0){let[l]=a;if((this==null?void 0:this.stateSelection)===l){let c={...e.props};if(Object.values(e.props).some(h=>h===void 0)){let h=this.data;if(h!==void 0){let u=qh.zoom(h,e.path.slice(2));if(u)for(let d in e.props)e.props[d]===void 0&&d in u&&(c[d]=u[d])}}o={...e,props:c,path:e.path.slice(2)}}}}else if(e.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(e.props.name!==void 0&&l.name){let{name:h,...u}=l;l=u}if(e.props.material!==void 0&&"material"in l){let{material:h,...u}=l;l=u}let c=qh.removeOverridden(e.path,e.props,l);o={...e,props:c}}}if(this.updateByPatchedOpBase(o,Tx.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i),qp(e.path,["overrides"])){let l=[],c=[...e.path];for(l.push(c[1]),c.splice(0,2);c.length>0&&c[0]==="descendants";)l.push(c[1]),c.splice(0,2);if(l[l.length-1]===void 0){if(e.type===0)for(let h of Object.keys(e.props)){l[l.length-1]=h;let u=i.scene.findInstance([this.uuid,...l]);u&&(u.overrideData=e.props[h],u.updateState(Y0.apply(u.component.data,u.overrideData),i))}}else{let h=i.scene.findInstance([this.uuid,...l]);if(h){let u=qh.zoom(h.component.data,c);if(e={...e,path:c},e.type===0){let d=e.props;if(u)for(let[f,p]of Object.entries(e.props))p===void 0&&(d===e.props&&(d={...e.props}),d[f]=u[f]);e={...e,props:d}}h.overrideData=fL.resolve(n.overrides,l),h.updateByOp(e,ol.applySimple(h.data,e),i,!1)}}}else if(this.instances.length>0){let l;if(e.path.length===0&&e.type===0){let c;for(let h of ew.rootOverrideProps)h in e.props&&(c===void 0&&(c={}),c[h]=e.props[h]);c&&(l={...e,props:c})}else for(let c of ew.rootOverrideProps)if(qp(e.path,[c])){l=e;break}l!==void 0&&this.instances.forEach(c=>{if(c.isInstanceRoot){let h=Y0.filterOp(c.overrideData,l);h&&c.updateByOp(h,ol.applySimple(c.data,h),i,!0)}}),this.instances.forEach(c=>{if(!c.isInstanceRoot){let h=Y0.filterOp(c.overrideData,e);if(h){let u;s===c.data&&e===h?u=n:u=ol.applySimple(c.data,h),c.updateByOp(h,u,i,!0)}}})}}updateByPatchedOpBase(e,n,i){if(this.dataPatched=n,e.path.length===0&&e.type===0)e.props.type!==void 0&&!Mv.is(e.props.type)&&om.changeEntityProptotype(this,n,i);else if(e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&"type"in e.props){om.changeEntityProptotype(this,n,i);for(let r of this.children)Ji.is(r)&&r.updateVisible()}this.updateByPatchedOp(e,n,i)}updateByPatchedOp(e,n,i){if(e.path.length===0&&e.type===0&&this.updateState(e.props,i),qp(e.path,["pathSnapping"])!==null&&this.updatePathSnapping(n.pathSnapping),qp(e.path,["cloner"])!==null){let r=ol.drop(e,1);r.path.length===0&&r.type===0&&r.props.disabled===!0?this.setFromClonerState(null,i):this.cloner?this.cloner.updateState(n.cloner,i.scene):(this.setFromClonerState(n.cloner,i),this.expandCloner(i.scene)),this.updateVisible()}}updatePathSnapping(e){this._updatedPathSnapping=e,this._needApplyPathSnapping=!0}applyPathSnapping(e){var p,m,g,v,y;let n=((p=this._updatedPathSnapping)==null?void 0:p.pathId)??this.dataPatched.pathSnapping.pathId,i=((m=this._updatedPathSnapping)==null?void 0:m.slide)??this.dataPatched.pathSnapping.slide,r=((g=this._updatedPathSnapping)==null?void 0:g.offset)??this.dataPatched.pathSnapping.offset,s=((v=this._updatedPathSnapping)==null?void 0:v.orientation)??this.dataPatched.pathSnapping.orientation;if(n===null)return;let o=e.find(n);if(!o||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let a=o.data,l=a1e(a.geometry.path),c=(i+r)%1,h=l.getPointAt(c),u=this.parent?(y=this.parent)==null?void 0:y.matrixWorld:new at;o.updateMatrixWorld();let d=new at().multiplyMatrices(u.clone().invert(),o.matrixWorld);h.applyMatrix4(d);let f={position:h.toArray(),rotation:a.rotation};if(s==="tangential"){let x=new at().extractRotation(o.matrixWorld),b=l.getTangentAt(c).applyMatrix4(x).add(h),S=new at().lookAt(h,b,new q(0,1,0)),A=new Dc().setFromRotationMatrix(S);f={...f,rotation:[A.x,A.y,A.z]}}this.updateTransformState(f),this.traverseEntity(x=>{x._cameraType&&x.dispatchEvent(cpt)})}updateVisible(){var e;this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((e=this.dataPatched.cloner)==null?void 0:e.hideBase)!==!0)}updateState_Entity(e,n){e.name!==void 0&&(this.name=e.name),e.raycastLock!==void 0&&(this.raycastLock=e.raycastLock),e.visible!==void 0&&(this.updateVisible(),this.resetBBoxNeedsUpdate()),"cloner"in e&&e.cloner!==void 0&&(this.setFromClonerState(e.cloner,n),this.updateVisible()),this.updateTransformState(e)}get attachedSurfaceCloners(){return this.children.filter(e=>e instanceof om.Cloner&&e.parameters.type==="toObject")}setFromClonerState(e,n){this.disposed||(e===null||e.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new om.Cloner(this,e),n.scene.addPendingExpandCloner(this)):this.cloner.updateState(e,n.scene))}expandCloner(e){!this.disposed&&this.cloner&&this.cloner.expandClones(e)}invalidateClonerTransform(e){this.cloner&&this.cloner.invalidateTransform(e)}},upt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters),r=i.width/2,s=i.radiusTop??r,o=i.radiusBottom??r;return s===o?(s=r,o=r):s>o?(s=r,o=o*r/s):(s=s*r/o,o=r),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width),radiusTop:s,radiusBottom:o})}}static build(e){let{width:n,depth:i,height:r,radialSegments:s,heightSegments:o,openEnded:a,thetaStart:l,thetaLength:c,radiusTop:h,radiusBottom:u,cornerRadius:d,cornerSegments:f,hollow:p}=e.parameters,m;return d||p?m=new c1e(h,u,r,s,o,a,l,c*Math.PI/180,d,d,f,p):m=new ag(h,u,r,s,o,a,l,c*Math.PI/180),m.scale(1,1,i/n),Object.assign(m,{userData:{...e,type:"CylinderGeometry"}})}};function wp(t,e,n){n.x=t.x*e.x,n.y=t.y,n.z=t.x*e.y}function Pie(t){return new Me(t.y,-t.x)}var c1e=class extends yt{constructor(e,n,i,r,s,o,a,l,c,h,u,d,f=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,n=n!==void 0?n:1,i=i||1,r=Math.floor(r)||8,s=Math.floor(s)||1,o=o!==void 0?o:!1,a=a!==void 0?a:0,l=l!==void 0?l:Math.PI*2,o&&(c=0,h=0);let p=[],m=[],g=[],v=[],y=0,x=i/2,b=new q,S=new q;f&&e==0&&(e=c),f&&n==0&&(n=h);let A=new Me(e,x),E=new Me(n,-x),M=null,C=null,T=null,D=null,L=A.clone().sub(E),I=0,R=0,H=0;d>0&&(I=Math.min(e,n)*(1-d),R=e-I,H=n-I);let Z=A.clone();Z.x-=I;let ee=Math.PI-L.angle(),F=L.angle(),V=Math.tan(F/2),U=Math.tan(ee/2),j=V+U,z=d?j:U,Y=d?j:V;if(c=Math.min(c,(e-R)/z,L.length()/j),h=Math.min(h,(n-H)/Y,L.length()/j),c>0){let se=c/V;M=A.clone().sub(new Me(se,c)),d&&(T=M.clone(),T.x-=I-j*c),A.sub(L.clone().setLength(se))}if(h>0){let se=h/U;C=E.clone().sub(new Me(se,-h)),E.add(L.clone().setLength(se)),d&&(D=C.clone(),D.x-=I-j*h,Z.sub(L.clone().setLength(se)))}L=A.clone().sub(E);let J=L.length()<.5,K=[];for(let se=0;se<=r;se++){let ce=[],ge=se/r,oe=ge*l+a,ae=new Me(Math.sin(oe),Math.cos(oe));D&&C?(X(ce,ge,ae,ee,h,D,-1,!0),X(ce,ge,ae,F,h,C,-1,!1)):C?(te(ce,ae,C.x,0,-1),X(ce,ge,ae,F,h,C,-1,!1)):o||te(ce,ae,n,H,-1);let ye=Pie(L).normalize();if(wp(ye,ae,b),!J)for(let we=0;we<=s;we++){let Se=we/s,Pe=L.clone().multiplyScalar(Se).add(E);wp(Pe,ae,S),m.push(S.x,S.y,S.z),g.push(b.x,b.y,b.z),v.push(ge,.5+S.y/i),ce.push(y++)}if(T&&M?(X(ce,ge,ae,ee,c,M,1,!1),X(ce,ge,ae,F,c,T,1,!0)):M?(X(ce,ge,ae,ee,c,M,1,!1),te(ce,ae,M.x,0,1)):o||te(ce,ae,e,R,1),d&&!J){let we=Pie(L).multiplyScalar(-1).normalize();wp(we,ae,b);for(let Se=0;Se<=s;Se++){let Pe=Se/s,Te=L.clone().multiplyScalar(-Pe).add(Z);wp(Te,ae,S),m.push(S.x,S.y,S.z),g.push(b.x,b.y,b.z),v.push(ge,.5+S.y/i),ce.push(y++)}}d&&!o&&ce.push(ce[0]),K.push(ce)}for(let se=0;se<K.length-1;se++)for(let ce=0;ce<K[0].length-1;ce++){if(o&&d&&ce==s)continue;let ge=K[se][ce],oe=K[se+1][ce],ae=K[se+1][ce+1],ye=K[se][ce+1],we=m[ae*3+0],Se=m[ae*3+2];p.push(ge,oe,ye),(we!=0||Se!=0)&&p.push(oe,ae,ye)}l<Math.PI*2&&(re(-1,K[0],a),re(1,K[K.length-1],a+l)),this.setIndex(p),this.setAttribute("position",new it(m,3)),this.setAttribute("normal",new it(g,3)),this.setAttribute("uv",new it(v,2));function X(se,ce,ge,oe,ae,ye,we,Se){for(let Pe=0;Pe<u+1;Pe++){let Te=Pe/u,Ie=we<0?Te:1-Te;Se&&(Ie-=1),Ie*=oe;let xe=new Me(Math.sin(Ie),Math.cos(Ie)*we),Re=xe.clone().multiplyScalar(ae).add(ye);wp(Re,ge,S),m.push(S.x,S.y,S.z),wp(xe,ge,b),g.push(b.x,b.y,b.z),v.push(ce,.5+S.y/i),se.push(y++)}}function te(se,ce,ge,oe,ae){let ye=new q,we=new Me,Se=[ge,oe];ae<0&&Se.reverse();for(let Pe of Se)we.set(Pe,x*ae),wp(we,ce,ye),m.push(ye.x,ye.y,ye.z),g.push(0,ae,0),v.push(.5,.5),se.push(y++)}function re(se,ce,ge){let oe=new Me(Math.sin(ge),Math.cos(ge)),ae=new Me(-Math.cos(ge),Math.sin(ge)),ye=new q,we=se<0?(Te,Ie,xe)=>p.push(Te,Ie,xe):(Te,Ie,xe)=>p.push(Te,xe,Ie),Se=new Me((e+n+R+H)/4,0);wp(Se,oe,ye),m.push(ye.x,ye.y,ye.z),g.push(ae.x,0,ae.y),v.push(.5,.5);let Pe=y++;for(let Te of ce){let Ie=m.slice(Te*3,Te*3+3);m.push(...Ie),g.push(ae.x,0,ae.y);let xe=v.slice(Te*2,Te*2+2);v.push(...xe),y++}for(let Te=Pe+1;Te<y-1;Te++)we(Pe,Te,Te+1);we(Pe,y-1,Pe+1)}}},hpt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:n,depth:i,height:r,radialSegments:s,heightSegments:o,openEnded:a,thetaStart:l,thetaLength:c,cornerRadiusTop:h,cornerRadiusBottom:u,cornerSegments:d}=e.parameters,f;return h>0||u>0||c<360?f=new c1e(0,n/2,r,s,o,a,l,c*Math.PI/180,h,u,d,0,!0):f=new Cw(n/2,r,s,o,a),f.scale(1,1,i/n),Object.assign(f,{userData:{...e,type:"ConeGeometry"}})}},dpt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:n,height:i,depth:r,widthSegments:s,heightSegments:o,depthSegments:a,cornerRadius:l,cornerSegments:c}=e.parameters,h;return l==0?h=new Ia(n,i,r,s,o,a):h=new fpt(n,i,r,s,o,a,l,c),Object.assign(h,{userData:{...e,type:"CubeGeometry"}})}},E4=Math.PI/2,fpt=class extends yt{constructor(e=1,n=1,i=1,r=1,s=1,o=1,a=0,l=4){super(),this.type="BoxGeometry";let c=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o),l=Math.floor(l),a=Math.min(a,e/2,n/2,i/2);let h=[],u=[],d=[],f=[],p=0,m=0;g("z","y","x",-1,-1,i,n,e,o,s,0),g("z","y","x",1,-1,i,n,-e,o,s,1),g("x","z","y",1,1,e,i,n,r,o,2),g("x","z","y",1,-1,e,i,-n,r,o,3),g("x","y","z",1,-1,e,n,i,r,s,4),g("x","y","z",-1,-1,e,n,-i,r,s,5),a>0&&(v("z","y","x",-1,-1,1,i,n,e,o,0),v("z","y","x",1,-1,-1,i,n,e,o,1),v("z","y","x",-1,1,-1,i,n,e,o,1),v("z","y","x",1,1,1,i,n,e,o,0),v("x","y","z",-1,-1,-1,e,n,i,r,0),v("x","y","z",1,-1,1,e,n,i,r,1),v("x","y","z",-1,1,1,e,n,i,r,0),v("x","y","z",1,1,-1,e,n,i,r,1),v("y","x","z",-1,-1,1,n,e,i,s,0),v("y","x","z",1,-1,-1,n,e,i,s,1),v("y","x","z",1,1,1,n,e,i,s,1),v("y","x","z",-1,1,-1,n,e,i,s,0),y(1,1,1),y(-1,1,1),y(1,-1,1),y(-1,-1,1),y(1,1,-1),y(-1,1,-1),y(1,-1,-1),y(-1,-1,-1)),this.setIndex(h),this.setAttribute("position",new it(u,3)),this.setAttribute("normal",new it(d,3)),this.setAttribute("uv",new it(f,2));function g(x,b,S,A,E,M,C,T,D,L,I){let R=(M-2*a)/D,H=(C-2*a)/L,Z=M/2-a,ee=C/2-a,F=T/2,V=D+1,U=L+1,j=0,z=0,Y=new q;for(let J=0;J<U;J++){let K=J*H-ee;for(let X=0;X<V;X++){let te=X*R-Z;Y[x]=te*A,Y[b]=K*E,Y[S]=F,u.push(Y.x,Y.y,Y.z),Y[x]=0,Y[b]=0,Y[S]=T>0?1:-1,d.push(Y.x,Y.y,Y.z),f.push(X/D),f.push(1-J/L),j+=1}}for(let J=0;J<L;J++)for(let K=0;K<D;K++){let X=p+K+V*J,te=p+K+V*(J+1),re=p+(K+1)+V*(J+1),se=p+(K+1)+V*J;h.push(X,te,se),h.push(te,re,se),z+=6}c.addGroup(m,z,I),m+=z,p+=j}function v(x,b,S,A,E,M,C,T,D,L,I){let R=(C-2*a)/L,H=C/2-a,Z=T/2-a,ee=D/2,F=L+1,V=0,U=0,j=new q,z=new q;for(let Y=0;Y<l+1;Y++){let J=Y/l*E4,K=Math.sin(J)*a,X=(1-Math.cos(J))*a,te=Math.sin(J),re=Math.cos(J);j[b]=(Z+K)*E,j[S]=(ee-X)*M,z[x]=0,z[b]=te*Math.sign(j[b]),z[S]=re*Math.sign(j[S]);for(let se=0;se<F;se++){let ce=se*R-H;j[x]=ce*A,u.push(j.x,j.y,j.z),d.push(z.x,z.y,z.z),f.push(se/L),f.push(0),V+=1}}for(let Y=0;Y<l;Y++)for(let J=0;J<L;J++){let K=p+J+F*Y,X=p+J+F*(Y+1),te=p+(J+1)+F*(Y+1),re=p+(J+1)+F*Y;h.push(K,X,re),h.push(X,te,re),U+=6}c.addGroup(m,U,I),m+=U,p+=V}function y(x,b,S){let A=new q,E=new q(e/2,n/2,i/2);E.subScalar(a);let M=[],C=x*b*S>0?(D,L,I)=>h.push(D,L,I):(D,L,I)=>h.push(D,I,L);for(let D=0;D<=l;D++){let L=[],I=E4*(1-D/l),R=Math.cos(I),H=Math.sin(I),Z=0;for(let ee=0;ee<=D;ee++){let F=Math.cos(Z),V=Math.sin(Z);A.x=R*F,A.y=H,A.z=R*V;let U=E.clone().addScaledVector(A,a);u.push(x*U.x,b*U.y,S*U.z),d.push(x*A.x,b*A.y,S*A.z),f.push(0,0),L.push(p++),Z+=E4/D}M.push(L)}let T=M.length-1;for(let D=0;D<T;D++){let L=M[D],I=M[D+1],R=L.length-1;C(L[0],I[1],I[0]);for(let H=1;H<=R;H++)C(L[H-1],L[H],I[H]),C(L[H],I[H+1],I[H])}}}},ZW=class extends yt{constructor(e=[],n=[],i="",r=1,s=.2,o=4){super(),this.type="PolyhedronGeometryRound";let a=[],l=[],c=[];h(),u(),this.setAttribute("position",new it(a,3)),this.setAttribute("normal",new it(c,3)),this.setAttribute("uv",new it(l,2));return;function h(){var F;s=Math.min(1-1e-5,s),s==0&&(o=0);let d={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[i],f=new q,p=f.clone(),m=new Zo,g=s*r,v=r-g,y=o+1,x=new q,b=(V,U)=>x.subVectors(V,U).normalize(),S=(V,U)=>Array(V).fill(void 0).map(U),A=S(e.length/3,(V,U)=>new q().fromArray(e,U*3).setLength(r)),E=[],M=1e6;for(let V=0;V<A.length;V++){let U=A[V],j=[],z,Y,J,K=1e10,X=-1;for(;(X=n.indexOf(V,X+1))!=-1;){let ce=X-X%3;z=n[ce+(X+1)%3],Y=n[ce+(X+2)%3],J=U.distanceToSquared(A[z]),K=Math.min(K,J),j.push([z,Y,J])}K+=1e-6;let te=[],re=0,se=j.length;for(let ce=0;ce<se;ce++){[z,Y,J]=j[re];let ge=((F=E[z])==null?void 0:F.includes(V))==!0;J<=K&&te.push(z+ +ge*M),re=j.findIndex(oe=>oe[0]==Y)}E.push(te)}let C=[];{let V=0,U=0,j,z,Y=d==3;for(let J=0;J<=o;J++){j=J*(J+1)/2,z=(J+1)*(J+2)/2;for(let K=0;K<o-J;K++)[V,U]=[j+K+J+2,z+K+J+3],C.push(j,z,...Y?[U,j]:[V,z],U,V),[j,z]=[V,U];C.push(j,z,j+o+2)}}let T=f.clone(),D=f.clone(),L=f.clone(),I=f.clone(),R=f.clone(),H=[],Z=S(A.length,()=>S(d,()=>f.clone()));for(let V=0;V<A.length;V++){f.copy(A[V]).normalize(),T.copy(f).multiplyScalar(v);let U=E[V];for(let te=0;te<U.length;te++){let re=U[te],se=U[(te+1)%d];m.setFromPointsAndIndices(A,V,re%M,se%M),m.b.sub(m.a).setLength(1e10).add(m.a),m.c.sub(m.a).setLength(1e10).add(m.a),m.closestPointToPoint(T,Z[V][te])}let j=[],z=[],Y=[],J=new q;o==0&&[...Z[V]].reduce((te,re)=>te.add(re),J).multiplyScalar(1/d);for(let te=0;te<d;te++){let re=[],se=(te-1+d)%d,ce=Z[V][se],ge=Z[V][te];f.copy(ce).sub(T),p.copy(ge).sub(T);let oe=T.angleTo(f),ae=f.angleTo(p),ye=Math.cos(oe)*g;o==0?D.copy(J):D.copy(T).setLength(v+ye),z.push(ye);let we=[D,ce,ge];for(let Se=0;Se<2;Se++){let Pe=we[Se],Te=we[Se+1];I.subVectors(Pe,T),R.subVectors(Te,T),L.crossVectors(I,R).normalize();for(let Ie=0;Ie<y;Ie++){let xe=[oe,ae][Se]*Ie/y;f.copy(I).applyAxisAngle(L,xe).add(T),j.push(f.clone()),Se&&(b(f,T),re.push([Ie==0?Pe:f.clone(),x.clone()]))}Se&&(b(Te,T),re.push([Te,x.clone()]))}Y.push(re)}H.push(Y);let K=2*y,X=2;for(let te=0;te<d;te++){let re=K*te,se=K*((te+1)%d),ce=[j[re]];for(let oe=1;oe<y;oe++){I=j[re+oe],R=j[se+oe],ce.push(I);for(let ae=1,ye=oe-X+1;ae<=ye;ae++)f.lerpVectors(I,R,ae/(ye+1)),f.sub(T).setLength(z[te]).add(T),ce.push(f.clone());ce.push(R)}for(let oe=0;oe<y;oe++)ce.push(j[oe+y+re]);ce.push(j[se+y]);let ge=C.map(oe=>ce[oe]);a.push(...ge.map(oe=>[oe.x,oe.y,oe.z]).flat()),c.push(...ge.map(oe=>(b(oe,T),[x.x,x.y,x.z])).flat())}}let ee=[];for(let V=0;V<E.length;V++)for(let U=0;U<d;U++){let j=E[V][U];if(j<M){let z=E[j].findIndex(K=>K%M==V),Y=H[V][U],J=H[j][z];for(let K=0;K<y;K++){let X=Y[K],te=J[y-K],re=Y[K+1],se=J[y-(K+1)];[X,te,re,re,te,se].forEach(ce=>{a.push(ce[0].x,ce[0].y,ce[0].z),c.push(ce[1].x,ce[1].y,ce[1].z)})}ee.push(Y[0][0],J[y][0],Y[y][0],J[0][0])}}for(;ee.length;){let V,U,j,z;[V,U]=ee.splice(0,2);let Y=[V];for(;V!=U;)Y.push(U),j=ee.indexOf(U),z=j%2,U=ee.splice(j-z,2)[1-z];x.subVectors(Y[0],Y[1]).cross(f.subVectors(Y[0],Y[2])).normalize();let J=x.dot(Y[0])<0;J&&x.negate();for(let K=1;K<=Y.length-2;K++)[Y[K+ +J],Y[K+1-+J],Y[0]].forEach(X=>{a.push(X.x,X.y,X.z),c.push(x.x,x.y,x.z)})}}function u(){let d=new q;for(let E=0;E<a.length;E+=3){d.x=a[E+0],d.y=a[E+1],d.z=a[E+2];let M=S(d)/2/Math.PI+.5,C=A(d)/Math.PI+.5;l.push(M,1-C)}let f=new q,p=new q,m=new q,g=new q,v=new Me,y=new Me,x=new Me,b=(E,M,C,T)=>{T<0&&E.x===1&&(l[M]=E.x-1),C.x===0&&C.z===0&&(l[M]=T/2/Math.PI+.5)};for(let E=0,M=0;E<a.length;E+=9,M+=6){f.set(a[E+0],a[E+1],a[E+2]),p.set(a[E+3],a[E+4],a[E+5]),m.set(a[E+6],a[E+7],a[E+8]),v.set(l[M+0],l[M+1]),y.set(l[M+2],l[M+3]),x.set(l[M+4],l[M+5]),g.copy(f).add(p).add(m).divideScalar(3);let C=S(g);b(v,M+0,f,C),b(y,M+2,p,C),b(x,M+4,m,C)}for(let E=0;E<l.length;E+=6){let M=l[E+0],C=l[E+2],T=l[E+4],D=Math.max(M,C,T),L=Math.min(M,C,T);D>.9&&L<.1&&(M<.2&&(l[E+0]+=1),C<.2&&(l[E+2]+=1),T<.2&&(l[E+4]+=1))}function S(E){return Math.atan2(E.z,-E.x)}function A(E){return Math.atan2(-E.y,Math.sqrt(E.x*E.x+E.z*E.z))}}}static fromJSON(e){return new ZW(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},ppt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,detail:0,corner:0,cornerSides:4},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,detail:r,corner:s,cornerSides:o}=t.parameters,a=r===0&&s!==0?new u1e(e*.5,s,o):new Tw(e*.5,r);return a.scale(1,n/e,i/e),Object.assign(a,{userData:{...t,type:"DodecahedronGeometry"}})}},u1e=class extends ZW{constructor(e=1,n=.2,i=4){let r=(1+Math.sqrt(5))/2,s=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-r,0,-s,r,0,s,-r,0,s,r,-s,-r,0,-s,r,0,s,-r,0,s,r,0,-r,0,-s,r,0,-s,-r,0,s,r,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],l="DodecahedronGeometry";super(o,a,l,e,n,i),this.type=l}static fromJSON(e){return new u1e(e.radius,e.corner,e.cornerSides)}},wS=1e-12,QW=class{constructor(t){this.position=new Me,this.startPosition=new Me,this.uuid=zi.generateUUID(),this.position=t.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(t){this.position.copy(this.startPosition).add(t)}copy(t){return this.position.copy(t.position),this.startPosition.copy(t.startPosition),this}clone(){return new QW(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},xH=class extends QW{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new xH(this.parent).copy(this)}},rb=class extends QW{constructor(e,n){super(n),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new xH(this),new xH(this))}static create(e,n){let i=new rb(e,new Me(...n.position));return i.controls[0].position.set(...n.controlPrevious.position),i.controls[1].position.set(...n.controlNext.position),i.roundness=n.roundness,i.areControlsDirectionsMirrored=n.areControlsDirectionsMirrored,i}getOppositeControl(e){let n=this.controls.indexOf(e);return n===0?this.controls[1]:n===1?this.controls[0]:null}applyOffsetToControls(e,n=1){for(let i=0,r=this.controls.length;i<r;i++){let s=this.controls[i];this.position.distanceTo(s.position)<=n?s.position.copy(this.position):s.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new rb(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var i,r;let e=(i=this.curveBefore)==null?void 0:i.getTangentAt(1),n=(r=this.curveAfter)==null?void 0:r.getTangentAt(0);return[e,n]}computeNormals(e=new Me,n=new Me){let[i,r]=this.computeTangents();return i&&r&&(Die(i,e),Die(r,n)),[e,n]}computeTangent(e=new Me){let[n,i]=this.computeTangents();return n&&i&&e.copy(n).add(i).normalize(),e}computeNormal(e=new Me){let[n,i]=this.computeNormals();return e.copy(n).add(i).normalize(),e}};function Die(t,e=new Me){let n=t.length();return e.set(-t.y/n,t.x/n)}var e$=t=>t,Ww=new Me,yB=new Me,mpt=new Me,gpt=new Me,vpt=new Me,ypt=new Me,h1e=new q,d1e=new q;function xpt(t){let e=new Me;e.addVectors(t.v0,Ww.subVectors(t.v1,t.v0).multiplyScalar(2/3));let n=new Me;return n.addVectors(t.v2,yB.subVectors(t.v1,t.v2).multiplyScalar(2/3)),new Tc(t.v0,e,n,t.v2)}function _A(t,e,n=Number.EPSILON){return Math.abs(t-e)<n}function bpt(t,e,n=Number.EPSILON){return t.distanceTo(e)<n}function wpt(t,e,n=Number.EPSILON){return t.distanceTo(e)<n}function f1e(t,e,n){let i=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),r=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),s=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));return Math.acos((r*r+i*i-s*s)/(2*r*i))}function _pt(t,e,n){return Lie(t,e)&&Lie(e,n)&&bH(t.position,e.position,n.position)}function bH(t,e,n){return Ww.copy(e).sub(t).cross(yB.copy(n).sub(t))===0}function Spt(t,e,n,i,r){let s=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=(t.y+e.y)/2,a=(t.x+e.x)/2,l=Math.sqrt(Math.pow(n,2)-Math.pow(s/2,2))*(t.y-e.y)/s,c=Math.sqrt(Math.pow(n,2)-Math.pow(s/2,2))*(e.x-t.x)/s;return i.set(a+l,o+c),r.set(a-l,o-c),[i,r]}function Apt(t,e,n){let i=t.distanceTo(n),r=e.distanceTo(n);return i<r?e:t}function Mpt(t,e,n,i,r,s){let o=e.x-t.x,a=e.y-t.y,l=n.x-t.x,c=n.y-t.y,h=Math.sqrt((o+l)*(o+l)+(a+c)*(a+c)),u;return f1e(e,t,n)>Math.PI&&(h*=-1),_A(c,a)?u=(a+c)*(i/h-.5)*8/3/(o-l):u=(o+l)*(i/h-.5)*8/3/(c-a),r.set(e.x-u*a,e.y+u*o),s.set(n.x+u*c,n.y-u*l),[r,s]}function Oie(t,e){return t.position.equals(t.controls[1].position)&&e.position.equals(e.controls[0].position)}function Lie(t,e){return bH(t.position,t.controls[1].position,e.position)&&bH(t.position,e.controls[0].position,e.position)}function Ept(t,e,n,i,r=.5){let s=Ww.subVectors(e,t).multiplyScalar(r).add(t),o=yB.subVectors(n,e).multiplyScalar(r).add(e),a=mpt.subVectors(i,n).multiplyScalar(r).add(n),l=s,c=gpt.subVectors(o,s).multiplyScalar(r).add(s),h=vpt.subVectors(a,o).multiplyScalar(r).add(o),u=a,d=ypt.subVectors(h,c).multiplyScalar(r).add(c);return[t.x,t.y,l.x,l.y,c.x,c.y,d.x,d.y,h.x,h.y,u.x,u.y,i.x,i.y]}function Cpt(t,e,n=12,i=!0){let r=d1e.set(0,0,0),s,o=0;for(let a=0;a<e.length;a++){let l=e$(e[a]),c=Ww,h=K0(l,n);for(let u=0;u<=h;u++)if(l instanceof Tc||l instanceof Hf||l instanceof Oc){if(l.getPoint(u/h,c),r.set(c.x,c.y,0),s!==void 0&&wpt(s,r))continue;s===void 0&&(s=h1e),s.copy(r),t.setXYZ(o,r.x,r.y,r.z),o++}}return i&&o>1&&!(t.getX(o-1)===t.getX(0)&&t.getY(o-1)===t.getY(0)&&t.getZ(o-1)===t.getZ(0))&&(t.setXYZ(o,t.getX(0),t.getY(0),t.getZ(0)),o++),t}function Tpt(t,e,n,i=12,r=!0){let s=d1e.set(0,0,0),o=0,a=[];for(let l=0;l<e.length;l++){if(n[l]===!1)continue;let c,h=e$(e[l]),u=Ww,d=K0(h,i);a.push(d);for(let f=0;f<=d;f++)if(h instanceof Tc||h instanceof Hf||h instanceof Oc){if(h.getPoint(f/d,u),s.set(u.x,u.y,0),c==null?void 0:c.equals(s))continue;c===void 0?c=h1e:(t.setXYZ(o,c.x,c.y,c.z),o++,t.setXYZ(o,s.x,s.y,s.z),o++),c.copy(s)}}return r&&o>1&&!(t.getX(o-1)===t.getX(0)&&t.getY(o-1)===t.getY(0)&&t.getZ(o-1)===t.getZ(0))&&(t.setXYZ(o,t.getX(0),t.getY(0),t.getZ(0)),o++),a}function Rie(t,e=12,n=!1){let i=[];for(let r=0,s=t.length;r<s;r++){let o=t[r],a=0;if(n&&o.roundedCurveCorner!==void 0){let l=K0(o.roundedCurveCorner,e)*.5;r>0&&(i[r-1]+=l),a+=l}o.curveAfter!==void 0&&(a+=K0(o.curveAfter,e)),i.push(a)}return t.length>0&&n&&t[0].roundedCurveCorner!==void 0&&(i[t.length-1]+=K0(t[0].roundedCurveCorner,e)*.5),i}function K0(t,e=12){return t&&t instanceof EE?e*2:t&&(t instanceof Oc||t instanceof k9)?1:t&&t instanceof jI?e*t.points.length:e}function Ppt(t,e,n=12,i=!0){let r,s=0;for(let o=0;o<e.length;o++){let a=e$(e[o]),l=K0(a,n),c=Ww;for(let h=0;h<=l;h++)if(a instanceof Tc||a instanceof Hf||a instanceof Oc){if(a.getPoint(h/l,c),r!==void 0&&bpt(r,c,wS))continue;r===void 0&&(r=yB),r.copy(c),t.push(c.x,c.y),s++}}return _A(t[0],t[t.length-2],wS)&&_A(t[1],t[t.length-1],wS)&&(t.pop(),t.pop()),i&&s>1&&!(_A(t[s-1],t[1],wS)&&_A(t[s-2],t[0],wS))&&(t.push(t[0],t[1]),s++),t}var C4=new Me,Dpt=new Me,Opt=new Me,Lpt=new Me,Rpt=new Me,Ipt=new Me,Tr=class extends Pu{constructor(e=100,n=100){super(),this.points=[],this.shapeHoles=[],this.plane=new lf(new q(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=zi.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=n}static createFromState(e,n,i){let r=new Tr;return r.isClosed=e.isClosed,r.points=e.points.map(s=>rb.create(s.id,s.data)),typeof e.roundness=="number"&&(r.roundness=e.roundness),r.shapeHoles=e.shapeHoles.map(s=>Tr.createFromState(s)),n!==void 0&&i!==void 0&&r.applySize(n,i),r.update(),r}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let n=0,i=this.points.length;n<i;n++)this.points[n].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(n=>this.getPointIndexById(n)).filter(n=>n>=0)}getPointIndexById(e){let n=this.points.length,i=this.points.findIndex(r=>r.uuid===e);if(i<0){let r=n;for(let s=0,o=this.shapeHoles.length;s<o;s++){let a=this.shapeHoles[s],l=a.points.length,c=a.getPointIndexById(e);if(c<0)r+=l;else return c+r}}return i}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let n=this.points.length;for(let i=0,r=this.shapeHoles.length;i<r;i++){let s=this.shapeHoles[i],o=e-n;if(o<=s.points.length-1)return s.points[o];n+=s.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let n=this.points.indexOf(e);if(n>=0)return n;if(n=this.points.length,this.shapeHoles.length>0)for(let i=0,r=this.shapeHoles.length;i<r;i++){let s=this.shapeHoles[i],o=s.points.indexOf(e);if(o>=0)return n+o;n+=s.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(n=>n.points));return[...this.points,...e]}applySize(e,n){e===0&&(e=.001),n===0&&(n=.001),this._width=e,this._height=n}applyScale(e,n){let i=C4.set(e,n);for(let r=0,s=this.points.length;r<s;r++){let o=this.points[r];o.position.multiply(i),o.controls[0].position.multiply(i),o.controls[1].position.multiply(i)}for(let r=0,s=this.shapeHoles.length;r<s;r++)this.shapeHoles[r].applyScale(e,n);this._update()}createPoint(e,n=0,i=zi.generateUUID()){let r;e instanceof Me?r=e:r=new Me(e,n);let s=new rb(i,r);return s.roundness=this.roundness,s}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,n){this.points.splice(n,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let n=0,i=this.points.length;n<i;n++){let r=this.points[n];if(r.uuid===e)return r}for(let n=0,i=this.shapeHoles.length;n<i;n++){let r=this.shapeHoles[n].getPointByUuid(e);if(r)return r}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let n=this.points.indexOf(e);n>=0&&this.points.splice(n,1),this.needsUpdate=!0}removePointById(e){let n=this.points.find(i=>i.uuid===e);n&&this.removePoint(n)}update(){for(let e=0,n=this.shapeHoles.length;e<n;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,n=12,i=!1){this.subdivision=n,this.curveDivisions===void 0&&this.computeCurveDivisions(n);let r=i?this.roundedCurveDivisions:this.curveDivisions;return Cpt(e,i?this.roundedCurves:this.curves,n,this.autoClose),r.reduce((s,o)=>s+o,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=Rie(this.points,e,!1),this.roundedCurveDivisions=Rie(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,n,i=12){return Tpt(e,this.curves,n,i,this.autoClose).reduce((r,s)=>r+s,0)*2}extractShapePointsToFlatArray(e,n=12){return this.subdivision=n,this.curveDivisions===void 0&&this.computeCurveDivisions(n),Ppt(e,this.roundedCurves,n,this.autoClose)}getCurveIndexFromVertexId(e,n=!1){let i=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let r=n?this.roundedCurveDivisions:this.curveDivisions,s=0;n&&this.points[0].roundedCurveCorner!==void 0&&(s=K0(this.points[0].roundedCurveCorner,this.subdivision)*.5);let o=e-s;o<0&&(o+=r.reduce((a,l)=>a+l,0));for(let a=0,l=r.length;a<l;a++){let c=r[a];if(o<i+c)return[a,(o-i+1)/c];i+=c}return[0,1]}getCurveT(e,n,i){let r=this.points[e],s=this.points[e>=this.points.length-1?0:e+1],o=this.curveDivisions,a=o[e];if(Oie(r,s)){let c=r.position.distanceTo(s.position);return r.position.distanceTo(C4.set(i.x,i.y))/c}let l=0;for(let c=0;c<e;c++)l+=o[c];return(n-l)/a}dispose(){}_applyCurveForPoint(e,n){Oie(n,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(n.controls[1].position.x,n.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let i=this.curves[this.curves.length-1];e.curveBefore=i,n.curveAfter=i;let r=i.clone();e.roundedCurveBefore=r,n.roundedCurveAfter=r,e.roundedCurveCorner=void 0,this.roundedCurves.push(r)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let n=0,i=this.points.length;n<i;n++){let r=this.points[n];if(n===0)this.moveTo(r.position.x,r.position.y);else{let s=this.points[n-1];this._applyCurveForPoint(r,s)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let n=this.points[0],i=this.points[this.points.length-1];this._applyCurveForPoint(n,i)}if(this.points.length>2){let n=0;for(let i=0,r=this.points.length;i<r;i++){let s=this.points[i],o=this.points[i-1]??this.points[this.points.length-1],a=this.points[i+1]??this.points[0],l=s.roundness,c=o&&a&&_pt(o,s,a);if(!s.controlsMoved()&&l>0&&!c){let h=s.curveBefore,u=s.curveAfter;if(h===void 0||u===void 0)continue;let d=s.roundedCurveBefore,f=s.roundedCurveAfter,p=h.getLength(),m=u.getLength(),g=Math.min(l,p*.499),v=Math.min(l,m*.499),y=Math.min(g,v),x=1-y/p,b=y/m,S=h.getPointAt(x,C4),A=u.getPointAt(b,Dpt);this._subSplitCurve(h,d,x,S,void 0),this._subSplitCurve(u,f,b,void 0,A);let E;if(this.useCubicForRoundedCorners){let M=f1e(S,s.position,A)/2,C=Math.tan(M)*S.distanceTo(s.position),[T,D]=Spt(S,A,C,Opt,Lpt),L=Apt(T,D,s.position),[I,R]=Mpt(L,S,A,C,Rpt,Ipt);E=new Tc(S.clone(),I.clone(),R.clone(),A.clone())}else E=new Hf(S.clone(),s.position.clone(),A.clone());s.roundedCurveCorner=E,this.roundedCurves.splice(i+n,0,E),n++}}}}_subSplitCurve(e,n,i,r,s){if(e instanceof Oc)r!==void 0&&n.v2.copy(r),s!==void 0&&n.v1.copy(s);else{let o=e,a=n,l=o.getUtoTmapping(i,0),c=Ept(o.v0,o.v1,o.v2,o.v3,l);return r!==void 0&&(a.v0.set(c[0],c[1]),a.v1.set(c[2],c[3]),a.v2.set(c[4],c[5]),a.v3.set(c[6],c[7])),s!==void 0&&(a.v0.set(c[6],c[7]),a.v1.set(c[8],c[9]),a.v2.set(c[10],c[11]),a.v3.set(c[12],c[13])),a}return n}clone(){let e=new Tr(this._width,this._height);return e.points=this.points.map(n=>n.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(n=>n.clone()),e}toJSON(){return{points:this.points.reduce((e,n)=>e.concat(n.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var i;this.points=[],this.pointIDs=0;let n=e.points.length/7;for(let r=0;r<n;r++){let s=r*7,o=e.points[s+0],a=e.points[s+1],l=e.points[s+2],c=e.points[s+3],h=e.points[s+4],u=e.points[s+5],d=e.points[s+6],f=new rb(zi.generateUUID(),new Me(o,a));f.controls[0].position.set(l,c),f.controls[1].position.set(h,u),f.roundness=d,this.points.push(f)}return this.shapeHoles=(i=e.shapeHoles)!=null&&i.length?e.shapeHoles.map(r=>{let s=new Tr;return s.fromJSON(r),s}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let n=(r,s)=>{s instanceof Tc&&s.v3.equals(r.position)&&r.controls[0].position.copy(s.v2)},i=r=>{let s=[],o,a;for(o=0,a=r.length;o<a;o++)r[o]instanceof Hf&&(r[o]=xpt(r[o]));for(o=0,a=r.length;o<a;o++){let h=r[o],u=o>0?r[o-1]:null,d;h instanceof Tc?(d=this.createPoint(h.v0),d.controls[1].position.copy(h.v1)):h instanceof Oc&&(d=this.createPoint(h.v1)),d!==void 0&&(u!==null&&n(d,u),s.push(d))}let l=r[r.length-1],c=!1;return l instanceof Tc?l.v3.equals(s[0].position)&&(s[0].controls[0].position.copy(l.v2),c=!0):l instanceof Oc&&l.v2.equals(s[0].position)&&(c=!0),this.isClosed=c,s};return this.points=i(e.curves),e instanceof Pu&&(this.shapeHoles=e.holes.map(r=>{let s=new Tr;return s.fromShape(r),s})),this.update(),this}updatePoint(e,n){let i=this.getPointByUuid(e);i&&(n.position!==void 0&&i.position.fromArray(n.position),n.roundness!==void 0&&(i.roundness=n.roundness),n.areControlsDirectionsMirrored!==void 0&&(i.areControlsDirectionsMirrored=n.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,n){var r;let i=(r=this.getPointByUuid(e))==null?void 0:r.controls[0];i&&(n.position&&i.position.fromArray(n.position),this.needsUpdate=!0)}updateNextControl(e,n){var r;let i=(r=this.getPointByUuid(e))==null?void 0:r.controls[1];i&&(n.position&&i.position.fromArray(n.position),this.needsUpdate=!0)}},wH=Math.PI*2;function T4({x:t,y:e},n,i,r,s){return{x:t*n+r,y:e*i+s}}function Bpt(t,e){let n=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),i=Math.cos(t),r=Math.sin(t),s=Math.cos(t+e),o=Math.sin(t+e);return[{x:i-r*n,y:r+i*n},{x:s+o*n,y:o-s*n},{x:s,y:o}]}function Iie(t,e,n,i){let r=t*i-e*n<0?-1:1,s=Math.min(1,Math.max(-1,t*n+e*i));return r*Math.acos(s)}function kpt(t,e,n,i,r,s,o,a,l,c){let h=Math.pow(r,2),u=Math.pow(s,2),d=Math.pow(o,2),f=Math.pow(a,2),p=h*u-h*f-u*d;p<0&&(p=0),p/=h*f+u*d,p=Math.sqrt(p)*(l===c?-1:1);let m=p*r/s*a,g=p*-s/r*o,v=m+(t+n)/2,y=g+(e+i)/2,x=(o-m)/r,b=(a-g)/s,S=(-o-m)/r,A=(-a-g)/s,E=Iie(1,0,x,b),M=Iie(x,b,S,A);return!c&&M>0&&(M-=wH),c&&M<0&&(M+=wH),{centerx:v,centery:y,ang1:E,ang2:M}}function Fpt({px:t,py:e,cx:n,cy:i,rx:r,ry:s,largeArcFlag:o,sweepFlag:a}){let l=[];if(r===0||s===0)return[];let c=(t-n)/2,h=(e-i)/2;if(c===0&&h===0)return[];r=Math.abs(r),s=Math.abs(s);let u=Math.pow(c,2)/Math.pow(r,2)+Math.pow(h,2)/Math.pow(s,2);u>1&&(r*=Math.sqrt(u),s*=Math.sqrt(u));let d=kpt(t,e,n,i,r,s,c,h,o,a),{ang1:f,ang2:p}=d,{centerx:m,centery:g}=d,v=Math.abs(p)/(wH/4);Math.abs(1-v)<1e-7&&(v=1);let y=Math.max(Math.ceil(v),1);p/=y;for(let x=0;x<y;x++)l.push(Bpt(f,p)),f+=p;return l.map(x=>{let{x:b,y:S}=T4(x[0],r,s,m,g),{x:A,y:E}=T4(x[1],r,s,m,g),{x:M,y:C}=T4(x[2],r,s,m,g);return{x1:b,y1:S,x2:A,y2:E,x:M,y:C}})}var di;(function(t){t[t.ODD=0]="ODD",t[t.NONZERO=1]="NONZERO",t[t.POSITIVE=2]="POSITIVE",t[t.NEGATIVE=3]="NEGATIVE",t[t.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(di||(di={}));var os;(function(t){t[t.POLYGONS=0]="POLYGONS",t[t.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",t[t.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(os||(os={}));function Yt(t,e){if(!t)throw e||"Assertion Failed!"}var Ht=function(){function t(){}return t.vertEq=function(e,n){return e.s===n.s&&e.t===n.t},t.vertLeq=function(e,n){return e.s<n.s||e.s===n.s&&e.t<=n.t},t.transLeq=function(e,n){return e.t<n.t||e.t===n.t&&e.s<=n.s},t.edgeGoesLeft=function(e){return t.vertLeq(e.Dst,e.Org)},t.edgeGoesRight=function(e){return t.vertLeq(e.Org,e.Dst)},t.vertL1dist=function(e,n){return Math.abs(e.s-n.s)+Math.abs(e.t-n.t)},t.edgeEval=function(e,n,i){Yt(t.vertLeq(e,n)&&t.vertLeq(n,i));var r=n.s-e.s,s=i.s-n.s;return r+s>0?r<s?n.t-e.t+(e.t-i.t)*(r/(r+s)):n.t-i.t+(i.t-e.t)*(s/(r+s)):0},t.edgeSign=function(e,n,i){Yt(t.vertLeq(e,n)&&t.vertLeq(n,i));var r=n.s-e.s,s=i.s-n.s;return r+s>0?(n.t-i.t)*r+(n.t-e.t)*s:0},t.transEval=function(e,n,i){Yt(t.transLeq(e,n)&&t.transLeq(n,i));var r=n.t-e.t,s=i.t-n.t;return r+s>0?r<s?n.s-e.s+(e.s-i.s)*(r/(r+s)):n.s-i.s+(i.s-e.s)*(s/(r+s)):0},t.transSign=function(e,n,i){Yt(t.transLeq(e,n)&&t.transLeq(n,i));var r=n.t-e.t,s=i.t-n.t;return r+s>0?(n.s-i.s)*r+(n.s-e.s)*s:0},t.vertCCW=function(e,n,i){return e.s*(n.t-i.t)+n.s*(i.t-e.t)+i.s*(e.t-n.t)>=0},t.interpolate=function(e,n,i,r){return e=e<0?0:e,i=i<0?0:i,e<=i?i===0?(n+r)/2:n+(r-n)*(e/(e+i)):r+(n-r)*(i/(e+i))},t.intersect=function(e,n,i,r,s){var o,a,l;t.vertLeq(e,n)||(l=e,e=n,n=l),t.vertLeq(i,r)||(l=i,i=r,r=l),t.vertLeq(e,i)||(l=e,e=i,i=l,l=n,n=r,r=l),t.vertLeq(i,n)?t.vertLeq(n,r)?(o=t.edgeEval(e,i,n),a=t.edgeEval(i,n,r),o+a<0&&(o=-o,a=-a),s.s=t.interpolate(o,i.s,a,n.s)):(o=t.edgeSign(e,i,n),a=-t.edgeSign(e,r,n),o+a<0&&(o=-o,a=-a),s.s=t.interpolate(o,i.s,a,r.s)):s.s=(i.s+n.s)/2,t.transLeq(e,n)||(l=e,e=n,n=l),t.transLeq(i,r)||(l=i,i=r,r=l),t.transLeq(e,i)||(l=e,e=i,i=l,l=n,n=r,r=l),t.transLeq(i,n)?t.transLeq(n,r)?(o=t.transEval(e,i,n),a=t.transEval(i,n,r),o+a<0&&(o=-o,a=-a),s.t=t.interpolate(o,i.t,a,n.t)):(o=t.transSign(e,i,n),a=-t.transSign(e,r,n),o+a<0&&(o=-o,a=-a),s.t=t.interpolate(o,i.t,a,r.t)):s.t=(i.t+n.t)/2},t}(),_S=function(){function t(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return t}(),BP=function(){function t(e){this.side=e,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(t.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(e){this.Sym.Lface=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(e){this.Sym.Org=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(e){this.Sym.Lnext=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(e){this.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(e){this.Lnext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(e){this.Sym.Onext=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(e){this.Sym.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(e){this.Sym.Lnext.Sym=e},enumerable:!0,configurable:!0}),t}(),k1=function(){function t(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return t}(),Bie=function(){function t(){var e=new k1,n=new _S,i=new BP(0),r=new BP(1);e.next=e.prev=e,e.anEdge=null,n.next=n.prev=n,i.next=i,i.Sym=r,r.next=r,r.Sym=i,this.vHead=e,this.fHead=n,this.eHead=i,this.eHeadSym=r}return t.prototype.makeEdge_=function(e){var n=new BP(0),i=new BP(1);e.Sym.side<e.side&&(e=e.Sym);var r=e.Sym.next;return i.next=r,r.Sym.next=n,n.next=e,e.Sym.next=i,n.Sym=i,n.Onext=n,n.Lnext=i,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,i.Sym=n,i.Onext=i,i.Lnext=n,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,n},t.prototype.splice_=function(e,n){var i=e.Onext,r=n.Onext;i.Sym.Lnext=n,r.Sym.Lnext=e,e.Onext=r,n.Onext=i},t.prototype.makeVertex_=function(e,n,i){var r=e;Yt(r,"Vertex can't be null!");var s=i.prev;r.prev=s,s.next=r,r.next=i,i.prev=r,r.anEdge=n;var o=n;do o.Org=r,o=o.Onext;while(o!==n)},t.prototype.makeFace_=function(e,n,i){var r=e;Yt(r,"Face can't be null");var s=i.prev;r.prev=s,s.next=r,r.next=i,i.prev=r,r.anEdge=n,r.trail=null,r.marked=!1,r.inside=i.inside;var o=n;do o.Lface=r,o=o.Lnext;while(o!==n)},t.prototype.killEdge_=function(e){e.Sym.side<e.side&&(e=e.Sym);var n=e.next,i=e.Sym.next;n.Sym.next=i,i.Sym.next=n},t.prototype.killVertex_=function(e,n){var i=e.anEdge,r=i;do r.Org=n,r=r.Onext;while(r!==i);var s=e.prev,o=e.next;o.prev=s,s.next=o},t.prototype.killFace_=function(e,n){var i=e.anEdge,r=i;do r.Lface=n,r=r.Lnext;while(r!==i);var s=e.prev,o=e.next;o.prev=s,s.next=o},t.prototype.makeEdge=function(){var e=new k1,n=new k1,i=new _S,r=this.makeEdge_(this.eHead);return this.makeVertex_(e,r,this.vHead),this.makeVertex_(n,r.Sym,this.vHead),this.makeFace_(i,r,this.fHead),r},t.prototype.splice=function(e,n){var i=!1,r=!1;if(e!==n){if(n.Org!==e.Org&&(r=!0,this.killVertex_(n.Org,e.Org)),n.Lface!==e.Lface&&(i=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(n,e),!r){var s=new k1;this.makeVertex_(s,n,e.Org),e.Org.anEdge=e}if(!i){var o=new _S;this.makeFace_(o,n,e.Lface),e.Lface.anEdge=e}}},t.prototype.delete=function(e){var n=e.Sym,i=!1;if(e.Lface!==e.Rface&&(i=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!i){var r=new _S;this.makeFace_(r,e,e.Lface)}n.Onext===n?(this.killVertex_(n.Org,null),this.killFace_(n.Lface,null)):(e.Lface.anEdge=n.Oprev,n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),this.killEdge_(e)},t.prototype.addEdgeVertex=function(e){var n=this.makeEdge_(e),i=n.Sym;this.splice_(n,e.Lnext),n.Org=e.Dst;var r=new k1;return this.makeVertex_(r,i,n.Org),n.Lface=i.Lface=e.Lface,n},t.prototype.splitEdge=function(e){var n=this.addEdgeVertex(e),i=n.Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,i),e.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=e.Rface,i.winding=e.winding,i.Sym.winding=e.Sym.winding,i.idx=e.idx,i.Sym.idx=e.Sym.idx,i},t.prototype.connect=function(e,n){var i=!1,r=this.makeEdge_(e),s=r.Sym;if(n.Lface!==e.Lface&&(i=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(r,e.Lnext),this.splice_(s,n),r.Org=e.Dst,s.Org=n.Org,r.Lface=s.Lface=e.Lface,e.Lface.anEdge=s,!i){var o=new _S;this.makeFace_(o,r,e.Lface)}return r},t.prototype.zapFace=function(e){var n=e.anEdge,i,r,s,o,a;r=n.Lnext;do i=r,r=i.Lnext,i.Lface=null,i.Rface===null&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),s=i.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(i));while(i!=n);o=e.prev,a=e.next,a.prev=o,o.next=a},t.prototype.countFaceVerts_=function(e){var n=e.anEdge,i=0;do i++,n=n.Lnext;while(n!==e.anEdge);return i},t.prototype.mergeConvexFaces=function(e){var n,i,r,s,o,a,l;for(n=this.fHead.next;n!==this.fHead;n=n.next)if(n.inside)for(i=n.anEdge,o=i.Org;r=i.Lnext,s=i.Sym,s&&s.Lface&&s.Lface.inside&&(a=this.countFaceVerts_(n),l=this.countFaceVerts_(s.Lface),a+l-2<=e&&Ht.vertCCW(i.Lprev.Org,i.Org,s.Lnext.Lnext.Org)&&Ht.vertCCW(s.Lprev.Org,s.Org,i.Lnext.Lnext.Org)&&(r=s.Lnext,this.delete(s),i=null,s=null)),!(i&&i.Lnext.Org===o);)i=r;return!0},t.prototype.check=function(){var e=this.fHead,n=this.vHead,i=this.eHead,r,s,o,a,l,c;for(s=e,s=e;(r=s.next)!==e;s=r){Yt(r.prev===s),l=r.anEdge;do Yt(l.Sym!==l),Yt(l.Sym.Sym===l),Yt(l.Lnext.Onext.Sym===l),Yt(l.Onext.Sym.Lnext===l),Yt(l.Lface===r),l=l.Lnext;while(l!==r.anEdge)}for(Yt(r.prev===s&&r.anEdge===null),a=n,a=n;(o=a.next)!==n;a=o){Yt(o.prev===a),l=o.anEdge;do Yt(l.Sym!==l),Yt(l.Sym.Sym===l),Yt(l.Lnext.Onext.Sym===l),Yt(l.Onext.Sym.Lnext===l),Yt(l.Org===o),l=l.Onext;while(l!==o.anEdge)}for(Yt(o.prev===a&&o.anEdge===null),c=i,c=i;(l=c.next)!==i;c=l)Yt(l.Sym.next===c.Sym),Yt(l.Sym!==l),Yt(l.Sym.Sym===l),Yt(l.Org!==null),Yt(l.Dst!==null),Yt(l.Lnext.Onext.Sym===l),Yt(l.Onext.Sym.Lnext===l);Yt(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},t}(),kie=function(){function t(){this.handle=null}return t}(),Fie=function(){function t(){this.key=null,this.node=0}return t}(),Npt=function(){function t(e,n){this.leq=n,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=e,this.nodes=[],this.handles=[];for(var i=0;i<e+1;i++)this.nodes[i]=new kie,this.handles[i]=new Fie;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return t.prototype.floatDown_=function(e){var n=this.nodes,i=this.handles,r,s,o;for(r=n[e].handle;;){if(o=e<<1,o<this.size&&this.leq(i[n[o+1].handle].key,i[n[o].handle].key)&&++o,Yt(o<=this.max),s=n[o].handle,o>this.size||this.leq(i[r].key,i[s].key)){n[e].handle=r,i[r].node=e;break}n[e].handle=s,i[s].node=e,e=o}},t.prototype.floatUp_=function(e){var n=this.nodes,i=this.handles,r,s,o;for(r=n[e].handle;;){if(o=e>>1,s=n[o].handle,o===0||this.leq(i[s].key,i[r].key)){n[e].handle=r,i[r].node=e;break}n[e].handle=s,i[s].node=e,e=o}},t.prototype.init=function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},t.prototype.min=function(){return this.handles[this.nodes[1].handle].key},t.prototype.insert=function(e){var n,i;if(n=++this.size,n*2>this.max){this.max*=2;var r,s;for(s=this.nodes.length,this.nodes.length=this.max+1,r=s;r<this.nodes.length;r++)this.nodes[r]=new kie;for(s=this.handles.length,this.handles.length=this.max+1,r=s;r<this.handles.length;r++)this.handles[r]=new Fie}return this.freeList===0?i=n:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[n].handle=i,this.handles[i].node=n,this.handles[i].key=e,this.initialized&&this.floatUp_(n),i},t.prototype.extractMin=function(){var e=this.nodes,n=this.handles,i=e[1].handle,r=n[i].key;return this.size>0&&(e[1].handle=e[this.size].handle,n[e[1].handle].node=1,n[i].key=null,n[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),r},t.prototype.delete=function(e){var n=this.nodes,i=this.handles,r;Yt(e>=1&&e<=this.max&&i[e].key!==null),r=i[e].node,n[r].handle=n[this.size].handle,i[n[r].handle].node=r,--this.size,r<=this.size&&(r<=1||this.leq(i[n[r>>1].handle].key,i[n[r].handle].key)?this.floatDown_(r):this.floatUp_(r)),i[e].key=null,i[e].node=this.freeList,this.freeList=e},t}(),P4=function(){function t(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return t}(),Nie=function(){function t(){this.key=null,this.next=null,this.prev=null}return t}(),zpt=function(){function t(e,n){this.frame=e,this.leq=n,this.head=new Nie,this.head.next=this.head,this.head.prev=this.head}return t.prototype.min=function(){return this.head.next},t.prototype.max=function(){return this.head.prev},t.prototype.insert=function(e){return this.insertBefore(this.head,e)},t.prototype.search=function(e){var n=this.head;do n=n.next;while(n.key!==null&&!this.leq(this.frame,e,n.key));return n},t.prototype.insertBefore=function(e,n){do e=e.prev;while(e.key!==null&&!this.leq(this.frame,e.key,n));var i=new Nie;return i.key=n,i.next=e.next,e.next.prev=i,i.prev=e,e.next=i,i},t.prototype.delete=function(e){e.next.prev=e.prev,e.prev.next=e.next},t}(),Upt=function(){function t(){}return t.regionBelow=function(e){return e.nodeUp.prev.key},t.regionAbove=function(e){return e.nodeUp.next.key},t.debugEvent=function(e){},t.addWinding=function(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding},t.edgeLeq=function(e,n,i){var r=e.event,s=n.eUp,o=i.eUp;if(s.Dst===r)return o.Dst===r?Ht.vertLeq(s.Org,o.Org)?Ht.edgeSign(o.Dst,s.Org,o.Org)<=0:Ht.edgeSign(s.Dst,o.Org,s.Org)>=0:Ht.edgeSign(o.Dst,r,o.Org)<=0;if(o.Dst===r)return Ht.edgeSign(s.Dst,r,s.Org)>=0;var a=Ht.edgeEval(s.Dst,r,s.Org),l=Ht.edgeEval(o.Dst,r,o.Org);return a>=l},t.deleteRegion=function(e,n){n.fixUpperEdge&&Yt(n.eUp.winding===0),n.eUp.activeRegion=null,e.dict.delete(n.nodeUp)},t.fixUpperEdge=function(e,n,i){Yt(n.fixUpperEdge),e.mesh.delete(n.eUp),n.fixUpperEdge=!1,n.eUp=i,i.activeRegion=n},t.topLeftRegion=function(e,n){var i=n.eUp.Org,r;do n=t.regionAbove(n);while(n.eUp.Org===i);if(n.fixUpperEdge){if(r=e.mesh.connect(t.regionBelow(n).eUp.Sym,n.eUp.Lnext),r===null)return null;t.fixUpperEdge(e,n,r),n=t.regionAbove(n)}return n},t.topRightRegion=function(e){var n=e.eUp.Dst;do e=t.regionAbove(e);while(e.eUp.Dst===n);return e},t.addRegionBelow=function(e,n,i){var r=new P4;return r.eUp=i,r.nodeUp=e.dict.insertBefore(n.nodeUp,r),r.fixUpperEdge=!1,r.sentinel=!1,r.dirty=!1,i.activeRegion=r,r},t.isWindingInside=function(e,n){switch(e.windingRule){case di.ODD:return(n&1)!==0;case di.NONZERO:return n!==0;case di.POSITIVE:return n>0;case di.NEGATIVE:return n<0;case di.ABS_GEQ_TWO:return n>=2||n<=-2}throw new Error("Invalid winding rulle")},t.computeWinding=function(e,n){n.windingNumber=t.regionAbove(n).windingNumber+n.eUp.winding,n.inside=t.isWindingInside(e,n.windingNumber)},t.finishRegion=function(e,n){var i=n.eUp,r=i.Lface;r.inside=n.inside,r.anEdge=i,t.deleteRegion(e,n)},t.finishLeftRegions=function(e,n,i){for(var r,s=null,o=n,a=n.eUp;o!==i;){if(o.fixUpperEdge=!1,s=t.regionBelow(o),r=s.eUp,r.Org!=a.Org){if(!s.fixUpperEdge){t.finishRegion(e,o);break}r=e.mesh.connect(a.Lprev,r.Sym),t.fixUpperEdge(e,s,r)}a.Onext!==r&&(e.mesh.splice(r.Oprev,r),e.mesh.splice(a,r)),t.finishRegion(e,o),a=s.eUp,o=s}return a},t.addRightEdges=function(e,n,i,r,s,o){var a,l,c,h,u=!0;c=i;do Yt(Ht.vertLeq(c.Org,c.Dst)),t.addRegionBelow(e,n,c.Sym),c=c.Onext;while(c!==r);for(s===null&&(s=t.regionBelow(n).eUp.Rprev),l=n,h=s;a=t.regionBelow(l),c=a.eUp.Sym,c.Org===h.Org;)c.Onext!==h&&(e.mesh.splice(c.Oprev,c),e.mesh.splice(h.Oprev,c)),a.windingNumber=l.windingNumber-c.winding,a.inside=t.isWindingInside(e,a.windingNumber),l.dirty=!0,!u&&t.checkForRightSplice(e,l)&&(t.addWinding(c,h),t.deleteRegion(e,l),e.mesh.delete(h)),u=!1,l=a,h=c;l.dirty=!0,Yt(l.windingNumber-c.winding===a.windingNumber),o&&t.walkDirtyRegions(e,l)},t.spliceMergeVertices=function(e,n,i){e.mesh.splice(n,i)},t.vertexWeights=function(e,n,i){var r=Ht.vertL1dist(n,e),s=Ht.vertL1dist(i,e),o=.5*s/(r+s),a=.5*r/(r+s);e.coords[0]+=o*n.coords[0]+a*i.coords[0],e.coords[1]+=o*n.coords[1]+a*i.coords[1],e.coords[2]+=o*n.coords[2]+a*i.coords[2]},t.getIntersectData=function(e,n,i,r,s,o){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,t.vertexWeights(n,i,r),t.vertexWeights(n,s,o)},t.checkForRightSplice=function(e,n){var i=t.regionBelow(n),r=n.eUp,s=i.eUp;if(Ht.vertLeq(r.Org,s.Org)){if(Ht.edgeSign(s.Dst,r.Org,s.Org)>0)return!1;Ht.vertEq(r.Org,s.Org)?r.Org!==s.Org&&(e.pq.delete(r.Org.pqHandle),t.spliceMergeVertices(e,s.Oprev,r)):(e.mesh.splitEdge(s.Sym),e.mesh.splice(r,s.Oprev),n.dirty=i.dirty=!0)}else{if(Ht.edgeSign(r.Dst,s.Org,r.Org)<0)return!1;t.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(r.Sym),e.mesh.splice(s.Oprev,r)}return!0},t.checkForLeftSplice=function(e,n){var i=t.regionBelow(n),r=n.eUp,s=i.eUp,o;if(Yt(!Ht.vertEq(r.Dst,s.Dst)),Ht.vertLeq(r.Dst,s.Dst)){if(Ht.edgeSign(r.Dst,s.Dst,r.Org)<0)return!1;t.regionAbove(n).dirty=n.dirty=!0,o=e.mesh.splitEdge(r),e.mesh.splice(s.Sym,o),o.Lface.inside=n.inside}else{if(Ht.edgeSign(s.Dst,r.Dst,s.Org)>0)return!1;n.dirty=i.dirty=!0,o=e.mesh.splitEdge(s),e.mesh.splice(r.Lnext,s.Sym),o.Rface.inside=n.inside}return!0},t.checkForIntersect=function(e,n){var i=t.regionBelow(n),r=n.eUp,s=i.eUp,o=r.Org,a=s.Org,l=r.Dst,c=s.Dst,h,u,d=new k1,f,p;if(Yt(!Ht.vertEq(c,l)),Yt(Ht.edgeSign(l,e.event,o)<=0),Yt(Ht.edgeSign(c,e.event,a)>=0),Yt(o!==e.event&&a!==e.event),Yt(!n.fixUpperEdge&&!i.fixUpperEdge),o===a||(h=Math.min(o.t,l.t),u=Math.max(a.t,c.t),h>u))return!1;if(Ht.vertLeq(o,a)){if(Ht.edgeSign(c,o,a)>0)return!1}else if(Ht.edgeSign(l,a,o)<0)return!1;return t.debugEvent(e),Ht.intersect(l,o,c,a,d),Yt(Math.min(o.t,l.t)<=d.t),Yt(d.t<=Math.max(a.t,c.t)),Yt(Math.min(c.s,l.s)<=d.s),Yt(d.s<=Math.max(a.s,o.s)),Ht.vertLeq(d,e.event)&&(d.s=e.event.s,d.t=e.event.t),f=Ht.vertLeq(o,a)?o:a,Ht.vertLeq(f,d)&&(d.s=f.s,d.t=f.t),Ht.vertEq(d,o)||Ht.vertEq(d,a)?(t.checkForRightSplice(e,n),!1):!Ht.vertEq(l,e.event)&&Ht.edgeSign(l,e.event,d)>=0||!Ht.vertEq(c,e.event)&&Ht.edgeSign(c,e.event,d)<=0?c===e.event?(e.mesh.splitEdge(r.Sym),e.mesh.splice(s.Sym,r),n=t.topLeftRegion(e,n),r=t.regionBelow(n).eUp,t.finishLeftRegions(e,t.regionBelow(n),i),t.addRightEdges(e,n,r.Oprev,r,r,!0),!0):l===e.event?(e.mesh.splitEdge(s.Sym),e.mesh.splice(r.Lnext,s.Oprev),i=n,n=t.topRightRegion(n),p=t.regionBelow(n).eUp.Rprev,i.eUp=s.Oprev,s=t.finishLeftRegions(e,i,null),t.addRightEdges(e,n,s.Onext,r.Rprev,p,!0),!0):(Ht.edgeSign(l,e.event,d)>=0&&(t.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(r.Sym),r.Org.s=e.event.s,r.Org.t=e.event.t),Ht.edgeSign(c,e.event,d)<=0&&(n.dirty=i.dirty=!0,e.mesh.splitEdge(s.Sym),s.Org.s=e.event.s,s.Org.t=e.event.t),!1):(e.mesh.splitEdge(r.Sym),e.mesh.splitEdge(s.Sym),e.mesh.splice(s.Oprev,r),r.Org.s=d.s,r.Org.t=d.t,r.Org.pqHandle=e.pq.insert(r.Org),t.getIntersectData(e,r.Org,o,l,a,c),t.regionAbove(n).dirty=n.dirty=i.dirty=!0,!1)},t.walkDirtyRegions=function(e,n){for(var i=t.regionBelow(n),r,s;;){for(;i.dirty;)n=i,i=t.regionBelow(i);if(!n.dirty&&(i=n,n=t.regionAbove(n),n===null||!n.dirty))return;if(n.dirty=!1,r=n.eUp,s=i.eUp,r.Dst!==s.Dst&&t.checkForLeftSplice(e,n)&&(i.fixUpperEdge?(t.deleteRegion(e,i),e.mesh.delete(s),i=t.regionBelow(n),s=i.eUp):n.fixUpperEdge&&(t.deleteRegion(e,n),e.mesh.delete(r),n=t.regionAbove(i),r=n.eUp)),r.Org!==s.Org)if(r.Dst!==s.Dst&&!n.fixUpperEdge&&!i.fixUpperEdge&&(r.Dst===e.event||s.Dst===e.event)){if(t.checkForIntersect(e,n))return}else t.checkForRightSplice(e,n);r.Org===s.Org&&r.Dst===s.Dst&&(t.addWinding(s,r),t.deleteRegion(e,n),e.mesh.delete(r),n=t.regionAbove(i))}},t.connectRightVertex=function(e,n,i){var r,s=i.Onext,o=t.regionBelow(n),a=n.eUp,l=o.eUp,c=!1;if(a.Dst!==l.Dst&&t.checkForIntersect(e,n),Ht.vertEq(a.Org,e.event)&&(e.mesh.splice(s.Oprev,a),n=t.topLeftRegion(e,n),s=t.regionBelow(n).eUp,t.finishLeftRegions(e,t.regionBelow(n),o),c=!0),Ht.vertEq(l.Org,e.event)&&(e.mesh.splice(i,l.Oprev),i=t.finishLeftRegions(e,o,null),c=!0),c){t.addRightEdges(e,n,i.Onext,s,s,!0);return}Ht.vertLeq(l.Org,a.Org)?r=l.Oprev:r=a,r=e.mesh.connect(i.Lprev,r),t.addRightEdges(e,n,r,r.Onext,r.Onext,!1),r.Sym.activeRegion.fixUpperEdge=!0,t.walkDirtyRegions(e,n)},t.connectLeftDegenerate=function(e,n,i){var r,s,o,a,l;if(r=n.eUp,Ht.vertEq(r.Org,i)){Yt(!1),t.spliceMergeVertices(e,r,i.anEdge);return}if(!Ht.vertEq(r.Dst,i)){e.mesh.splitEdge(r.Sym),n.fixUpperEdge&&(e.mesh.delete(r.Onext),n.fixUpperEdge=!1),e.mesh.splice(i.anEdge,r),t.sweepEvent(e,i);return}Yt(!1),n=t.topRightRegion(n),l=t.regionBelow(n),o=l.eUp.Sym,s=a=o.Onext,l.fixUpperEdge&&(Yt(s!==o),t.deleteRegion(e,l),e.mesh.delete(o),o=s.Oprev),e.mesh.splice(i.anEdge,o),Ht.edgeGoesLeft(s)||(s=null),t.addRightEdges(e,n,o.Onext,a,s,!0)},t.connectLeftVertex=function(e,n){var i,r,s,o,a,l,c=new P4;if(c.eUp=n.anEdge.Sym,i=e.dict.search(c).key,r=t.regionBelow(i),!!r){if(o=i.eUp,a=r.eUp,Ht.edgeSign(o.Dst,n,o.Org)===0){t.connectLeftDegenerate(e,i,n);return}if(s=Ht.vertLeq(a.Dst,o.Dst)?i:r,i.inside||s.fixUpperEdge){if(s===i)l=e.mesh.connect(n.anEdge.Sym,o.Lnext);else{var h=e.mesh.connect(a.Dnext,n.anEdge);l=h.Sym}s.fixUpperEdge?t.fixUpperEdge(e,s,l):t.computeWinding(e,t.addRegionBelow(e,i,l)),t.sweepEvent(e,n)}else t.addRightEdges(e,i,n.anEdge,n.anEdge,null,!0)}},t.sweepEvent=function(e,n){e.event=n,t.debugEvent(e);for(var i=n.anEdge;i.activeRegion===null;)if(i=i.Onext,i===n.anEdge){t.connectLeftVertex(e,n);return}var r=t.topLeftRegion(e,i.activeRegion);Yt(r!==null);var s=t.regionBelow(r),o=s.eUp,a=t.finishLeftRegions(e,s,null);a.Onext===o?t.connectRightVertex(e,r,a):t.addRightEdges(e,r,a.Onext,o,o,!0)},t.addSentinel=function(e,n,i,r){var s=new P4,o=e.mesh.makeEdge();o.Org.s=i,o.Org.t=r,o.Dst.s=n,o.Dst.t=r,e.event=o.Dst,s.eUp=o,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=e.dict.insert(s)},t.initEdgeDict=function(e){e.dict=new zpt(e,t.edgeLeq);var n=e.bmax[0]-e.bmin[0],i=e.bmax[1]-e.bmin[1],r=e.bmin[0]-n,s=e.bmax[0]+n,o=e.bmin[1]-i,a=e.bmax[1]+i;t.addSentinel(e,r,s,o),t.addSentinel(e,r,s,a)},t.doneEdgeDict=function(e){for(var n,i=0;(n=e.dict.min().key)!==null;)n.sentinel||(Yt(n.fixUpperEdge),Yt(++i===1)),Yt(n.windingNumber===0),t.deleteRegion(e,n)},t.removeDegenerateEdges=function(e){var n,i,r,s=e.mesh.eHead;for(n=s.next;n!==s;n=i)i=n.next,r=n.Lnext,Ht.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(t.spliceMergeVertices(e,r,n),e.mesh.delete(n),n=r,r=n.Lnext),r.Lnext===n&&(r!==n&&((r===i||r===i.Sym)&&(i=i.next),e.mesh.delete(r)),(n===i||n===i.Sym)&&(i=i.next),e.mesh.delete(n))},t.initPriorityQ=function(e){var n,i,r,s=0;for(r=e.mesh.vHead,i=r.next;i!==r;i=i.next)s++;for(s+=8,n=e.pq=new Npt(s,Ht.vertLeq),r=e.mesh.vHead,i=r.next;i!==r;i=i.next)i.pqHandle=n.insert(i);return i!==r?!1:(n.init(),!0)},t.donePriorityQ=function(e){e.pq=null},t.removeDegenerateFaces=function(e,n){var i,r,s;for(i=n.fHead.next;i!==n.fHead;i=r)r=i.next,s=i.anEdge,Yt(s.Lnext!==s),s.Lnext.Lnext===s&&(t.addWinding(s.Onext,s),e.mesh.delete(s));return!0},t.computeInterior=function(e,n){n===void 0&&(n=!0);var i,r;if(t.removeDegenerateEdges(e),!t.initPriorityQ(e))return!1;for(t.initEdgeDict(e);(i=e.pq.extractMin())!==null;){for(;r=e.pq.min(),!(r===null||!Ht.vertEq(r,i));)r=e.pq.extractMin(),t.spliceMergeVertices(e,i.anEdge,r.anEdge);t.sweepEvent(e,i)}return e.event=e.dict.min().key.eUp.Org,t.debugEvent(e),t.doneEdgeDict(e),t.donePriorityQ(e),t.removeDegenerateFaces(e,e.mesh)?(n&&e.mesh.check(),!0):!1},t}(),Gpt=function(){function t(){this.mesh=new Bie,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=di.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return t.prototype.dot_=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},t.prototype.normalize_=function(e){var n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!n)throw"Zero-size vector!";n=Math.sqrt(n),e[0]/=n,e[1]/=n,e[2]/=n},t.prototype.longAxis_=function(e){var n=0;return Math.abs(e[1])>Math.abs(e[0])&&(n=1),Math.abs(e[2])>Math.abs(e[n])&&(n=2),n},t.prototype.computeNormal_=function(e){var n,i,r,s,o,a,l=[0,0,0],c=[0,0,0],h=[0,0,0],u=[0,0,0],d=[0,0,0],f=[null,null,null],p=[null,null,null],m=this.mesh.vHead;n=m.next;for(var g=0;g<3;++g)s=n.coords[g],c[g]=s,p[g]=n,l[g]=s,f[g]=n;for(n=m.next;n!==m;n=n.next)for(var v=0;v<3;++v)s=n.coords[v],s<c[v]&&(c[v]=s,p[v]=n),s>l[v]&&(l[v]=s,f[v]=n);var y=0;if(l[1]-c[1]>l[0]-c[0]&&(y=1),l[2]-c[2]>l[y]-c[y]&&(y=2),c[y]>=l[y]){e[0]=0,e[1]=0,e[2]=1;return}for(a=0,i=p[y],r=f[y],h[0]=i.coords[0]-r.coords[0],h[1]=i.coords[1]-r.coords[1],h[2]=i.coords[2]-r.coords[2],n=m.next;n!==m;n=n.next)u[0]=n.coords[0]-r.coords[0],u[1]=n.coords[1]-r.coords[1],u[2]=n.coords[2]-r.coords[2],d[0]=h[1]*u[2]-h[2]*u[1],d[1]=h[2]*u[0]-h[0]*u[2],d[2]=h[0]*u[1]-h[1]*u[0],o=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],o>a&&(a=o,e[0]=d[0],e[1]=d[1],e[2]=d[2]);a<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(h)]=1)},t.prototype.checkOrientation_=function(){for(var e=this.mesh.fHead,n,i=this.mesh.vHead,r,s=0,o=e.next;o!==e;o=o.next)if(r=o.anEdge,!(r.winding<=0))do s+=(r.Org.s-r.Dst.s)*(r.Org.t+r.Dst.t),r=r.Lnext;while(r!==o.anEdge);if(s<0){for(n=i.next;n!==i;n=n.next)n.t=-n.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},t.prototype.projectPolygon_=function(){var e=this.mesh.vHead,n=[0,0,0],i,r,s=!1;n[0]=this.normal[0],n[1]=this.normal[1],n[2]=this.normal[2],!n[0]&&!n[1]&&!n[2]&&(this.computeNormal_(n),s=!0),i=this.sUnit,r=this.tUnit;var o=this.longAxis_(n);i[o]=0,i[(o+1)%3]=1,i[(o+2)%3]=0,r[o]=0,r[(o+1)%3]=0,r[(o+2)%3]=n[o]>0?1:-1;for(var a=e.next;a!==e;a=a.next)a.s=this.dot_(a.coords,i),a.t=this.dot_(a.coords,r);s&&this.checkOrientation_();for(var l=!0,c=e.next;c!==e;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},t.prototype.addWinding_=function(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding},t.prototype.tessellateMonoRegion_=function(e,n){var i,r;if(i=n.anEdge,!(i.Lnext!==i&&i.Lnext.Lnext!==i))throw"Mono region invalid";for(;Ht.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;Ht.vertLeq(i.Org,i.Dst);i=i.Lnext);r=i.Lprev;for(var s=void 0;i.Lnext!==r;)if(Ht.vertLeq(i.Dst,r.Org)){for(;r.Lnext!==i&&(Ht.edgeGoesLeft(r.Lnext)||Ht.edgeSign(r.Org,r.Dst,r.Lnext.Dst)<=0);)s=e.connect(r.Lnext,r),r=s.Sym;r=r.Lprev}else{for(;r.Lnext!==i&&(Ht.edgeGoesRight(i.Lprev)||Ht.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)s=e.connect(i,i.Lprev),i=s.Sym;i=i.Lnext}if(r.Lnext===i)throw"Mono region invalid";for(;r.Lnext.Lnext!==i;)s=e.connect(r.Lnext,r),r=s.Sym;return!0},t.prototype.tessellateInterior_=function(e){for(var n,i=e.fHead.next;i!==e.fHead;i=n)if(n=i.next,i.inside&&!this.tessellateMonoRegion_(e,i))return!1;return!0},t.prototype.discardExterior_=function(e){for(var n,i=e.fHead.next;i!==e.fHead;i=n)n=i.next,i.inside||e.zapFace(i)},t.prototype.setWindingNumber_=function(e,n,i){for(var r,s=e.eHead.next;s!==e.eHead;s=r)r=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?n:-n:i?e.delete(s):s.winding=0},t.prototype.getNeighbourFace_=function(e){return!e.Rface||!e.Rface.inside?-1:e.Rface.n},t.prototype.outputPolymesh_=function(e,n,i,r){var s,o=0,a=0,l;i>3&&e.mergeConvexFaces(i);for(var c=e.vHead.next;c!==e.vHead;c=c.next)c.n=-1;for(var h=e.fHead.next;h!==e.fHead;h=h.next)if(h.n=-1,!!h.inside){s=h.anEdge,l=0;do{var c=s.Org;c.n===-1&&(c.n=a,a++),l++,s=s.Lnext}while(s!==h.anEdge);if(l>i)throw"Face vertex greater that support polygon";h.n=o,++o}this.elementCount=o,n===os.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*i,this.vertexCount=a,this.vertices=[],this.vertices.length=a*r,this.vertexIndices=[],this.vertexIndices.length=a;for(var c=e.vHead.next;c!==e.vHead;c=c.next)if(c.n!==-1){var u=c.n*r;this.vertices[u+0]=c.coords[0],this.vertices[u+1]=c.coords[1],r>2&&(this.vertices[u+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}for(var d=0,h=e.fHead.next;h!==e.fHead;h=h.next)if(h.inside){s=h.anEdge,l=0;do{var c=s.Org;this.elements[d++]=c.n,l++,s=s.Lnext}while(s!==h.anEdge);for(var f=l;f<i;++f)this.elements[d++]=-1;if(n===os.CONNECTED_POLYGONS){s=h.anEdge;do this.elements[d++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==h.anEdge);for(var p=l;p<i;++p)this.elements[d++]=-1}}},t.prototype.outputContours_=function(e,n){var i,r,s=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){r=i=a.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==r);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*n,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,h=0;s=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){o=0,r=i=a.anEdge;do this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],n>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,o++,i=i.Lnext;while(i!==r);this.elements[h++]=s,this.elements[h++]=o,s+=o}},t.prototype.addContour=function(e,n){this.mesh===null&&(this.mesh=new Bie),e<2&&(e=2),e>3&&(e=3);for(var i=null,r=0;r<n.length;r+=e)i===null?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=n[r+0],i.Org.coords[1]=n[r+1],e>2?i.Org.coords[2]=n[r+2]:i.Org.coords[2]=0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},t.prototype.tesselate=function(e,n,i,r,s,o){if(e===void 0&&(e=di.ODD),n===void 0&&(n=os.POLYGONS),o===void 0&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=e,r<2&&(r=2),r>3&&(r=3),!this.mesh)return!1;this.projectPolygon_(),Upt.computeInterior(this,o);var a=this.mesh;return n===os.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),n===os.BOUNDARY_CONTOURS?this.outputContours_(a,r):this.outputPolymesh_(a,n,i,r),!0},t}();function am(t){var e=t.windingRule,n=e===void 0?di.ODD:e,i=t.elementType,r=i===void 0?os.POLYGONS:i,s=t.polySize,o=s===void 0?3:s,a=t.vertexSize,l=a===void 0?2:a,c=t.normal,h=c===void 0?[0,0,1]:c,u=t.contours,d=u===void 0?[]:u,f=t.strict,p=f===void 0?!0:f,m=t.debug,g=m===void 0?!1:m;if(!d&&p)throw new Error("Contours can't be empty");if(d){var v=new Gpt;t.edgeCreateCallback&&(v.edgeCreateCallback=t.edgeCreateCallback),t.vertexIdCallback&&(v.vertexIdCallback=t.vertexIdCallback);for(var y=0;y<d.length;y++)v.addContour(l||2,d[y]);return v.tesselate(n,r,o,l,h,p),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:g?v.mesh:void 0}}}di.ODD;di.NONZERO;di.POSITIVE;di.NEGATIVE;di.ABS_GEQ_TWO;os.POLYGONS;os.CONNECTED_POLYGONS;os.BOUNDARY_CONTOURS;var _H=class{constructor(e=256,n=!1){this.capacity=e,this.size=0,this.debug=n,this.debug&&console.log(`allocating with cap ${e}`);let i=e*_H.eSize;this.buffer=new ArrayBuffer(i);let r=Float32Array.BYTES_PER_ELEMENT,s=0;this.positions=new Float32Array(this.buffer,s*r,3*e),s+=3*e,this.normals=new Float32Array(this.buffer,s*r,3*e),s+=3*e,this.uvs=new Float32Array(this.buffer,s*r,2*e)}realloc(e,n=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!n)return;this.debug&&console.log(`resizing from ${this.capacity} → ${e}`);let i=e*_H.eSize,r=new ArrayBuffer(i),s=Float32Array.BYTES_PER_ELEMENT,o=0,a=new Float32Array(r,o*s,3*e);o+=3*e;let l=new Float32Array(r,o*s,3*e);o+=3*e;let c=new Float32Array(r,o*s,2*e);a.set(this.positions.slice(0,this.size*3)),l.set(this.normals.slice(0,this.size*3)),c.set(this.uvs.slice(0,this.size*2)),this.buffer=r,this.positions=a,this.normals=l,this.uvs=c,this.capacity=e}get(e=1){let n=this.size+e;if(n>this.capacity){let r=this.capacity;for(;n>r;)r*=2;this.realloc(r)}let i=this.size;return this.size=n,i}reserve(e){let n=this.size+e;n>this.capacity&&this.realloc(n)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},p1e=_H;p1e.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var t$={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},m1e={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},g1e={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},D4=(t,e)=>([n,i])=>(i<n&&(i+=e),(t>=n?t:t+e)<=i),v1e=class extends yt{constructor(e,n,i=0,r=12,s=3,o=di.ODD){super(),this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=n,this._bevel=i,this._curveSegments=r,this._bevelSegmentsInput=s,i<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(i,n/2-1e-12),this._bevelSegments=Math.floor(s));let a=this._shape.extractShapePointsToFlatArray([],r),l=this._shape.shapeHoles.map(A=>{let E=A.extractShapePointsToFlatArray([],r),M=[];for(let C=E.length-1;C>=1;C-=2){let T=E[C-1],D=E[C-0];M.push(T,D)}return M}),c;try{c=am({windingRule:o,elementType:os.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[a]})}catch{c=t$}let h;try{h=am({windingRule:di.ODD,elementType:os.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{h=m1e}if(!c)throw new Error("error generating geometry");let u=c.elementCount;if(h){c.elementCount+=h.elementCount;for(let A=0;A<h.elements.length;A++){let E=h.elements[A],M=A%2===0?c.vertexCount:0;c.elements.push(E+M)}for(let A=0;A<h.vertexIndices.length;A++){let E=h.vertexIndices[A],M=c.vertexCount;c.vertexIndices.push(E+M)}for(let A=0;A<h.vertices.length;A++){let E=h.vertices[A];c.vertices.push(E)}}let d=1/0,f=-1/0,p=1/0,m=-1/0;for(let A=0,E=c.vertexCount;A<E;A++){let M=A*2,C=c.vertices[M+0],T=c.vertices[M+1];C<d&&(d=C),C>f&&(f=C),T<p&&(p=T),T>m&&(m=T)}this._minX=d,this._minY=p,this._width=f-d,this._height=m-p,this._buffer=new p1e(this._computeBufferEstimatedSize(c));let g=[],v=[];for(let A=c.elementCount-1;A>=0;A--){let E=A>=u,M=A*2,C=c.elements[M+0],T=c.elements[M+1],D=C+T,L={start:C,count:T,normals:[],continuous:[],concave:[]},I=C,R=D-1,H=C+1,Z=this._shape.roundedCurves.length;do{let U=I-C,j=c.vertices[R*2+0],z=c.vertices[R*2+1],Y=c.vertices[I*2+0],J=c.vertices[I*2+1],K=c.vertices[H*2+0],X=c.vertices[H*2+1],te=Y-j,re=J-z,se=Math.sqrt(te*te+re*re);te/=se,re/=se;let ce=Y-K,ge=J-X,oe=Math.sqrt(ce*ce+ge*ge);ce/=oe,ge/=oe,L.normals[U*2+0]=-ge,L.normals[U*2+1]=ce,L.concave[U]=te*ge-re*ce>0;let ae=c.vertexIndices[I];if(Array.isArray(ae))L.continuous[U]=!1;else{let[ye,we]=this._shape.getCurveIndexFromVertexId(ae-1,!0);if(we>0&&we<1)L.continuous[U]=!0;else{let Se=we===1?ye+1:ye-1;Se=(Se+Z)%Z;let Pe=we===1?0:1,Te=this._shape.roundedCurves[ye].getTangent(we),Ie=this._shape.roundedCurves[Se].getTangent(Pe);L.continuous[U]=Te.dot(Ie)>.95}}E&&(L.normals[U*2+0]*=-1,L.normals[U*2+1]*=-1),[R,I,H]=[I,H,H+1],H>=D&&(H-=T)}while(H!==C+1);let ee=[];ee.push({bevelI:0,angle:0,size:0,boundary:{vertices:c.vertices.slice(C*2,D*2),vertexCount:T,vertexIndices:new Array(T).fill(!0).map((U,j)=>[j,j]),elements:[0,T],elementCount:1,mesh:null},reverseMap:[],insetPoints:c.vertices.slice(C*2,D*2)});for(let U=1;U<=this._bevelSegments;U++){let j=U/this._bevelSegments*Math.PI/2,z=(1-Math.cos(j))*this._bevelSize,Y=[],J=[],K=0;for(let te=0;te<T;te++){let re=te*2,se=(te-1+T)%T*2,ce=c.vertices[L.start*2+re+0],ge=c.vertices[L.start*2+re+1],oe=-L.normals[se+0]*z,ae=-L.normals[se+1]*z,ye=-L.normals[re+0]*z,we=-L.normals[re+1]*z;if(L.concave[te]||!L.concave[te]&&E){let Se=Math.atan2(ae,oe),Pe=Math.atan2(we,ye);Pe>Se&&(Pe-=Math.PI*2);let Te=Pe-Se;if(L.continuous[te]||E){let Ie=Se+Te/2,xe=Math.cos(Ie)*z,Re=Math.sin(Ie)*z;Y[2*K+0]=ce+xe*(E?-1:1),Y[2*K+1]=ge+Re*(E?-1:1),J[K]=te,K++}else{let Ie=Math.max(1,Math.floor(r/4*Math.abs(Te)/Math.PI));for(let xe=0;xe<=Ie;xe++){let Re=Se+Te*(xe/Ie),N=Math.cos(Re)*z,B=Math.sin(Re)*z;Y[2*K+0]=ce+N,Y[2*K+1]=ge+B,J[K]=te,K++}}}else Y[2*K+0]=ce+oe,Y[2*K+1]=ge+ae,J[K]=te,K++,Y[2*K+0]=ce,Y[2*K+1]=ge,J[K]=te,K++,Y[2*K+0]=ce+ye,Y[2*K+1]=ge+we,J[K]=te,K++}let X=am({windingRule:di.POSITIVE,elementType:os.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[Y],edgeCreateCallback:te=>{let re=te.Org.idx,se=J[re],ce=J[(re+1)%J.length];te.idx=[se,ce],te.Sym.idx=[ce,se]},vertexIdCallback:te=>{let re=te.Lprev.idx;return[re?re[1]:0,te.idx?te.idx[0]:0]}});if(!X)throw console.log("Error"),new Error(`error generating bevel geometry for ${U}'th loop`);if(!X.vertexCount)break;for(let te=0;te<X.vertexIndices.length;te++){let[re,se]=X.vertexIndices[te];if(re===se)continue;let ce=se;se<re&&(ce+=T);for(let ge=re;ge<ce;ge++){let oe=ge%T,ae=(ge+1)%T;if(!L.continuous[oe]||!L.continuous[ae]){X.vertexIndices[te]=[re,oe],X.vertexIndices.splice(te+1,0,[ae,se]),X.vertices.splice((te+1)*2,0,X.vertices[te*2],X.vertices[te*2+1]);break}}}ee.push({bevelI:U,angle:j,size:z,boundary:X,reverseMap:J,insetPoints:Y})}let F=(U,j,z)=>{let Y=0,J=U.boundary.vertexIndices.length;for(;Y<J&&z(U.boundary.vertexIndices[j]);)j=(j+1)%J,Y++;return Y},V=g.length;for(let U=1;U<ee.length;U++){let j=ee[U-1],z=ee[U],Y=j.boundary.vertexIndices.length,J=z.boundary.vertexIndices.length;if(!Y||!J)break;let K=L.concave.length,X=0,te=D4(X,T);for(;!j.boundary.vertexIndices.filter(te).length||!z.boundary.vertexIndices.filter(te).length;)X++,te=D4(X,T);let re=j.boundary.vertexIndices.findIndex(te),se=z.boundary.vertexIndices.findIndex(te);do re=(re+1)%Y;while(te(j.boundary.vertexIndices[re]));do se=(se+1)%J;while(te(z.boundary.vertexIndices[se]));X=(X+1)%T;let ce=X,ge=this._buildBevelVert(L,j,(re-1+Y)%Y),oe=this._buildBevelVert(L,z,(se-1+J)%J),ae=ge,ye=oe,we,Se,Pe=!1;do{te=D4(X,T);let Te=F(j,re,te),Ie=F(z,se,te),xe=Pe;if(Pe=!1,Te&&!Ie){for(let Re=0;Re<Te;Re++)we=this._buildBevelVert(L,j,(re+Re)%Y,Re/(Te-1)),g.push(ae.topN,we.topP,ye.topN),g.push(we.bottomP,ae.bottomN,ye.bottomN),ae=we;Pe=!0}else if(!Te&&Ie)for(let Re=0;Re<Ie;Re++)Se=this._buildBevelVert(L,z,(se+Re)%J,Re/(Ie-1)),g.push(ye.topN,ae.topP,Se.topP),g.push(ae.bottomP,ye.bottomN,Se.bottomP),ye=Se;else if(Te&&Ie)if(we=this._buildBevelVert(L,j,re,0),Se=this._buildBevelVert(L,z,se,0),xe?(g.push(ae.topN,Se.topP,ye.topN),g.push(ae.topN,we.topP,Se.topP),g.push(Se.bottomP,ae.bottomN,ye.bottomN),g.push(Se.bottomP,we.bottomP,ae.bottomN)):(g.push(ye.topN,ae.topN,we.topP),g.push(ye.topN,we.topP,Se.topP),g.push(we.bottomP,ae.bottomN,ye.bottomN),g.push(we.bottomP,ye.bottomN,Se.bottomP)),ae=we,ye=Se,Te===Ie)for(let Re=1;Re<Te;Re++)we=this._buildBevelVert(L,j,(re+Re)%Y,Re/(Te-1)),Se=this._buildBevelVert(L,z,(se+Re)%J,Re/(Ie-1)),g.push(ae.topN,we.topP,ye.topN),g.push(ye.topN,we.topP,Se.topP),g.push(we.bottomP,ae.bottomN,ye.bottomN),g.push(we.bottomP,ye.bottomN,Se.bottomP),ae=we,ye=Se;else if(Te>Ie){let Re=Te/Ie,N=0;for(let B=1;B<Te;B++)we=this._buildBevelVert(L,j,(re+B)%Y,B/(Te-1)),g.push(ae.topN,we.topP,ye.topN),g.push(we.bottomP,ae.bottomN,ye.bottomN),ae=we,B>(N+1)*Re&&(N++,Se=this._buildBevelVert(L,z,(se+N)%J,N/(Ie-1)),g.push(ye.topN,we.topP,Se.topP),g.push(we.bottomP,ye.bottomN,Se.bottomP),ye=Se)}else{let Re=Ie/Te,N=0;for(let B=1;B<Ie;B++)Se=this._buildBevelVert(L,z,(se+B)%J,B/(Ie-1)),g.push(ye.topN,we.topP,Se.topP),g.push(we.bottomP,ye.bottomN,Se.bottomP),ye=Se,B>(N+1)*Re&&(N++,we=this._buildBevelVert(L,j,(re+N)%Y,N/(Te-1)),g.push(ae.topN,we.topP,ye.topN),g.push(we.bottomP,ae.bottomN,ye.bottomN),ae=we)}re=(re+Te)%Y,se=(se+Ie)%J,X=(X+1)%K}while(X!==ce)}if(this._buildWall(ee,L,g),E){let U=[];for(let j=g.length-1;j>=V+2;j-=3){let z=g[j-2],Y=g[j-1],J=g[j-0];U.push(J,Y,z)}g.splice(V,g.length-V,...U)}if(E){let U=[];for(let j=ee[ee.length-1].boundary.vertices.length-1;j>=1;j-=2){let z=ee[ee.length-1].boundary.vertices[j-1],Y=ee[ee.length-1].boundary.vertices[j-0];U.push(z,Y)}v.push(U)}if(!E){let U=ee[ee.length-1],j;try{j=am({windingRule:ee.length>1?di.POSITIVE:di.ODD,elementType:os.POLYGONS,vertexSize:2,strict:!0,contours:[U.insetPoints,...v]})}catch{j=g1e}if(!j)throw new Error("Error generating geometry for surface");l.length===0&&Object.assign(this,{capStartIndex:g.length});for(let z=0;z<j.elementCount*3;z+=3){let Y=this._buildSurfaceVert(j,j.elements[z+0]),J=this._buildSurfaceVert(j,j.elements[z+1]),K=this._buildSurfaceVert(j,j.elements[z+2]);g.push(Y.top,J.top,K.top),g.push(K.bottom,J.bottom,Y.bottom)}}this.vertexCache={}}this._buffer.shrink();let y=new Nt(Uint32Array.from(g),1),x=new Nt(this._buffer.positions,3),b=new Nt(this._buffer.normals,3),S=new Nt(this._buffer.uvs,2);x.needsUpdate=!0,b.needsUpdate=!0,S.needsUpdate=!0,y.needsUpdate=!0,this.setAttribute("position",x),this.setAttribute("normal",b),this.setAttribute("uv",S),this.setIndex(y)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,n,i){let r=e[0];for(let s=0,o=r.boundary.vertexCount;s<o;s++){let a=this._buildBevelVert(n,r,s),l=this._buildBevelVert(n,r,(s+1)%o);i.push(l.topP,a.topN,a.bottomN),i.push(l.topP,a.bottomN,l.bottomP)}}_buildSurfaceVert(e,n){let i=n.toString();if(i in this.vertexCache)return this.vertexCache[i];let r=e.vertices[n*2+0],s=e.vertices[n*2+1],o=(r-this._minX)/this._width,a=(s-this._minY)/this._height,l=this._buffer.get(2),c=l*3,h=l*2,u={top:l+0,bottom:l+1};return this._buffer.positions[c+0]=r,this._buffer.positions[c+1]=s,this._buffer.positions[c+2]=this._depth,this._buffer.normals[c+0]=0,this._buffer.normals[c+1]=0,this._buffer.normals[c+2]=1,this._buffer.uvs[h+0]=o,this._buffer.uvs[h+1]=a,this._buffer.positions[c+3]=r,this._buffer.positions[c+4]=s,this._buffer.positions[c+5]=0,this._buffer.normals[c+3]=0,this._buffer.normals[c+4]=0,this._buffer.normals[c+5]=-1,this._buffer.uvs[h+2]=o,this._buffer.uvs[h+3]=a,this.vertexCache[i]=u,u}_buildBevelVert(e,n,i,r=1){let s=`${n.bevelI}:${i}`;if(s in this.vertexCache)return this.vertexCache[s];let[o,a]=n.boundary.vertexIndices[i],l,c,h,u;o!==a?(c=o,l=a,u=!1,h=e.continuous[c]&&e.continuous[l]):(l=o,c=(l-1+e.count)%e.count,u=e.concave[l]&&n.bevelI>0,h=e.continuous[l]||u);let d=Math.cos(n.angle),f=Math.sin(n.angle),p=i*2,m=l*2,g=c*2,v=n.boundary.vertices[p+0],y=n.boundary.vertices[p+1],x=(1-f)*this._bevelSize,b=(v-this._minX)/this._width,S=(y-this._minY)/this._height,A=e.normals[m+0],E=e.normals[m+1],M=e.normals[g+0],C=e.normals[g+1];if(u){let R=M-A,H=C-E;A=A+R*(1-r),E=E+H*(1-r);let Z=Math.sqrt(A*A+E*E);A/=Z,E/=Z}let T=this._buffer.get(h?2:4),D=T*3,L=T*2,I={i,fi:l,topP:T+0,topN:T+0,bottomP:T+1,bottomN:T+1};return this._buffer.positions[D+0]=v,this._buffer.positions[D+1]=y,this._buffer.positions[D+2]=this._depth-x,this._buffer.normals[D+0]=A*d,this._buffer.normals[D+1]=E*d,this._buffer.normals[D+2]=f,this._buffer.uvs[L+0]=b,this._buffer.uvs[L+1]=S,this._buffer.positions[D+3]=v,this._buffer.positions[D+4]=y,this._buffer.positions[D+5]=x,this._buffer.normals[D+3]=A*d,this._buffer.normals[D+4]=E*d,this._buffer.normals[D+5]=-f,this._buffer.uvs[L+2]=S,this._buffer.uvs[L+3]=b,h||(T+=2,D+=6,L+=4,I.topP=T+0,I.bottomP=T+1,this._buffer.positions[D+0]=v,this._buffer.positions[D+1]=y,this._buffer.positions[D+2]=this._depth-x,this._buffer.normals[D+0]=M*d,this._buffer.normals[D+1]=C*d,this._buffer.normals[D+2]=f,this._buffer.uvs[L+0]=b,this._buffer.uvs[L+1]=S,this._buffer.positions[D+3]=v,this._buffer.positions[D+4]=y,this._buffer.positions[D+5]=x,this._buffer.normals[D+3]=M*d,this._buffer.normals[D+4]=C*d,this._buffer.normals[D+5]=-f,this._buffer.uvs[L+2]=S,this._buffer.uvs[L+3]=b),this.vertexCache[s]=I,I}clone(){let e=new v1e(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=vB(this.userData),e}},y1e=class extends yt{constructor(e,n=12,i={}){super(),this.type="ShapeGeometry",this.windingRule=di.ODD,this.elementType=os.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=n,this._triangulationOptions=Object.assign({windingRule:di.ODD,elementType:os.POLYGONS,polySize:3,vertexSize:2,strict:!0},i);let r=this._shape.extractShapePointsToFlatArray([],this._curveSegments),s=this._shape.shapeHoles.map(f=>f.extractShapePointsToFlatArray([],this._curveSegments)),o,a=!0,l=!0,c,h;for(let f=0,p=r.length/2;f<p;f++){let m=f*2,g=r[m+0],v=r[m+1];if(c!==void 0&&g!==c&&(a=!1),h!==void 0&&v!==h&&(l=!1),c=g,h=v,!a&&!l)break}if(!a&&!l)try{o=am({contours:[r,...s],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{o=t$}let u=(o==null?void 0:o.vertexCount)??1,d=(o==null?void 0:o.elementCount)??1;if(this._positionAttribute=new Nt(new Float32Array(u*3),3),this._normalAttribute=new Nt(new Float32Array(u*3),3),this._uvAttribute=new Nt(new Float32Array(u*2),2),this._indexAttribute=new Nt(new Uint32Array(d*3),1),o){let f=1/0,p=-1/0,m=1/0,g=-1/0;for(let x=0,b=u;x<b;x++){let S=x*2,A=o.vertices[S+0],E=o.vertices[S+1];A<f&&(f=A),A>p&&(p=A),E<m&&(m=E),E>g&&(g=E)}let v=p-f,y=g-m;for(let x=0,b=u;x<b;x++){let S=x*2,A=o.vertices[S+0],E=o.vertices[S+1],M=(A-f)/v,C=(E-m)/y;this._positionAttribute.setXYZ(x,A,E,0),this._normalAttribute.setXYZ(x,0,0,1),this._uvAttribute.setXY(x,M,C)}for(let x=0,b=d;x<b;x++){let S=x*3,A=o.elements[S+0],E=o.elements[S+1],M=o.elements[S+2];this._indexAttribute.setX(S+0,A),this._indexAttribute.setX(S+1,E),this._indexAttribute.setX(S+2,M)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((o==null?void 0:o.elementCount)??1)*3)}clone(){let e=new y1e(this._shape,this._curveSegments);return e.userData=vB(this.userData),e}},x1e=class extends v1e{constructor(e,n,i=0,r=12,s=3,o=di.ODD){super(e,n,i,r,s,o),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,n,i){let r=e[0];for(let s=0,o=r.boundary.vertexCount;s<o;s++){let a=this._buildBevelVert(n,r,s),l=this._buildBevelVert(n,r,(s+1)%o);i.push(l.topP,a.topN,a.bottomN),i.push(l.topP,a.bottomN,l.bottomP)}}clone(){let e=new x1e(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=vB(this.userData),e}},ny=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){var h,u;let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:di.ODD},e.parameters),r=Math.abs(i.width),s=Math.abs(i.height??i.width),o=Math.abs(i.depth??0),a=e.shape??(n==null?void 0:n.shape),l=(a==null?void 0:a.roundness)??i.roundness;a!==void 0&&(a instanceof Tr?(a.width!==r||a.height!==s)&&a.applySize(r,s):a=new Tr(r,s).fromJSON(a),((h=e.parameters)==null?void 0:h.roundness)!==void 0&&((u=e.parameters)==null?void 0:u.roundness)>0&&a.update());let c=a??new Tr(r,s);return{parameters:Object.assign(i,{width:r,height:s,depth:o,roundness:l}),shape:c}}static build(e){let{depth:n,extrudeBevelSize:i,extrudeBevelSegments:r,subdivisions:s,roundness:o,windingRule:a}=e.parameters;e.shape.roundness=o;let l;return n<=0?l=new y1e(e.shape,s,{windingRule:a}):l=new x1e(e.shape,n,i,s,r,a),Object.assign(l,{userData:{...e,type:"VectorGeometry"}})}},b1e=Math.PI*2,n$=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Tr?e.shape:new Tr,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:n,height:i,spikes:r,angle:s,innerRadius:o,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,h=e.shape,u=n*.5,d=i*.5,f=Hpt(h,u,d,s*Math.PI/180,r,o);h.isClosed=!0,h.update();let p=ny.create({shape:h,parameters:{subdivisions:f,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(p,{userData:{...e,type:"EllipseGeometry"}})}};function Hpt(t,e,n,i,r,s){if(i>=b1e)return r>30||r%4===0?(Vpt(t,e,n,s),Math.round(r/4)):zie(t,i,r,e,n,s);i=Math.max(i,.001);let o={x:0,y:n},a=i+Math.PI*.5,l={x:Math.cos(a)*e,y:Math.sin(a)*n},c=Fpt({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:e,ry:n,largeArcFlag:i>Math.PI,sweepFlag:!0});return r>30||r%c.length===0?jpt(t,o.x,o.y,c,r,e,n,s):zie(t,i,r,e,n,s)}function jpt(t,e,n,i,r,s,o,a){let l=Math.round(r/i.length);t.addPoint(sb(e,n));for(let c=0,h=i.length;c<h;c++){let u=i[c],d=t.points[c],f=sb(u.x,u.y);d.controls[1].position.set(u.x1,u.y1),f.controls[0].position.set(u.x2,u.y2),t.addPoint(f)}return a>0?w1e(t,s,o,a):t.addPoint(sb(0,0)),l}function zie(t,e,n,i,r,s){let o=-e/n;for(let a=0;a<=n;a++){let l=o*a,c=Math.sin(l)*i,h=Math.cos(l)*r;t.addPoint(sb(c,h))}return e<b1e?s>0?w1e(t,i,r,s):t.addPoint(sb(0,0)):(t.removePoint(t.points[t.points.length-1]),s>0&&_1e(t,i,r,s)),1}function Vpt(t,e,n,i=0,r=0,s=0){let o=.5522847498,a=e*o,l=n*o;t.addPoint(kP(r-e,s,r-e,s-l,r-e,s+l)),t.addPoint(kP(r,s+n,r-a,s+n,r+a,s+n)),t.addPoint(kP(r+e,s,r+e,s+l,r+e,s-l)),t.addPoint(kP(r,s-n,r+a,s-n,r-a,s-n)),i>0&&_1e(t,e,n,i)}function sb(t,e){return new rb(zi.generateUUID(),new Me(t,e))}function kP(t,e,n,i,r,s){let o=sb(t,e);return o.controls[0].position.set(n,i),o.controls[1].position.set(r,s),o}function w1e(t,e,n,i){S1e(t,e,n,i).forEach(r=>t.addPoint(r))}function _1e(t,e,n,i){let r=S1e(t,e,n,i),s=new Tr;r.forEach(o=>s.addPoint(o)),s.isClosed=!0,t.shapeHoles.push(s)}function S1e(t,e,n,i){let r=i*e/100,s=r*(Math.abs(n)/Math.abs(e)),o=new Me(r/e,s/n),a=t.points.map(l=>{let c=l.clone();return c.uuid=zi.generateUUID(),c}).reverse();return a.forEach(l=>{l.position.multiply(o);let c=l.controls[0].position.clone().multiply(o),h=l.controls[1].position.clone().multiply(o);l.controls[0].position.copy(h),l.controls[1].position.copy(c)}),a}var Wpt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),r=Math.abs(i.width),s=Math.abs(i.height??r),o=Math.abs(i.depth??r),a=Math.abs(Math.min(r,o))/2;return{parameters:Object.assign(i,{width:r,height:s,depth:o,radius:a,segments:Math.round(i.segments),pathSegments:Math.round(i.pathSegments),cornerSegments:Math.round(i.cornerSegments)})}}static build(e){let{width:n,height:i,depth:r,radius:s,revolutions:o,segments:a,pathRadius:l,pathType:c,pathSegments:h,cornerRadius:u,cornerSegments:d}=e.parameters,f=new i$(!1,n,i,r,s,o,a,l,c,h,u,d);return Object.assign(f,{userData:{...e,type:"HelixGeometry"}})}},i$=class extends yt{constructor(e=!0,n=1,i=1,r=1,s=1,o=1,a=1,l=1,c=1,h=1,u=1,d=1,f=!1){super();let p=e&&o===1;p&&(d=0),u>100&&(u=100);let m=()=>new q,g=new q,v=m(),y=m(),x=m(),b,S,A,E,M,C,T,D,L=m(),I=m(),R=m(),H=m(),Z=m(),ee=m(),F=m(),V=m(),U=i-2*l+.001,j=U/o,z=Math.ceil(a*o),Y=z+1,J=U/z,K=-U/2,X=h+1,te=2*Math.PI/h,re=Math.PI/2/d,se=.01,ce=Math.min((1-u/100)*l,l-se),ge=l-ce,oe=0,ae=2,ye=d*ae+ae,we=X*ye/ae,Se=we+X*Y,Pe=X*(Y+ye),[Te,Ie,xe]=[3,3,2].map(Ge=>Array(Pe*Ge).fill(0)),Re=[],N=s-l;function B(Ge,We){let Je=Math.PI/2;C=We*J,D=2*Math.PI*(C%j)/j+Je,C+=K,T=Math.sin(D)*N,M=Math.cos(D)*N,e?Ge.set(M,T,C):Ge.set(M,C,T)}B(g,-1e-10),B(v,0),L.copy(g),B(g,1);let le=g.distanceTo(v),_e=p?0:ge+ce,Ee=le*z+2*_e,Fe=ce,Ze=Ee-_e;for(let Ge=0;Ge<=z;Ge++){B(y,Ge),V.subVectors(y,L).normalize(),L.copy(y),ee.copy(y).setComponent(+e+1,0).normalize(),F.crossVectors(V,ee).normalize();let We=Ge===0,Je=Ge===z,Qe=We?3*Math.PI/2:re,xt=We?Fe:Ze,Vt=We?X:Se,gn=We?0:Pe-X,ie=V.clone().multiplyScalar(We?-ge:ge).add(y),ve=V.clone().multiplyScalar(We?-1:1).normalize();for(let Ce=0;Ce<X;Ce++){let Ne=Ce*te;if(I.addVectors(g.copy(ee).multiplyScalar(l*Math.cos(Ne)),v.copy(F).multiplyScalar(l*Math.sin(Ne))),R.copy(I).normalize(),We||Je){p||(oe=gn+Ce,[0,1,2].forEach($e=>{Te[oe*3+$e]=ie.getComponent($e),Ie[oe*3+$e]=ve.getComponent($e)}),xe[oe*2]=+Je,xe[oe*2+1]=Ce/h),v.copy(R).multiplyScalar(ce),x.addVectors(y,v);for(let $e=0;$e<d;$e++){let Ct=$e*re+Qe;H.addVectors(g.copy(V).multiplyScalar(ge*Math.sin(Ct)),v.copy(R).multiplyScalar(ge*Math.cos(Ct))),Z.copy(H).normalize(),v.addVectors(x,H),H.normalize(),oe=Vt+$e*X+Ce,[0,1,2].forEach(Cn=>{Te[oe*3+Cn]=v.getComponent(Cn),Ie[oe*3+Cn]=Z.getComponent(Cn)});let rn=+We+Math.sin(Ct);xe[oe*2]=(xt+ge*rn)/Ee,xe[oe*2+1]=Ce/h}}v.addVectors(y,I),oe=we+Ge*X+Ce,[0,1,2].forEach($e=>{Te[oe*3+$e]=v.getComponent($e),Ie[oe*3+$e]=R.getComponent($e)}),xe[oe*2]=(_e+Ge*le)/Ee,xe[oe*2+1]=Ce/h}}let Ue=Y+2*d+ae,[be,Xe]=[+p,Ue-1];f&&(Xe-=1);for(let Ge=be;Ge<=Xe-1;Ge++){let We=p&&Ge===Xe-1;for(let Je=0;Je<X-1;Je++)b=Ge*X+Je,S=b+1,A=(We?Je:b)+X,E=(We?Je+1:S)+X,Ge===0?Re.push(S,E,A):Ge===Ue-2?Re.push(b,S,A):Re.push(b,S,A,S,E,A)}this.setIndex(Re),this.setAttribute("position",new it(Te,3)),this.setAttribute("normal",new it(Ie,3)),this.setAttribute("uv",new it(xe,2))}},$pt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:n,height:i,depth:r,detail:s,corner:o,cornerSides:a}=e.parameters,l=s===0&&o!==0?new A1e(n*.5,o,a):new Wv(n*.5,s);return l.scale(1,i/n,r/n),Object.assign(l,{userData:{...e,type:"IcosahedronGeometry"}})}},A1e=class extends ZW{constructor(e=1,n=.2,i=4){let r=(1+Math.sqrt(5))/2,s=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a="IcosahedronGeometry";super(s,o,a,e,n,i),this.type=a}static fromJSON(e){return new A1e(e.radius,e.corner,e.cornerSides)}},qpt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){var r;(((r=e.parameters)==null?void 0:r.points)??[]).forEach(s=>{Array.isArray(s)&&(s.x=s[0],s.y=s[1])});let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{points:n,segments:i,verticalSegments:r}=e.parameters,s=new Pu;s.moveTo(n[0].x,n[0].y),s.bezierCurveTo(n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y);let o=new Vv(s.extractPoints(r).shape,i);return o.rotateZ(Math.PI),Object.assign(o,{userData:{...e,type:"LatheGeometry"}})}},lh=new at,O4=new wn,FP=new q,_L=class extends dd{constructor(){super(),this.uuid=zi.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let n=new Wr().getNormalMatrix(e);for(let i=0,r=this.vertices.length;i<r;i++)this.vertices[i].applyMatrix4(e);for(let i=0,r=this.faces.length;i<r;i++){let s=this.faces[i];s.normal.applyMatrix3(n).normalize();for(let o=0,a=s.vertexNormals.length;o<a;o++)s.vertexNormals[o].applyMatrix3(n).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return lh.makeRotationX(e),this.applyMatrix4(lh),this}rotateY(e){return lh.makeRotationY(e),this.applyMatrix4(lh),this}rotateZ(e){return lh.makeRotationZ(e),this.applyMatrix4(lh),this}translate(e,n,i){return lh.makeTranslation(e,n,i),this.applyMatrix4(lh),this}scale(e,n,i){return lh.makeScale(e,n,i),this.applyMatrix4(lh),this}lookAt(e){return O4.lookAt(e),O4.updateMatrix(),this.applyMatrix4(O4.matrix),this}fromBufferGeometry(e){let n=this,i=e.index!==null?e.index:void 0,r=e.attributes;if(r.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let s=r.position,o=r.normal,a=r.color,l=r.uv,c=r.uv2;c!==void 0&&(this.faceVertexUvs[1]=[]);for(let d=0;d<s.count;d++)n.vertices.push(new q().fromBufferAttribute(s,d)),a!==void 0&&n.colors.push(new nt().fromBufferAttribute(a,d));function h(d,f,p,m){let g=a===void 0?[]:[n.colors[d].clone(),n.colors[f].clone(),n.colors[p].clone()],v=o===void 0?[]:[new q().fromBufferAttribute(o,d),new q().fromBufferAttribute(o,f),new q().fromBufferAttribute(o,p)],y=new SH(d,f,p,v,g,m);n.faces.push(y),l!==void 0&&n.faceVertexUvs[0].push([new Me().fromBufferAttribute(l,d),new Me().fromBufferAttribute(l,f),new Me().fromBufferAttribute(l,p)]),c!==void 0&&n.faceVertexUvs[1].push([new Me().fromBufferAttribute(c,d),new Me().fromBufferAttribute(c,f),new Me().fromBufferAttribute(c,p)])}let u=e.groups;if(u.length>0)for(let d=0;d<u.length;d++){let f=u[d],p=f.start,m=f.count;for(let g=p,v=p+m;g<v;g+=3)i!==void 0?h(i.getX(g),i.getX(g+1),i.getX(g+2),f.materialIndex):h(g,g+1,g+2,f.materialIndex)}else if(i!==void 0)for(let d=0;d<i.count;d+=3)h(i.getX(d),i.getX(d+1),i.getX(d+2));else for(let d=0;d<s.count;d+=3)h(d,d+1,d+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(FP).negate(),this.translate(FP.x,FP.y,FP.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,n=this.boundingSphere.radius,i=n===0?1:1/n,r=new at;return r.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix4(r),this}computeFaceNormals(){let e=new q,n=new q;for(let i=0,r=this.faces.length;i<r;i++){let s=this.faces[i],o=this.vertices[s.a],a=this.vertices[s.b],l=this.vertices[s.c];e.subVectors(l,a),n.subVectors(o,a),e.cross(n),e.normalize(),s.normal.copy(e)}}computeVertexNormals(e=!0){let n=new Array(this.vertices.length);for(let i=0,r=this.vertices.length;i<r;i++)n[i]=new q;if(e){let i=new q,r=new q;for(let s=0,o=this.faces.length;s<o;s++){let a=this.faces[s],l=this.vertices[a.a],c=this.vertices[a.b],h=this.vertices[a.c];i.subVectors(h,c),r.subVectors(l,c),i.cross(r),n[a.a].add(i),n[a.b].add(i),n[a.c].add(i)}}else{this.computeFaceNormals();for(let i=0,r=this.faces.length;i<r;i++){let s=this.faces[i];n[s.a].add(s.normal),n[s.b].add(s.normal),n[s.c].add(s.normal)}}for(let i=0,r=this.vertices.length;i<r;i++)n[i].normalize();for(let i=0,r=this.faces.length;i<r;i++){let s=this.faces[i],o=s.vertexNormals;o.length===3?(o[0].copy(n[s.a]),o[1].copy(n[s.b]),o[2].copy(n[s.c])):(o[0]=n[s.a].clone(),o[1]=n[s.b].clone(),o[2]=n[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,n=this.faces.length;e<n;e++){let i=this.faces[e],r=i.vertexNormals;r.length===3?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);for(let s=0,o=r.vertexNormals.length;s<o;s++)r.__originalVertexNormals[s]?r.__originalVertexNormals[s].copy(r.vertexNormals[s]):r.__originalVertexNormals[s]=r.vertexNormals[s].clone()}let e=new _L;e.faces=this.faces;for(let n=0,i=this.morphTargets.length;n<i;n++){if(!this.morphNormals[n]){this.morphNormals[n]={},this.morphNormals[n].faceNormals=[],this.morphNormals[n].vertexNormals=[];let s=this.morphNormals[n].faceNormals,o=this.morphNormals[n].vertexNormals;for(let a=0,l=this.faces.length;a<l;a++){let c=new q,h={a:new q,b:new q,c:new q};s.push(c),o.push(h)}}let r=this.morphNormals[n];e.vertices=this.morphTargets[n].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let s=0,o=this.faces.length;s<o;s++){let a=this.faces[s],l=r.faceNormals[s],c=r.vertexNormals[s];l.copy(a.normal),c.a.copy(a.vertexNormals[0]),c.b.copy(a.vertexNormals[1]),c.c.copy(a.vertexNormals[2])}}for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n];r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ao),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Oo),this.boundingSphere.setFromPoints(this.vertices)}merge(e,n,i=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let r,s=this.vertices.length,o=this.vertices,a=e.vertices,l=this.faces,c=e.faces,h=this.colors,u=e.colors;n!==void 0&&(r=new Wr().getNormalMatrix(n));for(let d=0,f=a.length;d<f;d++){let p=a[d].clone();n!==void 0&&p.applyMatrix4(n),o.push(p)}for(let d=0,f=u.length;d<f;d++)h.push(u[d].clone());for(let d=0,f=c.length;d<f;d++){let p=c[d],m,g,v=p.vertexNormals,y=p.vertexColors,x=new SH(p.a+s,p.b+s,p.c+s);x.normal.copy(p.normal),r!==void 0&&x.normal.applyMatrix3(r).normalize();for(let b=0,S=v.length;b<S;b++)m=v[b].clone(),r!==void 0&&m.applyMatrix3(r).normalize(),x.vertexNormals.push(m);x.color.copy(p.color);for(let b=0,S=y.length;b<S;b++)g=y[b],x.vertexColors.push(g.clone());x.materialIndex=p.materialIndex+i,l.push(x)}for(let d=0,f=e.faceVertexUvs.length;d<f;d++){let p=e.faceVertexUvs[d];this.faceVertexUvs[d]===void 0&&(this.faceVertexUvs[d]=[]);for(let m=0,g=p.length;m<g;m++){let v=p[m],y=[];for(let x=0,b=v.length;x<b;x++)y.push(v[x].clone());this.faceVertexUvs[d].push(y)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let n={},i=[],r=[],s=Math.pow(10,e);for(let l=0,c=this.vertices.length;l<c;l++){let h=this.vertices[l],u=Math.round(h.x*s)+"_"+Math.round(h.y*s)+"_"+Math.round(h.z*s);n[u]===void 0?(n[u]=l,i.push(this.vertices[l]),r[l]=i.length-1):r[l]=r[n[u]]}let o=[];for(let l=0,c=this.faces.length;l<c;l++){let h=this.faces[l];h.a=r[h.a],h.b=r[h.b],h.c=r[h.c];let u=[h.a,h.b,h.c];for(let d=0;d<3;d++)if(u[d]===u[(d+1)%3]){o.push(l);break}}for(let l=o.length-1;l>=0;l--){let c=o[l];this.faces.splice(c,1);for(let h=0,u=this.faceVertexUvs.length;h<u;h++)this.faceVertexUvs[h].splice(c,1)}let a=this.vertices.length-i.length;return this.vertices=i,a}setFromPoints(e){this.vertices=[];for(let n=0,i=e.length;n<i;n++){let r=e[n];this.vertices.push(new q(r.x,r.y,r.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,n=e.length;for(let l=0;l<n;l++)e[l]._id=l;function i(l,c){return l.materialIndex-c.materialIndex}e.sort(i);let r=this.faceVertexUvs[0],s=this.faceVertexUvs[1],o,a;r&&r.length===n&&(o=[]),s&&s.length===n&&(a=[]);for(let l=0;l<n;l++){let c=e[l]._id;o&&o.push(r[c]),a&&a.push(s[c])}o&&(this.faceVertexUvs[0]=o),a&&(this.faceVertexUvs[1]=a)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let p=this.parameters;for(let m in p)p[m]!==void 0&&(e[m]=p[m]);return e}let n=[];for(let p=0;p<this.vertices.length;p++){let m=this.vertices[p];n.push(m.x,m.y,m.z)}let i=[],r=[],s={},o=[],a={},l=[],c={};for(let p=0;p<this.faces.length;p++){let m=this.faces[p],g=!0,v=!1,y=this.faceVertexUvs[0][p]!==void 0,x=m.normal.length()>0,b=m.vertexNormals.length>0,S=m.color.r!==1||m.color.g!==1||m.color.b!==1,A=m.vertexColors.length>0,E=0;if(E=h(E,0,0),E=h(E,1,g),E=h(E,2,v),E=h(E,3,y),E=h(E,4,x),E=h(E,5,b),E=h(E,6,S),E=h(E,7,A),i.push(E),i.push(m.a,m.b,m.c),i.push(m.materialIndex),y){let M=this.faceVertexUvs[0][p];i.push(f(M[0]),f(M[1]),f(M[2]))}if(x&&i.push(u(m.normal)),b){let M=m.vertexNormals;i.push(u(M[0]),u(M[1]),u(M[2]))}if(S&&i.push(d(m.color)),A){let M=m.vertexColors;i.push(d(M[0]),d(M[1]),d(M[2]))}}function h(p,m,g){return g?p|1<<m:p&~(1<<m)}function u(p){let m=p.x.toString()+p.y.toString()+p.z.toString();return s[m]!==void 0||(s[m]=r.length/3,r.push(p.x,p.y,p.z)),s[m]}function d(p){let m=p.r.toString()+p.g.toString()+p.b.toString();return a[m]!==void 0||(a[m]=o.length,o.push(p.getHex())),a[m]}function f(p){let m=p.x.toString()+p.y.toString();return c[m]!==void 0||(c[m]=l.length/2,l.push(p.x,p.y)),c[m]}return e.data={},e.data.vertices=n,e.data.normals=r,o.length>0&&(e.data.colors=o),l.length>0&&(e.data.uvs=[l]),e.data.faces=i,e}clone(){return new _L().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let n=e.vertices;for(let d=0,f=n.length;d<f;d++)this.vertices.push(n[d].clone());let i=e.colors;for(let d=0,f=i.length;d<f;d++)this.colors.push(i[d].clone());let r=e.faces;for(let d=0,f=r.length;d<f;d++)this.faces.push(r[d].clone());for(let d=0,f=e.faceVertexUvs.length;d<f;d++){let p=e.faceVertexUvs[d];this.faceVertexUvs[d]===void 0&&(this.faceVertexUvs[d]=[]);for(let m=0,g=p.length;m<g;m++){let v=p[m],y=[];for(let x=0,b=v.length;x<b;x++){let S=v[x];y.push(S.clone())}this.faceVertexUvs[d].push(y)}}let s=e.morphTargets;for(let d=0,f=s.length;d<f;d++){let p={};if(p.name=s[d].name,s[d].vertices!==void 0){p.vertices=[];for(let m=0,g=s[d].vertices.length;m<g;m++)p.vertices.push(s[d].vertices[m].clone())}if(s[d].normals!==void 0){p.normals=[];for(let m=0,g=s[d].normals.length;m<g;m++)p.normals.push(s[d].normals[m].clone())}this.morphTargets.push(p)}let o=e.morphNormals;for(let d=0,f=o.length;d<f;d++){let p={};if(o[d].vertexNormals!==void 0){p.vertexNormals=[];for(let m=0,g=o[d].vertexNormals.length;m<g;m++){let v=o[d].vertexNormals[m],y={};y.a=v.a.clone(),y.b=v.b.clone(),y.c=v.c.clone(),p.vertexNormals.push(y)}}if(o[d].faceNormals!==void 0){p.faceNormals=[];for(let m=0,g=o[d].faceNormals.length;m<g;m++)p.faceNormals.push(o[d].faceNormals[m].clone())}this.morphNormals.push(p)}let a=e.skinWeights;for(let d=0,f=a.length;d<f;d++)this.skinWeights.push(a[d].clone());let l=e.skinIndices;for(let d=0,f=l.length;d<f;d++)this.skinIndices.push(l[d].clone());let c=e.lineDistances;for(let d=0,f=c.length;d<f;d++)this.lineDistances.push(c[d]);let h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());let u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new Xpt().fromGeometry(this),n=new yt,i=new Float32Array(e.vertices.length*3);if(n.setAttribute("position",NP.call(new Nt(i,3),e.vertices)),e.normals.length>0){let r=new Float32Array(e.normals.length*3);n.setAttribute("normal",NP.call(new Nt(r,3),e.normals))}if(e.colors.length>0){let r=new Float32Array(e.colors.length*3);n.setAttribute("color",Uie.call(new Nt(r,3),e.colors))}if(e.uvs.length>0){let r=new Float32Array(e.uvs.length*2);n.setAttribute("uv",Gie.call(new Nt(r,2),e.uvs))}if(e.uvs2.length>0){let r=new Float32Array(e.uvs2.length*2);n.setAttribute("uv2",Gie.call(new Nt(r,2),e.uvs2))}n.groups=e.groups;for(let r in e.morphTargets){let s=[],o=e.morphTargets[r];for(let a=0,l=o.length;a<l;a++){let c=o[a],h=new it(c.data.length*3,3);h.name=c.name,s.push(NP.call(h,c.data))}n.morphAttributes[r]=s}if(e.skinIndices.length>0){let r=new it(e.skinIndices.length*4,4);n.setAttribute("skinIndex",Hie.call(r,e.skinIndices))}if(e.skinWeights.length>0){let r=new it(e.skinWeights.length*4,4);n.setAttribute("skinWeight",Hie.call(r,e.skinWeights))}return e.boundingSphere!==null&&(n.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(n.boundingBox=e.boundingBox.clone()),n}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let n=new yt,i=e.geometry;if(e.isPoints||e.isLine){let r=new it(i.vertices.length*3,3),s=new it(i.colors.length*3,3);if(n.setAttribute("position",NP.call(r,i.vertices)),n.setAttribute("color",Uie.call(s,i.colors)),i.lineDistances&&i.lineDistances.length===i.vertices.length){let o=new it(i.lineDistances.length,1);n.setAttribute("lineDistance",Ypt.call(o,i.lineDistances))}i.boundingSphere!==null&&(n.boundingSphere=i.boundingSphere.clone()),i.boundingBox!==null&&(n.boundingBox=i.boundingBox.clone())}else e.isMesh&&(n=i.toBufferGeometry());return n}};_L.prototype.isGeometry=!0;var Xpt=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let n=[],i,r,s,o=e.faces;for(r=0;r<o.length;r++){let a=o[r];a.materialIndex!==s&&(s=a.materialIndex,i!==void 0&&(i.count=r*3-i.start,n.push(i)),i={start:r*3,materialIndex:s})}i!==void 0&&(i.count=r*3-i.start,n.push(i)),this.groups=n}fromGeometry(e){let n=e.faces,i=e.vertices,r=e.faceVertexUvs,s=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,a=e.morphTargets,l=a.length,c;if(l>0){c=[];for(let v=0;v<l;v++)c[v]={name:a[v].name,data:[]};this.morphTargets.position=c}let h=e.morphNormals,u=h.length,d;if(u>0){d=[];for(let v=0;v<u;v++)d[v]={name:h[v].name,data:[]};this.morphTargets.normal=d}let f=e.skinIndices,p=e.skinWeights,m=f.length===i.length,g=p.length===i.length;i.length>0&&n.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let v=0;v<n.length;v++){let y=n[v];this.vertices.push(i[y.a],i[y.b],i[y.c]);let x=y.vertexNormals;if(x.length===3)this.normals.push(x[0],x[1],x[2]);else{let S=y.normal;this.normals.push(S,S,S)}let b=y.vertexColors;if(b.length===3)this.colors.push(b[0],b[1],b[2]);else{let S=y.color;this.colors.push(S,S,S)}if(s===!0){let S=r[0][v];S!==void 0?this.uvs.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",v),this.uvs.push(new Me,new Me,new Me))}if(o===!0){let S=r[1][v];S!==void 0?this.uvs2.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",v),this.uvs2.push(new Me,new Me,new Me))}for(let S=0;S<l;S++){let A=a[S].vertices;c[S].data.push(A[y.a],A[y.b],A[y.c])}for(let S=0;S<u;S++){let A=h[S].vertexNormals[v];d[S].data.push(A.a,A.b,A.c)}m&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),g&&this.skinWeights.push(p[y.a],p[y.b],p[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},SH=class{constructor(e,n,i,r,s,o=0){this.a=e,this.b=n,this.c=i,this.normal=r&&r.isVector3?r:new q,this.vertexNormals=Array.isArray(r)?r:[],this.color=s&&s.isColor?s:new nt,this.vertexColors=Array.isArray(s)?s:[],this.materialIndex=o}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let n=0,i=e.vertexNormals.length;n<i;n++)this.vertexNormals[n]=e.vertexNormals[n].clone();for(let n=0,i=e.vertexColors.length;n<i;n++)this.vertexColors[n]=e.vertexColors[n].clone();return this}};function Ypt(t){return this.array.set(t),this}function Uie(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new nt),e[n++]=s.r,e[n++]=s.g,e[n++]=s.b}return this}function Gie(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new Me),e[n++]=s.x,e[n++]=s.y}return this}function NP(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new q),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z}return this}function Hie(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new sn),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z,e[n++]=s.w}return this}var Kpt=["a","b","c"];function Jpt(t,e){switch(e){case"c":return t.c;case"b":return t.b;case"a":default:return t.a}}function L4(t,e,n){let i=Math.min(t,e),r=Math.max(t,e),s=i+"_"+r;return n.get(s)}function R4(t,e,n,i,r,s){let o=Math.min(t,e),a=Math.max(t,e),l=o+"_"+a,c;if(i.has(l))c=i.get(l);else{let h=n[o],u=n[a];c={a:h,b:u,newEdge:null,faces:[]},i.set(l,c)}c.faces.push(r),s[t].edges.push(c),s[e].edges.push(c)}function Zpt(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;r++)n[r]={edges:[]};for(r=0,s=e.length;r<s;r++)o=e[r],R4(o.a,o.b,t,i,o,n),R4(o.b,o.c,t,i,o,n),R4(o.c,o.a,t,i,o,n)}function zP(t,e,n,i,r){t.push(new SH(e,n,i,void 0,void 0,r))}function t1(t,e){return Math.abs(e-t)/2+Math.min(t,e)}function UP(t,e,n,i){t.push([e.clone(),n.clone(),i.clone()])}var Qpt=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof yt?e=new _L().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let n=this.subdivisions;for(;n-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let n=new q,i,r,s,o,a,l=e.vertices,c=e.faces,h=e.faceVertexUvs[0],u=h!==void 0&&h.length>0,d=[],f=new Map;Zpt(l,c,d,f);let p=[],m,g,v,y,x,b,S;for(let re of Array.from(f.keys())){for(g=f.get(re),v=new q,x=3/8,b=1/8,S=g.faces.length,S!=2&&(x=.5,b=0,S!=1),v.addVectors(g.a,g.b).multiplyScalar(x),n.set(0,0,0),o=0;o<S;o++){for(y=g.faces[o],a=0;a<3&&(m=l[Jpt(y,Kpt[a])],!(m!==g.a&&m!==g.b));a++);m&&n.add(m)}n.multiplyScalar(b),v.add(n),g.newEdge=p.length,p.push(v)}let A,E,M,C,T,D,L,I=[];for(r=0,s=l.length;r<s;r++){for(D=l[r],T=d[r].edges,i=T.length,i==3?A=3/16:i>3&&(A=3/(8*i)),E=1-i*Number(A),M=A,i<=2&&(i==2?(E=3/4,M=1/8):i==1||i==0),L=D.clone().multiplyScalar(E),n.set(0,0,0),o=0;o<i;o++)C=T[o],m=C.a!==D?C.a:C.b,n.add(m);n.multiplyScalar(Number(M)),L.add(n),I.push(L)}let R=I.concat(p),H=I.length,Z,ee,F,V=[],U=[],j,z,Y,J,K=new Me,X=new Me,te=new Me;for(r=0,s=c.length;r<s;r++)y=c[r],Z=Number(L4(y.a,y.b,f).newEdge)+H,ee=Number(L4(y.b,y.c,f).newEdge)+H,F=Number(L4(y.c,y.a,f).newEdge)+H,zP(V,Z,ee,F,y.materialIndex),zP(V,y.a,Z,F,y.materialIndex),zP(V,y.b,ee,Z,y.materialIndex),zP(V,y.c,F,ee,y.materialIndex),u&&(j=h[r],z=j[0],Y=j[1],J=j[2],K.set(t1(z.x,Y.x),t1(z.y,Y.y)),X.set(t1(Y.x,J.x),t1(Y.y,J.y)),te.set(t1(z.x,J.x),t1(z.y,J.y)),UP(U,K,X,te),UP(U,z,K,te),UP(U,Y,X,K),UP(U,J,te,X));e.vertices=R,e.faces=V,u&&(e.faceVertexUvs[0]=U)}},ds=new q,emt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=e.geometry??(n==null?void 0:n.geometry)??new yt().copy(new Ia(100,100,100)),r;n===void 0?(i.computeBoundingBox(),i.boundingBox.getSize(ds),r={width:ds.x,height:ds.y,depth:ds.z,subdivisions:0}):r=n.parameters;let s={...r,...e.parameters};return{parameters:{width:Math.abs(s.width),height:Math.abs(s.height),depth:Math.abs(s.depth),subdivisions:Math.abs(s.subdivisions)},geometry:i}}static build(e){let{width:n,height:i,depth:r,subdivisions:s}=e.parameters,o=e.geometry??new yt().copy(new Ia(100,100,100)),a=o.userData.parameters;a===void 0?(o.computeBoundingBox(),o.boundingBox.getSize(ds)):ds.set(a.width,a.height,a.depth),(n!==ds.x||i!==ds.y||r!==ds.z)&&o.scale(ds.x===0?1:n/ds.x,ds.y===0?1:i/ds.y,ds.z===0?1:r/ds.z);let l=o.originalGeometry;return s>0?(l===void 0||(a==null?void 0:a.subdivisions)!==s)&&(l===void 0&&(l=o),o=new Qpt(s).modify(l).toBufferGeometry()):(l!==void 0&&(o=l),l=void 0,o.getAttribute("normal")===void 0&&o.computeVertexNormals()),l!==void 0&&Object.assign(o,{originalGeometry:l}),delete e.geometry,Object.assign(o,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,n,i){new qI(i).load(e,r=>{let s=this.normalizeInputs({geometry:r});r.boundingBox.getSize(ds);let o=100/ds.x;Object.assign(s.parameters,{width:100,height:ds.y*o,depth:ds.z*o}),n(this.build(s))})}},M1e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Tr?e.shape:new Tr,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:n,height:i,spikes:r,cornerRadius:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=e.parameters,c=e.shape,h=n*.5,u=i*.5,d=0,f=0,p=2*Math.PI/r;for(let g=0;g<r;g++){let v=p*g,y=d+Math.sin(v)*h,x=f+Math.cos(v)*u;c.addPoint(c.createPoint(y,x))}c.isClosed=!0;for(let g=0,v=c.points.length;g<v;g++)c.points[g].roundness=s;c.roundness=s,c.update();let m=ny.create({shape:c,parameters:{roundness:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(m,{userData:{...e,type:"PolygonGeometry"}})}},tmt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:n,height:i,depth:r,radialSegments:s,heightSegments:o,openEnded:a,cornerRadius:l,cornerSegments:c}=e.parameters,h=new imt(n*.5,i,s,o,a,l,c);return h.scale(1,1,r/n),Object.assign(h,{userData:{...e,type:"PyramidGeometry"}})}};function SS(t,e,n){n.x=t.x*e.x,n.y=t.y,n.z=t.x*e.y}function I4(t,e,n,i,r,s){let o=e.clone().sub(t),a=n.clone().sub(t),l=o.angleTo(a);if(o.normalize(),a.normalize(),i===r){let c=o.add(a).normalize();s.copy(t).addScaledVector(c,i/Math.sin(l/2))}else{let c=o.angleTo(a);s.copy(t),s.addScaledVector(o,r/Math.sin(c)),s.addScaledVector(a,i/Math.sin(c))}}function nmt(t,e,n){let i=t.clone().sub(e),r=n.clone().sub(e);return i.projectOnVector(r),i.add(e)}var imt=class extends yt{constructor(e=.5,n=1,i=4,r=1,s=!1,o=0,a=4){super(),i=Math.floor(Math.max(3,i)),r=Math.floor(r),a=Math.floor(a);let l=[],c=[],h=[],u=[],d=0,f=n/2,p=Math.PI/i,m=e*Math.cos(Math.PI/i),g=2*Math.PI/i,v=(i-2)*Math.PI/i,y=Math.PI-v,x=new q(0,-f,0),b=new q(0,f,0),S=new Me(e,-f),A=new Me(m,-f),E=new Me(0,b.y).sub(A),M=new Me(0,b.y).sub(S),C=new Me(E.y,-E.x).normalize(),T=new Me(M.y,-M.x).normalize(),D=e*Math.cos(Math.PI/i)*Math.tan((Math.PI-E.angle())/2)-1e-8;o=Math.min(o,D);let L;{let F=new q(C.x,C.y,0),V=new q(Math.cos(g)*F.x,F.y,Math.sin(g)*F.x);L=F.angleTo(V)}let I=o/Math.tan((Math.PI-E.angle())/2),R=o/Math.tan((Math.PI-L)/2),H=new q;if(!s){c.push(x.x,x.y,x.z),h.push(0,-1,0),u.push(0,0);let F=d++,V=[],U=S.clone(),j=I/Math.cos(Math.PI/i);U.x-=j;for(let z=0;z<i;z++){let Y=z/i*Math.PI*2+p,J=new Me(Math.sin(Y),Math.cos(Y));SS(U,J,H),c.push(H.x,H.y,H.z),h.push(0,-1,0),u.push(0,0),V.push(d++)}for(let z=0;z<V.length;z++)l.push(V[z],F,V[(z+1)%V.length])}{let F=new q,V=new q,U=new q,j=new q,z=new q,Y=new q;for(let J=0;J<i;J++){let K=J/i*Math.PI*2+p,X=(J+.5)/i*Math.PI*2+p,te=(J+1)/i*Math.PI*2+p,re=new Me(Math.sin(K),Math.cos(K)),se=new Me(Math.sin(X),Math.cos(X)),ce=new Me(Math.sin(te),Math.cos(te));SS(S,re,V),SS(S,ce,U),SS(C,se,F),I4(b,V,U,R,R,j),c.push(j.x,j.y,j.z),I4(V,b,U,R,I,z),c.push(z.x,z.y,z.z),I4(U,V,b,I,R,Y),c.push(Y.x,Y.y,Y.z),h.push(F.x,F.y,F.z),h.push(F.x,F.y,F.z),h.push(F.x,F.y,F.z),u.push(0,0),u.push(0,0),u.push(0,0);let ge=d++,oe=d++,ae=d++;if(l.push(ge,oe,ae),o>0){{let Se=V.clone().add(U).multiplyScalar(.5),Pe=b.clone().sub(Se).normalize(),Te=x.clone().sub(Se).normalize().add(Pe).normalize().multiplyScalar(-1),Ie=Y.clone().sub(z);Z(Se,Ie,Te,E.angle())}let ye,we;{let Se=new q;SS(T,ce,Se);let Pe=Y.clone().add(j).multiplyScalar(.5);Pe=nmt(Pe,U,b);let Te=Y.clone().sub(j);[ye,we]=Z(Pe,Te,Se,L,j.y)}{let Se=ye,Pe=Se.clone().setY(0).normalize(),Te=new q(0,-1,0),Ie=Pe.clone().cross(Te);ee(Se,Pe,Te,Ie)}{let Se=E.angle(),Pe=Math.PI-Se,Te=b.clone();Te.y-=o/Math.sin(Se-Math.PI/2);let Ie=new q,xe=[];for(let N=0;N<a;N++){let B=[],le=Math.PI/2-Pe*N/a,_e=Math.cos(le),Ee=Math.sin(le),Fe=X;for(let Ze=0;Ze<=N;Ze++){let Ue=Math.cos(Fe),be=Math.sin(Fe);F.x=_e*be,F.y=Ee,F.z=_e*Ue,Ie.copy(Te).addScaledVector(F,o),c.push(Ie.x,Ie.y,Ie.z),h.push(F.x,F.y,F.z),u.push(0,0),B.push(d++),Fe+=Math.PI*2/N/i}xe.push(B)}we.reverse(),xe.push(we);let Re=xe.length-1;for(let N=0;N<Re;N++){let B=xe[N],le=xe[N+1],_e=B.length-1;l.push(le[1],B[0],le[0]);for(let Ee=1;Ee<=_e;Ee++)l.push(B[Ee],B[Ee-1],le[Ee]),l.push(le[Ee+1],B[Ee],le[Ee])}}}}}this.setIndex(l),this.setAttribute("position",new it(c,3)),this.setAttribute("normal",new it(h,3)),this.setAttribute("uv",new it(u,2));function Z(F,V,U,j,z){let Y=-j/2,J=(Math.PI-j)/2,K=V.clone().normalize().cross(U);F.addScaledVector(U,-o/Math.sin(J));let X=new q,te=new q,re=1,se=d,ce=[];for(let ge=0;ge<=a;ge++){let oe=Y+ge/a*j;te.set(0,0,0),te.addScaledVector(K,Math.sin(oe)),te.addScaledVector(U,Math.cos(oe));for(let ae=0;ae<=re;ae++){let ye=ae/re-.5;if(X.copy(F),X.addScaledVector(V,ye),X.addScaledVector(te,o),z!=null){let we=Math.max(0,X.y-z);X.addScaledVector(V,-we/V.y)}c.push(X.x,X.y,X.z),h.push(te.x,te.y,te.z),u.push(0,0),ae===0&&ce.push(d),d++}}for(let ge=0;ge<a;ge++)for(let oe=0;oe<re;oe++){let ae=se+oe+(re+1)*ge,ye=ae+(re+1),we=ye+1,Se=ae+1;l.push(ae,ye,Se),l.push(ye,we,Se)}return[F.clone().addScaledVector(V,.5),ce]}function ee(F,V,U,j){let z=Math.PI/2,Y=M.angle()-z,J=[],K=new q,X=new q;for(let re=0;re<=a;re++){let se=[],ce=re/a;for(let ge=0;ge<=re;ge++){let oe=((re?ge/re:0)-.5)*y,ae=Math.cos(oe),ye=Math.sin(oe),we=Math.atan(Math.tan(Y)*ae),Se=(z+we)*ce,Pe=Math.cos(Se),Te=Math.sin(Se);K.set(0,0,0),K.addScaledVector(V,Te*ae),K.addScaledVector(U,Pe),K.addScaledVector(j,Te*ye),X.copy(F).addScaledVector(K,o),c.push(X.x,X.y,X.z),h.push(K.x,K.y,K.z),u.push(0,0),se.push(d++)}J.push(se)}let te=J.length-1;for(let re=0;re<te;re++){let se=J[re],ce=J[re+1],ge=se.length-1;l.push(se[0],ce[1],ce[0]);for(let oe=1;oe<=ge;oe++)l.push(se[oe-1],se[oe],ce[oe]),l.push(se[oe],ce[oe+1],ce[oe])}}}},E1e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),r=Object.assign((n==null?void 0:n.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof Tr?e.shape:new Tr,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)}),ui:r}}static build(e){let n=e.shape,{width:i,height:r,cornerRadius:s,cornerType:o,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,h={x:i*.5,y:r*.5},u={x:-h.x,y:-h.y},d={x:h.x,y:h.y};function f(S,A,E){return A>i&&E>r?Math.min(S*i/A,S*r/E):A>i?S*i/A:E>r?S*r/E:S}let p=[];p[0]=s[0]===0?0:f(s[0],s[0]+s[3],s[0]+s[1]),p[1]=s[1]===0?0:f(s[1],s[1]+s[2],s[1]+s[0]),p[2]=s[2]===0?0:f(s[2],s[2]+s[1],s[2]+s[3]),p[3]=s[3]===0?0:f(s[3],s[3]+s[0],s[3]+s[2]);let m=u.x,g=d.x,v=d.y,y=u.y;n.addPoint(n.createPoint(m,v)),n.addPoint(n.createPoint(g,v)),n.addPoint(n.createPoint(g,y)),n.addPoint(n.createPoint(m,y)),n.isClosed=!0;let x=!0;for(let S=0,A=n.points.length;S<A;S++)n.points[S].roundness=p[S],S>0&&p[S]!==p[S-1]&&(x=!1);x&&(n.roundness=p[0]),n.useCubicForRoundedCorners=o!==1,n.update();let b=ny.create({shape:n,parameters:{depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(b,{userData:{...e,type:"RectangleGeometry"}})}},rmt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:n=100,height:i=n,depth:r=n,widthSegments:s=64,heightSegments:o=64,phiStart:a,phiLength:l,thetaStart:c,thetaLength:h}=e.parameters,u=new $v(.5*n,s,o,a,l,c,h);return u.scale(1,i/n,r/n),Object.assign(u,{userData:{...e,type:"SphereGeometry"}})}},smt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:0})}}static build(e){let{width:n=100,height:i=n,widthSegments:r=8,heightSegments:s=8}=e.parameters,o=new og(n,i,r,s);return o.scale(1,1,1),Object.assign(o,{userData:{...e,type:"PlaneGeometry"}})}},omt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:n,height:i,depth:r,angle:s,cornerRadius:o,cornerSegments:a}=e.parameters,l=new amt(n,i,r,s,o,a);return Object.assign(l,{userData:{...e,type:"BackdropGeometry"}})}},amt=class extends yt{constructor(e=1,n=1,i=1,r=90,s=10,o=24){super(),this.type="BackdropGeometry";let a=[],l=[],c=[],h=.001;s==0&&(o=1),o=Math.max(1,Math.floor(o)),s=Math.min(s,100),r=Math.min(180-h,r),r*=Math.PI/180;let u=[],d=Math.PI/2,f=(re=0,se=0,ce=0)=>new q(re,se,ce),p=f(),m=f(),[g,v,y]=[n/2,e/2,i/2],x=-v,b=+v,[S,A,E]=[f(x,-g,+y),f(x,-g,-y),f(x,+g,-y)],M=(re,se=!1)=>Math.sin(re-Math.PI/(1+ +se)),C=(re,se=!1)=>Math.cos(re-Math.PI/(1+ +se));E.y=Math.sin(r)*n-g;let T=Math.cos(r)*n-y,D=S.z-h;r<=d?(E.z=Math.min(T,D),E.z==D&&(E.y-=(T-D)/Math.tan(d-r))):A.z=Math.min(A.z-T-y,S.z-h),p.subVectors(S,A),m.subVectors(E,A);let L=Math.min(p.length(),m.length())*s/100,I=L*Math.tan(r/2),R=L/Math.cos(r/2),H=p.clone().normalize().add(m.normalize()).setLength(R).add(A);p.set(0,M(r,!0),C(r,!0)),u.push([E,p.clone()]);let Z=(Math.PI-r)/o;for(let re=0;re<=o;re++){let se=d+r+re*Z;p.set(0,Math.sin(se)*I,Math.cos(se)*I),p.add(H),m.set(0,M(se),C(se)),u.push([p.clone(),m.clone()])}u.push([S,f(0,1,0)]);let ee=Math.sin(Z/2)*I*2,F=u.length-1,V=u[0][0].distanceTo(u[1][0]),U=u[F-1][0].distanceTo(u[F][0]),j=V+ee*o+U;u[0].push(1);for(let re=0;re<=o;re++)u[re+1].push(1-(V+re*ee)/j);u[F].push(0);let[z,Y,J]=u[0],K,X,te;for(let re=1;re<u.length;re++)[K,X,te]=u[re],a.push(x,z.y,z.z,x,K.y,K.z,b,z.y,z.z,b,z.y,z.z,x,K.y,K.z,b,K.y,K.z),l.push(0,Y.y,Y.z,0,X.y,X.z,0,Y.y,Y.z,0,Y.y,Y.z,0,X.y,X.z,0,X.y,X.z),c.push(0,J,0,te,1,J,1,J,0,te,1,te),[z,Y,J]=[K,X,te];this.setAttribute("position",new it(a,3)),this.setAttribute("normal",new it(l,3)),this.setAttribute("uv",new it(c,2))}},C1e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Tr?e.shape:new Tr,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:n,height:i,innerRadiusPercent:r,spikes:s,cornerRadius:o,angle:a,depth:l,extrudeBevelSize:c,extrudeBevelSegments:h}=e.parameters,u=e.shape,d=n*.5,f=i*.5,p=0,m=0,g=a*Math.PI/360/s,v=Math.PI/2*3*-1,y=d*r/100,x=f*r/100;if(s===3&&r===50){g=2*Math.PI/s;for(let S=0;S<s;S++){let A=g*S,E=p+Math.sin(A)*d,M=m+Math.cos(A)*f;u.addPoint(u.createPoint(E,M))}}else for(let S=0;S<s;S++){let A=p+Math.cos(v)*d,E=m+Math.sin(v)*f;u.addPoint(u.createPoint(A,E)),v+=g,A=p+Math.cos(v)*y,E=m+Math.sin(v)*x,u.addPoint(u.createPoint(A,E)),v+=g}u.isClosed=!0;for(let S=0,A=u.points.length;S<A;S++)u.points[S].roundness=o;u.roundness=o,u.update();let b=ny.create({shape:u,parameters:{roundness:o,depth:l,extrudeBevelSize:c,extrudeBevelSegments:h}});return Object.assign(b,{userData:{...e,type:"StarGeometry"}})}},lmt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:n,height:i}=e.parameters,r=new og(n,i);return Object.assign(r,{userData:{...e,type:"TextFrameGeometry"}})}},cmt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},e.parameters),r=Math.abs(i.width),s=Math.abs(i.height??i.width),o=Math.round(Math.abs(i.depth??i.width*.25));return{parameters:Object.assign(i,{width:r,height:s,depth:o})}}static build(e){let{width:n,height:i,depth:r,radialSegments:s,tubularSegments:o,arc:a,cornerRadius:l,cornerSegments:c}=e.parameters,h=umt(n,i,r,n*.5,a,o,0,0,s,l,c);return h.scale(1,i/n,1),Object.assign(h,{userData:{...e,type:"TorusGeometry"}})}};function umt(t,e,n,i,r,s,o,a,l,c,h){return[e,n]=[n,e],o=e/2,r/=2*Math.PI,r==1&&(c=0),new i$(!0,t,e,n,i,r,s,o,a,l,c,h)}var hmt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width),tube:i.tube??i.width*.125})}}static build(e){let{width:n,tube:i,tubularSegments:r,radialSegments:s,p:o,q:a}=e.parameters,l=n*.5;l!==i&&(l-=i);let c=new Dw(l,i,r,s,o,a);return Object.assign(c,{userData:{...e,type:"TorusKnotGeometry"}})}},dmt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Tr?e.shape:new Tr,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width*(i.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(i.depth??0)})}}static build(e){let{width:n=100,height:i,cornerRadius:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a,isRect:l}=e.parameters,c=e.shape,h=n*.5,u=i*.5;l?(c.addPoint(c.createPoint(-h,u)),c.addPoint(c.createPoint(h,-u)),c.addPoint(c.createPoint(-h,-u))):(c.addPoint(c.createPoint(0,u)),c.addPoint(c.createPoint(h,-u)),c.addPoint(c.createPoint(-h,-u))),c.isClosed=!0;for(let f=0,p=c.points.length;f<p;f++)c.points[f].roundness=r;c.roundness=r,c.update();let d=ny.create({shape:c,parameters:{roundness:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}});return Object.assign(d,{userData:{...e,type:"TriangleGeometry"}})}};function fmt(t,e){let n=2*Math.PI;return(t%n+n)%n===(e%n+n)%n}function pmt(t,e,n){let i=[new q,new q,new q],r=[new q,new q,new q];return t.extractBasis(i[0],i[1],i[2]),e.extractBasis(r[0],r[1],r[2]),i.forEach((s,o)=>{let a=r[o],l=zi.lerp(s.length(),a.length(),n);s.lerp(a,n).setLength(l)}),new at().makeBasis(i[0],i[1],i[2])}var mmt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),r=Math.abs(i.width),s=Math.abs(i.height??i.width),o=Math.abs(i.depth??0),a=(n==null?void 0:n.shapeData)??n$.create({parameters:Cye}).userData.shape;return{path:e.path??uL.defaultData(),parameters:Object.assign(i,{width:r,height:s,depth:o,extrusion:{...Tye,...i.extrusion}}),shapeData:a}}static build(e){if(e.path.points.length>=2){let n=new gmt(e);return Object.assign(n,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new yt,{userData:{...e,type:"PathGeometry"}})}},gmt=class extends yt{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!fmt(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let n=this._computeBasisMatrices(e),{depth:i,offset:r}=this.inputs.parameters.extrusion,s=this.inputs.path.isClosed?e.length:e.length-1,o=Math.floor(r*s),a=this.inputs.path.isClosed?Math.ceil((i+r)*s):Math.ceil(Math.min(1,i+r)*s),l=Math.min(Math.max(2,a-o+1),s+2),c=[],h=[];for(let D=0;D<l;D++){let L=this.inputs.path.isClosed?(D+o)%e.length:Math.min(D+o,e.length-1);c.push(e[L].clone()),h.push(n[L].clone())}let u=(D,L,I)=>{c[D]=c[D].clone().lerp(c[L],I),h[D]=pmt(h[D],h[L],I)},d=0,f=r*s%1;(!this.inputs.path.isClosed||i<=1)&&(f||r===0)&&(d=f,u(0,1,d));let p=0,m=(r+i)*s%1;if((this.inputs.path.isClosed&&i<=1||!this.inputs.path.isClosed&&r+i<1)&&m&&(p=m,u(c.length-1,c.length-2,1-p)),i===0){let D=c.length-1;c[D].copy(c[0]),h[D].copy(h[0])}this._applyPathModifiers(h,d,p);let{regions:g,infos:v,vertices:y}=this._computeShapePoints(5),x=0,b=0;v.sort((D,L)=>D.start-L.start),v.forEach(D=>{D.verticesStart=x,D.verticesCount=D.continuous.reduce((L,I,R)=>L+(R===0||!I?2:1),0),b+=D.verticesCount,x=b});let S=b*l,A,E=0;if(this._isOpenEnded()){try{A=am({windingRule:di.ODD,elementType:os.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:g})}catch{A=g1e}E=A.vertexCount}let M=S+2*E,C={positions:new Float32Array(M*3),normals:new Float32Array(M*3),uvs:new Float32Array(M*2)},T=[];v.forEach(D=>{this._extrudeRegion(D,y,h,c,C,T,this._isGeometryClosed()&&!this._isOpenEnded())}),A&&(this._closeEnd(A,S,T,C,h[0],c[0],!1),this._closeEnd(A,S+E,T,C,h[h.length-1],c[c.length-1],!0)),this.setAttribute("position",new Nt(C.positions,3)),this.setAttribute("normal",new Nt(C.normals,3)),this.setAttribute("uv",new Nt(C.uvs,2)),this.setIndex(T)}_extractPathPoints(){let e=a1e(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let n=[e[0]];return e.forEach(i=>{n[n.length-1].distanceToSquared(i)>.001&&n.push(i)}),this.inputs.path.isClosed&&n[n.length-1].distanceTo(n[0])<.001&&n.pop(),n}_computeBasisMatrices(e){let n=[],i=e.length,r=this.inputs.path.isClosed,s=new q,o=new q,a=new q,l=new q,c=new q(0,1,0);for(let m=0;m<i;m++){let g=e[m],v;m===0?v=r?e[e.length-2]:g.clone().multiplyScalar(2).sub(e[1]):v=e[m-1];let y;m===i-1?y=r?e[1]:g.clone().multiplyScalar(2).sub(e[m-1]):y=e[m+1];let x=g.clone().sub(v).normalize(),b=y.clone().sub(g).normalize(),S=x.clone().add(b).normalize();a.copy(S),m===0&&(S.equals(c)||S.clone().negate().equals(c))&&c.set(0,0,1);let A=c.clone().cross(S).normalize(),E=S.clone().cross(A).normalize();c.copy(E),l.copy(A),m===0&&(s.copy(E),o.copy(S));let M=new at().makeBasis(A,E,S);n.push(M)}let h=r?o:a,u=r?s:new q(0,1,0),d=h.clone().cross(l).normalize(),f=Math.acos(u.dot(d));if(isNaN(f))return n;let p=u.clone().cross(d);h.dot(p)>0&&(f*=-1);for(let m=1;m<n.length;m++){let g=new at().makeRotationZ(f*m/n.length);n[m].multiply(g)}return n}_applyPathModifiers(e,n,i){let r=e.length,{angle:s,twist:o,startScale:a,endScale:l}=this.inputs.parameters.extrusion,c=new at,h=new at;return e.forEach((u,d)=>{let f=d===0?0:d===r-1?1:(d-n)/(r-(i===0?0:1)-(n+(1-i)));c.makeRotationZ(zi.lerp(s,s+o,f));let p=zi.lerp(a,l,f);h.makeScale(p,p,p),u.multiply(c).multiply(h)}),e}_computeShapePoints(e=12,n=di.ODD){let i=this.inputs.shapeData,r=i.extractShapePointsToFlatArray([],e),s=i.shapeHoles.map(h=>{let u=h.extractShapePointsToFlatArray([],e),d=[];for(let f=u.length-1;f>=1;f-=2){let p=u[f-1],m=u[f-0];d.push(p,m)}return d}),o;try{o=am({windingRule:n,elementType:os.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[r]})}catch{o=t$}let a;try{a=am({windingRule:di.ODD,elementType:os.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...s]})}catch{a=m1e}if(!o)throw new Error("error generating geometry");let l=o.elementCount;if(a){o.elementCount+=a.elementCount;for(let h=0;h<a.elements.length;h++){let u=a.elements[h],d=h%2===0?o.vertexCount:0;o.elements.push(u+d)}for(let h=0;h<a.vertexIndices.length;h++){let u=a.vertexIndices[h],d=o.vertexCount;o.vertexIndices.push(u+d)}for(let h=0;h<a.vertices.length;h++){let u=a.vertices[h];o.vertices.push(u)}}for(let h=0,u=o.vertexCount;h<u;h++){let d=h*2;o.vertices[d+0],o.vertices[d+1]}let c=[];for(let h=o.elementCount-1;h>=0;h--){let u=h>=l,d=h*2,f=o.elements[d+0],p=o.elements[d+1],m=f+p,g={start:f,count:p,normals:[],isHole:u,continuous:[],verticesStart:0,verticesCount:0};c.push(g);let v=f,y=m-1,x=f+1,b=i.roundedCurves.length;do{let S=v-f;o.vertices[y*2+0],o.vertices[y*2+1];let A=o.vertices[v*2+0],E=o.vertices[v*2+1],M=o.vertices[x*2+0],C=o.vertices[x*2+1],T=A-M,D=E-C,L=Math.sqrt(T*T+D*D);T/=L,D/=L,g.normals[S*2+0]=-D,g.normals[S*2+1]=T;let I=o.vertexIndices[v];if(Array.isArray(I))g.continuous[S]=!1;else{let[R,H]=i.getCurveIndexFromVertexId(I-1,!0);if(H>0&&H<1)g.continuous[S]=!0;else{let Z=H===1?R+1:R-1;Z=(Z+b)%b;let ee=H===1?0:1,F=i.roundedCurves[R].getTangent(H),V=i.roundedCurves[Z].getTangent(ee);g.continuous[S]=F.dot(V)>.95}}u&&(g.normals[S*2+0]*=-1,g.normals[S*2+1]*=-1),[y,v,x]=[v,x,x+1],x>=m&&(x-=p)}while(x!==f+1)}return{regions:[r,...s],infos:c,vertices:o.vertices}}_insertVertex(e,n,i,r,s){let o=n*2,a=n*3;e.positions[a+0]=i.x,e.positions[a+1]=i.y,e.positions[a+2]=i.z,e.normals[a+0]=r.x,e.normals[a+1]=r.y,e.normals[a+2]=r.z,e.uvs[o+0]=s.x,e.uvs[o+1]=s.y}_extrudeRegion(e,n,i,r,s,o,a){let l=new q,c=new q,h=new q,u=new q,d=new Me;i.forEach((p,m)=>{let g=r[m],v=e.verticesStart*i.length+e.verticesCount*m;for(let y=0;y<e.count;y++){let x=(e.start+y)*2;if(l.set(n[x+0],n[x+1],0),h.copy(l).applyMatrix4(p).add(g),e.continuous[y])u.set(e.normals[y*2+0],e.normals[y*2+1],0);else{let b=y==0?(e.start+e.count-1)*2:x-2;c.set(n[b+0],n[b+1],0),u.copy(l).sub(c),u.set(-u.y,u.x,0),e.isHole||u.negate()}if(u.applyMatrix4(p).normalize(),d.set(y===0?1:y/e.count,m/(i.length-1)),this._insertVertex(s,v,h,u,d),v++,!e.continuous[y]||y===0){if(y===0)u.set(e.normals[y*2+0],e.normals[y*2+1],0),d.set(0,m/(i.length-1));else{let b=y===e.count-1?e.start*2:x+2;c.set(n[b+0],n[b+1],0),u.copy(c).sub(l),u.set(-u.y,u.x,0),e.isHole||u.negate()}u.applyMatrix4(p).normalize(),this._insertVertex(s,v,h,u,d),v++}}});let f=i.length-1;for(let p=0;p<f;p++){let m=e.verticesStart*i.length+e.verticesCount*p,g=e.verticesStart*i.length+e.verticesCount*(p+1),v=0;for(let y=0;y<e.count;y++){(!e.continuous[y]||y===0)&&v++;let x=y===e.count-1?0:v+1,b=m+v,S=m+x,A=g+x,E=g+v;e.isHole?o.push(b,A,S,b,E,A):o.push(b,S,A,b,A,E),v++}}}_closeEnd(e,n,i,r,s,o,a){let l=e.vertexCount,c=new q(0,0,a?-1:1).applyMatrix4(s),h=new q,u=new Me;for(let f=0;f<l;f++){let p=2*f;h.set(e.vertices[p+0],e.vertices[p+1],0).applyMatrix4(s).add(o),this._insertVertex(r,n+f,h,c,u)}let d=e.elements;for(let f=0;f<e.elementCount;f++){let p=3*f,m=d[p+0]+n,g=d[p+(a?1:2)]+n,v=d[p+(a?2:1)]+n;i.push(m,g,v)}}};function vmt(){let t=new yt;return t.setAttribute("position",new Nt(new Float32Array([]),3)),t.setIndex(new Nt(new Uint16Array([]),1)),t}var ymt=12,xmt=1,T1e=class extends yt{constructor(e,n){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],this.userData={parameters:e,type:"TextGeometry"};let i=n.getFont(e.font);i!=null&&i.isLoaded?(this.font=i,this.update(e)):this.updateFont(e.font,n).then(()=>{this.update(e),n==null||n.requestRender()})}async updateFont(e,n){let i=n.getFont(e);i&&(this.font=i,await i.loadingPromise)}update(e){let n=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(n!=null&&n.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:i,height:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a,text:l,textTransform:c}=e,h=c===2?l.toUpperCase():c===3?l.toLowerCase():l,u=bmt(e,n,h),{shapes:d,charWidths:f,charCoords:p}=n.generateShapes(u,e),m=i*.5,g=r*.5,v=d.map(b=>new Tr().fromShape(b));this.vectorShapes=v;let y=v.map(b=>ny.create({shape:b,parameters:{depth:s,extrudeBevelSegments:a,extrudeBevelSize:o,windingRule:s<=0?di.NONZERO:di.ODD,subdivisions:this.isLowResolution&&s>0?xmt:ymt}})),x=y.length?oye(y):vmt();x.translate(-m,g,0),this.dispose(),this.wrappedText=u,this.charCoords=p,this.charWidths=f,this.deleteAttribute("extrudeNormal"),Object.entries(x.attributes).forEach(([b,S])=>{this.setAttribute(b,S)}),this.setIndex(x.index),this.computeBoundingSphere()}clone(){let e=tw(new yt,T1e.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([n,i])=>{this.setAttribute(n,i)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:e})}get text(){return this.userData.parameters.text??""}};function bmt(t,e,n){n=n??t.text;let i=[""],r="";for(let s of n)r+=s,s===" "||s===`
`?(i[i.length-1]+=r,r="",s===`
`&&i.push("")):e.getTextWidth(i[i.length-1]+r,t)>t.width&&(i[i.length-1].length&&i.push(""),e.getTextWidth(i[i.length-1]+r,t)>t.width&&(r.length===1?(i[i.length-1]+=r,r=""):(i[i.length-1]+=r.slice(0,-1),r=r[r.length-1],i.push(""))));return i[i.length-1]+=r,i}var P1e,r$=new Promise(t=>{P1e=t}),jie=!1;async function wmt(){if(jie)return;let t="https://unpkg.com/@splinetool/modelling-wasm@0.9.295/build",[e,n]=await Promise.all([Nw(()=>import("./process-10f79362.js"),[]),fetch(`${t}/process.wasm`).then(s=>s.arrayBuffer())]),i=e.default,r=await i({wasmBinary:n});P1e(r),jie=!0}function SL(t,e,n){let i={parameters:t,type:t.type};if(t.type==="PathGeometry")i.path=t.path;else if(t.type==="VectorGeometry"){let s=Tr.createFromState(t.shape,t.width,t.height);i.shape=s}else if(t.type==="NonParametricGeometry")t.data.groups&&t.data.groups.forEach(s=>s.materialIndex=Math.max(s.materialIndex??0,0)),i.geometry=new qI().parse(t);else{if(t.type==="SubdivGeometry")return new Yo(t,n);if(t.type==="TextGeometry")return new T1e(t,e)}let r;try{r=Xie(i)}catch(s){console.error(s)}if(!r){let s=Tr.createFromState(cL.defaultData(),100,100);i.shape=s,r=Xie(i)}return r}var _mt=new at;function AH(t,e,n,i){let r=t.position.array,s=t.normal.array,o=_mt.makeScale(e,n,i).invert().elements,a,l,c;for(var h=0,u=r.length;h<u;h+=3)r[h]*=e,r[h+1]*=n,r[h+2]*=i,a=s[h],l=s[h+1],c=s[h+2],s[h]=o[0]*a+o[4]*l+o[8]*c,s[h+1]=o[1]*a+o[5]*l+o[9]*c,s[h+2]=o[2]*a+o[6]*l+o[10]*c;t.position.needsUpdate=!0,t.normal.needsUpdate=!0}var GP=new ao,n1=new q,$t;r$.then(t=>{$t=t});var Vie=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),Wie=new Uint32Array([0,1,2,3]),$ie=new Uint8Array([4]),Yo=class extends yt{constructor(t,e){super(),this.data=t,this.flatShading=e,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(t,e){this.freeSubdivPointer();let n=this.data.scaleBaked,i=eb.div(e,n);this.subdividedGeometry&&AH(this.subdividedGeometry.attributes,...i),this.originalGeometry&&AH(this.originalGeometry.attributes,...i),this.data=t;let r=this.userData.parameters;this.userData.parameters={width:r.width*i[0],height:r.height*i[1],depth:r.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(n1.fromArray(i));let s=n1.set(r.width,r.height,r.depth).length();this.originalGeometry.boundingSphere.radius=s/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let t,e,n;try{({originalGeometry:t,subdividedGeometry:e,subdivPointer:n}=Yo.build(this.data,void 0,!this.flatShading,void 0))}catch{t=new Ia(100,100,100),n=0}this.subdivPointer=n,this.originalGeometry=t,this.subdividedGeometry=e??void 0;let i=this.subdividedGeometry??this.originalGeometry;Object.assign(this,i),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(Yo.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let t=this.originalGeometry;t.boundingSphere===null&&(t.boundingSphere=new Oo,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=t.boundingSphere));let e=t.attributes.position,n=t.boundingSphere.center;GP.setFromBufferAttribute(e),GP.getCenter(n),t.boundingSphere.radius=n.distanceTo(GP.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),GP.getSize(n1);let i={width:n1.x,height:n1.y,depth:n1.z};return this.userData.parameters=i,i}static build(t,e,n,i){let r,s,o,a=(t==null?void 0:t.phongAngle)??35;n===!1&&(a=-1),e&&($t.free_bvh(e),$t.free_subdivision_surface(e));try{r=Yo.allocate(t,i)}catch(l){console.error(l,t),r=Yo.allocate({positionWASM:Vie,indexWASM:Wie,verticesPerFaceWASM:$ie},i)}if($t.set_destination_refinement_level(r,0),s=Yo.buildLevel(r,!0,a),t.subdivisions>0)try{$t.set_destination_refinement_level(r,t.subdivisions),o=Yo.buildLevel(r,!1,a)}catch{try{$t.set_destination_refinement_level(r,t.subdivisions-1),o=Yo.buildLevel(r,!1,a)}catch{o=null}}else o=null;return{subdivPointer:r,originalGeometry:s,subdividedGeometry:o}}static primitiveToQuads(t,e,n){t.widthSegments>16&&(t.widthSegments=16),t.heightSegments>16&&(t.heightSegments=16),t.depthSegments>16&&(t.depthSegments=16),t.radialSegments>16&&(t.radialSegments=16),t.type==="DodecahedronGeometry"&&(t.detail=0);let i;if(t.type==="TorusGeometry"&&t.arc===Math.PI*2){let{width:c,height:h,depth:u,arc:d,tubularSegments:f,radialSegments:p}=t;i=new i$(!0,c,u,h,c*.5,d/(2*Math.PI),f,u/2,0,p,0,0,!0)}else i=t.shape!==void 0?e.geometry:SL(t,n,!1);let r,s,o,a;({positions:r,triIndices:a}=D1e(i.getAttribute("position"),i.getIndex()));let l;if(t.type==="CylinderGeometry"&&t.cornerRadius===0&&t.hollow===0&&t.openEnded===!1){let c=t.radialSegments*t.heightSegments*3*2,h=c+t.radialSegments*3;l=[c,h]}return{indices:s,verticesPerFace:o}=O1e(r,a,i,l),{positions:r,indices:s,verticesPerFace:o}}static allocate(t,e){var x;let n,i,r,s=[],o=[];t.positionWASM&&t.positionWASM.length>0?(n=t.positionWASM,i=t.indexWASM,r=t.verticesPerFaceWASM):(n=Vie,i=Wie,r=$ie);let a=n.length,l=i.length,c=r.length,h=n.length+s.length+o.length,u=i.length+r.length,d=h*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,f=h*Float32Array.BYTES_PER_ELEMENT,p=$t._malloc(d),m=new Float32Array($t.HEAPF32.buffer,p,h),g=new Uint32Array($t.HEAPU32.buffer,p+f,u);m.set(n,0),m.set(s,n.length),m.set(o,n.length+s.length),g.set(i,0),g.set(r,i.length);let v;(x=t==null?void 0:t.scaleBaked)!=null&&x.some(b=>b!==1)&&(v=new at().makeScale(...t.scaleBaked)),e&&(v?v.premultiply(e):v=e);let y=v?$t.alloc_subdivision_surface2(p,a,p+f,l,p+f+i.length*Uint32Array.BYTES_PER_ELEMENT,c,v.elements):$t.alloc_subdivision_surface(p,a,p+f,l,p+f+i.length*Uint32Array.BYTES_PER_ELEMENT,c);return $t._free(p),y}static buildLevel(t,e,n,i,r){let s=r?$t.get_mesh_data2(t,e?$t.Level.CONTROL:$t.Level.REFINED,n,r.elements):$t.get_mesh_data(t,e?$t.Level.CONTROL:$t.Level.REFINED,n),o=8,a=$t.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(4,4+4),c=0,h=$t.HEAPU32[a[c]>>2],u=$t.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let d=$t.HEAPU32[a[c]>>2],f=$t.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let p=$t.HEAPU32[a[c]>>2],m=$t.HEAPU32.subarray(p>>2,(p>>2)+l[c]);c++;let g=$t.HEAPU32[a[c]>>2],v=$t.HEAPU32.subarray(g>>2,(g>>2)+l[c]);if(c++,i===void 0){let y=new yt;if(y.setIndex(new Jx(v,1)),y.setAttribute("position",new it(u,3)),y.setAttribute("normal",new it(f,3)),e){y.setAttribute("faceMap",new Jx(m,1));let x=new Float32Array(f.length/3*4).fill(0);y.setAttribute("color",new Nt(x,4))}return $t.free_mesh_data(s),y.userData.type="SubdivGeometry",y}i.getAttribute("position").copyArray(u),i.getAttribute("normal").copyArray(f),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,$t.free_mesh_data(s)}static freeSubdivPointer(t){$t.free_bvh(t),$t.free_subdivision_surface(t)}static buildControlCageWireframe(t,e,n){let i=$t.get_wireframe_data_for_base_level(t),r=4,s=$t.HEAPU32.subarray(i>>2,(i>>2)+r),o=s.subarray(2,2+2),a=0,l=$t.HEAPU32[s[a]>>2],c=$t.HEAPF32.subarray(l>>2,(l>>2)+o[a]);a++;let h=$t.HEAPU32[s[a]>>2],u=$t.HEAPU32.subarray(h>>2,(h>>2)+o[a]);if(e===void 0){let d=new yt;d.setAttribute("position",new it(c,3));let f=new Float32Array(c.length);for(let p=0,m=c.length;p<m;)f[p++]=n.r,f[p++]=n.g,f[p++]=n.b;return d.setAttribute("color",new Nt(f,3)),d.setIndex(new Jx(u,1)),$t.free_wireframe_data_for_base_level(i),d}e.getAttribute("position").copyArray(c),e.attributes.position.needsUpdate=!0,$t.free_wireframe_data_for_base_level(i)}static updateCollabMesh(t,e,n){let i=e===0;i||$t.set_destination_refinement_level(t,e);let r=n?$t.get_topological_data2(t,i?$t.Level.CONTROL:$t.Level.REFINED,n.elements):$t.get_topological_data(t,i?$t.Level.CONTROL:$t.Level.REFINED),s=6,o=$t.HEAPU32.subarray(r>>2,(r>>2)+s),a=o.subarray(3,3+3),l=0,c=$t.HEAPU32[o[l]>>2],h=new Float32Array($t.HEAPF32.subarray(c>>2,(c>>2)+a[l]));l++;let u=$t.HEAPU32[o[l]>>2],d=new Uint32Array($t.HEAPU32.subarray(u>>2,(u>>2)+a[l]));l++;let f=$t.HEAPU32[o[l]>>2],p=new Uint8Array($t.HEAPU32.subarray(f>>2,(f>>2)+a[l]));return $t.free_topological_data(r),{positions:h,indices:d,verticesPerFace:p}}},qie=["getX","getY","getZ"];function D1e(t,e){let n={},i=e?e.count:t.count,r=0,s=[],o=[],a=1e4;for(let c=0;c<i;c++){let h=e?e.getX(c):c,u="";for(let d=0;d<3;d++)u+=`${~~(t[qie[d]](h)*a)},`;if(u in n)s.push(n[u]);else{for(let d=0;d<3;d++)o.push(t[qie[d]](h));n[u]=r,s.push(r),r++}}let l=[];for(let c=0;c<s.length;c+=3)s[c]===s[c+1]||s[c]===s[c+2]||s[c+1]===s[c+2]||l.push(s[c],s[c+1],s[c+2]);return{positions:o,triIndices:l}}var HP=new q,B4=new q,k4=new q,F4=new q;function O1e(t,e,n,i){let r=[],s=[];if(n.userData.shape!==void 0&&n.userData.parameters.depth===0&&n.userData.shape.shapeHoles.length===0){let o=n.userData.shape.extractShapePointsToFlatArray([]),a=n.userData.parameters.spikes;if(n.userData.type==="EllipseGeometry"&&a<=24&&a%4===0&&n.userData.parameters.angle>=360){let h=o.length/2/a;o=o.filter((u,d)=>Math.floor(d/2)%h===0)}let l=0;for(let h=0;h<o.length;h+=2)l+=(o[h]-o[(h===0?o.length:h)-2])*(o[h+1]+o[(h===0?o.length:h)-1]);t.length=0;let c=0;if(l<0)for(let h=0;h<o.length;h+=2)t.push(o[h],o[h+1],0),r.push(c++);else for(let h=o.length-2;h>=0;h-=2)t.push(o[h],o[h+1],0),r.push(c++);return s.push(c),{indices:r,verticesPerFace:s}}for(let o=0,a=n.capStartIndex??e.length;o<a;)if(e[o+1]===e[o+3]&&e[o+2]===e[o+5]||e[o+0]===e[o+3]&&e[o+2]===e[o+4]){HP.set(t[e[o]*3],t[e[o]*3+1],t[e[o]*3+2]),B4.set(t[e[o+1]*3],t[e[o+1]*3+1],t[e[o+1]*3+2]),k4.set(t[e[o+4]*3],t[e[o+4]*3+1],t[e[o+4]*3+2]),F4.set(t[e[o+5]*3],t[e[o+5]*3+1],t[e[o+5]*3+2]),B4.sub(HP).normalize(),k4.sub(HP).normalize(),F4.sub(HP).normalize();let l=B4.cross(k4).dot(F4);Math.abs(l)>.005||i&&i.some((c,h)=>h%2===1?!1:o>=i[h]&&o<i[h+1])?(r.push(e[o],e[o+1],e[o+2]),s.push(3),o+=3):(r.push(e[o],e[o+1],e[o+4],e[o+5]),s.push(4),o+=6)}else r.push(e[o],e[o+1],e[o+2]),s.push(3),o+=3;if(n.capStartIndex!==void 0){let o=[],a=[],l=0,c=new Float32Array([n.userData.parameters.depth])[0];for(let h=0,u=0;h<t.length;h+=3,u++)t[h+2]===0&&(o.push(u),l++),t[h+2]===c&&a.push(u);if(n.userData.parameters.extrudeBevelSize===0){let h=a[0];a[0]=a[1],a[1]=h}o.reverse(),r.push(...o,...a),s.push(l,l)}return{indices:r,verticesPerFace:s}}var Gp={};Qrt(Gp,{calcBoolean:()=>Emt,calcBooleanTopological:()=>Mmt,freeMeshSet:()=>Pmt,getMeshSet:()=>Cmt,transformMeshSet:()=>Tmt});var Smt=new Promise(t=>{}),Dn,ob;Smt.then(t=>Dn=t);function Amt(t,e,n){let i,{positions:r,triIndices:s}=D1e(t.getAttribute("position"),t.getIndex()),o;if(e&&n){let{indices:a,verticesPerFace:l}=O1e(r,s,t);o=l.length,i=[];for(let c=0,h=0;c<o;c++){i.push(l[c]);for(let u=0;u<l[c];u++)i.push(a[h++])}}else{let a=s.length;i=Array(a+a/3),o=0;for(let l=0,c=0;c<i.length;)i[c++]=3,o++,i[c++]=s[l++],i[c++]=s[l++],i[c++]=s[l++]}return{positions:r,faceIndices:i,nFaces:o}}function L1e(t){let e=t.length,n=e*Uint32Array.BYTES_PER_ELEMENT,i=e*Float32Array.BYTES_PER_ELEMENT,r=Number.isInteger(t[0])?n:i,s=Dn._malloc(r);return(Number.isInteger(t[0])?new Uint32Array(Dn.HEAPU32.buffer,s,e):new Float32Array(Dn.HEAPF32.buffer,s,e)).set(t,0),s}function R1e(t){switch(t){case 0:return Dn.OP.UNION;case 1:return Dn.OP.INTERSECTION;case 2:return Dn.OP.A_MINUS_B;case 3:return Dn.OP.B_MINUS_A;case 4:return Dn.OP.SYMMETRIC_DIFFERENCE;case 5:return Dn.OP.ALL;default:throw new Error("Unknown boolean operation "+t)}}function Mmt(t,e){ob===void 0&&(ob=Dn.init_csg());let n=L1e(t),i=Dn.csg_calc_topological(ob,n,t.length,R1e(e));Dn._free(n);let r=6,s=Dn.HEAPU32.subarray(i>>2,(i>>2)+r),o=s.subarray(3,3+3),a=0,l=Dn.HEAPU32[s[a]>>2],c=new Float32Array(Dn.HEAPF32.subarray(l>>2,(l>>2)+o[a]));a++;let h=Dn.HEAPU32[s[a]>>2],u=new Uint32Array(Dn.HEAPU32.subarray(h>>2,(h>>2)+o[a]));a++;let d=Dn.HEAPU32[s[a]>>2],f=new Uint8Array(Dn.HEAPU32.subarray(d>>2,(d>>2)+o[a]));return Dn.free_mesh_data(i),{positions:c,indices:u,verticesPerFace:f}}function Emt(t,e,n,i){ob===void 0&&(ob=Dn.init_csg());let r=L1e(t),s=Dn.csg_calc(ob,r,t.length,i,R1e(e));Dn._free(r);let o=5,a=Dn.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(2,2+3),c=0,h=Dn.HEAPU32[a[c]>>2],u=Dn.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let d=Dn.HEAPU32[a[c]>>2],f=Dn.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let p=l[c];n.setAttribute("position",new it(u,3)),n.setAttribute("normal",new it(f,3));let m=Dn.HEAPF32.subarray((s>>2)+5,(s>>2)+5+6);return n.boundingSphere===null&&(n.boundingSphere=new Oo),n.boundingSphere.center.set(m[0],m[1],m[2]),n.boundingSphere.radius=(m[3]**2+m[4]**2+m[5]**2)**.5,n.userData.parameters={width:m[3]*2,height:m[4]*2,depth:m[5]*2},Dn.free_mesh_data(s),p}function Cmt(t,e,n){if(Dn===void 0)return-1;let i,r,s;if(e&&t.userData.positions!==void 0){let m=t.userData;s=m.verticesPerFace.length,i=m.positions,r=Array(m.verticesPerFace.reduce((g,v)=>g+v,0)+s);for(let g=0,v=0,y=0;g<m.verticesPerFace.length;g++){r[y++]=m.verticesPerFace[g];for(let x=0;x<m.verticesPerFace[g];x++)r[y++]=m.indices[v++]}}else({positions:i,faceIndices:r,nFaces:s}=Amt(t,e,n));let o=i.length,a=r.length,l=i.length,c=r.length,h=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,u=l*Float32Array.BYTES_PER_ELEMENT,d=Dn._malloc(h),f=new Float32Array(Dn.HEAPF32.buffer,d,l),p=new Uint32Array(Dn.HEAPU32.buffer,d+u,c);return f.set(i,0),p.set(r,0),Dn.get_csg_mesh(d,o,d+u,a,s)}function Tmt(t,e){Dn.transform_csg_mesh(t,e.elements)}function Pmt(t){Dn.free_csg_mesh(t)}var Dmt={ConeGeometry:hpt,CubeGeometry:dpt,CylinderGeometry:upt,DodecahedronGeometry:ppt,EllipseGeometry:n$,HelixGeometry:Wpt,IcosahedronGeometry:$pt,LatheGeometry:qpt,NonParametricGeometry:emt,PolygonGeometry:M1e,PyramidGeometry:tmt,RectangleGeometry:E1e,SphereGeometry:rmt,PlaneGeometry:smt,BackdropGeometry:omt,StarGeometry:C1e,TextFrameGeometry:lmt,TorusGeometry:cmt,TorusKnotGeometry:hmt,TriangleGeometry:dmt,PathGeometry:mmt,VectorGeometry:ny},Xie=t=>Dmt[t.type].create(t);function AS(t){return t!==null&&"booleanOp"in t}var I1e=class extends l1e(Lr){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new at}updateVisible(){super.updateVisible(),this.visible=!AS(this.parent)&&this.visible,AS(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Gp.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),AS(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof I1e&&(e.freeBooleanPointer(),AS(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e){let n=super.updateTransformState(e);return n&&AS(this.parent)&&this.invalidateDownstreamBooleanData(!0),n}},jP=new ao;function s$(t,e=0,n=t.count,i,r){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,h=-1/0;for(let u=e;u<n;u++){let d=t.getX(u),f=t.getY(u),p=t.getZ(u);d<s&&(s=d),f<o&&(o=f),p<a&&(a=p),d>l&&(l=d),f>c&&(c=f),p>h&&(h=p)}jP.min.set(s,o,a),jP.max.set(l,c,h),jP.getCenter(i),jP.getSize(r).multiplyScalar(.5)}var Omt=new yt,Lmt=new ls,Wm=class extends I1e{constructor(t,e){super(Omt,Lmt),this.super_Entity(t,e)}updateState(t,e){this.updateState_Entity(t,e)}updateEntityBoxSize(t,e){let n=this.geometry.getAttribute("position");n!==void 0?s$(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,t,e):super.updateEntityBoxSize(t,e)}},Yie=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},cg=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=zi.generateUUID(),this.type=e,this.name=""}analyze(e,n){n=n??{},e.analyzing=!0,this.build(e.addFlow(n.slot,n.cache,n.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,n,i){return i=i??{},this.analyze(e,i),this.flow(e,n,i)}flow(e,n,i){i=i??{},e.addFlow(i.slot,i.cache,i.context);let r={result:this.build(e,n),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),r}build(e,n,i){n=n??this.getType(e,n);let r=e.getNodeData(i??this);return e.analyzing&&this.appendDepsNode(e,r,n),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,n,i)}updateFrame(e){}generateReadonly(e,n,i,r,s,o){return""}generate(e,n,i,r,s){return""}parse(e,n,i,r){}appendDepsNode(e,n,i){n.deps=(n.deps||0)+1;let r=e.getTypeLength(i);(r>(n.outputMax||0)||this.getType(e,i))&&(n.outputMax=r,n.output=i)}setName(e){this.name=e}getName(){return this.name}getType(e,n){return n==="sampler2D"||n==="samplerCube"?n:this.type}getHash(){let e="{",n,i;for(n in this)i=this[n],i instanceof cg&&(e+='"'+n+'":'+i.getHash()+",");if(this.hashProperties)for(let r=0;r<this.hashProperties.length;r++)n=this.hashProperties[r],i=this[n],e+='"'+n+'":"'+String(i)+'",';return e+='"id":"'+this.uuid+'"}',e}},Rmt=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,n,i){i=i!==void 0?i:!0,this.keywords[e]={callback:n,cache:i}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,n){return this.keywords[e].callback(n)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},ma=new Rmt,Ti=class extends cg{constructor(e,n){super(e),this.scope="",n=n??{},this.shared=n.shared!==void 0?n.shared:!0,this.unique=n.unique!==void 0?n.unique:!1}build(e,n,i,r){if(n=n??this.getType(e),this.getShared(e,n)){let s=this.getUnique(e,n);s&&this.uuid===void 0&&(this.uuid=zi.generateUUID()),i=e.getUUID(i??this.getUUID(),!s);let o=e.getNodeData(i),a=o.output||this.getType(e);if(e.analyzing)return(o.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,o,n),this.generate(e,n,i)):super.build(e,n,i);if(s)return o.name=o.name||super.build(e,n,i),o.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||o.deps===1))return super.build(e,n,i);i=this.getUUID(!1);let l=this.getTemp(e,i);if(l)return e.format(l,a,n);{l=super.generate(e,n,i,o.output,r);let c=this.generate(e,a,i);return e.addNodeCode(l+" = "+c+";"),e.format(l,a,n)}}return super.build(e,n,i)}getShared(e,n){return n!=="sampler2D"&&n!=="samplerCube"&&this.shared}getUnique(e,n){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let n=this.uuid;return typeof this.scope=="string"&&(n=this.scope+"-"+n),n}getTemp(e,n){n=n||this.uuid;let i=e.getVars()[n];return i?i.name:void 0}generate(e,n,i,r,s){return this.getShared(e,n)||console.error("TempNode is not shared"),i=i??this.uuid,e.getTempVar(i,r??this.getType(e),s,this.getLabel()).name}},Pl=class extends Ti{constructor(t,e){e=e??{},e.shared=e.shared!==void 0?e.shared:!1,super(t,e),this.readonly=!1}setReadonly(t){return this.readonly=t,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(t,e,n,i,r,s){n=t.getUUID(n??this.getUUID()),i=i??this.getType(t);let o=t.getNodeData(n);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(t,e,n,i,r,s):t.isShader("vertex")?(o.vertex||(o.vertex=t.createVertexUniform(i,this,r,s,this.getLabel())),t.format(o.vertex.name,i,e)):(o.fragment||(o.fragment=t.createFragmentUniform(i,this,r,s,this.getLabel())),t.format(o.fragment.name,i,e))}},ac=class extends Pl{constructor(e=0,n){super("v2"),this.nodeType="Vector2",this.value=e instanceof Me?e:new Me(e,n)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,n,i,r,s,o){return e.format("vec2("+this.value.x+", "+this.value.y+")",r,n)}},ec=class extends Pl{constructor(e=0,n,i){super("v3"),this.nodeType="Vector3",this.value=e instanceof q?e:new q(e,n,i)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,n,i,r,s,o){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",r,n)}},Lu=class extends nt{constructor(e,n,i,r){super(e,n,i),this.isColorA=!0,this.a=r}setRGBA(e,n,i,r){super.setRGB(e,n,i),this.a=r}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}setStyle(e,n="srgb"){let i;if(e==="transparent")return this.setRGBA(0,0,0,0),this;if(i=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let r,s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.a=s==="rgba"?parseFloat(r[4]):1,super.setStyle(e,n);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.a=s==="hsla"?parseFloat(r[4]):1,super.setStyle(e,n);break}}return super.setStyle(e,n)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},y0=class extends Pl{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof Lu?e:new Lu(e.r,e.g,e.b,e.a)}generateReadonly(e,n,i,r,s,o){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",r,n)}},Imt=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,Kie=/[a-z_0-9]+/gi,Bt=class extends Ti{constructor(e,n,i,r,s){super(s),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=s===void 0,this.isInterface=!1,this.parse(e,n,i,r)}getShared(e,n){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let n=this.inputs.length;for(;n--;)if(this.inputs[n].name===e)return this.inputs[n]}}getIncludeByName(e){if(this.includes){let n=this.includes.length;for(;n--;)if(this.includes[n].name===e)return this.includes[n]}}generate(e,n,i,r,s){let o,a=0,l=this.src;if(this.includes)for(let h=0;h<this.includes.length;h++)e.include(this.includes[h],this);for(let h in this.extensions)e.extensions[h]=!0;let c=[];for(;o=Kie.exec(this.src);)c.push(o);for(let h=0;h<c.length;h++){let u=c[h],d=u[0],f=this.isMethod?!this.getInputByName(d):!0,p=d;if(this.keywords[d]||this.useKeywords&&f&&ma.containsKeyword(d)){let m=this.keywords[d];if(!m){let g=ma.getKeywordData(d);g.cache&&(m=e.keywords[d]),m=m||ma.getKeyword(d,e),g.cache&&(e.keywords[d]=m)}p=m.build(e)}d!==p&&l[u.index+a-1]!=="."&&(l=l.substring(0,u.index+a)+p+l.substring(u.index+d.length+a),a+=p.length-d.length),this.getIncludeByName(p)===void 0&&ma.contains(p)&&e.include(ma.get(p))}return n==="source"?l:this.isMethod?(this.isInterface||e.include(this,void 0,l),this.name):e.format("( "+l+" )",this.getType(e),n)}parse(e,n,i,r){if(this.src=e||"",this.includes=n??[],this.extensions=i??{},this.keywords=r??{},this.isMethod){let s=Imt.exec(this.src);if(this.inputs=[],s&&s.length==4){this.type=s[1],this.name=s[2];let o=s[3].match(Kie);if(o){let a=0;for(;a<o.length;){let l=o[a++],c;l==="in"||l==="out"||l==="inout"?c=o[a++]:(c=l,l="");let h=o[a++];this.inputs.push({name:h,type:c,qualifier:l})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},Bmt=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,B1e=class extends Ti{constructor(e="",n){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||B1e.PI,void 0,void 0,void 0,n)}getType(e){return e.getTypeByFormat(this.type)}parse(e,n,i,r,s){this.src=e||"";let o,a,l="",c=Bmt.exec(e);this.useDefine=s??this.src.charAt(0)==="#",c&&c.length>1?(a=c[1],o=c[2],l=c[3]):(o=this.src,a="f"),this.name=o,this.type=a,this.value=l}build(e,n){if(n==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),n)}generate(e,n,i,r,s){return e.format(this.name,this.getType(e),n)}},ui=B1e;ui.PI="PI",ui.PI2="PI2",ui.RECIPROCAL_PI="RECIPROCAL_PI",ui.RECIPROCAL_PI2="RECIPROCAL_PI2",ui.LOG2="LOG2",ui.EPSILON="EPSILON";var kmt=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),Fmt=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),k1e=class extends Ti{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let n=this.inputs.length;for(;n--;)if(this.inputs[n].name===e)return this.inputs[n]}generate(e,n,i,r,s){return n==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),n)}parse(e=""){this.src=e,this.inputs=[];let n=kmt.exec(e);if(n){let i=n[2],r;for(;r=Fmt.exec(i);)this.inputs.push({type:r[1],name:r[2]});this.name=n[1]}else this.name="";this.type=this.name}},o$=class extends Ti{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,n){e.requires.uv[this.index]=!0;let i=this.index>0?this.index+1:"",r=e.isShader("vertex")?"uv"+i:"vUv"+i;return e.format(r,this.getType(e),n)}};ma.addKeyword("uv",function(){return new o$});ma.addKeyword("uv2",function(){return new o$(1)});var F1=class extends Ti{constructor(e,n){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=n??F1.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Ra:return["Linear"];case xn:return["sRGB"];default:return[]}}generate(e,n){var a;let i=this.input.build(e,"v4"),r=this.getType(e),s=F1.Nodes[this.method],o=e.include(s);if(o===F1.LINEAR_TO_LINEAR)return e.format(i,r,n);if(((a=s.inputs)==null?void 0:a.length)===2){let l=this.factor.build(e,"f");return e.format(o+"( "+i+", "+l+" )",r,n)}else return e.format(o+"( "+i+" )",r,n)}fromEncoding(e){let n=F1.getEncodingComponents(e);this.method="LinearTo"+n[0],this.factor=n[1]}fromDecoding(e){let n=F1.getEncodingComponents(e);this.method=n[0]+"ToLinear",this.factor=n[1]}},Fh=F1;Fh.Nodes={LinearToLinear:new Bt(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new Bt(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new Bt(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},Fh.LINEAR_TO_LINEAR="LinearToLinear",Fh.SRGB_TO_LINEAR="sRGBToLinear",Fh.LINEAR_TO_SRGB="LinearTosRGB";var Xi=class extends Bt{constructor(t="",e,n,i,r){super(t,r,i,n,e),this.nodeType="Expression"}},lm=class extends Pl{constructor(e=new bi,n,i,r){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=n??new o$,this.bias=i,this.project=r!==void 0?r:!1}getTexture(e,n){return super.generate(e,n,this.value.uuid,"t")}generate(e,n){if(n==="sampler2D")return this.getTexture(e,n);let i=this.getTexture(e,n),r=this.uv.build(e,this.project?"v4":"v2"),s=this.bias?this.bias.build(e,"f"):void 0;s===void 0&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f"));let o,a;this.project?o="texture2DProj":o=s?"tex2DBias":"tex2D",s?a=o+"( "+i+", "+r+", "+s+" )":a=o+"( "+i+", "+r+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},c=this.getType(e);return e.addContext(l),this.colorSpace=this.colorSpace??new Fh(new Xi("",c)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,c),e.removeContext(),e.format(a,c,n)}},Dt=class extends Pl{constructor(t){super("f"),this.nodeType="Float",this.value=t??0}generateReadonly(t,e,n,i,r,s){return t.format(this.value+(this.value%1?"":".0"),i,e)}},Jie=class extends Ti{constructor(e,n){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=n??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,n,i,r,s){r=this.getType(e);let o=this.value,a=o.build(e,n)+"( ",l=[];if(o.inputs){for(let c=0;c<o.inputs.length;c++){let h=o.inputs[c],u=this.inputs[c]||this.inputs[h.name];l.push(u.build(e,e.getTypeByFormat(h.type)))}a+=l.join(", ")+" )"}return e.format(a,r,n)}},F1e=class extends Ti{constructor(e,n,i=F1e.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=n,this.op=i}getType(e){let n=this.a.getType(e),i=this.b.getType(e);return e.isTypeMatrix(n)?"v4":e.getTypeLength(i)>e.getTypeLength(n)?i:n}generate(e,n){let i=this.getType(e);this.type=i;let r=this.a.build(e,i),s=this.b.build(e,i);return e.format("( "+r+" "+this.op+" "+s+" )",i,n)}},Nh=F1e;Nh.ADD="+",Nh.SUB="-",Nh.MUL="*",Nh.DIV="/";var li=class extends Ti{constructor(e,n=li.ABS,i,r){super(),this.nodeType="Math",this.a=e,typeof n!="string"?this.b=n:r=n,typeof i!="string"?this.c=i:r=i,this.method=r,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case li.MIX:case li.CLAMP:case li.REFRACT:case li.SMOOTHSTEP:case li.FACEFORWARD:return 3;case li.MIN:case li.MAX:case li.MOD:case li.STEP:case li.REFLECT:case li.DISTANCE:case li.DOT:case li.CROSS:case li.POW:return 2;default:return 1}}getInputType(e){let n=e.getTypeLength(this.a.getType(e)),i=this.b?e.getTypeLength(this.b.getType(e)):0,r=this.c?e.getTypeLength(this.c.getType(e)):0;return n>i&&n>r?this.a.getType(e):i>r?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case li.LENGTH:case li.DISTANCE:case li.DOT:return"f";case li.CROSS:return"v3"}return this.getInputType(e)}generate(e,n){let i,r,s,o=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,l=this.c?e.getTypeLength(this.c.getType(e)):0,c=this.getInputType(e),h=this.getType(e);switch(this.type=h,this.method){case li.NEGATE:return e.format("( -"+this.a.build(e,c)+" )",c,n);case li.INVERT:return e.format("( 1.0 - "+this.a.build(e,c)+" )",c,n);case li.CROSS:i=this.a.build(e,"v3"),r=this.b.build(e,"v3");break;case li.STEP:i=this.a.build(e,o===1?"f":c),r=this.b.build(e,c);break;case li.MIN:case li.MAX:case li.MOD:i=this.a.build(e,c),r=this.b.build(e,a===1?"f":c);break;case li.REFRACT:i=this.a.build(e,c),r=this.b.build(e,c),s=this.c.build(e,"f");break;case li.MIX:i=this.a.build(e,c),r=this.b.build(e,c),s=this.c.build(e,l===1?"f":c);break;default:i=this.a.build(e,c),this.b&&(r=this.b.build(e,c)),this.c&&(s=this.c.build(e,c));break}let u=[];u.push(i),r&&u.push(r),s&&u.push(s);let d=this.getNumInputs(e);if(u.length!==d)throw Error(`Arguments not match used in "${this.method}". Require ${d}, currently ${u.length}.`);return e.format(this.method+"( "+u.join(", ")+" )",h,n)}},an=li;an.RAD="radians",an.DEG="degrees",an.EXP="exp",an.EXP2="exp2",an.LOG="log",an.LOG2="log2",an.SQRT="sqrt",an.INV_SQRT="inversesqrt",an.FLOOR="floor",an.CEIL="ceil",an.NORMALIZE="normalize",an.FRACT="fract",an.SATURATE="saturate",an.SIN="sin",an.COS="cos",an.TAN="tan",an.ASIN="asin",an.ACOS="acos",an.ARCTAN="atan",an.ABS="abs",an.SIGN="sign",an.LENGTH="length",an.NEGATE="negate",an.INVERT="invert",an.MIN="min",an.MAX="max",an.MOD="mod",an.STEP="step",an.REFLECT="reflect",an.DISTANCE="distance",an.DOT="dot",an.CROSS="cross",an.POW="pow",an.MIX="mix",an.CLAMP="clamp",an.REFRACT="refract",an.SMOOTHSTEP="smoothstep",an.FACEFORWARD="faceforward";var SA=class extends Ti{constructor(e,n,i){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=n,this.bias=i}bilinearCubeUV(e,n,i,r){let s=new Jie(SA.Nodes.bilinearCubeUV,[n,i,r]);this.colorSpaceTL=this.colorSpaceTL??new Fh(new Xi("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(s.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new Fh(new Xi("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(s.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new Fh(new Xi("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(s.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new Fh(new Xi("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(s.build(e)+".br");let o={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(o),this.colorSpaceTLExp=new Xi(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Xi(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Xi(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Xi(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let a=new Xi("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return a.keywords.cubeUV_TL=this.colorSpaceTLExp,a.keywords.cubeUV_TR=this.colorSpaceTRExp,a.keywords.cubeUV_BL=this.colorSpaceBLExp,a.keywords.cubeUV_BR=this.colorSpaceBRExp,a.keywords.cubeUV=s,a}generate(e,n){if(e.isShader("fragment")){let i=this.uv,r=this.bias||e.context.roughness,s=new Jie(SA.Nodes.roughnessToMip,[r]),o=new an(s,SA.Nodes.m0,SA.Nodes.cubeUV_maxMipLevel,an.CLAMP),a=new an(o,an.FLOOR),l=new an(o,an.FRACT),c=this.bilinearCubeUV(e,this.value,i,a),h=this.bilinearCubeUV(e,this.value,i,new Nh(a,new Dt(1).setReadonly(!0),Nh.ADD)),u=new an(c,h,l,an.MIX);return e.format(u.build(e),"v4",n)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),n)}},MH=SA;MH.Nodes=function(){let t=new k1e(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),e=new ui("float cubeUV_maxMipLevel 8.0",!0),n=new ui("float cubeUV_minMipLevel 4.0",!0),i=new ui("float cubeUV_maxTileSize 256.0",!0),r=new ui("float cubeUV_minTileSize 16.0",!0),s=new Bt(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let o=new Bt(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);o.useKeywords=!1;let a=new Bt(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[t,s,o,e,n,i,r]);a.useKeywords=!1;let l=new ui("float r0 1.0",!0),c=new ui("float v0 0.339",!0),h=new ui("float m0 -2.0",!0),u=new ui("float r1 0.8",!0),d=new ui("float v1 0.276",!0),f=new ui("float m1 -1.0",!0),p=new ui("float r4 0.4",!0),m=new ui("float v4 0.046",!0),g=new ui("float m4 2.0",!0),v=new ui("float r5 0.305",!0),y=new ui("float v5 0.016",!0),x=new ui("float m5 3.0",!0),b=new ui("float r6 0.21",!0),S=new ui("float v6 0.0038",!0),A=new ui("float m6 4.0",!0),E=[l,c,h,u,d,f,p,m,g,v,y,x,b,S,A],M=new Bt(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,E);return{bilinearCubeUV:a,roughnessToMip:M,m0:h,cubeUV_maxMipLevel:e}}();var N1=class extends Ti{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??N1.VIEW}getShared(){return this.scope===N1.WORLD}build(e,n,i,r){let s=e.context[this.scope+"Normal"];return s?s.build(e,n,i,r):super.build(e,n,i)}generate(e,n,i,r,s){let o;switch(this.scope){case N1.VIEW:e.isShader("vertex")?o="transformedNormal":o="geometryNormal";break;case N1.LOCAL:e.isShader("vertex")?o="objectNormal":(e.requires.normal=!0,o="vObjectNormal");break;case N1.WORLD:e.isShader("vertex")?o="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,o="vWNormal");break}return e.format(o,this.getType(e),n)}},wa=N1;wa.LOCAL="local",wa.WORLD="world",wa.VIEW="view",wa.NORMAL="normal";ma.addKeyword("viewNormal",function(){return new wa(wa.VIEW)});ma.addKeyword("localNormal",function(){return new wa(wa.NORMAL)});ma.addKeyword("worldNormal",function(){return new wa(wa.WORLD)});var tf=class extends Ti{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??tf.LOCAL}getType(){switch(this.scope){case tf.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case tf.LOCAL:case tf.WORLD:return!1}return!0}generate(e,n,i,r,s){let o;switch(this.scope){case tf.LOCAL:e.isShader("vertex")?o="transformed":(e.requires.position=!0,o="vPosition");break;case tf.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,o="vWPosition";break;case tf.VIEW:o=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case tf.PROJECTION:o=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(o,this.getType(),n)}},yu=tf;yu.LOCAL="local",yu.WORLD="world",yu.VIEW="view",yu.PROJECTION="projection";ma.addKeyword("position",function(){return new yu});ma.addKeyword("worldPosition",function(){return new yu(yu.WORLD)});ma.addKeyword("viewPosition",function(){return new yu(yu.VIEW)});var wh=class extends Ti{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??wh.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case wh.SPHERE:return"v2"}return this.type}generate(e,n){let i=this.getUnique(e);if(e.isShader("fragment")){let r;switch(this.scope){case wh.VECTOR:{let s=new wa(wa.VIEW),o=e.context.roughness,a=s.build(e,"v3"),l=new yu(yu.VIEW).build(e,"v3"),c=o?o.build(e,"f"):void 0,h=`reflect( -normalize( ${l} ), ${a} )`;c&&(h=`normalize( mix( ${h}, ${a}, ${c} * ${c} ) )`);let u=`inverseTransformDirection( ${h}, viewMatrix )`;i?(e.addNodeCode(`vec3 reflectVec = ${u};`),r="reflectVec"):r=u;break}case wh.CUBE:{let s=new wh(wh.VECTOR).build(e,"v3"),o="vec3( -"+s+".x, "+s+".yz )";i?(e.addNodeCode(`vec3 reflectCubeVec = ${o};`),r="reflectCubeVec"):r=o;break}case wh.SPHERE:{let s="normalize( ( viewMatrix * vec4( "+new wh(wh.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";i?(e.addNodeCode(`vec2 reflectSphereVec = ${s};`),r="reflectSphereVec"):r=s;break}}return e.format(r,this.getType(),n)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,n)}},ab=wh;ab.CUBE="cube",ab.SPHERE="sphere",ab.VECTOR="vector";var Nmt=class extends Ti{constructor(e=new lm,n,i){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new MH(this.value,n??new ab(ab.VECTOR),i),this.irradianceNode=new MH(this.value,new wa(wa.WORLD),new Dt(1).setReadonly(!0))}generate(e,n){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,n)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),n))}},zmt=class extends Pl{constructor(e=new Sw,n,i){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=n??new ab,this.bias=i}getTexture(e,n){return super.generate(e,n,this.value.uuid,"tc")}generate(e,n){var c;if(n==="samplerCube")return this.getTexture(e,n);let i=this.getTexture(e,n),r=(c=this.uv)==null?void 0:c.build(e,"v3"),s=this.bias?this.bias.build(e,"f"):void 0;s===void 0&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f"));let o;s?o="texCubeBias( "+i+", "+r+", "+s+" )":o="texCube( "+i+", "+r+" )";let a={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(a),this.colorSpace=this.colorSpace??new Fh(new Xi("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,l),e.removeContext(),e.format(o,l,n)}},Zie=["x","y","z","w"],Umt=["float","vec2","vec3","vec4"],Gmt={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},Hmt={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},jmt=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function e(n,i){return n.deps.length-i.deps.length}return function(n,i){let r=this.getIncludes(n,i);if(!r)return"";let s="";r=r.sort(e);for(let o=0;o<r.length;o++)r[o].src&&(s+=r[o].src+`
`);return s}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,n){this.buildShader("vertex",e),this.buildShader("fragment",n);for(let i=0;i<this.requires.uv.length;i++)if(this.requires.uv[i]){let r=i>0?i+1:"";this.addVaryCode("varying vec2 vUv"+r+";"),i>0&&this.addVertexParsCode("attribute vec2 uv"+r+";"),this.addVertexFinalCode("vUv"+r+" = uv"+r+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}buildShader(e,n){this.resultCode[e]=n.build(this.setShader(e),"v4")}setMaterial(e,n){return this.defines={},this}addFlow(e,n,i){return this.addSlot(e).addCache(n).addContext(i)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,n){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${n} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,n){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${n} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,n){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${n} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,n){this.code[n??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,n){this.nodeCode[n??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let n=this.nodeCode[e];return this.nodeCode[e]="",n}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,n){this.finalCode[n??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,n){this.parsCode[n??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,n){this.defines[e]=n===void 0?1:n}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,n,i,r="varying",s="V",o=""){let a=this.getVars(r),l=a[e];if(!l){let c=a.length;l={name:i||"node"+s+c+(o?"_"+o:""),type:n},a.push(l),a[e]=l}return l}getTempVar(e,n,i,r){return this.getVar(e,n,i,this.shader,"T",r)}getAttribute(e,n){if(!this.attributes[e]){let i=this.getVar(e,n);this.addVertexParsCode("attribute "+n+" "+e+";"),this.addVertexFinalCode(i.name+" = "+e+";"),this.attributes[e]={varying:i,name:e,type:n}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,n){n=n??"";let i="";for(let r=0,s=e.length;r<s;++r){let o=e[r],a=o.type,l=o.name,c=o.size,h=this.getFormatByType(a);if(h===void 0)throw new Error("Node pars "+h+" not found.");h.includes("[]")?i+=n+" "+h.substring(0,h.length-2)+" "+l+`[${c}];
`:i+=n+" "+h+" "+l+`;
`}return i}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let n=e instanceof cg?e.uuid:e;return this.nodeData[n]=this.nodeData[n]||{}}createUniform(e,n,i,r,s,o){if(n.includes("[]")){let a=this.inputs.arrayUniforms,l=a.list.length,c=new Yie({type:n,size:i.size,name:r||"nodeUA"+l+(o?"_"+o:""),node:i,needsUpdate:s});return a.list.push(c),a[e].push(c),a[e][c.name]=c,this.uniforms[c.name]=c,c}else{let a=this.inputs.uniforms,l=a.list.length,c=new Yie({type:n,name:r||"nodeU"+l+(o?"_"+o:""),node:i,needsUpdate:s});return a.list.push(c),a[e].push(c),a[e][c.name]=c,this.uniforms[c.name]=c,c}}createVertexUniform(e,n,i,r,s){return this.createUniform("vertex",e,n,i,r,s)}createFragmentUniform(e,n,i,r,s){return this.createUniform("fragment",e,n,i,r,s)}include(e,n,i){var o;let r;if(e=typeof e=="string"?ma.get(e):e,this.context.include===!1)return e.name;e instanceof Bt?r=this.includes.functions:e instanceof ui?r=this.includes.consts:e instanceof k1e&&(r=this.includes.structs);let s=r[this.shader]=r[this.shader]||[];if(e){let a=s[e.name];if(a||(a=s[e.name]={node:e,deps:[]},s.push(a),a.src=e.build(this,"source")),e instanceof Bt&&n&&s[n.name]&&s[n.name].deps.indexOf(e)===-1&&(s[n.name].deps.push(e),(o=e.includes)==null?void 0:o.length)){let l=0;do this.include(e.includes[l++],n);while(l<e.includes.length)}return i&&(a.src=i),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,n){return this.includes[e][n||this.shader]}getConstructorFromLength(e){return Umt[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let n=0;n<arguments.length;n++){let i=e[n];if(i!=null&&i.isNode)return i}}resolve(...e){for(let n=0;n<arguments.length;n++){let i=e[n];if(i!==void 0){if(i.isNode)return i;if(i.isTexture)switch(i.mapping){case ed:case Ff:return new zmt(i);case Gv:return new Nmt(new lm(i));default:return new lm(i)}else{if(i.isVector2)return new ac(i);if(i.isVector3)return new ec(i);if(i.isVector4)return new y0(i)}}}}format(e,n,i){switch(this.colorToVector(i+" <- "+n)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return Gmt[e]||e}getFormatByType(e){return Hmt[e]||e}getUUID(e,n){return n=n!==void 0?n:!0,n&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return Zie[e]}getIndexByElement(e){return Zie.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let n in e)this.defines[n]=e[n];return this.defines}mergeUniform(e){for(let n in e)this.uniforms[n]=e[n];return this.uniforms}getTextureEncodingFromMap(e){let n;return e?e.isTexture&&(n=e.encoding):n=Ra,n===Ra&&this.context.gamma&&(n=xn),n}},Pr=class extends Pl{constructor(e=0,n,i,r){super("c"),this.nodeType="Color",this.value=e instanceof Lu?e:new Lu(e||0,n,i,r)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,n,i,r,s,o){i=e.getUUID(i??this.getUUID()),r=r??this.getType(e);let a=e.getNodeData(i),l=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let c=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${c};`)}return l?this.generateReadonly(e,n,i,r,s,o):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(r,this,s,o,this.getLabel())),e.format(a.vertex.name,r,n)):(a.fragment||(a.fragment=e.createFragmentUniform(r,this,s,o,this.getLabel())),e.format(a.fragment.name,r,n))}generateReadonly(e,n,i,r,s,o){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",r,n)}},vi=class extends Pl{constructor(t){super("i"),this.nodeType="Int",this.value=Math.floor(t??0)}generateReadonly(t,e,n,i,r,s){return t.format(this.value.toString(),i,e)}},N1e=class extends cg{constructor(){super("basic"),this.nodeType="Basic",this.color=new Pr(5526619),this.shadingAlpha=new Dt(1),this.shadingBlend=new vi(0)}get category(){return"phong"}generate(e){let n;if(e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(Hv.merge([ct.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),n=r.join(`
`)}else{this.color===void 0&&(this.color=new Pr(5526619)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let i=this.color.flow(e,"c",{slot:"color"}),r=this.alpha?this.alpha.flow(e,"f"):void 0,s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=r!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let o=["#include <normal_fragment_begin>",i.code];r&&o.push(r.code,"#ifdef ALPHATEST"," if ( "+r.result+" <= ALPHATEST ) discard;","#endif"),s?o.push(s.code,`vec3 outgoingLight = ${i.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`):o.push(`vec3 finalColor = ${i.result};`),r?o.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${r.result} );`):o.push("gl_FragColor = vec4("+i.result+", 1.0 );"),o.push("#include <fog_fragment>","#include <dithering_fragment>"),n=o.join(`
`)}return n}},o0=class extends Pl{constructor(e=1,n){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(n)?n:typeof n=="number"?new Array(e).fill(n):new Array(e).fill(0)}},lc={normalRenderTarget:new lm,normalRenderTargetDepth:new lm,transmissionRenderTarget:new lm,transmissionSize:new ac(2048,2048),transmissionRenderTargetDepth:new lm,pixelRatioNode:new Dt(1),resolution:new ac,penumbraSize:new o0(5,.5)};for(let t of Object.values(lc))t.isRenderGlobal=!0;var Vmt=class extends cg{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new Pr(5526619),this.emissive=new Pr(0),this.emissiveIntensity=new Dt(1),this.shadingAlpha=new Dt(1),this.shadingBlend=new vi(0)}get category(){return"lambert"}build(e){let n;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(Hv.merge([ct.fog,ct.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),n=r.join(`
`)}else{e.mergeUniform({penumbraSize:lc.penumbraSize}),this.color===void 0&&(this.color=new Pr(5526619)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.emissive.flow(e,"c",{slot:"emissive"}),s=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["uniform float penumbraSize[5];","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];h.push(i.code,"vec3 diffuseColor = "+i.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),c&&h.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),h.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),r&&h.push(r.code,"reflectedLight.directDiffuse += "+r.result+" * "+s.result+";"),h.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result}, ${a.result} );
				}
				`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),n=h.join(`
`)}return n}},Wmt=class extends cg{constructor(){super("phong"),this.nodeType="Phong",this.color=new Pr(5526619),this.specular=new Pr(1118481),this.shininess=new Dt(30),this.shadingAlpha=new Dt(1),this.shadingBlend=new vi(0)}get category(){return"phong"}build(e){let n;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(Hv.merge([ct.fog,ct.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),n=r.join(`
`)}else{e.mergeUniform({penumbraSize:lc.penumbraSize}),this.color===void 0&&(this.color=new Pr(5526619)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),s=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];h.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",r.code,"	vec3 specular = "+r.result+";",s.code,"	float shininess = max( 0.0001, "+s.result+" );","	float specularStrength = 1.0;"),c&&h.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;"),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result}, ${a.result} );
				}
				`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),n=h.join(`
`)}return n}},$mt=class extends cg{constructor(){super("standard"),this.nodeType="Standard",this.color=new Pr(5526619),this.roughness=new Dt(.3),this.metalness=new Dt(0),this.reflectivity=new Dt(.5),this.shadingAlpha=new Dt(1),this.shadingBlend=new vi(0)}get category(){return"physical"}build(e){let n;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(Hv.merge([ct.fog,ct.lights])),ct.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),n=r.join(`
`)}else{e.mergeUniform({penumbraSize:lc.penumbraSize});let i={gamma:!0};this.color===void 0&&(this.color=new Pr(5526619)),this.color.analyze(e,{slot:"color",context:i}),this.roughness.analyze(e),this.metalness.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let r=this.color.flow(e,"c",{slot:"color",context:i}),s=this.roughness.flow(e,"f"),o=this.metalness.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),c=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=h!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let d=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];d.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",s.code,"	float roughnessFactor = "+s.result+";",o.code,"	float metalnessFactor = "+o.result+";"),h&&d.push(h.code,"#ifdef ALPHATEST","	if ( "+h.result+" <= ALPHATEST ) discard;","#endif"),d.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),d.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),u?d.push(u.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+u.result+" ) ), diffuseColor, metalnessFactor );"):d.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),d.push("#include <lights_fragment_begin>"),d.push("#include <lights_fragment_end>"),d.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),d.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result}, ${l.result} );
				}
				`),c&&d.push(c.code,`outgoingLight = spe_blend(outgoingLight, ${c.result}, 1.0, SPE_BLENDING_NORMAL);`),h?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${h.result} );`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),n=d.join(`
`)}return n}},qmt=class extends cg{constructor(){super("toon"),this.nodeType="Toon",this.color=new Pr(5526619),this.specular=new Pr(1118481),this.shininess=new Dt(30),this.shadingAlpha=new Dt(1),this.shadingBlend=new vi(0)}get category(){return"toon"}build(e){let n;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(Hv.merge([ct.fog,ct.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),n=r.join(`
`)}else{e.mergeUniform({penumbraSize:lc.penumbraSize}),this.color===void 0&&(this.color=new Pr(5526619)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),s=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["uniform float penumbraSize[5];","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];h.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"	vec3 specular = "+r.result+";",s.code,"	float shininess = max( 0.0001, "+s.result+" );","	float specularStrength = 1.0;"),c&&h.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result}, ${a.result} );
				}
				`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),n=h.join(`
`)}return n}},MS=class extends Pl{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,n,i,r){return e.format(this.value?"true":"false",r,n)}},z1e=class extends Pl{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new Wr}generateReadonly(e,n,i,r,s,o){return e.format("mat3("+this.value.elements.join(", ")+")",r,n)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},a0=class extends Pl{constructor(e=1,n){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(n)?n:n instanceof sn?new Array(e).fill(n):new Array(e).fill(new sn(0))}},a$=(t=>(t.SIMPLEX="simplex3d",t.SIMPLEX_FRACTAL="simplex3dFractal",t.ASHIMA="simplexAshima",t.FBM="fbm",t.PERLIN="perlin",t))(a$||{}),wc=function(){let t=new Bt(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),e=new Bt(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[t]);e.keywords.F3=new ui("float F3 0.3333333"),e.keywords.G3=new ui("float G3 0.1666667");let n=new Bt(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[e]),i=new Bt("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),r=new Bt("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new Bt(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[i,r]),o=new Bt("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),a=new Bt("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),l=new Bt(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[a]),c=new Bt(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);c.keywords.NUM_OCTAVES=new ui("int NUM_OCTAVES 5");let h=new Bt("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),u=new Bt(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[i,r,h]);return{simplex:e,simplexFractal:n,simplexAshima:s,fbm:c,perlin:u}}(),U1e=class extends Ti{constructor(e,n,i,r,s,o,a,l,c,h,u,d){super("v3"),this.nodeType="Noise",this.scale=e,this.size=n,this.move=i,this.fA=r,this.fB=s,this.distortion=o,this.colorA=a,this.colorB=l,this.colorC=c,this.colorD=h,this.alpha=u,this.noiseType=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,n,i,r,s){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let o=Object.values(a$)[this.noiseType.value],a=new Bt(`vec3 ${o}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {
                vec3 st = position / size;
				st /= scale;
				vec3 q = vec3(${o}(st),
							  ${o}(st + vec3(1.0)),
							  ${o}(st + vec3(1.0)));
				vec3 r = vec3(${o}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
							  ${o}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
							  ${o}(st * q));
				float f = ${o}(st + r);
				vec4 color;
				color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
				color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
				color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));

                float lalpha = alpha * color.a;
                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return clamp(color, 0.0, 1.0).rgb;
			}`,[wc.simplex,wc.simplexFractal,wc.simplexAshima,wc.fbm,wc.perlin]),l=e.include(a),c=[];return c.push(this.scale.build(e,"f")),c.push(this.size.build(e,"v3")),c.push(this.move.build(e,"f")),c.push(this.fA.build(e,"v2")),c.push(this.fB.build(e,"v2")),c.push(this.distortion.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.colorC.build(e,"v4")),c.push(this.colorD.build(e,"v4")),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),n)}};U1e.numOctaves=5;var G1e=class extends Ti{constructor(e,n,i,r,s,o,a){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=n,this.scale=i,this.intensity=r,this.factor=s,this.alpha=o,this.mode=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,n){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=e.include(G1e.Nodes.fresnel),r=[];return r.push(this.color.build(e,"c")),r.push(this.bias.build(e,"f")),r.push(this.scale.build(e,"f")),r.push(this.intensity.build(e,"f")),r.push(this.factor.build(e,"f")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),n)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),n)}},H1e=G1e;H1e.Nodes=function(){return{fresnel:new Bt(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {
				float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

				float lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;
				calpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;
				return color;
			}`)}}();var j1e=class extends Ti{constructor(e,n,i,r,s,o,a){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=n,this.wavelengths=i,this.noiseStrength=r,this.noiseScale=s,this.offset=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,n){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(j1e.Nodes.rainbow),r=[];return r.push(this.filmThickness.build(e,"f")),r.push(this.movement.build(e,"f")),r.push(this.wavelengths.build(e,"v3")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.offset.build(e,"v3")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),n)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),n)}},V1e=j1e;V1e.Nodes=function(){let t=new Bt(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[wc.simplex]);return{rainbow:new Bt(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {
                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);
                 float lalpha = alpha * rainbowContribution;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

                 return res;
             }`,[t])}}();var W1e=class extends Ti{constructor(e,n,i,r,s,o,a,l,c,h,u,d,f,p,m,g){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=n,this.outlineWidth=i,this.contourWidth=r,this.contourThreshold=s,this.outlineThreshold=o,this.contourFrequency=a,this.outlineSmoothing=l,this.contourDirection=c,this.positionalLines=h,this.compensation=u,this.resolution=d,this.normalMap=f,this.depthMap=p,this.pixelRatio=m,this.alpha=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,n){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.firstTime){let i=this.outlineWidth.build(e,"f"),r=this.resolution.build(e,"v2"),s=this.compensation.build(e,"b"),o=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(i,"uniform float"),e.addVertexParsVariable(r,"uniform vec2"),e.addVertexParsVariable(s,"uniform bool"),e.addVertexParsVariable(o,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float");let a=`g${this.uuid.toString().replace(/-/g,"")}`;e.addVertexFinalCode(`
                vID = randomColor.r;
                if (${s}) {
                    vec4 ${a}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${a}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    vec2 ${a}_offset = normalize(${a}_clipNormal.xy) / ${r} * (${i} / 2.0) * ${a}_clipPosition.w * 2.0 * ${o};
                    ${a}_clipPosition.xy += ${a}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${a}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(W1e.Nodes.outline),r=[];return r.push(this.outlineColor.build(e,"c")),r.push(this.contourColor.build(e,"c")),r.push(this.outlineWidth.build(e,"f")),r.push(this.contourWidth.build(e,"f")),r.push(this.contourThreshold.build(e,"f")),r.push(this.outlineThreshold.build(e,"f")),r.push(this.contourFrequency.build(e,"f")),r.push(this.outlineSmoothing.build(e,"f")),r.push(this.contourDirection.build(e,"v3")),r.push(this.positionalLines.build(e,"b")),r.push(this.resolution.build(e,"v2")),r.push(this.normalMap.getTexture(e,"t")),r.push(this.depthMap.getTexture(e,"t")),r.push(this.pixelRatio.build(e,"f")),r.push(this.compensation.build(e,"b")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+r.join(",")+")",this.getType(e),n)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},$1e=W1e;$1e.Nodes=function(){let t=new Bt(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 texelSize = (vec2(1.0) / resolution) * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -texelSize.x, -texelSize.y);
	uvSamples[1] = uv + vec2(0.0, -texelSize.y);
	uvSamples[2] = uv + vec2(  texelSize.x, -texelSize.y);
	uvSamples[3] = uv + vec2( -texelSize.x, 0.0);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  texelSize.x, 0.0);
	uvSamples[6] = uv + vec2( -texelSize.x, texelSize.y);
	uvSamples[7] = uv + vec2(0.0, texelSize.y);
	uvSamples[8] = uv + vec2(  texelSize.x, texelSize.y);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec4 sobel_edge_h = normalSamples[2] + (2.0*normalSamples[5]) + normalSamples[8] - (normalSamples[0] + (2.0*normalSamples[3]) + normalSamples[6]);
  	vec4 sobel_edge_v = normalSamples[0] + (2.0*normalSamples[1]) + normalSamples[2] - (normalSamples[6] + (2.0*normalSamples[7]) + normalSamples[8]);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new Bt(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return result;
             }`,[t])}}();var q1e=class extends Ti{constructor(e,n,i,r,s,o,a,l){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=n,this.roughness=i,this.transmissionSamplerSize=r,this.transmissionSamplerMap=s,this.transmissionDepthMap=o,this.aspectRatio=a,this.alpha=l,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,n){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",30),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let i=e.include(q1e.Nodes.transmission),r=[];return r.push(this.thickness.build(e,"f")),r.push(this.ior.build(e,"f")),r.push(this.roughness.build(e,"f")),r.push(this.transmissionSamplerSize.build(e,"v2")),r.push(this.transmissionSamplerMap.getTexture(e,"t")),r.push(this.transmissionDepthMap.getTexture(e,"t")),r.push(this.aspectRatio.build(e,"v2")),r.push("normal"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),n)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),n)}},X1e=q1e;X1e.Nodes=function(){let t=new Bt(`
            float gaussian(vec2 i) {
                const float sigma = float(NUM_SAMPLES) * .25;
                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );
            }`),e=new Bt(`
            vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

                const int LOD = 2;
                const int sLOD = 4; // tile size = 2^LOD

                vec3 O = vec3(0);
                float a = 0.0;
                const int s = NUM_SAMPLES/sLOD;
                for ( int i = 0; i < s*s; i++ ) {
                    int modulo = (i)-((i)/(s))*(s);
                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;
                    vec2 uv = U + (scale * aspectRatio) * d;
                    // What is the depth of the opaque object we're trying to sample
                    float opaqueDepth = unpackRGBAToDepth(texture2D(dm, uv));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    float gaussian = gaussian(d);
		            #ifdef TEXTURE_LOD_EXT
                    O += gaussian * texture2DLodEXT( sp, uv, lod).rgb;
                    #else
                    O += gaussian * textureLod( sp, uv, lod).rgb;
                    #endif
                    a += gaussian;
                }
                return O / a;
            }`,[t]),n=new Bt(`
            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        // Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		        // The thickness is specified in local space.
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),i=new Bt(`
float applyIorToRoughness( float roughness, float ior ) {
		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	} `),r=new Bt(`
vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
        float lod = applyIorToRoughness(roughness, ior);

        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
	}`,[i,e]),s=new Bt(`
vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
        vec3 refractedRayExit = position + transmissionRay;

        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
        vec2 refractionCoords = ndcPos.xy / ndcPos.w;
        refractionCoords += 1.0;
        refractionCoords /= 2.0;

        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
        unrefractedCoords += 1.0;
        unrefractedCoords /= 2.0;

        // Sample framebuffer to get pixel the refracted ray hits.
        return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    }`,[r,n]);return{transmission:new Bt(`
            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                float lalpha = alpha;

                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return transmission;
            }`,[s])}}();var AA=class extends Ti{constructor(e,n,i,r,s,o,a,l,c,h,u){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=n,this.near=i,this.far=r,this.isVector=s,this.isWorldSpace=o,this.origin=a,this.direction=l,this.colors=c,this.steps=h,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,n){let i=`g${this.uuid.toString().replace(/-/g,"")}`,r=new Bt(`vec3 ${i}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${i}_MAX_COLORS], float steps[${i}_MAX_COLORS], float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${i}_IS_VECTOR
                   #ifdef ${i}_LINEAR
                       #ifdef ${i}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${i}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${i}_SMOOTH
				for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a;
               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
               return color.rgb;
			}`,[AA.Nodes.vectorLinearWorldSpaceDepth,AA.Nodes.vectorLinearObjectSpaceDepth,AA.Nodes.vectorSphericalObjectSpaceDepth,AA.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${i}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${i}_SMOOTH`),this.isVector.value>.5&&e.define(`${i}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${i}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${i}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let s=e.include(r),o=[];return o.push(this.near.build(e,"f")),o.push(this.far.build(e,"f")),o.push(this.origin.build(e,"v3")),o.push(this.direction.build(e,"v3")),o.push(this.colors.build(e,"v4[]")),o.push(this.steps.build(e,"f[]")),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(s+"("+o.join(",")+")",this.getType(e),n)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),n)}},Y1e=AA;Y1e.Nodes=function(){let t=new Bt(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),e=new Bt(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),n=new Bt(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),i=new Bt(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:t,vectorLinearObjectSpaceDepth:e,vectorSphericalWorldSpaceDepth:n,vectorSphericalObjectSpaceDepth:i}}();var Qie=class extends Ti{constructor(e,n,i,r){super("v3"),this.nodeType="Blend",this.a=e,this.b=n,this.alpha=i,this.mode=r}generate(e,n){if(e.isShader("fragment")){let i=[];return i.push(this.a.build(e,"c")),i.push(this.b.build(e,"c")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),e.format("spe_blend("+i.join(",")+")",this.getType(e),n)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),n)}},EH=(t=>(t.NOISE="noise",t.MAP="map",t))(EH||{}),K1e=class extends Ti{constructor(e,n,i,r,s){super("v3"),this.displacementTypeIndex=new vi(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=n,Object.values(EH)[this.displacementTypeIndex.value]==="map"&&(this.mat=new z1e(this.movementOrTexture.value.matrix)),this.cropOrOffset=i,this.scale=r,this.noiseFunctionIndex=s}generate(e,n){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let i,r=[];switch(r.push("displaced_position"),r.push("displaced_normal"),Object.values(EH)[this.displacementTypeIndex.value]){case"map":{i=e.include(K1e.Nodes.map),r.push(this.movementOrTexture.getTexture(e,"t")),r.push("uv"),r.push(this.cropOrOffset.build(e,"f")),this.mat&&r.push(this.mat.build(e,"mat3"));break}case"noise":{let s=Object.values(a$)[this.noiseFunctionIndex.value],o=new Bt(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),a=new Bt(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {
							return p + n * ${s}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
						}`,[wc.simplex,wc.simplexFractal,wc.simplexAshima,wc.fbm,wc.perlin]),l=new Bt(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[a,o]);i=e.include(l),r.push(this.scale.build(e,"f")),r.push(this.cropOrOffset.build(e,"v3")),r.push(this.movementOrTexture.build(e,"f"));break}}return r.push(this.intensity.build(e,"f")),r.push("displaced_normal"),e.format(i+"("+r.join(",")+")",this.getType(e),n)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),n)}},J1e=K1e;J1e.Nodes=function(){let t=new Bt(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),e=new Bt(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new Bt(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[t,e])}}();var Z1e=class extends Ti{constructor(e,n,i,r,s,o,a,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=n,this.colors=i,this.steps=r,this.offset=s,this.morph=o,this.angle=a,this.alpha=l,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,n){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(Z1e.Nodes.gradient),r=[];return r.push(this.gradientType.build(e,"i")),r.push(this.smooth.build(e,"b")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.offset.build(e,"v2")),r.push(this.morph.build(e,"v2")),r.push(this.angle.build(e,"f")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),n)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),n)}},Q1e=Z1e;Q1e.Nodes=function(){return{gradient:new Bt(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return color.xyz;
			}`)}}();var GD=class extends Ti{constructor(e,n,i,r,s,o,a,l,c,h){super("v3"),this.nodeType="CustomTexture",this.firstTime=!0,this.texture=e,this.textureSize=n,this.crop=i,this.projection=r,this.axis=s,this.side=o,this.size=a,this.mat=l,this.alpha=c,this.mode=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,n){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let i=`g${this.uuid.toString().replace(/-/g,"")}`,r;switch(this.projection.value){case 3:r=e.include(GD.Nodes.cylindrical);break;case 2:r=e.include(GD.Nodes.spherical);break;case 1:let o=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],a=new Bt(`
		vec3 ${i}_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( (${i}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${o}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);r=e.include(a);break;default:r=e.include(GD.Nodes.uv);break}if(this.projection.value===1&&this.firstTime){e.addVertexParsCode(`varying vec2 ${i}_vCustomUv;`),e.addFragmentParsCode(`varying vec2 ${i}_vCustomUv;`);let o=["zy","xz","xy"][this.axis.value];e.addVertexFinalCode(`${i}_vCustomUv = (1. + (transformed.${o})) / 2.;`)}e.addFragmentVariable(this.calpha,"float");let s=[];return s.push(this.texture.generate(e,"t")),s.push(this.textureSize.build(e,"v2")),s.push(this.crop.build(e,"f")),s.push(this.mat.build(e,"mat3")),s.push(this.size.build(e,"v2")),s.push(this.alpha.build(e,"f")),s.push(this.mode.build(e,"i")),s.push(this.calpha),this.firstTime=!this.firstTime,e.format(r+"("+s.join(",")+")",this.getType(e),n)}},exe=GD;exe.Nodes=function(){let t=new Bt(`
vec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),e=new Bt(`
vec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),n=new Bt(`vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);return{cylindrical:t,spherical:e,uv:n}}();var txe=class extends Ti{constructor(e,n){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=n}generate(e,n){if(e.isShader("fragment")){let i=e.include(txe.Nodes.customNormal),r=[];return r.push(this.cnormal.build(e,"v3")),r.push("normal"),r.push(this.alpha.build(e,"f")),e.format(i+"("+r.join(",")+")",this.getType(e),n)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),n)}},nxe=txe;nxe.Nodes=function(){return{customNormal:new Bt(`vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return normal;
			}`)}}();function al(t,e){return e.color(t)}function Xmt(t,e){switch(t.type){case"fresnel":return Jmt(t,e);case"gradient":return Zmt(t);case"depth":return Qmt(t);case"normal":return egt(t);case"noise":return tgt(t,e);case"rainbow":return ngt(t);case"toon":return igt(t,e);case"outline":return rgt(t,e);case"transmission":return sgt(t);case"color":return Kmt(t,e)}}function Ymt(t){return{type:t.type}}function md(t){let{alpha:e,mode:n}=t;return{...Ymt(t),alpha:e,mode:n}}function Kmt(t,e){return{...md(t),color:al(t.color,e)}}function Jmt(t,e){let{bias:n,scale:i,intensity:r,factor:s,color:o}=t;return{...md(t),color:al(o,e),bias:n,scale:i,intensity:r,factor:s}}function Zmt(t){let{gradientType:e,smooth:n,colors:i,steps:r,angle:s,offset:o,morph:a}=t;return{...md(t),gradientType:e,smooth:n,colors:i.map(l=>new sn(l[0],l[1],l[2],l[3])),num:i.length,steps:r,offset:new Me(...o),morph:new Me(...a),angle:s}}function Qmt(t){let{gradientType:e,near:n,far:i,isVector:r,isWorldSpace:s,origin:o,direction:a,colors:l,steps:c,smooth:h}=t;return{...md(t),gradientType:e,near:n,far:i,isVector:r,isWorldSpace:s,origin:new q(...o),direction:a?new q(...a):new q(1,0,0),colors:l.map(u=>u!==void 0?new sn(u[0],u[1],u[2],u[3]):new sn(0,0,0,0)),steps:c.slice(0,l.length),smooth:h}}function egt(t){let{cnormal:e}=t;return{...md(t),cnormal:new q(e[0],e[1],e[2])}}function tgt(t,e){return{...md(t),scale:t.scale,move:t.move,fA:new Me(...t.fA),fB:new Me(...t.fB),size:new q(...t.size),distortion:new Me(...t.distortion),colorA:al(t.colorA,e),colorB:al(t.colorB,e),colorC:al(t.colorC,e),colorD:al(t.colorD,e),noiseType:t.noiseType}}function ngt(t){return{...md(t),filmThickness:t.filmThickness,movement:t.movement,wavelengths:new q(...t.wavelengths),noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,offset:new q(...t.offset)}}function igt(t,e){return{...md(t),positioning:t.positioning,colors:t.colors.map(n=>new sn(n[0],n[1],n[2],n[3])),num:t.colors.length,steps:t.steps,source:new q(...t.source),isWorldSpace:t.isWorldSpace,noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,shadowColor:al(t.shadowColor,e),offset:new q(...t.offset)}}function rgt(t,e){return{...md(t),outlineColor:al(t.outlineColor,e),contourColor:al(t.contourColor,e),outlineWidth:t.outlineWidth,contourWidth:t.contourWidth,outlineThreshold:t.outlineThreshold,contourThreshold:t.contourThreshold,outlineSmoothing:t.outlineSmoothing,contourFrequency:t.contourFrequency,contourDirection:new q(...t.contourDirection),positionalLines:t.positionalLines,compensation:t.compensation}}function sgt(t,e){return{...md(t),thickness:t.thickness,ior:t.ior,roughness:t.roughness}}var AL=class extends Lu{},ogt=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let n=this.cache.get(e);n&&(this.dispose(e,n.data),this.cache.delete(e),n.prev.next=n.next,n.next.prev=n.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),n=this.head.next;for(;n.time<e-this.timeout;)this.dispose(n.src,n.data),this.cache.delete(n.src),n=n.next,n.prev=this.head,this.head.next=n;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var n;return(n=this.cache.get(e))==null?void 0:n.data}load(e){let n=Date.now(),i=this.cache.get(e);return i===void 0?(i={data:this.create(e),src:e,time:n,next:null,prev:null},this.cache.set(e,i)):(i.time=n,i.prev.next=i.next,i.next.prev=i.prev),i.prev=this.tail.prev,i.next=this.tail,this.tail.prev.next=i,this.tail.prev=i,this.scheduleCleanup(),i.data}},agt=class extends ogt{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,n){URL.revokeObjectURL(n)}},N4;function lgt(t){return typeof t=="string"?t:(N4||(N4=new agt),N4.load(t))}var cgt=class{constructor(e,n){this.data=e,this.cache=n,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},ugt=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let n=this.cache.get(e);return n===void 0&&(n=this.create(e),this.cache.set(e,n)),n.refCount+=1,n}},ixe=class extends cgt{constructor(e,n){super(e,n.imageHolderCache),this.data=e,this.shared=n,this.loaded=!1,this.isVideo=!1,this.isVideo=e.type=="video",this.updateSrc(e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let n=()=>{this.loaded=!0;let r=[1e3,1001,1002];for(let s of r){let o=this[s];o&&(o.image=this.img,o.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var i=new FileReader;i.readAsDataURL(new Blob([e],{type:"video/mp4"}));let r;await new Promise(s=>{i.onloadend=o=>{var a;r=(a=o.target)==null?void 0:a.result,s(null)}}),this.img.src=r}else this.img.src=e;this.img.onloadeddata=()=>{n()}}else this.img=new Image,this.img.src=lgt(e),this.img.onload=n}getTexture(e){let n=this[e];if(n)return n;{let i;return this.isVideo?i=new t0e(this.img,void 0,e,e):i=new bi(this.img,void 0,e,e),this.loaded&&(i.needsUpdate=!0),this[e]=i,i}}disposeTextures(){var e,n,i;(e=this[1e3])==null||e.dispose(),this[1e3]=void 0,(n=this[1001])==null||n.dispose(),this[1001]=void 0,(i=this[1002])==null||i.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},I0=class extends ixe{},l$=class extends Pl{},rxe={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],depth:["smooth","isWorldSpace","gradientType","isVector"]},sxe={depth:["colors"]};function hgt(t,e,n){var s,o;let i=rxe[t.type],r=sxe[t.type];if(r!==void 0){let a=t.color;if(r.includes(e)){let l=(o=(s=a[e])==null?void 0:s.value)==null?void 0:o.length;if(l!==void 0&&l!==n.length)return!0}}return i!==void 0?i.includes(e):!1}function oxe(t,e,n){let i=n.uniforms[`f${n.id}_texture`];if(!i)return!1;let r=!1,s=t;if("image"in s){let o=s.image,a=e.image(o),l=i;l.image instanceof I0||l.image.deref(),l.image=a}if("video"in s){let o=s.video,a=e.video(o),l=i;l.image instanceof I0||l.image.deref(),l.image=a}if("wrapping"in s){let o=i;o.wrap=s.wrapping}if("repeat"in s||"offset"in s){let o="mat",a=n.uniforms[`f${n.id}_${o}`];"repeat"in s&&(a.repeat=s.repeat),"offset"in s&&(a.offset=s.offset),a.updateMatrix()}return r}function dgt(t,e,n,i){let r=!1;for(let[s,o]of Object.entries(t)){if(!s||o===void 0)continue;if(dxe(s,n,i)){s==="visible"&&n.type==="light"&&(r=!0);continue}n.visible=i.visible;let a=n.uniforms[`f${n.id}_${s}`];if(a&&!(a instanceof l$))switch(r=r||hgt(n,s,o),a.constructor){case Pr:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof AL?a.value=new Lu(l.r,l.g,l.b,l.a):a.setRGBA(l);break}case y0:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof AL?a.value=new Lu(l.r,l.g,l.b,l.a):a.value.setRGBA(l.r,l.g,l.b,l.a);break}case ac:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]);break}case ec:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]),a.value.setZ(l[2]);break}case lm:{oxe(o,e,n);break}case a0:{a.value=o.map(l=>new sn(...l));break}default:{a.value=o;break}}}return r}var axe=class extends Ti{constructor(e,n,i){super("v3"),this.nodeType="Matcap",this.texture=e,this.alpha=n,this.mode=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,n){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=e.include(axe.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let r=[];return r.push(this.texture.generate(e,"t")),r.push("normal"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),n)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),n)}},lxe=axe;lxe.Nodes=function(){return{matcap:new Bt(`vec3 matcap(sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {
                vec3 viewDir = normalize( vViewPosition );
                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
                vec3 y = cross( viewDir, x );
                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
                vec4 matcapColor = texture2D( matcapTex, uv );

                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;
                
                return matcapColor.rgb;
            }
            `)}}();var CH=class extends l${constructor(e,n){super("t"),this.image=e,this.wrap=n}get value(){return this.image.getTexture(this.wrap)}},fgt=class extends l${constructor(e){super("v3"),this.image=e,this._value=new q}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},cxe=class extends Ti{constructor(e,n,i,r,s,o,a,l,c,h){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=n,this.steps=i,this.source=r,this.isWorldSpace=s,this.noiseStrength=o,this.noiseScale=a,this.shadowColor=l,this.offset=c,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,n){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let i=e.include(cxe.Nodes.toon),r=[];return r.push(this.positioning.build(e,"i")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.source.build(e,"v3")),r.push(this.isWorldSpace.build(e,"b")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.shadowColor.build(e,"v4")),r.push(this.offset.build(e,"v3")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),n)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),n)}},uxe=cxe;uxe.Nodes=function(){let t=new Bt(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),e=new Bt(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),n=new Bt(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[e]),i=new Bt(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),r=new Bt(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[i]);return{toon:new Bt(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[wc.simplex,t,n,r])}}();function ere(t,e,n){t.setUvTransform(n[0],n[1],e[0],e[1],0,0,0)}var pgt=class extends z1e{constructor(e,n){super(new Wr),this.repeat=e,this.offset=n,ere(this.value,e,n)}updateMatrix(){ere(this.value,this.repeat,this.offset)}},J0=class{constructor(e,n,i,r){this.id=e,this.uuid=n,this.data=i,this.uniforms={};for(let s in r)this.uniforms[`f${this.id}_${s}`]=r[s];for(let s in i)dxe(s,this,i)}get type(){return this.data.type}static create(e,n,i,r){if(i.type==="light")return Px.createLigherLayer(e,n,i,r);if(i.type==="texture"||i.type==="video"){let s=i.type==="texture"?r.image(i.texture.image):r.video(i.texture.video),o=new CH(s,i.texture.wrapping),a=new fgt(s),l=new pgt(i.texture.repeat,i.texture.offset),c=new Dt(i.crop?1:0),h=new vi(i.projection??0),u=new vi(["x","y","z"].indexOf(i.axis)??0),d=new vi(i.side??0),f=new ac(i.size?new Me(i.size[0],i.size[1]):new Me(100,100)),p=new Dt(i.alpha??1),m=new vi(i.mode??0),g=new exe(o,a,c,h,u,d,f,l,p,m),v=new Xi(g.calpha,"f");return new Js(e,n,i,{texture:o,textureSize:a,crop:c,projection:h,axis:u,side:d,size:f,mat:l,alpha:p,mode:m},g,m,v)}else if(i.type==="matcap"){let s=r.image(i.texture.image),o=new CH(s,i.texture.wrapping),a=new Dt(i.alpha??1),l=new vi(i.mode??0),c=new lxe(o,a,l),h=new Xi(c.calpha,"f");return new Js(e,n,i,{texture:o,alpha:a,mode:l},c,l,h)}else if(i.type==="displace")if(i.displacementType==="noise"){let s=new ec(new q(...i.offset)),o=new Dt(i.scale??10),a=new Dt(i.intensity??8),l=new Dt(i.movement??1),c=new vi(i.noiseType??0),h=new J1e(a,l,s,o,c);return new hxe(e,n,i,{offset:s,scale:o,intensity:a,movement:l,noiseType:c},h)}else throw new Error;else return vgt(e,n,i,r)}updateByOp(e,n,i){var s;let r=e;if(r.path[0]===void 0){if(r.type===0)return"type"in r.props||"category"in r.props||"visible"in r.props?((s=i.scene)==null||s.markNeedsUpdateRendererDirty(),!0):dgt(r.props,i.shared,this,n)}else if(r.path[0]==="texture")return"texture"in n||"video"in n?oxe(r.props,i.shared,this):!0;return!1}dispose(){if(mgt(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let n=e;n.image instanceof I0||n.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,n){let i=`f${this.id}_${e}`;this.hasValueByKey(i)&&n!==void 0&&(this.uniforms[i].value=n)}getNode(e){let n=`f${this.id}_${e}`;if(this.hasValueByKey(n))return this.uniforms[n]}getValue(e){let n=`f${this.id}_${e}`;if(this.hasValueByKey(n))return this.uniforms[n].value}getName(e){let n=/f\d+_(.*)/.exec(e);if(n&&n.length>1)return n[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let n in this.uniforms){let i=this.getName(n);i&&e.push(i)}return e}},Js=class extends J0{constructor(e,n,i,r,s,o,a){super(e,n,i,r),this.params=r,this.color=s,this.mode=o,this.alpha=a}},hxe=class extends J0{constructor(e,n,i,r,s){super(e,n,i,r),this.position=s}},Px=class extends J0{constructor(e,n,i,r,s){super(e,n,i,s),this.node=r}static createLigherLayer(e,n,i,r){let s,o=new Dt(i.alpha),a=new vi(i.mode),l;if(!i.visible)s=new N1e,l={};else if(i.category==="lambert"){s=new Vmt;let c=new Pr(r.color(i.emissive)??0);l={emissive:c},s.emissive=c}else if(i.category==="toon"){s=new qmt;let c=new Dt(i.shininess??30),h=new Pr(r.color(i.specular)??1118481);l={shininess:c,specular:h},s.shininess=c,s.specular=h}else if(i.category==="physical"){s=new $mt;let c=new Dt(i.roughness??.3),h=new Dt(i.metalness??0),u=new Dt(i.reflectivity??.5);l={roughness:c,metalness:h,reflectivity:u},s.roughness=c,s.metalness=h,s.reflectivity=u}else{s=new Wmt;let c=new Dt(i.shininess??30),h=new Pr(i.specular!==void 0?r.color(i.specular)??1118481:1118481);l={shininess:c,specular:h},s.shininess=c,s.specular=h}return s.alpha=new Dt(1),s.shadingAlpha=o,s.shadingBlend=a,l.alpha=s.shadingAlpha,l.mode=s.shadingBlend,new Px(e,n,i,s,l)}get category(){return this.node.category}};function mgt(t){let e=t instanceof J0?t.type:t;return e==="texture"||e==="video"||e==="displace_map"||e==="matcap"}function ggt(t,e,n,i){switch(t.type){case"color":{let r=new Pr(i.color??5526619),s=new Dt(i.alpha??1),o=new Xi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=s;let a=new vi(i.mode??0);return r.alpha=s,new Js(e,n,t,{color:r,alpha:s,mode:a},r,a,o)}case"fresnel":{let r=new Pr(i.color??16777215),s=new Dt(i.bias??.1),o=new Dt(i.scale??1),a=new Dt(i.intensity??2),l=new Dt(i.factor??1),c=new Dt(i.alpha??1),h=new vi(i.mode??0),u=new H1e(r,s,o,a,l,c,h),d=new Xi(u.calpha,"f");return new Js(e,n,t,{color:r,bias:s,scale:o,intensity:a,factor:l,alpha:c,mode:h},u,h,d)}case"rainbow":{let r=new Dt(i.filmThickness??30),s=new Dt(i.movement??0),o=new ec(i.wavelengths??new q(0,0,0)),a=new Dt(i.noiseStrength??0),l=new Dt(i.noiseScale??1),c=new ec(i.offset??new q(0,0,0)),h=new Dt(i.alpha??1),u=new V1e(r,s,o,a,l,c,h),d=new Xi(u.calpha,"f"),f=new vi(i.mode??0);return new Js(e,n,t,{filmThickness:r,movement:s,wavelengths:o,noiseStrength:a,noiseScale:l,offset:c,alpha:h,mode:f},u,f,d)}case"transmission":{let r=new Dt(i.thickness??10),s=new Dt(i.ior??1.5),o=new Dt(i.roughness??.5),a=lc.transmissionSize,l=lc.transmissionRenderTarget,c=lc.transmissionRenderTargetDepth,h=window.innerWidth,u=window.innerHeight,d=h>=u?new ac(u/h,1):new ac(1,h/u),f=new Dt(i.alpha??1),p=new X1e(r,s,o,a,l,c,d,f),m=new Xi(p.calpha,"f"),g=new vi(i.mode??0);return new Js(e,n,t,{thickness:r,ior:s,roughness:o,aspectRatio:d,alpha:f,mode:g},p,g,m)}case"toon":{let r=new vi(i.positioning??0),s;i.colors?s=new a0(i.colors.length,i.colors):(s=new a0(10,new sn(0,0,0,1)),s.value[1]=new sn(1,1,1,1));let o;i.steps?o=new o0(i.steps.length,i.steps):(o=new o0(10,1),o.value[0]=0);let a=new ec(i.source??new q(0,0,0)),l=new MS(i.isWorldSpace??!0),c=new Dt(i.noiseStrength??0),h=new Dt(i.noiseScale??1),u=new y0(i.shadowColor),d=new ec(i.offset??new q(0,0,0)),f=new Dt(i.alpha??1),p=new uxe(r,s,o,a,l,c,h,u,d,f),m=new Xi(p.calpha,"f"),g=new vi(i.mode??0);return new Js(e,n,t,{positioning:r,colors:s,steps:o,source:a,isWorldSpace:l,noiseStrength:c,noiseScale:h,shadowColor:u,offset:d,alpha:f,mode:g},p,g,m)}case"outline":{let r=new Pr(i.outlineColor??16777215),s=new Pr(i.contourColor??16777215),o=new Dt(i.outlineWidth??.1),a=new Dt(i.contourWidth??.1),l=new Dt(i.outlineThreshold??.1),c=new Dt(i.contourThreshold??.1),h=new Dt(i.outlineSmoothing??.1),u=new Dt(i.contourFrequency??.1),d=new ec(i.contourDirection??new q(0,1,0)),f=new MS(i.positionalLines??!1),p=new MS(i.compensation??!0),m=lc.normalRenderTarget,g=lc.normalRenderTargetDepth,v=lc.pixelRatioNode,y=lc.resolution,x=new Dt(i.alpha??1),b=new $1e(r,s,o,a,l,c,h,u,d,f,p,y,m,g,v,x),S=new Xi(b.calpha,"f"),A=new vi(i.mode??0);return new Js(e,n,t,{outlineColor:r,contourColor:s,outlineWidth:o,contourWidth:a,outlineThreshold:l,contourThreshold:c,outlineSmoothing:h,contourFrequency:u,contourDirection:d,positionalLines:f,compensation:p,alpha:x,mode:A},b,A,S)}case"depth":{let r=new vi(i.gradientType??0),s=new MS(i.smooth??!1),o=new Dt(i.near??50),a=new Dt(i.far??200),l=new Dt(i.isVector??1),c=new Dt(i.isWorldSpace??0),h=new ec(i.origin??new q),u=new ec(i.direction??new q),d;i.colors?d=new a0(i.colors.length,i.colors):(d=new a0(2,new sn(0,0,0,1)),d.value[1]=new sn(1,1,1,1));let f;i.steps?f=new o0(i.steps.length,i.steps):(f=new o0(2,1),f.value[0]=0);let p=new Dt(i.alpha??1),m=new vi(i.mode??0),g=new Y1e(r,s,o,a,l,c,h,u,d,f,p),v=new Xi(g.calpha,"f");return new Js(e,n,t,{gradientType:r,smooth:s,near:o,far:a,isVector:l,isWorldSpace:c,origin:h,direction:u,colors:d,steps:f,alpha:p,mode:m},g,m,v)}case"noise":{let r=new Dt(i.scale??1),s=new ec(i.size??new q(100,100,100)),o=new Dt(i.move??1),a=new ac(i.fA??new Me(1.7,9.2)),l=new ac(i.fB??new Me(8.3,2.8)),c=new ac(i.distortion??new Me(1,1)),h=new y0(i.colorA),u=new y0(i.colorB),d=new y0(i.colorC),f=new y0(i.colorD),p=new Dt(i.alpha??1),m=new vi(i.mode??0),g=new vi(i.noiseType??0),v=new U1e(r,s,o,a,l,c,h,u,d,f,p,g),y=new Xi(v.calpha,"f");return new Js(e,n,t,{scale:r,size:s,move:o,fA:a,fB:l,distortion:c,colorA:h,colorB:u,colorC:d,colorD:f,alpha:p,mode:m,noiseType:g},v,m,y)}case"normal":{let r=new ec(i.cnormal??new q(1,1,1)),s=new Dt(i.alpha??1),o=new vi(i.mode??0),a=new nxe(r,s),l=new Xi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return l.keywords.alpha=s,new Js(e,n,t,{cnormal:r,alpha:s,mode:o},a,o,l)}case"gradient":{let r=new vi(i.gradientType??0),s=new MS(i.smooth??!1),o;i.colors?o=new a0(i.colors.length,i.colors):(o=new a0(10,new sn(0,0,0,1)),o.value[1]=new sn(1,1,1,1));let a;i.steps?a=new o0(i.steps.length,i.steps):(a=new o0(10,1),a.value[0]=0);let l=new ac(i.offset??new Me(0,0)),c=new ac(i.morph??new Me(0,0)),h=new Dt(i.angle??0),u=new Dt(i.alpha??1),d=new vi(i.mode??0),f=new Q1e(r,s,o,a,l,c,h,u),p=new Xi(f.calpha,"f");return new Js(e,n,t,{gradientType:r,smooth:s,colors:o,steps:a,offset:l,morph:c,angle:h,alpha:u,mode:d},f,d,p)}default:{let r=new Pr(1,0,0,1),s=new Dt(1),o=new Xi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=s;let a=new vi(0);return r.alpha=s,new Js(e,n,t,{color:r,alpha:s,mode:a},r,a,o)}}}function vgt(t,e,n,i){let r=Xmt(n,i);return ggt(n,t,e,r)}function dxe(t,e,n){if(n.type==="displace"&&(t==="intensity"||t==="visible")){let i=e.uniforms[`f${e.id}_intensity`];return i?(i.value=n.intensity*(n.visible?1:0),i):void 0}if(n.type!=="displace"&&(t==="alpha"||t==="visible")){let i=e.uniforms[`f${e.id}_alpha`];if(!i)return;if(i.value=n.alpha*(n.visible?1:0),n.type==="outline"&&t==="visible"){let r=e.uniforms[`f${e.id}_compensation`];r&&(r.value=n.compensation&&n.visible)}return i}}function tre(t,e){let n=0;for(let i of t.layers)if(i.data.type!=="displace"&&"alpha"in i.data&&i.data.type!=="light"&&i.data.type!=="fresnel"&&i.data.type!=="texture"&&i.data.type!=="matcap"&&i.data.type!=="rainbow"&&i.data.type!=="outline"){let r=i.data.visible?i.data.alpha:0;if(r===1&&i.data.type==="depth"||i.data.type==="gradient"){for(let s of i.data.colors)if(s[3]<1){r=s[3];break}}else if(r===1&&i.data.type==="noise"){let s=e.color(i.data.colorA).a,o=e.color(i.data.colorB).a,a=e.color(i.data.colorC).a,l=e.color(i.data.colorD).a,c=Math.min(s,Math.min(o,Math.min(a,l)));c<1&&(r=c)}n+=(1-n)*r}return n<1}var $m=class extends zc{constructor(){super(void 0),this.flatShading=!1,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},ygt=class extends $m{constructor(e,n,i,r){super(),this.flatShading=e,this.side=n,this.wireframe=i,this.root=r}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,n){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}getFlavor(e,n,i){return this.root.getFlavor(e,n,i)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,n,i){this.root.updateByOp(e,n,i)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},fxe=class extends $m{constructor(t,e){super(),this.data=t,this.layerIdGen=0,this.flavors=[],this.type="NodeMaterial",this.updaters=[],this.reset0(t,e)}get nodeMaterial(){return this}getFlavor(t,e,n){let i=n?6:(t?3:0)+e;if(i===0)return this;this.flavors===void 0&&(this.flavors=[]),i-=1;let r=this.flavors[i];return r===void 0&&(r=new ygt(t,e,n,this),this.flavors[i]=r,r.flatShading=t,r.side=e,r.updateAfterBuild()),r}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}reset(t,e){this.data!==t&&this.reset0(t,e)}reset0(t,e){this.data=t;let n=t.layers??Xh.defaultTwoLayerData("phong").layers;this.layers=n.map(i=>J0.create(this.layerIdGen++,i.id,i.data,e.shared)),this.layers.reverse(),this.name=t.name??"Untitled Material",this.onUpdate(),this.transparent=tre(t,e.shared)}getLayersOfType(t){return this.layers.filter(e=>e.type===t)}getLayerByUuid(t){return this.layers.find(e=>e.uuid===t)}onUpdate(){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(t=>t instanceof Px),this.lightLayer===void 0&&(this.lightLayer=new Px(0,"",{...pc.defaultData("light","phong"),visible:!1},new N1e,{})),this.dispose();for(let t of this.flavors)t&&t.dispose();this.blendColors(),this.blendAfterColors(),this.blendPositions()}updateByOp(t,e,n){var i,r,s;if(e!==void 0?this.data=e:e=this.data,this.transparent=tre(e,n.shared),t.path[0]==="layers"){this.data=e;let o=n.shared,a=t.path[1];if(a===void 0){if(this.layers.reverse(),t.type===4){let l=J0.create(this.layerIdGen++,t.id,t.data,n.shared);this.layers.splice(t.localIndex,0,l),(i=n.scene)==null||i.markNeedsUpdateRendererDirty()}else if(t.type===5)this.layers.splice(t.localIndex,1)[0].dispose(),(r=n.scene)==null||r.markNeedsUpdateRendererDirty();else if(t.type===6){let l=this.layers.findIndex(h=>h.uuid===t.id),c=this.layers[l];this.layers.splice(l,1),this.layers.splice(t.localIndex,0,c),(s=n.scene)==null||s.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate()}else{let l=this.layers.find(c=>c.uuid===a);if(l){let c=e.layers.data(a);if(l.updateByOp({...t,path:t.path.slice(2)},c,n)){let h=J0.create(this.layerIdGen++,a,c,o);this.layers.splice(this.layers.findIndex(u=>u.uuid===a),1,h),this.onUpdate()}}}}else this.reset(e,n)}blendColors(){let t=this.layers.findIndex(n=>n instanceof Js),e=this.layers.findIndex(n=>n instanceof Px);if(t!==-1&&t<e){let n=this.layers[t].color;for(let i=t+1;i<e;++i){let r=this.layers[i];r instanceof Js&&(n=new Qie(n,r.color,r.alpha,r.mode))}this.fragment.color=n}else this.fragment.color=void 0}blendAfterColors(){let t=new Xi("outgoingLight","f"),e=this.layers.findIndex(n=>n instanceof Px);if(this.layers.length>e+1){for(let n=e+1;n<this.layers.length;++n){let i=this.layers[n];i instanceof Js&&(t=new Qie(t,i.color,i.alpha,i.mode))}this.fragment.afterColor=t}else this.fragment.afterColor=void 0}blendPositions(){let t=this.layers.filter(e=>e instanceof hxe);if(t.length>0){let e=t[0].position;for(let n=1;n<t.length;++n)t[n]&&(e=new Nh(e,t[n].position,Nh.ADD),e=new Nh(e,new Dt(.5).setReadonly(!0),Nh.MUL));this.fragment.position=e}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(t){this.build(),t.defines=this.defines,t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.extensionDerivatives=this.extensions.derivatives===!0,t.extensionFragDepth=this.extensions.fragDepth===!0,t.extensionDrawBuffers=this.extensions.drawBuffers===!0,t.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(t,e){let n=(i,r,s)=>Math.min(Math.max(i,r),s);for(let i of this.layers)if(i.type==="displace"){let r=n(i.uniforms[`f${i.id}_intensity`].value,t,e);i.uniforms[`f${i.id}_intensity`].value=r}}computeCacheKey(){let t="[";for(let{data:e}of this.data.layers)if(e.type==="light")t+=`"${e.visible?e.category.toUpperCase():"Basic"}"`;else{let n=(rxe[e.type]??[]).map(s=>e[s]),i=(sxe[e.type]??[]).map(s=>{var o;return((o=e[s])==null?void 0:o.length)??0}),r=[...n,...i];r.length?t+=`["${e.type}", "${r.join('","')}"],`:t+=`"${e.type}",`}return t=t.slice(0,-1)+"]",t}updateFrame(t){for(let e=0;e<this.updaters.length;++e)t.updateNode(this.updaters[e])}build(){let t=new jmt;this.lights=this.lightLayer.data.visible,t.build(this.fragment,this.fragment),this.vertexShader=t.getCode("vertex"),this.fragmentShader=t.getCode("fragment"),this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.updaters=t.updaters;for(let e of this.flavors)e&&e.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(t=>t.dispose()),super.dispose();for(let t of this.flavors)t&&t.dispose()}assetsLoaded(){for(let t of this.layers)if(t instanceof Js){let e=t.params.texture;if(e instanceof CH&&!e.image.loaded)return!1}return!0}getHash(){let t="{";return t+='"fragment":'+this.fragment.getHash(),t+="}",t}};Object.defineProperties($m.prototype,{properties:{get:function(){return this.fragment.properties}}});var TH=class extends fxe{},xgt=oB(ist()),nre=new Map;function bgt(t){if(typeof t=="string")return t;let e=nre.get(t);return e||(e={url:URL.createObjectURL(new Blob([t]))},nre.set(t,e)),e.url}var VP=class{constructor({src:e,volume:n,delay:i,loop:r}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let s;typeof e=="string"?s={src:e}:s={src:bgt(e),format:"wav"},this.sound=new xgt.Howl(s),this.sound.on("end",this.onEnd),this.src=e,n!==void 0&&(this.volume=n),i!==void 0&&(this.delay=i),r!==void 0&&(this.loop=r)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,n=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,n),this.clearFade()},e)):this.sound.fade(this._volume,0,n)}on(e,n,i){this.sound.on(e,n,i)}off(e,n,i){this.sound.off(e,n,i)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},wgt=class{constructor(){this.type="ShapePath",this.color=new nt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new xv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){var i;return(i=this.currentPath)==null||i.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){var s;return(s=this.currentPath)==null||s.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,o){var a;return(a=this.currentPath)==null||a.bezierCurveTo(e,n,i,r,s,o),this}splineThru(e){var n;return(n=this.currentPath)==null||n.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},n={loc:e.ORIGIN,t:0};function i(p,m,g,v){let y=p.x,x=m.x,b=g.x,S=v.x,A=p.y,E=m.y,M=g.y,C=v.y,T=(S-b)*(A-M)-(C-M)*(y-b),D=(x-y)*(A-M)-(E-A)*(y-b),L=(C-M)*(x-y)-(S-b)*(E-A),I=T/L,R=D/L;if(L===0&&T!==0||I<=0||I>=1||R<0||R>1)return null;if(T===0&&L===0){for(let H=0;H<2;H++)if(r(H===0?g:v,p,m),n.loc===e.ORIGIN){let Z=H===0?g:v;return{x:Z.x,y:Z.y,t:n.t}}else if(n.loc===e.BETWEEN){let Z=+(y+n.t*(x-y)).toPrecision(10),ee=+(A+n.t*(E-A)).toPrecision(10);return{x:Z,y:ee,t:n.t}}return null}else{for(let ee=0;ee<2;ee++)if(r(ee===0?g:v,p,m),n.loc===e.ORIGIN){let F=ee===0?g:v;return{x:F.x,y:F.y,t:n.t}}let H=+(y+I*(x-y)).toPrecision(10),Z=+(A+I*(E-A)).toPrecision(10);return{x:H,y:Z,t:I}}}function r(p,m,g){let v=g.x-m.x,y=g.y-m.y,x=p.x-m.x,b=p.y-m.y,S=v*b-x*y;if(p.x===m.x&&p.y===m.y){n.loc=e.ORIGIN,n.t=0;return}if(p.x===g.x&&p.y===g.y){n.loc=e.DESTINATION,n.t=1;return}if(S<-Number.EPSILON){n.loc=e.LEFT;return}if(S>Number.EPSILON){n.loc=e.RIGHT;return}if(v*x<0||y*b<0){n.loc=e.BEHIND;return}if(Math.sqrt(v*v+y*y)<Math.sqrt(x*x+b*b)){n.loc=e.BEYOND;return}let A;v!==0?A=x/v:A=b/y,n.loc=e.BETWEEN,n.t=A}function s(p,m){let g=[],v=[];for(let y=1;y<p.length;y++){let x=p[y-1],b=p[y];for(let S=1;S<m.length;S++){let A=m[S-1],E=m[S],M=i(x,b,A,E);M!==null&&g.find(C=>C.t<=M.t+Number.EPSILON&&C.t>=M.t-Number.EPSILON)===void 0&&(g.push(M),v.push(new Me(M.x,M.y)))}}return v}function o(p,m,g){let v=new Me;m.getCenter(v);let y=[];return g.forEach(x=>{x.boundingBox.containsPoint(v)&&s(p,x.points).forEach(b=>{y.push({identifier:x.identifier,isCW:x.isCW,point:b})})}),y.sort((x,b)=>x.point.x-b.point.x),y}function a(p,m,g,v,y){(y==null||y==="")&&(y="nonzero");let x=new Me;p.boundingBox.getCenter(x);let b=[new Me(g,x.y),new Me(v,x.y)],S=o(b,p.boundingBox,m);S.sort((D,L)=>D.point.x-L.point.x);let A=[],E=[];S.forEach(D=>{D.identifier===p.identifier?A.push(D):E.push(D)});let M=A[0].point.x,C=[],T=0;for(;T<E.length&&E[T].point.x<M;)C.length>0&&C[C.length-1]===E[T].identifier?C.pop():C.push(E[T].identifier),T++;if(C.push(p.identifier),y==="evenodd"){let D=C.length%2===0,L=C[C.length-2];return{identifier:p.identifier,isHole:D,for:L}}else if(y==="nonzero"){let D=!0,L=null,I=null;for(let R=0;R<C.length;R++){let H=C[R];m[H]&&(D?(I=m[H].isCW,D=!1,L=H):I!==m[H].isCW&&(I=m[H].isCW,D=!0))}return{identifier:p.identifier,isHole:D,for:L}}else console.warn('fill-rule: "'+y+'" is currently not implemented.')}let l=0,c=999999999,h=-999999999,u=[];this.subPaths.forEach(p=>{let m=p.getPoints(),g=-999999999,v=999999999,y=-999999999,x=999999999;for(let b=0;b<m.length;b++){let S=m[b];S.y>g&&(g=S.y),S.y<v&&(v=S.y),S.x>y&&(y=S.x),S.x<x&&(x=S.x)}h<=y&&(h=y+1),c>=x&&(c=x-1),m.length&&u.push({curves:p.curves,points:m,isCW:Du.isClockWise(m),identifier:l++,boundingBox:new O0e(new Me(x,v),new Me(y,g))})});let d=u.map(p=>{var m;return a(p,u,c,h,(m=this.userData)==null?void 0:m.style.fillRule)}),f=[];return u.forEach(p=>{let m=d[p.identifier];if(m&&!m.isHole){let g=new Pu;g.curves=p.curves,d.filter(v=>(v==null?void 0:v.isHole)&&v.for===p.identifier).forEach(v=>{if(v){let y=u[v.identifier],x=new xv;x.curves=y.curves,g.holes.push(x)}}),f.push(g)}}),f}},pxe,ire=new Promise(t=>{pxe=t}),rre=!1;async function _gt(){if(rre)return;let t=await Nw(()=>import("./opentype-fc28cde9.js"),[]);pxe(t),rre=!0}var Sgt=class{async load(e,n,i=()=>{}){let{load:r}=await ire;r(e,(s,o)=>{s||!o?i(s??"Something went wrong"):n(o)})}async parse(e){let{parse:n,Bidi:i}=await ire;try{let r=n(e),s=new i,o=a=>r.charToGlyphIndex(a.char);return s.registerModifier("glyphIndex",null,o),s.applyFeatures(r,r.defaultRenderOptions.features),{font:r,bidi:s}}catch(r){console.error(r)}}};async function Agt(t){return await(await fetch(t)).arrayBuffer()}var Mgt=new Sgt;async function sre(t){let e,n,i=!1;if(t.url?(e=await Agt(t.url),n=t.url,i=t.url.startsWith("/")):t.data&&(e=t.data.buffer),e){let r=await Mgt.parse(e);if(r)return{font:r.font,url:n,intercepted:i,arr:e,bidi:r.bidi}}}function Egt(t,e){return e.state.glyphIndex===t||e.state.fina===t||e.state.medi===t||e.state.init===t}var Cgt=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=sre(e).then(n=>{n&&(this._arrayBuffer=n.arr,this._url=n.url,this.font=n.font,this._intercepted=n.intercepted,this._isLoaded=!0,this._bidi=n.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=sre(e).then(n=>{n&&(this._arrayBuffer=n.arr,this._url=n.url,this.font=n.font,this._intercepted=n.intercepted,this._isLoaded=!0,this._bidi=n.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,n,i){if(!this._bidi)return[];let r=this._bidi;r.getTextGlyphs(n);let s=r.tokenizer.tokens,o=[],a=0,l=i.length===s.length;for(let c=0;c<i.length;c++){let h=i[c].index,u=String.fromCharCode(i[c].unicode),d=s[a];if(Egt(h,d)||l)o.push({char:u,index:h,replacements:[d.state.glyphIndex],replacementChars:[d.char]}),a++;else{let f=d.char,p="",m=[d.state.glyphIndex],g=[],v=!1;for(;!v;)a++,p=n.charAt(a),f+=p,m.push(e.charToGlyphIndex(p)),g=e.stringToGlyphs(f),g.length===1&&g[0].index===h&&(v=!0),a>n.length&&(v=!0);o.push({char:u,index:h,replacements:m,replacementChars:Array.from(f)}),a++}}return o}generateShapes(e,n){if(!this._isLoaded)return;let i=this.font,r=n.fontSize/this.unitsPerEm,s=n.fontSize*n.lineHeight,o=e.map(y=>this.getTextWidth(y,n)),a=n.width,l=this.getCharWidth(`
`,n),c=n.horizontalAlign===1?l:0,h=this.computeSpaceWidthForLine(e,0,n),u=this.getLineInitialOffsetX(o[0],a,n.horizontalAlign,e[0],l),d=this.getLineInitialOffsetY(s,e.length,n.height,r,n.verticalAlign),f=[],p=e.map(y=>[]),m=e.map(y=>[]),g;for(let y=0;y<e.length;y++){let x=e[y],b={features:{liga:!0}},S=[];try{S=i.stringToGlyphs(x,b)}catch(E){console.warn(E)}u=this.getLineInitialOffsetX(o[y],a,n.horizontalAlign,x,l);let A=[];try{A=this.reverseLigaturesTable(i,x,S)}catch(E){console.warn(E)}h=this.computeSpaceWidthForLine(e,y,n);for(let E=0;E<S.length;E++){let M=S[E],C=M.index===0?`
`:M.unicode?String.fromCharCode(M.unicode):void 0,T=A[E],D=0,L=0;E===0&&n.horizontalAlign===2&&M.leftSideBearing!==void 0&&(L=-M.leftSideBearing*r),g&&(D=i.getKerningValue(M,g)*r),u+=L+D;let I=0;if(C===`
`)I=c;else if(C===" ")I=h;else{let R=this.createPath(M,r,u,d,n);R&&(I=R.offsetX-(D+L),f.push(R.path))}if(T.replacements.length===1)m[y].push([u,d]),p[y].push(I);else{let R=T.replacements.map(F=>(i.glyphs.get(F).advanceWidth??0)*r),H=R.reduce((F,V)=>F+=V,0),Z=R.map(F=>F/H),ee=u;for(let F=0;F<Z.length;F++){let V=I*Z[F];m[y].push([ee,d]),p[y].push(V),ee+=V}}u+=I,g=M}d-=s}let v=[];for(let y=0,x=f.length;y<x;y++)v.push(...f[y].toShapes());return{shapes:v,charWidths:p,lineWidths:o,charCoords:m}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,n,i,r,s){return(i===3||i===2)&&r.indexOf(`
`)>=0&&(e-=s),i===3?n*.5-e*.5:i===2?n-e:0}getLineInitialOffsetY(e,n,i,r,s){let o=n*e,a=Math.abs(this.ascender-this.descender)*r,l=e-a,c=-this.ascender*r-l/2;return s===3?-(i-o-c):s===2?-(i*.5-o*.5-c):c}createPath(e,n,i,r,s){var c;let o=e.getPath(i,-r,s.fontSize,{kerning:!1,letterSpacing:s.letterSpacing});if(!o){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let a=new wgt,l=(e.advanceWidth??1)*n;if(e)for(let h of o.commands){let u=(c=a.currentPath)==null?void 0:c.currentPoint;if(!(u&&h.type!=="Z"&&u.x===h.x&&-u.y===h.y))switch(h.type){case"M":a.moveTo(h.x,-h.y);break;case"L":a.lineTo(h.x,-h.y);break;case"Q":a.quadraticCurveTo(h.x1,-h.y1,h.x,-h.y);break;case"C":a.bezierCurveTo(h.x1,-h.y1,h.x2,-h.y2,h.x,-h.y);break}}return a.subPaths.forEach(h=>{let u=Tgt(h.curves);u!==void 0&&h.currentPoint.distanceTo(u)>0&&h.lineTo(u.x,u.y)}),{offsetX:l+s.fontSize*s.letterSpacing,path:a}}getCharWidth(e,n){var i;return((i=this.font)==null?void 0:i.getAdvanceWidth(e,n.fontSize,{kerning:!0,letterSpacing:n.letterSpacing}))??0}getTextWidth(e,n){var i;return((i=this.font)==null?void 0:i.getAdvanceWidth(e,n.fontSize,{kerning:!0,letterSpacing:n.letterSpacing}))??0}computeSpaceWidthForLine(e,n,i){let r=this.getCharWidth(" ",i),s=e[n];if(s){let o=this.countSpaces(s.trimEnd());if(i.horizontalAlign===4&&n<e.length-1&&o){let a=i.width,l=this.getTextWidth(s,i);return(a-(l-o*r))/o}}return r}countSpaces(e){return(e.match(/ /g)||[]).length}};function Tgt(t){if(t.length){let e=t[0];if(e instanceof Oc)return e.v1;if(e instanceof Tc||e instanceof Hf)return e.v0}}var Pgt=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,n){let i=this.objects.get(e);return i===void 0?(i=this.createObject(e,n),this.objects.set(e,i)):i.isShared=!0,i}mutateIfUnique(e,n){let i=this.objects.get(e);if(i&&i.isShared!==!0)return this.objects.delete(e),this.objects.set(n,i),i}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,n){let i=this.objects.get(e);n===i&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},ore=class extends Pgt{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,n){let i=SL(e,n,this.flatShading);return i.computeBoundingSphere(),i}},Dgt={find(t){},markNeedsUpdateRendererDirty:function(){},markGeometryCacheDirty:function(){},addPendingExpandCloner:function(t){},addPendingUpdateCloner(t){},addPendingCommand(t){}},Ogt=class extends ugt{constructor(e){super(),this.shared=e}create(e){return new ixe(e,this.shared)}},c$=class{constructor(e,n={}){if(this.geometryCache=new ore(!0),this.geometryCache2=new ore(!1),this.imageHolderCache=new Ogt(this),this.thisContext={scene:Dgt,shared:this},this.deletedMaterial=new TH(Xh.defaultTwoLayerData("phong"),this.thisContext),this.deletedImage=new I0(mL.emptyImage,this),this.deletedVideo=new I0(lL.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.penumbraSize=[],this.requestRender=()=>{this._requestRender&&this._requestRender()},n.images)for(let[i,r]of Object.entries(n.images))this.addImage(i,r);if(n.videos)for(let[i,r]of Object.entries(n.videos))this.addVideo(i,r);if(n.audios)for(let[i,r]of Object.entries(n.audios))this.addAudio(i,r.data);this.reset(e)}setRequestRender(e){this._requestRender=e}reset(e){for(let[n,i]of Object.entries(e.images))this.addImage(n,i);for(let[n,i]of Object.entries(e.videos))this.addVideo(n,i);for(let[n,i]of Object.entries(e.colors))this.addColor(n,i);for(let[n,i]of Object.entries(e.materials))this.addMaterial(n,new TH(i,this.thisContext));for(let[n,i]of Object.entries(e.audios))this.addAudio(n,i.data);for(let[n,i]of Object.entries(e.fonts))this.addFont(n,i);this.penumbraSize=e.penumbraSize}addMaterial(e,n){n.uuid=e,this.materials[e]=n}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):new fxe(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,n){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(n.data),!0):(this.images[e]=new I0(n,this),!1)}deleteImage(e){let n=this.images[e];n&&(n.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addVideo(e,n){return this.videos[e]?(this.videos[e].updateSrc(n.data),!0):(this.videos[e]=new I0(n,this),!1)}deleteVideo(e){let n=this.videos[e];n&&(n.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,n){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in n?this.colors[e].setRGBA(n.r,n.g,n.b,n.a):this.colors[e].setRGBA(n.r,n.g,n.b,1),!0):("a"in n?this.colors[e]=new AL(n.r,n.g,n.b,n.a):this.colors[e]=new AL(n.r,n.g,n.b,1),!1)}updateColor(e,n){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let i=this.colors[e];return this.colors[e].r=n.r??i.r,this.colors[e].g=n.g??i.g,this.colors[e].b=n.b??i.b,this.colors[e].a=n.a??i.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let n;if(typeof e=="string"){let i=this.getColor(e);i?n=i:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),n=new Lu(0,0,0,0))}else return"a"in e?new Lu(e.r,e.g,e.b,e.a):new Lu(e.r,e.g,e.b,1);return n}addAudio(e,n){this.audios[e]=n}getAudio(e){let n=this.audios[e];if(n instanceof VP)return n;{let i=new VP({src:n});return this.audios[e]=i,i}}deleteAudio(e){let n=this.audios[e];n&&(n instanceof VP&&n.dispose(),delete this.audios[e])}addFont(e,n){this.fonts[e]=new Cgt(n),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof VP&&e.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}},Lgt=new c$(uH.emptyData()),WE=class extends Wm{updateByPatchedOp(e,n,i){if(super.updateByPatchedOp(e,n,i),gst(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[r,s]of Object.entries(e.props)){let o=i.shared.material(s);this.material[Number(r)]=o}else if(qp(e.path,["material"])&&this.material instanceof $m)"material"in n&&typeof n.material!="string"&&this.material.updateByOp(ol.drop(e,1),n.material,i);else if(qp(e.path,["materials","*"])&&Array.isArray(this.material)){let r=e.path[1];if("materials"in n&&r<this.material.length){let s=n.materials[r];typeof s!="string"&&this.material[r].updateByOp(ol.drop(e,2),s,i)}}}updateState(e,n){var r,s,o,a,l;super.updateState(e,n),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let i=this.dataPatched;if(((r=e.geometry)==null?void 0:r.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=n.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe),(s=n.scene)==null||s.markNeedsUpdateRendererDirty()),((o=e.geometry)==null?void 0:o.type)==="NonParametricGeometry"&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(c=>n.shared.material(c).getFlavor(i.flatShading,i.side,i.wireframe)),(a=n.scene)==null||a.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[n.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe)],(l=n.scene)==null||l.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let c=0;c<this.material.length;c++)this.material[c]=this.material[c].getFlavor(i.flatShading,i.side,i.wireframe);else this.material=this.material.getFlavor(i.flatShading,i.side,i.wireframe)}disposeMaterial(){this.material&&Pye(this.material).forEach(e=>{e instanceof $m&&(e instanceof TH||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},qm=class extends WE{constructor(e,n,i){super(e,n),this.data=n,this.localGeometry=void 0}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof yt&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof c$){let e=this.geometryCreateDeleyed,n=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=n.get(this.dataPatched.geometry,e)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return hL.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return hL.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,n,i){super.updateByPatchedOp(e,n,i),qp(e.path,["geometry"])&&this.updateByPatchedOpGeometry(ol.drop(e,1),n.geometry,i)}removeInteractionGeometry(){var e;(e=this.localGeometry)==null||e.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,n){var r;this.invalidateDownstreamBooleanData();let i=this.data.geometry.type;if(i==="NonParametricGeometry"||i==="SubdivGeometry"){let s=e;if(this.localGeometry===void 0){let h={...this.data.geometry,...s};this.localGeometry=SL(h,n,this.data.flatShading)}let o,a,l;s.scaleBaked?[o,a,l]=s.scaleBaked:{width:o,height:a,depth:l}=s;let c=this.localGeometry.userData;c.sxPrev!==void 0&&AH(this.localGeometry.attributes,o/c.sxPrev,a/c.syPrev,l/c.szPrev),c.sxPrev=o,c.syPrev=a,c.szPrev=l}else{let s={...this.data.geometry,...e};(r=this.localGeometry)==null||r.dispose(),this.localGeometry=SL(s,n,this.data.flatShading)}}refreshAttachedCloners(e){for(let n of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(n.object)}refreshAttachedPaths(e){for(let n of this.attachedPaths)e.scene.addPendingCommand(()=>n.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,n,i){var s;let r=!1;e.type===0&&e.path.length===0&&r1e(["scaleBaked"],Object.keys(e.props))&&this.geometryCreateDeleyed instanceof Yo&&this.chooseGeoemtryCache(i.shared).mutateIfUnique(this.geometryCreateDeleyed.data,n)===this.geometryCreateDeleyed&&(r=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(n,e.props.scaleBaked),this.refreshAttachedCloners(i),this.refreshAttachedPaths(i)),r||((s=i.scene)==null||s.markGeometryCacheDirty(),this.createGeometryDelayed(i)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,n){this.createGeometryDelayed(n)}updateState(e,n){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,n),super.updateState(e,n)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,n){let i=this.geometry.userData.parameters;this.is2DType?e.set(0,0,i.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),n.set(i.width,i.height,i.depth??0).multiplyScalar(.5)):e.setScalar(0),n.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}};function Rgt(t){var o,a;if(t.geometry.attributes.extrudeNormal||!t.geometry.attributes.position||!t.geometry.attributes.normal)return;let e=new Map,n=t.geometry.attributes,i=n.position.array,r=n.normal.array,s=new Float32Array(i.length);for(let l=0;l<i.length;l+=3){let c=`${i[l]}_${i[l+1]}_${i[l+2]}`,h=new q(r[l],r[l+1],r[l+2]);e.has(c)?(o=e.get(c))==null||o.normals.push(h):e.set(c,{normals:[h],result:new q})}e.forEach((l,c)=>{for(let h of l.normals)l.result.add(h);l.result.divideScalar(l.normals.length)});for(let l=0;l<i.length;l+=3){let c=`${i[l]}_${i[l+1]}_${i[l+2]}`,h=(a=e.get(c))==null?void 0:a.result;h&&(s[l]=h.x,s[l+1]=h.y,s[l+2]=h.z)}t.geometry.setAttribute("extrudeNormal",new it(s,3))}function Igt(t){if(t.geometry.attributes.extrudeNormals||!t.geometry.attributes.position)return;let e=t.geometry.attributes.position.array,n=new Float32Array(e.length),i=new q;for(let r=0;r<e.length;r+=3)i.set(e[r],e[r+1],e[r+2]).normalize(),n[r]=i.x,n[r+1]=i.y,n[r+2]=i.z;t.geometry.setAttribute("extrudeNormal",new it(n,3))}function u$(t){if(Array.isArray(t.material)){for(let e of t.material)if(e.getLayersOfType("outline").length===0)return}else if(!(t.material instanceof $m)||t.material.getLayersOfType("outline").length===0)return;t instanceof qm&&t.is2DAndNoDepth?Igt(t):Rgt(t)}function h$(t){if(!t.geometry.attributes.position)return;let e=t.geometry.attributes.position.array,n=new Float32Array(e.length),i=parseInt(t.uuid.replace(/\D/g,"")),r=[zi.seededRandom(i),zi.seededRandom(i+1e4),zi.seededRandom(i+2e4)];for(let s=0;s<e.length;s++)n[s]=r[s%3];t.geometry.setAttribute("randomColor",new Nt(n,3))}r$.then(t=>{});var ch=new ao,ES=new q;function Bgt(t){let e=!1;return t.scene.objects.traverse((n,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(e=!0)}),e}var PH=class extends qm{constructor(e,n,i){super(e,n,i),this.data=n,this.hiddenMatrixOld=new at,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,n){let i=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),n.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var o,a,l;if(this.skipReactionUpdate===!0)return;let n=(o=this.localGeometry)==null?void 0:o.uuid,{originalGeometry:i,subdividedGeometry:r,subdivPointer:s}=Yo.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=s,i!==void 0&&((a=this.originalGeometry)==null||a.dispose(),this.originalGeometry=i),r!==void 0&&((l=this.subdividedGeometry)==null||l.dispose(),this.subdividedGeometry=r??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,u$(this),h$(this),this.calcBoundingBox(),n&&(this.localGeometry.uuid=n)}updateState(e,n){if(super.updateState(e,n),e.flatShading!==void 0){let i=this.material;this.material=i.getFlavor(!1,i.side,i.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(n)}}updateMesh(e=!1){Yo.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&Yo.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=Yo.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Yo.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,n){let i=this.localGeometry;this.localGeometry=this.originalGeometryNew,Wm.prototype.raycast.call(this,e,n),this.localGeometry=i}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Oo,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let n=e.attributes.position,i=e.boundingSphere.center;ch.setFromBufferAttribute(n),ch.getCenter(i),e.boundingSphere.radius=i.distanceTo(ch.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),ch.getSize(ES),this.hasNonUniformScale&&ES.divide(this.scale);let r={width:ES.x,height:ES.y,depth:ES.z};return this.geometry.userData.parameters=r,r}updateBoundingSphere(e){let n=this.originalGeometry;ch.min.set(e[0],e[2],e[4]),ch.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(ch.min.applyMatrix4(this.shearScaleInv),ch.max.applyMatrix4(this.shearScaleInv)),n.boundingSphere===null&&(n.boundingSphere=new Oo);let i=n.boundingSphere.center;ch.getCenter(i),n.boundingSphere.radius=i.distanceTo(ch.max)}freeSubdivPointer(){var e,n;this.subdivPointer&&(Yo.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(n=this.subdividedGeometry)==null||n.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,n,i){super.updateByPatchedOpGeometry(e,n,i),this.localGeometry&&this.createGeometryByControls(n)}},are=-1,kgt=1,Fgt={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},Ngt={polygon_center:0,edge:1,vertex:2},WP=(t,e)=>(n,i)=>!e||n===0||t===0?0:t*i/100,un=(t,e)=>{let n=Math.abs(e),i=n*-1;return(t-are)*(n-i)/(kgt-are)+i};function zgt(t){let e=[],n={};for(var i=0,r=t.length;i<r;i++){var s=JSON.stringify(t[i].pos.map(o=>Math.round(o*1e4)/1e4));n[s]||(e.push(t[i]),n[s]=!0)}return e}var Ugt=new q,$P=new q,Ggt=new q,Hgt=new q;function lb(t,e){let n=Ggt.fromArray(t),i=Hgt.fromArray(e);$P.copy(i).sub(n);let r=$P.length();return $P.normalize().multiplyScalar(r*.5),Ugt.copy(n).add($P).toArray()}var mc=new Zo,qP=new q,ML=new q,x0=new q;function jgt(t){let e=[];for(let n=0;n<=t.index.count;n++)if(qP.fromArray(t.index.array,n*3),mc.setFromAttributeAndIndices(t.attributes.position,qP.x,qP.y,qP.z),mc.getNormal(ML),mc.getMidpoint(x0),!(isNaN(x0.x)||isNaN(x0.y)||isNaN(x0.z))){let{a:i,b:r,c:s}=mc,o=i.toArray(),a=r.toArray(),l=s.toArray(),c=i.distanceTo(r),h=r.distanceTo(s),u=s.distanceTo(i),d=lb(o,a),f=lb(a,l),p=lb(l,o),m=[c,h,u],g=Math.max(...m),v=m.filter(b=>Math.round(b)===Math.round(g)).length>1,y=[],x=mc.getMidpoint(x0).toArray();g===c&&!v&&(y=[f,p,p],x=d),g===h&&!v&&(y=[d,p,p],x=f),g===u&&!v&&(y=[d,f,f],x=p),v&&(y=[d,f,p]),e.push({vertices:[o,a,l],faceCenters:y,midpoint:x,norm:mc.getNormal(ML).toArray()})}return e}function Vgt(t){let e=[],{position:n}=t.attributes;for(let i=0;i<n.count;i++){mc.setFromAttributeAndIndices(n,i*3,i*3+1,i*3+2),mc.getNormal(ML),mc.getMidpoint(x0);let r=mc.a.toArray(),s=mc.b.toArray(),o=mc.c.toArray();e.push({vertices:[r,s,o],faceCenters:[lb(r,s),lb(s,o),lb(o,r)],midpoint:x0.toArray(),norm:ML.toArray()})}return e}var Wgt=4,$gt=.5,z4=t=>.5*(1-Math.cos(t*Math.PI)),qgt=class{constructor(){this.perlin=new Array(4095+1)}noise(e,n=0,i=0){if(this.perlin==null){this.perlin=new Array(4095+1);for(let v=0;v<4095+1;v++)this.perlin[v]=Math.random()}e<0&&(e=-e),n<0&&(n=-n),i<0&&(i=-i);let r=Math.floor(e),s=Math.floor(n),o=Math.floor(i),a=e-r,l=n-s,c=i-o,h,u,d=0,f=.5,p,m,g;for(let v=0;v<Wgt;v++){let y=r+(s<<4)+(o<<8);h=z4(a),u=z4(l),p=this.perlin[y&4095],p+=h*(this.perlin[y+1&4095]-p),m=this.perlin[y+16&4095],m+=h*(this.perlin[y+16+1&4095]-m),p+=u*(m-p),y+=256,m=this.perlin[y&4095],m+=h*(this.perlin[y+1&4095]-m),g=this.perlin[y+16&4095],g+=h*(this.perlin[y+16+1&4095]-g),m+=u*(g-m),p+=z4(c)*(m-p),d+=p*f,f*=$gt,r<<=1,a*=2,s<<=1,l*=2,o<<=1,c*=2,a>=1&&(r++,a--),l>=1&&(s++,l--),c>=1&&(o++,c--)}return d}noiseSeed(e){let n=(()=>{let i,r;return{setSeed(s){r=i=(s??Math.random()*4294967296)>>>0},getSeed(){return i},rand(){return r=(1664525*r+1013904223)%4294967296,r/4294967296}}})();n.setSeed(e),this.perlin=new Array(4095+1);for(let i=0;i<4095+1;i++)this.perlin[i]=n.rand()}},Xgt=qgt,lre=new q,cre=new at,ure=new sg;function Ygt(t){let e=!1;return t.scene.objects.traverse((n,i)=>{i.type==="Mesh"&&i.geometry.type==="TextGeometry"&&(e=!0)}),e}var mxe=class extends qm{constructor(e,n,i){super(e,n,i),this.data=n}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var n;let e=this.dataPatched;return((n=this.font)==null?void 0:n.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,n){let{matrixWorld:i}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(cre.copy(i).invert(),ure.copy(e.ray).applyMatrix4(cre),ure.intersectBox(this.singleBBox,lre))){let r=lre.applyMatrix4(i),s=e.ray.origin.distanceTo(r);n.push({distance:s,point:r.clone(),object:this})}}},Uo=1e-4,uh,gxe,vxe,yxe,hre=new q,dre=new q;r$.then(t=>{uh=t,gxe=[uh.get_face_center,uh.get_edge_midpoint,uh.get_vertex_position],vxe=[uh.get_face_normal,uh.get_edge_normal,uh.get_vertex_normal],yxe=[uh.face_count,uh.edge_count,uh.vertex_count]});var Kgt=new at,Jgt=new at,_p=new q,Fg=new q,CS=new q,U4=new q,Zgt=new q,Qgt=new q,zd=new Xgt,xxe=class extends JW(wn){constructor(e,n){super(),this.parameters=n,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let n of this.children)n instanceof wA&&n.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(n=>{n instanceof wA&&n.object===e&&(n.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let n;if(e!==void 0?n=e:n=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(n=0),this.parameters.type==="toObject"&&this.objectForSample){for(let r=0,s=this.children.length;r<s;++r)this.remove(this.children[0]);let i=this.children;if(i.length===n)return;if(i.length<n)for(let r=0,s=n-i.length;r<s;++r){let o=new wA(this.object);o.expand(),this.add(o)}else for(let r=0,s=i.length-n;r<s;++r)this.remove(i[r])}else{if(this.children.length===n)return;if(this.children.length<n)for(let i=0,r=n-this.children.length;i<r;++i){let s=new wA(this.object);s.expand(),this.add(s)}else for(let i=0,r=this.children.length-n;i<r;++i)this.remove(this.children[0])}}_updateRadial(e){let n=e.radial,i=n.start*zi.DEG2RAD,r=n.end*zi.DEG2RAD,s=i-r,o=new Dc(n.rotation[0],n.rotation[1],n.rotation[2]),a;switch(n.axis){case"z":a=new q(0,0,1);break;case"y":a=new q(0,1,0);break;default:case"x":a=new q(1,0,0);break}let l=e.randomnessObject??sm.defaultData([1,1,1]).randomnessObject,c=l.noiseType==="perlin";zd.noiseSeed(l.seed);let h=A4((0,yS.default)(l.seed)),u=WP(l.strength,this.parameters.randomness);for(let[d,f]of this.children.entries()){let p=d*(l.freqScale/10)+l.movement,m=c?zd.noise(p):h(p,p);f.scale.x=n.scale[0]+u(d,un(m,l.scale[0]))||Uo,f.scale.y=n.scale[1]+u(d,un(m,l.scale[1]))||Uo,f.scale.z=n.scale[2]+u(d,un(m,l.scale[2]))||Uo,f.position.setScalar(0);let g=s/e.count*d-i;switch(n.axis){case"x":f.rotation.set(0,g,0);break;case"y":f.rotation.set(0,0,g);break;case"z":f.rotation.set(g,0,0);break}f.translateOnAxis(a,n.radius),f.position.x+=n.position[0]+u(d,un(m,l.position[0])),f.position.y+=n.position[1]+u(d,un(m,l.position[1])),f.position.z+=n.position[2]+u(d,un(m,l.position[2]));let v=u(d,un(m,l.rotation[0])),y=u(d,un(m,l.rotation[1])),x=u(d,un(m,l.rotation[2]));n.alignment===!0?(f.rotation.x+=o.x+v,f.rotation.y+=o.y+y,f.rotation.z+=o.z+x):f.rotation.set(o.x+v,o.y+y,o.z+x)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let n=e.linear,i=new Dc(n.rotation[0],n.rotation[1],n.rotation[2]),r=e.randomnessObject??sm.defaultData([1,1,1]).randomnessObject,s=r.noiseType==="perlin";zd.noiseSeed(r.seed);let o=A4((0,yS.default)(r.seed)),a=WP(r.strength,this.parameters.randomness);for(let[l,c]of this.children.entries()){let h=l*(r.freqScale/10)+r.movement,u=s?zd.noise(h):o(h,h),d=a(l,un(u,r.rotation[0])),f=a(l,un(u,r.rotation[1])),p=a(l,un(u,r.rotation[2]));c.scale.x=1+(n.scale[0]-1)*l+a(l,un(u,r.scale[0]))||Uo,c.scale.y=1+(n.scale[1]-1)*l+a(l,un(u,r.scale[1]))||Uo,c.scale.z=1+(n.scale[2]-1)*l+a(l,un(u,r.scale[2]))||Uo,c.rotation.x=i.x*l+d,c.rotation.y=i.y*l+f,c.rotation.z=i.z*l+p,c.position.x=n.position[0]*l+a(l,un(u,r.position[0])),c.position.y=n.position[1]*l+a(l,un(u,r.position[1])),c.position.z=n.position[2]*l+a(l,un(u,r.position[2]))}}_updateGrid(e){let n=0,i=e.grid,r=e.randomnessObject??sm.defaultData([1,1,1]).randomnessObject,s=WP(r.strength,this.parameters.randomness),o=r.noiseType==="perlin";zd.noiseSeed(r.seed);let a=Zft((0,yS.default)(r.seed));if(i.useCenter===!0){let l={x:i.count[0]%2===0?2:1,y:i.count[1]%2===0?2:1,z:i.count[2]%2===0?2:1},c=new q(i.size[0]*(i.count[0]-l.x)*.5,i.size[1]*(i.count[1]-l.y)*.5,i.size[2]*(i.count[2]-l.z)*.5);for(let h=0;h<i.count[0];h++)for(let u=0;u<i.count[1];u++)for(let d=0;d<i.count[2];d++){let f=[(h+1)*(r.freqScale/10)+r.movement,(u+1)*(r.freqScale/10)+r.movement,(d+1)*(r.freqScale/10)+r.movement],p=o?zd.noise(...f):a(...f),m=this.children[n++];m.scale.x=1+s(n,un(p,r.scale[0]))||Uo,m.scale.y=1+s(n,un(p,r.scale[1]))||Uo,m.scale.z=1+s(n,un(p,r.scale[2]))||Uo;let g=s(n,un(p,r.rotation[0])),v=s(n,un(p,r.rotation[1])),y=s(n,un(p,r.rotation[2]));m.rotation.set(g,v,y),m.position.x=i.size[0]*h-c.x+s(n,un(p,r.position[0])),m.position.y=i.size[1]*u-c.y+s(n,un(p,r.position[1])),m.position.z=i.size[2]*d-c.z+s(n,un(p,r.position[2]))}}else for(let l=0;l<i.count[0];l++)for(let c=0;c<i.count[1];c++)for(let h=0;h<i.count[2];h++){let u=[(l+1)*(r.freqScale/10)+r.movement,(c+1)*(r.freqScale/10)+r.movement,(h+1)*(r.freqScale/10)+r.movement],d=o?zd.noise(...u):a(...u),f=this.children[n++];f.scale.x=1+s(n,un(d,r.scale[0]))||Uo,f.scale.y=1+s(n,un(d,r.scale[1]))||Uo,f.scale.z=1+s(n,un(d,r.scale[2]))||Uo;let p=s(n,un(d,r.rotation[0])),m=s(n,un(d,r.rotation[1])),g=s(n,un(d,r.rotation[2]));f.rotation.set(p,m,g),f.position.x=i.size[0]*l+s(n,un(d,r.position[0])),f.position.y=-i.size[1]*c+s(n,un(d,r.position[1])),f.position.z=-i.size[2]*h+s(n,un(d,r.position[2]))}}_updateToObject(e){var g;if(e.type!=="toObject")throw new Error;let{toObject:n}=e,i=new Dc(n.rotation[0],n.rotation[1],n.rotation[2]),r=e.randomnessObject??sm.defaultData([1,1,1]).randomnessObject,s=r.noiseType==="perlin";zd.noiseSeed(r.seed);let o=A4((0,yS.default)(r.seed)),a=WP(r.strength,this.parameters.randomness);if(!n.object){for(let[,v]of this.children.entries())v.position.set(0,0,0),v.scale.setScalar(1),v.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof mxe)if(!((g=this.objectForSample.font)!=null&&g.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let l=this.getSubdivData(),c=[],h=v=>{let y=v.length,x=v.map(A=>A[0]).reduce((A,E)=>A+E,0),b=v.map(A=>A[1]).reduce((A,E)=>A+E,0),S=v.map(A=>A[2]).reduce((A,E)=>A+E,0);return[x/y,b/y,S/y]},u=v=>Math.round(v*1e6)/1e6;l.forEach(v=>{let y=l.filter(x=>u(v.pos[0])===u(x.pos[0])&&u(v.pos[1])===u(x.pos[1])&&u(v.pos[2])===u(x.pos[2]));y.length>1?c.push({pos:v.pos,norm:h(y.map(x=>x.norm))}):c.push(v)});let d=zgt(c);if(l.length>0){let v=Math.round(d.length*n.count/100);this._updateCount(v)}this.objectForSample.updateMatrixWorld();let f=new Qft(this.objectForSample).build(),p=Fgt[n.axis],m=this.children;f.setRandomGenerator((0,yS.default)(this.object.uuid+n.seed));for(let[v,y]of m.entries()){let x=v*(r.freqScale/10)+r.movement,b=s?zd.noise(x):o(x,x),S=a(v,un(b,r.rotation[0])),A=a(v,un(b,r.rotation[1])),E=a(v,un(b,r.rotation[2]));n.spreadType==="random"?f.sample(CS,U4):(d.length&&(CS.fromArray(d[v].pos),U4.fromArray(d[v].norm)),this.objectForSample instanceof PH&&CS.applyMatrix4(Kgt.copy(this.objectForSample.matrixWorld).invert())),CS.applyMatrix4(this.object.hiddenMatrix.clone().invert()),y.position.copy(CS),_p.fromArray(p);let M=n.align==="normal"?U4:this.object.getWorldDirection(Qgt),C=Fg.fromArray(n.position);Fg.x+=Fg.x+a(v,un(b,r.position[0])),Fg.y+=Fg.y+a(v,un(b,r.position[1])),Fg.z+=Fg.z+a(v,un(b,r.position[2]));let T=Math.acos(M.dot(_p)),D=Zgt.crossVectors(_p,M).normalize(),L=Jgt.makeRotationAxis(D,T),I=M.clone().cross(this.object.up).normalize(),R=I.clone().cross(M).normalize(),H=new at().makeBasis(I,M,R),Z=new q(_p.y,_p.z,_p.x).normalize(),ee=Z.clone().cross(_p).normalize(),F=new at().makeBasis(Z,_p,ee).invert(),V=new at().multiplyMatrices(H,F);y.rotation.setFromRotationMatrix(V),C.applyMatrix4(L),y.position.add(C),y.rotation.x=y.rotation.x+i.x+S,y.rotation.y=y.rotation.y+i.y+A,y.rotation.z=y.rotation.z+i.z+E,y.scale.setScalar(1),y.scale.x=y.scale.x+n.scale[0]+a(v,un(b,r.scale[0]))||Uo,y.scale.y=y.scale.y+n.scale[1]+a(v,un(b,r.scale[1]))||Uo,y.scale.z=y.scale.z+n.scale[2]+a(v,un(b,r.scale[2]))||Uo,y.scale.multiply(this.object.scale),y.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if(e==="random")return[];if(this.objectForSample instanceof PH){let n=this.objectForSample,i=Ngt[e],r=yxe[i],s=gxe[i],o=vxe[i],a=[],l=r(n.subdivPointerNew);for(let c=0;c<=l-1;c++){let h=s(n.subdivPointerNew,c),u=o(n.subdivPointerNew,c);hre.fromArray(h).applyMatrix4(n.matrixWorld),dre.fromArray(u),a.push({pos:hre.toArray(),norm:dre.toArray()})}return a}else return(this.objectForSample.geometry.index?jgt(this.objectForSample.geometry):Vgt(this.objectForSample.geometry)).map((n,i)=>e==="polygon_center"?{pos:n.midpoint,norm:n.norm}:e==="vertex"?[{pos:n.vertices[0],norm:n.norm},{pos:n.vertices[1],norm:n.norm},{pos:n.vertices[2],norm:n.norm}]:e==="edge"?[{pos:n.faceCenters[0],norm:n.norm},{pos:n.faceCenters[1],norm:n.norm},{pos:n.faceCenters[2],norm:n.norm}]:[]).flat()}updateState(e,n){var i;if(this.parameters=vB(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(i=this.object.parent)==null||i.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let r=n.find(this.parameters.toObject.object);r instanceof Wm?this.objectForSample=r:this.objectForSample=void 0,this.matrix=new at,this.hiddenMatrix=new at,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,r&&r.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},$E=t=>{var e;return e=class extends t{},e.geometryHelper=new Ia(30,30,30),e},XP=new sg,G4=new Oo,fre=new at,qE=(t,e,n,i,r=!1)=>{let s=e,o=t.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),G4.copy(s.boundingSphere),G4.applyMatrix4(o),n.ray.intersectsSphere(G4)===!1||(fre.copy(o).invert(),XP.copy(n.ray).applyMatrix4(fre),s.boundingBox!==null&&XP.intersectsBox(s.boundingBox)===!1))return;let a,l,c,h,u=s.index,d=s.attributes.position,f=s.drawRange,p,m;if(r===!1){let v=Math.max(0,f.start),y=Math.min(u.count,f.start+f.count);for(p=v,m=y;p<m;p+=3)if(l=u.getX(p),c=u.getX(p+1),h=u.getX(p+2),a=g(t,n,XP,d,l,c,h),a){a.faceIndex=Math.floor(p/3),i.push(a);return}}else{let v=s.attributes.position,y=new q,x=new q,b=new q,S=new q,A=2,E=1/((t.scale.x+t.scale.y+t.scale.z)/3),M=E*E,C=Math.max(0,f.start),T=Math.min(v.count,f.start+f.count);for(let D=C,L=T-1;D<L;D+=A){if(y.fromBufferAttribute(v,D),x.fromBufferAttribute(v,D+1),XP.distanceSqToSegment(y,x,S,b)>M)continue;S.applyMatrix4(t.matrixWorld);let I=n.ray.origin.distanceTo(S);I<n.near||I>n.far||i.push({distance:I,point:b.clone().applyMatrix4(t.matrixWorld),object:t})}}function g(v,y,x,b,S,A,E){let M=new q,C=new q,T=new q,D=new q,L=new q;if(M.fromBufferAttribute(b,S),C.fromBufferAttribute(b,A),T.fromBufferAttribute(b,E),x.intersectTriangle(M,C,T,!1,D)===null)return null;L.copy(D),L.applyMatrix4(v.matrixWorld);let I=y.ray.origin.distanceTo(L);return I<y.near||I>y.far?null:{faceIndex:1,distance:I,point:L.clone(),object:v}}},YP=new q,ql=new jv,e0t=class extends Tl{constructor(e){let n=new yt,i=new $s({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={},a=new nt(15711266),l=new nt(15711266),c=new nt(2857471);h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",l),h("p","n2",l),h("p","n3",l),h("p","n4",l),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c);function h(d,f,p){u(d,p),u(f,p)}function u(d,f){r.push(0,0,0),s.push(f.r,f.g,f.b),o[d]===void 0&&(o[d]=[]),o[d].push(r.length/3-1)}n.setAttribute("position",new it(r,3)),n.setAttribute("color",new it(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){let e=this.geometry,n=this.pointMap;ql.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let i=1,r=1,s=.8;nu("n1",n,e,ql,-i,-r,s),nu("n2",n,e,ql,i,-r,s),nu("n3",n,e,ql,-i,r,s),nu("n4",n,e,ql,i,r,s);let o=s;nu("f1",n,e,ql,-i,-r,o),nu("f2",n,e,ql,i,-r,o),nu("f3",n,e,ql,-i,r,o),nu("f4",n,e,ql,i,r,o);let a=o,l=.5;nu("u1",n,e,ql,i*.7*l,r*1.1,a),nu("u2",n,e,ql,-i*.7*l,r*1.1,a),nu("u3",n,e,ql,0,r*(1.1+.9*l),a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function nu(t,e,n,i,r,s,o){YP.set(r,s,o).unproject(i);let a=e[t];if(a!==void 0){let l=n.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],YP.x,YP.y,YP.z)}}var t0t=class extends $E(e0t){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,n){qE(this.object,this.geometry,e,n,!0)}},DH;(t=>t.is=e=>"objectHelper"in e)(DH||(DH={}));var xB=(t,e)=>class extends l1e(t){constructor(){super(...arguments),this.objectHelper=new e(this),this.gizmos={}}get geometryHelper(){return e.geometryHelper}raycast(n,i){this.objectHelper.raycast(n,i)}showGizmos(){for(let n in this.gizmos){let i=this.gizmos[n];i instanceof w2&&(i.visible=!0)}}updateEntityBoxSize(n,i){this.objectHelper.visible&&this.geometryHelper instanceof Ia?(n.setScalar(0),i.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(n,i)}hideGizmos(){for(let n in this.gizmos){let i=this.gizmos[n];i instanceof w2&&(i.visible=!1)}}},H4=790,i1=new q,j4=new q,V4=new Rr,W4=new q,TS=new q,$4=new q,uM=class extends xB(jv,t0t){constructor(e="",n={...dL.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=T2.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.super_Entity(e,n),this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let i=this.width,r=this.height;if(n.orthographic.autoZoom){let s=n.orthographic.autoZoomFrustumSize??H4,o=i/r,a=i>r?o:1,l=i>r?1:o;this.orthoCamera=new Uf(-s*.5*a,s*.5*a,s*.5*(1/l),-s*.5*(1/l),-5e4,1e4)}else this.orthoCamera=new Uf(i*-.5,i*.5,r*.5,r*-.5,-5e4,1e4);this.perspCamera=new Vr(45,i/r,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,n){e==="PerspectiveCamera"?this.perspCamera.near=n:this.orthoCamera.near=n}setZoom(e,n){n>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=n:this.orthoCamera.zoom=n)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,n,i){typeof e=="number"&&(e=new q(e,n,i)),super.lookAt(e),this.getWorldPosition(i1),this.targetOffset=i1.distanceTo(e)}getTarget(e=new q){return this.getWorldDirection(j4),this.getWorldPosition(i1),j4.multiplyScalar(this.targetOffset),e.copy(i1).add(j4),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(i1),i1.distanceTo(e)}updateUp(){this.getWorldQuaternion(V4),W4.set(0,0,1).applyQuaternion(V4),TS.copy(wn.DEFAULT_UP),this.isUpVectorFlipped&&TS.negate(),TS.applyQuaternion(V4),$4.copy(wn.DEFAULT_UP).projectOnPlane(W4),this.angleOffsetFromUp=$4.angleTo(TS),this.angleOffsetFromUp*=$4.cross(TS).dot(W4)>=0?1:-1}updateTransformState(e){let n=super.updateTransformState(e);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),n}getViewFrontToObject(e){let n=e.getWorldPosition(new q),i=e.getWorldDirection(new q).multiplyScalar(this.targetOffset);return{position:n.clone().add(i),target:n}}getViewToObject(e){let n=e.getWorldPosition(new q),i=this.getWorldDirection(new q).multiplyScalar(this.targetOffset);return{position:n.clone().sub(i),target:n}}setViewplaneSize(e,n){if(this.aspect=e/n,this.data.type==="OrthographicCamera"&&this.data.orthographic.autoZoom){let i=this.data.orthographic.autoZoomFrustumSize??H4,r=e>n?this.aspect:1,s=e>n?1:this.aspect;this.left=-i*.5*r,this.right=i*.5*r,this.top=i*.5*(1/s),this.bottom=-i*.5*(1/s)}else this.left=-e*.5,this.right=e*.5,this.top=n*.5,this.bottom=-n*.5;this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,n,i,r,s,o){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,n,i,r,s,o):this.orthoCamera.setViewOffset(e,n,i,r,s,o)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,n){return super.copy(e,n),this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let n={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom,autoZoom:!0,autoZoomFrustumSize:H4},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return gH(n,e)}updateCameraSubtype(e,n){let i=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";n.zoom!==void 0&&this.setZoom(i,n.zoom),n.near!==void 0&&this.setNear(i,n.near),n.fov!==void 0&&i==="PerspectiveCamera"&&(this.fov=n.fov)}updateState(e,n){this.updateCameraState(e,n)}updateCameraState(e,n){this.updateState_Entity(e,n),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,n,i){super.updateByPatchedOp(e,n,i),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},pre=new at,iw=class extends WE{constructor(t,e,n){super(t,e),this.data=e,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new yt,this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(t,e,n){super.updateByPatchedOp(t,e,n),t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&t.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(t,e=!0){var i;if(this.booleanMeshSetAddress!==-1&&!t)return;for(let r=0;r<this.children.length;r++){let s=this.children[r];s instanceof iw&&s.recomputeBoolean(t===!0,e)}this.meshSetAddresses=[];for(let r=0;r<this.children.length;r++){let s=this.children[r];if(s instanceof Wm&&s.dataPatched.visible===!0&&((i=s.geometry.attributes.position)==null?void 0:i.count)>0&&s.geometry.drawRange.count>0){if(s.booleanMeshSetAddress===-1){if((s.geometry.index??s.geometry.getAttribute("position")).count/3<15e5&&(s.booleanMeshSetAddress=Gp.getMeshSet(s.geometry,t===!0,e)),s.booleanMeshSetAddress===-1)return;Gp.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1}else s instanceof iw&&s.needsTransformForDownstream===!0?(Gp.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.needsTransformForDownstream=!1):s.booleanWasTransformed===!0&&(pre.multiplyMatrices(s.matrix,s.booleanMatrixInvOld),Gp.transformMeshSet(s.booleanMeshSetAddress,pre),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1);this.meshSetAddresses.push(s.booleanMeshSetAddress)}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new Uge([],0)),this.geometry.setDrawRange(0,0);return}if(t===!0)return Gp.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let n=this.geometry;n.dispose(),this.geometry=new yt,this.geometry.userData=n.userData,this.geometry.boundingSphere=n.boundingSphere;try{this.booleanMeshSetAddress=Gp.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(r){this.booleanMeshSetAddress=0,console.error(r)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,u$(this),h$(this)}dispose(){super.dispose(),this.geometry.dispose()}},mre;(t=>{function e(n){return Ji.is(n)&&n instanceof ep}t.is=e})(mre||(mre={}));var d$=(t,e)=>class extends xB(t,e){updateState_Light(n,i){this.updateState_Entity(n,i),n.color!==void 0&&(this.color=i.shared.color(n.color)),n.intensity!==void 0&&(this.intensity=n.intensity),n.depth!==void 0&&(this.shadow.camera.far=n.depth,this.shadow.needsUpdate=!0),n.shadows!==void 0&&(this.castShadow=n.shadows)}},KP=t=>t instanceof Wm,JP=t=>t!==null&&t instanceof iw,n0t=t=>t instanceof uM,i0t=t=>DH.is(t),f$=class extends $E(F0e){constructor(e,n=15){super(n),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}raycast(e,n){qE(this.object,f$.geometryHelper,e,n)}update(){}},gre=class extends xB(ba,f$){constructor(e,n){super(),this.super_Entity(e,n),this.objectHelper.update()}updateState(e,n){this.updateState_Entity(e,n)}},bxe=class extends $E(k0e){constructor(e,n=15,i=10066329){super(e,n,i),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,n){qE(this.object,bxe.geometryHelper,e,n)}},wxe=class extends $E(B0e){constructor(e,n=15,i=6710886){super(e,n,i),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,n){qE(this.object,wxe.geometryHelper,e,n)}},OH=class extends $E(R0e){constructor(e,n=6710886){super(e,n),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,n){qE(this.object,OH.geometryHelper,e,n)}update(){if(this.object!==void 0){let e=OH._vector,n=this.object.distance?this.object.distance:1e3,i=n*Math.tan(this.object.angle);this.cone.scale.set(i,i,n),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let r=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let s=0,o=this.cone.material.length;s<o;s++)this.cone.material[s].color.set(r);else this.cone.material.color.set(r)}}},_xe=OH;_xe._vector=new q;function r0t(t,e){t.shadow.camera.right=e/2,t.shadow.camera.left=-e/2,t.shadow.camera.top=e/2,t.shadow.camera.bottom=-e/2,t.shadow.needsUpdate=!0}var s0t=class extends d$(FE,bxe){constructor(e,n,i){super(),this.super_Entity(e,n),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.top=1250,r.bottom=-1250,r.right=1250,r.left=-1250,r.near=-1e4,r.far=2500;let s=new b2(this.shadow.camera);s.visible=!1,this.gizmos.shadowmap=s}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let n=this.gizmos[e];n instanceof b2&&n.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,n){this.updateState_Light(e,n);let i=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&r0t(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),i&&this.update()}},o0t=class extends d$(kE,wxe){constructor(e,n,i){super(),this.super_Entity(e,n),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=90,r.aspect=1,r.near=100,r.far=2500;let s=new q(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),o=new q(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z),a=new ao(s,o),l=new w2(a,new nt(16755200));l.visible=!1,this.gizmos.shadowmap=l,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let n=this.gizmos[e];if(n instanceof w2){let i=this.shadow.camera,r=new q(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),s=new q(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z);n.box.set(r,s),n.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,n){this.updateState_Light(e,n),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},vre=new q,yre=new q,xre=new Rr,a0t=class extends d$(BE,_xe){constructor(e,n,i){super(),this.super_Entity(e,n),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=zi.RAD2DEG*2*this.angle,r.aspect=1,r.near=100,r.far=2500;let s=new b2(this.shadow.camera);s.visible=!1,this.gizmos.shadowmap=s,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let n=this.gizmos[e];n instanceof b2&&n.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),yre.setFromMatrixPosition(this.matrixWorld),xre.setFromRotationMatrix(this.matrixWorld),vre.copy(this.up).applyQuaternion(xre).negate().multiplyScalar(this.distance),this.target.position.copy(yre).add(vre),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,n){this.updateState_Light(e,n),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},l0t=class extends qm{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,n){let i=this.geometry.getAttribute("position");i!==void 0?s$(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,n):super.updateEntityBoxSize(e,n)}},Sxe=class extends qm{constructor(e,n,i){super(e,n,i),this._shapeId=null,this._context=i}updateState(e,n){super.updateState(e,n),this.updateShape()}updateShape(){var r;let e=this.data.geometry.extrusion.shape,n;if(e.type==="Custom"){let s=e.shapeId;if(s!==this._shapeId&&this.detachShape(),s){this._shapeId=s;let o=this._context.scene.find(s);o!=null&&o.data&&(o.attachedPaths.add(this),n=(r=o.geometry.userData)==null?void 0:r.shape),n||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let s;switch(e.type){case"Rectangle":s=E1e;break;case"Ellipse":s=n$;break;case"Polygon":s=M1e;break;case"Star":s=C1e;break;default:throw new Error(`Unknown shape type: ${e.type}`)}n=s.create({parameters:e}).userData.shape}let i=this.geometry;n&&i.inputs&&(i.inputs.shapeData=n,i.build(),this.attachedSurfaceCloners.forEach(s=>s.update()))}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e){return super.updateTransformState(e)}updateGeometryInteractions(e,n){super.updateGeometryInteractions(e,n),this.updateShape()}updateEntityBoxSize(e,n){let i=this.geometry.getAttribute("position");i!==void 0?s$(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,n):super.updateEntityBoxSize(e,n)}},hM=class extends xB(ba,f$){constructor(e,n,i){super(),n.type==="Instance"&&typeof e=="string"&&(n=this.transformAssignData(n,i)),this.super_Entity(e,n),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,n){let i=n.scene.data.objects.get(e.component);if(i){let r,s;for(let o of ew.rootOverrideProps)e[o]===void 0?(r===void 0&&(r={...e}),r[o]=i.data[o]):(s===void 0&&(s={}),s[o]=e[o]);return this.overrideData=s,r??e}return e}updateByOp(e,n,i,r){let s;if(this.isInstanceRoot&&!r&&(n=this.transformAssignData(n,i),e.type===0&&e.path.length===0&&this.component))for(let o of ew.rootOverrideProps)o in e.props&&e.props[o]===void 0&&(s===void 0&&(s={...e,props:{...e.props}}),s.props[o]=this.component.data[o]);super.updateByOp(s??e,n,i,r)}updateState(e,n){this.updateState_Entity(e,n)}expandInstanceChildren(e){let n=this.data;if(this.component===void 0){this.component=e.scene.find(n.component)??null;let i=!1;if(this.component!==this.oldComponent){if(this.oldComponent){let r=0;for(let s of this.children)if(Ji.is(s))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(s),p$(s),r+=1;else break;this.children.splice(0,r)}i=!0}this.component&&Axe(e,[this.uuid],n.overrides,this,this.component,this.component,0,i),this.oldComponent=this.component}}};function p$(t){if(t.component){let e=t.component.instances.indexOf(t);e>=0&&t.component.instances.splice(e,1);for(let n of t.children)Ji.is(n)&&p$(n)}}function bre(t,e,n,i){return t.component===e&&r1e(t.identity,i)?t.overrideData===n?2:1:0}function Axe(t,e,n,i,r,s,o,a){if(o>50)return!1;if(i.component!==r){if(i.component){let c=i.component.instances.indexOf(i);c>=0&&i.component.instances.splice(c,1)}r.instances.push(i),i.component=r}r instanceof hM&&r.isInstanceRoot&&r.expandInstanceChildren(t);let l=0;for(let c of r.children)if(Ji.is(c)){let h=[...e,...typeof c.identity=="string"?[c.identity]:c.identity],u=fL.resolve(n,h,1),d=null,f;if(!a){let p=i.children[l];if(d=Ji.is(p)?p:null,d!==null){let m=bre(d,c,u,h);f=m>=1?d.stateSelection:void 0,m!==2&&(d=null)}if(d===null&&(d=t.scene.findInstance(h)??null,d!==null)){let m=bre(d,c,u,h);if(f=m>=1?d.stateSelection:void 0,m!==2)d=null;else{let g=d.parent.children.indexOf(d);d.parent.children.splice(g,1),i.children.splice(l,0,d),d.parent===i?g<=l&&console.error("not possible"):(d.parent=i,d.matrixWorldNeedsUpdate=!0,d.resetBBoxNeedsUpdate(),d.updateVisible(),t.pendingDeletes.delete(d))}}}if(d===null){let p=u?Y0.apply(c.data,u):c.data;Mv.is(p.type)&&(p={...p,type:"Empty"}),d=om.createEntity(h,p,t),d.overrideData=u,i.add(d),i.children.splice(i.children.length-1,1),i.children.splice(l,0,d),d.updateState(d.data,t),f&&d.changeSelectedState(f,t),t.scene.registerInstanceAndSetUuid(d)}l+=1,Axe(t,e,n,d,c,s,o+1,a)}if(!a){let c=l;for(;;){let h=i.children[l];if(Ji.is(h))t.pendingDeletes.add(h);else break;l+=1}i.children.splice(c,l-c)}return!0}function c0t(t,e,n){let i;return e.geometry.type==="TextGeometry"?new mxe(t,e,n):(e.geometry.type==="SubdivGeometry"?i=new PH(t,e,n):e.geometry.type==="PathGeometry"?i=new Sxe(t,e,n):e.geometry.type==="VectorGeometry"?i=new l0t(t,e,n):e.geometry.type==="BooleanGeometry"?i=new iw(t,e,n):i=new qm(t,e,n),i)}function m$(t,e,n){return e.type==="Mesh"?c0t(t,e,n):e.type==="Empty"?new gre(t,e):e.type==="PointLight"?new o0t(t,e,n):e.type==="SpotLight"?new a0t(t,e,n):e.type==="DirectionalLight"?new s0t(t,e,n):e.type==="Component"||e.type==="Instance"?new hM(t,e,n):Mv.is(e.type)?new uM(t,e):(console.error(e),new gre(t,e))}om.createEntity=m$;function u0t(t,e,n){let i=m$(t.identity,e,n),r=t.children,s=t.attachedPaths,o=t.parent,a=t.component,l=t.instances,c=t.overrideData,h=t.uuid,u=t.stateSelection;t.dispose();for(let d of Object.keys(t))delete t[d];Object.setPrototypeOf(t,Object.getPrototypeOf(i));for(let d of Object.keys(i))t[d]=i[d];t.children=[...t.children,...r],t.attachedPaths=s,t.parent=o,t.component=a,t.instances=l,t.uuid=h,t.overrideData=c,t.updateState(t.data,n),u&&t.changeSelectedState(u,n),t.resetBBoxNeedsUpdate()}om.changeEntityProptotype=u0t;om.Cloner=xxe;function h0t(t,e,n,i){t.updateByOp(e,n,i,!1)}function wre(t,e){let n=!1,i=e.getLayersOfType("transmission"),r=e.getLayersOfType("outline");return r.length>0&&(t.layers.set(8),i.length>0&&t.layers.enable(3),n=!0,h$(t),u$(t)),i.length===0&&r.length===0&&t.layers.set(0),n}function _re(t,e){if(!e.layers)return!1;let n=!1,i=e.getLayersOfType("transmission").filter(s=>s.data.visible),r=e.getLayersOfType("outline").filter(s=>s.data.visible);return i.length>0&&(t.layers.set(3),r.length>0&&t.layers.enable(8),n=!0),i.length===0&&r.length===0&&t.layers.set(0),n}function d0t(t){let e=!1;return t.traverseEntity(n=>{if(n instanceof WE)if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)wre(n,n.material[i])&&(e=!0);else wre(n,n.material)&&(e=!0)}),e}function f0t(t){let e=!1;return t.traverseEntity(n=>{if(n instanceof WE)if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)_re(n,n.material[i])&&(e=!0);else _re(n,n.material)&&(e=!0)}),e}var p0t=new XI,m0t=new at,g0t=new sg;function v0t(t,e,n){let i=t.cloner;if(i)for(let r of i.children){let s=m0t.copy(r.matrixWorld).invert(),o=g0t.copy(e.ray).applyMatrix4(s),a=t.matrixWorld;o.applyMatrix4(a);let l=p0t;l.set(o.origin,o.direction),l.near=e.near,l.far=e.far,l.intersectObject(t,!1).length>0&&n.push({object:t})}}var y0t=class{constructor(){this._constraints=new Map}setConstraint(e,n){n===null?this._constraints.delete(e):this._constraints.set(e,n)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let n=new Set;this._constraints.forEach((i,r)=>{let s=[r,i],o=i;for(;this._constraints.has(o);)o=this._constraints.get(o),n.has(o)||s.push(o);for(let a=s.length-2;a>=0;a--)if(!n.has(s[a])){let l=e.find(s[a]);l?l.applyPathSnapping(e):console.warn(`missing entity ${s[a]}`),n.add(s[a])}})}findDependency(e,n){let i=e;for(;this._constraints.has(i);)if(i=this._constraints.get(i),i===n)return!0;return!1}},x0t=new ls;x0t.wireframe=!0;var Sre=new q,Mxe=class extends Vb{constructor(e,n){super(),this.data=e,this.backupFog=new SE(16777215,.1,2e3),this.fogUseBGColor=!1,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.bgColor=new Lu(1,1,1,1),this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new y0t,this.needsRecomputeInstances=!1,this.ambientLight=new W9(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.postprocessing=e.postprocessing,this.init(e,n),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=f0t(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=d0t(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let n=e.identity.join("-"),i=this.entityIdentityToEntity[n];i&&(e.uuid=i.uuid),this.entityIdentityToEntity[n]=e,this.entityByUuid[e.uuid]=e}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}getWithSortKey(e){let n=this.find(e);if(n===void 0)return;let i=[],r=n;for(;r!==this;){let s=r;r=r.parent;let o=r.children.indexOf(s);i.splice(0,0,o)}return{entity:n,sortKey:i}}getAllSorted(e){let n=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&n.push(r)}return n.sort((i,r)=>Nst(i.sortKey,r.sortKey)),n.map(i=>i.entity)}nonExistOrDescendantOf(e,n){let i=this.find(e);if(i===void 0)return!0;for(;i;){if(i.uuid===n)return!0;i=i.parent}return!1}find(e){if(e===""||e===void 0)return;let n=this.entityByUuid[e];return n===void 0?this.getObjectByProperty("uuid",e):n}debugEnsureEntity(e){let n=this.find(e);if(n){if(Array.isArray(n.identity)&&this.findInstance(n.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(n=>{this.toExpandCloner.add(n)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var n;(n=e.cloner)==null||n.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateTreeByOp(e,n){var i;if(e.path.length===0&&e.type===7){let r=e.parent===null?this:this.find(e.parent);if(r===void 0)throw new Error("unexpected");let s=this.createObject(e.id,e.data,e.children,r,e.localIndex,n);s.updateVisible(),s.resetBBoxNeedsUpdate(),KP(s)&&JP(s.parent)&&(s.invalidateUpstreamBooleanData(),s.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(r),this.markNeedsRecomputeInstancesForChildren(s),this.markToExpandCloner(s)}else if(e.path.length===0&&e.type===8){let r=this.find(e.id);if(r===void 0)throw new Error("unexpected");this.markToExpandCloner(r),r.resetBBoxNeedsUpdate(),this.unregisterObject(r);let s=r.parent;this.markNeedsRecomputeInstancesForAncessors(s),this.markNeedsRecomputeInstancesForChildren(r),r.parent.remove(r),JP(r.parent)&&(r.parent.invalidateUpstreamBooleanData(),r.parent.invalidateDownstreamBooleanData().recomputeBoolean()),KP(r)&&(r.freeBooleanPointer(),s instanceof iw&&s.invalidateDownstreamBooleanData().recomputeBoolean()),r instanceof Sxe&&r.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),this.pathConstraints.removeDependencies(r.uuid)}else if(e.path.length===0&&e.type===9){let r=this.find(e.id);if(r===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(r);let s=r.parent;this.markNeedsRecomputeInstancesForAncessors(s),(i=r.cloner)==null||i.resetOnMove(),this.markToExpandCloner(r);let o=e.parent===null?this:this.find(e.parent);if(o===void 0)throw new Error("unexpected");o.add(r),this.markNeedsRecomputeInstancesForAncessors(o),this.markToExpandCloner(r),r.invalidateClonerTransform(r),r.updateVisible(),r.resetBBoxNeedsUpdate();let a=e.localIndex;o.children.splice(a,0,o.children.pop()),KP(r)&&(r.invalidateUpstreamBooleanData(),JP(r.parent)?r.parent.invalidateDownstreamBooleanData().recomputeBoolean():s instanceof iw&&s.invalidateDownstreamBooleanData().recomputeBoolean())}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}updateEntityByOp(e,n,i,r){if(n.type===0){if(("overrides"in n.props||"component"in n.props)&&this.markNeedsRecomputeInstances(),n.path.includes("overrides")&&"states"in n.props){let{states:o,rest:a}=n.props;n={...n,props:a},this.markNeedsRecomputeInstances()}n.path[0]==="pathSnapping"&&n.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,n.props.pathId)}let s=this.find(e);if(s)try{h0t(s,n,i,{scene:this,shared:r}),s instanceof qm&&s.updateGeometryGroupsIfNeeded()}catch(o){console.error(o)}}get enableFog(){return this.fog!==null}set enableFog(e){this.fog=e===!0?this.backupFog:null}init(e,n){if(this.createChildrenObjects(e.objects,this,n),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(al(e.backgroundColor,n)),this.updateFog(e.fog,n),this.updateAmbientLight(e.environment.ambientLight,n),this.activeCamera=this.personalCamera,e.publish.playCamera!==null){let i=this.find(e.publish.playCamera);i instanceof uM&&this.switchActiveCamera(i)}this.expandInstances(n,!0),this.traverseEntity(i=>{JP(i)&&i.recomputeBoolean(),i instanceof uM&&i.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(n=>{(n.data.type==="Component"||n.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){Ji.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(n=>{Ji.is(n)&&n.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,n,i,r,s,o,a){e&&e!==r.uuid&&r.find(e)&&s.forInstancesRec(l=>{l.isInstanceRoot||(l.data=sL(l.data,c=>{let h=c.events.data(a.id),u=l.goUp(o);if(u){let d=[...Pye(u.identity),e].join("-"),f=this.entityIdentityToEntity[d];if(f){let p=f.uuid;qh.zoom(h,n)[i]=p}else console.warn("cannot find instance")}}).data)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof hM&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((n,i)=>{n.data.events.forEach(r=>{r.data.type==="GameControl"?n.forInstancesRec(s=>{s.isInstanceRoot||(s.data=sL(s.data,o=>{o.events.delete(r.id)}).data)}):r.data.type==="Conditional"?(r.data.condition.type==="Distance"?(this.relativeizeInner(r.data.condition.fromObject,["condition"],"fromObject",e,n,i,r),this.relativeizeInner(r.data.condition.toObject,["condition"],"toObject",e,n,i,r)):r.data.condition.type==="State"?this.relativeizeInner(r.data.condition.object,["condition"],"object",e,n,i,r):r.data.condition.type==="Comparison"&&(r.data.condition.lOperand.type==="Property"&&this.relativeizeInner(r.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,n,i,r),r.data.condition.rOperand.type==="Property"&&this.relativeizeInner(r.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,n,i,r)),r.data.inActions.forEach(s=>{s.data.type==="Transition"&&this.relativeizeInner(s.data.object,["inActions",s.id],"object",e,n,i,r)}),r.data.outActions.forEach(s=>{s.data.type==="Transition"&&this.relativeizeInner(s.data.object,["outActions",s.id],"object",e,n,i,r)})):"actions"in r.data&&r.data.actions.forEach(s=>{s.data.type==="Transition"&&this.relativeizeInner(s.data.object,["actions",s.id],"object",e,n,i,r)})})}),!0})}expandInstances(e,n){let i=new Set;this.traverseEntity(r=>{if(r instanceof hM&&r.isInstanceRoot)return r.expandInstanceChildren({scene:this,shared:e,pendingDeletes:i}),n||r.resetBBoxNeedsUpdate(),!0});for(let r of i)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),p$(r)}recomputeInstances(e){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(n=>{n instanceof hM&&n.isInstanceRoot&&(n.component=void 0)}),this.expandInstances(e,!1))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(n=>{let i=typeof n.identity=="string"?n.identity:n.identity.join("-");this.entityIdentityToEntity[i]===n&&(delete this.entityByUuid[n.uuid],delete this.entityIdentityToEntity[i]),n.dispose()})}clearScene(){for(let e of this.children)Ji.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,n){this.init(e,n)}createPersonalCamera(){let e=new uM(Mxe.PERSONAL_CAMERA_ID,{...dL.defaultData,name:"Personal Camera"});return e.objectHelper.visible=!1,this.registerObjectCreatedInLegacy(e),e}raycast(e){let n=[],i=r=>{for(let s of r.children){let o=s.cloner;Ji.is(s)&&!s.raycastLock&&(s.visible||o!=null&&o.object.data.visible)&&((KP(s)||i0t(s)&&this.enableHelpers&&s.objectHelper.visible)&&(e.intersectObject(s,!1,n),v0t(s,e,n)),i(s))}};return i(this),n}forEachEntity(e){for(let n of this.children)Ji.is(n)&&e(n)}traverseEntity(e){for(let n of this.children)Ji.is(n)&&n.traverseEntity(e)}traverseObject(e){for(let n of this.children)wL.is(n)&&n.traverseObject(e)}traverseVisibleEntity(e){for(let n of this.children)Ji.is(n)&&n.visible&&n.traverseVisibleEntity(e)}updateFog(e,n){this.enableFog=e.enabled,this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=al(e.color,n),this.backupFog.near=e.near,this.backupFog.far=e.far}dispose(){this.clearScene()}updateAmbientLight(e,n){e.color!==void 0&&(this.ambientLight.color=al(e.color,n)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.groundColor!==void 0&&(this.ambientLight.groundColor=al(e.groundColor,n)),e.enabled!==void 0&&(this.ambientLight.visible=e.enabled)}switchActiveCamera(e){this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}createChildrenObjects(e,n,i){let r=0;for(let s of e)this.createObject(s.id,s.data,s.children,n,r,i),r+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let n of e.children)this.unregisterObject(n)}createObject(e,n,i,r,s,o){var c;let a={scene:this,shared:o},l=m$(e,n,a);return l&&(this.entityByUuid[e]=l,r.add(l),r.children.splice(s,0,r.children.pop()),i.length>0&&(l.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(i,l,o)),l.updateState(n,a),l instanceof qm&&l.updateGeometryGroupsIfNeeded(),l.updateVisible(),l.cloner&&this.toExpandCloner.add(l),(c=n.pathSnapping)!=null&&c.pathId&&this.pathConstraints.setConstraint(e,n.pathSnapping.pathId)),l}getCenter(e){let n=[];for(let r=0,s=e.length;r<s;++r){let{id:o,recursive:a}=e[r],l=this.find(o),c=a?l.recursiveBBox:l.singleBBox;n.push(...c.vertices)}let i=new ao;return i.setFromPoints(n),i.getCenter(Sre),Sre}copyMatrixWorld(e,n){if(e===null){n.identity();return}let i=this.find(e);i?n.copy(i.matrixWorld):n.identity()}copyParentMatrixWorld(e,n){var r;if(e===null){n.identity();return}let i=(r=this.find(e))==null?void 0:r.parent;i?n.copy(i.matrixWorld):n.identity()}traverseMaterial(e){this.traverseEntity(n=>{if(n instanceof Wm)if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)n.material[i]instanceof $m&&e(n.material[i]);else n.material instanceof $m&&e(n.material)})}updateCanvasSize(e,n){this.activeCamera.setViewplaneSize(e,n);let i,r;e>=n?(i=n/e,r=1):(i=1,r=e/n),this.traverseMaterial(s=>{s.getLayersOfType("transmission").forEach(o=>{o.uniforms[`f${o.id}_aspectRatio`].value.x=i,o.uniforms[`f${o.id}_aspectRatio`].value.y=r})})}},Exe=Mxe;Exe.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera";var cm;function b0t(){return cm||(cm=new $rt,cm.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),cm.decoderPending}async function w0t(t){if(cm){let e={attributeIDs:cm.defaultAttributeIDs,attributeTypes:cm.defaultAttributeTypes,useUniqueIDs:!1},n;try{n=await cm.decodeGeometry(new Int8Array(t).buffer,e)}catch(i){console.error(i)}if(n)return{index:n.index?{array:n.index.array}:void 0,attributes:Object.entries(n.attributes).map(([i,r])=>({name:i,itemSize:r.itemSize,array:r.array}))}}return null}async function _0t(t,e){let[n,i]=pye(ZG.deserialize(new Uint8Array(t)));Yft(n);let r=[];n.scene.objects.traverse((s,o)=>{o.type==="Mesh"&&o.geometry.type==="NonParametricGeometry"&&o.geometry.data.draco!==void 0&&r.push(o)}),r.length&&await b0t();for(let s of r){let o=await w0t(Co(s.geometry.data.draco));if(o){o.index&&(s.geometry.data.index={array:o.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let a={};o.attributes.forEach(({name:l,array:c,itemSize:h})=>{a[l]={array:c,itemSize:h,type:"Float32Array",normalized:!1}}),s.geometry.data.attributes=a,s.geometry.data.draco=void 0}}return e&&e(n),i.result().data}function S0t(t){let e;if(t.index)for(let n=0;n<t.index.array.length;n+=3)e=t.index.array[n],t.index.array[n]=t.index.array[n+2],t.index.array[n+2]=e}function A0t(t){let e=new Set;return t.traverse(n=>{if(n instanceof WE)if(Nu(n.material))n.material.forEach(i=>{let r=i;e.has(r)||e.add(r)});else{let i=n.material;e.has(i)||e.add(i)}}),e.forEach(n=>{if(n instanceof Array)return;let i=n.onBeforeCompile.bind(n);if(M0t(n)){Object.assign(n,{isMeshStandardMaterial:!0,isMeshPhysicalMaterial:!0,transmission:1,attenuationColor:new nt,specularColor:new nt});let r=0;n.onBeforeCompile=(s,o)=>{i&&i(s,o),s.uniforms=Object.assign({},fc.physical.uniforms,s.uniforms),n.getLayersOfType("transmission").forEach(a=>{if(s.uniforms.transmissionSamplerMap.value){let l=a.color;l&&(l.transmissionSamplerMap.value=s.uniforms.transmissionSamplerMap.value,l.transmissionSamplerSize.value=s.uniforms.transmissionSamplerSize.value)}else r++,r<2&&(n.needsUpdate=!0)})}}else E0t(n)||(n.onBeforeCompile=(r,s)=>{i&&i(r,s),n.transparent=!1})}),t}function M0t(t){return t.getLayersOfType("transmission").length>0}function E0t(t){let e=0;return t.layers.forEach(n=>{if(n.type!=="light"&&n.type!=="fresnel"){let i=n.uniforms["f"+n.id+"_alpha"];i&&(e+=(1-e)*i.value)}}),e<1}function C0t(t){return t.traverse(e=>{if(e.type==="Camera"){let n=e;n.type=n.cameraType}}),t}function T0t(t){let e=[],n=(i,r=0)=>{let s=r>0?i+r:i;return e.includes(s)?n(i,r+1):s};return t.traverse(i=>{if(e.includes(i.name)){let r=i.name,s=n(i.name);if(i.name=s,i.isMesh){let o=i;o.material instanceof Array?o.material.forEach(a=>{a.name=a.name.replace(r,s)}):o.material.isAsset||(o.material.name=o.material.name.replace(r,s))}}e.push(i.name)}),t}function P0t(t){let e=[];return t.traverse(n=>{n instanceof xxe&&e.push(n)}),e.forEach(n=>{let i=n.object,r=n.children.map(o=>{o.updateMatrix();let a=o.geometry.clone().applyMatrix4(o.matrix);return o.matrix.determinant()<0&&S0t(a),a}),s=oye(n.parameters.hideBase?r:[i instanceof Wm?i.geometry:[],...r]);i instanceof Wm&&(i.geometry=s),n.removeFromParent(),i.setFromClonerState(null,{scene:t,shared:Lgt})}),t}function D0t(t){return t.traverse(e=>{e.matrixAutoUpdate=!0}),t}function O0t(t){Object.values(t.shared.materials).forEach(e=>{q4(e)}),t.scene.objects.traverse((e,n)=>{"material"in n?q4(n.material):"materials"in n&&n.materials.forEach(i=>{q4(i)})})}function q4(t){if(typeof t=="string")return;let e=[];t.layers.forEach((n,i)=>{n.type==="outline"&&e.push(i)}),e.reverse().forEach(n=>{t.layers.delete(n)}),e.length&&console.warn("The Spline Loader currently does not support the outline layer.")}var L0t=oB(rst(),1),Are="The SplineLoader only accepts .splinecode files that are generated from Spline export panel.",R0t=class extends qs{load(e,n,i,r=console.error){let s=new js(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),e.endsWith(".spline")?console.warn(Are+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(Are),s.load(e,async o=>{try{if(typeof o=="string")throw new Error("The .spline file is not binary!");let a=await this.parse(o);n(a)}catch(a){r(a)}},i,r)}async parse(e){let n=await _0t(e,O0t);n.version&&(0,L0t.default)(n.version,"0.9.295")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/loader to the latest version."),await Promise.all([Bgt(n)&&wmt(),Ygt(n)&&_gt()].filter(Boolean));let i=new c$(n.shared);Object.values(i.getMaterials()).forEach(o=>Object.assign(o,{isAsset:!0}));let r=new Exe(n.scene,i);r.remove(r.personalCamera),n.scene.environment.ambientLight.enabled||r.remove(r.ambientLight);let s=n.scene.publish.playCamera;if(s){let o=r.find(s);o&&n0t(o)&&Object.assign(o,{makeDefault:!0})}return r=P0t(r),r=A0t(r),r=C0t(r),r=T0t(r),r=D0t(r),r}};function I0t(t){const e=$u(R0t,t);return IWe(e)}var B0t=Object.create,g$=Object.defineProperty,k0t=Object.getOwnPropertyDescriptor,F0t=Object.getOwnPropertyNames,N0t=Object.getPrototypeOf,z0t=Object.prototype.hasOwnProperty,bB=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),U0t=(t,e)=>{for(var n in e)g$(t,n,{get:e[n],enumerable:!0})},G0t=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of F0t(e))!z0t.call(t,r)&&r!==n&&g$(t,r,{get:()=>e[r],enumerable:!(i=k0t(e,r))||i.enumerable});return t},XE=(t,e,n)=>(n=t!=null?B0t(N0t(t)):{},G0t(e||!t||!t.__esModule?g$(n,"default",{value:t,enumerable:!0}):n,t)),H0t=bB((t,e)=>{(function(n,i){typeof t=="object"?e.exports=i():typeof define=="function"&&define.amd?define(i):n.Alea=i()})(t,function(){return n.importState=function(r){var s=new n;return s.importState(r),s},n;function n(){return function(r){var s=0,o=0,a=0,l=1;r.length==0&&(r=[+new Date]);var c=i();s=c(" "),o=c(" "),a=c(" ");for(var h=0;h<r.length;h++)s-=c(r[h]),s<0&&(s+=1),o-=c(r[h]),o<0&&(o+=1),a-=c(r[h]),a<0&&(a+=1);c=null;var u=function(){var d=2091639*s+l*23283064365386963e-26;return s=o,o=a,a=d-(l=d|0)};return u.next=u,u.uint32=function(){return u()*4294967296},u.fract53=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.version="Alea 0.9",u.args=r,u.exportState=function(){return[s,o,a,l]},u.importState=function(d){s=+d[0]||0,o=+d[1]||0,a=+d[2]||0,l=+d[3]||0},u}(Array.prototype.slice.call(arguments))}function i(){var r=4022871197,s=function(o){o=o.toString();for(var a=0;a<o.length;a++){r+=o.charCodeAt(a);var l=.02519603282416938*r;r=l>>>0,l-=r,l*=r,r=l>>>0,l-=r,r+=l*4294967296}return(r>>>0)*23283064365386963e-26};return s.version="Mash 0.9",s}})}),Cxe=bB((t,e)=>{(function(n,i){typeof t=="object"&&typeof e<"u"?i(t):typeof define=="function"&&define.amd?define(["exports"],i):i((n=typeof globalThis<"u"?globalThis:n||self).SVDJS={})})(t,function(n){n.SVD=function(i,r,s,o,a){if(r=r===void 0||r,s=s===void 0||s,a=1e-64/(o=o||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,c,h,u,d,f,p,m,g,v,y,x,b=i[0].length,S=i.length;if(S<b)throw new TypeError("Invalid matrix: m < n");for(var A=[],E=[],M=[],C=r==="f"?S:b,T=v=p=0;T<S;T++)E[T]=new Array(C).fill(0);for(T=0;T<b;T++)M[T]=new Array(b).fill(0);var D,L=new Array(b).fill(0);for(T=0;T<S;T++)for(l=0;l<b;l++)E[T][l]=i[T][l];for(T=0;T<b;T++){for(A[T]=p,g=0,h=T+1,l=T;l<S;l++)g+=Math.pow(E[l][T],2);if(g<a)p=0;else for(m=(f=E[T][T])*(p=f<0?Math.sqrt(g):-Math.sqrt(g))-g,E[T][T]=f-p,l=h;l<b;l++){for(g=0,c=T;c<S;c++)g+=E[c][T]*E[c][l];for(f=g/m,c=T;c<S;c++)E[c][l]=E[c][l]+f*E[c][T]}for(L[T]=p,g=0,l=h;l<b;l++)g+=Math.pow(E[T][l],2);if(g<a)p=0;else{for(m=(f=E[T][T+1])*(p=f<0?Math.sqrt(g):-Math.sqrt(g))-g,E[T][T+1]=f-p,l=h;l<b;l++)A[l]=E[T][l]/m;for(l=h;l<S;l++){for(g=0,c=h;c<b;c++)g+=E[l][c]*E[T][c];for(c=h;c<b;c++)E[l][c]=E[l][c]+g*A[c]}}v<(y=Math.abs(L[T])+Math.abs(A[T]))&&(v=y)}if(s)for(T=b-1;0<=T;T--){if(p!==0){for(m=E[T][T+1]*p,l=h;l<b;l++)M[l][T]=E[T][l]/m;for(l=h;l<b;l++){for(g=0,c=h;c<b;c++)g+=E[T][c]*M[c][l];for(c=h;c<b;c++)M[c][l]=M[c][l]+g*M[c][T]}}for(l=h;l<b;l++)M[T][l]=0,M[l][T]=0;M[T][T]=1,p=A[T],h=T}if(r){if(r==="f")for(T=b;T<S;T++){for(l=b;l<S;l++)E[T][l]=0;E[T][T]=1}for(T=b-1;0<=T;T--){for(h=T+1,p=L[T],l=h;l<C;l++)E[T][l]=0;if(p!==0){for(m=E[T][T]*p,l=h;l<C;l++){for(g=0,c=h;c<S;c++)g+=E[c][T]*E[c][l];for(f=g/m,c=T;c<S;c++)E[c][l]=E[c][l]+f*E[c][T]}for(l=T;l<S;l++)E[l][T]=E[l][T]/p}else for(l=T;l<S;l++)E[l][T]=0;E[T][T]=E[T][T]+1}}for(o*=v,c=b-1;0<=c;c--)for(var I=0;I<50;I++){for(D=!1,h=c;0<=h;h--){if(Math.abs(A[h])<=o){D=!0;break}if(Math.abs(L[h-1])<=o)break}if(!D){for(d=0,u=h-(g=1),T=h;T<c+1&&(f=g*A[T],A[T]=d*A[T],!(Math.abs(f)<=o));T++)if(p=L[T],L[T]=Math.sqrt(f*f+p*p),d=p/(m=L[T]),g=-f/m,r)for(l=0;l<S;l++)y=E[l][u],x=E[l][T],E[l][u]=y*d+x*g,E[l][T]=-y*g+x*d}if(x=L[c],h===c){if(x<0&&(L[c]=-x,s))for(l=0;l<b;l++)M[l][c]=-M[l][c];break}for(v=L[h],f=(((y=L[c-1])-x)*(y+x)+((p=A[c-1])-(m=A[c]))*(p+m))/(2*m*y),p=Math.sqrt(f*f+1),f=((v-x)*(v+x)+m*(y/(f<0?f-p:f+p)-m))/v,T=h+(g=d=1);T<c+1;T++){if(p=A[T],y=L[T],m=g*p,p*=d,x=Math.sqrt(f*f+m*m),f=v*(d=f/(A[T-1]=x))+p*(g=m/x),p=-v*g+p*d,m=y*g,y*=d,s)for(l=0;l<b;l++)v=M[l][T-1],x=M[l][T],M[l][T-1]=v*d+x*g,M[l][T]=-v*g+x*d;if(x=Math.sqrt(f*f+m*m),f=(d=f/(L[T-1]=x))*p+(g=m/x)*y,v=-g*p+d*y,r)for(l=0;l<S;l++)y=E[l][T-1],x=E[l][T],E[l][T-1]=y*d+x*g,E[l][T]=-y*g+x*d}A[h]=0,A[c]=f,L[c]=v}for(T=0;T<b;T++)L[T]<o&&(L[T]=0);return{u:E,q:L,v:M}},n.VERSION="1.1.1",Object.defineProperty(n,"__esModule",{value:!0})})}),j0t=bB(t=>{(function(){var e=function(){this.init()};e.prototype={init:function(){var u=this||n;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var d=this||n;if(u=parseFloat(u),d.ctx||h(),typeof u<"u"&&u>=0&&u<=1){if(d._volume=u,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u,n.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),m=0;m<p.length;m++){var g=d._howls[f]._soundById(p[m]);g&&g._node&&(g._node.volume=g._volume*u)}return d}return d._volume},mute:function(u){var d=this||n;d.ctx||h(),d._muted=u,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u?0:d._volume,n.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),m=0;m<p.length;m++){var g=d._howls[f]._soundById(p[m]);g&&g._node&&(g._node.muted=u?!0:g._muted)}return d},stop:function(){for(var u=this||n,d=0;d<u._howls.length;d++)u._howls[d].stop();return u},unload:function(){for(var u=this||n,d=u._howls.length-1;d>=0;d--)u._howls[d].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,h()),u},codecs:function(u){return(this||n)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||n;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var d=new Audio;d.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||n,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return u}if(!d||typeof d.canPlayType!="function")return u;var f=d.canPlayType("audio/mpeg;").replace(/^no$/,""),p=u._navigator?u._navigator.userAgent:"",m=p.match(/OPR\/([0-6].)/g),g=m&&parseInt(m[0].split("/")[1],10)<33,v=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,y=p.match(/Version\/(.*?) /),x=v&&y&&parseInt(y[1],10)<15;return u._codecs={mp3:!!(!g&&(f||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||n;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var d=function(f){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,u._releaseHtml5Audio(p)}catch{u.noAudio=!0;break}for(var m=0;m<u._howls.length;m++)if(!u._howls[m]._webAudio)for(var g=u._howls[m]._getSoundIds(),v=0;v<g.length;v++){var y=u._howls[m]._soundById(g[v]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}u._autoResume();var x=u.ctx.createBufferSource();x.buffer=u._scratchBuffer,x.connect(u.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),x.onended=function(){x.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var b=0;b<u._howls.length;b++)u._howls[b]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),u}},_obtainHtml5Audio:function(){var u=this||n;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var d=this||n;return u._unlocked&&d._html5AudioPool.push(u),d},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!n.usingWebAudio)){for(var d=0;d<u._howls.length;d++)if(u._howls[d]._webAudio){for(var f=0;f<u._howls[d]._sounds.length;f++)if(!u._howls[d]._sounds[f]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var p=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(p,p)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!n.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var d=0;d<u._howls.length;d++)u._howls[d]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var n=new e,i=function(u){var d=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(u)};i.prototype={init:function(u){var d=this;return n.ctx||h(),d._autoplay=u.autoplay||!1,d._format=typeof u.format!="string"?u.format:[u.format],d._html5=u.html5||!1,d._muted=u.mute||!1,d._loop=u.loop||!1,d._pool=u.pool||5,d._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,d._rate=u.rate||1,d._sprite=u.sprite||{},d._src=typeof u.src!="string"?u.src:[u.src],d._volume=u.volume!==void 0?u.volume:1,d._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=u.onend?[{fn:u.onend}]:[],d._onfade=u.onfade?[{fn:u.onfade}]:[],d._onload=u.onload?[{fn:u.onload}]:[],d._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],d._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],d._onpause=u.onpause?[{fn:u.onpause}]:[],d._onplay=u.onplay?[{fn:u.onplay}]:[],d._onstop=u.onstop?[{fn:u.onstop}]:[],d._onmute=u.onmute?[{fn:u.onmute}]:[],d._onvolume=u.onvolume?[{fn:u.onvolume}]:[],d._onrate=u.onrate?[{fn:u.onrate}]:[],d._onseek=u.onseek?[{fn:u.onseek}]:[],d._onunlock=u.onunlock?[{fn:u.onunlock}]:[],d._onresume=[],d._webAudio=n.usingWebAudio&&!d._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var u=this,d=null;if(n.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var f=0;f<u._src.length;f++){var p,m;if(u._format&&u._format[f])p=u._format[f];else{if(m=u._src[f],typeof m!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(m),p||(p=/\.([^.]+)$/.exec(m.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&n.codecs(p)){d=u._src[f];break}}if(!d){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=d,u._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new r(u),u._webAudio&&o(u),u},play:function(u,d){var f=this,p=null;if(typeof u=="number")p=u,u=null;else{if(typeof u=="string"&&f._state==="loaded"&&!f._sprite[u])return null;if(typeof u>"u"&&(u="__default",!f._playLock)){for(var m=0,g=0;g<f._sounds.length;g++)f._sounds[g]._paused&&!f._sounds[g]._ended&&(m++,p=f._sounds[g]._id);m===1?u=null:p=null}}var v=p?f._soundById(p):f._inactiveSound();if(!v)return null;if(p&&!u&&(u=v._sprite||"__default"),f._state!=="loaded"){v._sprite=u,v._ended=!1;var y=v._id;return f._queue.push({event:"play",action:function(){f.play(y)}}),y}if(p&&!v._paused)return d||f._loadQueue("play"),v._id;f._webAudio&&n._autoResume();var x=Math.max(0,v._seek>0?v._seek:f._sprite[u][0]/1e3),b=Math.max(0,(f._sprite[u][0]+f._sprite[u][1])/1e3-x),S=b*1e3/Math.abs(v._rate),A=f._sprite[u][0]/1e3,E=(f._sprite[u][0]+f._sprite[u][1])/1e3;v._sprite=u,v._ended=!1;var M=function(){v._paused=!1,v._seek=x,v._start=A,v._stop=E,v._loop=!!(v._loop||f._sprite[u][2])};if(x>=E){f._ended(v);return}var C=v._node;if(f._webAudio){var T=function(){f._playLock=!1,M(),f._refreshBuffer(v);var R=v._muted||f._muted?0:v._volume;C.gain.setValueAtTime(R,n.ctx.currentTime),v._playStart=n.ctx.currentTime,typeof C.bufferSource.start>"u"?v._loop?C.bufferSource.noteGrainOn(0,x,86400):C.bufferSource.noteGrainOn(0,x,b):v._loop?C.bufferSource.start(0,x,86400):C.bufferSource.start(0,x,b),S!==1/0&&(f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),S)),d||setTimeout(function(){f._emit("play",v._id),f._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?T():(f._playLock=!0,f.once("resume",T),f._clearTimer(v._id))}else{var D=function(){C.currentTime=x,C.muted=v._muted||f._muted||n._muted||C.muted,C.volume=v._volume*n.volume(),C.playbackRate=v._rate;try{var R=C.play();if(R&&typeof Promise<"u"&&(R instanceof Promise||typeof R.then=="function")?(f._playLock=!0,M(),R.then(function(){f._playLock=!1,C._unlocked=!0,d?f._loadQueue():f._emit("play",v._id)}).catch(function(){f._playLock=!1,f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):d||(f._playLock=!1,M(),f._emit("play",v._id)),C.playbackRate=v._rate,C.paused){f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||v._loop?f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),S):(f._endTimers[v._id]=function(){f._ended(v),C.removeEventListener("ended",f._endTimers[v._id],!1)},C.addEventListener("ended",f._endTimers[v._id],!1))}catch(H){f._emit("playerror",v._id,H)}};C.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(C.src=f._src,C.load());var L=window&&window.ejecta||!C.readyState&&n._navigator.isCocoonJS;if(C.readyState>=3||L)D();else{f._playLock=!0,f._state="loading";var I=function(){f._state="loaded",D(),C.removeEventListener(n._canPlayEvent,I,!1)};C.addEventListener(n._canPlayEvent,I,!1),f._clearTimer(v._id)}}return v._id},pause:function(u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(u)}}),d;for(var f=d._getSoundIds(u),p=0;p<f.length;p++){d._clearTimer(f[p]);var m=d._soundById(f[p]);if(m&&!m._paused&&(m._seek=d.seek(f[p]),m._rateSeek=0,m._paused=!0,d._stopFade(f[p]),m._node))if(d._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),d._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||d._emit("pause",m?m._id:null)}return d},stop:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(u)}}),f;for(var p=f._getSoundIds(u),m=0;m<p.length;m++){f._clearTimer(p[m]);var g=f._soundById(p[m]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,f._stopFade(p[m]),g._node&&(f._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),f._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&f._clearSound(g._node))),d||f._emit("stop",g._id))}return f},mute:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(u,d)}}),f;if(typeof d>"u")if(typeof u=="boolean")f._muted=u;else return f._muted;for(var p=f._getSoundIds(d),m=0;m<p.length;m++){var g=f._soundById(p[m]);g&&(g._muted=u,g._interval&&f._stopFade(g._id),f._webAudio&&g._node?g._node.gain.setValueAtTime(u?0:g._volume,n.ctx.currentTime):g._node&&(g._node.muted=n._muted?!0:u),f._emit("mute",g._id))}return f},volume:function(){var u=this,d=arguments,f,p;if(d.length===0)return u._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length>=2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var v;if(typeof f<"u"&&f>=0&&f<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,d)}}),u;typeof p>"u"&&(u._volume=f),p=u._getSoundIds(p);for(var y=0;y<p.length;y++)v=u._soundById(p[y]),v&&(v._volume=f,d[2]||u._stopFade(p[y]),u._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(f,n.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=f*n.volume()),u._emit("volume",v._id))}else return v=p?u._soundById(p):u._sounds[0],v?v._volume:0;return u},fade:function(u,d,f,p){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(u,d,f,p)}}),m;u=Math.min(Math.max(0,parseFloat(u)),1),d=Math.min(Math.max(0,parseFloat(d)),1),f=parseFloat(f),m.volume(u,p);for(var g=m._getSoundIds(p),v=0;v<g.length;v++){var y=m._soundById(g[v]);if(y){if(p||m._stopFade(g[v]),m._webAudio&&!y._muted){var x=n.ctx.currentTime,b=x+f/1e3;y._volume=u,y._node.gain.setValueAtTime(u,x),y._node.gain.linearRampToValueAtTime(d,b)}m._startFadeInterval(y,u,d,f,g[v],typeof p>"u")}}return m},_startFadeInterval:function(u,d,f,p,m,g){var v=this,y=d,x=f-d,b=Math.abs(x/.01),S=Math.max(4,b>0?p/b:p),A=Date.now();u._fadeTo=f,u._interval=setInterval(function(){var E=(Date.now()-A)/p;A=Date.now(),y+=x*E,y=Math.round(y*100)/100,x<0?y=Math.max(f,y):y=Math.min(f,y),v._webAudio?u._volume=y:v.volume(y,u._id,!0),g&&(v._volume=y),(f<d&&y<=f||f>d&&y>=f)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,v.volume(f,u._id),v._emit("fade",u._id))},S)},_stopFade:function(u){var d=this,f=d._soundById(u);return f&&f._interval&&(d._webAudio&&f._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(f._interval),f._interval=null,d.volume(f._fadeTo,u),f._fadeTo=null,d._emit("fade",u)),d},loop:function(){var u=this,d=arguments,f,p,m;if(d.length===0)return u._loop;if(d.length===1)if(typeof d[0]=="boolean")f=d[0],u._loop=f;else return m=u._soundById(parseInt(d[0],10)),m?m._loop:!1;else d.length===2&&(f=d[0],p=parseInt(d[1],10));for(var g=u._getSoundIds(p),v=0;v<g.length;v++)m=u._soundById(g[v]),m&&(m._loop=f,u._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=f,f&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,u.playing(g[v])&&(u.pause(g[v],!0),u.play(g[v],!0)))));return u},rate:function(){var u=this,d=arguments,f,p;if(d.length===0)p=u._sounds[0]._id;else if(d.length===1){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var v;if(typeof f=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,d)}}),u;typeof p>"u"&&(u._rate=f),p=u._getSoundIds(p);for(var y=0;y<p.length;y++)if(v=u._soundById(p[y]),v){u.playing(p[y])&&(v._rateSeek=u.seek(p[y]),v._playStart=u._webAudio?n.ctx.currentTime:v._playStart),v._rate=f,u._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(f,n.ctx.currentTime):v._node&&(v._node.playbackRate=f);var x=u.seek(p[y]),b=(u._sprite[v._sprite][0]+u._sprite[v._sprite][1])/1e3-x,S=b*1e3/Math.abs(v._rate);(u._endTimers[p[y]]||!v._paused)&&(u._clearTimer(p[y]),u._endTimers[p[y]]=setTimeout(u._ended.bind(u,v),S)),u._emit("rate",v._id)}}else return v=u._soundById(p),v?v._rate:u._rate;return u},seek:function(){var u=this,d=arguments,f,p;if(d.length===0)u._sounds.length&&(p=u._sounds[0]._id);else if(d.length===1){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?p=parseInt(d[0],10):u._sounds.length&&(p=u._sounds[0]._id,f=parseFloat(d[0]))}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));if(typeof p>"u")return 0;if(typeof f=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,d)}}),u;var v=u._soundById(p);if(v)if(typeof f=="number"&&f>=0){var y=u.playing(p);y&&u.pause(p,!0),v._seek=f,v._ended=!1,u._clearTimer(p),!u._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=f);var x=function(){y&&u.play(p,!0),u._emit("seek",p)};if(y&&!u._webAudio){var b=function(){u._playLock?setTimeout(b,0):x()};setTimeout(b,0)}else x()}else if(u._webAudio){var S=u.playing(p)?n.ctx.currentTime-v._playStart:0,A=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(A+S*Math.abs(v._rate))}else return v._node.currentTime;return u},playing:function(u){var d=this;if(typeof u=="number"){var f=d._soundById(u);return f?!f._paused:!1}for(var p=0;p<d._sounds.length;p++)if(!d._sounds[p]._paused)return!0;return!1},duration:function(u){var d=this,f=d._duration,p=d._soundById(u);return p&&(f=d._sprite[p._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var u=this,d=u._sounds,f=0;f<d.length;f++)d[f]._paused||u.stop(d[f]._id),u._webAudio||(u._clearSound(d[f]._node),d[f]._node.removeEventListener("error",d[f]._errorFn,!1),d[f]._node.removeEventListener(n._canPlayEvent,d[f]._loadFn,!1),d[f]._node.removeEventListener("ended",d[f]._endFn,!1),n._releaseHtml5Audio(d[f]._node)),delete d[f]._node,u._clearTimer(d[f]._id);var p=n._howls.indexOf(u);p>=0&&n._howls.splice(p,1);var m=!0;for(f=0;f<n._howls.length;f++)if(n._howls[f]._src===u._src||u._src.indexOf(n._howls[f]._src)>=0){m=!1;break}return s&&m&&delete s[u._src],n.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,d,f,p){var m=this,g=m["_on"+u];return typeof d=="function"&&g.push(p?{id:f,fn:d,once:p}:{id:f,fn:d}),m},off:function(u,d,f){var p=this,m=p["_on"+u],g=0;if(typeof d=="number"&&(f=d,d=null),d||f)for(g=0;g<m.length;g++){var v=f===m[g].id;if(d===m[g].fn&&v||!d&&v){m.splice(g,1);break}}else if(u)p["_on"+u]=[];else{var y=Object.keys(p);for(g=0;g<y.length;g++)y[g].indexOf("_on")===0&&Array.isArray(p[y[g]])&&(p[y[g]]=[])}return p},once:function(u,d,f){var p=this;return p.on(u,d,f,1),p},_emit:function(u,d,f){for(var p=this,m=p["_on"+u],g=m.length-1;g>=0;g--)(!m[g].id||m[g].id===d||u==="load")&&(setTimeout(function(v){v.call(this,d,f)}.bind(p,m[g].fn),0),m[g].once&&p.off(u,m[g].fn,m[g].id));return p._loadQueue(u),p},_loadQueue:function(u){var d=this;if(d._queue.length>0){var f=d._queue[0];f.event===u&&(d._queue.shift(),d._loadQueue()),u||f.action()}return d},_ended:function(u){var d=this,f=u._sprite;if(!d._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(d._ended.bind(d,u),100),d;var p=!!(u._loop||d._sprite[f][2]);if(d._emit("end",u._id),!d._webAudio&&p&&d.stop(u._id,!0).play(u._id),d._webAudio&&p){d._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=n.ctx.currentTime;var m=(u._stop-u._start)*1e3/Math.abs(u._rate);d._endTimers[u._id]=setTimeout(d._ended.bind(d,u),m)}return d._webAudio&&!p&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,d._clearTimer(u._id),d._cleanBuffer(u._node),n._autoSuspend()),!d._webAudio&&!p&&d.stop(u._id,!0),d},_clearTimer:function(u){var d=this;if(d._endTimers[u]){if(typeof d._endTimers[u]!="function")clearTimeout(d._endTimers[u]);else{var f=d._soundById(u);f&&f._node&&f._node.removeEventListener("ended",d._endTimers[u],!1)}delete d._endTimers[u]}return d},_soundById:function(u){for(var d=this,f=0;f<d._sounds.length;f++)if(u===d._sounds[f]._id)return d._sounds[f];return null},_inactiveSound:function(){var u=this;u._drain();for(var d=0;d<u._sounds.length;d++)if(u._sounds[d]._ended)return u._sounds[d].reset();return new r(u)},_drain:function(){var u=this,d=u._pool,f=0,p=0;if(!(u._sounds.length<d)){for(p=0;p<u._sounds.length;p++)u._sounds[p]._ended&&f++;for(p=u._sounds.length-1;p>=0;p--){if(f<=d)return;u._sounds[p]._ended&&(u._webAudio&&u._sounds[p]._node&&u._sounds[p]._node.disconnect(0),u._sounds.splice(p,1),f--)}}},_getSoundIds:function(u){var d=this;if(typeof u>"u"){for(var f=[],p=0;p<d._sounds.length;p++)f.push(d._sounds[p]._id);return f}else return[u]},_refreshBuffer:function(u){var d=this;return u._node.bufferSource=n.ctx.createBufferSource(),u._node.bufferSource.buffer=s[d._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,n.ctx.currentTime),d},_cleanBuffer:function(u){var d=this,f=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),f))try{u.bufferSource.buffer=n._scratchBuffer}catch{}return u.bufferSource=null,d},_clearSound:function(u){var d=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);d||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(u){this._parent=u,this.init()};r.prototype={init:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,d._sounds.push(u),u.create(),u},create:function(){var u=this,d=u._parent,f=n._muted||u._muted||u._parent._muted?0:u._volume;return d._webAudio?(u._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),u._node.gain.setValueAtTime(f,n.ctx.currentTime),u._node.paused=!0,u._node.connect(n.masterGain)):n.noAudio||(u._node=n._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(n._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=d._src,u._node.preload=d._preload===!0?"auto":d._preload,u._node.volume=f*n.volume(),u._node.load()),u},reset:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,d=u._parent;d._duration=Math.ceil(u._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),u._node.removeEventListener(n._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,d=u._parent;d._duration===1/0&&(d._duration=Math.ceil(u._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},o=function(u){var d=u._src;if(s[d]){u._duration=s[d].duration,c(u);return}if(/^data:[^;]+;base64,/.test(d)){for(var f=atob(d.split(",")[1]),p=new Uint8Array(f.length),m=0;m<f.length;++m)p[m]=f.charCodeAt(m);l(p.buffer,u)}else{var g=new XMLHttpRequest;g.open(u._xhr.method,d,!0),g.withCredentials=u._xhr.withCredentials,g.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(v){g.setRequestHeader(v,u._xhr.headers[v])}),g.onload=function(){var v=(g.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,u)},g.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[d],u.load())},a(g)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,d){var f=function(){d._emit("loaderror",null,"Decoding audio data failed.")},p=function(m){m&&d._sounds.length>0?(s[d._src]=m,c(d,m)):f()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(u).then(p).catch(f):n.ctx.decodeAudioData(u,p,f)},c=function(u,d){d&&!u._duration&&(u._duration=d.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},h=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),d=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=d?parseInt(d[1],10):null;if(u&&f&&f<9){var p=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!p&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:n,Howl:i}}),typeof t<"u"&&(t.Howler=n,t.Howl=i),typeof global<"u"?(global.HowlerGlobal=e,global.Howler=n,global.Howl=i,global.Sound=r):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=i,window.Sound=r)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var r=i._howls.length-1;r>=0;r--)i._howls[r].stereo(n);return i},HowlerGlobal.prototype.pos=function(n,i,r){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(i=typeof i!="number"?s._pos[1]:i,r=typeof r!="number"?s._pos[2]:r,typeof n=="number")s._pos=[n,i,r],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(n,i,r,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(i=typeof i!="number"?c[1]:i,r=typeof r!="number"?c[2]:r,s=typeof s!="number"?c[3]:s,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof n=="number")l._orientation=[n,i,r,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(n,i,r,s,o,a);else return c;return l},Howl.prototype.init=function(n){return function(i){var r=this;return r._orientation=i.orientation||[1,0,0],r._stereo=i.stereo||null,r._pos=i.pos||null,r._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},r._onstereo=i.onstereo?[{fn:i.onstereo}]:[],r._onpos=i.onpos?[{fn:i.onpos}]:[],r._onorientation=i.onorientation?[{fn:i.onorientation}]:[],n.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,i){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"stereo",action:function(){r.stereo(n,i)}}),r;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof n=="number")r._stereo=n,r._pos=[n,0,0];else return r._stereo;for(var o=r._getSoundIds(i),a=0;a<o.length;a++){var l=r._soundById(o[a]);if(l)if(typeof n=="number")l._stereo=n,l._pos=[n,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(n,0,0):l._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),r._emit("stereo",l._id);else return l._stereo}return r},Howl.prototype.pos=function(n,i,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,i,r,s)}}),o;if(i=typeof i!="number"?0:i,r=typeof r!="number"?-.5:r,typeof s>"u")if(typeof n=="number")o._pos=[n,i,r];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._pos=[n,i,r],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setPosition(n,i,r)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(n,i,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,i,r,s)}}),o;if(i=typeof i!="number"?o._orientation[1]:i,r=typeof r!="number"?o._orientation[2]:r,typeof s>"u")if(typeof n=="number")o._orientation=[n,i,r];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._orientation=[n,i,r],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setOrientation(n,i,r)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,i=arguments,r,s,o;if(!n._webAudio)return n;if(i.length===0)return n._pannerAttr;if(i.length===1)if(typeof i[0]=="object")r=i[0],typeof s>"u"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),n._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle<"u"?r.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle<"u"?r.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain<"u"?r.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel<"u"?r.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance<"u"?r.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof r.pannerAttr.refDistance<"u"?r.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor<"u"?r.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel<"u"?r.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(i[0],10)),o?o._pannerAttr:n._pannerAttr;else i.length===2&&(r=i[0],s=parseInt(i[1],10));for(var a=n._getSoundIds(s),l=0;l<a.length;l++)if(o=n._soundById(a[l]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:c.coneOuterGain,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:c.distanceModel,maxDistance:typeof r.maxDistance<"u"?r.maxDistance:c.maxDistance,refDistance:typeof r.refDistance<"u"?r.refDistance:c.refDistance,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:c.rolloffFactor,panningModel:typeof r.panningModel<"u"?r.panningModel:c.panningModel};var h=o._panner;h?(h.coneInnerAngle=c.coneInnerAngle,h.coneOuterAngle=c.coneOuterAngle,h.coneOuterGain=c.coneOuterGain,h.distanceModel=c.distanceModel,h.maxDistance=c.maxDistance,h.refDistance=c.refDistance,h.rolloffFactor=c.rolloffFactor,h.panningModel=c.panningModel):(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"))}return n},Sound.prototype.init=function(n){return function(){var i=this,r=i._parent;i._orientation=r._orientation,i._stereo=r._stereo,i._pos=r._pos,i._pannerAttr=r._pannerAttr,n.call(this),i._stereo?r.stereo(i._stereo):i._pos&&r.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var i=this,r=i._parent;return i._orientation=r._orientation,i._stereo=r._stereo,i._pos=r._pos,i._pannerAttr=r._pannerAttr,i._stereo?r.stereo(i._stereo):i._pos?r.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,r._refreshBuffer(i)),n.call(this)}}(Sound.prototype.reset);var e=function(n,i){i=i||"spatial",i==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}}()}),V0t=bB((t,e)=>{e.exports=function(n,i){for(var r=n.split("."),s=i.split("."),o=0;o<3;o++){var a=Number(r[o]),l=Number(s[o]);if(a>l)return 1;if(l>a)return-1;if(!isNaN(a)&&isNaN(l))return 1;if(isNaN(a)&&!isNaN(l))return-1}return 0}}),$w="149",Xl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},W0t=0,Mre=1,$0t=2,v$=1,Txe=2,MA=3,zu=0,Us=1,ll=2,io=0,cb=1,Ere=2,Cre=3,Tre=4,q0t=5,z1=100,X0t=101,Y0t=102,Pre=103,Dre=104,K0t=200,J0t=201,Z0t=202,Q0t=203,Pxe=204,Dxe=205,evt=206,tvt=207,nvt=208,ivt=209,rvt=210,svt=0,ovt=1,avt=2,LH=3,lvt=4,cvt=5,uvt=6,hvt=7,Oxe=0,dvt=1,fvt=2,Tf=0,pvt=1,mvt=2,gvt=3,vvt=4,yvt=5,Lxe=300,Cv=301,Tv=302,RH=303,IH=304,YE=306,L2=1e3,il=1001,BH=1002,hr=1003,Ore=1004,X4=1005,oi=1006,xvt=1007,rw=1008,Lo=1009,bvt=1010,wvt=1011,Rxe=1012,_vt=1013,um=1014,hm=1015,R2=1016,Svt=1017,Avt=1018,Z0=1020,Mvt=1021,gu=1023,Evt=1024,Cvt=1025,Q0=1026,Pv=1027,Tvt=1028,Pvt=1029,Dvt=1030,Ovt=1031,Lvt=1033,Y4=33776,K4=33777,J4=33778,Z4=33779,Lre=35840,Rre=35841,Ire=35842,Bre=35843,Rvt=36196,kre=37492,Fre=37496,Nre=37808,zre=37809,Ure=37810,Gre=37811,Hre=37812,jre=37813,Vre=37814,Wre=37815,$re=37816,qre=37817,Xre=37818,Yre=37819,Kre=37820,Jre=37821,Q4=36492,Ivt=36283,Zre=36284,Qre=36285,ese=36286,id=3e3,mn=3001,np=3200,Ixe=3201,Bvt=0,kvt=1,Mh="srgb",EL="srgb-linear",e5=7680,Fvt=519,kH=35044,tse="300 es",FH=1035,Ba=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;let n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;let n=this._listeners[t];if(n!==void 0){let i=n.indexOf(e);i!==-1&&n.splice(i,1)}}dispatchEvent(t){if(this._listeners===void 0)return;let e=this._listeners[t.type];if(e!==void 0){t.target=this;let n=e.slice(0);for(let i=0,r=n.length;i<r;i++)n[i].call(this,t);t.target=null}}},yo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],nse=1234567,dM=Math.PI/180,I2=180/Math.PI;function Yh(){let t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(yo[t&255]+yo[t>>8&255]+yo[t>>16&255]+yo[t>>24&255]+"-"+yo[e&255]+yo[e>>8&255]+"-"+yo[e>>16&15|64]+yo[e>>24&255]+"-"+yo[n&63|128]+yo[n>>8&255]+"-"+yo[n>>16&255]+yo[n>>24&255]+yo[i&255]+yo[i>>8&255]+yo[i>>16&255]+yo[i>>24&255]).toLowerCase()}function vs(t,e,n){return Math.max(e,Math.min(n,t))}function y$(t,e){return(t%e+e)%e}function Nvt(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function zvt(t,e,n){return t!==e?(n-t)/(e-t):0}function fM(t,e,n){return(1-n)*t+n*e}function Uvt(t,e,n,i){return fM(t,e,1-Math.exp(-n*i))}function Gvt(t,e=1){return e-Math.abs(y$(t,e*2)-e)}function Hvt(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function jvt(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function Vvt(t,e){return t+Math.floor(Math.random()*(e-t+1))}function Wvt(t,e){return t+Math.random()*(e-t)}function $vt(t){return t*(.5-Math.random())}function qvt(t){t!==void 0&&(nse=t);let e=nse+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Xvt(t){return t*dM}function Yvt(t){return t*I2}function NH(t){return(t&t-1)===0&&t!==0}function Kvt(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function CL(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Jvt(t,e,n,i,r){let s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+i)/2),h=o((e+i)/2),u=s((e-i)/2),d=o((e-i)/2),f=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":t.set(a*h,l*u,l*d,a*c);break;case"YZY":t.set(l*d,a*h,l*u,a*c);break;case"ZXZ":t.set(l*u,l*d,a*h,a*c);break;case"XZX":t.set(a*h,l*p,l*f,a*c);break;case"YXY":t.set(l*f,a*h,l*p,a*c);break;case"ZYZ":t.set(l*p,l*f,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function yf(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Mi(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var Ln=Object.freeze({__proto__:null,DEG2RAD:dM,RAD2DEG:I2,ceilPowerOfTwo:Kvt,clamp:vs,damp:Uvt,degToRad:Xvt,denormalize:yf,euclideanModulo:y$,floorPowerOfTwo:CL,generateUUID:Yh,inverseLerp:zvt,isPowerOfTwo:NH,lerp:fM,mapLinear:Nvt,normalize:Mi,pingpong:Gvt,radToDeg:Yvt,randFloat:Wvt,randFloatSpread:$vt,randInt:Vvt,seededRandom:qvt,setQuaternionFromProperEuler:Jvt,smootherstep:jvt,smoothstep:Hvt}),Ae=class{constructor(t=0,e=0){Ae.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Eo=class{constructor(){Eo.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,i,r,s,o,a,l){let c=this.elements;return c[0]=t,c[1]=i,c[2]=o,c[3]=e,c[4]=r,c[5]=a,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],h=n[7],u=n[2],d=n[5],f=n[8],p=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],b=i[2],S=i[5],A=i[8];return r[0]=s*p+o*v+a*b,r[3]=s*m+o*y+a*S,r[6]=s*g+o*x+a*A,r[1]=l*p+c*v+h*b,r[4]=l*m+c*y+h*S,r[7]=l*g+c*x+h*A,r[2]=u*p+d*v+f*b,r[5]=u*m+d*y+f*S,r[8]=u*g+d*x+f*A,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*s*c-e*o*l-n*r*c+n*o*a+i*r*l-i*s*a}invert(){let t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=c*s-o*l,u=o*a-c*r,d=l*r-s*a,f=e*h+n*u+i*d;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let p=1/f;return t[0]=h*p,t[1]=(i*l-c*n)*p,t[2]=(o*n-i*s)*p,t[3]=u*p,t[4]=(c*e-i*a)*p,t[5]=(i*r-o*e)*p,t[6]=d*p,t[7]=(n*a-l*e)*p,t[8]=(s*e-n*r)*p,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,s,o){let a=Math.cos(r),l=Math.sin(r);return this.set(n*a,n*l,-n*(a*s+l*o)+s+t,-i*l,i*a,-i*(-l*s+a*o)+o+e,0,0,1),this}scale(t,e){return this.premultiply(t5.makeScale(t,e)),this}rotate(t){return this.premultiply(t5.makeRotation(-t)),this}translate(t,e){return this.premultiply(t5.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){let n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}},t5=new Eo;function Bxe(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}var Zvt={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ZP(t,e){return new Zvt[t](e)}function TL(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function ev(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function HD(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}var n5={[Mh]:{[EL]:ev},[EL]:{[Mh]:HD}},Go={legacyMode:!0,get workingColorSpace(){return EL},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(n5[e]&&n5[e][n]!==void 0){let i=n5[e][n];return t.r=i(t.r),t.g=i(t.g),t.b=i(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},kxe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fs={r:0,g:0,b:0},iu={h:0,s:0,l:0},QP={h:0,s:0,l:0};function i5(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function e3(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}var Zt=class{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Mh){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Go.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=Go.workingColorSpace){return this.r=e,this.g=n,this.b=i,Go.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=Go.workingColorSpace){if(e=y$(e,1),n=vs(n,0,1),i=vs(i,0,1),n===0)this.r=this.g=this.b=i;else{let s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=i5(o,s,e+1/3),this.g=i5(o,s,e),this.b=i5(o,s,e-1/3)}return Go.toWorkingColorSpace(this,r),this}setStyle(e,n=Mh){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s,o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Go.toWorkingColorSpace(this,n),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Go.toWorkingColorSpace(this,n),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){let l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,h=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,c,h,n)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Go.toWorkingColorSpace(this,n),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Go.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=Mh){let i=kxe[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ev(e.r),this.g=ev(e.g),this.b=ev(e.b),this}copyLinearToSRGB(e){return this.r=HD(e.r),this.g=HD(e.g),this.b=HD(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Mh){return Go.fromWorkingColorSpace(e3(this,fs),e),vs(fs.r*255,0,255)<<16^vs(fs.g*255,0,255)<<8^vs(fs.b*255,0,255)<<0}getHexString(e=Mh){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Go.workingColorSpace){Go.fromWorkingColorSpace(e3(this,fs),n);let i=fs.r,r=fs.g,s=fs.b,o=Math.max(i,r,s),a=Math.min(i,r,s),l,c,h=(a+o)/2;if(a===o)l=0,c=0;else{let u=o-a;switch(c=h<=.5?u/(o+a):u/(2-o-a),o){case i:l=(r-s)/u+(r<s?6:0);break;case r:l=(s-i)/u+2;break;case s:l=(i-r)/u+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,n=Go.workingColorSpace){return Go.fromWorkingColorSpace(e3(this,fs),n),e.r=fs.r,e.g=fs.g,e.b=fs.b,e}getStyle(e=Mh){return Go.fromWorkingColorSpace(e3(this,fs),e),e!==Mh?`color(${e} ${fs.r} ${fs.g} ${fs.b})`:`rgb(${fs.r*255|0},${fs.g*255|0},${fs.b*255|0})`}offsetHSL(e,n,i){return this.getHSL(iu),iu.h+=e,iu.s+=n,iu.l+=i,this.setHSL(iu.h,iu.s,iu.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(iu),e.getHSL(QP);let i=fM(iu.h,QP.h,n),r=fM(iu.s,QP.s,n),s=fM(iu.l,QP.l,n);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};Zt.NAMES=kxe;var r1,Fxe=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{r1===void 0&&(r1=TL("canvas")),r1.width=t.width,r1.height=t.height;let n=r1.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=r1}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=TL("canvas");e.width=t.width,e.height=t.height;let n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);let i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let s=0;s<r.length;s++)r[s]=ev(r[s]/255)*255;return n.putImageData(i,0,0),e}else if(t.data){let e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(ev(e[n]/255)*255):e[n]=ev(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},Nxe=class{constructor(t=null){this.isSource=!0,this.uuid=Yh(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let r;if(Array.isArray(i)){r=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?r.push(r5(i[s].image)):r.push(r5(i[s]))}else r=r5(i);n.url=r}return e||(t.images[this.uuid]=n),n}};function r5(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Fxe.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Qvt=0,Hs=class extends Ba{constructor(t=Hs.DEFAULT_IMAGE,e=Hs.DEFAULT_MAPPING,n=il,i=il,r=oi,s=rw,o=gu,a=Lo,l=Hs.DEFAULT_ANISOTROPY,c=id){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Qvt++}),this.uuid=Yh(),this.name="",this.source=new Nxe(t),this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Ae(0,0),this.repeat=new Ae(1,1),this.center=new Ae(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Eo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Lxe)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case L2:t.x=t.x-Math.floor(t.x);break;case il:t.x=t.x<0?0:1;break;case BH:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case L2:t.y=t.y-Math.floor(t.y);break;case il:t.y=t.y<0?0:1;break;case BH:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}};Hs.DEFAULT_IMAGE=null;Hs.DEFAULT_MAPPING=Lxe;Hs.DEFAULT_ANISOTROPY=1;var Sn=class{constructor(t=0,e=0,n=0,i=1){Sn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r,s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],h=s[5],u=s[9],d=s[2],f=s[6],p=s[10];if(Math.abs(a-c)<.01&&Math.abs(l-d)<.01&&Math.abs(u-f)<.01){if(Math.abs(a+c)<.1&&Math.abs(l+d)<.1&&Math.abs(u+f)<.1&&Math.abs(o+h+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let g=(o+1)/2,v=(h+1)/2,y=(p+1)/2,x=(a+c)/4,b=(l+d)/4,S=(u+f)/4;return g>v&&g>y?g<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(g),i=x/n,r=b/n):v>y?v<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(v),n=x/i,r=S/i):y<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(y),n=b/r,i=S/r),this.set(n,i,r,e),this}let m=Math.sqrt((f-u)*(f-u)+(l-d)*(l-d)+(c-a)*(c-a));return Math.abs(m)<.001&&(m=1),this.x=(f-u)/m,this.y=(l-d)/m,this.z=(c-a)/m,this.w=Math.acos((o+h+p-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},_s=class extends Ba{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Sn(0,0,t,e),this.scissorTest=!1,this.viewport=new Sn(0,0,t,e);let i={width:t,height:e,depth:1};this.texture=new Hs(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:oi,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;let e=Object.assign({},t.texture.image);return this.texture.source=new Nxe(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},zxe=class extends Hs{constructor(t=null,e=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=hr,this.minFilter=hr,this.wrapR=il,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},eyt=class extends Hs{constructor(t=null,e=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=hr,this.minFilter=hr,this.wrapR=il,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Wn=class{constructor(t=0,e=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,r,s,o){let a=n[i+0],l=n[i+1],c=n[i+2],h=n[i+3],u=r[s+0],d=r[s+1],f=r[s+2],p=r[s+3];if(o===0){t[e+0]=a,t[e+1]=l,t[e+2]=c,t[e+3]=h;return}if(o===1){t[e+0]=u,t[e+1]=d,t[e+2]=f,t[e+3]=p;return}if(h!==p||a!==u||l!==d||c!==f){let m=1-o,g=a*u+l*d+c*f+h*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){let b=Math.sqrt(y),S=Math.atan2(b,g*v);m=Math.sin(m*S)/b,o=Math.sin(o*S)/b}let x=o*v;if(a=a*m+u*x,l=l*m+d*x,c=c*m+f*x,h=h*m+p*x,m===1-o){let b=1/Math.sqrt(a*a+l*l+c*c+h*h);a*=b,l*=b,c*=b,h*=b}}t[e]=a,t[e+1]=l,t[e+2]=c,t[e+3]=h}static multiplyQuaternionsFlat(t,e,n,i,r,s){let o=n[i],a=n[i+1],l=n[i+2],c=n[i+3],h=r[s],u=r[s+1],d=r[s+2],f=r[s+3];return t[e]=o*f+c*h+a*d-l*u,t[e+1]=a*f+c*u+l*h-o*d,t[e+2]=l*f+c*d+o*u-a*h,t[e+3]=c*f-o*h-a*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){let n=t._x,i=t._y,r=t._z,s=t._order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(i/2),h=o(r/2),u=a(n/2),d=a(i/2),f=a(r/2);switch(s){case"XYZ":this._x=u*c*h+l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h-u*d*f;break;case"YXZ":this._x=u*c*h+l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h+u*d*f;break;case"ZXY":this._x=u*c*h-l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h-u*d*f;break;case"ZYX":this._x=u*c*h-l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h+u*d*f;break;case"YZX":this._x=u*c*h+l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h-u*d*f;break;case"XZY":this._x=u*c*h-l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h+u*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,n=e[0],i=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],c=e[6],h=e[10],u=n+o+h;if(u>0){let d=.5/Math.sqrt(u+1);this._w=.25/d,this._x=(c-a)*d,this._y=(r-l)*d,this._z=(s-i)*d}else if(n>o&&n>h){let d=2*Math.sqrt(1+n-o-h);this._w=(c-a)/d,this._x=.25*d,this._y=(i+s)/d,this._z=(r+l)/d}else if(o>h){let d=2*Math.sqrt(1+o-n-h);this._w=(r-l)/d,this._x=(i+s)/d,this._y=.25*d,this._z=(a+c)/d}else{let d=2*Math.sqrt(1+h-n-o);this._w=(s-i)/d,this._x=(r+l)/d,this._y=(a+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(vs(this.dot(t),-1,1)))}rotateTowards(t,e){let n=this.angleTo(t);if(n===0)return this;let i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,c=e._w;return this._x=n*c+s*o+i*l-r*a,this._y=i*c+s*a+r*o-n*l,this._z=r*c+s*l+n*a-i*o,this._w=s*c-n*o-i*a-r*l,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let n=this._x,i=this._y,r=this._z,s=this._w,o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;let a=1-o*o;if(a<=Number.EPSILON){let d=1-e;return this._w=d*s+e*this._w,this._x=d*n+e*this._x,this._y=d*i+e*this._y,this._z=d*r+e*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(a),c=Math.atan2(l,o),h=Math.sin((1-e)*c)/l,u=Math.sin(e*c)/l;return this._w=s*h+this._w*u,this._x=n*h+this._x*u,this._y=i*h+this._y*u,this._z=r*h+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){let t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},G=class{constructor(t=0,e=0,n=0){G.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(ise.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(ise.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(t){let e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,l=a*e+s*i-o*n,c=a*n+o*e-r*i,h=a*i+r*n-s*e,u=-r*e-s*n-o*i;return this.x=l*a+u*-r+c*-o-h*-s,this.y=c*a+u*-s+h*-r-l*-o,this.z=h*a+u*-o+l*-s-c*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this}projectOnVector(t){let e=t.lengthSq();if(e===0)return this.set(0,0,0);let n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return s5.copy(this).projectOnVector(t),this.sub(s5)}reflect(t){return this.sub(s5.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let n=this.dot(t)/e;return Math.acos(vs(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){let i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=(Math.random()-.5)*2,e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},s5=new G,ise=new Wn,cs=class{constructor(t=new G(1/0,1/0,1/0),e=new G(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.length;a<l;a+=3){let c=t[a],h=t[a+1],u=t[a+2];c<e&&(e=c),h<n&&(n=h),u<i&&(i=u),c>r&&(r=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.count;a<l;a++){let c=t.getX(a),h=t.getY(a),u=t.getZ(a);c<e&&(e=c),h<n&&(n=h),u<i&&(i=u),c>r&&(r=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let n=Ng.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let n=t.geometry;if(n!==void 0)if(e&&n.attributes!=null&&n.attributes.position!==void 0){let r=n.attributes.position;for(let s=0,o=r.count;s<o;s++)Ng.fromBufferAttribute(r,s).applyMatrix4(t.matrixWorld),this.expandByPoint(Ng)}else n.boundingBox===null&&n.computeBoundingBox(),o5.copy(n.boundingBox),o5.applyMatrix4(t.matrixWorld),this.union(o5);let i=t.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Ng),Ng.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(PS),t3.subVectors(this.max,PS),s1.subVectors(t.a,PS),o1.subVectors(t.b,PS),a1.subVectors(t.c,PS),Sp.subVectors(o1,s1),Ap.subVectors(a1,o1),zg.subVectors(s1,a1);let e=[0,-Sp.z,Sp.y,0,-Ap.z,Ap.y,0,-zg.z,zg.y,Sp.z,0,-Sp.x,Ap.z,0,-Ap.x,zg.z,0,-zg.x,-Sp.y,Sp.x,0,-Ap.y,Ap.x,0,-zg.y,zg.x,0];return!a5(e,s1,o1,a1,t3)||(e=[1,0,0,0,1,0,0,0,1],!a5(e,s1,o1,a1,t3))?!1:(n3.crossVectors(Sp,Ap),e=[n3.x,n3.y,n3.z],a5(e,s1,o1,a1,t3))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Ng.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(Ng).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Ud[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ud[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ud[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ud[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ud[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ud[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ud[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ud[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ud),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},Ud=[new G,new G,new G,new G,new G,new G,new G,new G],Ng=new G,o5=new cs,s1=new G,o1=new G,a1=new G,Sp=new G,Ap=new G,zg=new G,PS=new G,t3=new G,n3=new G,Ug=new G;function a5(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){Ug.fromArray(t,s);let a=r.x*Math.abs(Ug.x)+r.y*Math.abs(Ug.y)+r.z*Math.abs(Ug.z),l=e.dot(Ug),c=n.dot(Ug),h=i.dot(Ug);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}var tyt=new cs,DS=new G,l5=new G,Gc=class{constructor(t=new G,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let n=this.center;e!==void 0?n.copy(e):tyt.setFromPoints(t).getCenter(n);let i=0;for(let r=0,s=t.length;r<s;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;DS.subVectors(t,this.center);let e=DS.lengthSq();if(e>this.radius*this.radius){let n=Math.sqrt(e),i=(n-this.radius)*.5;this.center.addScaledVector(DS,i/n),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(l5.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(DS.copy(t.center).add(l5)),this.expandByPoint(DS.copy(t.center).sub(l5))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}},Gd=new G,c5=new G,i3=new G,Mp=new G,u5=new G,r3=new G,h5=new G,qw=class{constructor(t=new G,e=new G(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Gd)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=Gd.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Gd.copy(this.direction).multiplyScalar(e).add(this.origin),Gd.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){c5.copy(t).add(e).multiplyScalar(.5),i3.copy(e).sub(t).normalize(),Mp.copy(this.origin).sub(c5);let r=t.distanceTo(e)*.5,s=-this.direction.dot(i3),o=Mp.dot(this.direction),a=-Mp.dot(i3),l=Mp.lengthSq(),c=Math.abs(1-s*s),h,u,d,f;if(c>0)if(h=s*a-o,u=s*o-a,f=r*c,h>=0)if(u>=-f)if(u<=f){let p=1/c;h*=p,u*=p,d=h*(h+s*u+2*o)+u*(s*h+u+2*a)+l}else u=r,h=Math.max(0,-(s*u+o)),d=-h*h+u*(u+2*a)+l;else u=-r,h=Math.max(0,-(s*u+o)),d=-h*h+u*(u+2*a)+l;else u<=-f?(h=Math.max(0,-(-s*r+o)),u=h>0?-r:Math.min(Math.max(-r,-a),r),d=-h*h+u*(u+2*a)+l):u<=f?(h=0,u=Math.min(Math.max(-r,-a),r),d=u*(u+2*a)+l):(h=Math.max(0,-(s*r+o)),u=h>0?r:Math.min(Math.max(-r,-a),r),d=-h*h+u*(u+2*a)+l);else u=s>0?-r:r,h=Math.max(0,-(s*u+o)),d=-h*h+u*(u+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(h).add(this.origin),i&&i.copy(i3).multiplyScalar(u).add(c5),d}intersectSphere(t,e){Gd.subVectors(t.center,this.origin);let n=Gd.dot(this.direction),i=Gd.dot(Gd)-n*n,r=t.radius*t.radius;if(i>r)return null;let s=Math.sqrt(r-i),o=n-s,a=n+s;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){let n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,s,o,a,l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(n=(t.min.x-u.x)*l,i=(t.max.x-u.x)*l):(n=(t.max.x-u.x)*l,i=(t.min.x-u.x)*l),c>=0?(r=(t.min.y-u.y)*c,s=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,s=(t.min.y-u.y)*c),n>s||r>i||((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),h>=0?(o=(t.min.z-u.z)*h,a=(t.max.z-u.z)*h):(o=(t.max.z-u.z)*h,a=(t.min.z-u.z)*h),n>a||o>i)||((o>n||n!==n)&&(n=o),(a<i||i!==i)&&(i=a),i<0)?null:this.at(n>=0?n:i,e)}intersectsBox(t){return this.intersectBox(t,Gd)!==null}intersectTriangle(t,e,n,i,r){u5.subVectors(e,t),r3.subVectors(n,t),h5.crossVectors(u5,r3);let s=this.direction.dot(h5),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Mp.subVectors(this.origin,t);let a=o*this.direction.dot(r3.crossVectors(Mp,r3));if(a<0)return null;let l=o*this.direction.dot(u5.cross(Mp));if(l<0||a+l>s)return null;let c=-o*Mp.dot(h5);return c<0?null:this.at(c/s,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},dt=class{constructor(){dt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,i,r,s,o,a,l,c,h,u,d,f,p,m){let g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new dt().fromArray(this.elements)}copy(t){let e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){let e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,n=t.elements,i=1/l1.setFromMatrixColumn(t,0).length(),r=1/l1.setFromMatrixColumn(t,1).length(),s=1/l1.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),h=Math.sin(r);if(t.order==="XYZ"){let u=s*c,d=s*h,f=o*c,p=o*h;e[0]=a*c,e[4]=-a*h,e[8]=l,e[1]=d+f*l,e[5]=u-p*l,e[9]=-o*a,e[2]=p-u*l,e[6]=f+d*l,e[10]=s*a}else if(t.order==="YXZ"){let u=a*c,d=a*h,f=l*c,p=l*h;e[0]=u+p*o,e[4]=f*o-d,e[8]=s*l,e[1]=s*h,e[5]=s*c,e[9]=-o,e[2]=d*o-f,e[6]=p+u*o,e[10]=s*a}else if(t.order==="ZXY"){let u=a*c,d=a*h,f=l*c,p=l*h;e[0]=u-p*o,e[4]=-s*h,e[8]=f+d*o,e[1]=d+f*o,e[5]=s*c,e[9]=p-u*o,e[2]=-s*l,e[6]=o,e[10]=s*a}else if(t.order==="ZYX"){let u=s*c,d=s*h,f=o*c,p=o*h;e[0]=a*c,e[4]=f*l-d,e[8]=u*l+p,e[1]=a*h,e[5]=p*l+u,e[9]=d*l-f,e[2]=-l,e[6]=o*a,e[10]=s*a}else if(t.order==="YZX"){let u=s*a,d=s*l,f=o*a,p=o*l;e[0]=a*c,e[4]=p-u*h,e[8]=f*h+d,e[1]=h,e[5]=s*c,e[9]=-o*c,e[2]=-l*c,e[6]=d*h+f,e[10]=u-p*h}else if(t.order==="XZY"){let u=s*a,d=s*l,f=o*a,p=o*l;e[0]=a*c,e[4]=-h,e[8]=l*c,e[1]=u*h+p,e[5]=s*c,e[9]=d*h-f,e[2]=f*h-d,e[6]=o*c,e[10]=p*h+u}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(nyt,t,iyt)}lookAt(t,e,n){let i=this.elements;return Wa.subVectors(t,e),Wa.lengthSq()===0&&(Wa.z=1),Wa.normalize(),Ep.crossVectors(n,Wa),Ep.lengthSq()===0&&(Math.abs(n.z)===1?Wa.x+=1e-4:Wa.z+=1e-4,Wa.normalize(),Ep.crossVectors(n,Wa)),Ep.normalize(),s3.crossVectors(Wa,Ep),i[0]=Ep.x,i[4]=s3.x,i[8]=Wa.x,i[1]=Ep.y,i[5]=s3.y,i[9]=Wa.y,i[2]=Ep.z,i[6]=s3.z,i[10]=Wa.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],c=n[1],h=n[5],u=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],b=n[15],S=i[0],A=i[4],E=i[8],M=i[12],C=i[1],T=i[5],D=i[9],L=i[13],I=i[2],R=i[6],H=i[10],Z=i[14],ee=i[3],F=i[7],V=i[11],U=i[15];return r[0]=s*S+o*C+a*I+l*ee,r[4]=s*A+o*T+a*R+l*F,r[8]=s*E+o*D+a*H+l*V,r[12]=s*M+o*L+a*Z+l*U,r[1]=c*S+h*C+u*I+d*ee,r[5]=c*A+h*T+u*R+d*F,r[9]=c*E+h*D+u*H+d*V,r[13]=c*M+h*L+u*Z+d*U,r[2]=f*S+p*C+m*I+g*ee,r[6]=f*A+p*T+m*R+g*F,r[10]=f*E+p*D+m*H+g*V,r[14]=f*M+p*L+m*Z+g*U,r[3]=v*S+y*C+x*I+b*ee,r[7]=v*A+y*T+x*R+b*F,r[11]=v*E+y*D+x*H+b*V,r[15]=v*M+y*L+x*Z+b*U,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],o=t[5],a=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14],f=t[3],p=t[7],m=t[11],g=t[15];return f*(+r*a*h-i*l*h-r*o*u+n*l*u+i*o*d-n*a*d)+p*(+e*a*d-e*l*u+r*s*u-i*s*d+i*l*c-r*a*c)+m*(+e*l*h-e*o*d-r*s*h+n*s*d+r*o*c-n*l*c)+g*(-i*o*c-e*a*h+e*o*u+i*s*h-n*s*u+n*a*c)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){let i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){let t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=t[9],u=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15],v=h*m*l-p*u*l+p*a*d-o*m*d-h*a*g+o*u*g,y=f*u*l-c*m*l-f*a*d+s*m*d+c*a*g-s*u*g,x=c*p*l-f*h*l+f*o*d-s*p*d-c*o*g+s*h*g,b=f*h*a-c*p*a-f*o*u+s*p*u+c*o*m-s*h*m,S=e*v+n*y+i*x+r*b;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let A=1/S;return t[0]=v*A,t[1]=(p*u*r-h*m*r-p*i*d+n*m*d+h*i*g-n*u*g)*A,t[2]=(o*m*r-p*a*r+p*i*l-n*m*l-o*i*g+n*a*g)*A,t[3]=(h*a*r-o*u*r-h*i*l+n*u*l+o*i*d-n*a*d)*A,t[4]=y*A,t[5]=(c*m*r-f*u*r+f*i*d-e*m*d-c*i*g+e*u*g)*A,t[6]=(f*a*r-s*m*r-f*i*l+e*m*l+s*i*g-e*a*g)*A,t[7]=(s*u*r-c*a*r+c*i*l-e*u*l-s*i*d+e*a*d)*A,t[8]=x*A,t[9]=(f*h*r-c*p*r-f*n*d+e*p*d+c*n*g-e*h*g)*A,t[10]=(s*p*r-f*o*r+f*n*l-e*p*l-s*n*g+e*o*g)*A,t[11]=(c*o*r-s*h*r-c*n*l+e*h*l+s*n*d-e*o*d)*A,t[12]=b*A,t[13]=(c*p*i-f*h*i+f*n*u-e*p*u-c*n*m+e*h*m)*A,t[14]=(f*o*i-s*p*i-f*n*a+e*p*a+s*n*m-e*o*m)*A,t[15]=(s*h*i-c*o*i+c*n*a-e*h*a-s*n*u+e*o*u)*A,this}scale(t){let e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,o=t.y,a=t.z,l=r*s,c=r*o;return this.set(l*s+n,l*o-i*a,l*a+i*o,0,l*o+i*a,c*o+n,c*a-i*s,0,l*a-i*o,c*a+i*s,r*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,s){return this.set(1,n,r,0,t,1,s,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){let i=this.elements,r=e._x,s=e._y,o=e._z,a=e._w,l=r+r,c=s+s,h=o+o,u=r*l,d=r*c,f=r*h,p=s*c,m=s*h,g=o*h,v=a*l,y=a*c,x=a*h,b=n.x,S=n.y,A=n.z;return i[0]=(1-(p+g))*b,i[1]=(d+x)*b,i[2]=(f-y)*b,i[3]=0,i[4]=(d-x)*S,i[5]=(1-(u+g))*S,i[6]=(m+v)*S,i[7]=0,i[8]=(f+y)*A,i[9]=(m-v)*A,i[10]=(1-(u+p))*A,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){let i=this.elements,r=l1.set(i[0],i[1],i[2]).length(),s=l1.set(i[4],i[5],i[6]).length(),o=l1.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],ru.copy(this);let a=1/r,l=1/s,c=1/o;return ru.elements[0]*=a,ru.elements[1]*=a,ru.elements[2]*=a,ru.elements[4]*=l,ru.elements[5]*=l,ru.elements[6]*=l,ru.elements[8]*=c,ru.elements[9]*=c,ru.elements[10]*=c,e.setFromRotationMatrix(ru),n.x=r,n.y=s,n.z=o,this}makePerspective(t,e,n,i,r,s){let o=this.elements,a=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),h=(n+i)/(n-i),u=-(s+r)/(s-r),d=-2*s*r/(s-r);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,r,s){let o=this.elements,a=1/(e-t),l=1/(n-i),c=1/(s-r),h=(e+t)*a,u=(n+i)*l,d=(s+r)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){let e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){let n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}},l1=new G,ru=new dt,nyt=new G(0,0,0),iyt=new G(1,1,1),Ep=new G,s3=new G,Wa=new G,rse=new dt,sse=new Wn,Mo=class{constructor(t=0,e=0,n=0,i=Mo.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){let i=t.elements,r=i[0],s=i[4],o=i[8],a=i[1],l=i[5],c=i[9],h=i[2],u=i[6],d=i[10];switch(e){case"XYZ":this._y=Math.asin(vs(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-vs(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-h,r),this._z=0);break;case"ZXY":this._x=Math.asin(vs(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-vs(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(vs(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,r)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-vs(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return rse.makeRotationFromQuaternion(t),this.setFromRotationMatrix(rse,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return sse.setFromEuler(this),this.setFromQuaternion(sse,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Mo.DEFAULT_ORDER="XYZ";var x$=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},ryt=0,ose=new G,c1=new Wn,Hd=new dt,o3=new G,OS=new G,syt=new G,oyt=new Wn,ase=new G(1,0,0),lse=new G(0,1,0),cse=new G(0,0,1),ayt={type:"added"},use={type:"removed"},wi=class extends Ba{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ryt++}),this.uuid=Yh(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=wi.DEFAULT_UP.clone();let t=new G,e=new Mo,n=new Wn,i=new G(1,1,1);function r(){n.setFromEuler(e,!1)}function s(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new dt},normalMatrix:{value:new Eo}}),this.matrix=new dt,this.matrixWorld=new dt,this.matrixAutoUpdate=wi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=wi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new x$,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return c1.setFromAxisAngle(t,e),this.quaternion.multiply(c1),this}rotateOnWorldAxis(t,e){return c1.setFromAxisAngle(t,e),this.quaternion.premultiply(c1),this}rotateX(t){return this.rotateOnAxis(ase,t)}rotateY(t){return this.rotateOnAxis(lse,t)}rotateZ(t){return this.rotateOnAxis(cse,t)}translateOnAxis(t,e){return ose.copy(t).applyQuaternion(this.quaternion),this.position.add(ose.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(ase,t)}translateY(t){return this.translateOnAxis(lse,t)}translateZ(t){return this.translateOnAxis(cse,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Hd.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?o3.copy(t):o3.set(t,e,n);let i=this.parent;this.updateWorldMatrix(!0,!1),OS.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Hd.lookAt(OS,o3,this.up):Hd.lookAt(o3,OS,this.up),this.quaternion.setFromRotationMatrix(Hd),i&&(Hd.extractRotation(i.matrixWorld),c1.setFromRotationMatrix(Hd),this.quaternion.premultiply(c1.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(ayt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}let e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(use)),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){let e=this.children[t];e.parent=null,e.dispatchEvent(use)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Hd.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Hd.multiply(t.parent.matrixWorld)),t.applyMatrix4(Hd),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){let r=this.children[n].getObjectByProperty(t,e);if(r!==void 0)return r}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){let s=this.children[i].getObjectsByProperty(t,e);s.length>0&&(n=n.concat(s))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(OS,t,syt),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(OS,oyt,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);let e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){let e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);let e=this.children;for(let n=0,i=e.length;n<i;n++){let r=e[n];(r.matrixWorldAutoUpdate===!0||t===!0)&&r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){let n=this.parent;if(t===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){let i=this.children;for(let r=0,s=i.length;r<s;r++){let o=i[r];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(t){let e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function r(o,a){return o[a.uuid]===void 0&&(o[a.uuid]=a.toJSON(t)),a.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);let o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){let a=o.shapes;if(Array.isArray(a))for(let l=0,c=a.length;l<c;l++){let h=a[l];r(t.shapes,h)}else r(t.shapes,a)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let o=[];for(let a=0,l=this.material.length;a<l;a++)o.push(r(t.materials,this.material[a]));i.material=o}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){let a=this.animations[o];i.animations.push(r(t.animations,a))}}if(e){let o=s(t.geometries),a=s(t.materials),l=s(t.textures),c=s(t.images),h=s(t.shapes),u=s(t.skeletons),d=s(t.animations),f=s(t.nodes);o.length>0&&(n.geometries=o),a.length>0&&(n.materials=a),l.length>0&&(n.textures=l),c.length>0&&(n.images=c),h.length>0&&(n.shapes=h),u.length>0&&(n.skeletons=u),d.length>0&&(n.animations=d),f.length>0&&(n.nodes=f)}return n.object=i,n;function s(o){let a=[];for(let l in o){let c=o[l];delete c.metadata,a.push(c)}return a}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){let i=t.children[n];this.add(i.clone())}return this}};wi.DEFAULT_UP=new G(0,1,0);wi.DEFAULT_MATRIX_AUTO_UPDATE=!0;wi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var su=new G,jd=new G,d5=new G,Vd=new G,u1=new G,h1=new G,hse=new G,f5=new G,p5=new G,m5=new G,ga=class{constructor(t=new G,e=new G,n=new G){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),su.subVectors(t,e),i.cross(su);let r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){su.subVectors(i,e),jd.subVectors(n,e),d5.subVectors(t,e);let s=su.dot(su),o=su.dot(jd),a=su.dot(d5),l=jd.dot(jd),c=jd.dot(d5),h=s*l-o*o;if(h===0)return r.set(-2,-1,-1);let u=1/h,d=(l*a-o*c)*u,f=(s*c-o*a)*u;return r.set(1-d-f,f,d)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,Vd),Vd.x>=0&&Vd.y>=0&&Vd.x+Vd.y<=1}static getUV(t,e,n,i,r,s,o,a){return this.getBarycoord(t,e,n,i,Vd),a.set(0,0),a.addScaledVector(r,Vd.x),a.addScaledVector(s,Vd.y),a.addScaledVector(o,Vd.z),a}static isFrontFacing(t,e,n,i){return su.subVectors(n,e),jd.subVectors(t,e),su.cross(jd).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return su.subVectors(this.c,this.b),jd.subVectors(this.a,this.b),su.cross(jd).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ga.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ga.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return ga.getUV(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return ga.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ga.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let n=this.a,i=this.b,r=this.c,s,o;u1.subVectors(i,n),h1.subVectors(r,n),f5.subVectors(t,n);let a=u1.dot(f5),l=h1.dot(f5);if(a<=0&&l<=0)return e.copy(n);p5.subVectors(t,i);let c=u1.dot(p5),h=h1.dot(p5);if(c>=0&&h<=c)return e.copy(i);let u=a*h-c*l;if(u<=0&&a>=0&&c<=0)return s=a/(a-c),e.copy(n).addScaledVector(u1,s);m5.subVectors(t,r);let d=u1.dot(m5),f=h1.dot(m5);if(f>=0&&d<=f)return e.copy(r);let p=d*l-a*f;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),e.copy(n).addScaledVector(h1,o);let m=c*f-d*h;if(m<=0&&h-c>=0&&d-f>=0)return hse.subVectors(r,i),o=(h-c)/(h-c+(d-f)),e.copy(i).addScaledVector(hse,o);let g=1/(m+p+u);return s=p*g,o=u*g,e.copy(n).addScaledVector(u1,s).addScaledVector(h1,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},lyt=0,KE=class extends Ba{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:lyt++}),this.uuid=Yh(),this.name="",this.type="Material",this.blending=cb,this.side=zu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Pxe,this.blendDst=Dxe,this.blendEquation=z1,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LH,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Fvt,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=e5,this.stencilZFail=e5,this.stencilZPass=e5,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let n=t[e];if(n===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}let i=this[e];if(i===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==cb&&(n.blending=this.blending),this.side!==zu&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(n.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(r){let s=[];for(let o in r){let a=r[o];delete a.metadata,s.push(a)}return s}if(e){let r=i(t.textures),s=i(t.images);r.length>0&&(n.textures=r),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,n=null;if(e!==null){let i=e.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}},JE=class extends KE{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Oxe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}},es=new G,a3=new Ae,on=class{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=kH,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)a3.fromBufferAttribute(this,e),a3.applyMatrix3(t),this.setXY(e,a3.x,a3.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)es.fromBufferAttribute(this,e),es.applyMatrix3(t),this.setXYZ(e,es.x,es.y,es.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)es.fromBufferAttribute(this,e),es.applyMatrix4(t),this.setXYZ(e,es.x,es.y,es.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)es.fromBufferAttribute(this,e),es.applyNormalMatrix(t),this.setXYZ(e,es.x,es.y,es.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)es.fromBufferAttribute(this,e),es.transformDirection(t),this.setXYZ(e,es.x,es.y,es.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=yf(e,this.array)),e}setX(t,e){return this.normalized&&(e=Mi(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=yf(e,this.array)),e}setY(t,e){return this.normalized&&(e=Mi(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=yf(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Mi(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=yf(e,this.array)),e}setW(t,e){return this.normalized&&(e=Mi(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Mi(e,this.array),n=Mi(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=Mi(e,this.array),n=Mi(n,this.array),i=Mi(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=Mi(e,this.array),n=Mi(n,this.array),i=Mi(i,this.array),r=Mi(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==kH&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},Uxe=class extends on{constructor(t,e,n){super(new Uint16Array(t),e,n)}},pM=class extends on{constructor(t,e,n){super(new Uint32Array(t),e,n)}},cyt=class extends on{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}},At=class extends on{constructor(t,e,n){super(new Float32Array(t),e,n)}},uyt=0,Yl=new dt,g5=new wi,d1=new G,$a=new cs,LS=new cs,Is=new G,Qt=class extends Ba{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:uyt++}),this.uuid=Yh(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Bxe(t)?pM:Uxe)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);let n=this.attributes.normal;if(n!==void 0){let r=new Eo().getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Yl.makeRotationFromQuaternion(t),this.applyMatrix4(Yl),this}rotateX(t){return Yl.makeRotationX(t),this.applyMatrix4(Yl),this}rotateY(t){return Yl.makeRotationY(t),this.applyMatrix4(Yl),this}rotateZ(t){return Yl.makeRotationZ(t),this.applyMatrix4(Yl),this}translate(t,e,n){return Yl.makeTranslation(t,e,n),this.applyMatrix4(Yl),this}scale(t,e,n){return Yl.makeScale(t,e,n),this.applyMatrix4(Yl),this}lookAt(t){return g5.lookAt(t),g5.updateMatrix(),this.applyMatrix4(g5.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(d1).negate(),this.translate(d1.x,d1.y,d1.z),this}setFromPoints(t){let e=[];for(let n=0,i=t.length;n<i;n++){let r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new At(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new cs);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new G(-1/0,-1/0,-1/0),new G(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){let r=e[n];$a.setFromBufferAttribute(r),this.morphTargetsRelative?(Is.addVectors(this.boundingBox.min,$a.min),this.boundingBox.expandByPoint(Is),Is.addVectors(this.boundingBox.max,$a.max),this.boundingBox.expandByPoint(Is)):(this.boundingBox.expandByPoint($a.min),this.boundingBox.expandByPoint($a.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Gc);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new G,1/0);return}if(t){let n=this.boundingSphere.center;if($a.setFromBufferAttribute(t),e)for(let r=0,s=e.length;r<s;r++){let o=e[r];LS.setFromBufferAttribute(o),this.morphTargetsRelative?(Is.addVectors($a.min,LS.min),$a.expandByPoint(Is),Is.addVectors($a.max,LS.max),$a.expandByPoint(Is)):($a.expandByPoint(LS.min),$a.expandByPoint(LS.max))}$a.getCenter(n);let i=0;for(let r=0,s=t.count;r<s;r++)Is.fromBufferAttribute(t,r),i=Math.max(i,n.distanceToSquared(Is));if(e)for(let r=0,s=e.length;r<s;r++){let o=e[r],a=this.morphTargetsRelative;for(let l=0,c=o.count;l<c;l++)Is.fromBufferAttribute(o,l),a&&(d1.fromBufferAttribute(t,l),Is.add(d1)),i=Math.max(i,n.distanceToSquared(Is))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=t.array,i=e.position.array,r=e.normal.array,s=e.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new on(new Float32Array(4*o),4));let a=this.getAttribute("tangent").array,l=[],c=[];for(let C=0;C<o;C++)l[C]=new G,c[C]=new G;let h=new G,u=new G,d=new G,f=new Ae,p=new Ae,m=new Ae,g=new G,v=new G;function y(C,T,D){h.fromArray(i,C*3),u.fromArray(i,T*3),d.fromArray(i,D*3),f.fromArray(s,C*2),p.fromArray(s,T*2),m.fromArray(s,D*2),u.sub(h),d.sub(h),p.sub(f),m.sub(f);let L=1/(p.x*m.y-m.x*p.y);!isFinite(L)||(g.copy(u).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(L),v.copy(d).multiplyScalar(p.x).addScaledVector(u,-m.x).multiplyScalar(L),l[C].add(g),l[T].add(g),l[D].add(g),c[C].add(v),c[T].add(v),c[D].add(v))}let x=this.groups;x.length===0&&(x=[{start:0,count:n.length}]);for(let C=0,T=x.length;C<T;++C){let D=x[C],L=D.start,I=D.count;for(let R=L,H=L+I;R<H;R+=3)y(n[R+0],n[R+1],n[R+2])}let b=new G,S=new G,A=new G,E=new G;function M(C){A.fromArray(r,C*3),E.copy(A);let T=l[C];b.copy(T),b.sub(A.multiplyScalar(A.dot(T))).normalize(),S.crossVectors(E,T);let D=S.dot(c[C])<0?-1:1;a[C*4]=b.x,a[C*4+1]=b.y,a[C*4+2]=b.z,a[C*4+3]=D}for(let C=0,T=x.length;C<T;++C){let D=x[C],L=D.start,I=D.count;for(let R=L,H=L+I;R<H;R+=3)M(n[R+0]),M(n[R+1]),M(n[R+2])}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new on(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let u=0,d=n.count;u<d;u++)n.setXYZ(u,0,0,0);let i=new G,r=new G,s=new G,o=new G,a=new G,l=new G,c=new G,h=new G;if(t)for(let u=0,d=t.count;u<d;u+=3){let f=t.getX(u+0),p=t.getX(u+1),m=t.getX(u+2);i.fromBufferAttribute(e,f),r.fromBufferAttribute(e,p),s.fromBufferAttribute(e,m),c.subVectors(s,r),h.subVectors(i,r),c.cross(h),o.fromBufferAttribute(n,f),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),o.add(c),a.add(c),l.add(c),n.setXYZ(f,o.x,o.y,o.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let u=0,d=e.count;u<d;u+=3)i.fromBufferAttribute(e,u+0),r.fromBufferAttribute(e,u+1),s.fromBufferAttribute(e,u+2),c.subVectors(s,r),h.subVectors(i,r),c.cross(h),n.setXYZ(u+0,c.x,c.y,c.z),n.setXYZ(u+1,c.x,c.y,c.z),n.setXYZ(u+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Is.fromBufferAttribute(t,e),Is.normalize(),t.setXYZ(e,Is.x,Is.y,Is.z)}toNonIndexed(){function t(o,a){let l=o.array,c=o.itemSize,h=o.normalized,u=new l.constructor(a.length*c),d=0,f=0;for(let p=0,m=a.length;p<m;p++){o.isInterleavedBufferAttribute?d=a[p]*o.data.stride+o.offset:d=a[p]*c;for(let g=0;g<c;g++)u[f++]=l[d++]}return new on(u,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let e=new Qt,n=this.index.array,i=this.attributes;for(let o in i){let a=i[o],l=t(a,n);e.setAttribute(o,l)}let r=this.morphAttributes;for(let o in r){let a=[],l=r[o];for(let c=0,h=l.length;c<h;c++){let u=l[c],d=t(u,n);a.push(d)}e.morphAttributes[o]=a}e.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let o=0,a=s.length;o<a;o++){let l=s[o];e.addGroup(l.start,l.count,l.materialIndex)}return e}toJSON(){let t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let a=this.parameters;for(let l in a)a[l]!==void 0&&(t[l]=a[l]);return t}t.data={attributes:{}};let e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let n=this.attributes;for(let a in n){let l=n[a];t.data.attributes[a]=l.toJSON(t.data)}let i={},r=!1;for(let a in this.morphAttributes){let l=this.morphAttributes[a],c=[];for(let h=0,u=l.length;h<u;h++){let d=l[h];c.push(d.toJSON(t.data))}c.length>0&&(i[a]=c,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));let o=this.boundingSphere;return o!==null&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let n=t.index;n!==null&&this.setIndex(n.clone(e));let i=t.attributes;for(let l in i){let c=i[l];this.setAttribute(l,c.clone(e))}let r=t.morphAttributes;for(let l in r){let c=[],h=r[l];for(let u=0,d=h.length;u<d;u++)c.push(h[u].clone(e));this.morphAttributes[l]=c}this.morphTargetsRelative=t.morphTargetsRelative;let s=t.groups;for(let l=0,c=s.length;l<c;l++){let h=s[l];this.addGroup(h.start,h.count,h.materialIndex)}let o=t.boundingBox;o!==null&&(this.boundingBox=o.clone());let a=t.boundingSphere;return a!==null&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},dse=new dt,f1=new qw,v5=new Gc,RS=new G,IS=new G,BS=new G,y5=new G,l3=new G,c3=new Ae,u3=new Ae,h3=new Ae,x5=new G,d3=new G,cl=class extends wi{constructor(t=new Qt,e=new JE){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){let n=t[e[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++){let s=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}getVertexPosition(t,e){let n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,s=n.morphTargetsRelative;e.fromBufferAttribute(i,t);let o=this.morphTargetInfluences;if(r&&o){l3.set(0,0,0);for(let a=0,l=r.length;a<l;a++){let c=o[a],h=r[a];c!==0&&(y5.fromBufferAttribute(h,t),s?l3.addScaledVector(y5,c):l3.addScaledVector(y5.sub(e),c))}e.add(l3)}return this.isSkinnedMesh&&this.boneTransform(t,e),e}raycast(t,e){let n=this.geometry,i=this.material,r=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),v5.copy(n.boundingSphere),v5.applyMatrix4(r),t.ray.intersectsSphere(v5)===!1)||(dse.copy(r).invert(),f1.copy(t.ray).applyMatrix4(dse),n.boundingBox!==null&&f1.intersectsBox(n.boundingBox)===!1))return;let s,o=n.index,a=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,h=n.groups,u=n.drawRange;if(o!==null)if(Array.isArray(i))for(let d=0,f=h.length;d<f;d++){let p=h[d],m=i[p.materialIndex],g=Math.max(p.start,u.start),v=Math.min(o.count,Math.min(p.start+p.count,u.start+u.count));for(let y=g,x=v;y<x;y+=3){let b=o.getX(y),S=o.getX(y+1),A=o.getX(y+2);s=f3(this,m,t,f1,l,c,b,S,A),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=p.materialIndex,e.push(s))}}else{let d=Math.max(0,u.start),f=Math.min(o.count,u.start+u.count);for(let p=d,m=f;p<m;p+=3){let g=o.getX(p),v=o.getX(p+1),y=o.getX(p+2);s=f3(this,i,t,f1,l,c,g,v,y),s&&(s.faceIndex=Math.floor(p/3),e.push(s))}}else if(a!==void 0)if(Array.isArray(i))for(let d=0,f=h.length;d<f;d++){let p=h[d],m=i[p.materialIndex],g=Math.max(p.start,u.start),v=Math.min(a.count,Math.min(p.start+p.count,u.start+u.count));for(let y=g,x=v;y<x;y+=3){let b=y,S=y+1,A=y+2;s=f3(this,m,t,f1,l,c,b,S,A),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=p.materialIndex,e.push(s))}}else{let d=Math.max(0,u.start),f=Math.min(a.count,u.start+u.count);for(let p=d,m=f;p<m;p+=3){let g=p,v=p+1,y=p+2;s=f3(this,i,t,f1,l,c,g,v,y),s&&(s.faceIndex=Math.floor(p/3),e.push(s))}}}};function hyt(t,e,n,i,r,s,o,a){let l;if(e.side===Us?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===zu,a),l===null)return null;d3.copy(a),d3.applyMatrix4(t.matrixWorld);let c=n.ray.origin.distanceTo(d3);return c<n.near||c>n.far?null:{distance:c,point:d3.clone(),object:t}}function f3(t,e,n,i,r,s,o,a,l){t.getVertexPosition(o,RS),t.getVertexPosition(a,IS),t.getVertexPosition(l,BS);let c=hyt(t,e,n,i,RS,IS,BS,x5);if(c){r&&(c3.fromBufferAttribute(r,o),u3.fromBufferAttribute(r,a),h3.fromBufferAttribute(r,l),c.uv=ga.getUV(x5,RS,IS,BS,c3,u3,h3,new Ae)),s&&(c3.fromBufferAttribute(s,o),u3.fromBufferAttribute(s,a),h3.fromBufferAttribute(s,l),c.uv2=ga.getUV(x5,RS,IS,BS,c3,u3,h3,new Ae));let h={a:o,b:a,c:l,normal:new G,materialIndex:0};ga.getNormal(RS,IS,BS,h.normal),c.face=h}return c}var rd=class extends Qt{constructor(t=1,e=1,n=1,i=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};let o=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);let a=[],l=[],c=[],h=[],u=0,d=0;f("z","y","x",-1,-1,n,e,t,s,r,0),f("z","y","x",1,-1,n,e,-t,s,r,1),f("x","z","y",1,1,t,n,e,i,s,2),f("x","z","y",1,-1,t,n,-e,i,s,3),f("x","y","z",1,-1,t,e,n,i,r,4),f("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new At(l,3)),this.setAttribute("normal",new At(c,3)),this.setAttribute("uv",new At(h,2));function f(p,m,g,v,y,x,b,S,A,E,M){let C=x/A,T=b/E,D=x/2,L=b/2,I=S/2,R=A+1,H=E+1,Z=0,ee=0,F=new G;for(let V=0;V<H;V++){let U=V*T-L;for(let j=0;j<R;j++){let z=j*C-D;F[p]=z*v,F[m]=U*y,F[g]=I,l.push(F.x,F.y,F.z),F[p]=0,F[m]=0,F[g]=S>0?1:-1,c.push(F.x,F.y,F.z),h.push(j/A),h.push(1-V/E),Z+=1}}for(let V=0;V<E;V++)for(let U=0;U<A;U++){let j=u+U+R*V,z=u+U+R*(V+1),Y=u+(U+1)+R*(V+1),J=u+(U+1)+R*V;a.push(j,z,J),a.push(z,Y,J),ee+=6}o.addGroup(d,ee,M),d+=ee,u+=Z}}static fromJSON(t){return new rd(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function sw(t){let e={};for(let n in t){e[n]={};for(let i in t[n]){let r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function $o(t){let e={};for(let n=0;n<t.length;n++){let i=sw(t[n]);for(let r in i)e[r]=i[r]}return e}function dyt(t){let e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function Gxe(t){return t.getRenderTarget()===null&&t.outputEncoding===mn?Mh:EL}var Xw={clone:sw,merge:$o},fyt=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,pyt=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Ms=class extends KE{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=fyt,this.fragmentShader=pyt,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=sw(t.uniforms),this.uniformsGroups=dyt(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let i in this.uniforms){let r=this.uniforms[i].value;r&&r.isTexture?e.uniforms[i]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[i]={type:"m4",value:r.toArray()}:e.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;let n={};for(let i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}},Yw=class extends wi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dt,this.projectionMatrix=new dt,this.projectionMatrixInverse=new dt}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},So=class extends Yw{constructor(t=50,e=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=I2*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(dM*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return I2*2*Math.atan(Math.tan(dM*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,s){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(dM*.5*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,s=this.view;if(this.view!==null&&this.view.enabled){let a=s.fullWidth,l=s.fullHeight;r+=s.offsetX*i/a,e-=s.offsetY*n/l,i*=s.width/a,n*=s.height/l}let o=this.filmOffset;o!==0&&(r+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},p1=-90,m1=1,myt=class extends wi{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;let i=new So(p1,m1,t,e);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);let r=new So(p1,m1,t,e);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);let s=new So(p1,m1,t,e);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);let o=new So(p1,m1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);let a=new So(p1,m1,t,e);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(0,0,1),this.add(a);let l=new So(p1,m1,t,e);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(t,e){this.parent===null&&this.updateMatrixWorld();let n=this.renderTarget,[i,r,s,o,a,l]=this.children,c=t.getRenderTarget(),h=t.toneMapping,u=t.xr.enabled;t.toneMapping=Tf,t.xr.enabled=!1;let d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(c),t.toneMapping=h,t.xr.enabled=u,n.texture.needsPMREMUpdate=!0}},b$=class extends Hs{constructor(t,e,n,i,r,s,o,a,l,c){t=t!==void 0?t:[],e=e!==void 0?e:Cv,super(t,e,n,i,r,s,o,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},gyt=class extends _s{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let n={width:t,height:t,depth:1},i=[n,n,n,n,n,n];this.texture=new b$(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:oi}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new rd(5,5,5),r=new Ms({name:"CubemapFromEquirect",uniforms:sw(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Us,blending:io});r.uniforms.tEquirect.value=e;let s=new cl(i,r),o=e.minFilter;return e.minFilter===rw&&(e.minFilter=oi),new myt(1,10,this).update(t,s),e.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,n,i){let r=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,n,i);t.setRenderTarget(r)}},b5=new G,vyt=new G,yyt=new Eo,gc=class{constructor(t=new G(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){let i=b5.subVectors(n,e).cross(vyt.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){let n=t.delta(b5),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(n).multiplyScalar(r).add(t.start)}intersectsLine(t){let e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let n=e||yyt.getNormalMatrix(t),i=this.coplanarPoint(b5).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},g1=new Gc,p3=new G,w$=class{constructor(t=new gc,e=new gc,n=new gc,i=new gc,r=new gc,s=new gc){this.planes=[t,e,n,i,r,s]}set(t,e,n,i,r,s){let o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(s),this}copy(t){let e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){let e=this.planes,n=t.elements,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(o-i,h-a,p-u,y-m).normalize(),e[1].setComponents(o+i,h+a,p+u,y+m).normalize(),e[2].setComponents(o+r,h+l,p+d,y+g).normalize(),e[3].setComponents(o-r,h-l,p-d,y-g).normalize(),e[4].setComponents(o-s,h-c,p-f,y-v).normalize(),e[5].setComponents(o+s,h+c,p+f,y+v).normalize(),this}intersectsObject(t){let e=t.geometry;return e.boundingSphere===null&&e.computeBoundingSphere(),g1.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(g1)}intersectsSprite(t){return g1.center.set(0,0,0),g1.radius=.7071067811865476,g1.applyMatrix4(t.matrixWorld),this.intersectsSphere(g1)}intersectsSphere(t){let e=this.planes,n=t.center,i=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(n)<i)return!1;return!0}intersectsBox(t){let e=this.planes;for(let n=0;n<6;n++){let i=e[n];if(p3.x=i.normal.x>0?t.max.x:t.min.x,p3.y=i.normal.y>0?t.max.y:t.min.y,p3.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(p3)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function Hxe(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function xyt(t,e){let n=e.isWebGL2,i=new WeakMap;function r(c,h){let u=c.array,d=c.usage,f=t.createBuffer();t.bindBuffer(h,f),t.bufferData(h,u,d),c.onUploadCallback();let p;if(u instanceof Float32Array)p=5126;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(u instanceof Int16Array)p=5122;else if(u instanceof Uint32Array)p=5125;else if(u instanceof Int32Array)p=5124;else if(u instanceof Int8Array)p=5120;else if(u instanceof Uint8Array)p=5121;else if(u instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function s(c,h,u){let d=h.array,f=h.updateRange;t.bindBuffer(u,c),f.count===-1?t.bufferSubData(u,0,d):(n?t.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):t.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),h.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);let h=i.get(c);h&&(t.deleteBuffer(h.buffer),i.delete(c))}function l(c,h){if(c.isGLBufferAttribute){let d=i.get(c);(!d||d.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);let u=i.get(c);u===void 0?i.set(c,r(c,h)):u.version<c.version&&(s(u.buffer,c,h),u.version=c.version)}return{get:o,remove:a,update:l}}var wB=class extends Qt{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};let r=t/2,s=e/2,o=Math.floor(n),a=Math.floor(i),l=o+1,c=a+1,h=t/o,u=e/a,d=[],f=[],p=[],m=[];for(let g=0;g<c;g++){let v=g*u-s;for(let y=0;y<l;y++){let x=y*h-r;f.push(x,-v,0),p.push(0,0,1),m.push(y/o),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let v=0;v<o;v++){let y=v+l*g,x=v+l*(g+1),b=v+1+l*(g+1),S=v+1+l*g;d.push(y,x,S),d.push(x,b,S)}this.setIndex(d),this.setAttribute("position",new At(f,3)),this.setAttribute("normal",new At(p,3)),this.setAttribute("uv",new At(m,2))}static fromJSON(t){return new wB(t.width,t.height,t.widthSegments,t.heightSegments)}},byt=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,wyt=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_yt=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Syt=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Ayt=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Myt=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Eyt="vec3 transformed = vec3( position );",Cyt=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Tyt=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Pyt=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Dyt=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Oyt=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Lyt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Ryt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Iyt=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Byt=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,kyt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Fyt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Nyt=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,zyt=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Uyt=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Gyt=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Hyt=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,jyt=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Vyt=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Wyt=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,$yt="gl_FragColor = linearToOutputTexel( gl_FragColor );",qyt=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Xyt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Yyt=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Kyt=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Jyt=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Zyt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Qyt=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,e1t=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,t1t=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,n1t=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,i1t=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,r1t=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,s1t=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,o1t=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,a1t=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,l1t=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,c1t=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,u1t=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,h1t=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,d1t=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,f1t=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,p1t=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,m1t=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,g1t=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,v1t=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,y1t=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,x1t=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,b1t=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,w1t=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,_1t=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,S1t=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,A1t=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,M1t=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,E1t=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,C1t=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,T1t=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,P1t=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,D1t=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,O1t=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,L1t=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,R1t=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,I1t=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,B1t=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,k1t=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,F1t=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,N1t=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,z1t=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,U1t=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,G1t=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,H1t=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,j1t=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,V1t=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,W1t=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,$1t=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,q1t=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,X1t=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Y1t=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,K1t=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,J1t=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Z1t=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Q1t=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,ext=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,txt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,nxt=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,ixt=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,rxt=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,sxt=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,oxt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,axt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,lxt=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,cxt=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,uxt=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,hxt=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,dxt=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,fxt=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,pxt=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,mxt=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,gxt=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,vxt=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,yxt=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xxt=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,bxt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wxt=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,_xt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Sxt=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Axt=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Mxt=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Ext=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Cxt=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Txt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Pxt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Dxt=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Oxt=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Lxt=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Rxt=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ixt=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Bxt=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kxt=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Fxt=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nxt=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,zxt=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Uxt=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gxt=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hxt=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,jxt=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vxt=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Wxt=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$xt=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,qxt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Xxt=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Yxt=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Kxt=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Jxt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,pn={alphamap_fragment:byt,alphamap_pars_fragment:wyt,alphatest_fragment:_yt,alphatest_pars_fragment:Syt,aomap_fragment:Ayt,aomap_pars_fragment:Myt,begin_vertex:Eyt,beginnormal_vertex:Cyt,bsdfs:Tyt,iridescence_fragment:Pyt,bumpmap_pars_fragment:Dyt,clipping_planes_fragment:Oyt,clipping_planes_pars_fragment:Lyt,clipping_planes_pars_vertex:Ryt,clipping_planes_vertex:Iyt,color_fragment:Byt,color_pars_fragment:kyt,color_pars_vertex:Fyt,color_vertex:Nyt,common:zyt,cube_uv_reflection_fragment:Uyt,defaultnormal_vertex:Gyt,displacementmap_pars_vertex:Hyt,displacementmap_vertex:jyt,emissivemap_fragment:Vyt,emissivemap_pars_fragment:Wyt,encodings_fragment:$yt,encodings_pars_fragment:qyt,envmap_fragment:Xyt,envmap_common_pars_fragment:Yyt,envmap_pars_fragment:Kyt,envmap_pars_vertex:Jyt,envmap_physical_pars_fragment:c1t,envmap_vertex:Zyt,fog_vertex:Qyt,fog_pars_vertex:e1t,fog_fragment:t1t,fog_pars_fragment:n1t,gradientmap_pars_fragment:i1t,lightmap_fragment:r1t,lightmap_pars_fragment:s1t,lights_lambert_fragment:o1t,lights_lambert_pars_fragment:a1t,lights_pars_begin:l1t,lights_toon_fragment:u1t,lights_toon_pars_fragment:h1t,lights_phong_fragment:d1t,lights_phong_pars_fragment:f1t,lights_physical_fragment:p1t,lights_physical_pars_fragment:m1t,lights_fragment_begin:g1t,lights_fragment_maps:v1t,lights_fragment_end:y1t,logdepthbuf_fragment:x1t,logdepthbuf_pars_fragment:b1t,logdepthbuf_pars_vertex:w1t,logdepthbuf_vertex:_1t,map_fragment:S1t,map_pars_fragment:A1t,map_particle_fragment:M1t,map_particle_pars_fragment:E1t,metalnessmap_fragment:C1t,metalnessmap_pars_fragment:T1t,morphcolor_vertex:P1t,morphnormal_vertex:D1t,morphtarget_pars_vertex:O1t,morphtarget_vertex:L1t,normal_fragment_begin:R1t,normal_fragment_maps:I1t,normal_pars_fragment:B1t,normal_pars_vertex:k1t,normal_vertex:F1t,normalmap_pars_fragment:N1t,clearcoat_normal_fragment_begin:z1t,clearcoat_normal_fragment_maps:U1t,clearcoat_pars_fragment:G1t,iridescence_pars_fragment:H1t,output_fragment:j1t,packing:V1t,premultiplied_alpha_fragment:W1t,project_vertex:$1t,dithering_fragment:q1t,dithering_pars_fragment:X1t,roughnessmap_fragment:Y1t,roughnessmap_pars_fragment:K1t,shadowmap_pars_fragment:J1t,shadowmap_pars_vertex:Z1t,shadowmap_vertex:Q1t,shadowmask_pars_fragment:ext,skinbase_vertex:txt,skinning_pars_vertex:nxt,skinning_vertex:ixt,skinnormal_vertex:rxt,specularmap_fragment:sxt,specularmap_pars_fragment:oxt,tonemapping_fragment:axt,tonemapping_pars_fragment:lxt,transmission_fragment:cxt,transmission_pars_fragment:uxt,uv_pars_fragment:hxt,uv_pars_vertex:dxt,uv_vertex:fxt,uv2_pars_fragment:pxt,uv2_pars_vertex:mxt,uv2_vertex:gxt,worldpos_vertex:vxt,background_vert:yxt,background_frag:xxt,backgroundCube_vert:bxt,backgroundCube_frag:wxt,cube_vert:_xt,cube_frag:Sxt,depth_vert:Axt,depth_frag:Mxt,distanceRGBA_vert:Ext,distanceRGBA_frag:Cxt,equirect_vert:Txt,equirect_frag:Pxt,linedashed_vert:Dxt,linedashed_frag:Oxt,meshbasic_vert:Lxt,meshbasic_frag:Rxt,meshlambert_vert:Ixt,meshlambert_frag:Bxt,meshmatcap_vert:kxt,meshmatcap_frag:Fxt,meshnormal_vert:Nxt,meshnormal_frag:zxt,meshphong_vert:Uxt,meshphong_frag:Gxt,meshphysical_vert:Hxt,meshphysical_frag:jxt,meshtoon_vert:Vxt,meshtoon_frag:Wxt,points_vert:$xt,points_frag:qxt,shadow_vert:Xxt,shadow_frag:Yxt,sprite_vert:Kxt,sprite_frag:Jxt},ut={common:{diffuse:{value:new Zt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Eo},uv2Transform:{value:new Eo},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ae(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Eo}},sprite:{diffuse:{value:new Zt(16777215)},opacity:{value:1},center:{value:new Ae(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Eo}}},Th={basic:{uniforms:$o([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.fog]),vertexShader:pn.meshbasic_vert,fragmentShader:pn.meshbasic_frag},lambert:{uniforms:$o([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new Zt(0)}}]),vertexShader:pn.meshlambert_vert,fragmentShader:pn.meshlambert_frag},phong:{uniforms:$o([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new Zt(0)},specular:{value:new Zt(1118481)},shininess:{value:30}}]),vertexShader:pn.meshphong_vert,fragmentShader:pn.meshphong_frag},standard:{uniforms:$o([ut.common,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.roughnessmap,ut.metalnessmap,ut.fog,ut.lights,{emissive:{value:new Zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:pn.meshphysical_vert,fragmentShader:pn.meshphysical_frag},toon:{uniforms:$o([ut.common,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.gradientmap,ut.fog,ut.lights,{emissive:{value:new Zt(0)}}]),vertexShader:pn.meshtoon_vert,fragmentShader:pn.meshtoon_frag},matcap:{uniforms:$o([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,{matcap:{value:null}}]),vertexShader:pn.meshmatcap_vert,fragmentShader:pn.meshmatcap_frag},points:{uniforms:$o([ut.points,ut.fog]),vertexShader:pn.points_vert,fragmentShader:pn.points_frag},dashed:{uniforms:$o([ut.common,ut.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pn.linedashed_vert,fragmentShader:pn.linedashed_frag},depth:{uniforms:$o([ut.common,ut.displacementmap]),vertexShader:pn.depth_vert,fragmentShader:pn.depth_frag},normal:{uniforms:$o([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,{opacity:{value:1}}]),vertexShader:pn.meshnormal_vert,fragmentShader:pn.meshnormal_frag},sprite:{uniforms:$o([ut.sprite,ut.fog]),vertexShader:pn.sprite_vert,fragmentShader:pn.sprite_frag},background:{uniforms:{uvTransform:{value:new Eo},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:pn.background_vert,fragmentShader:pn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:pn.backgroundCube_vert,fragmentShader:pn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:pn.cube_vert,fragmentShader:pn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pn.equirect_vert,fragmentShader:pn.equirect_frag},distanceRGBA:{uniforms:$o([ut.common,ut.displacementmap,{referencePosition:{value:new G},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pn.distanceRGBA_vert,fragmentShader:pn.distanceRGBA_frag},shadow:{uniforms:$o([ut.lights,ut.fog,{color:{value:new Zt(0)},opacity:{value:1}}]),vertexShader:pn.shadow_vert,fragmentShader:pn.shadow_frag}};Th.physical={uniforms:$o([Th.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ae(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Zt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ae},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Zt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Zt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:pn.meshphysical_vert,fragmentShader:pn.meshphysical_frag};var m3={r:0,b:0,g:0};function Zxt(t,e,n,i,r,s,o){let a=new Zt(0),l=s===!0?0:1,c,h,u=null,d=0,f=null;function p(g,v){let y=!1,x=v.isScene===!0?v.background:null;x&&x.isTexture&&(x=(v.backgroundBlurriness>0?n:e).get(x));let b=t.xr,S=b.getSession&&b.getSession();S&&S.environmentBlendMode==="additive"&&(x=null),x===null?m(a,l):x&&x.isColor&&(m(x,1),y=!0),(t.autoClear||y)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),x&&(x.isCubeTexture||x.mapping===YE)?(h===void 0&&(h=new cl(new rd(1,1,1),new Ms({name:"BackgroundCubeMaterial",uniforms:sw(Th.backgroundCube.uniforms),vertexShader:Th.backgroundCube.vertexShader,fragmentShader:Th.backgroundCube.fragmentShader,side:Us,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(A,E,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=x,h.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,h.material.toneMapped=x.encoding!==mn,(u!==x||d!==x.version||f!==t.toneMapping)&&(h.material.needsUpdate=!0,u=x,d=x.version,f=t.toneMapping),h.layers.enableAll(),g.unshift(h,h.geometry,h.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new cl(new wB(2,2),new Ms({name:"BackgroundMaterial",uniforms:sw(Th.background.uniforms),vertexShader:Th.background.vertexShader,fragmentShader:Th.background.fragmentShader,side:zu,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=x.encoding!==mn,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||d!==x.version||f!==t.toneMapping)&&(c.material.needsUpdate=!0,u=x,d=x.version,f=t.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}function m(g,v){g.getRGB(m3,Gxe(t)),i.buffers.color.setClear(m3.r,m3.g,m3.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(g,v=1){a.set(g),l=v,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,m(a,l)},render:p}}function Qxt(t,e,n,i){let r=t.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=g(null),c=l,h=!1;function u(R,H,Z,ee,F){let V=!1;if(o){let U=m(ee,Z,H);c!==U&&(c=U,f(c.object)),V=v(R,ee,Z,F),V&&y(R,ee,Z,F)}else{let U=H.wireframe===!0;(c.geometry!==ee.id||c.program!==Z.id||c.wireframe!==U)&&(c.geometry=ee.id,c.program=Z.id,c.wireframe=U,V=!0)}F!==null&&n.update(F,34963),(V||h)&&(h=!1,M(R,H,Z,ee),F!==null&&t.bindBuffer(34963,n.get(F).buffer))}function d(){return i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function f(R){return i.isWebGL2?t.bindVertexArray(R):s.bindVertexArrayOES(R)}function p(R){return i.isWebGL2?t.deleteVertexArray(R):s.deleteVertexArrayOES(R)}function m(R,H,Z){let ee=Z.wireframe===!0,F=a[R.id];F===void 0&&(F={},a[R.id]=F);let V=F[H.id];V===void 0&&(V={},F[H.id]=V);let U=V[ee];return U===void 0&&(U=g(d()),V[ee]=U),U}function g(R){let H=[],Z=[],ee=[];for(let F=0;F<r;F++)H[F]=0,Z[F]=0,ee[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:Z,attributeDivisors:ee,object:R,attributes:{},index:null}}function v(R,H,Z,ee){let F=c.attributes,V=H.attributes,U=0,j=Z.getAttributes();for(let z in j)if(j[z].location>=0){let Y=F[z],J=V[z];if(J===void 0&&(z==="instanceMatrix"&&R.instanceMatrix&&(J=R.instanceMatrix),z==="instanceColor"&&R.instanceColor&&(J=R.instanceColor)),Y===void 0||Y.attribute!==J||J&&Y.data!==J.data)return!0;U++}return c.attributesNum!==U||c.index!==ee}function y(R,H,Z,ee){let F={},V=H.attributes,U=0,j=Z.getAttributes();for(let z in j)if(j[z].location>=0){let Y=V[z];Y===void 0&&(z==="instanceMatrix"&&R.instanceMatrix&&(Y=R.instanceMatrix),z==="instanceColor"&&R.instanceColor&&(Y=R.instanceColor));let J={};J.attribute=Y,Y&&Y.data&&(J.data=Y.data),F[z]=J,U++}c.attributes=F,c.attributesNum=U,c.index=ee}function x(){let R=c.newAttributes;for(let H=0,Z=R.length;H<Z;H++)R[H]=0}function b(R){S(R,0)}function S(R,H){let Z=c.newAttributes,ee=c.enabledAttributes,F=c.attributeDivisors;Z[R]=1,ee[R]===0&&(t.enableVertexAttribArray(R),ee[R]=1),F[R]!==H&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](R,H),F[R]=H)}function A(){let R=c.newAttributes,H=c.enabledAttributes;for(let Z=0,ee=H.length;Z<ee;Z++)H[Z]!==R[Z]&&(t.disableVertexAttribArray(Z),H[Z]=0)}function E(R,H,Z,ee,F,V){i.isWebGL2===!0&&(Z===5124||Z===5125)?t.vertexAttribIPointer(R,H,Z,F,V):t.vertexAttribPointer(R,H,Z,ee,F,V)}function M(R,H,Z,ee){if(i.isWebGL2===!1&&(R.isInstancedMesh||ee.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();let F=ee.attributes,V=Z.getAttributes(),U=H.defaultAttributeValues;for(let j in V){let z=V[j];if(z.location>=0){let Y=F[j];if(Y===void 0&&(j==="instanceMatrix"&&R.instanceMatrix&&(Y=R.instanceMatrix),j==="instanceColor"&&R.instanceColor&&(Y=R.instanceColor)),Y!==void 0){let J=Y.normalized,K=Y.itemSize,X=n.get(Y);if(X===void 0)continue;let te=X.buffer,re=X.type,se=X.bytesPerElement;if(Y.isInterleavedBufferAttribute){let ce=Y.data,ge=ce.stride,oe=Y.offset;if(ce.isInstancedInterleavedBuffer){for(let ae=0;ae<z.locationSize;ae++)S(z.location+ae,ce.meshPerAttribute);R.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let ae=0;ae<z.locationSize;ae++)b(z.location+ae);t.bindBuffer(34962,te);for(let ae=0;ae<z.locationSize;ae++)E(z.location+ae,K/z.locationSize,re,J,ge*se,(oe+K/z.locationSize*ae)*se)}else{if(Y.isInstancedBufferAttribute){for(let ce=0;ce<z.locationSize;ce++)S(z.location+ce,Y.meshPerAttribute);R.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let ce=0;ce<z.locationSize;ce++)b(z.location+ce);t.bindBuffer(34962,te);for(let ce=0;ce<z.locationSize;ce++)E(z.location+ce,K/z.locationSize,re,J,K*se,K/z.locationSize*ce*se)}}else if(U!==void 0){let J=U[j];if(J!==void 0)switch(J.length){case 2:t.vertexAttrib2fv(z.location,J);break;case 3:t.vertexAttrib3fv(z.location,J);break;case 4:t.vertexAttrib4fv(z.location,J);break;default:t.vertexAttrib1fv(z.location,J)}}}}A()}function C(){L();for(let R in a){let H=a[R];for(let Z in H){let ee=H[Z];for(let F in ee)p(ee[F].object),delete ee[F];delete H[Z]}delete a[R]}}function T(R){if(a[R.id]===void 0)return;let H=a[R.id];for(let Z in H){let ee=H[Z];for(let F in ee)p(ee[F].object),delete ee[F];delete H[Z]}delete a[R.id]}function D(R){for(let H in a){let Z=a[H];if(Z[R.id]===void 0)continue;let ee=Z[R.id];for(let F in ee)p(ee[F].object),delete ee[F];delete Z[R.id]}}function L(){I(),h=!0,c!==l&&(c=l,f(c.object))}function I(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:L,resetDefaultState:I,dispose:C,releaseStatesOfGeometry:T,releaseStatesOfProgram:D,initAttributes:x,enableAttribute:b,disableUnusedAttributes:A}}function ebt(t,e,n,i){let r=i.isWebGL2,s;function o(c){s=c}function a(c,h){t.drawArrays(s,c,h),n.update(h,s,1)}function l(c,h,u){if(u===0)return;let d,f;if(r)d=t,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](s,c,h,u),n.update(h,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function tbt(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){let E=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(E){if(E==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return E==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let o=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext,a=n.precision!==void 0?n.precision:"highp",l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);let c=o||e.has("WEBGL_draw_buffers"),h=n.logarithmicDepthBuffer===!0,u=t.getParameter(34930),d=t.getParameter(35660),f=t.getParameter(3379),p=t.getParameter(34076),m=t.getParameter(34921),g=t.getParameter(36347),v=t.getParameter(36348),y=t.getParameter(36349),x=d>0,b=o||e.has("OES_texture_float"),S=x&&b,A=o?t.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:u,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:b,floatVertexTextures:S,maxSamples:A}}function nbt(t){let e=this,n=null,i=0,r=!1,s=!1,o=new gc,a=new Eo,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d){let f=u.length!==0||d||i!==0||r;return r=d,i=u.length,f},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,d){n=h(u,d,0)},this.setState=function(u,d,f){let p=u.clippingPlanes,m=u.clipIntersection,g=u.clipShadows,v=t.get(u);if(!r||p===null||p.length===0||s&&!g)s?h(null):c();else{let y=s?0:i,x=y*4,b=v.clippingState||null;l.value=b,b=h(p,d,x,f);for(let S=0;S!==x;++S)b[S]=n[S];v.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(u,d,f,p){let m=u!==null?u.length:0,g=null;if(m!==0){if(g=l.value,p!==!0||g===null){let v=f+m*4,y=d.matrixWorldInverse;a.getNormalMatrix(y),(g===null||g.length<v)&&(g=new Float32Array(v));for(let x=0,b=f;x!==m;++x,b+=4)o.copy(u[x]).applyMatrix4(y,a),o.normal.toArray(g,b),g[b+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function ibt(t){let e=new WeakMap;function n(o,a){return a===RH?o.mapping=Cv:a===IH&&(o.mapping=Tv),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){let a=o.mapping;if(a===RH||a===IH)if(e.has(o)){let l=e.get(o).texture;return n(l,o.mapping)}else{let l=o.image;if(l&&l.height>0){let c=new gyt(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}else return null}}return o}function r(o){let a=o.target;a.removeEventListener("dispose",r);let l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}var PL=class extends Yw{constructor(t=-1,e=1,n=1,i=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,s=n+t,o=i+e,a=i-e;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,s=r+l*this.view.width,o-=c*this.view.offsetY,a=o-c*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},Dx=4,fse=[.125,.215,.35,.446,.526,.582],b0=20,w5=new PL,pse=new Zt,_5=null,l0=(1+Math.sqrt(5))/2,v1=1/l0,mse=[new G(1,1,1),new G(-1,1,1),new G(1,1,-1),new G(-1,1,-1),new G(0,l0,v1),new G(0,l0,-v1),new G(v1,0,l0),new G(-v1,0,l0),new G(l0,v1,0),new G(-l0,v1,0)],gse=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){_5=this._renderer.getRenderTarget(),this._setSize(256);let r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=xse(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=yse(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(_5),t.scissorTest=!1,g3(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Cv||t.mapping===Tv?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),_5=this._renderer.getRenderTarget();let n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:oi,minFilter:oi,generateMipmaps:!1,type:R2,format:gu,encoding:id,depthBuffer:!1},i=vse(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=vse(t,e,n);let{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=rbt(r)),this._blurMaterial=sbt(r,t,e)}return i}_compileMaterial(t){let e=new cl(this._lodPlanes[0],t);this._renderer.compile(e,w5)}_sceneToCubeUV(t,e,n,i){let r=new So(90,1,e,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(pse),a.toneMapping=Tf,a.autoClear=!1;let h=new JE({name:"PMREM.Background",side:Us,depthWrite:!1,depthTest:!1}),u=new cl(new rd,h),d=!1,f=t.background;f?f.isColor&&(h.color.copy(f),t.background=null,d=!0):(h.color.copy(pse),d=!0);for(let p=0;p<6;p++){let m=p%3;m===0?(r.up.set(0,s[p],0),r.lookAt(o[p],0,0)):m===1?(r.up.set(0,0,s[p]),r.lookAt(0,o[p],0)):(r.up.set(0,s[p],0),r.lookAt(0,0,o[p]));let g=this._cubeSize;g3(i,m*g,p>2?g:0,g,g),a.setRenderTarget(i),d&&a.render(u,r),a.render(t,r)}u.geometry.dispose(),u.material.dispose(),a.toneMapping=c,a.autoClear=l,t.background=f}_textureToCubeUV(t,e){let n=this._renderer,i=t.mapping===Cv||t.mapping===Tv;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=xse()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=yse());let r=i?this._cubemapMaterial:this._equirectMaterial,s=new cl(this._lodPlanes[0],r),o=r.uniforms;o.envMap.value=t;let a=this._cubeSize;g3(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(s,w5)}_applyPMREM(t){let e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){let r=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=mse[(i-1)%mse.length];this._blur(t,i-1,i,r,s)}e.autoClear=n}_blur(t,e,n,i,r){let s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,i,"latitudinal",r),this._halfBlur(s,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,s,o){let a=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let c=3,h=new cl(this._lodPlanes[i],l),u=l.uniforms,d=this._sizeLods[n]-1,f=isFinite(r)?Math.PI/(2*d):2*Math.PI/(2*b0-1),p=r/f,m=isFinite(r)?1+Math.floor(c*p):b0;m>b0&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${b0}`);let g=[],v=0;for(let A=0;A<b0;++A){let E=A/p,M=Math.exp(-E*E/2);g.push(M),A===0?v+=M:A<m&&(v+=2*M)}for(let A=0;A<g.length;A++)g[A]=g[A]/v;u.envMap.value=t.texture,u.samples.value=m,u.weights.value=g,u.latitudinal.value=s==="latitudinal",o&&(u.poleAxis.value=o);let{_lodMax:y}=this;u.dTheta.value=f,u.mipInt.value=y-n;let x=this._sizeLods[i],b=3*x*(i>y-Dx?i-y+Dx:0),S=4*(this._cubeSize-x);g3(e,b,S,3*x,2*x),a.setRenderTarget(e),a.render(h,w5)}};function rbt(t){let e=[],n=[],i=[],r=t,s=t-Dx+1+fse.length;for(let o=0;o<s;o++){let a=Math.pow(2,r);n.push(a);let l=1/a;o>t-Dx?l=fse[o-t+Dx-1]:o===0&&(l=0),i.push(l);let c=1/(a-2),h=-c,u=1+c,d=[h,h,u,h,u,u,h,h,u,u,h,u],f=6,p=6,m=3,g=2,v=1,y=new Float32Array(m*p*f),x=new Float32Array(g*p*f),b=new Float32Array(v*p*f);for(let A=0;A<f;A++){let E=A%3*2/3-1,M=A>2?0:-1,C=[E,M,0,E+2/3,M,0,E+2/3,M+1,0,E,M,0,E+2/3,M+1,0,E,M+1,0];y.set(C,m*p*A),x.set(d,g*p*A);let T=[A,A,A,A,A,A];b.set(T,v*p*A)}let S=new Qt;S.setAttribute("position",new on(y,m)),S.setAttribute("uv",new on(x,g)),S.setAttribute("faceIndex",new on(b,v)),e.push(S),r>Dx&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function vse(t,e,n){let i=new _s(t,e,n);return i.texture.mapping=YE,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function g3(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function sbt(t,e,n){let i=new Float32Array(b0),r=new G(0,1,0);return new Ms({name:"SphericalGaussianBlur",defines:{n:b0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:_$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:io,depthTest:!1,depthWrite:!1})}function yse(){return new Ms({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:io,depthTest:!1,depthWrite:!1})}function xse(){return new Ms({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:io,depthTest:!1,depthWrite:!1})}function _$(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function obt(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){let l=a.mapping,c=l===RH||l===IH,h=l===Cv||l===Tv;if(c||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=e.get(a);return n===null&&(n=new gse(t)),u=c?n.fromEquirectangular(a,u):n.fromCubemap(a,u),e.set(a,u),u.texture}else{if(e.has(a))return e.get(a).texture;{let u=a.image;if(c&&u&&u.height>0||h&&u&&r(u)){n===null&&(n=new gse(t));let d=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function r(a){let l=0,c=6;for(let h=0;h<c;h++)a[h]!==void 0&&l++;return l===c}function s(a){let l=a.target;l.removeEventListener("dispose",s);let c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function abt(t){let e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){let r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function lbt(t,e,n,i){let r={},s=new WeakMap;function o(u){let d=u.target;d.index!==null&&e.remove(d.index);for(let p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",o),delete r[d.id];let f=s.get(d);f&&(e.remove(f),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,n.memory.geometries--}function a(u,d){return r[d.id]===!0||(d.addEventListener("dispose",o),r[d.id]=!0,n.memory.geometries++),d}function l(u){let d=u.attributes;for(let p in d)e.update(d[p],34962);let f=u.morphAttributes;for(let p in f){let m=f[p];for(let g=0,v=m.length;g<v;g++)e.update(m[g],34962)}}function c(u){let d=[],f=u.index,p=u.attributes.position,m=0;if(f!==null){let y=f.array;m=f.version;for(let x=0,b=y.length;x<b;x+=3){let S=y[x+0],A=y[x+1],E=y[x+2];d.push(S,A,A,E,E,S)}}else{let y=p.array;m=p.version;for(let x=0,b=y.length/3-1;x<b;x+=3){let S=x+0,A=x+1,E=x+2;d.push(S,A,A,E,E,S)}}let g=new(Bxe(d)?pM:Uxe)(d,1);g.version=m;let v=s.get(u);v&&e.remove(v),s.set(u,g)}function h(u){let d=s.get(u);if(d){let f=u.index;f!==null&&d.version<f.version&&c(u)}else c(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:h}}function cbt(t,e,n,i){let r=i.isWebGL2,s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function h(d,f){t.drawElements(s,f,a,d*l),n.update(f,s,1)}function u(d,f,p){if(p===0)return;let m,g;if(r)m=t,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,f,a,d*l,p),n.update(f,s,p)}this.setMode=o,this.setIndex=c,this.render=h,this.renderInstances=u}function ubt(t){let e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(s/3);break;case 1:n.lines+=a*(s/2);break;case 3:n.lines+=a*(s-1);break;case 2:n.lines+=a*s;break;case 0:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function hbt(t,e){return t[0]-e[0]}function dbt(t,e){return Math.abs(e[1])-Math.abs(t[1])}function fbt(t,e,n){let i={},r=new Float32Array(8),s=new WeakMap,o=new Sn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,h,u,d){let f=c.morphTargetInfluences;if(e.isWebGL2===!0){let p=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,m=p!==void 0?p.length:0,g=s.get(h);if(g===void 0||g.count!==m){let x=function(){R.dispose(),s.delete(h),h.removeEventListener("dispose",x)};g!==void 0&&g.texture.dispose();let b=h.morphAttributes.position!==void 0,S=h.morphAttributes.normal!==void 0,A=h.morphAttributes.color!==void 0,E=h.morphAttributes.position||[],M=h.morphAttributes.normal||[],C=h.morphAttributes.color||[],T=0;b===!0&&(T=1),S===!0&&(T=2),A===!0&&(T=3);let D=h.attributes.position.count*T,L=1;D>e.maxTextureSize&&(L=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);let I=new Float32Array(D*L*4*m),R=new zxe(I,D,L,m);R.type=hm,R.needsUpdate=!0;let H=T*4;for(let Z=0;Z<m;Z++){let ee=E[Z],F=M[Z],V=C[Z],U=D*L*4*Z;for(let j=0;j<ee.count;j++){let z=j*H;b===!0&&(o.fromBufferAttribute(ee,j),I[U+z+0]=o.x,I[U+z+1]=o.y,I[U+z+2]=o.z,I[U+z+3]=0),S===!0&&(o.fromBufferAttribute(F,j),I[U+z+4]=o.x,I[U+z+5]=o.y,I[U+z+6]=o.z,I[U+z+7]=0),A===!0&&(o.fromBufferAttribute(V,j),I[U+z+8]=o.x,I[U+z+9]=o.y,I[U+z+10]=o.z,I[U+z+11]=V.itemSize===4?o.w:1)}}g={count:m,texture:R,size:new Ae(D,L)},s.set(h,g),h.addEventListener("dispose",x)}let v=0;for(let x=0;x<f.length;x++)v+=f[x];let y=h.morphTargetsRelative?1:1-v;d.getUniforms().setValue(t,"morphTargetBaseInfluence",y),d.getUniforms().setValue(t,"morphTargetInfluences",f),d.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),d.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}else{let p=f===void 0?0:f.length,m=i[h.id];if(m===void 0||m.length!==p){m=[];for(let b=0;b<p;b++)m[b]=[b,0];i[h.id]=m}for(let b=0;b<p;b++){let S=m[b];S[0]=b,S[1]=f[b]}m.sort(dbt);for(let b=0;b<8;b++)b<p&&m[b][1]?(a[b][0]=m[b][0],a[b][1]=m[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(hbt);let g=h.morphAttributes.position,v=h.morphAttributes.normal,y=0;for(let b=0;b<8;b++){let S=a[b],A=S[0],E=S[1];A!==Number.MAX_SAFE_INTEGER&&E?(g&&h.getAttribute("morphTarget"+b)!==g[A]&&h.setAttribute("morphTarget"+b,g[A]),v&&h.getAttribute("morphNormal"+b)!==v[A]&&h.setAttribute("morphNormal"+b,v[A]),r[b]=E,y+=E):(g&&h.hasAttribute("morphTarget"+b)===!0&&h.deleteAttribute("morphTarget"+b),v&&h.hasAttribute("morphNormal"+b)===!0&&h.deleteAttribute("morphNormal"+b),r[b]=0)}let x=h.morphTargetsRelative?1:1-y;d.getUniforms().setValue(t,"morphTargetBaseInfluence",x),d.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:l}}function pbt(t,e,n,i){let r=new WeakMap;function s(l){let c=i.render.frame,h=l.geometry,u=e.get(l,h);return r.get(u)!==c&&(e.update(u),r.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),u}function o(){r=new WeakMap}function a(l){let c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}var jxe=new Hs,Vxe=new zxe,Wxe=new eyt,$xe=new b$,bse=[],wse=[],_se=new Float32Array(16),Sse=new Float32Array(9),Ase=new Float32Array(4);function Kw(t,e,n){let i=t[0];if(i<=0||i>0)return t;let r=e*n,s=bse[r];if(s===void 0&&(s=new Float32Array(r),bse[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Es(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Cs(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function _B(t,e){let n=wse[e];n===void 0&&(n=new Int32Array(e),wse[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function mbt(t,e){let n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function gbt(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Es(n,e))return;t.uniform2fv(this.addr,e),Cs(n,e)}}function vbt(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Es(n,e))return;t.uniform3fv(this.addr,e),Cs(n,e)}}function ybt(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Es(n,e))return;t.uniform4fv(this.addr,e),Cs(n,e)}}function xbt(t,e){let n=this.cache,i=e.elements;if(i===void 0){if(Es(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Cs(n,e)}else{if(Es(n,i))return;Ase.set(i),t.uniformMatrix2fv(this.addr,!1,Ase),Cs(n,i)}}function bbt(t,e){let n=this.cache,i=e.elements;if(i===void 0){if(Es(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Cs(n,e)}else{if(Es(n,i))return;Sse.set(i),t.uniformMatrix3fv(this.addr,!1,Sse),Cs(n,i)}}function wbt(t,e){let n=this.cache,i=e.elements;if(i===void 0){if(Es(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Cs(n,e)}else{if(Es(n,i))return;_se.set(i),t.uniformMatrix4fv(this.addr,!1,_se),Cs(n,i)}}function _bt(t,e){let n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Sbt(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Es(n,e))return;t.uniform2iv(this.addr,e),Cs(n,e)}}function Abt(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Es(n,e))return;t.uniform3iv(this.addr,e),Cs(n,e)}}function Mbt(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Es(n,e))return;t.uniform4iv(this.addr,e),Cs(n,e)}}function Ebt(t,e){let n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Cbt(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Es(n,e))return;t.uniform2uiv(this.addr,e),Cs(n,e)}}function Tbt(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Es(n,e))return;t.uniform3uiv(this.addr,e),Cs(n,e)}}function Pbt(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Es(n,e))return;t.uniform4uiv(this.addr,e),Cs(n,e)}}function Dbt(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||jxe,r)}function Obt(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Wxe,r)}function Lbt(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||$xe,r)}function Rbt(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Vxe,r)}function Ibt(t){switch(t){case 5126:return mbt;case 35664:return gbt;case 35665:return vbt;case 35666:return ybt;case 35674:return xbt;case 35675:return bbt;case 35676:return wbt;case 5124:case 35670:return _bt;case 35667:case 35671:return Sbt;case 35668:case 35672:return Abt;case 35669:case 35673:return Mbt;case 5125:return Ebt;case 36294:return Cbt;case 36295:return Tbt;case 36296:return Pbt;case 35678:case 36198:case 36298:case 36306:case 35682:return Dbt;case 35679:case 36299:case 36307:return Obt;case 35680:case 36300:case 36308:case 36293:return Lbt;case 36289:case 36303:case 36311:case 36292:return Rbt}}function Bbt(t,e){t.uniform1fv(this.addr,e)}function kbt(t,e){let n=Kw(e,this.size,2);t.uniform2fv(this.addr,n)}function Fbt(t,e){let n=Kw(e,this.size,3);t.uniform3fv(this.addr,n)}function Nbt(t,e){let n=Kw(e,this.size,4);t.uniform4fv(this.addr,n)}function zbt(t,e){let n=Kw(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Ubt(t,e){let n=Kw(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Gbt(t,e){let n=Kw(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Hbt(t,e){t.uniform1iv(this.addr,e)}function jbt(t,e){t.uniform2iv(this.addr,e)}function Vbt(t,e){t.uniform3iv(this.addr,e)}function Wbt(t,e){t.uniform4iv(this.addr,e)}function $bt(t,e){t.uniform1uiv(this.addr,e)}function qbt(t,e){t.uniform2uiv(this.addr,e)}function Xbt(t,e){t.uniform3uiv(this.addr,e)}function Ybt(t,e){t.uniform4uiv(this.addr,e)}function Kbt(t,e,n){let i=this.cache,r=e.length,s=_B(n,r);Es(i,s)||(t.uniform1iv(this.addr,s),Cs(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||jxe,s[o])}function Jbt(t,e,n){let i=this.cache,r=e.length,s=_B(n,r);Es(i,s)||(t.uniform1iv(this.addr,s),Cs(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||Wxe,s[o])}function Zbt(t,e,n){let i=this.cache,r=e.length,s=_B(n,r);Es(i,s)||(t.uniform1iv(this.addr,s),Cs(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||$xe,s[o])}function Qbt(t,e,n){let i=this.cache,r=e.length,s=_B(n,r);Es(i,s)||(t.uniform1iv(this.addr,s),Cs(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||Vxe,s[o])}function ewt(t){switch(t){case 5126:return Bbt;case 35664:return kbt;case 35665:return Fbt;case 35666:return Nbt;case 35674:return zbt;case 35675:return Ubt;case 35676:return Gbt;case 5124:case 35670:return Hbt;case 35667:case 35671:return jbt;case 35668:case 35672:return Vbt;case 35669:case 35673:return Wbt;case 5125:return $bt;case 36294:return qbt;case 36295:return Xbt;case 36296:return Ybt;case 35678:case 36198:case 36298:case 36306:case 35682:return Kbt;case 35679:case 36299:case 36307:return Jbt;case 35680:case 36300:case 36308:case 36293:return Zbt;case 36289:case 36303:case 36311:case 36292:return Qbt}}var twt=class{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=Ibt(e.type)}},nwt=class{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=ewt(e.type)}},iwt=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){let i=this.seq;for(let r=0,s=i.length;r!==s;++r){let o=i[r];o.setValue(t,e[o.id],n)}}},S5=/(\w+)(\])?(\[|\.)?/g;function Mse(t,e){t.seq.push(e),t.map[e.id]=e}function rwt(t,e,n){let i=t.name,r=i.length;for(S5.lastIndex=0;;){let s=S5.exec(i),o=S5.lastIndex,a=s[1],l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){Mse(n,c===void 0?new twt(a,t,e):new nwt(a,t,e));break}else{let h=n.map[a];h===void 0&&(h=new iwt(a),Mse(n,h)),n=h}}}var jD=class{constructor(t,e){this.seq=[],this.map={};let n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){let r=t.getActiveUniform(e,i),s=t.getUniformLocation(e,r.name);rwt(r,s,this)}}setValue(t,e,n,i){let r=this.map[e];r!==void 0&&r.setValue(t,n,i)}setOptional(t,e,n){let i=e[n];i!==void 0&&this.setValue(t,n,i)}static upload(t,e,n,i){for(let r=0,s=e.length;r!==s;++r){let o=e[r],a=n[o.id];a.needsUpdate!==!1&&o.setValue(t,a.value,i)}}static seqWithValue(t,e){let n=[];for(let i=0,r=t.length;i!==r;++i){let s=t[i];s.id in e&&n.push(s)}return n}};function Ese(t,e,n){let i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}var swt=0;function owt(t,e){let n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){let a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function awt(t){switch(t){case id:return["Linear","( value )"];case mn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Cse(t,e,n){let i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";let s=/ERROR: 0:(\d+)/.exec(r);if(s){let o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+owt(t.getShaderSource(e),o)}else return r}function lwt(t,e){let n=awt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function cwt(t,e){let n;switch(e){case pvt:n="Linear";break;case mvt:n="Reinhard";break;case gvt:n="OptimizedCineon";break;case vvt:n="ACESFilmic";break;case yvt:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function uwt(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(EA).join(`
`)}function hwt(t){let e=[];for(let n in t){let i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function dwt(t,e){let n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){let s=t.getActiveAttrib(e,r),o=s.name,a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function EA(t){return t!==""}function Tse(t,e){let n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Pse(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var fwt=/^[ \t]*#include +<([\w\d./]+)>/gm;function zH(t){return t.replace(fwt,pwt)}function pwt(t,e){let n=pn[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return zH(n)}var mwt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Dse(t){return t.replace(mwt,gwt)}function gwt(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Ose(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function vwt(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===v$?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Txe?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===MA&&(e="SHADOWMAP_TYPE_VSM"),e}function ywt(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Cv:case Tv:e="ENVMAP_TYPE_CUBE";break;case YE:e="ENVMAP_TYPE_CUBE_UV";break}return e}function xwt(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Tv:e="ENVMAP_MODE_REFRACTION";break}return e}function bwt(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Oxe:e="ENVMAP_BLENDING_MULTIPLY";break;case dvt:e="ENVMAP_BLENDING_MIX";break;case fvt:e="ENVMAP_BLENDING_ADD";break}return e}function wwt(t){let e=t.envMapCubeUVHeight;if(e===null)return null;let n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function _wt(t,e,n,i){let r=t.getContext(),s=n.defines,o=n.vertexShader,a=n.fragmentShader,l=vwt(n),c=ywt(n),h=xwt(n),u=bwt(n),d=wwt(n),f=n.isWebGL2?"":uwt(n),p=hwt(s),m=r.createProgram(),g,v,y=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=[p].filter(EA).join(`
`),g.length>0&&(g+=`
`),v=[f,p].filter(EA).join(`
`),v.length>0&&(v+=`
`)):(g=[Ose(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(EA).join(`
`),v=[f,Ose(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Tf?"#define TONE_MAPPING":"",n.toneMapping!==Tf?pn.tonemapping_pars_fragment:"",n.toneMapping!==Tf?cwt("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",pn.encodings_pars_fragment,lwt("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(EA).join(`
`)),o=zH(o),o=Tse(o,n),o=Pse(o,n),a=zH(a),a=Tse(a,n),a=Pse(a,n),o=Dse(o),a=Dse(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",n.glslVersion===tse?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===tse?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);let x=y+g+o,b=y+v+a,S=Ese(r,35633,x),A=Ese(r,35632,b);if(r.attachShader(m,S),r.attachShader(m,A),n.index0AttributeName!==void 0?r.bindAttribLocation(m,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),t.debug.checkShaderErrors){let C=r.getProgramInfoLog(m).trim(),T=r.getShaderInfoLog(S).trim(),D=r.getShaderInfoLog(A).trim(),L=!0,I=!0;if(r.getProgramParameter(m,35714)===!1){L=!1;let R=Cse(r,S,"vertex"),H=Cse(r,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+`

Program Info Log: `+C+`
`+R+`
`+H)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(T===""||D==="")&&(I=!1);I&&(this.diagnostics={runnable:L,programLog:C,vertexShader:{log:T,prefix:g},fragmentShader:{log:D,prefix:v}})}r.deleteShader(S),r.deleteShader(A);let E;this.getUniforms=function(){return E===void 0&&(E=new jD(r,m)),E};let M;return this.getAttributes=function(){return M===void 0&&(M=dwt(r,m)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=swt++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=S,this.fragmentShader=A,this}var Swt=0,Awt=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(r)===!1&&(s.add(r),r.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){let e=this.shaderCache,n=e.get(t);return n===void 0&&(n=new Mwt(t),e.set(t,n)),n}},Mwt=class{constructor(t){this.id=Swt++,this.code=t,this.usedTimes=0}};function Ewt(t,e,n,i,r,s,o){let a=new x$,l=new Awt,c=[],h=r.isWebGL2,u=r.logarithmicDepthBuffer,d=r.vertexTextures,f=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(M,C,T,D,L){let I=D.fog,R=L.geometry,H=M.isMeshStandardMaterial?D.environment:null,Z=(M.isMeshStandardMaterial?n:e).get(M.envMap||H),ee=Z&&Z.mapping===YE?Z.image.height:null,F=p[M.type];M.precision!==null&&(f=r.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));let V=R.morphAttributes.position||R.morphAttributes.normal||R.morphAttributes.color,U=V!==void 0?V.length:0,j=0;R.morphAttributes.position!==void 0&&(j=1),R.morphAttributes.normal!==void 0&&(j=2),R.morphAttributes.color!==void 0&&(j=3);let z,Y,J,K;if(F){let ce=Th[F];z=ce.vertexShader,Y=ce.fragmentShader}else z=M.vertexShader,Y=M.fragmentShader,l.update(M),J=l.getVertexShaderID(M),K=l.getFragmentShaderID(M);let X=t.getRenderTarget(),te=M.alphaTest>0,re=M.clearcoat>0,se=M.iridescence>0;return{isWebGL2:h,shaderID:F,shaderName:M.type,vertexShader:z,fragmentShader:Y,defines:M.defines,customVertexShaderID:J,customFragmentShaderID:K,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:f,instancing:L.isInstancedMesh===!0,instancingColor:L.isInstancedMesh===!0&&L.instanceColor!==null,supportsVertexTextures:d,outputEncoding:X===null?t.outputEncoding:X.isXRRenderTarget===!0?X.texture.encoding:id,map:!!M.map,matcap:!!M.matcap,envMap:!!Z,envMapMode:Z&&Z.mapping,envMapCubeUVHeight:ee,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:M.normalMapType===kvt,tangentSpaceNormalMap:M.normalMapType===Bvt,decodeVideoTexture:!!M.map&&M.map.isVideoTexture===!0&&M.map.encoding===mn,clearcoat:re,clearcoatMap:re&&!!M.clearcoatMap,clearcoatRoughnessMap:re&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:re&&!!M.clearcoatNormalMap,iridescence:se,iridescenceMap:se&&!!M.iridescenceMap,iridescenceThicknessMap:se&&!!M.iridescenceThicknessMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:M.transparent===!1&&M.blending===cb,alphaMap:!!M.alphaMap,alphaTest:te,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!R.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!R.attributes.color&&R.attributes.color.itemSize===4,vertexUvs:!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatMap||!!M.clearcoatRoughnessMap||!!M.clearcoatNormalMap||!!M.iridescenceMap||!!M.iridescenceThicknessMap||!!M.displacementMap||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularColorMap||!!M.sheenColorMap||!!M.sheenRoughnessMap,uvsVertexOnly:!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatNormalMap||M.iridescenceMap||M.iridescenceThicknessMap||M.transmission>0||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheen>0||M.sheenColorMap||M.sheenRoughnessMap)&&!!M.displacementMap,fog:!!I,useFog:M.fog===!0,fogExp2:I&&I.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:u,skinning:L.isSkinnedMesh===!0,morphTargets:R.morphAttributes.position!==void 0,morphNormals:R.morphAttributes.normal!==void 0,morphColors:R.morphAttributes.color!==void 0,morphTargetsCount:U,morphTextureStride:j,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:t.shadowMap.enabled&&T.length>0,shadowMapType:t.shadowMap.type,toneMapping:M.toneMapped?t.toneMapping:Tf,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===ll,flipSided:M.side===Us,useDepthPacking:!!M.depthPacking,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function g(M){let C=[];if(M.shaderID?C.push(M.shaderID):(C.push(M.customVertexShaderID),C.push(M.customFragmentShaderID)),M.defines!==void 0)for(let T in M.defines)C.push(T),C.push(M.defines[T]);return M.isRawShaderMaterial===!1&&(v(C,M),y(C,M),C.push(t.outputEncoding)),C.push(M.customProgramCacheKey),C.join()}function v(M,C){M.push(C.precision),M.push(C.outputEncoding),M.push(C.envMapMode),M.push(C.envMapCubeUVHeight),M.push(C.combine),M.push(C.vertexUvs),M.push(C.fogExp2),M.push(C.sizeAttenuation),M.push(C.morphTargetsCount),M.push(C.morphAttributeCount),M.push(C.numDirLights),M.push(C.numPointLights),M.push(C.numSpotLights),M.push(C.numSpotLightMaps),M.push(C.numHemiLights),M.push(C.numRectAreaLights),M.push(C.numDirLightShadows),M.push(C.numPointLightShadows),M.push(C.numSpotLightShadows),M.push(C.numSpotLightShadowsWithMaps),M.push(C.shadowMapType),M.push(C.toneMapping),M.push(C.numClippingPlanes),M.push(C.numClipIntersection),M.push(C.depthPacking)}function y(M,C){a.disableAll(),C.isWebGL2&&a.enable(0),C.supportsVertexTextures&&a.enable(1),C.instancing&&a.enable(2),C.instancingColor&&a.enable(3),C.map&&a.enable(4),C.matcap&&a.enable(5),C.envMap&&a.enable(6),C.lightMap&&a.enable(7),C.aoMap&&a.enable(8),C.emissiveMap&&a.enable(9),C.bumpMap&&a.enable(10),C.normalMap&&a.enable(11),C.objectSpaceNormalMap&&a.enable(12),C.tangentSpaceNormalMap&&a.enable(13),C.clearcoat&&a.enable(14),C.clearcoatMap&&a.enable(15),C.clearcoatRoughnessMap&&a.enable(16),C.clearcoatNormalMap&&a.enable(17),C.iridescence&&a.enable(18),C.iridescenceMap&&a.enable(19),C.iridescenceThicknessMap&&a.enable(20),C.displacementMap&&a.enable(21),C.specularMap&&a.enable(22),C.roughnessMap&&a.enable(23),C.metalnessMap&&a.enable(24),C.gradientMap&&a.enable(25),C.alphaMap&&a.enable(26),C.alphaTest&&a.enable(27),C.vertexColors&&a.enable(28),C.vertexAlphas&&a.enable(29),C.vertexUvs&&a.enable(30),C.vertexTangents&&a.enable(31),C.uvsVertexOnly&&a.enable(32),M.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.skinning&&a.enable(4),C.morphTargets&&a.enable(5),C.morphNormals&&a.enable(6),C.morphColors&&a.enable(7),C.premultipliedAlpha&&a.enable(8),C.shadowMapEnabled&&a.enable(9),C.physicallyCorrectLights&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.specularIntensityMap&&a.enable(15),C.specularColorMap&&a.enable(16),C.transmission&&a.enable(17),C.transmissionMap&&a.enable(18),C.thicknessMap&&a.enable(19),C.sheen&&a.enable(20),C.sheenColorMap&&a.enable(21),C.sheenRoughnessMap&&a.enable(22),C.decodeVideoTexture&&a.enable(23),C.opaque&&a.enable(24),M.push(a.mask)}function x(M){let C=p[M.type],T;if(C){let D=Th[C];T=Xw.clone(D.uniforms)}else T=M.uniforms;return T}function b(M,C){let T;for(let D=0,L=c.length;D<L;D++){let I=c[D];if(I.cacheKey===C){T=I,++T.usedTimes;break}}return T===void 0&&(T=new _wt(t,C,M,s),c.push(T)),T}function S(M){if(--M.usedTimes===0){let C=c.indexOf(M);c[C]=c[c.length-1],c.pop(),M.destroy()}}function A(M){l.remove(M)}function E(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:x,acquireProgram:b,releaseProgram:S,releaseShaderCache:A,programs:c,dispose:E}}function Cwt(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,a){t.get(s)[o]=a}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function Twt(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Lse(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Rse(){let t=[],e=0,n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(u,d,f,p,m,g){let v=t[e];return v===void 0?(v={id:u.id,object:u,geometry:d,material:f,groupOrder:p,renderOrder:u.renderOrder,z:m,group:g},t[e]=v):(v.id=u.id,v.object=u,v.geometry=d,v.material=f,v.groupOrder=p,v.renderOrder=u.renderOrder,v.z=m,v.group=g),e++,v}function a(u,d,f,p,m,g){let v=o(u,d,f,p,m,g);f.transmission>0?i.push(v):f.transparent===!0?r.push(v):n.push(v)}function l(u,d,f,p,m,g){let v=o(u,d,f,p,m,g);f.transmission>0?i.unshift(v):f.transparent===!0?r.unshift(v):n.unshift(v)}function c(u,d){n.length>1&&n.sort(u||Twt),i.length>1&&i.sort(d||Lse),r.length>1&&r.sort(d||Lse)}function h(){for(let u=e,d=t.length;u<d;u++){let f=t[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:c}}function Pwt(){let t=new WeakMap;function e(i,r){let s=t.get(i),o;return s===void 0?(o=new Rse,t.set(i,[o])):r>=s.length?(o=new Rse,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function Dwt(){let t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new G,color:new Zt};break;case"SpotLight":n={position:new G,direction:new G,color:new Zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new G,color:new Zt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new G,skyColor:new Zt,groundColor:new Zt};break;case"RectAreaLight":n={color:new Zt,position:new G,halfWidth:new G,halfHeight:new G};break}return t[e.id]=n,n}}}function Owt(){let t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}var Lwt=0;function Rwt(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Iwt(t,e){let n=new Dwt,i=Owt(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)r.probe.push(new G);let s=new G,o=new dt,a=new dt;function l(h,u){let d=0,f=0,p=0;for(let D=0;D<9;D++)r.probe[D].set(0,0,0);let m=0,g=0,v=0,y=0,x=0,b=0,S=0,A=0,E=0,M=0;h.sort(Rwt);let C=u!==!0?Math.PI:1;for(let D=0,L=h.length;D<L;D++){let I=h[D],R=I.color,H=I.intensity,Z=I.distance,ee=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)d+=R.r*H*C,f+=R.g*H*C,p+=R.b*H*C;else if(I.isLightProbe)for(let F=0;F<9;F++)r.probe[F].addScaledVector(I.sh.coefficients[F],H);else if(I.isDirectionalLight){let F=n.get(I);if(F.color.copy(I.color).multiplyScalar(I.intensity*C),I.castShadow){let V=I.shadow,U=i.get(I);U.shadowBias=V.bias,U.shadowNormalBias=V.normalBias,U.shadowRadius=V.radius,U.shadowMapSize=V.mapSize,r.directionalShadow[m]=U,r.directionalShadowMap[m]=ee,r.directionalShadowMatrix[m]=I.shadow.matrix,b++}r.directional[m]=F,m++}else if(I.isSpotLight){let F=n.get(I);F.position.setFromMatrixPosition(I.matrixWorld),F.color.copy(R).multiplyScalar(H*C),F.distance=Z,F.coneCos=Math.cos(I.angle),F.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),F.decay=I.decay,r.spot[v]=F;let V=I.shadow;if(I.map&&(r.spotLightMap[E]=I.map,E++,V.updateMatrices(I),I.castShadow&&M++),r.spotLightMatrix[v]=V.matrix,I.castShadow){let U=i.get(I);U.shadowBias=V.bias,U.shadowNormalBias=V.normalBias,U.shadowRadius=V.radius,U.shadowMapSize=V.mapSize,r.spotShadow[v]=U,r.spotShadowMap[v]=ee,A++}v++}else if(I.isRectAreaLight){let F=n.get(I);F.color.copy(R).multiplyScalar(H),F.halfWidth.set(I.width*.5,0,0),F.halfHeight.set(0,I.height*.5,0),r.rectArea[y]=F,y++}else if(I.isPointLight){let F=n.get(I);if(F.color.copy(I.color).multiplyScalar(I.intensity*C),F.distance=I.distance,F.decay=I.decay,I.castShadow){let V=I.shadow,U=i.get(I);U.shadowBias=V.bias,U.shadowNormalBias=V.normalBias,U.shadowRadius=V.radius,U.shadowMapSize=V.mapSize,U.shadowCameraNear=V.camera.near,U.shadowCameraFar=V.camera.far,r.pointShadow[g]=U,r.pointShadowMap[g]=ee,r.pointShadowMatrix[g]=I.shadow.matrix,S++}r.point[g]=F,g++}else if(I.isHemisphereLight){let F=n.get(I);F.skyColor.copy(I.color).multiplyScalar(H*C),F.groundColor.copy(I.groundColor).multiplyScalar(H*C),r.hemi[x]=F,x++}}y>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ut.LTC_FLOAT_1,r.rectAreaLTC2=ut.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=ut.LTC_HALF_1,r.rectAreaLTC2=ut.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=f,r.ambient[2]=p;let T=r.hash;(T.directionalLength!==m||T.pointLength!==g||T.spotLength!==v||T.rectAreaLength!==y||T.hemiLength!==x||T.numDirectionalShadows!==b||T.numPointShadows!==S||T.numSpotShadows!==A||T.numSpotMaps!==E)&&(r.directional.length=m,r.spot.length=v,r.rectArea.length=y,r.point.length=g,r.hemi.length=x,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=A+E-M,r.spotLightMap.length=E,r.numSpotLightShadowsWithMaps=M,T.directionalLength=m,T.pointLength=g,T.spotLength=v,T.rectAreaLength=y,T.hemiLength=x,T.numDirectionalShadows=b,T.numPointShadows=S,T.numSpotShadows=A,T.numSpotMaps=E,r.version=Lwt++)}function c(h,u){let d=0,f=0,p=0,m=0,g=0,v=u.matrixWorldInverse;for(let y=0,x=h.length;y<x;y++){let b=h[y];if(b.isDirectionalLight){let S=r.directional[d];S.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(v),d++}else if(b.isSpotLight){let S=r.spot[p];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),S.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(v),p++}else if(b.isRectAreaLight){let S=r.rectArea[m];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),a.identity(),o.copy(b.matrixWorld),o.premultiply(v),a.extractRotation(o),S.halfWidth.set(b.width*.5,0,0),S.halfHeight.set(0,b.height*.5,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),m++}else if(b.isPointLight){let S=r.point[f];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),f++}else if(b.isHemisphereLight){let S=r.hemi[g];S.direction.setFromMatrixPosition(b.matrixWorld),S.direction.transformDirection(v),g++}}}return{setup:l,setupView:c,state:r}}function Ise(t,e){let n=new Iwt(t,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function l(h){n.setup(i,h)}function c(h){n.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function Bwt(t,e){let n=new WeakMap;function i(s,o=0){let a=n.get(s),l;return a===void 0?(l=new Ise(t,e),n.set(s,[l])):o>=a.length?(l=new Ise(t,e),a.push(l)):l=a[o],l}function r(){n=new WeakMap}return{get:i,dispose:r}}var qxe=class extends KE{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=np,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},kwt=class extends KE{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new G,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}},Fwt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Nwt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function zwt(t,e,n){let i=new w$,r=new Ae,s=new Ae,o=new Sn,a=new qxe({depthPacking:Ixe}),l=new kwt,c={},h=n.maxTextureSize,u={[zu]:Us,[Us]:zu,[ll]:ll},d=new Ms({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ae},radius:{value:4}},vertexShader:Fwt,fragmentShader:Nwt}),f=d.clone();f.defines.HORIZONTAL_PASS=1;let p=new Qt;p.setAttribute("position",new on(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new cl(p,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=v$,this.render=function(b,S,A){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||b.length===0)return;let E=t.getRenderTarget(),M=t.getActiveCubeFace(),C=t.getActiveMipmapLevel(),T=t.state;T.setBlending(io),T.buffers.color.setClear(1,1,1,1),T.buffers.depth.setTest(!0),T.setScissorTest(!1);for(let D=0,L=b.length;D<L;D++){let I=b[D],R=I.shadow;if(R===void 0){console.warn("THREE.WebGLShadowMap:",I,"has no shadow.");continue}if(R.autoUpdate===!1&&R.needsUpdate===!1)continue;r.copy(R.mapSize);let H=R.getFrameExtents();if(r.multiply(H),s.copy(R.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/H.x),r.x=s.x*H.x,R.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/H.y),r.y=s.y*H.y,R.mapSize.y=s.y)),R.map===null){let ee=this.type!==MA?{minFilter:hr,magFilter:hr}:{};R.map=new _s(r.x,r.y,ee),R.map.texture.name=I.name+".shadowMap",R.camera.updateProjectionMatrix()}t.setRenderTarget(R.map),t.clear();let Z=R.getViewportCount();for(let ee=0;ee<Z;ee++){let F=R.getViewport(ee);o.set(s.x*F.x,s.y*F.y,s.x*F.z,s.y*F.w),T.viewport(o),R.updateMatrices(I,ee),i=R.getFrustum(),x(S,A,R.camera,I,this.type)}R.isPointLightShadow!==!0&&this.type===MA&&v(R,A),R.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(E,M,C)};function v(b,S){let A=e.update(m);d.defines.VSM_SAMPLES!==b.blurSamples&&(d.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new _s(r.x,r.y)),d.uniforms.shadow_pass.value=b.map.texture,d.uniforms.resolution.value=b.mapSize,d.uniforms.radius.value=b.radius,t.setRenderTarget(b.mapPass),t.clear(),t.renderBufferDirect(S,null,A,d,m,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,t.setRenderTarget(b.map),t.clear(),t.renderBufferDirect(S,null,A,f,m,null)}function y(b,S,A,E,M,C){let T=null,D=A.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(D!==void 0)T=D;else if(T=A.isPointLight===!0?l:a,t.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){let L=T.uuid,I=S.uuid,R=c[L];R===void 0&&(R={},c[L]=R);let H=R[I];H===void 0&&(H=T.clone(),R[I]=H),T=H}return T.visible=S.visible,T.wireframe=S.wireframe,C===MA?T.side=S.shadowSide!==null?S.shadowSide:S.side:T.side=S.shadowSide!==null?S.shadowSide:u[S.side],T.alphaMap=S.alphaMap,T.alphaTest=S.alphaTest,T.map=S.map,T.clipShadows=S.clipShadows,T.clippingPlanes=S.clippingPlanes,T.clipIntersection=S.clipIntersection,T.displacementMap=S.displacementMap,T.displacementScale=S.displacementScale,T.displacementBias=S.displacementBias,T.wireframeLinewidth=S.wireframeLinewidth,T.linewidth=S.linewidth,A.isPointLight===!0&&T.isMeshDistanceMaterial===!0&&(T.referencePosition.setFromMatrixPosition(A.matrixWorld),T.nearDistance=E,T.farDistance=M),T}function x(b,S,A,E,M){if(b.visible===!1)return;if(b.layers.test(S.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&M===MA)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,b.matrixWorld);let T=e.update(b),D=b.material;if(Array.isArray(D)){let L=T.groups;for(let I=0,R=L.length;I<R;I++){let H=L[I],Z=D[H.materialIndex];if(Z&&Z.visible){let ee=y(b,Z,E,A.near,A.far,M);t.renderBufferDirect(A,null,T,ee,b,H)}}}else if(D.visible){let L=y(b,D,E,A.near,A.far,M);t.renderBufferDirect(A,null,T,L,b,null)}}let C=b.children;for(let T=0,D=C.length;T<D;T++)x(C[T],S,A,E,M)}}function Uwt(t,e,n){let i=n.isWebGL2;function r(){let ie=!1,ve=new Sn,Ce=null,Ne=new Sn(0,0,0,0);return{setMask:function($e){Ce!==$e&&!ie&&(t.colorMask($e,$e,$e,$e),Ce=$e)},setLocked:function($e){ie=$e},setClear:function($e,Ct,rn,Cn,Ir){Ir===!0&&($e*=Cn,Ct*=Cn,rn*=Cn),ve.set($e,Ct,rn,Cn),Ne.equals(ve)===!1&&(t.clearColor($e,Ct,rn,Cn),Ne.copy(ve))},reset:function(){ie=!1,Ce=null,Ne.set(-1,0,0,0)}}}function s(){let ie=!1,ve=null,Ce=null,Ne=null;return{setTest:function($e){$e?te(2929):re(2929)},setMask:function($e){ve!==$e&&!ie&&(t.depthMask($e),ve=$e)},setFunc:function($e){if(Ce!==$e){switch($e){case svt:t.depthFunc(512);break;case ovt:t.depthFunc(519);break;case avt:t.depthFunc(513);break;case LH:t.depthFunc(515);break;case lvt:t.depthFunc(514);break;case cvt:t.depthFunc(518);break;case uvt:t.depthFunc(516);break;case hvt:t.depthFunc(517);break;default:t.depthFunc(515)}Ce=$e}},setLocked:function($e){ie=$e},setClear:function($e){Ne!==$e&&(t.clearDepth($e),Ne=$e)},reset:function(){ie=!1,ve=null,Ce=null,Ne=null}}}function o(){let ie=!1,ve=null,Ce=null,Ne=null,$e=null,Ct=null,rn=null,Cn=null,Ir=null;return{setTest:function(en){ie||(en?te(2960):re(2960))},setMask:function(en){ve!==en&&!ie&&(t.stencilMask(en),ve=en)},setFunc:function(en,Ui,Gi){(Ce!==en||Ne!==Ui||$e!==Gi)&&(t.stencilFunc(en,Ui,Gi),Ce=en,Ne=Ui,$e=Gi)},setOp:function(en,Ui,Gi){(Ct!==en||rn!==Ui||Cn!==Gi)&&(t.stencilOp(en,Ui,Gi),Ct=en,rn=Ui,Cn=Gi)},setLocked:function(en){ie=en},setClear:function(en){Ir!==en&&(t.clearStencil(en),Ir=en)},reset:function(){ie=!1,ve=null,Ce=null,Ne=null,$e=null,Ct=null,rn=null,Cn=null,Ir=null}}}let a=new r,l=new s,c=new o,h=new WeakMap,u=new WeakMap,d={},f={},p=new WeakMap,m=[],g=null,v=!1,y=null,x=null,b=null,S=null,A=null,E=null,M=null,C=!1,T=null,D=null,L=null,I=null,R=null,H=t.getParameter(35661),Z=!1,ee=0,F=t.getParameter(7938);F.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(F)[1]),Z=ee>=1):F.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),Z=ee>=2);let V=null,U={},j=t.getParameter(3088),z=t.getParameter(2978),Y=new Sn().fromArray(j),J=new Sn().fromArray(z);function K(ie,ve,Ce){let Ne=new Uint8Array(4),$e=t.createTexture();t.bindTexture(ie,$e),t.texParameteri(ie,10241,9728),t.texParameteri(ie,10240,9728);for(let Ct=0;Ct<Ce;Ct++)t.texImage2D(ve+Ct,0,6408,1,1,0,6408,5121,Ne);return $e}let X={};X[3553]=K(3553,3553,1),X[34067]=K(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),te(2929),l.setFunc(LH),Se(!1),Pe(Mre),te(2884),ye(io);function te(ie){d[ie]!==!0&&(t.enable(ie),d[ie]=!0)}function re(ie){d[ie]!==!1&&(t.disable(ie),d[ie]=!1)}function se(ie,ve){return f[ie]!==ve?(t.bindFramebuffer(ie,ve),f[ie]=ve,i&&(ie===36009&&(f[36160]=ve),ie===36160&&(f[36009]=ve)),!0):!1}function ce(ie,ve){let Ce=m,Ne=!1;if(ie)if(Ce=p.get(ve),Ce===void 0&&(Ce=[],p.set(ve,Ce)),ie.isWebGLMultipleRenderTargets){let $e=ie.texture;if(Ce.length!==$e.length||Ce[0]!==36064){for(let Ct=0,rn=$e.length;Ct<rn;Ct++)Ce[Ct]=36064+Ct;Ce.length=$e.length,Ne=!0}}else Ce[0]!==36064&&(Ce[0]=36064,Ne=!0);else Ce[0]!==1029&&(Ce[0]=1029,Ne=!0);Ne&&(n.isWebGL2?t.drawBuffers(Ce):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ce))}function ge(ie){return g!==ie?(t.useProgram(ie),g=ie,!0):!1}let oe={[z1]:32774,[X0t]:32778,[Y0t]:32779};if(i)oe[Pre]=32775,oe[Dre]=32776;else{let ie=e.get("EXT_blend_minmax");ie!==null&&(oe[Pre]=ie.MIN_EXT,oe[Dre]=ie.MAX_EXT)}let ae={[K0t]:0,[J0t]:1,[Z0t]:768,[Pxe]:770,[rvt]:776,[nvt]:774,[evt]:772,[Q0t]:769,[Dxe]:771,[ivt]:775,[tvt]:773};function ye(ie,ve,Ce,Ne,$e,Ct,rn,Cn){if(ie===io){v===!0&&(re(3042),v=!1);return}if(v===!1&&(te(3042),v=!0),ie!==q0t){if(ie!==y||Cn!==C){if((x!==z1||A!==z1)&&(t.blendEquation(32774),x=z1,A=z1),Cn)switch(ie){case cb:t.blendFuncSeparate(1,771,1,771);break;case Ere:t.blendFunc(1,1);break;case Cre:t.blendFuncSeparate(0,769,0,1);break;case Tre:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}else switch(ie){case cb:t.blendFuncSeparate(770,771,1,771);break;case Ere:t.blendFunc(770,1);break;case Cre:t.blendFuncSeparate(0,769,0,1);break;case Tre:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}b=null,S=null,E=null,M=null,y=ie,C=Cn}return}$e=$e||ve,Ct=Ct||Ce,rn=rn||Ne,(ve!==x||$e!==A)&&(t.blendEquationSeparate(oe[ve],oe[$e]),x=ve,A=$e),(Ce!==b||Ne!==S||Ct!==E||rn!==M)&&(t.blendFuncSeparate(ae[Ce],ae[Ne],ae[Ct],ae[rn]),b=Ce,S=Ne,E=Ct,M=rn),y=ie,C=!1}function we(ie,ve){ie.side===ll?re(2884):te(2884);let Ce=ie.side===Us;ve&&(Ce=!Ce),Se(Ce),ie.blending===cb&&ie.transparent===!1?ye(io):ye(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.premultipliedAlpha),l.setFunc(ie.depthFunc),l.setTest(ie.depthTest),l.setMask(ie.depthWrite),a.setMask(ie.colorWrite);let Ne=ie.stencilWrite;c.setTest(Ne),Ne&&(c.setMask(ie.stencilWriteMask),c.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),c.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),Ie(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits),ie.alphaToCoverage===!0?te(32926):re(32926)}function Se(ie){T!==ie&&(ie?t.frontFace(2304):t.frontFace(2305),T=ie)}function Pe(ie){ie!==W0t?(te(2884),ie!==D&&(ie===Mre?t.cullFace(1029):ie===$0t?t.cullFace(1028):t.cullFace(1032))):re(2884),D=ie}function Te(ie){ie!==L&&(Z&&t.lineWidth(ie),L=ie)}function Ie(ie,ve,Ce){ie?(te(32823),(I!==ve||R!==Ce)&&(t.polygonOffset(ve,Ce),I=ve,R=Ce)):re(32823)}function xe(ie){ie?te(3089):re(3089)}function Re(ie){ie===void 0&&(ie=33984+H-1),V!==ie&&(t.activeTexture(ie),V=ie)}function N(ie,ve,Ce){Ce===void 0&&(V===null?Ce=33984+H-1:Ce=V);let Ne=U[Ce];Ne===void 0&&(Ne={type:void 0,texture:void 0},U[Ce]=Ne),(Ne.type!==ie||Ne.texture!==ve)&&(V!==Ce&&(t.activeTexture(Ce),V=Ce),t.bindTexture(ie,ve||X[ie]),Ne.type=ie,Ne.texture=ve)}function B(){let ie=U[V];ie!==void 0&&ie.type!==void 0&&(t.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)}function le(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function _e(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ee(){try{t.texSubImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Fe(){try{t.texSubImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ze(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ue(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function be(){try{t.texStorage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Xe(){try{t.texStorage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ge(){try{t.texImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function We(){try{t.texImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Je(ie){Y.equals(ie)===!1&&(t.scissor(ie.x,ie.y,ie.z,ie.w),Y.copy(ie))}function Qe(ie){J.equals(ie)===!1&&(t.viewport(ie.x,ie.y,ie.z,ie.w),J.copy(ie))}function xt(ie,ve){let Ce=u.get(ve);Ce===void 0&&(Ce=new WeakMap,u.set(ve,Ce));let Ne=Ce.get(ie);Ne===void 0&&(Ne=t.getUniformBlockIndex(ve,ie.name),Ce.set(ie,Ne))}function Vt(ie,ve){let Ce=u.get(ve).get(ie);h.get(ve)!==Ce&&(t.uniformBlockBinding(ve,Ce,ie.__bindingPointIndex),h.set(ve,Ce))}function gn(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),i===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},V=null,U={},f={},p=new WeakMap,m=[],g=null,v=!1,y=null,x=null,b=null,S=null,A=null,E=null,M=null,C=!1,T=null,D=null,L=null,I=null,R=null,Y.set(0,0,t.canvas.width,t.canvas.height),J.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:te,disable:re,bindFramebuffer:se,drawBuffers:ce,useProgram:ge,setBlending:ye,setMaterial:we,setFlipSided:Se,setCullFace:Pe,setLineWidth:Te,setPolygonOffset:Ie,setScissorTest:xe,activeTexture:Re,bindTexture:N,unbindTexture:B,compressedTexImage2D:le,compressedTexImage3D:_e,texImage2D:Ge,texImage3D:We,updateUBOMapping:xt,uniformBlockBinding:Vt,texStorage2D:be,texStorage3D:Xe,texSubImage2D:Ee,texSubImage3D:Fe,compressedTexSubImage2D:Ze,compressedTexSubImage3D:Ue,scissor:Je,viewport:Qe,reset:gn}}function Gwt(t,e,n,i,r,s,o){let a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,h=r.maxTextureSize,u=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap,m,g=new WeakMap,v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(N,B){return v?new OffscreenCanvas(N,B):TL("canvas")}function x(N,B,le,_e){let Ee=1;if((N.width>_e||N.height>_e)&&(Ee=_e/Math.max(N.width,N.height)),Ee<1||B===!0)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap){let Fe=B?CL:Math.floor,Ze=Fe(Ee*N.width),Ue=Fe(Ee*N.height);m===void 0&&(m=y(Ze,Ue));let be=le?y(Ze,Ue):m;return be.width=Ze,be.height=Ue,be.getContext("2d").drawImage(N,0,0,Ze,Ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+N.width+"x"+N.height+") to ("+Ze+"x"+Ue+")."),be}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+N.width+"x"+N.height+")."),N;return N}function b(N){return NH(N.width)&&NH(N.height)}function S(N){return a?!1:N.wrapS!==il||N.wrapT!==il||N.minFilter!==hr&&N.minFilter!==oi}function A(N,B){return N.generateMipmaps&&B&&N.minFilter!==hr&&N.minFilter!==oi}function E(N){t.generateMipmap(N)}function M(N,B,le,_e,Ee=!1){if(a===!1)return B;if(N!==null){if(t[N]!==void 0)return t[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let Fe=B;return B===6403&&(le===5126&&(Fe=33326),le===5131&&(Fe=33325),le===5121&&(Fe=33321)),B===33319&&(le===5126&&(Fe=33328),le===5131&&(Fe=33327),le===5121&&(Fe=33323)),B===6408&&(le===5126&&(Fe=34836),le===5131&&(Fe=34842),le===5121&&(Fe=_e===mn&&Ee===!1?35907:32856),le===32819&&(Fe=32854),le===32820&&(Fe=32855)),(Fe===33325||Fe===33326||Fe===33327||Fe===33328||Fe===34842||Fe===34836)&&e.get("EXT_color_buffer_float"),Fe}function C(N,B,le){return A(N,le)===!0||N.isFramebufferTexture&&N.minFilter!==hr&&N.minFilter!==oi?Math.log2(Math.max(B.width,B.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?B.mipmaps.length:1}function T(N){return N===hr||N===Ore||N===X4?9728:9729}function D(N){let B=N.target;B.removeEventListener("dispose",D),I(B),B.isVideoTexture&&p.delete(B)}function L(N){let B=N.target;B.removeEventListener("dispose",L),H(B)}function I(N){let B=i.get(N);if(B.__webglInit===void 0)return;let le=N.source,_e=g.get(le);if(_e){let Ee=_e[B.__cacheKey];Ee.usedTimes--,Ee.usedTimes===0&&R(N),Object.keys(_e).length===0&&g.delete(le)}i.remove(N)}function R(N){let B=i.get(N);t.deleteTexture(B.__webglTexture);let le=N.source,_e=g.get(le);delete _e[B.__cacheKey],o.memory.textures--}function H(N){let B=N.texture,le=i.get(N),_e=i.get(B);if(_e.__webglTexture!==void 0&&(t.deleteTexture(_e.__webglTexture),o.memory.textures--),N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++)t.deleteFramebuffer(le.__webglFramebuffer[Ee]),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer[Ee]);else{if(t.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&t.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let Ee=0;Ee<le.__webglColorRenderbuffer.length;Ee++)le.__webglColorRenderbuffer[Ee]&&t.deleteRenderbuffer(le.__webglColorRenderbuffer[Ee]);le.__webglDepthRenderbuffer&&t.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(N.isWebGLMultipleRenderTargets)for(let Ee=0,Fe=B.length;Ee<Fe;Ee++){let Ze=i.get(B[Ee]);Ze.__webglTexture&&(t.deleteTexture(Ze.__webglTexture),o.memory.textures--),i.remove(B[Ee])}i.remove(B),i.remove(N)}let Z=0;function ee(){Z=0}function F(){let N=Z;return N>=l&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+l),Z+=1,N}function V(N){let B=[];return B.push(N.wrapS),B.push(N.wrapT),B.push(N.wrapR||0),B.push(N.magFilter),B.push(N.minFilter),B.push(N.anisotropy),B.push(N.internalFormat),B.push(N.format),B.push(N.type),B.push(N.generateMipmaps),B.push(N.premultiplyAlpha),B.push(N.flipY),B.push(N.unpackAlignment),B.push(N.encoding),B.join()}function U(N,B){let le=i.get(N);if(N.isVideoTexture&&xe(N),N.isRenderTargetTexture===!1&&N.version>0&&le.__version!==N.version){let _e=N.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{re(le,N,B);return}}n.bindTexture(3553,le.__webglTexture,33984+B)}function j(N,B){let le=i.get(N);if(N.version>0&&le.__version!==N.version){re(le,N,B);return}n.bindTexture(35866,le.__webglTexture,33984+B)}function z(N,B){let le=i.get(N);if(N.version>0&&le.__version!==N.version){re(le,N,B);return}n.bindTexture(32879,le.__webglTexture,33984+B)}function Y(N,B){let le=i.get(N);if(N.version>0&&le.__version!==N.version){se(le,N,B);return}n.bindTexture(34067,le.__webglTexture,33984+B)}let J={[L2]:10497,[il]:33071,[BH]:33648},K={[hr]:9728,[Ore]:9984,[X4]:9986,[oi]:9729,[xvt]:9985,[rw]:9987};function X(N,B,le){if(le?(t.texParameteri(N,10242,J[B.wrapS]),t.texParameteri(N,10243,J[B.wrapT]),(N===32879||N===35866)&&t.texParameteri(N,32882,J[B.wrapR]),t.texParameteri(N,10240,K[B.magFilter]),t.texParameteri(N,10241,K[B.minFilter])):(t.texParameteri(N,10242,33071),t.texParameteri(N,10243,33071),(N===32879||N===35866)&&t.texParameteri(N,32882,33071),(B.wrapS!==il||B.wrapT!==il)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(N,10240,T(B.magFilter)),t.texParameteri(N,10241,T(B.minFilter)),B.minFilter!==hr&&B.minFilter!==oi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){let _e=e.get("EXT_texture_filter_anisotropic");if(B.magFilter===hr||B.minFilter!==X4&&B.minFilter!==rw||B.type===hm&&e.has("OES_texture_float_linear")===!1||a===!1&&B.type===R2&&e.has("OES_texture_half_float_linear")===!1)return;(B.anisotropy>1||i.get(B).__currentAnisotropy)&&(t.texParameterf(N,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,r.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy)}}function te(N,B){let le=!1;N.__webglInit===void 0&&(N.__webglInit=!0,B.addEventListener("dispose",D));let _e=B.source,Ee=g.get(_e);Ee===void 0&&(Ee={},g.set(_e,Ee));let Fe=V(B);if(Fe!==N.__cacheKey){Ee[Fe]===void 0&&(Ee[Fe]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,le=!0),Ee[Fe].usedTimes++;let Ze=Ee[N.__cacheKey];Ze!==void 0&&(Ee[N.__cacheKey].usedTimes--,Ze.usedTimes===0&&R(B)),N.__cacheKey=Fe,N.__webglTexture=Ee[Fe].texture}return le}function re(N,B,le){let _e=3553;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(_e=35866),B.isData3DTexture&&(_e=32879);let Ee=te(N,B),Fe=B.source;n.bindTexture(_e,N.__webglTexture,33984+le);let Ze=i.get(Fe);if(Fe.version!==Ze.__version||Ee===!0){n.activeTexture(33984+le),t.pixelStorei(37440,B.flipY),t.pixelStorei(37441,B.premultiplyAlpha),t.pixelStorei(3317,B.unpackAlignment),t.pixelStorei(37443,0);let Ue=S(B)&&b(B.image)===!1,be=x(B.image,Ue,!1,h);be=Re(B,be);let Xe=b(be)||a,Ge=s.convert(B.format,B.encoding),We=s.convert(B.type),Je=M(B.internalFormat,Ge,We,B.encoding,B.isVideoTexture);X(_e,B,Xe);let Qe,xt=B.mipmaps,Vt=a&&B.isVideoTexture!==!0,gn=Ze.__version===void 0||Ee===!0,ie=C(B,be,Xe);if(B.isDepthTexture)Je=6402,a?B.type===hm?Je=36012:B.type===um?Je=33190:B.type===Z0?Je=35056:Je=33189:B.type===hm&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===Q0&&Je===6402&&B.type!==Rxe&&B.type!==um&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=um,We=s.convert(B.type)),B.format===Pv&&Je===6402&&(Je=34041,B.type!==Z0&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Z0,We=s.convert(B.type))),gn&&(Vt?n.texStorage2D(3553,1,Je,be.width,be.height):n.texImage2D(3553,0,Je,be.width,be.height,0,Ge,We,null));else if(B.isDataTexture)if(xt.length>0&&Xe){Vt&&gn&&n.texStorage2D(3553,ie,Je,xt[0].width,xt[0].height);for(let ve=0,Ce=xt.length;ve<Ce;ve++)Qe=xt[ve],Vt?n.texSubImage2D(3553,ve,0,0,Qe.width,Qe.height,Ge,We,Qe.data):n.texImage2D(3553,ve,Je,Qe.width,Qe.height,0,Ge,We,Qe.data);B.generateMipmaps=!1}else Vt?(gn&&n.texStorage2D(3553,ie,Je,be.width,be.height),n.texSubImage2D(3553,0,0,0,be.width,be.height,Ge,We,be.data)):n.texImage2D(3553,0,Je,be.width,be.height,0,Ge,We,be.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){Vt&&gn&&n.texStorage3D(35866,ie,Je,xt[0].width,xt[0].height,be.depth);for(let ve=0,Ce=xt.length;ve<Ce;ve++)Qe=xt[ve],B.format!==gu?Ge!==null?Vt?n.compressedTexSubImage3D(35866,ve,0,0,0,Qe.width,Qe.height,be.depth,Ge,Qe.data,0,0):n.compressedTexImage3D(35866,ve,Je,Qe.width,Qe.height,be.depth,0,Qe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Vt?n.texSubImage3D(35866,ve,0,0,0,Qe.width,Qe.height,be.depth,Ge,We,Qe.data):n.texImage3D(35866,ve,Je,Qe.width,Qe.height,be.depth,0,Ge,We,Qe.data)}else{Vt&&gn&&n.texStorage2D(3553,ie,Je,xt[0].width,xt[0].height);for(let ve=0,Ce=xt.length;ve<Ce;ve++)Qe=xt[ve],B.format!==gu?Ge!==null?Vt?n.compressedTexSubImage2D(3553,ve,0,0,Qe.width,Qe.height,Ge,Qe.data):n.compressedTexImage2D(3553,ve,Je,Qe.width,Qe.height,0,Qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Vt?n.texSubImage2D(3553,ve,0,0,Qe.width,Qe.height,Ge,We,Qe.data):n.texImage2D(3553,ve,Je,Qe.width,Qe.height,0,Ge,We,Qe.data)}else if(B.isDataArrayTexture)Vt?(gn&&n.texStorage3D(35866,ie,Je,be.width,be.height,be.depth),n.texSubImage3D(35866,0,0,0,0,be.width,be.height,be.depth,Ge,We,be.data)):n.texImage3D(35866,0,Je,be.width,be.height,be.depth,0,Ge,We,be.data);else if(B.isData3DTexture)Vt?(gn&&n.texStorage3D(32879,ie,Je,be.width,be.height,be.depth),n.texSubImage3D(32879,0,0,0,0,be.width,be.height,be.depth,Ge,We,be.data)):n.texImage3D(32879,0,Je,be.width,be.height,be.depth,0,Ge,We,be.data);else if(B.isFramebufferTexture){if(gn)if(Vt)n.texStorage2D(3553,ie,Je,be.width,be.height);else{let ve=be.width,Ce=be.height;for(let Ne=0;Ne<ie;Ne++)n.texImage2D(3553,Ne,Je,ve,Ce,0,Ge,We,null),ve>>=1,Ce>>=1}}else if(xt.length>0&&Xe){Vt&&gn&&n.texStorage2D(3553,ie,Je,xt[0].width,xt[0].height);for(let ve=0,Ce=xt.length;ve<Ce;ve++)Qe=xt[ve],Vt?n.texSubImage2D(3553,ve,0,0,Ge,We,Qe):n.texImage2D(3553,ve,Je,Ge,We,Qe);B.generateMipmaps=!1}else Vt?(gn&&n.texStorage2D(3553,ie,Je,be.width,be.height),n.texSubImage2D(3553,0,0,0,Ge,We,be)):n.texImage2D(3553,0,Je,Ge,We,be);A(B,Xe)&&E(_e),Ze.__version=Fe.version,B.onUpdate&&B.onUpdate(B)}N.__version=B.version}function se(N,B,le){if(B.image.length!==6)return;let _e=te(N,B),Ee=B.source;n.bindTexture(34067,N.__webglTexture,33984+le);let Fe=i.get(Ee);if(Ee.version!==Fe.__version||_e===!0){n.activeTexture(33984+le),t.pixelStorei(37440,B.flipY),t.pixelStorei(37441,B.premultiplyAlpha),t.pixelStorei(3317,B.unpackAlignment),t.pixelStorei(37443,0);let Ze=B.isCompressedTexture||B.image[0].isCompressedTexture,Ue=B.image[0]&&B.image[0].isDataTexture,be=[];for(let ve=0;ve<6;ve++)!Ze&&!Ue?be[ve]=x(B.image[ve],!1,!0,c):be[ve]=Ue?B.image[ve].image:B.image[ve],be[ve]=Re(B,be[ve]);let Xe=be[0],Ge=b(Xe)||a,We=s.convert(B.format,B.encoding),Je=s.convert(B.type),Qe=M(B.internalFormat,We,Je,B.encoding),xt=a&&B.isVideoTexture!==!0,Vt=Fe.__version===void 0||_e===!0,gn=C(B,Xe,Ge);X(34067,B,Ge);let ie;if(Ze){xt&&Vt&&n.texStorage2D(34067,gn,Qe,Xe.width,Xe.height);for(let ve=0;ve<6;ve++){ie=be[ve].mipmaps;for(let Ce=0;Ce<ie.length;Ce++){let Ne=ie[Ce];B.format!==gu?We!==null?xt?n.compressedTexSubImage2D(34069+ve,Ce,0,0,Ne.width,Ne.height,We,Ne.data):n.compressedTexImage2D(34069+ve,Ce,Qe,Ne.width,Ne.height,0,Ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):xt?n.texSubImage2D(34069+ve,Ce,0,0,Ne.width,Ne.height,We,Je,Ne.data):n.texImage2D(34069+ve,Ce,Qe,Ne.width,Ne.height,0,We,Je,Ne.data)}}}else{ie=B.mipmaps,xt&&Vt&&(ie.length>0&&gn++,n.texStorage2D(34067,gn,Qe,be[0].width,be[0].height));for(let ve=0;ve<6;ve++)if(Ue){xt?n.texSubImage2D(34069+ve,0,0,0,be[ve].width,be[ve].height,We,Je,be[ve].data):n.texImage2D(34069+ve,0,Qe,be[ve].width,be[ve].height,0,We,Je,be[ve].data);for(let Ce=0;Ce<ie.length;Ce++){let Ne=ie[Ce].image[ve].image;xt?n.texSubImage2D(34069+ve,Ce+1,0,0,Ne.width,Ne.height,We,Je,Ne.data):n.texImage2D(34069+ve,Ce+1,Qe,Ne.width,Ne.height,0,We,Je,Ne.data)}}else{xt?n.texSubImage2D(34069+ve,0,0,0,We,Je,be[ve]):n.texImage2D(34069+ve,0,Qe,We,Je,be[ve]);for(let Ce=0;Ce<ie.length;Ce++){let Ne=ie[Ce];xt?n.texSubImage2D(34069+ve,Ce+1,0,0,We,Je,Ne.image[ve]):n.texImage2D(34069+ve,Ce+1,Qe,We,Je,Ne.image[ve])}}}A(B,Ge)&&E(34067),Fe.__version=Ee.version,B.onUpdate&&B.onUpdate(B)}N.__version=B.version}function ce(N,B,le,_e,Ee){let Fe=s.convert(le.format,le.encoding),Ze=s.convert(le.type),Ue=M(le.internalFormat,Fe,Ze,le.encoding);i.get(B).__hasExternalTextures||(Ee===32879||Ee===35866?n.texImage3D(Ee,0,Ue,B.width,B.height,B.depth,0,Fe,Ze,null):n.texImage2D(Ee,0,Ue,B.width,B.height,0,Fe,Ze,null)),n.bindFramebuffer(36160,N),Ie(B)?d.framebufferTexture2DMultisampleEXT(36160,_e,Ee,i.get(le).__webglTexture,0,Te(B)):(Ee===3553||Ee>=34069&&Ee<=34074)&&t.framebufferTexture2D(36160,_e,Ee,i.get(le).__webglTexture,0),n.bindFramebuffer(36160,null)}function ge(N,B,le){if(t.bindRenderbuffer(36161,N),B.depthBuffer&&!B.stencilBuffer){let _e=33189;if(le||Ie(B)){let Ee=B.depthTexture;Ee&&Ee.isDepthTexture&&(Ee.type===hm?_e=36012:Ee.type===um&&(_e=33190));let Fe=Te(B);Ie(B)?d.renderbufferStorageMultisampleEXT(36161,Fe,_e,B.width,B.height):t.renderbufferStorageMultisample(36161,Fe,_e,B.width,B.height)}else t.renderbufferStorage(36161,_e,B.width,B.height);t.framebufferRenderbuffer(36160,36096,36161,N)}else if(B.depthBuffer&&B.stencilBuffer){let _e=Te(B);le&&Ie(B)===!1?t.renderbufferStorageMultisample(36161,_e,35056,B.width,B.height):Ie(B)?d.renderbufferStorageMultisampleEXT(36161,_e,35056,B.width,B.height):t.renderbufferStorage(36161,34041,B.width,B.height),t.framebufferRenderbuffer(36160,33306,36161,N)}else{let _e=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let Ee=0;Ee<_e.length;Ee++){let Fe=_e[Ee],Ze=s.convert(Fe.format,Fe.encoding),Ue=s.convert(Fe.type),be=M(Fe.internalFormat,Ze,Ue,Fe.encoding),Xe=Te(B);le&&Ie(B)===!1?t.renderbufferStorageMultisample(36161,Xe,be,B.width,B.height):Ie(B)?d.renderbufferStorageMultisampleEXT(36161,Xe,be,B.width,B.height):t.renderbufferStorage(36161,be,B.width,B.height)}}t.bindRenderbuffer(36161,null)}function oe(N,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,N),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),U(B.depthTexture,0);let le=i.get(B.depthTexture).__webglTexture,_e=Te(B);if(B.depthTexture.format===Q0)Ie(B)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,le,0,_e):t.framebufferTexture2D(36160,36096,3553,le,0);else if(B.depthTexture.format===Pv)Ie(B)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,le,0,_e):t.framebufferTexture2D(36160,33306,3553,le,0);else throw new Error("Unknown depthTexture format")}function ae(N){let B=i.get(N),le=N.isWebGLCubeRenderTarget===!0;if(N.depthTexture&&!B.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");oe(B.__webglFramebuffer,N)}else if(le){B.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)n.bindFramebuffer(36160,B.__webglFramebuffer[_e]),B.__webglDepthbuffer[_e]=t.createRenderbuffer(),ge(B.__webglDepthbuffer[_e],N,!1)}else n.bindFramebuffer(36160,B.__webglFramebuffer),B.__webglDepthbuffer=t.createRenderbuffer(),ge(B.__webglDepthbuffer,N,!1);n.bindFramebuffer(36160,null)}function ye(N,B,le){let _e=i.get(N);B!==void 0&&ce(_e.__webglFramebuffer,N,N.texture,36064,3553),le!==void 0&&ae(N)}function we(N){let B=N.texture,le=i.get(N),_e=i.get(B);N.addEventListener("dispose",L),N.isWebGLMultipleRenderTargets!==!0&&(_e.__webglTexture===void 0&&(_e.__webglTexture=t.createTexture()),_e.__version=B.version,o.memory.textures++);let Ee=N.isWebGLCubeRenderTarget===!0,Fe=N.isWebGLMultipleRenderTargets===!0,Ze=b(N)||a;if(Ee){le.__webglFramebuffer=[];for(let Ue=0;Ue<6;Ue++)le.__webglFramebuffer[Ue]=t.createFramebuffer()}else{if(le.__webglFramebuffer=t.createFramebuffer(),Fe)if(r.drawBuffers){let Ue=N.texture;for(let be=0,Xe=Ue.length;be<Xe;be++){let Ge=i.get(Ue[be]);Ge.__webglTexture===void 0&&(Ge.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&N.samples>0&&Ie(N)===!1){let Ue=Fe?B:[B];le.__webglMultisampledFramebuffer=t.createFramebuffer(),le.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,le.__webglMultisampledFramebuffer);for(let be=0;be<Ue.length;be++){let Xe=Ue[be];le.__webglColorRenderbuffer[be]=t.createRenderbuffer(),t.bindRenderbuffer(36161,le.__webglColorRenderbuffer[be]);let Ge=s.convert(Xe.format,Xe.encoding),We=s.convert(Xe.type),Je=M(Xe.internalFormat,Ge,We,Xe.encoding,N.isXRRenderTarget===!0),Qe=Te(N);t.renderbufferStorageMultisample(36161,Qe,Je,N.width,N.height),t.framebufferRenderbuffer(36160,36064+be,36161,le.__webglColorRenderbuffer[be])}t.bindRenderbuffer(36161,null),N.depthBuffer&&(le.__webglDepthRenderbuffer=t.createRenderbuffer(),ge(le.__webglDepthRenderbuffer,N,!0)),n.bindFramebuffer(36160,null)}}if(Ee){n.bindTexture(34067,_e.__webglTexture),X(34067,B,Ze);for(let Ue=0;Ue<6;Ue++)ce(le.__webglFramebuffer[Ue],N,B,36064,34069+Ue);A(B,Ze)&&E(34067),n.unbindTexture()}else if(Fe){let Ue=N.texture;for(let be=0,Xe=Ue.length;be<Xe;be++){let Ge=Ue[be],We=i.get(Ge);n.bindTexture(3553,We.__webglTexture),X(3553,Ge,Ze),ce(le.__webglFramebuffer,N,Ge,36064+be,3553),A(Ge,Ze)&&E(3553)}n.unbindTexture()}else{let Ue=3553;(N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(a?Ue=N.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Ue,_e.__webglTexture),X(Ue,B,Ze),ce(le.__webglFramebuffer,N,B,36064,Ue),A(B,Ze)&&E(Ue),n.unbindTexture()}N.depthBuffer&&ae(N)}function Se(N){let B=b(N)||a,le=N.isWebGLMultipleRenderTargets===!0?N.texture:[N.texture];for(let _e=0,Ee=le.length;_e<Ee;_e++){let Fe=le[_e];if(A(Fe,B)){let Ze=N.isWebGLCubeRenderTarget?34067:3553,Ue=i.get(Fe).__webglTexture;n.bindTexture(Ze,Ue),E(Ze),n.unbindTexture()}}}function Pe(N){if(a&&N.samples>0&&Ie(N)===!1){let B=N.isWebGLMultipleRenderTargets?N.texture:[N.texture],le=N.width,_e=N.height,Ee=16384,Fe=[],Ze=N.stencilBuffer?33306:36096,Ue=i.get(N),be=N.isWebGLMultipleRenderTargets===!0;if(be)for(let Xe=0;Xe<B.length;Xe++)n.bindFramebuffer(36160,Ue.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Xe,36161,null),n.bindFramebuffer(36160,Ue.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Xe,3553,null,0);n.bindFramebuffer(36008,Ue.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,Ue.__webglFramebuffer);for(let Xe=0;Xe<B.length;Xe++){Fe.push(36064+Xe),N.depthBuffer&&Fe.push(Ze);let Ge=Ue.__ignoreDepthValues!==void 0?Ue.__ignoreDepthValues:!1;if(Ge===!1&&(N.depthBuffer&&(Ee|=256),N.stencilBuffer&&(Ee|=1024)),be&&t.framebufferRenderbuffer(36008,36064,36161,Ue.__webglColorRenderbuffer[Xe]),Ge===!0&&(t.invalidateFramebuffer(36008,[Ze]),t.invalidateFramebuffer(36009,[Ze])),be){let We=i.get(B[Xe]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,We,0)}t.blitFramebuffer(0,0,le,_e,0,0,le,_e,Ee,9728),f&&t.invalidateFramebuffer(36008,Fe)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),be)for(let Xe=0;Xe<B.length;Xe++){n.bindFramebuffer(36160,Ue.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Xe,36161,Ue.__webglColorRenderbuffer[Xe]);let Ge=i.get(B[Xe]).__webglTexture;n.bindFramebuffer(36160,Ue.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Xe,3553,Ge,0)}n.bindFramebuffer(36009,Ue.__webglMultisampledFramebuffer)}}function Te(N){return Math.min(u,N.samples)}function Ie(N){let B=i.get(N);return a&&N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function xe(N){let B=o.render.frame;p.get(N)!==B&&(p.set(N,B),N.update())}function Re(N,B){let le=N.encoding,_e=N.format,Ee=N.type;return N.isCompressedTexture===!0||N.isVideoTexture===!0||N.format===FH||le!==id&&(le===mn?a===!1?e.has("EXT_sRGB")===!0&&_e===gu?(N.format=FH,N.minFilter=oi,N.generateMipmaps=!1):B=Fxe.sRGBToLinear(B):(_e!==gu||Ee!==Lo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",le)),B}this.allocateTextureUnit=F,this.resetTextureUnits=ee,this.setTexture2D=U,this.setTexture2DArray=j,this.setTexture3D=z,this.setTextureCube=Y,this.rebindTextures=ye,this.setupRenderTarget=we,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=Pe,this.setupDepthRenderbuffer=ae,this.setupFrameBufferTexture=ce,this.useMultisampledRTT=Ie}function Hwt(t,e,n){let i=n.isWebGL2;function r(s,o=null){let a;if(s===Lo)return 5121;if(s===Svt)return 32819;if(s===Avt)return 32820;if(s===bvt)return 5120;if(s===wvt)return 5122;if(s===Rxe)return 5123;if(s===_vt)return 5124;if(s===um)return 5125;if(s===hm)return 5126;if(s===R2)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===Mvt)return 6406;if(s===gu)return 6408;if(s===Evt)return 6409;if(s===Cvt)return 6410;if(s===Q0)return 6402;if(s===Pv)return 34041;if(s===FH)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===Tvt)return 6403;if(s===Pvt)return 36244;if(s===Dvt)return 33319;if(s===Ovt)return 33320;if(s===Lvt)return 36249;if(s===Y4||s===K4||s===J4||s===Z4)if(o===mn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Y4)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===K4)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===J4)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Z4)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Y4)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===K4)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===J4)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Z4)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Lre||s===Rre||s===Ire||s===Bre)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===Lre)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Rre)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Ire)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Bre)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Rvt)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===kre||s===Fre)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===kre)return o===mn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===Fre)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===Nre||s===zre||s===Ure||s===Gre||s===Hre||s===jre||s===Vre||s===Wre||s===$re||s===qre||s===Xre||s===Yre||s===Kre||s===Jre)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===Nre)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===zre)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===Ure)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Gre)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Hre)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===jre)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Vre)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Wre)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===$re)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===qre)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Xre)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Yre)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Kre)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Jre)return o===mn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Q4)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Q4)return o===mn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===Ivt||s===Zre||s===Qre||s===ese)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Q4)return a.COMPRESSED_RED_RGTC1_EXT;if(s===Zre)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Qre)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===ese)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Z0?i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:r}}var jwt=class extends So{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}},Ox=class extends wi{constructor(){super(),this.isGroup=!0,this.type="Group"}},Vwt={type:"move"},A5=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ox,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ox,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new G,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new G),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ox,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new G,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new G),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,s=null,o=this._targetRay,a=this._grip,l=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(l&&t.hand){s=!0;for(let p of t.hand.values()){let m=e.getJointPose(p,n),g=this._getHandJoint(l,p);m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=m.radius),g.visible=m!==null}let c=l.joints["index-finger-tip"],h=l.joints["thumb-tip"],u=c.position.distanceTo(h.position),d=.02,f=.005;l.inputState.pinching&&u>d+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&u<=d-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else a!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));o!==null&&(i=e.getPose(t.targetRaySpace,n),i===null&&r!==null&&(i=r),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Vwt)))}return o!==null&&(o.visible=i!==null),a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let n=new Ox;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}},S$=class extends Hs{constructor(t,e,n,i,r,s,o,a,l,c){if(c=c!==void 0?c:Q0,c!==Q0&&c!==Pv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===Q0&&(n=um),n===void 0&&c===Pv&&(n=Z0),super(null,i,r,s,o,a,c,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=o!==void 0?o:hr,this.minFilter=a!==void 0?a:hr,this.flipY=!1,this.generateMipmaps=!1}},Wwt=class extends Ba{constructor(t,e){super();let n=this,i=null,r=1,s=null,o="local-floor",a=1,l=null,c=null,h=null,u=null,d=null,f=null,p=e.getContextAttributes(),m=null,g=null,v=[],y=[],x=new Set,b=new Map,S=new So;S.layers.enable(1),S.viewport=new Sn;let A=new So;A.layers.enable(2),A.viewport=new Sn;let E=[S,A],M=new jwt;M.layers.enable(1),M.layers.enable(2);let C=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(j){let z=v[j];return z===void 0&&(z=new A5,v[j]=z),z.getTargetRaySpace()},this.getControllerGrip=function(j){let z=v[j];return z===void 0&&(z=new A5,v[j]=z),z.getGripSpace()},this.getHand=function(j){let z=v[j];return z===void 0&&(z=new A5,v[j]=z),z.getHandSpace()};function D(j){let z=y.indexOf(j.inputSource);if(z===-1)return;let Y=v[z];Y!==void 0&&Y.dispatchEvent({type:j.type,data:j.inputSource})}function L(){i.removeEventListener("select",D),i.removeEventListener("selectstart",D),i.removeEventListener("selectend",D),i.removeEventListener("squeeze",D),i.removeEventListener("squeezestart",D),i.removeEventListener("squeezeend",D),i.removeEventListener("end",L),i.removeEventListener("inputsourceschange",I);for(let j=0;j<v.length;j++){let z=y[j];z!==null&&(y[j]=null,v[j].disconnect(z))}C=null,T=null,t.setRenderTarget(m),d=null,u=null,h=null,i=null,g=null,U.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(j){r=j,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(j){o=j,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(j){l=j},this.getBaseLayer=function(){return u!==null?u:d},this.getBinding=function(){return h},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(j){if(i=j,i!==null){if(m=t.getRenderTarget(),i.addEventListener("select",D),i.addEventListener("selectstart",D),i.addEventListener("selectend",D),i.addEventListener("squeeze",D),i.addEventListener("squeezestart",D),i.addEventListener("squeezeend",D),i.addEventListener("end",L),i.addEventListener("inputsourceschange",I),p.xrCompatible!==!0&&await e.makeXRCompatible(),i.renderState.layers===void 0||t.capabilities.isWebGL2===!1){let z={antialias:i.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(i,e,z),i.updateRenderState({baseLayer:d}),g=new _s(d.framebufferWidth,d.framebufferHeight,{format:gu,type:Lo,encoding:t.outputEncoding,stencilBuffer:p.stencil})}else{let z=null,Y=null,J=null;p.depth&&(J=p.stencil?35056:33190,z=p.stencil?Pv:Q0,Y=p.stencil?Z0:um);let K={colorFormat:32856,depthFormat:J,scaleFactor:r};h=new XRWebGLBinding(i,e),u=h.createProjectionLayer(K),i.updateRenderState({layers:[u]}),g=new _s(u.textureWidth,u.textureHeight,{format:gu,type:Lo,depthTexture:new S$(u.textureWidth,u.textureHeight,Y,void 0,void 0,void 0,void 0,void 0,void 0,z),stencilBuffer:p.stencil,encoding:t.outputEncoding,samples:p.antialias?4:0});let X=t.properties.get(g);X.__ignoreDepthValues=u.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(a),l=null,s=await i.requestReferenceSpace(o),U.setContext(i),U.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function I(j){for(let z=0;z<j.removed.length;z++){let Y=j.removed[z],J=y.indexOf(Y);J>=0&&(y[J]=null,v[J].disconnect(Y))}for(let z=0;z<j.added.length;z++){let Y=j.added[z],J=y.indexOf(Y);if(J===-1){for(let X=0;X<v.length;X++)if(X>=y.length){y.push(Y),J=X;break}else if(y[X]===null){y[X]=Y,J=X;break}if(J===-1)break}let K=v[J];K&&K.connect(Y)}}let R=new G,H=new G;function Z(j,z,Y){R.setFromMatrixPosition(z.matrixWorld),H.setFromMatrixPosition(Y.matrixWorld);let J=R.distanceTo(H),K=z.projectionMatrix.elements,X=Y.projectionMatrix.elements,te=K[14]/(K[10]-1),re=K[14]/(K[10]+1),se=(K[9]+1)/K[5],ce=(K[9]-1)/K[5],ge=(K[8]-1)/K[0],oe=(X[8]+1)/X[0],ae=te*ge,ye=te*oe,we=J/(-ge+oe),Se=we*-ge;z.matrixWorld.decompose(j.position,j.quaternion,j.scale),j.translateX(Se),j.translateZ(we),j.matrixWorld.compose(j.position,j.quaternion,j.scale),j.matrixWorldInverse.copy(j.matrixWorld).invert();let Pe=te+we,Te=re+we,Ie=ae-Se,xe=ye+(J-Se),Re=se*re/Te*Pe,N=ce*re/Te*Pe;j.projectionMatrix.makePerspective(Ie,xe,Re,N,Pe,Te)}function ee(j,z){z===null?j.matrixWorld.copy(j.matrix):j.matrixWorld.multiplyMatrices(z.matrixWorld,j.matrix),j.matrixWorldInverse.copy(j.matrixWorld).invert()}this.updateCamera=function(j){if(i===null)return;M.near=A.near=S.near=j.near,M.far=A.far=S.far=j.far,(C!==M.near||T!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),C=M.near,T=M.far);let z=j.parent,Y=M.cameras;ee(M,z);for(let K=0;K<Y.length;K++)ee(Y[K],z);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),j.matrix.copy(M.matrix),j.matrix.decompose(j.position,j.quaternion,j.scale);let J=j.children;for(let K=0,X=J.length;K<X;K++)J[K].updateMatrixWorld(!0);Y.length===2?Z(M,S,A):M.projectionMatrix.copy(S.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){if(!(u===null&&d===null))return a},this.setFoveation=function(j){a=j,u!==null&&(u.fixedFoveation=j),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=j)},this.getPlanes=function(){return x};let F=null;function V(j,z){if(c=z.getViewerPose(l||s),f=z,c!==null){let Y=c.views;d!==null&&(t.setRenderTargetFramebuffer(g,d.framebuffer),t.setRenderTarget(g));let J=!1;Y.length!==M.cameras.length&&(M.cameras.length=0,J=!0);for(let K=0;K<Y.length;K++){let X=Y[K],te=null;if(d!==null)te=d.getViewport(X);else{let se=h.getViewSubImage(u,X);te=se.viewport,K===0&&(t.setRenderTargetTextures(g,se.colorTexture,u.ignoreDepthValues?void 0:se.depthStencilTexture),t.setRenderTarget(g))}let re=E[K];re===void 0&&(re=new So,re.layers.enable(K),re.viewport=new Sn,E[K]=re),re.matrix.fromArray(X.transform.matrix),re.projectionMatrix.fromArray(X.projectionMatrix),re.viewport.set(te.x,te.y,te.width,te.height),K===0&&M.matrix.copy(re.matrix),J===!0&&M.cameras.push(re)}}for(let Y=0;Y<v.length;Y++){let J=y[Y],K=v[Y];J!==null&&K!==void 0&&K.update(J,z,l||s)}if(F&&F(j,z),z.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:z.detectedPlanes});let Y=null;for(let J of x)z.detectedPlanes.has(J)||(Y===null&&(Y=[]),Y.push(J));if(Y!==null)for(let J of Y)x.delete(J),b.delete(J),n.dispatchEvent({type:"planeremoved",data:J});for(let J of z.detectedPlanes)if(!x.has(J))x.add(J),b.set(J,z.lastChangedTime),n.dispatchEvent({type:"planeadded",data:J});else{let K=b.get(J);J.lastChangedTime>K&&(b.set(J,J.lastChangedTime),n.dispatchEvent({type:"planechanged",data:J}))}}f=null}let U=new Hxe;U.setAnimationLoop(V),this.setAnimationLoop=function(j){F=j},this.dispose=function(){}}};function $wt(t,e){function n(m,g){g.color.getRGB(m.fogColor.value,Gxe(t)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function i(m,g,v,y,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(m,g):g.isMeshToonMaterial?(r(m,g),h(m,g)):g.isMeshPhongMaterial?(r(m,g),c(m,g)):g.isMeshStandardMaterial?(r(m,g),u(m,g),g.isMeshPhysicalMaterial&&d(m,g,x)):g.isMeshMatcapMaterial?(r(m,g),f(m,g)):g.isMeshDepthMaterial?r(m,g):g.isMeshDistanceMaterial?(r(m,g),p(m,g)):g.isMeshNormalMaterial?r(m,g):g.isLineBasicMaterial?(s(m,g),g.isLineDashedMaterial&&o(m,g)):g.isPointsMaterial?a(m,g,v,y):g.isSpriteMaterial?l(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function r(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===Us&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===Us&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v=e.get(g).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;let b=t.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*b}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix));let x;g.aoMap?x=g.aoMap:g.lightMap&&(x=g.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uv2Transform.value.copy(x.matrix))}function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}function o(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function a(m,g,v,y){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=y*.5,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let x;g.map?x=g.map:g.alphaMap&&(x=g.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix))}function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))}function c(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function h(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function u(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function d(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Us&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}function f(m,g){g.matcap&&(m.matcap.value=g.matcap)}function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function qwt(t,e,n,i){let r={},s={},o=[],a=n.isWebGL2?t.getParameter(35375):0;function l(y,x){let b=x.program;i.uniformBlockBinding(y,b)}function c(y,x){let b=r[y.id];b===void 0&&(p(y),b=h(y),r[y.id]=b,y.addEventListener("dispose",g));let S=x.program;i.updateUBOMapping(y,S);let A=e.render.frame;s[y.id]!==A&&(d(y),s[y.id]=A)}function h(y){let x=u();y.__bindingPointIndex=x;let b=t.createBuffer(),S=y.__size,A=y.usage;return t.bindBuffer(35345,b),t.bufferData(35345,S,A),t.bindBuffer(35345,null),t.bindBufferBase(35345,x,b),b}function u(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){let x=r[y.id],b=y.uniforms,S=y.__cache;t.bindBuffer(35345,x);for(let A=0,E=b.length;A<E;A++){let M=b[A];if(f(M,A,S)===!0){let C=M.__offset,T=Array.isArray(M.value)?M.value:[M.value],D=0;for(let L=0;L<T.length;L++){let I=T[L],R=m(I);typeof I=="number"?(M.__data[0]=I,t.bufferSubData(35345,C+D,M.__data)):I.isMatrix3?(M.__data[0]=I.elements[0],M.__data[1]=I.elements[1],M.__data[2]=I.elements[2],M.__data[3]=I.elements[0],M.__data[4]=I.elements[3],M.__data[5]=I.elements[4],M.__data[6]=I.elements[5],M.__data[7]=I.elements[0],M.__data[8]=I.elements[6],M.__data[9]=I.elements[7],M.__data[10]=I.elements[8],M.__data[11]=I.elements[0]):(I.toArray(M.__data,D),D+=R.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,C,M.__data)}}t.bindBuffer(35345,null)}function f(y,x,b){let S=y.value;if(b[x]===void 0){if(typeof S=="number")b[x]=S;else{let A=Array.isArray(S)?S:[S],E=[];for(let M=0;M<A.length;M++)E.push(A[M].clone());b[x]=E}return!0}else if(typeof S=="number"){if(b[x]!==S)return b[x]=S,!0}else{let A=Array.isArray(b[x])?b[x]:[b[x]],E=Array.isArray(S)?S:[S];for(let M=0;M<A.length;M++){let C=A[M];if(C.equals(E[M])===!1)return C.copy(E[M]),!0}}return!1}function p(y){let x=y.uniforms,b=0,S=16,A=0;for(let E=0,M=x.length;E<M;E++){let C=x[E],T={boundary:0,storage:0},D=Array.isArray(C.value)?C.value:[C.value];for(let L=0,I=D.length;L<I;L++){let R=D[L],H=m(R);T.boundary+=H.boundary,T.storage+=H.storage}if(C.__data=new Float32Array(T.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=b,E>0){A=b%S;let L=S-A;A!==0&&L-T.boundary<0&&(b+=S-A,C.__offset=b)}b+=T.storage}return A=b%S,A>0&&(b+=S-A),y.__size=b,y.__cache={},this}function m(y){let x={boundary:0,storage:0};return typeof y=="number"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function g(y){let x=y.target;x.removeEventListener("dispose",g);let b=o.indexOf(x.__bindingPointIndex);o.splice(b,1),t.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function v(){for(let y in r)t.deleteBuffer(r[y]);o=[],r={},s={}}return{bind:l,update:c,dispose:v}}function Xwt(){let t=TL("canvas");return t.style.display="block",t}function Xxe(t={}){this.isWebGLRenderer=!0;let e=t.canvas!==void 0?t.canvas:Xwt(),n=t.context!==void 0?t.context:null,i=t.depth!==void 0?t.depth:!0,r=t.stencil!==void 0?t.stencil:!0,s=t.antialias!==void 0?t.antialias:!1,o=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,a=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,l=t.powerPreference!==void 0?t.powerPreference:"default",c=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1,h;n!==null?h=n.getContextAttributes().alpha:h=t.alpha!==void 0?t.alpha:!1;let u=null,d=null,f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=id,this.physicallyCorrectLights=!1,this.toneMapping=Tf,this.toneMappingExposure=1;let m=this,g=!1,v=0,y=0,x=null,b=-1,S=null,A=new Sn,E=new Sn,M=null,C=e.width,T=e.height,D=1,L=null,I=null,R=new Sn(0,0,C,T),H=new Sn(0,0,C,T),Z=!1,ee=new w$,F=!1,V=!1,U=null,j=new dt,z=new Ae,Y=new G,J={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function K(){return x===null?D:1}let X=n;function te(Q,pe){for(let he=0;he<Q.length;he++){let de=Q[he],Le=e.getContext(de,pe);if(Le!==null)return Le}return null}try{let Q={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${$w}`),e.addEventListener("webglcontextlost",Je,!1),e.addEventListener("webglcontextrestored",Qe,!1),e.addEventListener("webglcontextcreationerror",xt,!1),X===null){let pe=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&pe.shift(),X=te(pe,Q),X===null)throw te(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}X.getShaderPrecisionFormat===void 0&&(X.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Q){throw console.error("THREE.WebGLRenderer: "+Q.message),Q}let re,se,ce,ge,oe,ae,ye,we,Se,Pe,Te,Ie,xe,Re,N,B,le,_e,Ee,Fe,Ze,Ue,be,Xe;function Ge(){re=new abt(X),se=new tbt(X,re,t),re.init(se),Ue=new Hwt(X,re,se),ce=new Uwt(X,re,se),ge=new ubt,oe=new Cwt,ae=new Gwt(X,re,ce,oe,se,Ue,ge),ye=new ibt(m),we=new obt(m),Se=new xyt(X,se),be=new Qxt(X,re,Se,se),Pe=new lbt(X,Se,ge,be),Te=new pbt(X,Pe,Se,ge),Ee=new fbt(X,se,ae),B=new nbt(oe),Ie=new Ewt(m,ye,we,re,se,be,B),xe=new $wt(m,oe),Re=new Pwt,N=new Bwt(re,se),_e=new Zxt(m,ye,we,ce,Te,h,o),le=new zwt(m,Te,se),Xe=new qwt(X,ge,se,ce),Fe=new ebt(X,re,ge,se),Ze=new cbt(X,re,ge,se),ge.programs=Ie.programs,m.capabilities=se,m.extensions=re,m.properties=oe,m.renderLists=Re,m.shadowMap=le,m.state=ce,m.info=ge}Ge();let We=new Wwt(m,X);this.xr=We,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){let Q=re.get("WEBGL_lose_context");Q&&Q.loseContext()},this.forceContextRestore=function(){let Q=re.get("WEBGL_lose_context");Q&&Q.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(Q){Q!==void 0&&(D=Q,this.setSize(C,T,!1))},this.getSize=function(Q){return Q.set(C,T)},this.setSize=function(Q,pe,he){if(We.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=Q,T=pe,e.width=Math.floor(Q*D),e.height=Math.floor(pe*D),he!==!1&&(e.style.width=Q+"px",e.style.height=pe+"px"),this.setViewport(0,0,Q,pe)},this.getDrawingBufferSize=function(Q){return Q.set(C*D,T*D).floor()},this.setDrawingBufferSize=function(Q,pe,he){C=Q,T=pe,D=he,e.width=Math.floor(Q*he),e.height=Math.floor(pe*he),this.setViewport(0,0,Q,pe)},this.getCurrentViewport=function(Q){return Q.copy(A)},this.getViewport=function(Q){return Q.copy(R)},this.setViewport=function(Q,pe,he,de){Q.isVector4?R.set(Q.x,Q.y,Q.z,Q.w):R.set(Q,pe,he,de),ce.viewport(A.copy(R).multiplyScalar(D).floor())},this.getScissor=function(Q){return Q.copy(H)},this.setScissor=function(Q,pe,he,de){Q.isVector4?H.set(Q.x,Q.y,Q.z,Q.w):H.set(Q,pe,he,de),ce.scissor(E.copy(H).multiplyScalar(D).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(Q){ce.setScissorTest(Z=Q)},this.setOpaqueSort=function(Q){L=Q},this.setTransparentSort=function(Q){I=Q},this.getClearColor=function(Q){return Q.copy(_e.getClearColor())},this.setClearColor=function(){_e.setClearColor.apply(_e,arguments)},this.getClearAlpha=function(){return _e.getClearAlpha()},this.setClearAlpha=function(){_e.setClearAlpha.apply(_e,arguments)},this.clear=function(Q=!0,pe=!0,he=!0){let de=0;Q&&(de|=16384),pe&&(de|=256),he&&(de|=1024),X.clear(de)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Je,!1),e.removeEventListener("webglcontextrestored",Qe,!1),e.removeEventListener("webglcontextcreationerror",xt,!1),Re.dispose(),N.dispose(),oe.dispose(),ye.dispose(),we.dispose(),Te.dispose(),be.dispose(),Xe.dispose(),Ie.dispose(),We.dispose(),We.removeEventListener("sessionstart",Ne),We.removeEventListener("sessionend",$e),U&&(U.dispose(),U=null),Ct.stop()};function Je(Q){Q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Qe(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let Q=ge.autoReset,pe=le.enabled,he=le.autoUpdate,de=le.needsUpdate,Le=le.type;Ge(),ge.autoReset=Q,le.enabled=pe,le.autoUpdate=he,le.needsUpdate=de,le.type=Le}function xt(Q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Q.statusMessage)}function Vt(Q){let pe=Q.target;pe.removeEventListener("dispose",Vt),gn(pe)}function gn(Q){ie(Q),oe.remove(Q)}function ie(Q){let pe=oe.get(Q).programs;pe!==void 0&&(pe.forEach(function(he){Ie.releaseProgram(he)}),Q.isShaderMaterial&&Ie.releaseShaderCache(Q))}this.renderBufferDirect=function(Q,pe,he,de,Le,tt){pe===null&&(pe=J);let ht=Le.isMesh&&Le.matrixWorld.determinant()<0,pt=h_(Q,pe,he,de,Le);ce.setMaterial(de,ht);let bt=he.index,Tt=1;de.wireframe===!0&&(bt=Pe.getWireframeAttribute(he),Tt=2);let St=he.drawRange,zt=he.attributes.position,qn=St.start*Tt,Hi=(St.start+St.count)*Tt;tt!==null&&(qn=Math.max(qn,tt.start*Tt),Hi=Math.min(Hi,(tt.start+tt.count)*Tt)),bt!==null?(qn=Math.max(qn,0),Hi=Math.min(Hi,bt.count)):zt!=null&&(qn=Math.max(qn,0),Hi=Math.min(Hi,zt.count));let us=Hi-qn;if(us<0||us===1/0)return;be.setup(Le,de,pt,he,bt);let ni,It=Fe;if(bt!==null&&(ni=Se.get(bt),It=Ze,It.setIndex(ni)),Le.isMesh)de.wireframe===!0?(ce.setLineWidth(de.wireframeLinewidth*K()),It.setMode(1)):It.setMode(4);else if(Le.isLine){let fn=de.linewidth;fn===void 0&&(fn=1),ce.setLineWidth(fn*K()),Le.isLineSegments?It.setMode(1):Le.isLineLoop?It.setMode(2):It.setMode(3)}else Le.isPoints?It.setMode(0):Le.isSprite&&It.setMode(4);if(Le.isInstancedMesh)It.renderInstances(qn,us,Le.count);else if(he.isInstancedBufferGeometry){let fn=he._maxInstanceCount!==void 0?he._maxInstanceCount:1/0,Di=Math.min(he.instanceCount,fn);It.renderInstances(qn,us,Di)}else It.render(qn,us)},this.compile=function(Q,pe){function he(de,Le,tt){de.transparent===!0&&de.side===ll&&de.forceSinglePass===!1?(de.side=Us,de.needsUpdate=!0,Gi(de,Le,tt),de.side=zu,de.needsUpdate=!0,Gi(de,Le,tt),de.side=ll):Gi(de,Le,tt)}d=N.get(Q),d.init(),p.push(d),Q.traverseVisible(function(de){de.isLight&&de.layers.test(pe.layers)&&(d.pushLight(de),de.castShadow&&d.pushShadow(de))}),d.setupLights(m.physicallyCorrectLights),Q.traverse(function(de){let Le=de.material;if(Le)if(Array.isArray(Le))for(let tt=0;tt<Le.length;tt++){let ht=Le[tt];he(ht,Q,de)}else he(Le,Q,de)}),p.pop(),d=null};let ve=null;function Ce(Q){ve&&ve(Q)}function Ne(){Ct.stop()}function $e(){Ct.start()}let Ct=new Hxe;Ct.setAnimationLoop(Ce),typeof self<"u"&&Ct.setContext(self),this.setAnimationLoop=function(Q){ve=Q,We.setAnimationLoop(Q),Q===null?Ct.stop():Ct.start()},We.addEventListener("sessionstart",Ne),We.addEventListener("sessionend",$e),this.render=function(Q,pe){if(pe!==void 0&&pe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),pe.parent===null&&pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),We.enabled===!0&&We.isPresenting===!0&&(We.cameraAutoUpdate===!0&&We.updateCamera(pe),pe=We.getCamera()),Q.isScene===!0&&Q.onBeforeRender(m,Q,pe,x),d=N.get(Q,p.length),d.init(),p.push(d),j.multiplyMatrices(pe.projectionMatrix,pe.matrixWorldInverse),ee.setFromProjectionMatrix(j),V=this.localClippingEnabled,F=B.init(this.clippingPlanes,V),u=Re.get(Q,f.length),u.init(),f.push(u),rn(Q,pe,0,m.sortObjects),u.finish(),m.sortObjects===!0&&u.sort(L,I),F===!0&&B.beginShadows();let he=d.state.shadowsArray;if(le.render(he,Q,pe),F===!0&&B.endShadows(),this.info.autoReset===!0&&this.info.reset(),_e.render(u,Q),d.setupLights(m.physicallyCorrectLights),pe.isArrayCamera){let de=pe.cameras;for(let Le=0,tt=de.length;Le<tt;Le++){let ht=de[Le];Cn(u,Q,ht,ht.viewport)}}else Cn(u,Q,pe);x!==null&&(ae.updateMultisampleRenderTarget(x),ae.updateRenderTargetMipmap(x)),Q.isScene===!0&&Q.onAfterRender(m,Q,pe),be.resetDefaultState(),b=-1,S=null,p.pop(),p.length>0?d=p[p.length-1]:d=null,f.pop(),f.length>0?u=f[f.length-1]:u=null};function rn(Q,pe,he,de){if(Q.visible===!1)return;if(Q.layers.test(pe.layers)){if(Q.isGroup)he=Q.renderOrder;else if(Q.isLOD)Q.autoUpdate===!0&&Q.update(pe);else if(Q.isLight)d.pushLight(Q),Q.castShadow&&d.pushShadow(Q);else if(Q.isSprite){if(!Q.frustumCulled||ee.intersectsSprite(Q)){de&&Y.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(j);let tt=Te.update(Q),ht=Q.material;ht.visible&&u.push(Q,tt,ht,he,Y.z,null)}}else if((Q.isMesh||Q.isLine||Q.isPoints)&&(Q.isSkinnedMesh&&Q.skeleton.frame!==ge.render.frame&&(Q.skeleton.update(),Q.skeleton.frame=ge.render.frame),!Q.frustumCulled||ee.intersectsObject(Q))){de&&Y.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(j);let tt=Te.update(Q),ht=Q.material;if(Array.isArray(ht)){let pt=tt.groups;for(let bt=0,Tt=pt.length;bt<Tt;bt++){let St=pt[bt],zt=ht[St.materialIndex];zt&&zt.visible&&u.push(Q,tt,zt,he,Y.z,St)}}else ht.visible&&u.push(Q,tt,ht,he,Y.z,null)}}let Le=Q.children;for(let tt=0,ht=Le.length;tt<ht;tt++)rn(Le[tt],pe,he,de)}function Cn(Q,pe,he,de){let Le=Q.opaque,tt=Q.transmissive,ht=Q.transparent;d.setupLightsView(he),F===!0&&B.setGlobalState(m.clippingPlanes,he),tt.length>0&&Ir(Le,pe,he),de&&ce.viewport(A.copy(de)),Le.length>0&&en(Le,pe,he),tt.length>0&&en(tt,pe,he),ht.length>0&&en(ht,pe,he),ce.buffers.depth.setTest(!0),ce.buffers.depth.setMask(!0),ce.buffers.color.setMask(!0),ce.setPolygonOffset(!1)}function Ir(Q,pe,he){let de=se.isWebGL2;U===null&&(U=new _s(1,1,{generateMipmaps:!0,type:re.has("EXT_color_buffer_half_float")?R2:Lo,minFilter:rw,samples:de&&s===!0?4:0})),m.getDrawingBufferSize(z),de?U.setSize(z.x,z.y):U.setSize(CL(z.x),CL(z.y));let Le=m.getRenderTarget();m.setRenderTarget(U),m.clear();let tt=m.toneMapping;m.toneMapping=Tf,en(Q,pe,he),m.toneMapping=tt,ae.updateMultisampleRenderTarget(U),ae.updateRenderTargetMipmap(U),m.setRenderTarget(Le)}function en(Q,pe,he){let de=pe.isScene===!0?pe.overrideMaterial:null;for(let Le=0,tt=Q.length;Le<tt;Le++){let ht=Q[Le],pt=ht.object,bt=ht.geometry,Tt=de===null?ht.material:de,St=ht.group;pt.layers.test(he.layers)&&Ui(pt,pe,he,bt,Tt,St)}}function Ui(Q,pe,he,de,Le,tt){Q.onBeforeRender(m,pe,he,de,Le,tt),Q.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,Q.matrixWorld),Q.normalMatrix.getNormalMatrix(Q.modelViewMatrix),Le.onBeforeRender(m,pe,he,de,Q,tt),Le.transparent===!0&&Le.side===ll&&Le.forceSinglePass===!1?(Le.side=Us,Le.needsUpdate=!0,m.renderBufferDirect(he,pe,de,Le,Q,tt),Le.side=zu,Le.needsUpdate=!0,m.renderBufferDirect(he,pe,de,Le,Q,tt),Le.side=ll):m.renderBufferDirect(he,pe,de,Le,Q,tt),Q.onAfterRender(m,pe,he,de,Le,tt)}function Gi(Q,pe,he){pe.isScene!==!0&&(pe=J);let de=oe.get(Q),Le=d.state.lights,tt=d.state.shadowsArray,ht=Le.state.version,pt=Ie.getParameters(Q,Le.state,tt,pe,he),bt=Ie.getProgramCacheKey(pt),Tt=de.programs;de.environment=Q.isMeshStandardMaterial?pe.environment:null,de.fog=pe.fog,de.envMap=(Q.isMeshStandardMaterial?we:ye).get(Q.envMap||de.environment),Tt===void 0&&(Q.addEventListener("dispose",Vt),Tt=new Map,de.programs=Tt);let St=Tt.get(bt);if(St!==void 0){if(de.currentProgram===St&&de.lightsStateVersion===ht)return hy(Q,pt),St}else pt.uniforms=Ie.getUniforms(Q),Q.onBuild(he,pt,m),Q.onBeforeCompile(pt,m),St=Ie.acquireProgram(pt,bt),Tt.set(bt,St),de.uniforms=pt.uniforms;let zt=de.uniforms;(!Q.isShaderMaterial&&!Q.isRawShaderMaterial||Q.clipping===!0)&&(zt.clippingPlanes=B.uniform),hy(Q,pt),de.needsLights=fe(Q),de.lightsStateVersion=ht,de.needsLights&&(zt.ambientLightColor.value=Le.state.ambient,zt.lightProbe.value=Le.state.probe,zt.directionalLights.value=Le.state.directional,zt.directionalLightShadows.value=Le.state.directionalShadow,zt.spotLights.value=Le.state.spot,zt.spotLightShadows.value=Le.state.spotShadow,zt.rectAreaLights.value=Le.state.rectArea,zt.ltc_1.value=Le.state.rectAreaLTC1,zt.ltc_2.value=Le.state.rectAreaLTC2,zt.pointLights.value=Le.state.point,zt.pointLightShadows.value=Le.state.pointShadow,zt.hemisphereLights.value=Le.state.hemi,zt.directionalShadowMap.value=Le.state.directionalShadowMap,zt.directionalShadowMatrix.value=Le.state.directionalShadowMatrix,zt.spotShadowMap.value=Le.state.spotShadowMap,zt.spotLightMatrix.value=Le.state.spotLightMatrix,zt.spotLightMap.value=Le.state.spotLightMap,zt.pointShadowMap.value=Le.state.pointShadowMap,zt.pointShadowMatrix.value=Le.state.pointShadowMatrix);let qn=St.getUniforms(),Hi=jD.seqWithValue(qn.seq,zt);return de.currentProgram=St,de.uniformsList=Hi,St}function hy(Q,pe){let he=oe.get(Q);he.outputEncoding=pe.outputEncoding,he.instancing=pe.instancing,he.skinning=pe.skinning,he.morphTargets=pe.morphTargets,he.morphNormals=pe.morphNormals,he.morphColors=pe.morphColors,he.morphTargetsCount=pe.morphTargetsCount,he.numClippingPlanes=pe.numClippingPlanes,he.numIntersection=pe.numClipIntersection,he.vertexAlphas=pe.vertexAlphas,he.vertexTangents=pe.vertexTangents,he.toneMapping=pe.toneMapping}function h_(Q,pe,he,de,Le){pe.isScene!==!0&&(pe=J),ae.resetTextureUnits();let tt=pe.fog,ht=de.isMeshStandardMaterial?pe.environment:null,pt=x===null?m.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:id,bt=(de.isMeshStandardMaterial?we:ye).get(de.envMap||ht),Tt=de.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,St=!!de.normalMap&&!!he.attributes.tangent,zt=!!he.morphAttributes.position,qn=!!he.morphAttributes.normal,Hi=!!he.morphAttributes.color,us=de.toneMapped?m.toneMapping:Tf,ni=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,It=ni!==void 0?ni.length:0,fn=oe.get(de),Di=d.state.lights;if(F===!0&&(V===!0||Q!==S)){let Gn=Q===S&&de.id===b;B.setState(de,Q,Gn)}let ko=!1;de.version===fn.__version?(fn.needsLights&&fn.lightsStateVersion!==Di.state.version||fn.outputEncoding!==pt||Le.isInstancedMesh&&fn.instancing===!1||!Le.isInstancedMesh&&fn.instancing===!0||Le.isSkinnedMesh&&fn.skinning===!1||!Le.isSkinnedMesh&&fn.skinning===!0||fn.envMap!==bt||de.fog===!0&&fn.fog!==tt||fn.numClippingPlanes!==void 0&&(fn.numClippingPlanes!==B.numPlanes||fn.numIntersection!==B.numIntersection)||fn.vertexAlphas!==Tt||fn.vertexTangents!==St||fn.morphTargets!==zt||fn.morphNormals!==qn||fn.morphColors!==Hi||fn.toneMapping!==us||se.isWebGL2===!0&&fn.morphTargetsCount!==It)&&(ko=!0):(ko=!0,fn.__version=de.version);let Ll=fn.currentProgram;ko===!0&&(Ll=Gi(de,pe,Le));let Rl=!1,lo=!1,gi=!1,tn=Ll.getUniforms(),Pn=fn.uniforms;if(ce.useProgram(Ll.program)&&(Rl=!0,lo=!0,gi=!0),de.id!==b&&(b=de.id,lo=!0),Rl||S!==Q){if(tn.setValue(X,"projectionMatrix",Q.projectionMatrix),se.logarithmicDepthBuffer&&tn.setValue(X,"logDepthBufFC",2/(Math.log(Q.far+1)/Math.LN2)),S!==Q&&(S=Q,lo=!0,gi=!0),de.isShaderMaterial||de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshStandardMaterial||de.envMap){let Gn=tn.map.cameraPosition;Gn!==void 0&&Gn.setValue(X,Y.setFromMatrixPosition(Q.matrixWorld))}(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial)&&tn.setValue(X,"isOrthographic",Q.isOrthographicCamera===!0),(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial||de.isShadowMaterial||Le.isSkinnedMesh)&&tn.setValue(X,"viewMatrix",Q.matrixWorldInverse)}if(Le.isSkinnedMesh){tn.setOptional(X,Le,"bindMatrix"),tn.setOptional(X,Le,"bindMatrixInverse");let Gn=Le.skeleton;Gn&&(se.floatVertexTextures?(Gn.boneTexture===null&&Gn.computeBoneTexture(),tn.setValue(X,"boneTexture",Gn.boneTexture,ae),tn.setValue(X,"boneTextureSize",Gn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let Oi=he.morphAttributes;if((Oi.position!==void 0||Oi.normal!==void 0||Oi.color!==void 0&&se.isWebGL2===!0)&&Ee.update(Le,he,de,Ll),(lo||fn.receiveShadow!==Le.receiveShadow)&&(fn.receiveShadow=Le.receiveShadow,tn.setValue(X,"receiveShadow",Le.receiveShadow)),de.isMeshGouraudMaterial&&de.envMap!==null&&(Pn.envMap.value=bt,Pn.flipEnvMap.value=bt.isCubeTexture&&bt.isRenderTargetTexture===!1?-1:1),lo&&(tn.setValue(X,"toneMappingExposure",m.toneMappingExposure),fn.needsLights&&dy(Pn,gi),tt&&de.fog===!0&&xe.refreshFogUniforms(Pn,tt),xe.refreshMaterialUniforms(Pn,de,D,T,U),jD.upload(X,fn.uniformsList,Pn,ae)),de.isShaderMaterial&&de.uniformsNeedUpdate===!0&&(jD.upload(X,fn.uniformsList,Pn,ae),de.uniformsNeedUpdate=!1),de.isSpriteMaterial&&tn.setValue(X,"center",Le.center),tn.setValue(X,"modelViewMatrix",Le.modelViewMatrix),tn.setValue(X,"normalMatrix",Le.normalMatrix),tn.setValue(X,"modelMatrix",Le.matrixWorld),de.isShaderMaterial||de.isRawShaderMaterial){let Gn=de.uniformsGroups;for(let Kr=0,Il=Gn.length;Kr<Il;Kr++)if(se.isWebGL2){let _d=Gn[Kr];Xe.update(_d,Ll),Xe.bind(_d,Ll)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ll}function dy(Q,pe){Q.ambientLightColor.needsUpdate=pe,Q.lightProbe.needsUpdate=pe,Q.directionalLights.needsUpdate=pe,Q.directionalLightShadows.needsUpdate=pe,Q.pointLights.needsUpdate=pe,Q.pointLightShadows.needsUpdate=pe,Q.spotLights.needsUpdate=pe,Q.spotLightShadows.needsUpdate=pe,Q.rectAreaLights.needsUpdate=pe,Q.hemisphereLights.needsUpdate=pe}function fe(Q){return Q.isMeshLambertMaterial||Q.isMeshToonMaterial||Q.isMeshPhongMaterial||Q.isMeshStandardMaterial||Q.isShadowMaterial||Q.isShaderMaterial&&Q.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(Q,pe,he){oe.get(Q.texture).__webglTexture=pe,oe.get(Q.depthTexture).__webglTexture=he;let de=oe.get(Q);de.__hasExternalTextures=!0,de.__hasExternalTextures&&(de.__autoAllocateDepthBuffer=he===void 0,de.__autoAllocateDepthBuffer||re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),de.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Q,pe){let he=oe.get(Q);he.__webglFramebuffer=pe,he.__useDefaultFramebuffer=pe===void 0},this.setRenderTarget=function(Q,pe=0,he=0){x=Q,v=pe,y=he;let de=!0,Le=null,tt=!1,ht=!1;if(Q){let pt=oe.get(Q);pt.__useDefaultFramebuffer!==void 0?(ce.bindFramebuffer(36160,null),de=!1):pt.__webglFramebuffer===void 0?ae.setupRenderTarget(Q):pt.__hasExternalTextures&&ae.rebindTextures(Q,oe.get(Q.texture).__webglTexture,oe.get(Q.depthTexture).__webglTexture);let bt=Q.texture;(bt.isData3DTexture||bt.isDataArrayTexture||bt.isCompressedArrayTexture)&&(ht=!0);let Tt=oe.get(Q).__webglFramebuffer;Q.isWebGLCubeRenderTarget?(Le=Tt[pe],tt=!0):se.isWebGL2&&Q.samples>0&&ae.useMultisampledRTT(Q)===!1?Le=oe.get(Q).__webglMultisampledFramebuffer:Le=Tt,A.copy(Q.viewport),E.copy(Q.scissor),M=Q.scissorTest}else A.copy(R).multiplyScalar(D).floor(),E.copy(H).multiplyScalar(D).floor(),M=Z;if(ce.bindFramebuffer(36160,Le)&&se.drawBuffers&&de&&ce.drawBuffers(Q,Le),ce.viewport(A),ce.scissor(E),ce.setScissorTest(M),tt){let pt=oe.get(Q.texture);X.framebufferTexture2D(36160,36064,34069+pe,pt.__webglTexture,he)}else if(ht){let pt=oe.get(Q.texture),bt=pe||0;X.framebufferTextureLayer(36160,36064,pt.__webglTexture,he||0,bt)}b=-1},this.readRenderTargetPixels=function(Q,pe,he,de,Le,tt,ht){if(!(Q&&Q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pt=oe.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&ht!==void 0&&(pt=pt[ht]),pt){ce.bindFramebuffer(36160,pt);try{let bt=Q.texture,Tt=bt.format,St=bt.type;if(Tt!==gu&&Ue.convert(Tt)!==X.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let zt=St===R2&&(re.has("EXT_color_buffer_half_float")||se.isWebGL2&&re.has("EXT_color_buffer_float"));if(St!==Lo&&Ue.convert(St)!==X.getParameter(35738)&&!(St===hm&&(se.isWebGL2||re.has("OES_texture_float")||re.has("WEBGL_color_buffer_float")))&&!zt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pe>=0&&pe<=Q.width-de&&he>=0&&he<=Q.height-Le&&X.readPixels(pe,he,de,Le,Ue.convert(Tt),Ue.convert(St),tt)}finally{let bt=x!==null?oe.get(x).__webglFramebuffer:null;ce.bindFramebuffer(36160,bt)}}},this.copyFramebufferToTexture=function(Q,pe,he=0){let de=Math.pow(2,-he),Le=Math.floor(pe.image.width*de),tt=Math.floor(pe.image.height*de);ae.setTexture2D(pe,0),X.copyTexSubImage2D(3553,he,0,0,Q.x,Q.y,Le,tt),ce.unbindTexture()},this.copyTextureToTexture=function(Q,pe,he,de=0){let Le=pe.image.width,tt=pe.image.height,ht=Ue.convert(he.format),pt=Ue.convert(he.type);ae.setTexture2D(he,0),X.pixelStorei(37440,he.flipY),X.pixelStorei(37441,he.premultiplyAlpha),X.pixelStorei(3317,he.unpackAlignment),pe.isDataTexture?X.texSubImage2D(3553,de,Q.x,Q.y,Le,tt,ht,pt,pe.image.data):pe.isCompressedTexture?X.compressedTexSubImage2D(3553,de,Q.x,Q.y,pe.mipmaps[0].width,pe.mipmaps[0].height,ht,pe.mipmaps[0].data):X.texSubImage2D(3553,de,Q.x,Q.y,ht,pt,pe.image),de===0&&he.generateMipmaps&&X.generateMipmap(3553),ce.unbindTexture()},this.copyTextureToTexture3D=function(Q,pe,he,de,Le=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let tt=Q.max.x-Q.min.x+1,ht=Q.max.y-Q.min.y+1,pt=Q.max.z-Q.min.z+1,bt=Ue.convert(de.format),Tt=Ue.convert(de.type),St;if(de.isData3DTexture)ae.setTexture3D(de,0),St=32879;else if(de.isDataArrayTexture)ae.setTexture2DArray(de,0),St=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}X.pixelStorei(37440,de.flipY),X.pixelStorei(37441,de.premultiplyAlpha),X.pixelStorei(3317,de.unpackAlignment);let zt=X.getParameter(3314),qn=X.getParameter(32878),Hi=X.getParameter(3316),us=X.getParameter(3315),ni=X.getParameter(32877),It=he.isCompressedTexture?he.mipmaps[0]:he.image;X.pixelStorei(3314,It.width),X.pixelStorei(32878,It.height),X.pixelStorei(3316,Q.min.x),X.pixelStorei(3315,Q.min.y),X.pixelStorei(32877,Q.min.z),he.isDataTexture||he.isData3DTexture?X.texSubImage3D(St,Le,pe.x,pe.y,pe.z,tt,ht,pt,bt,Tt,It.data):he.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),X.compressedTexSubImage3D(St,Le,pe.x,pe.y,pe.z,tt,ht,pt,bt,It.data)):X.texSubImage3D(St,Le,pe.x,pe.y,pe.z,tt,ht,pt,bt,Tt,It),X.pixelStorei(3314,zt),X.pixelStorei(32878,qn),X.pixelStorei(3316,Hi),X.pixelStorei(3315,us),X.pixelStorei(32877,ni),Le===0&&de.generateMipmaps&&X.generateMipmap(St),ce.unbindTexture()},this.initTexture=function(Q){Q.isCubeTexture?ae.setTextureCube(Q,0):Q.isData3DTexture?ae.setTexture3D(Q,0):Q.isDataArrayTexture||Q.isCompressedArrayTexture?ae.setTexture2DArray(Q,0):ae.setTexture2D(Q,0),ce.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,ce.reset(),be.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var Ywt=class extends Xxe{};Ywt.prototype.isWebGL1Renderer=!0;var Yxe=class{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new Zt(t),this.near=e,this.far=n}clone(){return new Yxe(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},tv=class extends wi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}},Kwt=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=kH,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Yh()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Yh()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Yh()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Ho=new G,UH=class{constructor(t,e,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Ho.fromBufferAttribute(this,e),Ho.applyMatrix4(t),this.setXYZ(e,Ho.x,Ho.y,Ho.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ho.fromBufferAttribute(this,e),Ho.applyNormalMatrix(t),this.setXYZ(e,Ho.x,Ho.y,Ho.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ho.fromBufferAttribute(this,e),Ho.transformDirection(t),this.setXYZ(e,Ho.x,Ho.y,Ho.z);return this}setX(t,e){return this.normalized&&(e=Mi(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Mi(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Mi(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Mi(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=yf(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=yf(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=yf(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=yf(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=Mi(e,this.array),n=Mi(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Mi(e,this.array),n=Mi(n,this.array),i=Mi(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Mi(e,this.array),n=Mi(n,this.array),i=Mi(i,this.array),r=Mi(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let n=0;n<this.count;n++){let i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return new on(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new UH(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let n=0;n<this.count;n++){let i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Jwt=class extends on{constructor(t,e,n,i=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}},ug=class extends KE{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Zt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},Bse=new G,kse=new G,Fse=new dt,M5=new qw,v3=new Gc,DL=class extends wi{constructor(t=new Qt,e=new ug){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,n=[0];for(let i=1,r=e.count;i<r;i++)Bse.fromBufferAttribute(e,i-1),kse.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=Bse.distanceTo(kse);t.setAttribute("lineDistance",new At(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),v3.copy(n.boundingSphere),v3.applyMatrix4(i),v3.radius+=r,t.ray.intersectsSphere(v3)===!1)return;Fse.copy(i).invert(),M5.copy(t.ray).applyMatrix4(Fse);let o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new G,c=new G,h=new G,u=new G,d=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(f!==null){let m=Math.max(0,s.start),g=Math.min(f.count,s.start+s.count);for(let v=m,y=g-1;v<y;v+=d){let x=f.getX(v),b=f.getX(v+1);if(l.fromBufferAttribute(p,x),c.fromBufferAttribute(p,b),M5.distanceSqToSegment(l,c,u,h)>a)continue;u.applyMatrix4(this.matrixWorld);let S=t.ray.origin.distanceTo(u);S<t.near||S>t.far||e.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{let m=Math.max(0,s.start),g=Math.min(p.count,s.start+s.count);for(let v=m,y=g-1;v<y;v+=d){if(l.fromBufferAttribute(p,v),c.fromBufferAttribute(p,v+1),M5.distanceSqToSegment(l,c,u,h)>a)continue;u.applyMatrix4(this.matrixWorld);let x=t.ray.origin.distanceTo(u);x<t.near||x>t.far||e.push({distance:x,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){let n=t[e[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++){let s=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}},Nse=new G,zse=new G,ZE=class extends DL{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,n=[];for(let i=0,r=e.count;i<r;i+=2)Nse.fromBufferAttribute(e,i),zse.fromBufferAttribute(e,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Nse.distanceTo(zse);t.setAttribute("lineDistance",new At(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Zwt=class extends Hs{constructor(t,e,n,i,r,s,o,a,l){super(t,e,n,i,r,s,o,a,l),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:oi,this.magFilter=r!==void 0?r:oi,this.generateMipmaps=!1;let c=this;function h(){c.needsUpdate=!0,t.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){let t=this.image;!("requestVideoFrameCallback"in t)&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},gd=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){let n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){let e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){let e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){let t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let e=[],n,i=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=t;s++)n=this.getPoint(s/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){let n=this.getLengths(),i=0,r=n.length,s;e?s=e:s=t*n[r-1];let o=0,a=r-1,l;for(;o<=a;)if(i=Math.floor(o+(a-o)/2),l=n[i]-s,l<0)o=i+1;else if(l>0)a=i-1;else{a=i;break}if(i=a,n[i]===s)return i/(r-1);let c=n[i],h=n[i+1]-c,u=(s-c)/h;return(i+u)/(r-1)}getTangent(t,e){let n=t-1e-4,i=t+1e-4;n<0&&(n=0),i>1&&(i=1);let r=this.getPoint(n),s=this.getPoint(i),o=e||(r.isVector2?new Ae:new G);return o.copy(s).sub(r).normalize(),o}getTangentAt(t,e){let n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){let n=new G,i=[],r=[],s=[],o=new G,a=new dt;for(let d=0;d<=t;d++){let f=d/t;i[d]=this.getTangentAt(f,new G)}r[0]=new G,s[0]=new G;let l=Number.MAX_VALUE,c=Math.abs(i[0].x),h=Math.abs(i[0].y),u=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),h<=l&&(l=h,n.set(0,1,0)),u<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),s[0].crossVectors(i[0],r[0]);for(let d=1;d<=t;d++){if(r[d]=r[d-1].clone(),s[d]=s[d-1].clone(),o.crossVectors(i[d-1],i[d]),o.length()>Number.EPSILON){o.normalize();let f=Math.acos(vs(i[d-1].dot(i[d]),-1,1));r[d].applyMatrix4(a.makeRotationAxis(o,f))}s[d].crossVectors(i[d],r[d])}if(e===!0){let d=Math.acos(vs(r[0].dot(r[t]),-1,1));d/=t,i[0].dot(o.crossVectors(r[0],r[t]))>0&&(d=-d);for(let f=1;f<=t;f++)r[f].applyMatrix4(a.makeRotationAxis(i[f],d*f)),s[f].crossVectors(i[f],r[f])}return{tangents:i,normals:r,binormals:s}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){let t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}},SB=class extends gd{constructor(t=0,e=0,n=1,i=1,r=0,s=Math.PI*2,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(t,e){let n=e||new Ae,i=Math.PI*2,r=this.aEndAngle-this.aStartAngle,s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(s?r=0:r=i),this.aClockwise===!0&&!s&&(r===i?r=-i:r=r-i);let o=this.aStartAngle+t*r,a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){let c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),u=a-this.aX,d=l-this.aY;a=u*c-d*h+this.aX,l=u*h+d*c+this.aY}return n.set(a,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){let t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}},Qwt=class extends SB{constructor(t,e,n,i,r,s){super(t,e,n,n,i,r,s),this.isArcCurve=!0,this.type="ArcCurve"}};function A$(){let t=0,e=0,n=0,i=0;function r(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,u){let d=(o-s)/c-(a-s)/(c+h)+(a-o)/h,f=(a-o)/h-(l-o)/(h+u)+(l-a)/u;d*=h,f*=h,r(o,a,d,f)},calc:function(s){let o=s*s,a=o*s;return t+e*s+n*o+i*a}}}var y3=new G,E5=new A$,C5=new A$,T5=new A$,e_t=class extends gd{constructor(t=[],e=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t,e=new G){let n=e,i=this.points,r=i.length,s=(r-(this.closed?0:1))*t,o=Math.floor(s),a=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:a===0&&o===r-1&&(o=r-2,a=1);let l,c;this.closed||o>0?l=i[(o-1)%r]:(y3.subVectors(i[0],i[1]).add(i[0]),l=y3);let h=i[o%r],u=i[(o+1)%r];if(this.closed||o+2<r?c=i[(o+2)%r]:(y3.subVectors(i[r-1],i[r-2]).add(i[r-1]),c=y3),this.curveType==="centripetal"||this.curveType==="chordal"){let d=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(h),d),p=Math.pow(h.distanceToSquared(u),d),m=Math.pow(u.distanceToSquared(c),d);p<1e-4&&(p=1),f<1e-4&&(f=p),m<1e-4&&(m=p),E5.initNonuniformCatmullRom(l.x,h.x,u.x,c.x,f,p,m),C5.initNonuniformCatmullRom(l.y,h.y,u.y,c.y,f,p,m),T5.initNonuniformCatmullRom(l.z,h.z,u.z,c.z,f,p,m)}else this.curveType==="catmullrom"&&(E5.initCatmullRom(l.x,h.x,u.x,c.x,this.tension),C5.initCatmullRom(l.y,h.y,u.y,c.y,this.tension),T5.initCatmullRom(l.z,h.z,u.z,c.z,this.tension));return n.set(E5.calc(a),C5.calc(a),T5.calc(a)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){let i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){let i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){let i=t.points[e];this.points.push(new G().fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}};function Use(t,e,n,i,r){let s=(i-e)*.5,o=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*t+n}function t_t(t,e){let n=1-t;return n*n*e}function n_t(t,e){return 2*(1-t)*t*e}function i_t(t,e){return t*t*e}function mM(t,e,n,i){return t_t(t,e)+n_t(t,n)+i_t(t,i)}function r_t(t,e){let n=1-t;return n*n*n*e}function s_t(t,e){let n=1-t;return 3*n*n*t*e}function o_t(t,e){return 3*(1-t)*t*t*e}function a_t(t,e){return t*t*t*e}function gM(t,e,n,i,r){return r_t(t,e)+s_t(t,n)+o_t(t,i)+a_t(t,r)}var xu=class extends gd{constructor(t=new Ae,e=new Ae,n=new Ae,i=new Ae){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new Ae){let n=e,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(gM(t,i.x,r.x,s.x,o.x),gM(t,i.y,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},VD=class extends gd{constructor(t=new G,e=new G,n=new G,i=new G){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new G){let n=e,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(gM(t,i.x,r.x,s.x,o.x),gM(t,i.y,r.y,s.y,o.y),gM(t,i.z,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},Ru=class extends gd{constructor(t=new Ae,e=new Ae){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Ae){let n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){let n=e||new Ae;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},Kxe=class extends gd{constructor(t=new G,e=new G){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new G){let n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},Xm=class extends gd{constructor(t=new Ae,e=new Ae,n=new Ae){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Ae){let n=e,i=this.v0,r=this.v1,s=this.v2;return n.set(mM(t,i.x,r.x,s.x),mM(t,i.y,r.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},l_t=class extends gd{constructor(t=new G,e=new G,n=new G){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new G){let n=e,i=this.v0,r=this.v1,s=this.v2;return n.set(mM(t,i.x,r.x,s.x),mM(t,i.y,r.y,s.y),mM(t,i.z,r.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},M$=class extends gd{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Ae){let n=e,i=this.points,r=(i.length-1)*t,s=Math.floor(r),o=r-s,a=i[s===0?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return n.set(Use(o,a.x,l.x,c.x,h.x),Use(o,a.y,l.y,c.y,h.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){let i=t.points[e];this.points.push(i.clone())}return this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){let i=this.points[e];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){let i=t.points[e];this.points.push(new Ae().fromArray(i))}return this}},c_t=Object.freeze({__proto__:null,ArcCurve:Qwt,CatmullRomCurve3:e_t,CubicBezierCurve:xu,CubicBezierCurve3:VD,EllipseCurve:SB,LineCurve:Ru,LineCurve3:Kxe,QuadraticBezierCurve:Xm,QuadraticBezierCurve3:l_t,SplineCurve:M$}),Jxe=class extends gd{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){let t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ru(e,t))}getPoint(t,e){let n=t*this.getLength(),i=this.getCurveLengths(),r=0;for(;r<i.length;){if(i[r]>=n){let s=i[r]-n,o=this.curves[r],a=o.getLength(),l=a===0?0:1-s/a;return o.getPointAt(l,e)}r++}return null}getLength(){let t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let t=[],e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){let e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){let e=[],n;for(let i=0,r=this.curves;i<r.length;i++){let s=r[i],o=s.isEllipseCurve?t*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?t*s.points.length:t,a=s.getPoints(o);for(let l=0;l<a.length;l++){let c=a[l];n&&n.equals(c)||(e.push(c),n=c)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){let i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){let t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){let i=this.curves[e];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){let i=t.curves[e];this.curves.push(new c_t[i.type]().fromJSON(i))}return this}},OL=class extends Jxe{constructor(t){super(),this.type="Path",this.currentPoint=new Ae,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){let n=new Ru(this.currentPoint.clone(),new Ae(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){let r=new Xm(this.currentPoint.clone(),new Ae(t,e),new Ae(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,s){let o=new xu(this.currentPoint.clone(),new Ae(t,e),new Ae(n,i),new Ae(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}splineThru(t){let e=[this.currentPoint.clone()].concat(t),n=new M$(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,s){let o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,n,i,r,s),this}absarc(t,e,n,i,r,s){return this.absellipse(t,e,n,n,i,r,s),this}ellipse(t,e,n,i,r,s,o,a){let l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,s,o,a),this}absellipse(t,e,n,i,r,s,o,a){let l=new SB(t,e,n,i,r,s,o,a);if(this.curves.length>0){let h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){let t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}},Zxe=class extends Qt{constructor(t=[new Ae(0,-.5),new Ae(.5,0),new Ae(0,.5)],e=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e),i=vs(i,0,Math.PI*2);let r=[],s=[],o=[],a=[],l=[],c=1/e,h=new G,u=new Ae,d=new G,f=new G,p=new G,m=0,g=0;for(let v=0;v<=t.length-1;v++)switch(v){case 0:m=t[v+1].x-t[v].x,g=t[v+1].y-t[v].y,d.x=g*1,d.y=-m,d.z=g*0,p.copy(d),d.normalize(),a.push(d.x,d.y,d.z);break;case t.length-1:a.push(p.x,p.y,p.z);break;default:m=t[v+1].x-t[v].x,g=t[v+1].y-t[v].y,d.x=g*1,d.y=-m,d.z=g*0,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),a.push(d.x,d.y,d.z),p.copy(f)}for(let v=0;v<=e;v++){let y=n+v*c*i,x=Math.sin(y),b=Math.cos(y);for(let S=0;S<=t.length-1;S++){h.x=t[S].x*x,h.y=t[S].y,h.z=t[S].x*b,s.push(h.x,h.y,h.z),u.x=v/e,u.y=S/(t.length-1),o.push(u.x,u.y);let A=a[3*S+0]*x,E=a[3*S+1],M=a[3*S+0]*b;l.push(A,E,M)}}for(let v=0;v<e;v++)for(let y=0;y<t.length-1;y++){let x=y+v*t.length,b=x,S=x+t.length,A=x+t.length+1,E=x+1;r.push(b,S,E),r.push(A,E,S)}this.setIndex(r),this.setAttribute("position",new At(s,3)),this.setAttribute("uv",new At(o,2)),this.setAttribute("normal",new At(l,3))}static fromJSON(t){return new Zxe(t.points,t.segments,t.phiStart,t.phiLength)}},E$=class extends Qt{constructor(t=1,e=1,n=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a};let l=this;i=Math.floor(i),r=Math.floor(r);let c=[],h=[],u=[],d=[],f=0,p=[],m=n/2,g=0;v(),s===!1&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new At(h,3)),this.setAttribute("normal",new At(u,3)),this.setAttribute("uv",new At(d,2));function v(){let x=new G,b=new G,S=0,A=(e-t)/n;for(let E=0;E<=r;E++){let M=[],C=E/r,T=C*(e-t)+t;for(let D=0;D<=i;D++){let L=D/i,I=L*a+o,R=Math.sin(I),H=Math.cos(I);b.x=T*R,b.y=-C*n+m,b.z=T*H,h.push(b.x,b.y,b.z),x.set(R,A,H).normalize(),u.push(x.x,x.y,x.z),d.push(L,1-C),M.push(f++)}p.push(M)}for(let E=0;E<i;E++)for(let M=0;M<r;M++){let C=p[M][E],T=p[M+1][E],D=p[M+1][E+1],L=p[M][E+1];c.push(C,T,L),c.push(T,D,L),S+=6}l.addGroup(g,S,0),g+=S}function y(x){let b=f,S=new Ae,A=new G,E=0,M=x===!0?t:e,C=x===!0?1:-1;for(let D=1;D<=i;D++)h.push(0,m*C,0),u.push(0,C,0),d.push(.5,.5),f++;let T=f;for(let D=0;D<=i;D++){let L=D/i*a+o,I=Math.cos(L),R=Math.sin(L);A.x=M*R,A.y=m*C,A.z=M*I,h.push(A.x,A.y,A.z),u.push(0,C,0),S.x=I*.5+.5,S.y=R*.5*C+.5,d.push(S.x,S.y),f++}for(let D=0;D<i;D++){let L=b+D,I=T+D;x===!0?c.push(I,I+1,L):c.push(I+1,I,L),E+=3}l.addGroup(g,E,x===!0?1:2),g+=E}}static fromJSON(t){return new E$(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}},Qxe=class extends E${constructor(t=1,e=1,n=32,i=1,r=!1,s=0,o=Math.PI*2){super(0,t,e,n,i,r,s,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}static fromJSON(t){return new Qxe(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}},C$=class extends Qt{constructor(t=[],e=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i};let r=[],s=[];o(i),l(n),c(),this.setAttribute("position",new At(r,3)),this.setAttribute("normal",new At(r.slice(),3)),this.setAttribute("uv",new At(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(v){let y=new G,x=new G,b=new G;for(let S=0;S<e.length;S+=3)d(e[S+0],y),d(e[S+1],x),d(e[S+2],b),a(y,x,b,v)}function a(v,y,x,b){let S=b+1,A=[];for(let E=0;E<=S;E++){A[E]=[];let M=v.clone().lerp(x,E/S),C=y.clone().lerp(x,E/S),T=S-E;for(let D=0;D<=T;D++)D===0&&E===S?A[E][D]=M:A[E][D]=M.clone().lerp(C,D/T)}for(let E=0;E<S;E++)for(let M=0;M<2*(S-E)-1;M++){let C=Math.floor(M/2);M%2===0?(u(A[E][C+1]),u(A[E+1][C]),u(A[E][C])):(u(A[E][C+1]),u(A[E+1][C+1]),u(A[E+1][C]))}}function l(v){let y=new G;for(let x=0;x<r.length;x+=3)y.x=r[x+0],y.y=r[x+1],y.z=r[x+2],y.normalize().multiplyScalar(v),r[x+0]=y.x,r[x+1]=y.y,r[x+2]=y.z}function c(){let v=new G;for(let y=0;y<r.length;y+=3){v.x=r[y+0],v.y=r[y+1],v.z=r[y+2];let x=m(v)/2/Math.PI+.5,b=g(v)/Math.PI+.5;s.push(x,1-b)}f(),h()}function h(){for(let v=0;v<s.length;v+=6){let y=s[v+0],x=s[v+2],b=s[v+4],S=Math.max(y,x,b),A=Math.min(y,x,b);S>.9&&A<.1&&(y<.2&&(s[v+0]+=1),x<.2&&(s[v+2]+=1),b<.2&&(s[v+4]+=1))}}function u(v){r.push(v.x,v.y,v.z)}function d(v,y){let x=v*3;y.x=t[x+0],y.y=t[x+1],y.z=t[x+2]}function f(){let v=new G,y=new G,x=new G,b=new G,S=new Ae,A=new Ae,E=new Ae;for(let M=0,C=0;M<r.length;M+=9,C+=6){v.set(r[M+0],r[M+1],r[M+2]),y.set(r[M+3],r[M+4],r[M+5]),x.set(r[M+6],r[M+7],r[M+8]),S.set(s[C+0],s[C+1]),A.set(s[C+2],s[C+3]),E.set(s[C+4],s[C+5]),b.copy(v).add(y).add(x).divideScalar(3);let T=m(b);p(S,C+0,v,T),p(A,C+2,y,T),p(E,C+4,x,T)}}function p(v,y,x,b){b<0&&v.x===1&&(s[y]=v.x-1),x.x===0&&x.z===0&&(s[y]=b/2/Math.PI+.5)}function m(v){return Math.atan2(v.z,-v.x)}function g(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}static fromJSON(t){return new C$(t.vertices,t.indices,t.radius,t.details)}},ebe=class extends C${constructor(t=1,e=0){let n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,s,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new ebe(t.radius,t.detail)}},LL=class extends OL{constructor(t){super(t),this.uuid=Yh(),this.type="Shape",this.holes=[]}getPointsHoles(t){let e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){let i=t.holes[e];this.holes.push(i.clone())}return this}toJSON(){let t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){let i=this.holes[e];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){let i=t.holes[e];this.holes.push(new OL().fromJSON(i))}return this}},u_t={triangulate:function(t,e,n=2){let i=e&&e.length,r=i?e[0]*n:t.length,s=tbe(t,0,r,n,!0),o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,u,d,f;if(i&&(s=m_t(t,e,s,n)),t.length>80*n){a=c=t[0],l=h=t[1];for(let p=n;p<r;p+=n)u=t[p],d=t[p+1],u<a&&(a=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);f=Math.max(c-a,h-l),f=f!==0?32767/f:0}return B2(s,o,n,a,l,f,0),o}};function tbe(t,e,n,i,r){let s,o;if(r===E_t(t,e,n,i)>0)for(s=e;s<n;s+=i)o=Gse(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=Gse(s,t[s],t[s+1],o);return o&&AB(o,o.next)&&(F2(o),o=o.next),o}function Dv(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(AB(n,n.next)||pr(n.prev,n,n.next)===0)){if(F2(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function B2(t,e,n,i,r,s,o){if(!t)return;!o&&s&&b_t(t,i,r,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?d_t(t,i,r,s):h_t(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),F2(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=f_t(Dv(t),e,n),B2(t,e,n,i,r,s,2)):o===2&&p_t(t,e,n,i,r,s):B2(Dv(t),e,n,i,r,s,1);break}}}function h_t(t){let e=t.prev,n=t,i=t.next;if(pr(e,n,i)>=0)return!1;let r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,c=i.y,h=r<s?r<o?r:o:s<o?s:o,u=a<l?a<c?a:c:l<c?l:c,d=r>s?r>o?r:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c,p=i.next;for(;p!==e;){if(p.x>=h&&p.x<=d&&p.y>=u&&p.y<=f&&Lx(r,a,s,l,o,c,p.x,p.y)&&pr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function d_t(t,e,n,i){let r=t.prev,s=t,o=t.next;if(pr(r,s,o)>=0)return!1;let a=r.x,l=s.x,c=o.x,h=r.y,u=s.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,p=h<u?h<d?h:d:u<d?u:d,m=a>l?a>c?a:c:l>c?l:c,g=h>u?h>d?h:d:u>d?u:d,v=GH(f,p,e,n,i),y=GH(m,g,e,n,i),x=t.prevZ,b=t.nextZ;for(;x&&x.z>=v&&b&&b.z<=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==o&&Lx(a,h,l,u,c,d,x.x,x.y)&&pr(x.prev,x,x.next)>=0||(x=x.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==r&&b!==o&&Lx(a,h,l,u,c,d,b.x,b.y)&&pr(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==o&&Lx(a,h,l,u,c,d,x.x,x.y)&&pr(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==r&&b!==o&&Lx(a,h,l,u,c,d,b.x,b.y)&&pr(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function f_t(t,e,n){let i=t;do{let r=i.prev,s=i.next.next;!AB(r,s)&&nbe(r,i,i.next,s)&&k2(r,s)&&k2(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),F2(i),F2(i.next),i=t=s),i=i.next}while(i!==t);return Dv(i)}function p_t(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&S_t(o,a)){let l=ibe(o,a);o=Dv(o,o.next),l=Dv(l,l.next),B2(o,e,n,i,r,s,0),B2(l,e,n,i,r,s,0);return}a=a.next}o=o.next}while(o!==t)}function m_t(t,e,n,i){let r=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,c=tbe(t,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(__t(c));for(r.sort(g_t),s=0;s<r.length;s++)n=v_t(r[s],n);return n}function g_t(t,e){return t.x-e.x}function v_t(t,e){let n=y_t(t,e);if(!n)return e;let i=ibe(n,t);return Dv(i,i.next),Dv(n,n.next)}function y_t(t,e){let n=e,i=-1/0,r,s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){let d=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=s&&d>i&&(i=d,r=n.x<n.next.x?n:n.next,d===s))return r}n=n.next}while(n!==e);if(!r)return null;let a=r,l=r.x,c=r.y,h=1/0,u;n=r;do s>=n.x&&n.x>=l&&s!==n.x&&Lx(o<c?s:i,o,l,c,o<c?i:s,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(s-n.x),k2(n,t)&&(u<h||u===h&&(n.x>r.x||n.x===r.x&&x_t(r,n)))&&(r=n,h=u)),n=n.next;while(n!==a);return r}function x_t(t,e){return pr(t.prev,t,e.prev)<0&&pr(e.next,t,t.next)<0}function b_t(t,e,n,i){let r=t;do r.z===0&&(r.z=GH(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,w_t(r)}function w_t(t){let e,n,i,r,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1);return t}function GH(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function __t(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Lx(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function S_t(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!A_t(t,e)&&(k2(t,e)&&k2(e,t)&&M_t(t,e)&&(pr(t.prev,t,e.prev)||pr(t,e.prev,e))||AB(t,e)&&pr(t.prev,t,t.next)>0&&pr(e.prev,e,e.next)>0)}function pr(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function AB(t,e){return t.x===e.x&&t.y===e.y}function nbe(t,e,n,i){let r=b3(pr(t,e,n)),s=b3(pr(t,e,i)),o=b3(pr(n,i,t)),a=b3(pr(n,i,e));return!!(r!==s&&o!==a||r===0&&x3(t,n,e)||s===0&&x3(t,i,e)||o===0&&x3(n,t,i)||a===0&&x3(n,e,i))}function x3(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function b3(t){return t>0?1:t<0?-1:0}function A_t(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&nbe(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function k2(t,e){return pr(t.prev,t,t.next)<0?pr(t,e,t.next)>=0&&pr(t,t.prev,e)>=0:pr(t,e,t.prev)<0||pr(t,t.next,e)<0}function M_t(t,e){let n=t,i=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function ibe(t,e){let n=new HH(t.i,t.x,t.y),i=new HH(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function Gse(t,e,n,i){let r=new HH(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function F2(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function HH(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E_t(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}var rbe=class{static area(t){let e=t.length,n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return n*.5}static isClockWise(t){return rbe.area(t)<0}static triangulateShape(t,e){let n=[],i=[],r=[];Hse(t),jse(n,t);let s=t.length;e.forEach(Hse);for(let a=0;a<e.length;a++)i.push(s),s+=e[a].length,jse(n,e[a]);let o=u_t.triangulate(n,i);for(let a=0;a<o.length;a+=3)r.push(o.slice(a,a+3));return r}};function Hse(t){let e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function jse(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}var sbe=class extends C${constructor(t=1,e=0){let n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new sbe(t.radius,t.detail)}},T$=class extends Qt{constructor(t=1,e=32,n=16,i=0,r=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));let a=Math.min(s+o,Math.PI),l=0,c=[],h=new G,u=new G,d=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){let v=[],y=g/n,x=0;g==0&&s==0?x=.5/e:g==n&&a==Math.PI&&(x=-.5/e);for(let b=0;b<=e;b++){let S=b/e;h.x=-t*Math.cos(i+S*r)*Math.sin(s+y*o),h.y=t*Math.cos(s+y*o),h.z=t*Math.sin(i+S*r)*Math.sin(s+y*o),f.push(h.x,h.y,h.z),u.copy(h).normalize(),p.push(u.x,u.y,u.z),m.push(S+x,1-y),v.push(l++)}c.push(v)}for(let g=0;g<n;g++)for(let v=0;v<e;v++){let y=c[g][v+1],x=c[g][v],b=c[g+1][v],S=c[g+1][v+1];(g!==0||s>0)&&d.push(y,x,S),(g!==n-1||a<Math.PI)&&d.push(x,b,S)}this.setIndex(d),this.setAttribute("position",new At(f,3)),this.setAttribute("normal",new At(p,3)),this.setAttribute("uv",new At(m,2))}static fromJSON(t){return new T$(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}},obe=class extends Qt{constructor(t=1,e=.4,n=64,i=8,r=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:s},n=Math.floor(n),i=Math.floor(i);let o=[],a=[],l=[],c=[],h=new G,u=new G,d=new G,f=new G,p=new G,m=new G,g=new G;for(let y=0;y<=n;++y){let x=y/n*r*Math.PI*2;v(x,r,s,t,d),v(x+.01,r,s,t,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let b=0;b<=i;++b){let S=b/i*Math.PI*2,A=-e*Math.cos(S),E=e*Math.sin(S);h.x=d.x+(A*g.x+E*p.x),h.y=d.y+(A*g.y+E*p.y),h.z=d.z+(A*g.z+E*p.z),a.push(h.x,h.y,h.z),u.subVectors(h,d).normalize(),l.push(u.x,u.y,u.z),c.push(y/n),c.push(b/i)}}for(let y=1;y<=n;y++)for(let x=1;x<=i;x++){let b=(i+1)*(y-1)+(x-1),S=(i+1)*y+(x-1),A=(i+1)*y+x,E=(i+1)*(y-1)+x;o.push(b,S,E),o.push(S,A,E)}this.setIndex(o),this.setAttribute("position",new At(a,3)),this.setAttribute("normal",new At(l,3)),this.setAttribute("uv",new At(c,2));function v(y,x,b,S,A){let E=Math.cos(y),M=Math.sin(y),C=b/x*y,T=Math.cos(C);A.x=S*(2+T)*.5*E,A.y=S*(2+T)*M*.5,A.z=S*Math.sin(C)*.5}}static fromJSON(t){return new obe(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}},Vse={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},abe=class{constructor(t,e,n){let i=this,r=!1,s=0,o=0,a,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(c){o++,r===!1&&i.onStart!==void 0&&i.onStart(c,s,o),r=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,o),s===o&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return a?a(c):c},this.setURLModifier=function(c){return a=c,this},this.addHandler=function(c,h){return l.push(c,h),this},this.removeHandler=function(c){let h=l.indexOf(c);return h!==-1&&l.splice(h,2),this},this.getHandler=function(c){for(let h=0,u=l.length;h<u;h+=2){let d=l[h],f=l[h+1];if(d.global&&(d.lastIndex=0),d.test(c))return f}return null}}},C_t=new abe,P$=class{constructor(t){this.manager=t!==void 0?t:C_t,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){let n=this;return new Promise(function(i,r){n.load(t,i,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}},Wd={},T_t=class extends Error{constructor(t,e){super(t),this.response=e}},jH=class extends P${constructor(t){super(t)}load(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let r=Vse.get(t);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(Wd[t]!==void 0){Wd[t].push({onLoad:e,onProgress:n,onError:i});return}Wd[t]=[],Wd[t].push({onLoad:e,onProgress:n,onError:i});let s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let c=Wd[t],h=l.body.getReader(),u=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),d=u?parseInt(u):0,f=d!==0,p=0,m=new ReadableStream({start(g){v();function v(){h.read().then(({done:y,value:x})=>{if(y)g.close();else{p+=x.byteLength;let b=new ProgressEvent("progress",{lengthComputable:f,loaded:p,total:d});for(let S=0,A=c.length;S<A;S++){let E=c[S];E.onProgress&&E.onProgress(b)}g.enqueue(x),v()}})}}});return new Response(m)}else throw new T_t(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(a){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return l.json();default:if(o===void 0)return l.text();{let c=/charset="?([^;"\s]*)"?/i.exec(o),h=c&&c[1]?c[1].toLowerCase():void 0,u=new TextDecoder(h);return l.arrayBuffer().then(d=>u.decode(d))}}}).then(l=>{Vse.add(t,l);let c=Wd[t];delete Wd[t];for(let h=0,u=c.length;h<u;h++){let d=c[h];d.onLoad&&d.onLoad(l)}}).catch(l=>{let c=Wd[t];if(c===void 0)throw this.manager.itemError(t),l;delete Wd[t];for(let h=0,u=c.length;h<u;h++){let d=c[h];d.onError&&d.onError(l)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}},QE=class extends wi{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Zt(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}},P_t=class extends QE{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(wi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Zt(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}},P5=new dt,Wse=new G,$se=new G,D$=class{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ae(512,512),this.map=null,this.mapPass=null,this.matrix=new dt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new w$,this._frameExtents=new Ae(1,1),this._viewportCount=1,this._viewports=[new Sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,n=this.matrix;Wse.setFromMatrixPosition(t.matrixWorld),e.position.copy(Wse),$se.setFromMatrixPosition(t.target.matrixWorld),e.lookAt($se),e.updateMatrixWorld(),P5.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(P5),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(P5)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}},D_t=class extends D${constructor(){super(new So(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){let e=this.camera,n=I2*2*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;(n!==e.fov||i!==e.aspect||r!==e.far)&&(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}},O_t=class extends QE{constructor(t,e,n=0,i=Math.PI/3,r=0,s=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(wi.DEFAULT_UP),this.updateMatrix(),this.target=new wi,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.map=null,this.shadow=new D_t}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},qse=new dt,kS=new G,D5=new G,L_t=class extends D${constructor(){super(new So(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ae(4,2),this._viewportCount=6,this._viewports=[new Sn(2,1,1,1),new Sn(0,1,1,1),new Sn(3,1,1,1),new Sn(1,1,1,1),new Sn(3,0,1,1),new Sn(1,0,1,1)],this._cubeDirections=[new G(1,0,0),new G(-1,0,0),new G(0,0,1),new G(0,0,-1),new G(0,1,0),new G(0,-1,0)],this._cubeUps=[new G(0,1,0),new G(0,1,0),new G(0,1,0),new G(0,1,0),new G(0,0,1),new G(0,0,-1)]}updateMatrices(t,e=0){let n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),kS.setFromMatrixPosition(t.matrixWorld),n.position.copy(kS),D5.copy(n.position),D5.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(D5),n.updateMatrixWorld(),i.makeTranslation(-kS.x,-kS.y,-kS.z),qse.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qse)}},R_t=class extends QE{constructor(t,e,n=0,i=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new L_t}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},I_t=class extends D${constructor(){super(new PL(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},B_t=class extends QE{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(wi.DEFAULT_UP),this.updateMatrix(),this.target=new wi,this.shadow=new I_t}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},k_t=class extends Qt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){let t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}},lbe=class extends P${constructor(t){super(t)}load(t,e,n,i){let r=this,s=new jH(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(t,function(o){try{e(r.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),r.manager.itemError(t)}},n,i)}parse(t){let e={},n={};function i(u,d){if(e[d]!==void 0)return e[d];let f=u.interleavedBuffers[d],p=r(u,f.buffer),m=ZP(f.type,p),g=new Kwt(m,f.stride);return g.uuid=f.uuid,e[d]=g,g}function r(u,d){if(n[d]!==void 0)return n[d];let f=u.arrayBuffers[d],p=new Uint32Array(f).buffer;return n[d]=p,p}let s=t.isInstancedBufferGeometry?new k_t:new Qt,o=t.data.index;if(o!==void 0){let u=ZP(o.type,o.array);s.setIndex(new on(u,1))}let a=t.data.attributes;for(let u in a){let d=a[u],f;if(d.isInterleavedBufferAttribute){let p=i(t.data,d.data);f=new UH(p,d.itemSize,d.offset,d.normalized)}else{let p=ZP(d.type,d.array),m=d.isInstancedBufferAttribute?Jwt:on;f=new m(p,d.itemSize,d.normalized)}d.name!==void 0&&(f.name=d.name),d.usage!==void 0&&f.setUsage(d.usage),d.updateRange!==void 0&&(f.updateRange.offset=d.updateRange.offset,f.updateRange.count=d.updateRange.count),s.setAttribute(u,f)}let l=t.data.morphAttributes;if(l)for(let u in l){let d=l[u],f=[];for(let p=0,m=d.length;p<m;p++){let g=d[p],v;if(g.isInterleavedBufferAttribute){let y=i(t.data,g.data);v=new UH(y,g.itemSize,g.offset,g.normalized)}else{let y=ZP(g.type,g.array);v=new on(y,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),f.push(v)}s.morphAttributes[u]=f}t.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let c=t.data.groups||t.data.drawcalls||t.data.offsets;if(c!==void 0)for(let u=0,d=c.length;u!==d;++u){let f=c[u];s.addGroup(f.start,f.count,f.materialIndex)}let h=t.data.boundingSphere;if(h!==void 0){let u=new G;h.center!==void 0&&u.fromArray(h.center),s.boundingSphere=new Gc(u,h.radius)}return t.name&&(s.name=t.name),t.userData&&(s.userData=t.userData),s}},F_t=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Xse(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let e=Xse();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};function Xse(){return(typeof performance>"u"?Date:performance).now()}var cbe="\\[\\]\\.:\\/",O$="[^"+cbe+"]",N_t="[^"+cbe.replace("\\.","")+"]";/((?:WC+[\/:])*)/.source.replace("WC",O$);/(WCOD+)?/.source.replace("WCOD",N_t);/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",O$);/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",O$);var Lt=class{constructor(t){this.value=t}clone(){return new Lt(this.value.clone===void 0?this.value:this.value.clone())}},ube=class{constructor(t,e,n=0,i=1/0){this.ray=new qw(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new x$,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return VH(t,this,n,e),n.sort(Yse),n}intersectObjects(t,e=!0,n=[]){for(let i=0,r=t.length;i<r;i++)VH(t[i],this,n,e);return n.sort(Yse),n}};function Yse(t,e){return t.distance-e.distance}function VH(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){let r=t.children;for(let s=0,o=r.length;s<o;s++)VH(r[s],e,n,!0)}}var Kse=class{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(vs(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},Jse=new Ae,z_t=class{constructor(t=new Ae(1/0,1/0),e=new Ae(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let n=Jse.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Jse.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},Zse=new G,w3=new G,Rc=class{constructor(t=new G,e=new G){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Zse.subVectors(t,this.start),w3.subVectors(this.end,this.start);let n=w3.dot(w3),i=w3.dot(Zse)/n;return e&&(i=vs(i,0,1)),i}closestPointToPoint(t,e,n){let i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},Qse=new G,U_t=class extends wi{constructor(t,e){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";let n=new Qt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,a=32;s<a;s++,o++){let l=s/a*Math.PI*2,c=o/a*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}n.setAttribute("position",new At(i,3));let r=new ug({fog:!1,toneMapped:!1});this.cone=new ZE(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Qse.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Qse),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},G_t=class extends cl{constructor(t,e,n){let i=new T$(e,4,2),r=new JE({wireframe:!0,fog:!1,toneMapped:!1});super(i,r),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},eoe=new G,_3=new G,toe=new G,H_t=class extends wi{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let i=new Qt;i.setAttribute("position",new At([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));let r=new ug({fog:!1,toneMapped:!1});this.lightPlane=new DL(i,r),this.add(this.lightPlane),i=new Qt,i.setAttribute("position",new At([0,0,0,0,0,1],3)),this.targetLine=new DL(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),eoe.setFromMatrixPosition(this.light.matrixWorld),_3.setFromMatrixPosition(this.light.target.matrixWorld),toe.subVectors(_3,eoe),this.lightPlane.lookAt(_3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_3),this.targetLine.scale.z=toe.length()}},S3=new G,br=new Yw,RL=class extends ZE{constructor(t){let e=new Qt,n=new ug({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(f,p){a(f),a(p)}function a(f){i.push(0,0,0),r.push(0,0,0),s[f]===void 0&&(s[f]=[]),s[f].push(i.length/3-1)}e.setAttribute("position",new At(i,3)),e.setAttribute("color",new At(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let l=new Zt(16755200),c=new Zt(16711680),h=new Zt(43775),u=new Zt(16777215),d=new Zt(3355443);this.setColors(l,c,h,u,d)}setColors(t,e,n,i,r){let s=this.geometry.getAttribute("color");s.setXYZ(0,t.r,t.g,t.b),s.setXYZ(1,t.r,t.g,t.b),s.setXYZ(2,t.r,t.g,t.b),s.setXYZ(3,t.r,t.g,t.b),s.setXYZ(4,t.r,t.g,t.b),s.setXYZ(5,t.r,t.g,t.b),s.setXYZ(6,t.r,t.g,t.b),s.setXYZ(7,t.r,t.g,t.b),s.setXYZ(8,t.r,t.g,t.b),s.setXYZ(9,t.r,t.g,t.b),s.setXYZ(10,t.r,t.g,t.b),s.setXYZ(11,t.r,t.g,t.b),s.setXYZ(12,t.r,t.g,t.b),s.setXYZ(13,t.r,t.g,t.b),s.setXYZ(14,t.r,t.g,t.b),s.setXYZ(15,t.r,t.g,t.b),s.setXYZ(16,t.r,t.g,t.b),s.setXYZ(17,t.r,t.g,t.b),s.setXYZ(18,t.r,t.g,t.b),s.setXYZ(19,t.r,t.g,t.b),s.setXYZ(20,t.r,t.g,t.b),s.setXYZ(21,t.r,t.g,t.b),s.setXYZ(22,t.r,t.g,t.b),s.setXYZ(23,t.r,t.g,t.b),s.setXYZ(24,e.r,e.g,e.b),s.setXYZ(25,e.r,e.g,e.b),s.setXYZ(26,e.r,e.g,e.b),s.setXYZ(27,e.r,e.g,e.b),s.setXYZ(28,e.r,e.g,e.b),s.setXYZ(29,e.r,e.g,e.b),s.setXYZ(30,e.r,e.g,e.b),s.setXYZ(31,e.r,e.g,e.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,r.r,r.g,r.b),s.setXYZ(41,r.r,r.g,r.b),s.setXYZ(42,r.r,r.g,r.b),s.setXYZ(43,r.r,r.g,r.b),s.setXYZ(44,r.r,r.g,r.b),s.setXYZ(45,r.r,r.g,r.b),s.setXYZ(46,r.r,r.g,r.b),s.setXYZ(47,r.r,r.g,r.b),s.setXYZ(48,r.r,r.g,r.b),s.setXYZ(49,r.r,r.g,r.b),s.needsUpdate=!0}update(){let t=this.geometry,e=this.pointMap,n=1,i=1;br.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Nr("c",e,t,br,0,0,-1),Nr("t",e,t,br,0,0,1),Nr("n1",e,t,br,-n,-i,-1),Nr("n2",e,t,br,n,-i,-1),Nr("n3",e,t,br,-n,i,-1),Nr("n4",e,t,br,n,i,-1),Nr("f1",e,t,br,-n,-i,1),Nr("f2",e,t,br,n,-i,1),Nr("f3",e,t,br,-n,i,1),Nr("f4",e,t,br,n,i,1),Nr("u1",e,t,br,n*.7,i*1.1,-1),Nr("u2",e,t,br,-n*.7,i*1.1,-1),Nr("u3",e,t,br,0,i*2,-1),Nr("cf1",e,t,br,-n,0,1),Nr("cf2",e,t,br,n,0,1),Nr("cf3",e,t,br,0,-i,1),Nr("cf4",e,t,br,0,i,1),Nr("cn1",e,t,br,-n,0,-1),Nr("cn2",e,t,br,n,0,-1),Nr("cn3",e,t,br,0,-i,-1),Nr("cn4",e,t,br,0,i,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Nr(t,e,n,i,r,s,o){S3.set(r,s,o).unproject(i);let a=e[t];if(a!==void 0){let l=n.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],S3.x,S3.y,S3.z)}}var IL=class extends ZE{constructor(t,e=16776960){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new Qt;r.setIndex(new on(n,1)),r.setAttribute("position",new At(i,3)),super(r,new ug({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){let e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}},j_t=class extends ZE{constructor(t=1){let e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Qt;i.setAttribute("position",new At(e,3)),i.setAttribute("color",new At(n,3));let r=new ug({vertexColors:!0,toneMapped:!1});super(i,r),this.type="AxesHelper"}setColors(t,e,n){let i=new Zt,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:$w}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=$w);var FS=".",L$=Symbol("target"),hbe=Symbol("unsubscribe");function WH(t){return t instanceof Date||t instanceof Set||t instanceof Map||t instanceof WeakSet||t instanceof WeakMap||ArrayBuffer.isView(t)}function V_t(t){return(typeof t=="object"?t===null:typeof t!="function")||t instanceof RegExp}var Rh=Array.isArray;function R$(t){return typeof t=="symbol"}var W_t={after:(t,e)=>Rh(t)?t.slice(e.length):e===""?t:t.slice(e.length+1),concat:(t,e)=>Rh(t)?(t=[...t],e&&t.push(e),t):e&&e.toString!==void 0?(t!==""&&(t+=FS),R$(e)?t+e.toString():t+e):t,initial:t=>{if(Rh(t))return t.slice(0,-1);if(t==="")return t;let e=t.lastIndexOf(FS);return e===-1?"":t.slice(0,e)},last:t=>{if(Rh(t))return t[t.length-1]||"";if(t==="")return t;let e=t.lastIndexOf(FS);return e===-1?t:t.slice(e+1)},walk:(t,e)=>{if(Rh(t))for(let n of t)e(n);else if(t!==""){let n=0,i=t.indexOf(FS);if(i===-1)e(t);else for(;n<t.length;)i===-1&&(i=t.length),e(t.slice(n,i)),n=i+1,i=t.indexOf(FS,n)}},get(t,e){return this.walk(e,n=>{t&&(t=t[n])}),t}},sc=W_t;function $_t(t){return typeof t=="object"&&typeof t.next=="function"}function q_t(t,e,n,i,r){let s=t.next;if(e.name==="entries")t.next=function(){let o=s.call(this);return o.done===!1&&(o.value[0]=r(o.value[0],e,o.value[0],i),o.value[1]=r(o.value[1],e,o.value[0],i)),o};else if(e.name==="values"){let o=n[L$].keys();t.next=function(){let a=s.call(this);return a.done===!1&&(a.value=r(a.value,e,o.next().value,i)),a}}else t.next=function(){let o=s.call(this);return o.done===!1&&(o.value=r(o.value,e,o.value,i)),o};return t}function noe(t,e,n){return t.isUnsubscribed||e.ignoreSymbols&&R$(n)||e.ignoreUnderscores&&n.charAt(0)==="_"||"ignoreKeys"in e&&e.ignoreKeys.includes(n)}var X_t=class{constructor(t){this._equals=t,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(t){let e=this._getDescriptorCache(),n=e.get(t);return n===void 0&&(n={},e.set(t,n)),n}_getOwnPropertyDescriptor(t,e){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(t,e);let n=this._getProperties(t),i=n[e];return i===void 0&&(i=Reflect.getOwnPropertyDescriptor(t,e),n[e]=i),i}getProxy(t,e,n,i){if(this.isUnsubscribed)return t;let r=t[i],s=r||t;this._pathCache.set(s,e);let o=this._proxyCache.get(s);return o===void 0&&(o=r===void 0?new Proxy(t,n):t,this._proxyCache.set(s,o)),o}getPath(t){return this.isUnsubscribed?void 0:this._pathCache.get(t)}isDetached(t,e){return!Object.is(t,sc.get(e,this.getPath(t)))}defineProperty(t,e,n){return Reflect.defineProperty(t,e,n)?(this.isUnsubscribed||(this._getProperties(t)[e]=n),!0):!1}setProperty(t,e,n,i,r){if(!this._equals(r,n)||!(e in t)){let s=this._getOwnPropertyDescriptor(t,e);return s!==void 0&&"set"in s?Reflect.set(t,e,n,i):Reflect.set(t,e,n)}return!0}deleteProperty(t,e,n){if(Reflect.deleteProperty(t,e)){if(!this.isUnsubscribed){let i=this._getDescriptorCache().get(t);i&&(delete i[e],this._pathCache.delete(n))}return!0}return!1}isSameDescriptor(t,e,n){let i=this._getOwnPropertyDescriptor(e,n);return t!==void 0&&i!==void 0&&Object.is(t.value,i.value)&&(t.writable||!1)===(i.writable||!1)&&(t.enumerable||!1)===(i.enumerable||!1)&&(t.configurable||!1)===(i.configurable||!1)&&t.get===i.get&&t.set===i.set}isGetInvariant(t,e){let n=this._getOwnPropertyDescriptor(t,e);return n!==void 0&&n.configurable!==!0&&n.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function $H(t){return toString.call(t)==="[object Object]"}function A3(){return!0}function y1(t,e){return t.length!==e.length||t.some((n,i)=>e[i]!==n)}var dbe=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Y_t=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),fbe={push:A3,pop:A3,shift:A3,unshift:A3,copyWithin:y1,reverse:y1,sort:y1,splice:y1,flat:y1,fill:y1},K_t=new Set([...dbe,...Y_t,...Object.keys(fbe)]);function M3(t,e){if(t.size!==e.size)return!0;for(let n of t)if(!e.has(n))return!0;return!1}var pbe=["keys","values","entries"],mbe=new Set(["has","toString"]),gbe={add:M3,clear:M3,delete:M3,forEach:M3},J_t=new Set([...mbe,...Object.keys(gbe),...pbe]);function E3(t,e){if(t.size!==e.size)return!0;let n;for(let[i,r]of t)if(n=e.get(i),n!==r||n===void 0&&!e.has(i))return!0;return!1}var Z_t=new Set([...mbe,"get"]),vbe={set:E3,clear:E3,delete:E3,forEach:E3},Q_t=new Set([...Z_t,...Object.keys(vbe),...pbe]),Ym=class{constructor(t,e,n,i){this._path=e,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=i,this._changes=i?[]:null,this.clone=e===void 0?t:this._shallowClone(t)}static isHandledMethod(t){return dbe.has(t)}_shallowClone(t){let e=t;if($H(t))e={...t};else if(Rh(t))e=[...t];else if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set([...t].map(n=>this._shallowClone(n)));else if(t instanceof Map){e=new Map;for(let[n,i]of t.entries())e.set(n,this._shallowClone(i))}return this._clonedCache.add(e),e}preferredThisArg(t,e,n,i){return t?(Rh(i)?this._onIsChanged=fbe[e]:i instanceof Set?this._onIsChanged=gbe[e]:i instanceof Map&&(this._onIsChanged=vbe[e]),i):n}update(t,e,n){let i=sc.after(t,this._path);if(e!=="length"){let r=this.clone;sc.walk(i,s=>{r&&r[s]&&(this._clonedCache.has(r[s])||(r[s]=this._shallowClone(r[s])),r=r[s])}),this._hasOnValidate&&this._changes.push({path:i,property:e,previous:n}),r&&r[e]&&(r[e]=n)}this._isChanged=!0}undo(t){let e;for(let n=this._changes.length-1;n!==-1;n--)e=this._changes[n],sc.get(t,e.path)[e.property]=e.previous}isChanged(t){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,t)}},ioe=class extends Ym{static isHandledMethod(t){return K_t.has(t)}},eSt=class extends Ym{undo(t){t.setTime(this.clone.getTime())}isChanged(t,e){return!e(this.clone.valueOf(),t.valueOf())}},roe=class extends Ym{static isHandledMethod(t){return J_t.has(t)}undo(t){for(let e of this.clone)t.add(e);for(let e of t)this.clone.has(e)||t.delete(e)}},soe=class extends Ym{static isHandledMethod(t){return Q_t.has(t)}undo(t){for(let[e,n]of this.clone.entries())t.set(e,n);for(let e of t.keys())this.clone.has(e)||t.delete(e)}},tSt=class extends Ym{constructor(t,e,n,i){super(void 0,e,n,i),this._arg1=n[0],this._weakValue=t.has(this._arg1)}isChanged(t){return this._weakValue!==t.has(this._arg1)}undo(t){this._weakValue&&!t.has(this._arg1)?t.add(this._arg1):t.delete(this._arg1)}},nSt=class extends Ym{constructor(t,e,n,i){super(void 0,e,n,i),this._weakKey=n[0],this._weakHas=t.has(this._weakKey),this._weakValue=t.get(this._weakKey)}isChanged(t){return this._weakValue!==t.get(this._weakKey)}undo(t){let e=t.has(this._weakKey);this._weakHas&&!e?t.set(this._weakKey,this._weakValue):!this._weakHas&&e?t.delete(this._weakKey):this._weakValue!==t.get(this._weakKey)&&t.set(this._weakKey,this._weakValue)}},U1=class{constructor(t){this._stack=[],this._hasOnValidate=t}static isHandledType(t){return $H(t)||Rh(t)||WH(t)}static isHandledMethod(t,e){return $H(t)?Ym.isHandledMethod(e):Rh(t)?ioe.isHandledMethod(e):t instanceof Set?roe.isHandledMethod(e):t instanceof Map?soe.isHandledMethod(e):WH(t)}get isCloning(){return this._stack.length>0}start(t,e,n){let i=Ym;Rh(t)?i=ioe:t instanceof Date?i=eSt:t instanceof Set?i=roe:t instanceof Map?i=soe:t instanceof WeakSet?i=tSt:t instanceof WeakMap&&(i=nSt),this._stack.push(new i(t,e,n,this._hasOnValidate))}update(t,e,n){this._stack[this._stack.length-1].update(t,e,n)}preferredThisArg(t,e,n){let{name:i}=t,r=U1.isHandledMethod(n,i);return this._stack[this._stack.length-1].preferredThisArg(r,i,e,n)}isChanged(t,e,n){return this._stack[this._stack.length-1].isChanged(t,e,n)}undo(t){this._previousClone!==void 0&&this._previousClone.undo(t)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},iSt={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},I$=(t,e,n={})=>{n={...iSt,...n};let i=Symbol("ProxyTarget"),{equals:r,isShallow:s,ignoreDetached:o,details:a}=n,l=new X_t(r),c=typeof n.onValidate=="function",h=new U1(c),u=(y,x,b,S,A)=>!c||h.isCloning||n.onValidate(sc.concat(l.getPath(y),x),b,S,A)===!0,d=(y,x,b,S)=>{!noe(l,n,x)&&!(o&&l.isDetached(y,t))&&f(l.getPath(y),x,b,S)},f=(y,x,b,S,A)=>{h.isCloning?h.update(y,x,S):e(sc.concat(y,x),b,S,A)},p=y=>y&&(y[i]||y),m=(y,x,b,S)=>V_t(y)||b==="constructor"||s&&!U1.isHandledMethod(x,b)||noe(l,n,b)||l.isGetInvariant(x,b)||o&&l.isDetached(x,t)?y:(S===void 0&&(S=l.getPath(x)),l.getProxy(y,sc.concat(S,b),g,i)),g={get(y,x,b){if(R$(x)){if(x===i||x===L$)return y;if(x===hbe&&!l.isUnsubscribed&&l.getPath(y).length===0)return l.unsubscribe(),y}let S=WH(y)?Reflect.get(y,x):Reflect.get(y,x,b);return m(S,y,x)},set(y,x,b,S){b=p(b);let A=y[i]||y,E=A[x];if(r(E,b)&&x in y)return!0;let M=u(y,x,b,E);return M&&l.setProperty(A,x,b,S,E)?(d(y,x,y[x],E),!0):!M},defineProperty(y,x,b){if(!l.isSameDescriptor(b,y,x)){let S=y[x];u(y,x,b.value,S)&&l.defineProperty(y,x,b,S)&&d(y,x,b.value,S)}return!0},deleteProperty(y,x){if(!Reflect.has(y,x))return!0;let b=Reflect.get(y,x),S=u(y,x,void 0,b);return S&&l.deleteProperty(y,x,b)?(d(y,x,void 0,b),!0):!S},apply(y,x,b){let S=x[i]||x;if(l.isUnsubscribed)return Reflect.apply(y,S,b);if((a===!1||a!==!0&&!a.includes(y.name))&&U1.isHandledType(S)){let A=sc.initial(l.getPath(y)),E=U1.isHandledMethod(S,y.name);h.start(S,A,b);let M=Reflect.apply(y,h.preferredThisArg(y,x,S),E?b.map(D=>p(D)):b),C=h.isChanged(S,r),T=h.stop();if(U1.isHandledType(M)&&E&&(x instanceof Map&&y.name==="get"&&(A=sc.concat(A,b[0])),M=l.getProxy(M,A,g)),C){let D={name:y.name,args:b,result:M},L=h.isCloning?sc.initial(A):A,I=h.isCloning?sc.last(A):"";u(sc.get(t,L),I,S,T,D)?f(L,I,S,T,D):h.undo(S)}return(x instanceof Map||x instanceof Set)&&$_t(M)?q_t(M,y,x,A,m):M}return Reflect.apply(y,x,b)}},v=l.getProxy(t,n.pathAsArray?[]:"",g);return e=e.bind(v),c&&(n.onValidate=n.onValidate.bind(v)),v};I$.target=t=>t&&t[L$]||t;I$.unsubscribe=t=>t[hbe]||t;var ooe=I$,rSt=typeof global=="object"&&global&&global.Object===Object&&global,ybe=rSt,sSt=typeof self=="object"&&self&&self.Object===Object&&self,oSt=ybe||sSt||Function("return this")(),Xu=oSt,aSt=Xu.Symbol,Hc=aSt,xbe=Object.prototype,lSt=xbe.hasOwnProperty,cSt=xbe.toString,NS=Hc?Hc.toStringTag:void 0;function uSt(t){var e=lSt.call(t,NS),n=t[NS];try{t[NS]=void 0;var i=!0}catch{}var r=cSt.call(t);return i&&(e?t[NS]=n:delete t[NS]),r}var hSt=uSt,dSt=Object.prototype,fSt=dSt.toString;function pSt(t){return fSt.call(t)}var mSt=pSt,gSt="[object Null]",vSt="[object Undefined]",aoe=Hc?Hc.toStringTag:void 0;function ySt(t){return t==null?t===void 0?vSt:gSt:aoe&&aoe in Object(t)?hSt(t):mSt(t)}var iy=ySt;function xSt(t){return t!=null&&typeof t=="object"}var Vf=xSt,bSt="[object Symbol]";function wSt(t){return typeof t=="symbol"||Vf(t)&&iy(t)==bSt}var MB=wSt;function _St(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}var bbe=_St,SSt=Array.isArray,sd=SSt,ASt=1/0,loe=Hc?Hc.prototype:void 0,coe=loe?loe.toString:void 0;function wbe(t){if(typeof t=="string")return t;if(sd(t))return bbe(t,wbe)+"";if(MB(t))return coe?coe.call(t):"";var e=t+"";return e=="0"&&1/t==-ASt?"-0":e}var MSt=wbe,ESt=/\s/;function CSt(t){for(var e=t.length;e--&&ESt.test(t.charAt(e)););return e}var TSt=CSt,PSt=/^\s+/;function DSt(t){return t&&t.slice(0,TSt(t)+1).replace(PSt,"")}var OSt=DSt;function LSt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var od=LSt,uoe=0/0,RSt=/^[-+]0x[0-9a-f]+$/i,ISt=/^0b[01]+$/i,BSt=/^0o[0-7]+$/i,kSt=parseInt;function FSt(t){if(typeof t=="number")return t;if(MB(t))return uoe;if(od(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=od(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=OSt(t);var n=ISt.test(t);return n||BSt.test(t)?kSt(t.slice(2),n?2:8):RSt.test(t)?uoe:+t}var hoe=FSt;function NSt(t){return t}var zSt=NSt,USt="[object AsyncFunction]",GSt="[object Function]",HSt="[object GeneratorFunction]",jSt="[object Proxy]";function VSt(t){if(!od(t))return!1;var e=iy(t);return e==GSt||e==HSt||e==USt||e==jSt}var _be=VSt,WSt=Xu["__core-js_shared__"],O5=WSt,doe=function(){var t=/[^.]+$/.exec(O5&&O5.keys&&O5.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function $St(t){return!!doe&&doe in t}var qSt=$St,XSt=Function.prototype,YSt=XSt.toString;function KSt(t){if(t!=null){try{return YSt.call(t)}catch{}try{return t+""}catch{}}return""}var ry=KSt,JSt=/[\\^$.*+?()[\]{}|]/g,ZSt=/^\[object .+?Constructor\]$/,QSt=Function.prototype,eAt=Object.prototype,tAt=QSt.toString,nAt=eAt.hasOwnProperty,iAt=RegExp("^"+tAt.call(nAt).replace(JSt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rAt(t){if(!od(t)||qSt(t))return!1;var e=_be(t)?iAt:ZSt;return e.test(ry(t))}var sAt=rAt;function oAt(t,e){return t==null?void 0:t[e]}var aAt=oAt;function lAt(t,e){var n=aAt(t,e);return sAt(n)?n:void 0}var sy=lAt,cAt=sy(Xu,"WeakMap"),qH=cAt,foe=Object.create,uAt=function(){function t(){}return function(e){if(!od(e))return{};if(foe)return foe(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),hAt=uAt;function dAt(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var fAt=dAt;function pAt(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}var mAt=pAt,gAt=800,vAt=16,yAt=Date.now;function xAt(t){var e=0,n=0;return function(){var i=yAt(),r=vAt-(i-n);if(n=i,r>0){if(++e>=gAt)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var bAt=xAt;function wAt(t){return function(){return t}}var _At=wAt,SAt=function(){try{var t=sy(Object,"defineProperty");return t({},"",{}),t}catch{}}(),BL=SAt,AAt=BL?function(t,e){return BL(t,"toString",{configurable:!0,enumerable:!1,value:_At(e),writable:!0})}:zSt,MAt=AAt,EAt=bAt(MAt),CAt=EAt;function TAt(t,e){for(var n=-1,i=t==null?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}var PAt=TAt,DAt=9007199254740991,OAt=/^(?:0|[1-9]\d*)$/;function LAt(t,e){var n=typeof t;return e=e??DAt,!!e&&(n=="number"||n!="symbol"&&OAt.test(t))&&t>-1&&t%1==0&&t<e}var B$=LAt;function RAt(t,e,n){e=="__proto__"&&BL?BL(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Sbe=RAt;function IAt(t,e){return t===e||t!==t&&e!==e}var k$=IAt,BAt=Object.prototype,kAt=BAt.hasOwnProperty;function FAt(t,e,n){var i=t[e];(!(kAt.call(t,e)&&k$(i,n))||n===void 0&&!(e in t))&&Sbe(t,e,n)}var F$=FAt;function NAt(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),r?Sbe(n,a,l):F$(n,a,l)}return n}var eC=NAt,poe=Math.max;function zAt(t,e,n){return e=poe(e===void 0?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=poe(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),fAt(t,this,a)}}var UAt=zAt,GAt=9007199254740991;function HAt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=GAt}var N$=HAt;function jAt(t){return t!=null&&N$(t.length)&&!_be(t)}var Abe=jAt,VAt=Object.prototype;function WAt(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||VAt;return t===n}var z$=WAt;function $At(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var qAt=$At,XAt="[object Arguments]";function YAt(t){return Vf(t)&&iy(t)==XAt}var moe=YAt,Mbe=Object.prototype,KAt=Mbe.hasOwnProperty,JAt=Mbe.propertyIsEnumerable,ZAt=moe(function(){return arguments}())?moe:function(t){return Vf(t)&&KAt.call(t,"callee")&&!JAt.call(t,"callee")},U$=ZAt;function QAt(){return!1}var eMt=QAt,Ebe=typeof kn=="object"&&kn&&!kn.nodeType&&kn,goe=Ebe&&typeof En=="object"&&En&&!En.nodeType&&En,tMt=goe&&goe.exports===Ebe,voe=tMt?Xu.Buffer:void 0,nMt=voe?voe.isBuffer:void 0,iMt=nMt||eMt,kL=iMt,rMt="[object Arguments]",sMt="[object Array]",oMt="[object Boolean]",aMt="[object Date]",lMt="[object Error]",cMt="[object Function]",uMt="[object Map]",hMt="[object Number]",dMt="[object Object]",fMt="[object RegExp]",pMt="[object Set]",mMt="[object String]",gMt="[object WeakMap]",vMt="[object ArrayBuffer]",yMt="[object DataView]",xMt="[object Float32Array]",bMt="[object Float64Array]",wMt="[object Int8Array]",_Mt="[object Int16Array]",SMt="[object Int32Array]",AMt="[object Uint8Array]",MMt="[object Uint8ClampedArray]",EMt="[object Uint16Array]",CMt="[object Uint32Array]",qi={};qi[xMt]=qi[bMt]=qi[wMt]=qi[_Mt]=qi[SMt]=qi[AMt]=qi[MMt]=qi[EMt]=qi[CMt]=!0;qi[rMt]=qi[sMt]=qi[vMt]=qi[oMt]=qi[yMt]=qi[aMt]=qi[lMt]=qi[cMt]=qi[uMt]=qi[hMt]=qi[dMt]=qi[fMt]=qi[pMt]=qi[mMt]=qi[gMt]=!1;function TMt(t){return Vf(t)&&N$(t.length)&&!!qi[iy(t)]}var PMt=TMt;function DMt(t){return function(e){return t(e)}}var G$=DMt,Cbe=typeof kn=="object"&&kn&&!kn.nodeType&&kn,vM=Cbe&&typeof En=="object"&&En&&!En.nodeType&&En,OMt=vM&&vM.exports===Cbe,L5=OMt&&ybe.process,LMt=function(){try{var t=vM&&vM.require&&vM.require("util").types;return t||L5&&L5.binding&&L5.binding("util")}catch{}}(),ow=LMt,yoe=ow&&ow.isTypedArray,RMt=yoe?G$(yoe):PMt,Tbe=RMt,IMt=Object.prototype,BMt=IMt.hasOwnProperty;function kMt(t,e){var n=sd(t),i=!n&&U$(t),r=!n&&!i&&kL(t),s=!n&&!i&&!r&&Tbe(t),o=n||i||r||s,a=o?qAt(t.length,String):[],l=a.length;for(var c in t)(e||BMt.call(t,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||B$(c,l)))&&a.push(c);return a}var Pbe=kMt;function FMt(t,e){return function(n){return t(e(n))}}var Dbe=FMt,NMt=Dbe(Object.keys,Object),zMt=NMt,UMt=Object.prototype,GMt=UMt.hasOwnProperty;function HMt(t){if(!z$(t))return zMt(t);var e=[];for(var n in Object(t))GMt.call(t,n)&&n!="constructor"&&e.push(n);return e}var jMt=HMt;function VMt(t){return Abe(t)?Pbe(t):jMt(t)}var H$=VMt;function WMt(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var $Mt=WMt,qMt=Object.prototype,XMt=qMt.hasOwnProperty;function YMt(t){if(!od(t))return $Mt(t);var e=z$(t),n=[];for(var i in t)i=="constructor"&&(e||!XMt.call(t,i))||n.push(i);return n}var KMt=YMt;function JMt(t){return Abe(t)?Pbe(t,!0):KMt(t)}var j$=JMt,ZMt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,QMt=/^\w*$/;function e2t(t,e){if(sd(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||MB(t)?!0:QMt.test(t)||!ZMt.test(t)||e!=null&&t in Object(e)}var t2t=e2t,n2t=sy(Object,"create"),N2=n2t;function i2t(){this.__data__=N2?N2(null):{},this.size=0}var r2t=i2t;function s2t(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var o2t=s2t,a2t="__lodash_hash_undefined__",l2t=Object.prototype,c2t=l2t.hasOwnProperty;function u2t(t){var e=this.__data__;if(N2){var n=e[t];return n===a2t?void 0:n}return c2t.call(e,t)?e[t]:void 0}var h2t=u2t,d2t=Object.prototype,f2t=d2t.hasOwnProperty;function p2t(t){var e=this.__data__;return N2?e[t]!==void 0:f2t.call(e,t)}var m2t=p2t,g2t="__lodash_hash_undefined__";function v2t(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=N2&&e===void 0?g2t:e,this}var y2t=v2t;function Jw(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Jw.prototype.clear=r2t;Jw.prototype.delete=o2t;Jw.prototype.get=h2t;Jw.prototype.has=m2t;Jw.prototype.set=y2t;var xoe=Jw;function x2t(){this.__data__=[],this.size=0}var b2t=x2t;function w2t(t,e){for(var n=t.length;n--;)if(k$(t[n][0],e))return n;return-1}var EB=w2t,_2t=Array.prototype,S2t=_2t.splice;function A2t(t){var e=this.__data__,n=EB(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():S2t.call(e,n,1),--this.size,!0}var M2t=A2t;function E2t(t){var e=this.__data__,n=EB(e,t);return n<0?void 0:e[n][1]}var C2t=E2t;function T2t(t){return EB(this.__data__,t)>-1}var P2t=T2t;function D2t(t,e){var n=this.__data__,i=EB(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}var O2t=D2t;function Zw(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Zw.prototype.clear=b2t;Zw.prototype.delete=M2t;Zw.prototype.get=C2t;Zw.prototype.has=P2t;Zw.prototype.set=O2t;var CB=Zw,L2t=sy(Xu,"Map"),z2=L2t;function R2t(){this.size=0,this.__data__={hash:new xoe,map:new(z2||CB),string:new xoe}}var I2t=R2t;function B2t(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var k2t=B2t;function F2t(t,e){var n=t.__data__;return k2t(e)?n[typeof e=="string"?"string":"hash"]:n.map}var TB=F2t;function N2t(t){var e=TB(this,t).delete(t);return this.size-=e?1:0,e}var z2t=N2t;function U2t(t){return TB(this,t).get(t)}var G2t=U2t;function H2t(t){return TB(this,t).has(t)}var j2t=H2t;function V2t(t,e){var n=TB(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}var W2t=V2t;function Qw(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Qw.prototype.clear=I2t;Qw.prototype.delete=z2t;Qw.prototype.get=G2t;Qw.prototype.has=j2t;Qw.prototype.set=W2t;var PB=Qw,$2t="Expected a function";function V$(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError($2t);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(V$.Cache||PB),n}V$.Cache=PB;var q2t=V$,X2t=500;function Y2t(t){var e=q2t(t,function(i){return n.size===X2t&&n.clear(),i}),n=e.cache;return e}var K2t=Y2t,J2t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Z2t=/\\(\\)?/g,Q2t=K2t(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(J2t,function(n,i,r,s){e.push(r?s.replace(Z2t,"$1"):i||n)}),e}),eEt=Q2t;function tEt(t){return t==null?"":MSt(t)}var nEt=tEt;function iEt(t,e){return sd(t)?t:t2t(t,e)?[t]:eEt(nEt(t))}var e_=iEt,rEt=1/0;function sEt(t){if(typeof t=="string"||MB(t))return t;var e=t+"";return e=="0"&&1/t==-rEt?"-0":e}var DB=sEt;function oEt(t,e){e=e_(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[DB(e[n++])];return n&&n==i?t:void 0}var Obe=oEt;function aEt(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var W$=aEt,boe=Hc?Hc.isConcatSpreadable:void 0;function lEt(t){return sd(t)||U$(t)||!!(boe&&t&&t[boe])}var cEt=lEt;function Lbe(t,e,n,i,r){var s=-1,o=t.length;for(n||(n=cEt),r||(r=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?Lbe(a,e-1,n,i,r):W$(r,a):i||(r[r.length]=a)}return r}var uEt=Lbe;function hEt(t){var e=t==null?0:t.length;return e?uEt(t,1):[]}var dEt=hEt;function fEt(t){return CAt(UAt(t,void 0,dEt),t+"")}var Rbe=fEt,pEt=Dbe(Object.getPrototypeOf,Object),$$=pEt,mEt="[object Object]",gEt=Function.prototype,vEt=Object.prototype,Ibe=gEt.toString,yEt=vEt.hasOwnProperty,xEt=Ibe.call(Object);function bEt(t){if(!Vf(t)||iy(t)!=mEt)return!1;var e=$$(t);if(e===null)return!0;var n=yEt.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Ibe.call(n)==xEt}var wEt=bEt;function _Et(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=t[i+e];return s}var SEt=_Et;function AEt(){this.__data__=new CB,this.size=0}var MEt=AEt;function EEt(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var CEt=EEt;function TEt(t){return this.__data__.get(t)}var PEt=TEt;function DEt(t){return this.__data__.has(t)}var OEt=DEt,LEt=200;function REt(t,e){var n=this.__data__;if(n instanceof CB){var i=n.__data__;if(!z2||i.length<LEt-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new PB(i)}return n.set(t,e),this.size=n.size,this}var IEt=REt;function t_(t){var e=this.__data__=new CB(t);this.size=e.size}t_.prototype.clear=MEt;t_.prototype.delete=CEt;t_.prototype.get=PEt;t_.prototype.has=OEt;t_.prototype.set=IEt;var WD=t_;function BEt(t,e){return t&&eC(e,H$(e),t)}var kEt=BEt;function FEt(t,e){return t&&eC(e,j$(e),t)}var NEt=FEt,Bbe=typeof kn=="object"&&kn&&!kn.nodeType&&kn,woe=Bbe&&typeof En=="object"&&En&&!En.nodeType&&En,zEt=woe&&woe.exports===Bbe,_oe=zEt?Xu.Buffer:void 0,Soe=_oe?_oe.allocUnsafe:void 0;function UEt(t,e){if(e)return t.slice();var n=t.length,i=Soe?Soe(n):new t.constructor(n);return t.copy(i),i}var GEt=UEt;function HEt(t,e){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}var jEt=HEt;function VEt(){return[]}var kbe=VEt,WEt=Object.prototype,$Et=WEt.propertyIsEnumerable,Aoe=Object.getOwnPropertySymbols,qEt=Aoe?function(t){return t==null?[]:(t=Object(t),jEt(Aoe(t),function(e){return $Et.call(t,e)}))}:kbe,q$=qEt;function XEt(t,e){return eC(t,q$(t),e)}var YEt=XEt,KEt=Object.getOwnPropertySymbols,JEt=KEt?function(t){for(var e=[];t;)W$(e,q$(t)),t=$$(t);return e}:kbe,Fbe=JEt;function ZEt(t,e){return eC(t,Fbe(t),e)}var QEt=ZEt;function eCt(t,e,n){var i=e(t);return sd(t)?i:W$(i,n(t))}var Nbe=eCt;function tCt(t){return Nbe(t,H$,q$)}var XH=tCt;function nCt(t){return Nbe(t,j$,Fbe)}var zbe=nCt,iCt=sy(Xu,"DataView"),YH=iCt,rCt=sy(Xu,"Promise"),KH=rCt,sCt=sy(Xu,"Set"),JH=sCt,Moe="[object Map]",oCt="[object Object]",Eoe="[object Promise]",Coe="[object Set]",Toe="[object WeakMap]",Poe="[object DataView]",aCt=ry(YH),lCt=ry(z2),cCt=ry(KH),uCt=ry(JH),hCt=ry(qH),c0=iy;(YH&&c0(new YH(new ArrayBuffer(1)))!=Poe||z2&&c0(new z2)!=Moe||KH&&c0(KH.resolve())!=Eoe||JH&&c0(new JH)!=Coe||qH&&c0(new qH)!=Toe)&&(c0=function(t){var e=iy(t),n=e==oCt?t.constructor:void 0,i=n?ry(n):"";if(i)switch(i){case aCt:return Poe;case lCt:return Moe;case cCt:return Eoe;case uCt:return Coe;case hCt:return Toe}return e});var U2=c0,dCt=Object.prototype,fCt=dCt.hasOwnProperty;function pCt(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&fCt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var mCt=pCt,gCt=Xu.Uint8Array,FL=gCt;function vCt(t){var e=new t.constructor(t.byteLength);return new FL(e).set(new FL(t)),e}var X$=vCt;function yCt(t,e){var n=e?X$(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var xCt=yCt,bCt=/\w*$/;function wCt(t){var e=new t.constructor(t.source,bCt.exec(t));return e.lastIndex=t.lastIndex,e}var _Ct=wCt,Doe=Hc?Hc.prototype:void 0,Ooe=Doe?Doe.valueOf:void 0;function SCt(t){return Ooe?Object(Ooe.call(t)):{}}var ACt=SCt;function MCt(t,e){var n=e?X$(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var ECt=MCt,CCt="[object Boolean]",TCt="[object Date]",PCt="[object Map]",DCt="[object Number]",OCt="[object RegExp]",LCt="[object Set]",RCt="[object String]",ICt="[object Symbol]",BCt="[object ArrayBuffer]",kCt="[object DataView]",FCt="[object Float32Array]",NCt="[object Float64Array]",zCt="[object Int8Array]",UCt="[object Int16Array]",GCt="[object Int32Array]",HCt="[object Uint8Array]",jCt="[object Uint8ClampedArray]",VCt="[object Uint16Array]",WCt="[object Uint32Array]";function $Ct(t,e,n){var i=t.constructor;switch(e){case BCt:return X$(t);case CCt:case TCt:return new i(+t);case kCt:return xCt(t,n);case FCt:case NCt:case zCt:case UCt:case GCt:case HCt:case jCt:case VCt:case WCt:return ECt(t,n);case PCt:return new i;case DCt:case RCt:return new i(t);case OCt:return _Ct(t);case LCt:return new i;case ICt:return ACt(t)}}var qCt=$Ct;function XCt(t){return typeof t.constructor=="function"&&!z$(t)?hAt($$(t)):{}}var YCt=XCt,KCt="[object Map]";function JCt(t){return Vf(t)&&U2(t)==KCt}var ZCt=JCt,Loe=ow&&ow.isMap,QCt=Loe?G$(Loe):ZCt,eTt=QCt,tTt="[object Set]";function nTt(t){return Vf(t)&&U2(t)==tTt}var iTt=nTt,Roe=ow&&ow.isSet,rTt=Roe?G$(Roe):iTt,sTt=rTt,oTt=1,aTt=2,lTt=4,Ube="[object Arguments]",cTt="[object Array]",uTt="[object Boolean]",hTt="[object Date]",dTt="[object Error]",Gbe="[object Function]",fTt="[object GeneratorFunction]",pTt="[object Map]",mTt="[object Number]",Hbe="[object Object]",gTt="[object RegExp]",vTt="[object Set]",yTt="[object String]",xTt="[object Symbol]",bTt="[object WeakMap]",wTt="[object ArrayBuffer]",_Tt="[object DataView]",STt="[object Float32Array]",ATt="[object Float64Array]",MTt="[object Int8Array]",ETt="[object Int16Array]",CTt="[object Int32Array]",TTt="[object Uint8Array]",PTt="[object Uint8ClampedArray]",DTt="[object Uint16Array]",OTt="[object Uint32Array]",Bi={};Bi[Ube]=Bi[cTt]=Bi[wTt]=Bi[_Tt]=Bi[uTt]=Bi[hTt]=Bi[STt]=Bi[ATt]=Bi[MTt]=Bi[ETt]=Bi[CTt]=Bi[pTt]=Bi[mTt]=Bi[Hbe]=Bi[gTt]=Bi[vTt]=Bi[yTt]=Bi[xTt]=Bi[TTt]=Bi[PTt]=Bi[DTt]=Bi[OTt]=!0;Bi[dTt]=Bi[Gbe]=Bi[bTt]=!1;function $D(t,e,n,i,r,s){var o,a=e&oTt,l=e&aTt,c=e&lTt;if(n&&(o=r?n(t,i,r,s):n(t)),o!==void 0)return o;if(!od(t))return t;var h=sd(t);if(h){if(o=mCt(t),!a)return mAt(t,o)}else{var u=U2(t),d=u==Gbe||u==fTt;if(kL(t))return GEt(t,a);if(u==Hbe||u==Ube||d&&!r){if(o=l||d?{}:YCt(t),!a)return l?QEt(t,NEt(o,t)):YEt(t,kEt(o,t))}else{if(!Bi[u])return r?t:{};o=qCt(t,u,a)}}s||(s=new WD);var f=s.get(t);if(f)return f;s.set(t,o),sTt(t)?t.forEach(function(g){o.add($D(g,e,n,g,t,s))}):eTt(t)&&t.forEach(function(g,v){o.set(v,$D(g,e,n,v,t,s))});var p=c?l?zbe:XH:l?j$:H$,m=h?void 0:p(t);return PAt(m||t,function(g,v){m&&(v=g,g=t[v]),F$(o,v,$D(g,e,n,v,t,s))}),o}var jbe=$D,LTt=1,RTt=4;function ITt(t){return jbe(t,LTt|RTt)}var OB=ITt,BTt="__lodash_hash_undefined__";function kTt(t){return this.__data__.set(t,BTt),this}var FTt=kTt;function NTt(t){return this.__data__.has(t)}var zTt=NTt;function NL(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new PB;++e<n;)this.add(t[e])}NL.prototype.add=NL.prototype.push=FTt;NL.prototype.has=zTt;var UTt=NL;function GTt(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var HTt=GTt;function jTt(t,e){return t.has(e)}var VTt=jTt,WTt=1,$Tt=2;function qTt(t,e,n,i,r,s){var o=n&WTt,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),h=s.get(e);if(c&&h)return c==e&&h==t;var u=-1,d=!0,f=n&$Tt?new UTt:void 0;for(s.set(t,e),s.set(e,t);++u<a;){var p=t[u],m=e[u];if(i)var g=o?i(m,p,u,e,t,s):i(p,m,u,t,e,s);if(g!==void 0){if(g)continue;d=!1;break}if(f){if(!HTt(e,function(v,y){if(!VTt(f,y)&&(p===v||r(p,v,n,i,s)))return f.push(y)})){d=!1;break}}else if(!(p===m||r(p,m,n,i,s))){d=!1;break}}return s.delete(t),s.delete(e),d}var Vbe=qTt;function XTt(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n}var YTt=XTt;function KTt(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var JTt=KTt,ZTt=1,QTt=2,ePt="[object Boolean]",tPt="[object Date]",nPt="[object Error]",iPt="[object Map]",rPt="[object Number]",sPt="[object RegExp]",oPt="[object Set]",aPt="[object String]",lPt="[object Symbol]",cPt="[object ArrayBuffer]",uPt="[object DataView]",Ioe=Hc?Hc.prototype:void 0,R5=Ioe?Ioe.valueOf:void 0;function hPt(t,e,n,i,r,s,o){switch(n){case uPt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case cPt:return!(t.byteLength!=e.byteLength||!s(new FL(t),new FL(e)));case ePt:case tPt:case rPt:return k$(+t,+e);case nPt:return t.name==e.name&&t.message==e.message;case sPt:case aPt:return t==e+"";case iPt:var a=YTt;case oPt:var l=i&ZTt;if(a||(a=JTt),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;i|=QTt,o.set(t,e);var h=Vbe(a(t),a(e),i,r,s,o);return o.delete(t),h;case lPt:if(R5)return R5.call(t)==R5.call(e)}return!1}var dPt=hPt,fPt=1,pPt=Object.prototype,mPt=pPt.hasOwnProperty;function gPt(t,e,n,i,r,s){var o=n&fPt,a=XH(t),l=a.length,c=XH(e),h=c.length;if(l!=h&&!o)return!1;for(var u=l;u--;){var d=a[u];if(!(o?d in e:mPt.call(e,d)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=o;++u<l;){d=a[u];var v=t[d],y=e[d];if(i)var x=o?i(y,v,d,e,t,s):i(v,y,d,t,e,s);if(!(x===void 0?v===y||r(v,y,n,i,s):x)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var b=t.constructor,S=e.constructor;b!=S&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof S=="function"&&S instanceof S)&&(m=!1)}return s.delete(t),s.delete(e),m}var vPt=gPt,yPt=1,Boe="[object Arguments]",koe="[object Array]",C3="[object Object]",xPt=Object.prototype,Foe=xPt.hasOwnProperty;function bPt(t,e,n,i,r,s){var o=sd(t),a=sd(e),l=o?koe:U2(t),c=a?koe:U2(e);l=l==Boe?C3:l,c=c==Boe?C3:c;var h=l==C3,u=c==C3,d=l==c;if(d&&kL(t)){if(!kL(e))return!1;o=!0,h=!1}if(d&&!h)return s||(s=new WD),o||Tbe(t)?Vbe(t,e,n,i,r,s):dPt(t,e,l,n,i,r,s);if(!(n&yPt)){var f=h&&Foe.call(t,"__wrapped__"),p=u&&Foe.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return s||(s=new WD),r(m,g,n,i,s)}}return d?(s||(s=new WD),vPt(t,e,n,i,r,s)):!1}var wPt=bPt;function Wbe(t,e,n,i,r){return t===e?!0:t==null||e==null||!Vf(t)&&!Vf(e)?t!==t&&e!==e:wPt(t,e,n,i,Wbe,r)}var _Pt=Wbe;function SPt(t,e){return t!=null&&e in Object(t)}var APt=SPt;function MPt(t,e,n){e=e_(e,t);for(var i=-1,r=e.length,s=!1;++i<r;){var o=DB(e[i]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++i!=r?s:(r=t==null?0:t.length,!!r&&N$(r)&&B$(o,r)&&(sd(t)||U$(t)))}var EPt=MPt;function CPt(t,e){return t!=null&&EPt(t,e,APt)}var TPt=CPt,PPt=function(){return Xu.Date.now()},I5=PPt,DPt="Expected a function",OPt=Math.max,LPt=Math.min;function RPt(t,e,n){var i,r,s,o,a,l,c=0,h=!1,u=!1,d=!0;if(typeof t!="function")throw new TypeError(DPt);e=hoe(e)||0,od(n)&&(h=!!n.leading,u="maxWait"in n,s=u?OPt(hoe(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d);function f(A){var E=i,M=r;return i=r=void 0,c=A,o=t.apply(M,E),o}function p(A){return c=A,a=setTimeout(v,e),h?f(A):o}function m(A){var E=A-l,M=A-c,C=e-E;return u?LPt(C,s-M):C}function g(A){var E=A-l,M=A-c;return l===void 0||E>=e||E<0||u&&M>=s}function v(){var A=I5();if(g(A))return y(A);a=setTimeout(v,m(A))}function y(A){return a=void 0,d&&i?f(A):(i=r=void 0,o)}function x(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function b(){return a===void 0?o:y(I5())}function S(){var A=I5(),E=g(A);if(i=arguments,r=this,l=A,E){if(a===void 0)return p(l);if(u)return clearTimeout(a),a=setTimeout(v,e),f(l)}return a===void 0&&(a=setTimeout(v,e)),o}return S.cancel=x,S.flush=b,S}var $be=RPt;function IPt(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var BPt=IPt;function kPt(t,e){return e.length<2?t:Obe(t,SEt(e,0,-1))}var FPt=kPt;function NPt(t,e){return _Pt(t,e)}var Y$=NPt;function zPt(t,e){return e=e_(e,t),t=FPt(t,e),t==null||delete t[DB(BPt(e))]}var UPt=zPt;function GPt(t){return wEt(t)?void 0:t}var HPt=GPt,jPt=1,VPt=2,WPt=4,$Pt=Rbe(function(t,e){var n={};if(t==null)return n;var i=!1;e=bbe(e,function(s){return s=e_(s,t),i||(i=s.length>1),s}),eC(t,zbe(t),n),i&&(n=jbe(n,jPt|VPt|WPt,HPt));for(var r=e.length;r--;)UPt(n,e[r]);return n}),ZH=$Pt;function qPt(t,e,n,i){if(!od(t))return t;e=e_(e,t);for(var r=-1,s=e.length,o=s-1,a=t;a!=null&&++r<s;){var l=DB(e[r]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(r!=o){var h=a[l];c=i?i(h,l,a):void 0,c===void 0&&(c=od(h)?h:B$(e[r+1])?[]:{})}F$(a,l,c),a=a[l]}return t}var XPt=qPt;function YPt(t,e,n){for(var i=-1,r=e.length,s={};++i<r;){var o=e[i],a=Obe(t,o);n(a,o)&&XPt(s,e_(o,t),a)}return s}var KPt=YPt;function JPt(t,e){return KPt(t,e,function(n,i){return TPt(t,i)})}var ZPt=JPt,QPt=Rbe(function(t,e){return t==null?{}:ZPt(t,e)}),G2=QPt,qbe,e3t=new Promise(t=>{qbe=t}),Noe=!1;async function t3t(){if(Noe)return;let t=await Nw(()=>import("./physics-dee4de67.js"),[]);await t.init(),qbe(t),Noe=!0}var is=class{modifyById(t,e){let n=this;if(n[t]===void 0)throw new Error("not expected");{let i={...n,[t]:e};return Object.setPrototypeOf(i,is.prototype),i}}add(t,e){var n;return((n=this.runOp({type:1,id:t,data:e}))==null?void 0:n.data)??this}runOp(t){let e=this;if(t.type===1){let n=e[t.id],i;n===void 0?i={type:2,id:t.id}:i={type:1,id:t.id,data:n};let{id:r,data:s}=t,o={...e,[r]:s};return Object.setPrototypeOf(o,is.prototype),{data:o,actual:t,reverse:i}}else if(t.type===2){let{id:n}=t,i=e[n];if(i===void 0)return null;{let r={...e};return Object.setPrototypeOf(r,is.prototype),delete r[n],{data:r,actual:t,reverse:{type:1,id:n,data:i}}}}return null}};function K$(t){if(t.deepFreeze!==void 0){t.deepFreeze(t);return}let e=Object.getOwnPropertyNames(t);for(let n of e){let i=t[n];i&&typeof i=="object"&&K$(i)}return Object.freeze(t)}function n3t(t,e){let n=0;for(;n<t.length&&n<e.length;){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1;n+=1}return n!==e.length?-1:n!==t.length?1:0}var Xbe=class extends Error{};function B5(t){let e={...t};return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),e}function dm(t,e,n){if(t===void 0?e===void 0?(t=0,e=10):t=e-10:e===void 0&&(e=t+10),t>e){let s=t;t=e,e=s}let i=[],r=1/(n+1);for(let s=0;s<n;s++){let o=t+(e-t)*(s+.75+Math.random()*.5)*r;i.push(o)}return i}function J$(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array}function i3t(){return typeof process<"u"}function Ybe(t,e){for(let n of t)e(n.id,n.data)!==!0&&Ybe(n.children,e)}function Kbe(t,e){if(e(t.id,t.data)!==!0)for(let n of t.children)Kbe(n,e)}var Ta=class extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ta.prototype)}deepFreeze(){let t=0;for(;t<this.length;)K$(this[t]),t++}fillCaches0(t,e){this.objCaches.set(t.id,t),this.parentCaches.set(t.id,e);for(let n of t.children)this.fillCaches0(n,t.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let t of this)this.fillCaches0(t,null)}}randomId(){this.fillCaches();let t=Array.from(this.objCaches.keys());if(t.length!==0)return t[Math.max(0,Math.floor(Math.random()*t.length)-1)]}nonExistOrDescendantOf(t,e){if(!this.has(t))return!0;for(;t;){let n=this.parent(t);if(n===e)return!0;t=n}return!1}isDescendantOf(t,e){for(;t;){let n=this.parent(t);if(n===e)return!0;t=n}return!1}data(t){var e;return(e=this.get(t))==null?void 0:e.data}has(t){return this.childrenOf(t)!==void 0}get(t){return this.fillCaches(),this.objCaches.get(t)}childrenOf(t){var e;return t===null?this:(e=this.get(t))==null?void 0:e.children}traverseFrom(t,e){if(t===null)this.traverse(e);else{let n=this.get(t);n&&Kbe(n,e)}}traverse(t){Ybe(this,t)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(t){return this.fillCaches(),this.parentCaches.get(t)}childrenArray(t){return t===null?this:this.get(t).children}modifyById(t,e){if(this.get(t)===void 0)throw new Error("not expected");{let n=this.parent(t),i=this.childrenArray(n),r=i.findIndex(o=>o.id===t);if(r<0)throw new Error("not expected");let s=i[r];return i=[...i],i[r]={...s,data:e},this.modifyArrayBy(n,i)}}modifyArrayBy(t,e){let n=t,i=e;for(;n!==null;){let s=i,o=n;if(n=this.parent(n),n===void 0)throw new Error;i=this.childrenArray(n);let a=i.findIndex(l=>l.id===o);if(a<0)throw new Error;i=[...i],i[a]={...i[a],children:s}}Object.setPrototypeOf(i,Ta.prototype);let r=i;return r.fillCaches(),r}runOp(t){switch(t.type){case 7:return this.addOp(t);case 8:return this.deleteOp(t);case 9:return this.moveOp(t)}return null}checkDuplicatedIdRec({id:t,children:e}){if(this.get(t)!==void 0)return!0;for(let n of e)if(this.checkDuplicatedIdRec(n))return!0;return!1}addOp(t){let{parent:e,fi:n,id:i,data:r,children:s}=t;if(e!==null&&this.get(e)===void 0||this.checkDuplicatedIdRec(t))return null;{let o=e,a=this.childrenArray(o),l={fi:n,id:i,data:r,children:s};return a=[...a,l],a.sort((c,h)=>c.fi-h.fi),t.localIndex=a.indexOf(l),{data:this.modifyArrayBy(o,a),actual:t,reverse:{type:8,id:i}}}}deleteOp(t){let{id:e}=t;if(this.get(e)===null)return null;{let n=this.parent(e);if(n===void 0)return null;let i=this.childrenArray(n),r=i.findIndex(o=>o.id===e);t.localIndex=r,i=[...i];let s=i.splice(r,1)[0];return{data:this.modifyArrayBy(n,i),actual:t,reverse:{type:7,...s,parent:n}}}}moveOp(t){let{parent:e,fi:n,id:i}=t;if(e!==null&&this.get(e)===void 0)return this.deleteOp({type:8,id:i});if(e!==null){let u=e;for(;u!==null;){if(u===void 0)throw new Error;if(u===i)throw new Xbe("cyclic tree");u=this.parent(u)}}let r=this.parent(i);if(r===void 0)return null;let s=r,o=this.childrenArray(r),a=o.findIndex(u=>u.id===i);o=[...o];let l=o.splice(a,1)[0],c=this.modifyArrayBy(r,o);r=e,o=c.childrenArray(r);let h=l.fi;return l={...l,fi:n},o=[...o,l],o.sort((u,d)=>u.fi-d.fi),t.localIndex=o.indexOf(l),c=c.modifyArrayBy(r,o),{data:c,actual:t,reverse:{type:9,parent:s,fi:h,id:i}}}previous(t,e){if(e===null){let i=this.childrenArray(t);return i.length===0?null:i[i.length-1].id}let n=null;for(let i of this.childrenArray(t)){if(i.id===e)return n;n=i.id}return null}traverseSortNext(t){let e=this.parent(t);if(e!==void 0){let n=this.childrenArray(e),i=n.findIndex(r=>r.id===t)+1;if(i<n.length)return n[i].id;if(e)return this.traverseSortNext(e)}}sortNext(t){let e=this.childrenArray(t);return e.length>0?e[0].id:this.traverseSortNext(t)}traverseSortPrevious(t){let e=this.childrenArray(t);return e.length>0?this.traverseSortPrevious(e[e.length-1].id):t}sortPrevious(t){let e=this.parent(t);if(e!==void 0){let n=this.childrenArray(e),i=n.findIndex(r=>r.id===t)-1;return i>=0?this.traverseSortPrevious(n[i].id):e}}getAllSorted(t){let e=[];for(let n of t){let i=this.getWithSortKey(n.id);i!==void 0&&e.push({...n,...i})}e.sort((n,i)=>n3t(n.sortKey,i.sortKey));for(let n of e)delete n.sortKey;return e}getWithSortKey(t){var e=t;let n=[],i=this.get(e),r=i;if(i!==void 0){for(;e;)n.splice(0,0,i.fi),e=this.parent(e),e!==null&&(i=this.get(e));return{...r,sortKey:n}}}insertBeforeHelper(t,e,n){return this.insertAfterHelper(t,this.previous(t,e),n)}insertAfterHelper(t,e,n){let i=this.childrenArray(t);if(e===null){if(i.length===0)return dm(0,n,n);{let r=i[0].fi;return dm(r-n,r,n)}}else{let r=this.get(e);if(r===void 0||this.parent(e)!==t)throw new Error("illegal args");let s=i.find(o=>o.fi>r.fi);if(s===void 0){let o=i[i.length-1].fi;return dm(o,o+n,n)}else return dm(r.fi,s.fi,n)}}},zL;(t=>{function e(n,i){if(i.type!==0)return null;if(Array.isArray(n)){let r=i.props,s={},o=[...n],a=!1;if(r)for(let l of Object.keys(r)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");s[l]=o[c],o[c]=r[l],a=!0}return a?{data:o,actual:i,reverse:{type:0,props:s}}:null}else{let r=i.props,s={},o={...n},a=!1;if(r)for(let l of Object.keys(r)){s[l]=o[l];let c=r[l];c===void 0?delete o[l]:o[l]=c,a=!0}return a?{data:o,actual:i,reverse:{type:0,props:s}}:null}}t.runOp=e})(zL||(zL={}));var Rn=class extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Rn.prototype)}deepFreeze(){let t=0;for(;t<this.length;)K$(this[t]),t++}fillCaches0(t){this.objCaches.set(t.id,t)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let t of this)this.fillCaches0(t)}}randomId(){this.fillCaches();let t=Array.from(this.objCaches.keys());if(t.length!==0)return t[Math.max(0,Math.floor(Math.random()*t.length)-1)]}data(t){var e;return(e=this.get(t))==null?void 0:e.data}get(t){return this.fillCaches(),this.objCaches.get(t)}modifyById(t,e){if(this.get(t)===void 0)throw new Error("not expected");{let n=this,i=n.findIndex(s=>s.id===t);if(i<0)throw new Error("not expected");let r=n[i];return n=[...n],n[i]={...r,data:e},this.modifyArrayBy(n)}}modifyArrayBy(t){Object.setPrototypeOf(t,Rn.prototype);let e=t;return i3t()||e.fillCaches(),e}runOp(t){switch(t.type){case 4:return this.addOp(t);case 5:return this.deleteOp(t);case 6:return this.moveOp(t)}return null}addOp(t){let{fi:e,id:n,data:i}=t,r=this,s={fi:e,id:n,data:i};return r=[...r,s],r.sort((o,a)=>o.fi-a.fi),t.localIndex=r.indexOf(s),{data:this.modifyArrayBy(r),actual:t,reverse:{type:5,id:n}}}deleteOp(t){let{id:e}=t,n=this,i=n.findIndex(s=>s.id===e);if(i===-1)return null;t.localIndex=i,n=[...n];let r=n.splice(i,1)[0];return{data:this.modifyArrayBy(n),actual:t,reverse:{type:4,...r}}}moveOp(t){let{fi:e,id:n}=t,i=this;i=[...i];let r=i.findIndex(a=>a.id===n);if(r===-1)return null;let s=i[r].fi,o={...i[r],fi:e};return i[r]=o,i.sort((a,l)=>a.fi-l.fi),t.localIndex=i.indexOf(o),{data:this.modifyArrayBy(i),actual:t,reverse:{type:6,fi:s,id:n}}}previous(t){if(t===null)return this.length===0?null:this[this.length-1].id;let e=null;for(let n of this){if(n.id===t)return e;e=n.id}return null}insertBeforeHelper(t,e){return this.insertAfterHelper(this.previous(t),e)}insertAfterHelper(t,e){let n=this;if(t===null){if(n.length===0)return dm(0,e,e);{let i=n[0].fi;return dm(i-e,i,e)}}else{let i=this.get(t);if(i===void 0)throw new Error("illegal args");let r=n.find(s=>s.fi>i.fi);if(r===void 0){let s=n[n.length-1].fi;return dm(s,s+e,e)}else return dm(i.fi,r.fi,e)}}};function aw(t){return t&&typeof t=="object"&&t instanceof ro}var ro=class{unusedFunOverridesTable(t){}runOp(t){let e=[],n=this,i=0,r={};for(;i<t.path.length;){if(e.push(n),n=n===void 0?void 0:n[t.path[i]],n!==void 0&&!aw(n))return null;i+=1}n=n?B5(n):new ro;for(let[a,l]of Object.entries(t.props)){let c=n[a];r[a]=c,l===void 0?delete n[a]:n[a]=l}for(;i>0;){if(Object.keys(n).length===0){let a=e[i-1];a&&(n=B5(a),delete n[t.path[i-1]])}else{let a=e[i-1];if(a){let l=B5(a);l[t.path[i-1]]=n,n=l}else{let l=new ro;l[t.path[i-1]]=n,n=l}}i-=1}let s=Object.setPrototypeOf(n,ro.prototype),o={...t,props:r};return{data:s,actual:t,reverse:o}}},nv;(t=>{function e(r,s){return H2(r,s)??r}t.apply=e;function n(r,s){return Q$(r,s)}t.merge=n;function i(r,s){let o=0,a=s.path,l=r;for(;o<a.length&&l!==void 0;){if(l=Kh.zoomOnce(l,a[o]),l===void 0)return s;if(!aw(l))return;o+=1}if(l===void 0)return s;if(aw(l))if(s.type===0){let c={...s.props};for(let h of Object.keys(l))delete c[h];return{...s,props:c}}else if(s.type===1||s.type===4||s.type===7){let c=Z$([s],l);return c?(console.log(c),c):s}else return s}t.filterOp=i})(nv||(nv={}));function Z$(t,e){if(e===void 0)return;let n=!1,i=t.map(r=>{let s=r.id,o=H2(r.data,e[s]);if(n=n||o!==void 0,o===void 0&&(o=r.data),r.children){let a=Z$(r.children,e);return a!==void 0?n=!0:a=r.children,{...r,id:s,data:o,children:a}}else return{...r,id:s,data:o}});if(n)return i}function r3t(t,e){if(e===void 0)return;let n=!1,i=t.map(r=>{let s=r.id,o=H2(r.data,e[s]);return n=n||o!==void 0,o===void 0&&(o=r.data),{...r,id:s,data:o}});if(n)return Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i}function H2(t,e){if(!aw(e))return e;if(t instanceof Ta){let n=Z$(t,e);return n!==void 0&&Object.setPrototypeOf(n,Object.getPrototypeOf(t)),n}else{if(t instanceof Rn)return r3t(t,e);if(Array.isArray(t)){let n=!1,i=t.map((r,s)=>{let o=H2(r,e[s]);return n=n||o!==void 0,o===void 0&&(o=r),o});return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i):void 0}else{if(t instanceof ro)return Q$(t,e);if(t&&typeof t=="object"){let n={},i=!1;for(let[r,s]of Object.entries(t)){let o=H2(s,e[r]);i=i||o!==void 0,o===void 0&&(o=s),n[r]=o}return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(t)),n):void 0}}}}function Q$(t,e){if(t===void 0)return e;if(e===void 0)return t;if(!aw(e))return e;if(!aw(t))return nv.apply(t,e);let n=new Set;for(let r of Object.keys(t))n.add(r);for(let r of Object.keys(e))n.add(r);let i=new ro;for(let r of n){let s=Q$(t===void 0?void 0:t[r],e===void 0?void 0:e[r]);i[r]=s}return i}function s3t(t,e){let n={cur:[],result:[],len:0};return t=j2(t,e,n)??t,[t,n.result]}function UL(t,e){return t===null?null:(t.cur[t.len]=e,t.len+=1,t)}function GL(t){t&&(t.len-=1)}function o3t(t){if(t===null)return null;t.result.push(t.cur.slice(0,t.len))}function Jbe(t,e,n){let i=!1,r=t.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(i=!0,o=a,n!==null))throw new Error("not supported");let l=j2(s.data,e,UL(n,o));GL(n),i=i||l!==void 0,l===void 0&&(l=s.data);let c=Jbe(s.children,e,n);return c!==void 0?i=!0:c=s.children,{...s,id:o,data:l,children:c}});if(i)return r}function a3t(t,e,n){let i=!1,r=t.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(i=!0,o=a,n!==null))throw new Error("not supported");let l=j2(s.data,e,UL(n,o));return GL(n),i=i||l!==void 0,l===void 0&&(l=s.data),{...s,id:o,data:l}});if(i)return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r}function j2(t,e,n){if(t instanceof Ta){let i=Jbe(t,e,n);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i}else{if(t instanceof Rn)return a3t(t,e,n);if(Array.isArray(t)){let i=!1,r=t.map((s,o)=>{let a=j2(s,e,UL(n,o));return GL(n),i=i||a!==void 0,a===void 0&&(a=s),a});return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r):void 0}else if(t&&typeof t=="object"&&!J$(t)){let i={},r=!1;for(let[s,o]of Object.entries(t))if(s!=="name"&&s!=="text"){let a=e[s];if(typeof a=="string"){if(n!==null)throw new Error("not supported");r=!0,s=a}let l=j2(o,e,UL(n,s));GL(n),r=r||l!==void 0,l===void 0&&(l=o),i[s]=l}else i[s]=o;return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i):void 0}else if(typeof t=="string"){let i=e[t];if(i!==void 0){if(t.length!==36)throw new Error("for now you should only call this method when the key is a uuid");o3t(n)}return i}else return}}var QH;(t=>{function e(n,i){let r=Kh.zoom(i,n.path);if(typeof r=="object"){let s={};for(let o of Object.keys(n.props))s[o]=r[o];return{...n,props:s}}else return{...n,props:{}}}t.replaceProps=e})(QH||(QH={}));var ul;(t=>{function e(l,c){return{...l,path:l.path.slice(c)}}t.drop=e;function n(l,c){var h;return((h=i(l,c))==null?void 0:h.data)??l}t.applySimple=n;function i(l,c){var d,f;let h=c.path;for(var u=[];;){let p;if(l instanceof ro&&c.type===0&&(p=l.runOp({...c,path:h.slice(u.length)}),p===null&&(p=void 0)),u.length===h.length&&(l instanceof Ta||l instanceof Rn||l instanceof is?p=l.runOp(c):p=zL.runOp(l,c)),p!==void 0)if(p!==null){let v=p.data;for(let y=u.length-1;y>=0;y--){let x=h[y],b=u[y];if(b instanceof Ta){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof Rn){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof is){if(typeof x=="number")throw new Error("illegal arg");v=b.modifyById(x,v)}else if(b instanceof ro){let S={...b,[x]:v};v=Object.setPrototypeOf(S,ro.prototype)}else if(typeof b=="object")if(Array.isArray(b)){if(typeof x=="string"&&(x=parseInt(x),isNaN(x)))throw new Error("Invalid path");let S=v;v=[...b],v[x]=S}else v={...b,[x]:v};else return null}return{data:v,actual:{...p.actual,path:h},reverse:{...p.reverse,path:h}}}else return null;let m=h[u.length],g;if(l instanceof Ta){if(typeof m=="number")throw new Error("");g=(d=l.get(m))==null?void 0:d.data}else if(l instanceof Rn){if(typeof m=="number")throw new Error("");g=(f=l.get(m))==null?void 0:f.data}else l!==null&&(g=l[m]);if(g!==void 0)u.push(l),l=g;else return null}}t.apply=i;function r(l,c){for(let h=0;h<l.length&&h<c.length;h++)if(l[h]!==c[h])return!0;return!1}t.pathDisjoint=r;function s(l,c){if(l.length!==c.length)return!1;for(let h=0;h<l.length;h++)if(l[h]!==c[h])return!1;return!0}t.pathEq=s;function o(l,c){return r(l.path,c.path)}t.commutative=o;function a(l,c){return l.type===0&&c.type===0&&s(l.path,c.path)?Object.keys(l.props).every(h=>c.props[h]!==void 0):!1}t.subsumed=a})(ul||(ul={}));var zoe;(t=>{function e(){return[]}t.empty=e;function n(c,h){let u=[];for(let d of c){let[f,...p]=d.path;f===h&&u.push({...d,path:p})}return u}t.removePrefix=n;function i(c,h){return c.map(u=>({...u,path:[h,...u.path]}))}t.addPrefix=i;function r(c,h){return[...c,...h]}t.concat=r;function s(c,h){return[...c.filter(u=>!h.some(d=>ul.subsumed(u,d))),...h]}t.compress=s;function o(c,h){return c.every(u=>h.every(d=>ul.commutative(u,d)))}t.commutative=o;function a(c,h){for(let u of h){let d=l(c,u);d!==null&&(c=d.data)}return c}t.applyAll=a;function l(c,h){var u=c;let d=[],f=[];for(let p of h)try{if(p.type===3){let m=Kh.zoom(u,[...p.path,p.id]),g=ul.apply(u,{...p,type:2});if(g!==null){u=g.data;let[v,y]=s3t(u,{[p.id]:m});u=v;for(let x of y){let b=x[x.length-1];x.splice(x.length-1,1),d.push({type:0,path:x,props:{[b]:m}}),f.push({type:0,path:x,props:{[b]:p.id}})}f.push(g.reverse),d.push(g.actual)}}else{let m=ul.apply(u,p);m!==null&&(d.push(m.actual),u=m.data,f.push(m.reverse))}}catch(m){if(m instanceof Xbe)return null;throw m}return{data:u,actual:d,reverse:f.reverse()}}t.apply=l})(zoe||(zoe={}));var Zbe=Symbol(),l3t=Symbol(),LB=Symbol(),tC=class{reportOp(t,e,n=[]){let i=this;if(e===null)return;i._current=e.data;let r=n;for(;!(i instanceof ewe);){let s=i._path,o=i._current;if(s!==""&&r.splice(0,0,s),i=i._parent,i===null)return;i.update(s,o)}i.push(r,t,e.actual,e.reverse)}deleteChildren(t){if(this._children){let e=this._children[t];if(e){let n=e[LB];n&&n(),delete this._children[t]}}}},c3t=class extends tC{constructor(t,e,n){super(),this._parent=t,this._path=e,this._current=n}update(t,e){if(Array.isArray(this._current)){if(typeof t=="string"&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid path");this._current=[...this._current],this._current[t]=e}else this._current={...this._current,[t]:e}}runOp(t){this.reportOp(t,zL.runOp(this._current,t),t.path)}},u3t=class extends tC{constructor(t,e,n){super(),this._parent=t,this._path=e,this._current=n}update(t,e){this._current={...this._current,[t]:e},Object.setPrototypeOf(this._current,is.prototype)}runOp(t){this.reportOp(t,this._current.runOp(t))}},Qbe={get(t,e){if(e===LB)return()=>{t._parent=null};if(e===Zbe)return t._current;if(e===l3t)return t;let{_current:n,_children:i}=t;if(e==="push"&&Array.isArray(n))throw new Error("not supported to expand array");let r=i===void 0?void 0:i[e];if(r!==void 0)return r;let s=n[e],o=RB(t,e,s);return o!==s?(i===void 0&&(i={},t._children=i),i[e]=o,o):s},has(t,e){return e in t._current},ownKeys(t){return Reflect.ownKeys(t._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(t){return Object.getPrototypeOf(t._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(t,e){let n=t._current,i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:n[e]}}},h3t={...Qbe,set(t,e,n){let i={type:0,props:{[e]:To(n)??n}};return t.deleteChildren(e),t.runOp(i),!0},deleteProperty(t,e){let n={type:0,props:{[e]:void 0}};return t.deleteChildren(e),t.runOp(n),!0}},d3t={...Qbe,set(t,e,n){return n===void 0?this.deleteProperty(t,e):(t.deleteChildren(e),t.runOp({type:1,id:e,data:n})),!0},deleteProperty(t,e){return t.runOp({type:2,id:e}),!0}},e7=class extends tC{constructor(t,e,n){super(),this._children={},this._parent=t,this._path=e,this._current=n,this[LB]=()=>{this._parent=null}}unproxy(){return this._current}update(t,e){this._current=this._current.modifyById(t,e)}runOp(t){this.reportOp(t,this._current.runOp(t))}randomId(){return this._current.randomId()}isDescendantOf(t,e){return this._current.isDescendantOf(t,e)}childrenOf(t){return this._current.childrenOf(t)}traverse(t){return this._current.traverse(t)}get(t){return this._current.get(t)}parent(t){return this._current.parent(t)}traverse(t){this._current.traverse((e,n)=>{t(e,this.data(e))})}data(t){var o;let{_current:e,_children:n}=this,i=n===void 0?void 0:n[t];if(i!==void 0)return i;let r=(o=e.get(t))==null?void 0:o.data,s=RB(this,t,r);return s!==r?(n===void 0&&(n={},this._children=n),n[t]=s,s):r}add(t,e,n,i,r){this.runOp({type:7,parent:t,fi:e,id:n,data:i,children:r})}move(t,e,n){this.runOp({type:9,parent:t,fi:e,id:n})}insertAfter(t,e,n){let i=this._current.insertAfterHelper(t,e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.add(t,i[r],s.id,s.data,s.children)}}insertBefore(t,e,n){let i=this._current.insertBeforeHelper(t,e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.add(t,i[r],s.id,s.data,s.children)}}moveAfter(t,e,n){let i=this._current.insertAfterHelper(t,e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.move(t,i[r],s)}}moveBefore(t,e,n){let i=this._current.insertBeforeHelper(t,e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.move(t,i[r],s)}}delete(t){this.deleteChildren(t),this.runOp({type:8,id:t})}sortNext(t){return this._current.sortNext(t)}sortPrevious(t){return this._current.sortPrevious(t)}getAllSorted(t){return this._current.getAllSorted(t)}},t7=class extends tC{constructor(t,e,n){super(),this._children={},this._parent=t,this._path=e,this._current=n,this[LB]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(t){let e=this.length;for(let n=0;n<e;n++){let i=this._current[n].id,r=this._current[n].fi;t(this.data(this._current[n].id),i,r)}}find(t){let e=this.length;for(let n=0;n<e;n++){let i=this._current[n].id;if(t(this.data(i),i))return this.get(i)}}update(t,e){this._current=this._current.modifyById(t,e)}randomId(){return this._current.randomId()}get(t){return{...this._current.get(t),data:this.data(t)}}data(t){var o;let{_current:e,_children:n}=this,i=n===void 0?void 0:n[t];if(i!==void 0)return i;let r=(o=e.get(t))==null?void 0:o.data,s=RB(this,t,r);return s!==r?(n===void 0&&(n={},this._children=n),n[t]=s,s):r}runOp(t){this.reportOp(t,this._current.runOp(t))}add(t,e,n){this.runOp({type:4,fi:t,id:e,data:n})}move(t,e){this.runOp({type:6,fi:t,id:e})}insertAfter(t,e){let n=this._current.insertAfterHelper(t,e.length);for(let i=0;i<e.length;i++){let r=e[i];this.add(n[i],r.id,r.data)}}insertBefore(t,e){let n=this._current.insertBeforeHelper(t,e.length);for(let i=0;i<e.length;i++){let r=e[i];this.add(n[i],r.id,r.data)}}moveAfter(t,e){let n=this._current.insertAfterHelper(t,e.length);for(let i=0;i<e.length;i++){let r=e[i];this.move(n[i],r)}}moveBefore(t,e){let n=this._current.insertBeforeHelper(t,e.length);for(let i=0;i<e.length;i++){let r=e[i];this.move(n[i],r)}}delete(t){this.deleteChildren(t),this.runOp({type:5,id:t})}};function k5(t,e,n){if(t.length>0){let i=t[t.length-1];if(i.type===0&&e.type===0&&Kh.equal(i.path,n)){Object.assign(i.props,e.props);return}}t.push({...e,path:n})}var ewe=class extends tC{constructor(t){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=t}update(t,e){if(t!=="")throw new Error("");this._current=e}push(t,e,n,i){k5(this.ts,e,t),k5(this.actual,n,t),k5(this.reverse,i,t)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function RB(t,e,n){return n instanceof Ta?new e7(t,e,n):n instanceof Rn?new t7(t,e,n):n instanceof is?new Proxy(new u3t(t,e,n),d3t):n!==null&&typeof n=="object"?J$(n)?n:new Proxy(new c3t(t,e,n),h3t):n}function twe(t){let e=new ewe(t);return[RB(e,"",t),e]}function HL(t,e){let[n,i]=twe(t);return e(n),i.result()}function To(t){return t instanceof e7||t instanceof t7?t._current:t!==null&&typeof t=="object"?t[Zbe]:t}var Kh;(t=>{function e(s,o){if(o.length===s.length)for(var a=0;a<s.length;){if(s[a]!==o[a])return!1;a+=1}else return!1;return!0}t.equal=e;function n(s,o,a){let l=r(a,s);if(l!==void 0&&typeof l=="object"&&l!==null){let c={...o};return Object.keys(l).forEach(h=>{delete c[h]}),c}else return o}t.removeOverridden=n;function i(s,o){if((s instanceof Ta||s instanceof e7)&&typeof o=="string"||(s instanceof Rn||s instanceof t7)&&typeof o=="string")return s.data(o);if(typeof o=="number"&&Array.isArray(s)||typeof o=="string"&&typeof s=="object"&&s!==null)return s[o]}t.zoomOnce=i;function r(s,o,a=0){for(;a<o.length&&s!==void 0;)s=i(s,o[a]),a+=1;return s}t.zoom=r})(Kh||(Kh={}));function f3t(t,e){let n=[];if(e.length===t.length)for(var i=0;i<t.length;){if(e[i]==="*")n.push(t[i]);else if(t[i]!==e[i])return null;i+=1}else return null;return n}function Xp(t,e){let n=[];if(e.length<=t.length)for(var i=0;i<e.length;){if(e[i]==="*")n.push(t[i]);else if(t[i]!==e[i])return null;i+=1}else return null;return n}var nwe=class{},Uoe=class extends nwe{constructor(t){super(),this.id=t}},Goe=class extends nwe{constructor(t){super(),this.data=t}},ej;try{ej=new TextDecoder}catch{}var _t,Fm,ke=0,va={},Zn,fm,oc=0,Ih=0,Qa,Pf,ia=[],ri,Hoe={useRecords:!1,mapsAsObjects:!0},iwe=class{},rwe=new iwe;rwe.name="MessagePack 0xC1";var lw=!1,jL=class{constructor(t){t&&(t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.structures?t.structures.sharedLength=t.structures.length:t.getStructures&&((t.structures=[]).uninitialized=!0,t.structures.sharedLength=0)),Object.assign(this,t)}unpack(t,e){if(_t)return uwe(()=>(nj(),this?this.unpack(t,e):jL.prototype.unpack.call(Hoe,t,e)));Fm=e>-1?e:t.length,ke=0,Ih=0,fm=null,Qa=null,_t=t;try{ri=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(n){throw _t=null,t instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof jL){if(va=this,this.structures)return Zn=this.structures,T3();(!Zn||Zn.length>0)&&(Zn=[])}else va=Hoe,(!Zn||Zn.length>0)&&(Zn=[]);return T3()}unpackMultiple(t,e){let n,i=0;try{lw=!0;let r=t.length,s=this?this.unpack(t,r):BB.unpack(t,r);if(e){for(e(s);ke<r;)if(i=ke,e(T3())===!1)return}else{for(n=[s];ke<r;)i=ke,n.push(T3());return n}}catch(r){throw r.lastPosition=i,r.values=n,r}finally{lw=!1,nj()}}_mergeStructures(t,e){t=t||[];for(let n=0,i=t.length;n<i;n++){let r=t[n];r&&(r.isShared=!0,n>=32&&(r.highByte=n-32>>5))}t.sharedLength=t.length;for(let n in e||[])if(n>=0){let i=t[n],r=e[n];r&&(i&&((t.restoreStructures||(t.restoreStructures=[]))[n]=i),t[n]=r)}return this.structures=t}decode(t,e){return this.unpack(t,e)}};function T3(){try{if(!va.trusted&&!lw){let e=Zn.sharedLength||0;e<Zn.length&&(Zn.length=e)}let t=Cr();if(ke==Fm)Zn.restoreStructures&&joe(),Zn=null,_t=null,Pf&&(Pf=null);else if(ke>Fm){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}else if(!lw)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw Zn.restoreStructures&&joe(),nj(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function joe(){for(let t in Zn.restoreStructures)Zn[t]=Zn.restoreStructures[t];Zn.restoreStructures=null}function Cr(){let t=_t[ke++];if(t<160)if(t<128){if(t<64)return t;{let e=Zn[t&63]||va.getStructures&&swe()[t&63];return e?(e.read||(e.read=n7(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,va.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[awe()]=Cr();return e}else{let e=new Map;for(let n=0;n<t;n++)e.set(Cr(),Cr());return e}else{t-=144;let e=new Array(t);for(let n=0;n<t;n++)e[n]=Cr();return e}else if(t<192){let e=t-160;if(Ih>=ke)return fm.slice(ke-oc,(ke+=e)-oc);if(Ih==0&&Fm<140){let n=e<16?i7(e):owe(e);if(n!=null)return n}return tj(e)}else{let e;switch(t){case 192:return null;case 193:return Qa?(e=Cr(),e>0?Qa[1].slice(Qa.position1,Qa.position1+=e):Qa[0].slice(Qa.position0,Qa.position0-=e)):rwe;case 194:return!1;case 195:return!0;case 196:return F5(_t[ke++]);case 197:return e=ri.getUint16(ke),ke+=2,F5(e);case 198:return e=ri.getUint32(ke),ke+=4,F5(e);case 199:return Gg(_t[ke++]);case 200:return e=ri.getUint16(ke),ke+=2,Gg(e);case 201:return e=ri.getUint32(ke),ke+=4,Gg(e);case 202:if(e=ri.getFloat32(ke),va.useFloat32>2){let n=r7[(_t[ke]&127)<<1|_t[ke+1]>>7];return ke+=4,(n*e+(e>0?.5:-.5)>>0)/n}return ke+=4,e;case 203:return e=ri.getFloat64(ke),ke+=8,e;case 204:return _t[ke++];case 205:return e=ri.getUint16(ke),ke+=2,e;case 206:return e=ri.getUint32(ke),ke+=4,e;case 207:return va.int64AsNumber?(e=ri.getUint32(ke)*4294967296,e+=ri.getUint32(ke+4)):e=ri.getBigUint64(ke),ke+=8,e;case 208:return ri.getInt8(ke++);case 209:return e=ri.getInt16(ke),ke+=2,e;case 210:return e=ri.getInt32(ke),ke+=4,e;case 211:return va.int64AsNumber?(e=ri.getInt32(ke)*4294967296,e+=ri.getUint32(ke+4)):e=ri.getBigInt64(ke),ke+=8,e;case 212:if(e=_t[ke++],e==114)return Xoe(_t[ke++]&63);{let n=ia[e];if(n)return n.read?(ke++,n.read(Cr())):n.noBuffer?(ke++,n()):n(_t.subarray(ke,++ke));throw new Error("Unknown extension "+e)}case 213:return e=_t[ke],e==114?(ke++,Xoe(_t[ke++]&63,_t[ke++])):Gg(2);case 214:return Gg(4);case 215:return Gg(8);case 216:return Gg(16);case 217:return e=_t[ke++],Ih>=ke?fm.slice(ke-oc,(ke+=e)-oc):m3t(e);case 218:return e=ri.getUint16(ke),ke+=2,Ih>=ke?fm.slice(ke-oc,(ke+=e)-oc):g3t(e);case 219:return e=ri.getUint32(ke),ke+=4,Ih>=ke?fm.slice(ke-oc,(ke+=e)-oc):v3t(e);case 220:return e=ri.getUint16(ke),ke+=2,Woe(e);case 221:return e=ri.getUint32(ke),ke+=4,Woe(e);case 222:return e=ri.getUint16(ke),ke+=2,$oe(e);case 223:return e=ri.getUint32(ke),ke+=4,$oe(e);default:if(t>=224)return t-256;if(t===void 0){let n=new Error("Unexpected end of MessagePack data");throw n.incomplete=!0,n}throw new Error("Unknown MessagePack token "+t)}}}var p3t=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function n7(t,e){function n(){if(n.count++>2){let r=t.read=new Function("r","return function(){return {"+t.map(s=>p3t.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(Cr);return t.highByte===0&&(t.read=Voe(e,t.read)),r()}let i={};for(let r=0,s=t.length;r<s;r++){let o=t[r];i[o]=Cr()}return i}return n.count=0,t.highByte===0?Voe(e,n):n}var Voe=(t,e)=>function(){let n=_t[ke++];if(n===0)return e();let i=t<32?-(t+(n<<5)):t+(n<<5),r=Zn[i]||swe()[i];if(!r)throw new Error("Record id is not defined for "+i);return r.read||(r.read=n7(r,t)),r.read()};function swe(){let t=uwe(()=>(_t=null,va.getStructures()));return Zn=va._mergeStructures(t,Zn)}var tj=IB,m3t=IB,g3t=IB,v3t=IB;function IB(t){let e;if(t<16&&(e=i7(t)))return e;if(t>64&&ej)return ej.decode(_t.subarray(ke,ke+=t));let n=ke+t,i=[];for(e="";ke<n;){let r=_t[ke++];if(!(r&128))i.push(r);else if((r&224)===192){let s=_t[ke++]&63;i.push((r&31)<<6|s)}else if((r&240)===224){let s=_t[ke++]&63,o=_t[ke++]&63;i.push((r&31)<<12|s<<6|o)}else if((r&248)===240){let s=_t[ke++]&63,o=_t[ke++]&63,a=_t[ke++]&63,l=(r&7)<<18|s<<12|o<<6|a;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(r);i.length>=4096&&(e+=ks.apply(String,i),i.length=0)}return i.length>0&&(e+=ks.apply(String,i)),e}function Woe(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=Cr();return e}function $oe(t){if(va.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[awe()]=Cr();return e}else{let e=new Map;for(let n=0;n<t;n++)e.set(Cr(),Cr());return e}}var ks=String.fromCharCode;function owe(t){let e=ke,n=new Array(t);for(let i=0;i<t;i++){let r=_t[ke++];if((r&128)>0){ke=e;return}n[i]=r}return ks.apply(String,n)}function i7(t){if(t<4)if(t<2){if(t===0)return"";{let e=_t[ke++];if((e&128)>1){ke-=1;return}return ks(e)}}else{let e=_t[ke++],n=_t[ke++];if((e&128)>0||(n&128)>0){ke-=2;return}if(t<3)return ks(e,n);let i=_t[ke++];if((i&128)>0){ke-=3;return}return ks(e,n,i)}else{let e=_t[ke++],n=_t[ke++],i=_t[ke++],r=_t[ke++];if((e&128)>0||(n&128)>0||(i&128)>0||(r&128)>0){ke-=4;return}if(t<6){if(t===4)return ks(e,n,i,r);{let s=_t[ke++];if((s&128)>0){ke-=5;return}return ks(e,n,i,r,s)}}else if(t<8){let s=_t[ke++],o=_t[ke++];if((s&128)>0||(o&128)>0){ke-=6;return}if(t<7)return ks(e,n,i,r,s,o);let a=_t[ke++];if((a&128)>0){ke-=7;return}return ks(e,n,i,r,s,o,a)}else{let s=_t[ke++],o=_t[ke++],a=_t[ke++],l=_t[ke++];if((s&128)>0||(o&128)>0||(a&128)>0||(l&128)>0){ke-=8;return}if(t<10){if(t===8)return ks(e,n,i,r,s,o,a,l);{let c=_t[ke++];if((c&128)>0){ke-=9;return}return ks(e,n,i,r,s,o,a,l,c)}}else if(t<12){let c=_t[ke++],h=_t[ke++];if((c&128)>0||(h&128)>0){ke-=10;return}if(t<11)return ks(e,n,i,r,s,o,a,l,c,h);let u=_t[ke++];if((u&128)>0){ke-=11;return}return ks(e,n,i,r,s,o,a,l,c,h,u)}else{let c=_t[ke++],h=_t[ke++],u=_t[ke++],d=_t[ke++];if((c&128)>0||(h&128)>0||(u&128)>0||(d&128)>0){ke-=12;return}if(t<14){if(t===12)return ks(e,n,i,r,s,o,a,l,c,h,u,d);{let f=_t[ke++];if((f&128)>0){ke-=13;return}return ks(e,n,i,r,s,o,a,l,c,h,u,d,f)}}else{let f=_t[ke++],p=_t[ke++];if((f&128)>0||(p&128)>0){ke-=14;return}if(t<15)return ks(e,n,i,r,s,o,a,l,c,h,u,d,f,p);let m=_t[ke++];if((m&128)>0){ke-=15;return}return ks(e,n,i,r,s,o,a,l,c,h,u,d,f,p,m)}}}}}function F5(t){return va.copyBuffers?Uint8Array.prototype.slice.call(_t,ke,ke+=t):_t.subarray(ke,ke+=t)}function Gg(t){let e=_t[ke++];if(ia[e])return ia[e](_t.subarray(ke,ke+=t));throw new Error("Unknown extension type "+e)}var qoe=new Array(4096);function awe(){let t=_t[ke++];if(t>=160&&t<192){if(t=t-160,Ih>=ke)return fm.slice(ke-oc,(ke+=t)-oc);if(!(Ih==0&&Fm<180))return tj(t)}else return ke--,Cr();let e=(t<<5^(t>1?ri.getUint16(ke):t>0?_t[ke]:0))&4095,n=qoe[e],i=ke,r=ke+t-3,s,o=0;if(n&&n.bytes==t){for(;i<r;){if(s=ri.getUint32(i),s!=n[o++]){i=1879048192;break}i+=4}for(r+=3;i<r;)if(s=_t[i++],s!=n[o++]){i=1879048192;break}if(i===r)return ke=i,n.string;r-=3,i=ke}for(n=[],qoe[e]=n,n.bytes=t;i<r;)s=ri.getUint32(i),n.push(s),i+=4;for(r+=3;i<r;)s=_t[i++],n.push(s);let a=t<16?i7(t):owe(t);return a!=null?n.string=a:n.string=tj(t)}var Xoe=(t,e)=>{var n=Cr();let i=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,n.highByte=e);let r=Zn[t];return r&&r.isShared&&((Zn.restoreStructures||(Zn.restoreStructures=[]))[t]=r),Zn[t]=n,n.read=n7(n,i),n.read()},lwe=typeof self=="object"?self:global;ia[0]=()=>{};ia[0].noBuffer=!0;ia[101]=()=>{let t=Cr();return(lwe[t[0]]||Error)(t[1])};ia[105]=t=>{let e=ri.getUint32(ke-4);Pf||(Pf=new Map);let n=_t[ke],i;n>=144&&n<160||n==220||n==221?i=[]:i={};let r={target:i};Pf.set(e,r);let s=Cr();return r.used?Object.assign(i,s):(r.target=s,s)};ia[112]=t=>{let e=ri.getUint32(ke-4),n=Pf.get(e);return n.used=!0,n.target};ia[115]=()=>new Set(Cr());var cwe=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");ia[116]=t=>{let e=t[0],n=cwe[e];if(!n)throw new Error("Could not find typed array for code "+e);return new lwe[n](Uint8Array.prototype.slice.call(t,1).buffer)};ia[120]=()=>{let t=Cr();return new RegExp(t[0],t[1])};ia[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],n=ke;ke+=e-4,Qa=[Cr(),Cr()],Qa.position0=0,Qa.position1=0;let i=ke;ke=n;try{return Cr()}finally{ke=i}};ia[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function uwe(t){let e=Fm,n=ke,i=oc,r=Ih,s=fm,o=Pf,a=Qa,l=new Uint8Array(_t.slice(0,Fm)),c=Zn,h=Zn.slice(0,Zn.length),u=va,d=lw,f=t();return Fm=e,ke=n,oc=i,Ih=r,fm=s,Pf=o,Qa=a,_t=l,lw=d,Zn=c,Zn.splice(0,Zn.length,...h),va=u,ri=new DataView(_t.buffer,_t.byteOffset,_t.byteLength),f}function nj(){_t=null,Pf=null,Zn=null}function y3t(t){t.unpack?ia[t.type]=t.unpack:ia[t.type]=t}var r7=new Array(147);for(let t=0;t<256;t++)r7[t]=+("1e"+Math.floor(45.15-t*.30103));var BB=new jL({useRecords:!1});BB.unpack;BB.unpackMultiple;BB.unpack;var x3t=new Float32Array(1);new Uint8Array(x3t.buffer,0,4);var qD;try{qD=new TextEncoder}catch{}var VL,s7,kB=typeof Buffer<"u",N5=kB?Buffer.allocUnsafeSlow:Uint8Array,hwe=kB?Buffer:Uint8Array,Yoe=kB?4294967296:2144337920,Ke,zr,je=0,hh,dh=null,b3t=/[\u0080-\uFFFF]/,zS=Symbol("record-id"),dwe=class extends jL{constructor(t){super(t),this.offset=0;let e,n,i,r,s,o=0,a=hwe.prototype.utf8Write?function(A,E,M){return Ke.utf8Write(A,E,M)}:qD&&qD.encodeInto?function(A,E){return qD.encodeInto(A,Ke.subarray(E)).written}:!1,l=this;t||(t={});let c=t&&t.sequential,h=t.structures||t.saveStructures,u=t.maxSharedStructures;if(u==null&&(u=h?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");let d=t.maxOwnStructures;d==null&&(d=h?32:64),c&&!t.saveStructures&&(this.structures=[]);let f=u>32||d+u>64,p=u+64,m=u+d+64;if(m>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],v=0,y=0;this.pack=this.encode=function(A,E){if(Ke||(Ke=new N5(8192),zr=new DataView(Ke.buffer,0,8192),je=0),hh=Ke.length-10,hh-je<2048?(Ke=new N5(Ke.length),zr=new DataView(Ke.buffer,0,Ke.length),hh=Ke.length-10,je=0):je=je+7&2147483640,e=je,s=l.structuredClone?new Map:null,l.bundleStrings?(dh=["",""],Ke[je++]=214,Ke[je++]=98,dh.position=je-e,je+=4):dh=null,n=l.structures,n){n.uninitialized&&(n=l._mergeStructures(l.getStructures()));let M=n.sharedLength||0;if(M>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let C=0;C<M;C++){let T=n[C];if(!T)continue;let D,L=n.transitions;for(let I=0,R=T.length;I<R;I++){let H=T[I];D=L[H],D||(D=L[H]=Object.create(null)),L=D}L[zS]=C+64}o=M}c||(n.nextId=M+64)}i&&(i=!1),r=n||[];try{if(x(A),dh){zr.setUint32(dh.position+e,je-dh.position-e);let M=dh;dh=null,x(M[0]),x(M[1])}if(l.offset=je,s&&s.idsToInsert){je+=s.idsToInsert.length*6,je>hh&&S(je),l.offset=je;let M=_3t(Ke.subarray(e,je),s.idsToInsert);return s=null,M}return E&S3t?(Ke.start=e,Ke.end=je,Ke):Ke.subarray(e,je)}finally{if(n){if(y<10&&y++,v>1e4)n.transitions=null,y=0,v=0,g.length>0&&(g=[]);else if(g.length>0&&!c){for(let M=0,C=g.length;M<C;M++)g[M][zS]=0;g=[]}if(i&&l.saveStructures){let M=n.sharedLength||u;n.length>M&&(n=n.slice(0,M));let C=Ke.subarray(e,je);return l.saveStructures(n,o)===!1?(l._mergeStructures(l.getStructures()),l.pack(A)):(o=M,C)}}E&A3t&&(je=e)}};let x=A=>{je>hh&&(Ke=S(je));var E=typeof A,M;if(E==="string"){let C=A.length;if(dh&&C>=8&&C<4096){let L=b3t.test(A);dh[L?0:1]+=A,Ke[je++]=193,x(L?-C:C);return}let T;C<32?T=1:C<256?T=2:C<65536?T=3:T=5;let D=C*3;if(je+D>hh&&(Ke=S(je+D)),C<64||!a){let L,I,R,H=je+T;for(L=0;L<C;L++)I=A.charCodeAt(L),I<128?Ke[H++]=I:I<2048?(Ke[H++]=I>>6|192,Ke[H++]=I&63|128):(I&64512)===55296&&((R=A.charCodeAt(L+1))&64512)===56320?(I=65536+((I&1023)<<10)+(R&1023),L++,Ke[H++]=I>>18|240,Ke[H++]=I>>12&63|128,Ke[H++]=I>>6&63|128,Ke[H++]=I&63|128):(Ke[H++]=I>>12|224,Ke[H++]=I>>6&63|128,Ke[H++]=I&63|128);M=H-je-T}else M=a(A,je+T,D);M<32?Ke[je++]=160|M:M<256?(T<2&&Ke.copyWithin(je+2,je+1,je+1+M),Ke[je++]=217,Ke[je++]=M):M<65536?(T<3&&Ke.copyWithin(je+3,je+2,je+2+M),Ke[je++]=218,Ke[je++]=M>>8,Ke[je++]=M&255):(T<5&&Ke.copyWithin(je+5,je+3,je+3+M),Ke[je++]=219,zr.setUint32(je,M),je+=4),je+=M}else if(E==="number")if(A>>>0===A)A<64?Ke[je++]=A:A<256?(Ke[je++]=204,Ke[je++]=A):A<65536?(Ke[je++]=205,Ke[je++]=A>>8,Ke[je++]=A&255):(Ke[je++]=206,zr.setUint32(je,A),je+=4);else if(A>>0===A)A>=-32?Ke[je++]=256+A:A>=-128?(Ke[je++]=208,Ke[je++]=A+256):A>=-32768?(Ke[je++]=209,zr.setInt16(je,A),je+=2):(Ke[je++]=210,zr.setInt32(je,A),je+=4);else{let C;if((C=this.useFloat32)>0&&A<4294967296&&A>=-2147483648){Ke[je++]=202,zr.setFloat32(je,A);let T;if(C<4||(T=A*r7[(Ke[je]&127)<<1|Ke[je+1]>>7])>>0===T){je+=4;return}else je--}Ke[je++]=203,zr.setFloat64(je,A),je+=8}else if(E==="object")if(!A)Ke[je++]=192;else{if(s){let T=s.get(A);if(T){if(!T.id){let D=s.idsToInsert||(s.idsToInsert=[]);T.id=D.push(T)}Ke[je++]=214,Ke[je++]=112,zr.setUint32(je,T.id),je+=4;return}else s.set(A,{offset:je-e})}let C=A.constructor;if(C===Object)b(A,!0);else if(C===Array){M=A.length,M<16?Ke[je++]=144|M:M<65536?(Ke[je++]=220,Ke[je++]=M>>8,Ke[je++]=M&255):(Ke[je++]=221,zr.setUint32(je,M),je+=4);for(let T=0;T<M;T++)x(A[T])}else if(C===Map){M=A.size,M<16?Ke[je++]=128|M:M<65536?(Ke[je++]=222,Ke[je++]=M>>8,Ke[je++]=M&255):(Ke[je++]=223,zr.setUint32(je,M),je+=4);for(let[T,D]of A)x(T),x(D)}else{for(let T=0,D=VL.length;T<D;T++){let L=s7[T];if(A instanceof L){let I=VL[T];if(I.write){I.type&&(Ke[je++]=212,Ke[je++]=I.type,Ke[je++]=0),x(I.write.call(this,A));return}let R=Ke,H=zr,Z=je;Ke=null;let ee;try{ee=I.pack.call(this,A,F=>(Ke=R,R=null,je+=F,je>hh&&S(je),{target:Ke,targetView:zr,position:je-F}),x)}finally{R&&(Ke=R,zr=H,je=Z,hh=Ke.length-10)}ee&&(ee.length+je>hh&&S(ee.length+je),je=w3t(ee,Ke,je,I.type));return}}b(A,!A.hasOwnProperty)}}else if(E==="boolean")Ke[je++]=A?195:194;else if(E==="bigint"){if(A<BigInt(1)<<BigInt(63)&&A>=-(BigInt(1)<<BigInt(63)))Ke[je++]=211,zr.setBigInt64(je,A);else if(A<BigInt(1)<<BigInt(64)&&A>0)Ke[je++]=207,zr.setBigUint64(je,A);else if(this.largeBigIntToFloat)Ke[je++]=203,zr.setFloat64(je,Number(A));else throw new RangeError(A+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");je+=8}else if(E==="undefined")this.encodeUndefinedAsNil?Ke[je++]=192:(Ke[je++]=212,Ke[je++]=0,Ke[je++]=0);else if(E==="function")x(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+E)},b=this.useRecords===!1?this.variableMapSize?A=>{let E=Object.keys(A),M=E.length;M<16?Ke[je++]=128|M:M<65536?(Ke[je++]=222,Ke[je++]=M>>8,Ke[je++]=M&255):(Ke[je++]=223,zr.setUint32(je,M),je+=4);let C;for(let T=0;T<M;T++)x(C=E[T]),x(A[C])}:(A,E)=>{Ke[je++]=222;let M=je-e;je+=2;let C=0;for(let T in A)(E||A.hasOwnProperty(T))&&(x(T),x(A[T]),C++);Ke[M+++e]=C>>8,Ke[M+e]=C&255}:A=>{let E=Object.keys(A),M,C=r.transitions||(r.transitions=Object.create(null)),T=0;for(let L=0,I=E.length;L<I;L++){let R=E[L];M=C[R],M||(M=C[R]=Object.create(null),T++),C=M}let D=C[zS];if(D)D>=96&&f?(Ke[je++]=((D-=96)&31)+96,Ke[je++]=D>>5):Ke[je++]=D;else{D=r.nextId,D||(D=64),D<p&&this.shouldShareStructure&&!this.shouldShareStructure(E)?(D=r.nextOwnId,D<m||(D=p),r.nextOwnId=D+1):(D>=m&&(D=p),r.nextId=D+1);let L=E.highByte=D>=96&&f?D-96>>5:-1;C[zS]=D,r[D-64]=E,D<p?(E.isShared=!0,r.sharedLength=D-63,i=!0,L>=0?(Ke[je++]=(D&31)+96,Ke[je++]=L):Ke[je++]=D):(L>=0?(Ke[je++]=213,Ke[je++]=114,Ke[je++]=(D&31)+96,Ke[je++]=L):(Ke[je++]=212,Ke[je++]=114,Ke[je++]=D),T&&(v+=y*T),g.length>=d&&(g.shift()[zS]=0),g.push(C),x(E))}for(let L=0,I=E.length;L<I;L++)x(A[E[L]])},S=A=>{let E;if(A>16777216){if(A-e>Yoe)throw new Error("Packed buffer would be larger than maximum buffer size");E=Math.min(Yoe,Math.round(Math.max((A-e)*(A>67108864?1.25:2),4194304)/4096)*4096)}else E=(Math.max(A-e<<2,Ke.length-1)>>12)+1<<12;let M=new N5(E);return zr=new DataView(M.buffer,0,E),Ke.copy?Ke.copy(M,0,e,A):M.set(Ke.slice(e,A)),je-=e,e=0,hh=M.length-10,Ke=M}}useBuffer(t){Ke=t,zr=new DataView(Ke.buffer,Ke.byteOffset,Ke.byteLength),je=0}};s7=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,iwe];VL=[{pack(t,e,n){let i=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:r,targetView:s,position:o}=e(6);r[o++]=214,r[o++]=255,s.setUint32(o,i)}else if(i>0&&i<17179869184){let{target:r,targetView:s,position:o}=e(10);r[o++]=215,r[o++]=255,s.setUint32(o,t.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),s.setUint32(o+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return e(0),n(this.onInvalidDate());let{target:r,targetView:s,position:o}=e(3);r[o++]=212,r[o++]=255,r[o++]=255}else{let{target:r,targetView:s,position:o}=e(15);r[o++]=199,r[o++]=12,r[o++]=255,s.setUint32(o,t.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(i)))}}},{pack(t,e,n){let i=Array.from(t),{target:r,position:s}=e(this.structuredClone?3:0);this.structuredClone&&(r[s++]=212,r[s++]=115,r[s++]=0),n(i)}},{pack(t,e,n){let{target:i,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=101,i[r++]=0),n([t.name,t.message])}},{pack(t,e,n){let{target:i,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=120,i[r++]=0),n([t.source,t.flags])}},{pack(t,e){this.structuredClone?Koe(t,16,e):Joe(kB?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let n=t.constructor;n!==hwe&&this.structuredClone?Koe(t,cwe.indexOf(n.name),e):Joe(t,e)}},{pack(t,e){let{target:n,position:i}=e(1);n[i]=193}}];function Koe(t,e,n,i){let r=t.byteLength;if(r+1<256){var{target:s,position:o}=n(4+r);s[o++]=199,s[o++]=r+1}else if(r+1<65536){var{target:s,position:o}=n(5+r);s[o++]=200,s[o++]=r+1>>8,s[o++]=r+1&255}else{var{target:s,position:o,targetView:a}=n(7+r);s[o++]=201,a.setUint32(o,r+1),o+=4}s[o++]=116,s[o++]=e,s.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o)}function Joe(t,e){let n=t.byteLength;var i,r;if(n<256){var{target:i,position:r}=e(n+2);i[r++]=196,i[r++]=n}else if(n<65536){var{target:i,position:r}=e(n+3);i[r++]=197,i[r++]=n>>8,i[r++]=n&255}else{var{target:i,position:r,targetView:s}=e(n+5);i[r++]=198,s.setUint32(r,n),r+=4}i.set(t,r)}function w3t(t,e,n,i){let r=t.length;switch(r){case 1:e[n++]=212;break;case 2:e[n++]=213;break;case 4:e[n++]=214;break;case 8:e[n++]=215;break;case 16:e[n++]=216;break;default:r<256?(e[n++]=199,e[n++]=r):r<65536?(e[n++]=200,e[n++]=r>>8,e[n++]=r&255):(e[n++]=201,e[n++]=r>>24,e[n++]=r>>16&255,e[n++]=r>>8&255,e[n++]=r&255)}return e[n++]=i,e.set(t,n),n+=r,n}function _3t(t,e){let n,i=e.length*6,r=t.length-i;for(e.sort((s,o)=>s.offset>o.offset?1:-1);n=e.pop();){let s=n.offset,o=n.id;t.copyWithin(s+i,s,r),i-=6;let a=s+i;t[a++]=214,t[a++]=105,t[a++]=o>>24,t[a++]=o>>16&255,t[a++]=o>>8&255,t[a++]=o&255,r=s}return t}function n_(t){if(t.Class){if(!t.pack&&!t.write)throw new Error("Extension has no pack or write function");if(t.pack&&!t.type)throw new Error("Extension has no type (numeric code to identify the extension)");s7.unshift(t.Class),VL.unshift(t)}y3t(t)}var fwe=new dwe({useRecords:!1});fwe.pack;fwe.pack;var S3t=512,A3t=1024,Zoe=new dwe({structuredClone:!0});n_({Class:is.prototype.constructor,type:1,write(t){return{...t}},read(t){return Object.setPrototypeOf(t,is.prototype),t}});n_({Class:Rn.prototype.constructor,type:2,write(t){return[...t]},read(t){return Object.setPrototypeOf(t,Rn.prototype),t}});n_({Class:Ta.prototype.constructor,type:3,write(t){return[...t]},read(t){return Object.setPrototypeOf(t,Ta.prototype),t}});n_({Class:Uoe.prototype.constructor,type:4,write(t){return t.id},read(t){return new Uoe(t)}});n_({Class:Goe.prototype.constructor,type:5,write(t){return t.data},read(t){return new Goe(t)}});n_({Class:ro.prototype.constructor,type:6,write(t){return{...t}},read(t){return Object.setPrototypeOf(t,ro.prototype),t}});function M3t(t){var e=0;if(t.length===0)return e;for(let n=0;n<t.length;n++){let i=t[n];e=(e<<5)-e+i,e=e&e}return e}function ij(t){if(J$(t))return t;if(Array.isArray(t))return t.map(ij);if(typeof t=="object"&&t!==null){let e={};for(let n of Object.keys(t).sort())e[n]=ij(t[n]);return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),e}else return t}var rj;(t=>{function e(r){return Zoe.pack(r)}t.serialize=e;function n(r){return Zoe.unpack(r)}t.deserialize=n;function i(r){return M3t(e(ij(r))).toString()}t.checksum=i})(rj||(rj={}));var US={LookAt:[],Follow:[],MouseHover:["Transition"],Scroll:["Transition"],Start:["Transition","Audio","Video"],Conditional:["Transition","Audio","Video"],MouseDown:["Transition","Audio","Video","Link","Reset"],MouseUp:["Transition","Audio","Video","Link","Reset"],MousePress:["Transition","Audio","Video","Link","Reset"],KeyDown:["Transition","Audio","Video","Link","Reset"],KeyUp:["Transition","Audio","Video","Link","Reset"],KeyPress:["Transition","Audio","Video","Link","Reset"],GameControl:["Transition","Audio"],Collision:["Transition","Audio"]},Qoe;(t=>{function e(i){return i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress"||i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress"}t.is=e;function n(i){return i==="MouseDown"||i==="MouseUp"||i==="MousePress"?{type:i,disabled:!1,toggle:!1,actions:new Rn}:{type:i,disabled:!1,key:void 0,toggle:!1,actions:new Rn}}t.defaultData=n})(Qoe||(Qoe={}));var WL;(t=>{function e(n){return{type:"Property",value:[n??null,"position","x"]}}t.propertyDefaultData=e,t.valueDefaultData={type:"Literal",value:0}})(WL||(WL={}));var sj;(t=>{function e(r){return{type:"Comparison",operator:"==",lOperand:WL.propertyDefaultData(r),rOperand:{...WL.valueDefaultData}}}t.comparisonDefaultData=e;function n(r){return{type:"Distance",toObject:r??null,fromObject:r??null,distance:200}}t.distanceDefaultData=n;function i(r,s){return{type:"State",object:r??null,state:s??null}}t.stateDefaultData=i})(sj||(sj={}));var eae;(t=>{function e(i){return i.type==="Conditional"}t.is=e;function n(i){return{type:"Conditional",disabled:!1,inActions:new Rn,outActions:new Rn,condition:sj.distanceDefaultData(i)}}t.defaultData=n})(eae||(eae={}));var oj;(t=>t.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(oj||(oj={}));var aj;(t=>t.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(aj||(aj={}));var tae;(t=>{function e(i){return i.type==="MouseHover"}t.is=e;function n(){return{type:"MouseHover",disabled:!1,actions:new Rn}}t.defaultData=n})(tae||(tae={}));var nae;(t=>{function e(i){return i.type==="Scroll"}t.is=e;function n(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new Rn}}t.defaultData=n})(nae||(nae={}));var iae;(t=>{function e(i){return i.type==="Start"}t.is=e;function n(){return{type:"Start",disabled:!1,actions:new Rn}}t.defaultData=n})(iae||(iae={}));var rae;(t=>{function e(i){return i.type==="Collision"}t.is=e;function n(){return{type:"Collision",disabled:!1,toggle:!1,target:"character",actions:new Rn}}t.defaultData=n})(rae||(rae={}));var Rx;(t=>{function e(i,r){return i[0]===r[0]&&i[1]===r[1]}t.isEqual=e;function n(i,r,s){return[i[0]+(r[0]-i[0])*s,i[1]+(r[1]-i[1])*s]}t.lerp=n})(Rx||(Rx={}));var iv;(t=>{function e(l,c){return l[0]===c[0]&&l[1]===c[1]&&l[2]===c[2]}t.isEqual=e;function n(l,c){return[l[0]+c[0],l[1]+c[1],l[2]+c[2]]}t.add=n;function i(l,c){return[l[0]-c[0],l[1]-c[1],l[2]-c[2]]}t.sub=i;function r(l,c){return[l[0]/c[0],l[1]/c[1],l[2]/c[2]]}t.div=r;function s(l,c){return[l[0]*c[0],l[1]*c[1],l[2]*c[2]]}t.mul=s;function o(l,c){return Math.hypot(l[0]-c[0],l[1]-c[1],l[2]-c[2])}t.dist=o;function a(l,c,h){return[l[0]+(c[0]-l[0])*h,l[1]+(c[1]-l[1])*h,l[2]+(c[2]-l[2])*h]}t.lerp=a})(iv||(iv={}));var $L;(t=>{function e(i,r){return i[0]===r[0]&&i[1]===r[1]&&i[2]===r[2]&&i[3]===r[3]}t.isEqual=e;function n(i,r,s){return[i[0]+(r[0]-i[0])*s,i[1]+(r[1]-i[1])*s,i[2]+(r[2]-i[2])*s,i[3]+(r[3]-i[3])*s]}t.lerp=n})($L||($L={}));var cw;(t=>{t.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function e(r,s){for(let o=0;o<16;o++)if(r[o]!==s[o])return!1;return!0}t.isEqual=e;function n(r){return r??t.identity}t.simplify=n;function i(r,s){let o=s.slice(0);for(var a=0,l=s.length;a<l;a+=3){let c=r[3]*s[a]+r[7]*s[a+1]+r[11]*s[a+2]+r[15];o[a]=(r[0]*s[a]+r[4]*s[a+1]+r[8]*s[a+2]+r[12])/c,o[a+1]=(r[1]*s[a]+r[5]*s[a+1]+r[9]*s[a+2]+r[13])/c,o[a+2]=(r[2]*s[a]+r[6]*s[a+1]+r[10]*s[a+2]+r[14])/c}return o}t.applyMatrix4=i})(cw||(cw={}));var rl;(t=>{function e(a){return typeof a=="object"&&typeof a.r=="number"&&typeof a.g=="number"&&typeof a.b=="number"}t.isRGB=e,t.white={r:1,g:1,b:1},t.red={r:1,g:0,b:0},t.black={r:0,g:0,b:0};function n(a){return{r:Math.round(a.r*255),g:Math.round(a.g*255),b:Math.round(a.b*255),a:1}}t.toRgb255a1=n;function i(a){return{r:a.r,g:a.g,b:a.b}}t.clone=i;function r(a){return a=Math.floor(a),{r:(a>>16&255)/255,g:(a>>8&255)/255,b:(a&255)/255}}t.fromHex=r;function s(a,l){return a.r===l.r&&a.g===l.g&&a.b===l.b}t.equals=s;function o(a,l,c){return{r:a.r+(l.r-a.r)*c,g:a.g+(l.g-a.g)*c,b:a.b+(l.b-a.b)*c}}t.lerp=o})(rl||(rl={}));var bu;(t=>{t.white={...rl.white,a:1},t.transparent={...rl.white,a:0};function e(o){return{r:o[0],g:o[1],b:o[2],a:o[3]}}t.from0to1=e;function n(o,a){return{...rl.fromHex(o),a}}t.fromHexAndA=n;function i(o){return{r:Math.round(o.r*255),g:Math.round(o.g*255),b:Math.round(o.b*255),a:o.a}}t.toRgb255a1=i;function r(o,a){return rl.equals(o,a)&&o.a===a.a}t.equals=r;function s(o,a,l){return{r:o.r+(a.r-o.r)*l,g:o.g+(a.g-o.g)*l,b:o.b+(a.b-o.b)*l,a:o.a+(a.a-o.a)*l}}t.lerp=s})(bu||(bu={}));var lj;(t=>t.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(lj||(lj={}));var sae;(t=>t.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(sae||(sae={}));var oae;(t=>t.defaultData={control1:[.5,.05],control2:[.1,.3]})(oae||(oae={}));var Ov;(t=>{t.all=["PerspectiveCamera","OrthographicCamera"];function e(n){return t.all.includes(n)}t.is=e})(Ov||(Ov={}));var V2;(t=>{t.DefaultUp=[0,1,0],t.DefaultTargetOffset=1e3,t.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1,autoZoom:!1,autoZoomFrustumSize:790},up:t.DefaultUp,isUpVectorFlipped:!1,targetOffset:t.DefaultTargetOffset};function e(n){return n.type==="PerspectiveCamera"?n.perspective.zoom:n.orthographic.zoom}t.getZoom=e})(V2||(V2={}));var pm;(t=>{function e(i,r=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(i[0],i[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[i[0]+i[0]*r,0,0]},grid:{count:[2,2,2],size:i.map(s=>s*(1+r)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}t.defaultData=e;function n(i,r){let s={...i};if(pwe.forEach(o=>{Object.assign(s,{[o]:r[o]??i[o]})}),s.radial={...i.radial},r.radial){let o=i.radial,a=r.radial;mwe.forEach(l=>{Object.assign(s.radial,{[l]:a[l]??o[l]})})}if(s.linear={...i.linear},r.linear){let o=i.linear,a=r.linear;gwe.forEach(l=>{Object.assign(s.linear,{[l]:a[l]??o[l]})})}if(s.grid={...i.grid},r.grid){let o=i.grid,a=r.grid;vwe.forEach(l=>{Object.assign(s.grid,{[l]:a[l]??o[l]})})}if(s.toObject={...i.toObject},r.toObject){let o=i.toObject,a=r.toObject;ywe.forEach(l=>{Object.assign(s.toObject,{[l]:a[l]??o[l]})})}if(s.randomnessObject={...i.randomnessObject},r.randomnessObject){let o=i.randomnessObject,a=r.randomnessObject;xwe.forEach(l=>{Object.assign(s.randomnessObject,{[l]:a[l]??o[l]})})}return s}t.merge=n})(pm||(pm={}));var cj;(t=>{t.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let e=["radial","linear","grid","toObject","randomnessObject"];function n(i,r){let s=[];i.count!==void 0&&s.push({type:0,path:r,props:{count:i.count}});for(let o of e){let a=i[o];a&&Object.keys(a).length>0&&s.push({type:0,path:[...r,o],props:a})}return s}t.toOps=n})(cj||(cj={}));var pwe=["count"],mwe=["radius","start","end","position","scale","rotation"],gwe=["position","scale","rotation"],vwe=["count","size"],ywe=["count","position","scale","rotation"],xwe=["strength","scale","rotation","position","movement","seed","freqScale"],W2;(t=>{let e={opacity:1,blendFunction:13,enabled:!1};t.defaultData={enabled:!1,pixelation:{...e,blendFunction:16,granularity:15},bloom:{...e,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...e,offset:[2,2]},vignette:{...e,darkness:1,offset:0},hueSaturation:{...e,hue:3,saturation:0},brightnessContrast:{...e,brightness:.25,contrast:0},depthOfField:{...e,focalLength:2,focusDistance:2,bokehScale:2},noise:{...e,blendFunction:16}}})(W2||(W2={}));var uj;(t=>{t.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function e(n){return t.all.includes(n)}t.is=e})(uj||(uj={}));var hj;(t=>{function e(i){return n(i)}t.defaultData=e;function n(i){if(i==="PointLight")return{type:i,color:bu.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:1e5};if(i==="SpotLight")return{type:i,color:bu.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,shadowResolution:1024,shadowRadius:1};if(i==="DirectionalLight")return{type:i,color:bu.white,intensity:1,shadows:!0,size:2e3,depth:1e5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(hj||(hj={}));var dj;(t=>{t.defaultData={castShadow:!0,receiveShadow:!0};function e(n,i){return n.castShadow===i.castShadow&&n.receiveShadow===i.receiveShadow}t.equals=e})(dj||(dj={}));var fj;(t=>{t.defaultData={flatShading:!1,wireframe:!1,side:0};function e(n,i){return n.flatShading===i.flatShading&&n.side===i.side&&n.wireframe===i.wireframe}t.equals=e})(fj||(fj={}));var pj;(t=>t.defaultData={...fj.defaultData,...dj.defaultData})(pj||(pj={}));var qL;(t=>(t.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},t.maxSize=3e7))(qL||(qL={}));var aae;(t=>{function e(n){return n==="texture"||n==="video"||n==="color"||n==="depth"||n==="normal"||n==="gradient"||n==="noise"||n==="fresnel"||n==="rainbow"||n==="toon"||n==="outline"||n==="transmission"||n==="matcap"||n==="displace"||n==="light"}t.is=e})(aae||(aae={}));var lae;(t=>{function e(n){return n==="phong"||n==="toon"||n==="lambert"||n==="physical"}t.is=e})(lae||(lae={}));var bwe=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],E3t=["wrapping","image","video"],vc;(t=>{function e(s,o){let{texture:a,...l}=o;if(Object.assign(s,l),a){let c=s.texture;c&&Object.assign(c,a)}}t.patch=e;function n(s,o){return s==="light"&&o?i(o):r(s)}t.defaultData=n;function i(s){switch(s){case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",alpha:.6,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}function r(s){switch(s){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"texture",projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"video",projection:0,texture:{video:qL.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:rl.fromHex(5526619)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...rl.fromHex(6710886),a:1},colorB:{...rl.fromHex(6710886),a:1},colorC:{...rl.fromHex(16777215),a:1},colorD:{...rl.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:bu.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{type:"toon",alpha:1,visible:!0,mode:0,positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:bu.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{type:"outline",alpha:1,visible:!0,mode:0,outlineColor:bu.fromHexAndA(0,1),contourColor:bu.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}})(vc||(vc={}));var yl;(t=>{function e(c){return!c.layers.some(h=>h.data.type==="texture"&&h.data.projection!==0||h.data.type==="depth"&&!h.data.isWorldSpace||h.data.type==="noise"||h.data.type==="displace")}t.isMergable=e;function n(c){let h="";return c.layers.forEach(u=>{Object.entries(u.data).forEach(([d,f])=>{h+=`${d}${f}`,Array.isArray(f)?f.forEach(p=>h+=`${p}`):typeof f=="object"?Object.values(f).forEach(p=>{typeof p=="number"?h+=`${p.toFixed(4)}`:h+=`${p}`}):h+=`${f}`})}),h}t.getHash=n;function i(){return{layers:new Rn}}t.defaultEmptyData=i;function r(c="layer1",h="layer2"){return o("phong",c,h)}t.defaultData=r;function s(c,h){return{...c,name:h}}t.withName=s;function o(c,h="layer1",u="layer2"){let d=new Rn;return d.push({fi:0,data:vc.defaultData("light",c),id:h}),d.push({fi:1,data:vc.defaultData("color"),id:u}),{layers:d}}t.defaultTwoLayerData=o;function a(c,h="phong",u="layer1",d="layer2"){let f=vc.defaultData("texture");Object.assign(f.texture,{image:c});let p=new Rn;return p.push({fi:0,data:f,id:u}),p.push({fi:1,data:vc.defaultData("light",h),id:d}),{layers:p}}t.defaultTwoLayerTextureData=a;function l(c,h="phong",u="layer1",d="layer2"){let f=vc.defaultData("video");Object.assign(f.texture,{video:c});let p=new Rn;return p.push({fi:0,data:f,id:u}),p.push({fi:1,data:vc.defaultData("light",h),id:d}),{layers:p}}t.defaultTwoLayerVideoTextureData=l})(yl||(yl={}));var XL;(t=>{function e(){return{points:new Rn,roundness:0,shapeHoles:[],isClosed:!1}}t.defaultData=e})(XL||(XL={}));var YL;(t=>{function e(){return{points:new Rn,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}t.defaultData=e})(YL||(YL={}));var wwe={type:"Ellipse",width:100,height:100,spikes:64,angle:360,innerRadius:0},mj;(t=>{function e(n,i){let r={...n};return Swe.forEach(s=>{Object.assign(r,{[s]:i[s]??n[s]})}),r}t.merge=e})(mj||(mj={}));var _we={shape:wwe,depth:1,offset:0,bevel:0,bevelSides:1,angle:0,twist:0,startScale:1,endScale:1},Swe=["depth","offset","angle","twist","startScale","endScale"],KL;(t=>{function e(i){return i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"}t.is2DParametricMesh=e;function n(i){return i==="PolygonGeometry"||i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"||i==="PathGeometry"||i==="VectorGeometry"||i==="ConeGeometry"||i==="CubeGeometry"||i==="CylinderGeometry"||i==="DodecahedronGeometry"||i==="HelixGeometry"||i==="IcosahedronGeometry"||i==="LatheGeometry"||i==="PyramidGeometry"||i==="SphereGeometry"||i==="PlaneGeometry"||i==="BackdropGeometry"||i==="TorusGeometry"||i==="TorusKnotGeometry"||i==="BooleanGeometry"||i==="TextGeometry"}t.isParametricMesh=n})(KL||(KL={}));var gj;(t=>{function e(n,i){let r={...n};return Object.assign(r,i),r.type==="PathGeometry"&&"extrusion"in i&&i.extrusion&&(r.extrusion={...n.extrusion},Object.assign(r.extrusion,mj.merge(r.extrusion,i.extrusion))),r}t.merge=e})(gj||(gj={}));var ub;(t=>{function e(n){if(n==="RectangleGeometry")return{width:320,height:320,type:n,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(n==="PathGeometry")return{type:n,width:1,height:1,depth:1,path:YL.defaultData(),extrusion:_we};if(n==="VectorGeometry")return{width:1,height:1,type:n,subdivisions:12,shape:XL.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(n==="BooleanGeometry")return{type:n,operation:2,width:0,height:0,depth:0,phongAngle:35};if(n==="TextGeometry")return{type:n,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:"",textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};throw new Error("not implemented")}t.defaultData=e})(ub||(ub={}));var cae=["width","height","depth"],uae;(t=>{function e(i){return i==="Component"||i==="Instance"}t.isComponentRelated=e;function n(i){return i==="Empty"||i==="Instance"}t.isEmptyOrComponent=n})(uae||(uae={}));var uw;(t=>{t.identity={...lj.identity,hiddenMatrix:cw.identity};function e(r){return{position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix}}t.fromObject=e;function n(r,s){return{position:(s==null?void 0:s.position)||r.position,rotation:(s==null?void 0:s.rotation)||r.rotation,scale:(s==null?void 0:s.scale)||r.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||r.hiddenMatrix}}t.merge=n;function i(r,s){return{position:iv.isEqual(r.position,s.position)?null:s.position,rotation:iv.isEqual(r.rotation,s.rotation)?null:s.rotation,scale:iv.isEqual(r.scale,s.scale)?null:s.scale,hiddenMatrix:cw.isEqual(r.hiddenMatrix,s.hiddenMatrix)?null:s.hiddenMatrix}}t.diff=i})(uw||(uw={}));var vj;(t=>t.defaultData={fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(vj||(vj={}));var Ic;(t=>t.defaultData={states:new Rn,events:new Rn,visible:!0,raycastLock:!1,physics:null,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...uw.identity,cloner:null})(Ic||(Ic={}));var hae;(t=>t.defaultData={type:"Empty",...Ic.defaultData})(hae||(hae={}));var dae;(t=>t.defaultData={type:"Component",...Ic.defaultData})(dae||(dae={}));var hb;(t=>t.defaultData={type:"Mesh",...Ic.defaultData,...pj.defaultData})(hb||(hb={}));var JL;(t=>t.defaultData={...Ic.defaultData,...uw.identity,...V2.defaultData})(JL||(JL={}));var yj;(t=>{function e(n){return{...Ic.defaultData,...hj.defaultData(n)}}t.defaultData=e})(yj||(yj={}));var ZL;(t=>{function e(i,r,s=0){for(;s<r.length;){let o=i?i[r[s]]:void 0;if(r.length===s+1)return o;if(o)i=o.descendants,s+=1;else return}}t.resolveWithDes=e;function n(i,r,s=0){let o=e(i,r,s);if(o){let a=Object.keys(o);if(a.length===1&&a[0]==="descendants")return}return o}t.resolve=n})(ZL||(ZL={}));var hw;(t=>{t.rootOverrideProps=["physics"],t.compositeNonOptionalOverrideProps=["geometry"],t.compositeEntireOverrideOverrideProps=["material"];function e(i,r){return{...Ic.defaultData,...r,component:i,overrides:new ro,physics:void 0,type:"Instance"}}t.ofComponent=e;function n(i){let r=uw.fromObject(i.data);return e(i.id,r)}t.fromComponentData=n})(hw||(hw={}));var xj;(t=>(t.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:cw.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:vj.defaultData,states:new Rn,events:new Rn,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...V2.defaultData},t.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},t.defaultMeshObject={name:"Rectangle",...Ic.defaultData,...hb.defaultData,geometry:ub.defaultData("RectangleGeometry"),material:yl.defaultTwoLayerData("phong","layer1","layer2")},t.defaultBooleanObject={name:"Boolean",...Ic.defaultData,...hb.defaultData,geometry:ub.defaultData("BooleanGeometry"),material:yl.defaultTwoLayerData("phong","layer1","layer2")},t.defaultTextObject={name:"Text",...Ic.defaultData,...hb.defaultData,geometry:ub.defaultData("TextGeometry"),material:yl.defaultTwoLayerData("phong","layer1","layer2")}))(xj||(xj={}));var B0;(t=>{function e(s,o){let a={name:o};return s.type==="Mesh"?(a.geometry={},"material"in s&&(a.material={layers:new ro}),"materials"in s&&(a.materials=s.materials.map(l=>({layers:new ro})))):Ov.is(s.type)&&(a.perspective={},a.orthographic={}),a}t.newEmpty=e;function n(s,o){if(o===void 0)return s;let a={...s};return"material"in a&&"material"in o&&o.material&&(a.material=HL(a.material,l=>{if(typeof l!="string")for(let[c,h]of Object.entries(o.material.layers)){let u=l.layers.data(c);u&&vc.patch(u,h)}}).data),a.materials&&o.materials&&(a.materials=HL(a.materials,l=>{var c,h;for(let u=0;u<a.materials.length;u++){let d=o.materials[u];if(typeof d!="string")for(let[f,p]of Object.entries(d.layers)){let m=(h=(c=l[u])==null?void 0:c.layers)==null?void 0:h.data(f);m&&vc.patch(m,p)}}}).data),a}function i(s,o){let a,l=[],c={orthographic:0,perspective:0,geometry:0};function h(u,d){for(let[f,p]of Object.entries(d.layers)){let{texture:m,...g}=p;if(m!==void 0&&Object.keys(m).length>0){let v={path:[...u,"layers",f,"texture"],props:m,type:0};l.push(v)}if(Object.keys(g).length>0){let v={path:[...u,"layers",f],props:g,type:0};l.push(v)}}}for(let[u,d]of Object.entries(o))if(u!=="name")if(u==="cloner")l.push(...cj.toOps(d,["cloner"]));else if(u==="pathSnapping")l.push({path:[u],props:{slide:d.slide,offset:d.offset},type:0});else if(u==="material")h(["material"],d);else if(u==="materials")for(let[f,p]of Object.entries(d))h(["materials",f],p);else if(c[u]===0){if(u==="geometry"&&d.extrusion!==void 0){let f={path:[u,"extrusion"],props:d.extrusion,type:0};l.push(f),d={...d},delete d.extrusion}if(Object.keys(d).length>0){let f={path:[u],props:d,type:0};l.push(f)}}else a===void 0&&(a={path:[],props:{},type:0},l.push(a)),a.props[u]=d;return l}t.toOps=i;function r(s,o){var l,c,h,u,d,f;if(o===void 0)return s;let a={...s};if(Object.assign(a,uw.merge(a,o)),Object.assign(a,{pathSnapping:Object.assign({},a.pathSnapping,{slide:((l=o.pathSnapping)==null?void 0:l.slide)??((c=a.pathSnapping)==null?void 0:c.slide)??0,offset:((h=o.pathSnapping)==null?void 0:h.offset)??((u=a.pathSnapping)==null?void 0:u.offset)??0})}),Ov.is(s.type)){a.orthographic={...a.orthographic},a.perspective={...a.perspective};let p=o;((d=p.orthographic)==null?void 0:d.zoom)!==void 0&&(a.orthographic.zoom=p.orthographic.zoom),((f=p.perspective)==null?void 0:f.zoom)!==void 0&&(a.perspective.zoom=p.perspective.zoom),p.isUpVectorFlipped!==void 0&&(a.isUpVectorFlipped=p.isUpVectorFlipped),p.targetOffset!==void 0&&(a.targetOffset=p.targetOffset)}else if(s.type==="Mesh")"geometry"in o&&Object.assign(a,{geometry:gj.merge(a.geometry,o.geometry)}),(o.material||o.materials)&&(a=n(a,o)),a.cloner&&"cloner"in o&&Object.assign(a,{cloner:pm.merge(a.cloner,o.cloner)});else if(s.type==="Empty")a.cloner&&"cloner"in o&&Object.assign(a,{cloner:pm.merge(a.cloner,o.cloner)});else if(uj.is(s.type)){let p=o;p.intensity!==void 0&&(a.intensity=p.intensity),p.color!==void 0&&(typeof p.color=="string"?a.color=p.color:a.color=rl.clone(p.color))}return a}t.patch=r})(B0||(B0={}));var QL;(t=>t.defaultData={enabled:!1,useBackgroundColor:!1,color:rl.white,near:.1,far:2e3})(QL||(QL={}));var eR;(t=>t.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0,autoZoom:!1})(eR||(eR={}));var dw;(t=>t.defaultData={orbitControls:eR.defaultData,playCamera:null,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:typeof window<"u"?Math.floor(window.devicePixelRatio):1,stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,joystickSizeAndXYOffset:Array(12).fill(0).map((e,n)=>{let i=0,r=0;return n<5?r=-30:n<10&&(r=30),n===0||n===10||n===5?i=30:(n===4||n===11||n===9)&&(i=-30),[120,[i,r],"show"]}),gameControlObject:null})(dw||(dw={}));function Lv(t,e){return Object.setPrototypeOf(t,e),t}var C3t=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),T3t=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),P3t=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||FB&&"ontouchend"in document,D3t=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,O3t=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,L3t=()=>{if(typeof window>"u")return!1;let t=navigator.userAgent,e=navigator.vendor;return/Safari/i.test(t)&&/Apple Computer/.test(e)},R3t=()=>{if(typeof window>"u")return null;let t=navigator.userAgent.match(/Version\/(\d+\.\d)/);return t&&t[1]};C3t();var FB=T3t(),bj=P3t(),I3t=D3t(),hl=O3t(),fae=L3t(),pae=Number(R3t());function Awe(t){return Array.isArray(t)?t:[t]}function B3t(t,e){let n=0;for(;n<t.length&&n<e.length;){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1;n+=1}return n!==e.length?-1:n!==t.length?1:0}function P3(t){return FB?t.metaKey:t.ctrlKey}var dn=[],tR={},CA={},XD={};function Mwe(t){dn.includes(t)||dn.push(t)}function db(t){delete tR[t.pointerId];for(let e=0;e<dn.length;e++)if(dn[e].pointerId===t.pointerId){dn.splice(e,1);break}}function k3t(){dn.splice(0,dn.length)}function nR(t){if(t.pointerType!=="touch")return;let e=tR[t.pointerId];e===void 0&&(e={x:0,y:0},tR[t.pointerId]=e),e.x=t.pageX,e.y=t.pageY}function z5(t){let e=t.pointerId===dn[0].pointerId?dn[1]:dn[0];return tR[e.pointerId]}function Ewe(t){CA[t.key]=!0,XD[t.key]=XD[t.key]===void 0?1:XD[t.key]+1}function Cwe(t){if(FB&&CA.Meta)for(let e in CA)CA[e]=!1;else CA[t.key]=!1;XD={}}function F3t(t){t.addEventListener("pointerdown",Mwe,!0),t.addEventListener("pointerdown",nR,!0),t.addEventListener("pointermove",nR,!0),t.addEventListener("pointerup",db,!0),t.addEventListener("pointercancel",db,!0),t.addEventListener("pointerleave",db,!0),window.addEventListener("keydown",Ewe,!0),window.addEventListener("keyup",Cwe,!0)}function N3t(t){t.removeEventListener("pointerdown",Mwe,!0),t.removeEventListener("pointerdown",nR,!0),t.removeEventListener("pointermove",nR,!0),t.removeEventListener("pointerup",db,!0),t.removeEventListener("pointercancel",db,!0),t.removeEventListener("pointerleave",db,!0),window.removeEventListener("keydown",Ewe,!0),window.removeEventListener("keyup",Cwe,!0)}var el;(t=>t.defaultData={ambientLight:{enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75,depth:100,groundColor:{r:.5098039215686274,g:.5098039215686274,b:.5098039215686274},softShadows:!0,softShadowQuality:"low"},usePhysics:!1,gravity:-10,pixelsPerMeter:200,skinWidthRelative:.02,stepThreshRelative:.3,slopeThresh:65})(el||(el={}));var wj;(t=>{t.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function e(r={withLight:!0,withSquare:!0}){let s=new Ta,o=xj.defaultMeshObject;return r.withLight===!0&&s.push({fi:-1,data:{...yj.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7},id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),r.withSquare===!0&&s.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:o,children:[]}),s}t.defaultData={backgroundColor:bu.fromHexAndA(2960946,1),postprocessing:W2.defaultData,fog:QL.defaultData,objects:e(),environment:el.defaultData,publish:dw.defaultData},t.emptyData=function(r){return{backgroundColor:bu.fromHexAndA(2960946,1),postprocessing:W2.defaultData,fog:QL.defaultData,objects:r?e(r):new Ta,environment:el.defaultData,publish:dw.defaultData}};function n(r){return{...t.defaultData,objects:Lv(r,Ta.prototype)}}t.withObjs=n;function i(r,s){return n([{id:r,data:s,children:[],fi:0}])}t.withObj=i})(wj||(wj={}));var iR;(t=>t.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="})(iR||(iR={}));var rR;(t=>{function e(){let r={};return r["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},Lv(r,is.prototype)}t.defaultColors=e;function n(r){let s={};return r!=null&&r.withAITexture&&(s["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...iR.emptyImage,name:"AI generated image"}),Lv(s,is.prototype)}t.defaultImages=n;function i(){return{materials:new is,images:new is,videos:new is,colors:new is,audios:new is,fonts:new is,penumbraSize:[2,2,2]}}t.emptyData=i})(rR||(rR={}));function mae(t){t.layers.forEach(e=>{if(e.type==="depth"&&e.colorA!==void 0){let n=e.colorA,i=e.colorB,r=[[n.r,n.g,n.b,n.a],[i.r,i.g,i.b,i.a]],s=[0,1];for(let a=2;a<10;a++)r.push(r[1]),s.push(1);let o={...G2(To(e),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,e.near),far:Math.max(0,e.far),colors:r,steps:s,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(e,o)}else if(e.type==="depth"&&e.gradientType===1&&(e.near<0||e.far<0)){let n={...To(e),near:Math.max(e.near,0),far:Math.max(e.far,0)};Object.assign(e,n)}})}function YD(t,e){Object.values(t.shared.materials).forEach(n=>e(n))}function KD(t,e){t.scene.objects.traverse((n,i)=>{"materials"in i?i.materials.forEach(r=>{typeof r!="string"&&e(r)}):"material"in i&&typeof i.material!="string"&&e(i.material)})}function z3t(t){Object.assign(t.scene.publish,{orbitControls:{...eR.defaultData,...To(t.scene.publish.orbitControls)}})}function U3t(t){Object.assign(t.scene.publish.settings,{video:{...dw.defaultData.settings.video,...To(t.scene.publish.settings.video)}})}function G3t(t){function e(n){if(n.layers){for(let i of Object.values(n.layers))if(i){for(let[r,s]of Object.entries(i))if((bwe.includes(r)||typeof s=="boolean")&&delete i[r],r==="texture")for(let[o,a]of Object.entries(s))(E3t.includes(o)||typeof a=="boolean")&&delete s[o]}}}t.scene.objects.traverse((n,i)=>{i.states.forEach(r=>{let s=r;s.material?e(s.material):s.materials&&s.materials.forEach(o=>{e(o)})})})}function H3t(t){t.scene.publish.withBackground=!0}function j3t(t){t.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function V3t(t){t.scene.objects.traverse((e,n)=>{let i=n.cloner;i&&(i.radial.scale=i.radial.scale.map(r=>r+1),i.linear.scale=i.linear.scale.map(r=>r+1))})}function W3t(t){t.scene.objects.traverse((e,n)=>{let i=n.geometry;i&&(i.type==="DodecahedronGeometry"||i.type==="IcosahedronGeometry")&&(i.detail=Math.round(i.detail))})}function $3t(t){t.scene.objects.traverse((e,n)=>{let i=t.scene.objects.unproxy().parent(e);if(i){let r=To(t.scene.objects.data(i));r&&r.type==="Mesh"&&r.geometry.type==="BooleanGeometry"&&n.type==="Mesh"&&(n.visible=To(n).booleanExclude!==!0)}})}function q3t(t){t.scene.objects.traverse((e,n)=>{if(n.type==="Mesh"){let i=n;n.geometry.type==="NonParametricGeometry"?i.material!==void 0&&delete i.material:i.materials!==void 0&&delete i.materials}})}function X3t(t){function e(i){Object.setPrototypeOf(i,ro.prototype),i.texture&&Object.setPrototypeOf(i.texture,ro.prototype)}function n(i){Object.setPrototypeOf(i,ro.prototype);for(let r in i)e(i[r])}t.scene.objects.traverse((i,r)=>{r.states.forEach(s=>{let o=s;if(o.material){let a=To(o.material).layers;n(a),o.material.layers=a}if(o.materials)for(let a=0;a<o.materials.length;a++){let l=o.materials[a],c=To(l).layers;n(c),l.layers=c}})})}function gae(t){t.layers===void 0&&Object.assign(t,yl.defaultTwoLayerData("lambert"))}function U5(t){!t.layers||t.layers.forEach(e=>{if(e.type==="depth"&&e.colors.length===10){let n=[...e.colors];n.push(e.colors[9]);let i=[...e.steps];i.push(e.steps[9]);let r={...To(e),colors:n,steps:i};Object.assign(e,r)}})}function Y3t(t){t.scene.objects.traverse((e,n)=>{n.type==="Mesh"&&(n.geometry.type==="BooleanGeometry"||n.geometry.type==="SubdivGeometry")&&(n.geometry.phongAngle=35)})}function vae(t){t.scene.objects.traverse((e,n)=>{"materials"in n?n.materials.forEach(i=>{typeof i!="string"&&U5(i)}):"material"in n&&typeof n.material!="string"&&U5(n.material)}),Object.values(t.shared.materials).forEach(e=>U5(e))}function K3t(t){t.scene.environment.ambientLight.softShadows=!1,t.scene.environment.ambientLight.softShadowQuality="low",t.scene.objects.traverse((e,n)=>{(n.type==="DirectionalLight"||n.type==="SpotLight")&&(n.shadowResolution=1024,n.shadowRadius=1,n.depth=1e5)}),t.shared.penumbraSize=new Array(5).fill(.5)}function J3t(t){t.shared.audios=Lv({},is.prototype)}function Z3t(t){t.shared.videos=Lv({},is.prototype)}function Q3t(t){let e=t.shared.materials;Object.entries(e).forEach(([n,i])=>{if(!i.layers){let r={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(e,{[n]:r})}})}function eDt(t){Object.entries(To(t.shared.images)).filter(e=>e[1].asset===!1).map(e=>e[0]).forEach(e=>{delete t.shared.images[e]}),Object.entries(To(t.shared.audios)).filter(e=>e[1].asset===!1).map(e=>e[0]).forEach(e=>{delete t.shared.audios[e]})}function tDt(t){t.scene.publish.settings.web.preload=!1}function yae(t){t.layers&&t.layers.forEach(e=>{e.type==="depth"&&e.num!==void 0&&(e.colors=e.colors.slice(0,e.num),e.steps=e.steps.slice(0,e.num),delete e.num)})}function nDt(t){t.shared.fonts=Lv({},is.prototype)}function iDt(t){return t.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function rDt(t){let e=[];t.scene.objects.traverse((n,i)=>{let r=i;if(r.type==="TextFrame"){let s=yl.defaultTwoLayerData("phong"),o=typeof r.color=="string"?t.shared.colors[r.color]:r.color;s.layers[1].data.color={r:o.r,g:o.g,b:o.b},s.layers[1].data.alpha=r.alpha;let a=iDt(r.font);t.shared.fonts[a]===void 0&&(t.shared.fonts[a]={name:a});let l={name:r.name,...Ic.defaultData,...hb.defaultData,flatShading:!1,wireframe:!1,geometry:{...ub.defaultData("TextGeometry"),width:r.width,height:r.height,font:a,depth:0,horizontalAlign:r.horizontalAlign,verticalAlign:r.verticalAlign,fontSize:r.fontSize*1.40625,lineHeight:r.lineHeight/1.40625,letterSpacing:r.letterSpacing-1,text:r.text,textTransform:r.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:s,states:To(r.states),events:To(r.events),visible:r.visible,raycastLock:r.raycastLock,position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix},c=To(t.scene.objects).parent(n);t.scene.objects.insertAfter(c??null,n,[{id:n+"new",data:l,children:[]}]),e.push(n)}}),e.forEach(n=>{t.scene.objects.delete(n)})}function sDt(t){let e={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};t.scene.objects.traverse((n,i)=>{i.events.forEach(r=>{if(e[Number(r.type)])if(Object.assign(r,{type:e[Number(r.type)]}),r.type==="Audio"&&"audioEvent"in r&&(Object.assign(r,{playAudio:r.audioEvent}),delete r.audioEvent),r.type==="GameControl")Object.assign(r,{gameActions:{idle:new Rn,move:new Rn,jump:new Rn}});else{let s=new Rn;Object.assign(r,{actions:s}),(r.type==="MouseDown"||r.type==="MouseUp"||r.type==="KeyDown"||r.type==="KeyUp")&&"url"in r&&s.push({fi:0,id:Ln.generateUUID(),data:{type:"Link",url:r.url,delay:0}}),"targets"in r&&(r.targets.forEach((o,a,l)=>{let c={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},h={easing:o.easing,duration:o.duration};o.easing===6?Object.assign(h,G2(o,"mass","stiffness","damping","velocity")):o.easing===5&&Object.assign(h,{control1:{...o.control1},control2:{...o.control2}});let u={repeat:o.repeat?-1:0,delay:o.delay,delayDirection:o.delayDirection,direction:o.cycle&&o.rewind?"pingpong-rewind":o.cycle?"pingpong":"normal"},d={state:o.state,...u,...h},f={allowSlerp:!0,type:"Transition",object:o.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Rn({fi:0,id:Ln.generateUUID(),data:c},{fi:1,id:Ln.generateUUID(),data:d})};s.push({fi:l,id:a,data:f})}),delete r.targets)}})})}function oDt(t){t.scene.objects.traverse((e,n)=>{function i(r,s){var l;let o=new Rn,a=[];if(n.events.forEach((c,h,u)=>{if(c.type==="Audio"&&c.trigger===s){let d;a.push(h),c.interaction==="play"?d={...G2(c,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in c?c.after:void 0,toggle:"after"in c?c.toggle:void 0,type:"Audio"}:(c.interaction==="pause"||c.interaction==="stop")&&(d={...G2(c,"interaction","delay","object","playAudio"),type:"Audio"}),d&&o.push({fi:u,id:h,data:d})}}),a.forEach(c=>n.events.delete(c)),o.length){let c=(l=n.events.find(h=>h.type===r))==null?void 0:l.data;c?"actions"in c&&c.actions.insertBefore(null,o):n.events.insertBefore(null,[{id:Ln.generateUUID(),data:{type:r,actions:o}}])}}i("Start","start"),i("MouseDown","mouseDown"),i("MouseUp","mouseUp"),i("KeyDown","keyDown"),i("KeyUp","keyUp")})}function xae(t){var n;let e=(n=t.layers.find(i=>i.type==="light"))==null?void 0:n.data;if((e==null?void 0:e.category)==="basic"){let i=vc.defaultData("light","phong"),r=e;Object.assign(r,i),r.visible=!1}}function bae(t){YD(t,xae),KD(t,xae)}function aDt(t){t.scene.objects.traverse((e,n)=>{n.type==="Mesh"&&n.geometry.type==="SubdivGeometry"&&(n.geometry.scaleBaked||(n.geometry.scaleBaked=[1,1,1]))})}function lDt(t){t.scene.objects.traverse((e,n)=>{(n.type==="Empty"||n.type==="Mesh")&&n.cloner&&!n.cloner.randomnessObject&&!n.cloner.toObject&&!n.cloner.randomness&&(n.cloner={...n.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function cDt(t){t.scene.objects.traverse((e,n)=>{n.type==="Mesh"&&n.geometry.type==="NonParametricGeometry"&&!("material"in n)&&!("materials"in n)&&(n.material=yl.defaultTwoLayerData("phong"))})}function uDt(t){t.scene.publish.orbitControls.autoZoom===void 0&&(t.scene.publish.orbitControls.autoZoom=!1),t.scene.objects.traverse((e,n)=>{(n.type==="OrthographicCamera"||n.type==="PerspectiveCamera")&&(n.orthographic.autoZoom===void 0&&(n.orthographic.autoZoom=!1),n.orthographic.autoZoomFrustumSize===void 0&&(n.orthographic.autoZoomFrustumSize=790))})}function hDt(t){t.scene.objects.traverse((e,n)=>{n.pathSnapping===void 0&&(n.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),n.pathSnapping.offset===void 0&&(n.pathSnapping.offset=0)})}function dDt(t){t.scene.publish.mouseEventTarget===void 0&&(t.scene.publish.mouseEventTarget="canvas"),t.scene.publish.settings.web.hint===void 0&&(t.scene.publish.settings.web.hint=!1)}function fDt(t){let{video:e}=t.scene.publish.settings;e.format==="gif"&&e.fps>48&&(e.fps=15)}function pDt(t){t.scene.objects.traverse((e,n)=>{n.events.forEach(i=>{i.type==="GameControl"&&(i.resetYPosition=Math.abs(i.resetYPosition-n.position[1]))})})}var wae=36;function mDt(t){let e=t.schema??0;e!==wae&&(console.warn("updating from ",e,"to ",wae),e<1&&(KD(t,mae),YD(t,mae),t.schema=1),e<2&&(z3t(t),t.schema=2),e<3&&(G3t(t),t.schema=3),e<4&&(H3t(t),t.schema=4),e<5&&(j3t(t),t.schema=5),e<6&&(V3t(t),t.schema=6),e<7&&(W3t(t),t.schema=7),e<8&&(t.schema=8),e<9&&(vae(t),t.schema=9),e<10&&(Y3t(t),t.schema=10),e<11&&(K3t(t),t.schema=11),e<12&&(vae(t),t.schema=12),e<13&&(J3t(t),t.schema=13),e<14&&(Q3t(t),t.schema=14),e<15&&(eDt(t),t.schema=15),e<16&&(tDt(t),t.schema=16),e<17&&(KD(t,yae),YD(t,yae),t.schema=17),e<18&&(KD(t,gae),YD(t,gae),t.schema=18),e<19&&(U3t(t),t.schema=19),e<20&&(nDt(t),rDt(t),t.schema=20),e<21&&(sDt(t),oDt(t),t.schema=21),e<22&&(bae(t),t.schema=22),e<23&&(aDt(t),t.schema=23),e<24&&(lDt(t),t.schema=24),(e<25||t.shared.videos===void 0)&&(Z3t(t),e<25&&(t.schema=25)),e<26&&($3t(t),t.schema=26),e<27&&(q3t(t),t.schema=27),e<28&&(bae(t),t.schema=28),e<29&&(X3t(t),t.schema=29),e<30&&(cDt(t),t.schema=30),e<31&&(uDt(t),t.schema=31),e<33&&(hDt(t),t.schema=33),e<34&&(dDt(t),t.schema=34),e<35&&(fDt(t),t.schema=35),e<36&&(pDt(t),t.schema=36))}function Ix(t,e=!1){let n=t[0].index!==null,i=new Set(Object.keys(t[0].attributes)),r=new Set(Object.keys(t[0].morphAttributes)),s={},o={},a=t[0].morphTargetsRelative,l=new Qt,c=0;for(let h=0;h<t.length;++h){let u=t[h],d=0;if(n!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in u.attributes){if(!i.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;s[f]===void 0&&(s[f]=[]),s[f].push(u.attributes[f]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(a!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in u.morphAttributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(u.morphAttributes[f])}if(e){let f;if(n)f=u.index.count;else if(u.attributes.position!==void 0)f=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,f,h),c+=f}}if(n){let h=0,u=[];for(let d=0;d<t.length;++d){let f=t[d].index;for(let p=0;p<f.count;++p)u.push(f.getX(p)+h);h+=t[d].attributes.position.count}l.setIndex(u)}for(let h in s){let u=_ae(s[h]);if(!u)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" attribute."),null;l.setAttribute(h,u)}for(let h in o){let u=o[h][0].length;if(u===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[h]=[];for(let d=0;d<u;++d){let f=[];for(let m=0;m<o[h].length;++m)f.push(o[h][m][d]);let p=_ae(f);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" morphAttribute."),null;l.morphAttributes[h].push(p)}}return l}function _ae(t){let e,n,i,r=0;for(let a=0;a<t.length;++a){let l=t[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=l.array.constructor),e!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(n===void 0&&(n=l.itemSize),n!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=l.array.length}let s=new e(r),o=0;for(let a=0;a<t.length;++a)s.set(t[a].array,o),o+=t[a].array.length;return new on(s,n,i)}var _j;(t=>(t.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},t.defaultDataThirdPerson={moveMode:"walk",speedTranslate:1e3,speedRotate:100,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:t.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Rn,move:new Rn,jump:new Rn}}))(_j||(_j={}));var gDt=Math.pow(2,-24),D3=class{constructor(){}};function Bh(t,e,n){return n.min.x=e[t],n.min.y=e[t+1],n.min.z=e[t+2],n.max.x=e[t+3],n.max.y=e[t+4],n.max.z=e[t+5],n}function Sae(t){let e=-1,n=-1/0;for(let i=0;i<3;i++){let r=t[i+3]-t[i];r>n&&(n=r,e=i)}return e}function Aae(t,e){e.set(t)}function Mae(t,e,n){let i,r;for(let s=0;s<3;s++){let o=s+3;i=t[s],r=e[s],n[s]=i<r?i:r,i=t[o],r=e[o],n[o]=i>r?i:r}}function O3(t,e,n){for(let i=0;i<3;i++){let r=e[t+2*i],s=e[t+2*i+1],o=r-s,a=r+s;o<n[i]&&(n[i]=o),a>n[i+3]&&(n[i+3]=a)}}function GS(t){let e=t[3]-t[0],n=t[4]-t[1],i=t[5]-t[2];return 2*(e*n+n*i+i*e)}function vDt(t,e){if(!t.index){let n=t.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r;n>65535?r=new Uint32Array(new i(4*n)):r=new Uint16Array(new i(2*n)),t.setIndex(new on(r,1));for(let s=0;s<n;s++)r[s]=s}}function yDt(t){if(!t.groups||!t.groups.length)return[{offset:0,count:t.index.count/3}];let e=[],n=new Set;for(let r of t.groups)n.add(r.start),n.add(r.start+r.count);let i=Array.from(n.values()).sort((r,s)=>r-s);for(let r=0;r<i.length-1;r++){let s=i[r],o=i[r+1];e.push({offset:s/3,count:(o-s)/3})}return e}function G5(t,e,n,i,r=null){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,h=-1/0,u=1/0,d=1/0,f=1/0,p=-1/0,m=-1/0,g=-1/0,v=r!==null;for(let y=e*6,x=(e+n)*6;y<x;y+=6){let b=t[y+0],S=t[y+1],A=b-S,E=b+S;A<s&&(s=A),E>l&&(l=E),v&&b<u&&(u=b),v&&b>p&&(p=b);let M=t[y+2],C=t[y+3],T=M-C,D=M+C;T<o&&(o=T),D>c&&(c=D),v&&M<d&&(d=M),v&&M>m&&(m=M);let L=t[y+4],I=t[y+5],R=L-I,H=L+I;R<a&&(a=R),H>h&&(h=H),v&&L<f&&(f=L),v&&L>g&&(g=L)}i[0]=s,i[1]=o,i[2]=a,i[3]=l,i[4]=c,i[5]=h,v&&(r[0]=u,r[1]=d,r[2]=f,r[3]=p,r[4]=m,r[5]=g)}function xDt(t,e,n,i){let r=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,c=-1/0;for(let h=e*6,u=(e+n)*6;h<u;h+=6){let d=t[h+0];d<r&&(r=d),d>a&&(a=d);let f=t[h+2];f<s&&(s=f),f>l&&(l=f);let p=t[h+4];p<o&&(o=p),p>c&&(c=p)}i[0]=r,i[1]=s,i[2]=o,i[3]=a,i[4]=l,i[5]=c}function bDt(t,e,n,i,r){let s=n,o=n+i-1,a=r.pos,l=r.axis*2;for(;;){for(;s<=o&&e[s*6+l]<a;)s++;for(;s<=o&&e[o*6+l]>=a;)o--;if(s<o){for(let c=0;c<3;c++){let h=t[s*3+c];t[s*3+c]=t[o*3+c],t[o*3+c]=h;let u=e[s*6+c*2+0];e[s*6+c*2+0]=e[o*6+c*2+0],e[o*6+c*2+0]=u;let d=e[s*6+c*2+1];e[s*6+c*2+1]=e[o*6+c*2+1],e[o*6+c*2+1]=d}s++,o--}else return s}}var nf=32,wDt=(t,e)=>t.candidate-e.candidate,Cp=new Array(nf).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),L3=new Float32Array(6);function _Dt(t,e,n,i,r,s){let o=-1,a=0;if(s===0)o=Sae(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===1)o=Sae(t),o!==-1&&(a=SDt(n,i,r,o));else if(s===2){let l=GS(t),c=1.25*r,h=i*6,u=(i+r)*6;for(let d=0;d<3;d++){let f=e[d],p=(e[d+3]-f)/nf;if(r<nf/4){let m=[...Cp];m.length=r;let g=0;for(let y=h;y<u;y+=6,g++){let x=m[g];x.candidate=n[y+2*d],x.count=0;let{bounds:b,leftCacheBounds:S,rightCacheBounds:A}=x;for(let E=0;E<3;E++)A[E]=1/0,A[E+3]=-1/0,S[E]=1/0,S[E+3]=-1/0,b[E]=1/0,b[E+3]=-1/0;O3(y,n,b)}m.sort(wDt);let v=r;for(let y=0;y<v;y++){let x=m[y];for(;y+1<v&&m[y+1].candidate===x.candidate;)m.splice(y+1,1),v--}for(let y=h;y<u;y+=6){let x=n[y+2*d];for(let b=0;b<v;b++){let S=m[b];x>=S.candidate?O3(y,n,S.rightCacheBounds):(O3(y,n,S.leftCacheBounds),S.count++)}}for(let y=0;y<v;y++){let x=m[y],b=x.count,S=r-x.count,A=x.leftCacheBounds,E=x.rightCacheBounds,M=0;b!==0&&(M=GS(A)/l);let C=0;S!==0&&(C=GS(E)/l);let T=1+1.25*(M*b+C*S);T<c&&(o=d,c=T,a=x.candidate)}}else{for(let v=0;v<nf;v++){let y=Cp[v];y.count=0,y.candidate=f+p+v*p;let x=y.bounds;for(let b=0;b<3;b++)x[b]=1/0,x[b+3]=-1/0}for(let v=h;v<u;v+=6){let y=~~((n[v+2*d]-f)/p);y>=nf&&(y=nf-1);let x=Cp[y];x.count++,O3(v,n,x.bounds)}let m=Cp[nf-1];Aae(m.bounds,m.rightCacheBounds);for(let v=nf-2;v>=0;v--){let y=Cp[v],x=Cp[v+1];Mae(y.bounds,x.rightCacheBounds,y.rightCacheBounds)}let g=0;for(let v=0;v<nf-1;v++){let y=Cp[v],x=y.count,b=y.bounds,S=Cp[v+1].rightCacheBounds;x!==0&&(g===0?Aae(b,L3):Mae(b,L3,L3)),g+=x;let A=0,E=0;g!==0&&(A=GS(L3)/l);let M=r-g;M!==0&&(E=GS(S)/l);let C=1+1.25*(A*g+E*M);C<c&&(o=d,c=C,a=y.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function SDt(t,e,n,i){let r=0;for(let s=e,o=e+n;s<o;s++)r+=t[s*6+i*2];return r/n}function ADt(t,e){let n=t.attributes.position,i=n.array,r=t.index.array,s=r.length/3,o=new Float32Array(s*6),a=n.offset||0,l=3;n.isInterleavedBufferAttribute&&(l=n.data.stride);for(let c=0;c<s;c++){let h=c*3,u=c*6,d=r[h+0]*l+a,f=r[h+1]*l+a,p=r[h+2]*l+a;for(let m=0;m<3;m++){let g=i[d+m],v=i[f+m],y=i[p+m],x=g;v<x&&(x=v),y<x&&(x=y);let b=g;v>b&&(b=v),y>b&&(b=y);let S=(b-x)/2,A=m*2;o[u+A+0]=x+S,o[u+A+1]=S+(Math.abs(x)+S)*gDt,x<e[m]&&(e[m]=x),b>e[m+3]&&(e[m+3]=b)}}return o}function MDt(t,e){function n(v){d&&d(v/f)}function i(v,y,x,b=null,S=0){if(!p&&S>=l&&(p=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(t))),x<=h||S>=l)return n(y+x),v.offset=y,v.count=x,v;let A=_Dt(v.boundingData,b,o,y,x,u);if(A.axis===-1)return n(y+x),v.offset=y,v.count=x,v;let E=bDt(a,o,y,x,A);if(E===y||E===y+x)n(y+x),v.offset=y,v.count=x;else{v.splitAxis=A.axis;let M=new D3,C=y,T=E-y;v.left=M,M.boundingData=new Float32Array(6),G5(o,C,T,M.boundingData,s),i(M,C,T,s,S+1);let D=new D3,L=E,I=x-T;v.right=D,D.boundingData=new Float32Array(6),G5(o,L,I,D.boundingData,s),i(D,L,I,s,S+1)}return v}vDt(t,e);let r=new Float32Array(6),s=new Float32Array(6),o=ADt(t,r),a=t.index.array,l=e.maxDepth,c=e.verbose,h=e.maxLeafTris,u=e.strategy,d=e.onProgress,f=t.index.count/3,p=!1,m=[],g=yDt(t);if(g.length===1){let v=g[0],y=new D3;y.boundingData=r,xDt(o,v.offset,v.count,s),i(y,v.offset,v.count,s),m.push(y)}else for(let v of g){let y=new D3;y.boundingData=new Float32Array(6),G5(o,v.offset,v.count,y.boundingData,s),i(y,v.offset,v.count,s),m.push(y)}return m}function EDt(t,e){let n=MDt(t,e),i,r,s,o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let h=0;h<n.length;h++){let u=n[h],d=l(u),f=new a(32*d);i=new Float32Array(f),r=new Uint32Array(f),s=new Uint16Array(f),c(0,u),o.push(f)}return o;function l(h){return h.count?1:1+l(h.left)+l(h.right)}function c(h,u){let d=h/4,f=h/2,p=!!u.count,m=u.boundingData;for(let g=0;g<6;g++)i[d+g]=m[g];if(p){let g=u.offset,v=u.count;return r[d+6]=g,s[f+14]=v,s[f+15]=65535,h+32}else{let g=u.left,v=u.right,y=u.splitAxis,x;if(x=c(h+32,g),x/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[d+6]=x/4,x=c(x,v),r[d+7]=y,x}}}var Wf=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,n){let i=1/0,r=-1/0;for(let s=0,o=e.length;s<o;s++){let a=e[s][n];i=a<i?a:i,r=a>r?a:r}this.min=i,this.max=r}setFromPoints(e,n){let i=1/0,r=-1/0;for(let s=0,o=n.length;s<o;s++){let a=n[s],l=e.dot(a);i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}};Wf.prototype.setFromBox=function(){let t=new G;return function(e,n){let i=n.min,r=n.max,s=1/0,o=-1/0;for(let a=0;a<=1;a++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){t.x=i.x*a+r.x*(1-a),t.y=i.y*l+r.y*(1-l),t.z=i.z*c+r.z*(1-c);let h=e.dot(t);s=Math.min(h,s),o=Math.max(h,o)}this.min=s,this.max=o}}();var CDt=function(){let t=new G,e=new G,n=new G;return function(i,r,s){let o=i.start,a=t,l=r.start,c=e;n.subVectors(o,l),t.subVectors(i.end,r.start),e.subVectors(r.end,r.start);let h=n.dot(c),u=c.dot(a),d=c.dot(c),f=n.dot(a),p=a.dot(a)*d-u*u,m,g;p!==0?m=(h*u-f*d)/p:m=0,g=(h+m*u)/d,s.x=m,s.y=g}}(),o7=function(){let t=new Ae,e=new G,n=new G;return function(i,r,s,o){CDt(i,r,t);let a=t.x,l=t.y;if(a>=0&&a<=1&&l>=0&&l<=1){i.at(a,s),r.at(l,o);return}else if(a>=0&&a<=1){l<0?r.at(0,o):r.at(1,o),i.closestPointToPoint(o,!0,s);return}else if(l>=0&&l<=1){a<0?i.at(0,s):i.at(1,s),r.closestPointToPoint(s,!0,o);return}else{let c;a<0?c=i.start:c=i.end;let h;l<0?h=r.start:h=r.end;let u=e,d=n;if(i.closestPointToPoint(h,!0,e),r.closestPointToPoint(c,!0,n),u.distanceToSquared(h)<=d.distanceToSquared(c)){s.copy(u),o.copy(h);return}else{s.copy(c),o.copy(d);return}}}}(),TDt=function(){let t=new G,e=new G,n=new gc,i=new Rc;return function(r,s){let{radius:o,center:a}=r,{a:l,b:c,c:h}=s;if(i.start=l,i.end=c,i.closestPointToPoint(a,!0,t).distanceTo(a)<=o||(i.start=l,i.end=h,i.closestPointToPoint(a,!0,t).distanceTo(a)<=o)||(i.start=c,i.end=h,i.closestPointToPoint(a,!0,t).distanceTo(a)<=o))return!0;let u=s.getPlane(n);if(Math.abs(u.distanceToPoint(a))<=o){let d=u.projectPoint(a,e);if(s.containsPoint(d))return!0}return!1}}(),PDt=1e-15;function x1(t){return Math.abs(t)<PDt}var $f=class extends ga{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new G),this.satBounds=new Array(4).fill().map(()=>new Wf),this.points=[this.a,this.b,this.c],this.sphere=new Gc,this.plane=new gc,this.needsUpdate=!0}intersectsSphere(e){return TDt(e,this)}update(){let e=this.a,n=this.b,i=this.c,r=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,r);let c=s[1],h=o[1];c.subVectors(e,n),h.setFromPoints(c,r);let u=s[2],d=o[2];u.subVectors(n,i),d.setFromPoints(u,r);let f=s[3],p=o[3];f.subVectors(i,e),p.setFromPoints(f,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}};$f.prototype.closestPointToSegment=function(){let t=new G,e=new G,n=new Rc;return function(i,r=null,s=null){let{start:o,end:a}=i,l=this.points,c,h=1/0;for(let u=0;u<3;u++){let d=(u+1)%3;n.start.copy(l[u]),n.end.copy(l[d]),o7(n,i,t,e),c=t.distanceToSquared(e),c<h&&(h=c,r&&r.copy(t),s&&s.copy(e))}return this.closestPointToPoint(o,t),c=o.distanceToSquared(t),c<h&&(h=c,r&&r.copy(t),s&&s.copy(o)),this.closestPointToPoint(a,t),c=a.distanceToSquared(t),c<h&&(h=c,r&&r.copy(t),s&&s.copy(a)),Math.sqrt(h)}}();$f.prototype.intersectsTriangle=function(){let t=new $f,e=new Array(3),n=new Array(3),i=new Wf,r=new Wf,s=new G,o=new G,a=new G,l=new G,c=new Rc,h=new Rc,u=new Rc;return function(d,f=null){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(t.copy(d),t.update(),d=t);let p=this.plane,m=d.plane;if(Math.abs(p.normal.dot(m.normal))>1-1e-10){let g=this.satBounds,v=this.satAxes;n[0]=d.a,n[1]=d.b,n[2]=d.c;for(let b=0;b<4;b++){let S=g[b],A=v[b];if(i.setFromPoints(A,n),S.isSeparated(i))return!1}let y=d.satBounds,x=d.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let b=0;b<4;b++){let S=y[b],A=x[b];if(i.setFromPoints(A,e),S.isSeparated(i))return!1}for(let b=0;b<4;b++){let S=v[b];for(let A=0;A<4;A++){let E=x[A];if(s.crossVectors(S,E),i.setFromPoints(s,e),r.setFromPoints(s,n),i.isSeparated(r))return!1}}return f&&(console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let g=this.points,v=!1,y=0;for(let L=0;L<3;L++){let I=g[L],R=g[(L+1)%3];c.start.copy(I),c.end.copy(R),c.delta(o);let H=v?h.start:h.end,Z=x1(m.distanceToPoint(I));if(x1(m.normal.dot(o))&&Z){h.copy(c),y=2;break}if((m.intersectLine(c,H)||Z)&&!x1(H.distanceTo(R))){if(y++,v)break;v=!0}}if(y===1&&this.containsPoint(h.start))return f&&(f.start.copy(h.start),f.end.copy(h.start)),!0;if(y!==2)return!1;let x=d.points,b=!1,S=0;for(let L=0;L<3;L++){let I=x[L],R=x[(L+1)%3];c.start.copy(I),c.end.copy(R),c.delta(a);let H=b?u.start:u.end,Z=x1(p.distanceToPoint(I));if(x1(p.normal.dot(a))&&Z){u.copy(c),S=2;break}if((p.intersectLine(c,H)||Z)&&!x1(H.distanceTo(R))){if(S++,b)break;b=!0}}if(S===1&&this.containsPoint(u.start))return f&&(f.start.copy(u.start),f.end.copy(u.start)),!0;if(S!==2)return!1;if(h.delta(o),u.delta(a),o.dot(a)<0){let L=u.start;u.start=u.end,u.end=L}let A=h.start.dot(o),E=h.end.dot(o),M=u.start.dot(o),C=u.end.dot(o),T=E<M,D=A<C;return A!==C&&M!==E&&T===D?!1:(f&&(l.subVectors(h.start,u.start),l.dot(o)>0?f.start.copy(h.start):f.start.copy(u.start),l.subVectors(h.end,u.end),l.dot(o)<0?f.end.copy(h.end):f.end.copy(u.end)),!0)}}}();$f.prototype.distanceToPoint=function(){let t=new G;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}();$f.prototype.distanceToTriangle=function(){let t=new G,e=new G,n=["a","b","c"],i=new Rc,r=new Rc;return function(s,o=null,a=null){let l=o||a?i:null;if(this.intersectsTriangle(s,l))return(o||a)&&(o&&l.getCenter(o),a&&l.getCenter(a)),0;let c=1/0;for(let h=0;h<3;h++){let u,d=n[h],f=s[d];this.closestPointToPoint(f,t),u=f.distanceToSquared(t),u<c&&(c=u,o&&o.copy(t),a&&a.copy(f));let p=this[d];s.closestPointToPoint(p,t),u=p.distanceToSquared(t),u<c&&(c=u,o&&o.copy(p),a&&a.copy(t))}for(let h=0;h<3;h++){let u=n[h],d=n[(h+1)%3];i.set(this[u],this[d]);for(let f=0;f<3;f++){let p=n[f],m=n[(f+1)%3];r.set(s[p],s[m]),o7(i,r,t,e);let g=t.distanceToSquared(e);g<c&&(c=g,o&&o.copy(t),a&&a.copy(e))}}return Math.sqrt(c)}}();var ad=class extends cs{constructor(...e){super(...e),this.isOrientedBox=!0,this.matrix=new dt,this.invMatrix=new dt,this.points=new Array(8).fill().map(()=>new G),this.satAxes=new Array(3).fill().map(()=>new G),this.satBounds=new Array(3).fill().map(()=>new Wf),this.alignedSatBounds=new Array(3).fill().map(()=>new Wf),this.needsUpdate=!1}set(e,n,i){super.set(e,n),this.matrix.copy(i),this.needsUpdate=!0}copy(e){super.copy(e),this.matrix.copy(e.matrix),this.needsUpdate=!0}};ad.prototype.update=function(){return function(){let t=this.matrix,e=this.min,n=this.max,i=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let h=0;h<=1;h++){let u=1*l|2*c|4*h,d=i[u];d.x=l?n.x:e.x,d.y=c?n.y:e.y,d.z=h?n.z:e.z,d.applyMatrix4(t)}let r=this.satBounds,s=this.satAxes,o=i[0];for(let l=0;l<3;l++){let c=s[l],h=r[l],u=1<<l,d=i[u];c.subVectors(o,d),h.setFromPoints(c,i)}let a=this.alignedSatBounds;a[0].setFromPointsField(i,"x"),a[1].setFromPointsField(i,"y"),a[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();ad.prototype.intersectsBox=function(){let t=new Wf;return function(e){this.needsUpdate&&this.update();let n=e.min,i=e.max,r=this.satBounds,s=this.satAxes,o=this.alignedSatBounds;if(t.min=n.x,t.max=i.x,o[0].isSeparated(t)||(t.min=n.y,t.max=i.y,o[1].isSeparated(t))||(t.min=n.z,t.max=i.z,o[2].isSeparated(t)))return!1;for(let a=0;a<3;a++){let l=s[a],c=r[a];if(t.setFromBox(l,e),c.isSeparated(t))return!1}return!0}}();ad.prototype.intersectsTriangle=function(){let t=new $f,e=new Array(3),n=new Wf,i=new Wf,r=new G;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(t.copy(s),t.update(),s=t);let o=this.satBounds,a=this.satAxes;e[0]=s.a,e[1]=s.b,e[2]=s.c;for(let u=0;u<3;u++){let d=o[u],f=a[u];if(n.setFromPoints(f,e),d.isSeparated(n))return!1}let l=s.satBounds,c=s.satAxes,h=this.points;for(let u=0;u<3;u++){let d=l[u],f=c[u];if(n.setFromPoints(f,h),d.isSeparated(n))return!1}for(let u=0;u<3;u++){let d=a[u];for(let f=0;f<4;f++){let p=c[f];if(r.crossVectors(d,p),n.setFromPoints(r,e),i.setFromPoints(r,h),n.isSeparated(i))return!1}}return!0}}();ad.prototype.closestPointToPoint=function(){return function(t,e){return this.needsUpdate&&this.update(),e.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),e}}();ad.prototype.distanceToPoint=function(){let t=new G;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}();ad.prototype.distanceToBox=function(){let t=["x","y","z"],e=new Array(12).fill().map(()=>new Rc),n=new Array(12).fill().map(()=>new Rc),i=new G,r=new G;return function(s,o=0,a=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(a||l)&&(s.getCenter(r),this.closestPointToPoint(r,i),s.closestPointToPoint(i,r),a&&a.copy(i),l&&l.copy(r)),0;let c=o*o,h=s.min,u=s.max,d=this.points,f=1/0;for(let m=0;m<8;m++){let g=d[m];r.copy(g).clamp(h,u);let v=g.distanceToSquared(r);if(v<f&&(f=v,a&&a.copy(g),l&&l.copy(r),v<c))return Math.sqrt(v)}let p=0;for(let m=0;m<3;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){let y=(m+1)%3,x=(m+2)%3,b=g<<y|v<<x,S=1<<m|g<<y|v<<x,A=d[b],E=d[S];e[p].set(A,E);let M=t[m],C=t[y],T=t[x],D=n[p],L=D.start,I=D.end;L[M]=h[M],L[C]=g?h[C]:u[C],L[T]=v?h[T]:u[C],I[M]=u[M],I[C]=g?h[C]:u[C],I[T]=v?h[T]:u[C],p++}for(let m=0;m<=1;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){r.x=m?u.x:h.x,r.y=g?u.y:h.y,r.z=v?u.z:h.z,this.closestPointToPoint(r,i);let y=r.distanceToSquared(i);if(y<f&&(f=y,a&&a.copy(i),l&&l.copy(r),y<c))return Math.sqrt(y)}for(let m=0;m<12;m++){let g=e[m];for(let v=0;v<12;v++){let y=n[v];o7(g,y,i,r);let x=i.distanceToSquared(r);if(x<f&&(f=x,a&&a.copy(i),l&&l.copy(r),x<c))return Math.sqrt(x)}}return Math.sqrt(f)}}();var R3=new G,I3=new G,B3=new G,Eae=new Ae,Cae=new Ae,Tae=new Ae,Pae=new G;function DDt(t,e,n,i,r,s){let o;return s===Us?o=t.intersectTriangle(i,n,e,!0,r):o=t.intersectTriangle(e,n,i,s!==ll,r),o===null?null:{distance:t.origin.distanceTo(r),point:r.clone()}}function ODt(t,e,n,i,r,s,o){R3.fromBufferAttribute(e,i),I3.fromBufferAttribute(e,r),B3.fromBufferAttribute(e,s);let a=DDt(t,R3,I3,B3,Pae,o);if(a){n&&(Eae.fromBufferAttribute(n,i),Cae.fromBufferAttribute(n,r),Tae.fromBufferAttribute(n,s),a.uv=ga.getUV(Pae,R3,I3,B3,Eae,Cae,Tae,new Ae));let l={a:i,b:r,c:s,normal:new G,materialIndex:0};ga.getNormal(R3,I3,B3,l.normal),a.face=l,a.faceIndex=i}return a}function Twe(t,e,n,i,r){let s=i*3,o=t.index.getX(s),a=t.index.getX(s+1),l=t.index.getX(s+2),c=ODt(n,t.attributes.position,t.attributes.uv,o,a,l,e);return c?(c.faceIndex=i,r&&r.push(c),c):null}function LDt(t,e,n,i,r,s){for(let o=i,a=i+r;o<a;o++)Twe(t,e,n,o,s)}function RDt(t,e,n,i,r){let s=1/0,o=null;for(let a=i,l=i+r;a<l;a++){let c=Twe(t,e,n,a);c&&c.distance<s&&(o=c,s=c.distance)}return o}function Pwe(t,e,n){return t===null||(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(n.ray.origin),t.object=e,t.distance<n.near||t.distance>n.far)?null:t}function Ph(t,e,n,i){let r=t.a,s=t.b,o=t.c,a=e,l=e+1,c=e+2;n&&(a=n.getX(e),l=n.getX(e+1),c=n.getX(e+2)),r.x=i.getX(a),r.y=i.getY(a),r.z=i.getZ(a),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),o.x=i.getX(c),o.y=i.getY(c),o.z=i.getZ(c)}function Dae(t,e,n,i,r,s,o){let a=n.index,l=n.attributes.position;for(let c=t,h=e+t;c<h;c++)if(Ph(o,c*3,a,l),o.needsUpdate=!0,i(o,c,r,s))return!0;return!1}var Dwe=class{constructor(t){this._getNewPrimitive=t,this._primitives=[]}getPrimitive(){let t=this._primitives;return t.length===0?this._getNewPrimitive():t.pop()}releasePrimitive(t){this._primitives.push(t)}};function Yp(t,e){return e[t+15]===65535}function fb(t,e){return e[t+6]}function $2(t,e){return e[t+14]}function q2(t){return t+8}function X2(t,e){return e[t+6]}function IDt(t,e){return e[t+7]}var Bx=new cs,sR=new G,BDt=["x","y","z"];function Sj(t,e,n,i,r){let s=t*2,o=i_,a=Nm,l=zm;if(Yp(s,a)){let c=fb(t,l),h=$2(s,a);LDt(e,n,i,c,h,r)}else{let c=q2(t);oR(c,o,i,sR)&&Sj(c,e,n,i,r);let h=X2(t,l);oR(h,o,i,sR)&&Sj(h,e,n,i,r)}}function Aj(t,e,n,i){let r=t*2,s=i_,o=Nm,a=zm;if(Yp(r,o)){let l=fb(t,a),c=$2(r,o);return RDt(e,n,i,l,c)}else{let l=IDt(t,a),c=BDt[l],h=i.direction[c]>=0,u,d;h?(u=q2(t),d=X2(t,a)):(u=X2(t,a),d=q2(t));let f=oR(u,s,i,sR)?Aj(u,e,n,i):null;if(f){let m=f.point[c];if(h?m<=s[d+l]:m>=s[d+l+3])return f}let p=oR(d,s,i,sR)?Aj(d,e,n,i):null;return f&&p?f.distance<=p.distance?f:p:f||p||null}}var kDt=function(){let t,e,n=[],i=new Dwe(()=>new cs);return function(...s){t=i.getPrimitive(),e=i.getPrimitive(),n.push(t,e);let o=r(...s);i.releasePrimitive(t),i.releasePrimitive(e),n.pop(),n.pop();let a=n.length;return a>0&&(e=n[a-1],t=n[a-2]),o};function r(s,o,a,l,c=null,h=0,u=0){function d(y){let x=y*2,b=Nm,S=zm;for(;!Yp(x,b);)y=q2(y),x=y*2;return fb(y,S)}function f(y){let x=y*2,b=Nm,S=zm;for(;!Yp(x,b);)y=X2(y,S),x=y*2;return fb(y,S)+$2(x,b)}let p=s*2,m=i_,g=Nm,v=zm;if(Yp(p,g)){let y=fb(s,v),x=$2(p,g);return Bh(s,m,t),l(y,x,!1,u,h+s,t)}else{let y=q2(s),x=X2(s,v),b=y,S=x,A,E,M,C;if(c&&(M=t,C=e,Bh(b,m,M),Bh(S,m,C),A=c(M),E=c(C),E<A)){b=x,S=y;let Z=A;A=E,E=Z,M=C}M||(M=t,Bh(b,m,M));let T=Yp(b*2,g),D=a(M,T,A,u+1,h+b),L;if(D===2){let Z=d(b),ee=f(b)-Z;L=l(Z,ee,!0,u+1,h+b,M)}else L=D&&r(b,o,a,l,c,h,u+1);if(L)return!0;C=e,Bh(S,m,C);let I=Yp(S*2,g),R=a(C,I,E,u+1,h+S),H;if(R===2){let Z=d(S),ee=f(S)-Z;H=l(Z,ee,!0,u+1,h+S,C)}else H=R&&r(S,o,a,l,c,h,u+1);return!!H}}}(),FDt=function(){let t=new $f,e=new $f,n=new dt,i=new ad,r=new ad;return function s(o,a,l,c,h=null){let u=o*2,d=i_,f=Nm,p=zm;if(h===null&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,c),h=i),Yp(u,f)){let m=a,g=m.index,v=m.attributes.position,y=l.index,x=l.attributes.position,b=fb(o,p),S=$2(u,f);if(n.copy(c).invert(),l.boundsTree)return Bh(o,d,r),r.matrix.copy(n),r.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:A=>r.intersectsBox(A),intersectsTriangle:A=>{A.a.applyMatrix4(c),A.b.applyMatrix4(c),A.c.applyMatrix4(c),A.needsUpdate=!0;for(let E=b*3,M=(S+b)*3;E<M;E+=3)if(Ph(e,E,g,v),e.needsUpdate=!0,A.intersectsTriangle(e))return!0;return!1}});for(let A=b*3,E=S+b*3;A<E;A+=3){Ph(t,A,g,v),t.a.applyMatrix4(n),t.b.applyMatrix4(n),t.c.applyMatrix4(n),t.needsUpdate=!0;for(let M=0,C=y.count;M<C;M+=3)if(Ph(e,M,y,x),e.needsUpdate=!0,t.intersectsTriangle(e))return!0}}else{let m=o+8,g=p[o+6];return Bh(m,d,Bx),!!(h.intersectsBox(Bx)&&s(m,a,l,c,h)||(Bh(g,d,Bx),h.intersectsBox(Bx)&&s(g,a,l,c,h)))}}}();function oR(t,e,n,i){return Bh(t,e,Bx),n.intersectBox(Bx,i)}var Mj=[],JD,i_,Nm,zm;function TA(t){JD&&Mj.push(JD),JD=t,i_=new Float32Array(t),Nm=new Uint16Array(t),zm=new Uint32Array(t)}function k3(){JD=null,i_=null,Nm=null,zm=null,Mj.length&&TA(Mj.pop())}var H5=Symbol("skip tree generation"),j5=new cs,V5=new cs,b1=new dt,Hg=new ad,HS=new ad,jS=new G,F3=new G,NDt=new G,zDt=new G,UDt=new G,Oae=new cs,fh=new Dwe(()=>new $f),so=class{static serialize(t,e={}){if(e.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),so.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});e={cloneBuffers:!0,...e};let n=t.geometry,i=t._roots,r=n.getIndex(),s;return e.cloneBuffers?s={roots:i.map(o=>o.slice()),index:r.array.slice()}:s={roots:i,index:r.array},s}static deserialize(t,e,n={}){if(typeof n=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),so.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});n={setIndex:!0,...n};let{index:i,roots:r}=t,s=new so(e,{...n,[H5]:!0});if(s._roots=r,n.setIndex){let o=e.getIndex();if(o===null){let a=new on(t.index,1,!1);e.setIndex(a)}else o.array!==i&&(o.array.set(i),o.needsUpdate=!0)}return s}constructor(t,e={}){if(t.isBufferGeometry){if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(e=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[H5]:!1},e),e.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,e[H5]||(this._roots=EDt(t,e),!t.boundingBox&&e.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new cs))),this.geometry=t}refit(t=null){t&&Array.isArray(t)&&(t=new Set(t));let e=this.geometry,n=e.index.array,i=e.attributes.position,r=i.array,s=i.offset||0,o=3;i.isInterleavedBufferAttribute&&(o=i.data.stride);let a,l,c,h,u=0,d=this._roots;for(let p=0,m=d.length;p<m;p++)a=d[p],l=new Uint32Array(a),c=new Uint16Array(a),h=new Float32Array(a),f(0,u),u+=a.byteLength;function f(p,m,g=!1){let v=p*2;if(c[v+15]===65535){let y=l[p+6],x=c[v+14],b=1/0,S=1/0,A=1/0,E=-1/0,M=-1/0,C=-1/0;for(let T=3*y,D=3*(y+x);T<D;T++){let L=n[T]*o+s,I=r[L+0],R=r[L+1],H=r[L+2];I<b&&(b=I),I>E&&(E=I),R<S&&(S=R),R>M&&(M=R),H<A&&(A=H),H>C&&(C=H)}return h[p+0]!==b||h[p+1]!==S||h[p+2]!==A||h[p+3]!==E||h[p+4]!==M||h[p+5]!==C?(h[p+0]=b,h[p+1]=S,h[p+2]=A,h[p+3]=E,h[p+4]=M,h[p+5]=C,!0):!1}else{let y=p+8,x=l[p+6],b=y+m,S=x+m,A=g,E=!1,M=!1;t?A||(E=t.has(b),M=t.has(S),A=!E&&!M):(E=!0,M=!0);let C=A||E,T=A||M,D=!1;C&&(D=f(y,m,A));let L=!1;T&&(L=f(x,m,A));let I=D||L;if(I)for(let R=0;R<3;R++){let H=y+R,Z=x+R,ee=h[H],F=h[H+3],V=h[Z],U=h[Z+3];h[p+R]=ee<V?ee:V,h[p+R+3]=F>U?F:U}return I}}}traverse(t,e=0){let n=this._roots[e],i=new Uint32Array(n),r=new Uint16Array(n);s(0);function s(o,a=0){let l=o*2,c=r[l+15]===65535;if(c){let h=i[o+6],u=r[l+14];t(a,c,new Float32Array(n,o*4,6),h,u)}else{let h=o+8,u=i[o+6],d=i[o+7];t(a,c,new Float32Array(n,o*4,6),d)||(s(h,a+1),s(u,a+1))}}}raycast(t,e=zu){let n=this._roots,i=this.geometry,r=[],s=e.isMaterial,o=Array.isArray(e),a=i.groups,l=s?e.side:e;for(let c=0,h=n.length;c<h;c++){let u=o?e[a[c].materialIndex].side:l,d=r.length;if(TA(n[c]),Sj(0,i,u,t,r),k3(),o){let f=a[c].materialIndex;for(let p=d,m=r.length;p<m;p++)r[p].face.materialIndex=f}}return r}raycastFirst(t,e=zu){let n=this._roots,i=this.geometry,r=e.isMaterial,s=Array.isArray(e),o=null,a=i.groups,l=r?e.side:e;for(let c=0,h=n.length;c<h;c++){let u=s?e[a[c].materialIndex].side:l;TA(n[c]);let d=Aj(0,i,u,t);k3(),d!=null&&(o==null||d.distance<o.distance)&&(o=d,s&&(d.face.materialIndex=a[c].materialIndex))}return o}intersectsGeometry(t,e){let n=this.geometry,i=!1;for(let r of this._roots)if(TA(r),i=FDt(0,n,t,e),k3(),i)break;return i}shapecast(t,e,n){let i=this.geometry;if(t instanceof Function){if(e){let u=e;e=(d,f,p,m)=>{let g=f*3;return u(d,g,g+1,g+2,p,m)}}t={boundsTraverseOrder:n,intersectsBounds:t,intersectsTriangle:e,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let r=fh.getPrimitive(),{boundsTraverseOrder:s,intersectsBounds:o,intersectsRange:a,intersectsTriangle:l}=t;if(a&&l){let u=a;a=(d,f,p,m,g)=>u(d,f,p,m,g)?!0:Dae(d,f,i,l,p,m,r)}else a||(l?a=(u,d,f,p)=>Dae(u,d,i,l,f,p,r):a=(u,d,f)=>f);let c=!1,h=0;for(let u of this._roots){if(TA(u),c=kDt(0,i,o,a,s,h),k3(),c)break;h+=u.byteLength}return fh.releasePrimitive(r),c}bvhcast(t,e,n){let{intersectsRanges:i,intersectsTriangles:r}=n,s=this.geometry.index,o=this.geometry.attributes.position,a=t.geometry.index,l=t.geometry.attributes.position;b1.copy(e).invert();let c=fh.getPrimitive(),h=fh.getPrimitive();if(r){let d=function(f,p,m,g,v,y,x,b){for(let S=m,A=m+g;S<A;S++){Ph(h,S*3,a,l),h.a.applyMatrix4(e),h.b.applyMatrix4(e),h.c.applyMatrix4(e),h.needsUpdate=!0;for(let E=f,M=f+p;E<M;E++)if(Ph(c,E*3,s,o),c.needsUpdate=!0,r(c,h,E,S,v,y,x,b))return!0}return!1};if(i){let f=i;i=function(p,m,g,v,y,x,b,S){return f(p,m,g,v,y,x,b,S)?!0:d(p,m,g,v,y,x,b,S)}}else i=d}t.getBoundingBox(V5),V5.applyMatrix4(e);let u=this.shapecast({intersectsBounds:d=>V5.intersectsBox(d),intersectsRange:(d,f,p,m,g,v)=>(j5.copy(v),j5.applyMatrix4(b1),t.shapecast({intersectsBounds:y=>j5.intersectsBox(y),intersectsRange:(y,x,b,S,A)=>i(d,f,y,x,m,g,S,A)}))});return fh.releasePrimitive(c),fh.releasePrimitive(h),u}intersectsBox(t,e){return Hg.set(t.min,t.max,e),Hg.needsUpdate=!0,this.shapecast({intersectsBounds:n=>Hg.intersectsBox(n),intersectsTriangle:n=>Hg.intersectsTriangle(n)})}intersectsSphere(t){return this.shapecast({intersectsBounds:e=>t.intersectsBox(e),intersectsTriangle:e=>e.intersectsSphere(t)})}closestPointToGeometry(t,e,n={},i={},r=0,s=1/0){t.boundingBox||t.computeBoundingBox(),Hg.set(t.boundingBox.min,t.boundingBox.max,e),Hg.needsUpdate=!0;let o=this.geometry,a=o.attributes.position,l=o.index,c=t.attributes.position,h=t.index,u=fh.getPrimitive(),d=fh.getPrimitive(),f=F3,p=NDt,m=null,g=null;i&&(m=zDt,g=UDt);let v=1/0,y=null,x=null;return b1.copy(e).invert(),HS.matrix.copy(b1),this.shapecast({boundsTraverseOrder:b=>Hg.distanceToBox(b),intersectsBounds:(b,S,A)=>A<v&&A<s?(S&&(HS.min.copy(b.min),HS.max.copy(b.max),HS.needsUpdate=!0),!0):!1,intersectsRange:(b,S)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:A=>HS.distanceToBox(A),intersectsBounds:(A,E,M)=>M<v&&M<s,intersectsRange:(A,E)=>{for(let M=A*3,C=(A+E)*3;M<C;M+=3){Ph(d,M,h,c),d.a.applyMatrix4(e),d.b.applyMatrix4(e),d.c.applyMatrix4(e),d.needsUpdate=!0;for(let T=b*3,D=(b+S)*3;T<D;T+=3){Ph(u,T,l,a),u.needsUpdate=!0;let L=u.distanceToTriangle(d,f,m);if(L<v&&(p.copy(f),g&&g.copy(m),v=L,y=T/3,x=M/3),L<r)return!0}}}});{let A=h?h.count:c.count;for(let E=0,M=A;E<M;E+=3){Ph(d,E,h,c),d.a.applyMatrix4(e),d.b.applyMatrix4(e),d.c.applyMatrix4(e),d.needsUpdate=!0;for(let C=b*3,T=(b+S)*3;C<T;C+=3){Ph(u,C,l,a),u.needsUpdate=!0;let D=u.distanceToTriangle(d,f,m);if(D<v&&(p.copy(f),g&&g.copy(m),v=D,y=C/3,x=E/3),D<r)return!0}}}}}),fh.releasePrimitive(u),fh.releasePrimitive(d),v===1/0?null:(n.point?n.point.copy(p):n.point=p.clone(),n.distance=v,n.faceIndex=y,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(b1),p.applyMatrix4(b1),i.distance=p.sub(i.point).length(),i.faceIndex=x),n)}closestPointToPoint(t,e={},n=0,i=1/0){let r=n*n,s=i*i,o=1/0,a=null;if(this.shapecast({boundsTraverseOrder:c=>(jS.copy(t).clamp(c.min,c.max),jS.distanceToSquared(t)),intersectsBounds:(c,h,u)=>u<o&&u<s,intersectsTriangle:(c,h)=>{c.closestPointToPoint(t,jS);let u=t.distanceToSquared(jS);return u<o&&(F3.copy(jS),o=u,a=h),u<r}}),o===1/0)return null;let l=Math.sqrt(o);return e.point?e.point.copy(F3):e.point=F3.clone(),e.distance=l,e.faceIndex=a,e}getBoundingBox(t){return t.makeEmpty(),this._roots.forEach(e=>{Bh(0,new Float32Array(e),Oae),t.union(Oae)}),t}},Lae=so.prototype.raycast;so.prototype.raycast=function(...t){if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycast" has changed. See docs for new signature.');let[e,n,i,r]=t;return Lae.call(this,i,e.material).forEach(s=>{s=Pwe(s,e,n),s&&r.push(s)}),r}else return Lae.apply(this,t)};var Rae=so.prototype.raycastFirst;so.prototype.raycastFirst=function(...t){if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycastFirst" has changed. See docs for new signature.');let[e,n,i]=t;return Pwe(Rae.call(this,i,e.material),e,n)}else return Rae.apply(this,t)};var Iae=so.prototype.closestPointToPoint;so.prototype.closestPointToPoint=function(...t){if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "closestPointToPoint" has changed. See docs for new signature.'),t.unshift();let e=t[1],n={};return t[1]=n,Iae.apply(this,t),e&&e.copy(n.point),n.distance}else return Iae.apply(this,t)};var Bae=so.prototype.closestPointToGeometry;so.prototype.closestPointToGeometry=function(...t){let e=t[2],n=t[3];if(e&&e.isVector3||n&&n.isVector3){console.warn('MeshBVH: The function signature and results frame for "closestPointToGeometry" has changed. See docs for new signature.');let i={},r={},s=t[1];return t[2]=i,t[3]=r,Bae.apply(this,t),e&&e.copy(i.point),n&&n.copy(r.point).applyMatrix4(s),i.distance}else return Bae.apply(this,t)};var kae=so.prototype.refit;so.prototype.refit=function(...t){let e=t[0],n=t[1];if(n&&(n instanceof Set||Array.isArray(n))){console.warn('MeshBVH: The function signature for "refit" has changed. See docs for new signature.');let i=new Set;n.forEach(r=>i.add(r)),e&&e.forEach(r=>i.add(r)),kae.call(this,i)}else kae.apply(this,t)};["intersectsGeometry","shapecast","intersectsBox","intersectsSphere"].forEach(t=>{let e=so.prototype[t];so.prototype[t]=function(...n){return(n[0]===null||n[0].isMesh)&&(n.shift(),console.warn(`MeshBVH: The function signature for "${t}" has changed and no longer takes Mesh. See docs for new signature.`)),e.apply(this,n)}});var VS=XE(H0t()),GDt=.5*(Math.sqrt(3)-1),WS=(3-Math.sqrt(3))/6,HDt=1/3,ph=1/6,yM=t=>Math.floor(t)|0,Fae=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),W5=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function $5(t=Math.random){let e=Owe(t),n=new Float64Array(e).map(r=>Fae[r%12*2]),i=new Float64Array(e).map(r=>Fae[r%12*2+1]);return function(r,s){let o=0,a=0,l=0,c=(r+s)*GDt,h=yM(r+c),u=yM(s+c),d=(h+u)*WS,f=h-d,p=u-d,m=r-f,g=s-p,v,y;m>g?(v=1,y=0):(v=0,y=1);let x=m-v+WS,b=g-y+WS,S=m-1+2*WS,A=g-1+2*WS,E=h&255,M=u&255,C=.5-m*m-g*g;if(C>=0){let L=E+e[M],I=n[L],R=i[L];C*=C,o=C*C*(I*m+R*g)}let T=.5-x*x-b*b;if(T>=0){let L=E+v+e[M+y],I=n[L],R=i[L];T*=T,a=T*T*(I*x+R*b)}let D=.5-S*S-A*A;if(D>=0){let L=E+1+e[M+1],I=n[L],R=i[L];D*=D,l=D*D*(I*S+R*A)}return 70*(o+a+l)}}function jDt(t=Math.random){let e=Owe(t),n=new Float64Array(e).map(s=>W5[s%12*3]),i=new Float64Array(e).map(s=>W5[s%12*3+1]),r=new Float64Array(e).map(s=>W5[s%12*3+2]);return function(s,o,a){let l,c,h,u,d=(s+o+a)*HDt,f=yM(s+d),p=yM(o+d),m=yM(a+d),g=(f+p+m)*ph,v=f-g,y=p-g,x=m-g,b=s-v,S=o-y,A=a-x,E,M,C,T,D,L;b>=S?S>=A?(E=1,M=0,C=0,T=1,D=1,L=0):b>=A?(E=1,M=0,C=0,T=1,D=0,L=1):(E=0,M=0,C=1,T=1,D=0,L=1):S<A?(E=0,M=0,C=1,T=0,D=1,L=1):b<A?(E=0,M=1,C=0,T=0,D=1,L=1):(E=0,M=1,C=0,T=1,D=1,L=0);let I=b-E+ph,R=S-M+ph,H=A-C+ph,Z=b-T+2*ph,ee=S-D+2*ph,F=A-L+2*ph,V=b-1+3*ph,U=S-1+3*ph,j=A-1+3*ph,z=f&255,Y=p&255,J=m&255,K=.6-b*b-S*S-A*A;if(K<0)l=0;else{let se=z+e[Y+e[J]];K*=K,l=K*K*(n[se]*b+i[se]*S+r[se]*A)}let X=.6-I*I-R*R-H*H;if(X<0)c=0;else{let se=z+E+e[Y+M+e[J+C]];X*=X,c=X*X*(n[se]*I+i[se]*R+r[se]*H)}let te=.6-Z*Z-ee*ee-F*F;if(te<0)h=0;else{let se=z+T+e[Y+D+e[J+L]];te*=te,h=te*te*(n[se]*Z+i[se]*ee+r[se]*F)}let re=.6-V*V-U*U-j*j;if(re<0)u=0;else{let se=z+1+e[Y+1+e[J+1]];re*=re,u=re*re*(n[se]*V+i[se]*U+r[se]*j)}return 32*(l+c+h+u)}}function Owe(t){let e=new Uint8Array(512);for(let n=0;n<512/2;n++)e[n]=n;for(let n=0;n<512/2-1;n++){let i=n+~~(t()*(256-n)),r=e[n];e[n]=e[i],e[i]=r}for(let n=256;n<512;n++)e[n]=e[n-256];return e}var ou=new ga,VDt=class{constructor(t){this.weightAttribute=null;let e=t.geometry;if(!e.isBufferGeometry||e.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");e.index&&(e=e.toNonIndexed()),this.geometry=e,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let t=this.positionAttribute,e=new Float32Array(t.count/3);for(let i=0;i<t.count;i+=3){let r=1;ou.a.fromBufferAttribute(t,i),ou.b.fromBufferAttribute(t,i+1),ou.c.fromBufferAttribute(t,i+2),r*=ou.getArea(),e[i/3]=r}this.distribution=new Float32Array(t.count/3);let n=0;for(let i=0;i<e.length;i++)n+=e[i],this.distribution[i]=n;return this}setRandomGenerator(t){return this.randomFunction=t,this}sample(t,e){if(this.distribution){let n=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*n);return this.sampleFace(i,t,e)}}binarySearch(t){if(!this.distribution)return 0;let e=this.distribution,n=0,i=e.length-1,r=-1;for(;n<=i;){let s=Math.ceil((n+i)/2);if(s===0||e[s-1]<=t&&e[s]>t){r=s;break}else t<e[s]?i=s-1:n=s+1}return r}sampleFace(t,e,n){let i=this.randomFunction(),r=this.randomFunction();return i+r>1&&(i=1-i,r=1-r),ou.a.fromBufferAttribute(this.positionAttribute,t*3),ou.b.fromBufferAttribute(this.positionAttribute,t*3+1),ou.c.fromBufferAttribute(this.positionAttribute,t*3+2),e.set(0,0,0).addScaledVector(ou.a,i).addScaledVector(ou.b,r).addScaledVector(ou.c,1-(i+r)),ou.getNormal(n),this}},WDt=XE(Cxe()),$Dt=new dt,qDt=new dt,XDt=new dt,aR;(t=>{function e(n){return n&&n.__isSPEObject}t.is=e})(aR||(aR={}));var a7=t=>class extends t{constructor(){super(...arguments),this.hiddenMatrix=new dt,this.matrixWorldRigid=new dt,this.shearScale=new dt,this.shearScaleInv=new dt}get __isSPEObject(){return!0}isDescendantOf(e){e instanceof wi&&(e=e.uuid);let n=this;for(;n.parent;){if(n.parent.uuid===e)return!0;n=n.parent}return!1}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(let n of this.children)n.updateMatrixWorld(e)}updateWorldMatrix(e,n){let i=this.parent;if(e&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),n)for(let r of this.children)r.updateWorldMatrix(!1,!0)}traverseObject(e,n=0){if(e(this,n)!==!0)for(let i of this.children)aR.is(i)&&i.traverseObject(e,n+1)}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,n=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:i,v:r,q:s}=(0,WDt.SVD)(n),o=$Dt.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),a=qDt.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),l=XDt.copy(a).transpose();this.shearScale.makeScale(s[0],s[1],s[2]).multiply(l).premultiply(a),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,l).copyPosition(this.matrixWorld),s.every(c=>Math.abs(s[0]-c)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(e,n){this.updateWorldMatrix(!0,!1);let i=new dt().copy(this.matrixWorld).invert();return e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),i.multiply(e.parent.matrixWorld)),"hiddenMatrix"in e&&e.hiddenMatrix instanceof dt?e.hiddenMatrix.premultiply(i):e.applyMatrix4(i),e.updateWorldMatrix(!1,!1),this.add(e),n!==void 0&&(this.children.pop(),this.children.splice(n,0,e)),this}},YDt=class extends a7(wi){},KDt=t=>t.type==="Mesh",k0=class extends YDt{constructor(t){super(),this.object=t,this.matrixAutoUpdate=!1}expand(){let t=0,e=this.object.entityChildren(t);for(;e;){let n=this.children[t];(n==null?void 0:n.object)!==e&&(n&&this.remove(n),n=new k0(e),this.add(n),this.children.splice(t,0,this.children.pop()),n.matrixWorldNeedsUpdate=!0,n.matrixAutoUpdate=!1,n.matrix=e.matrix,n.hiddenMatrix=e.hiddenMatrix),n.expand(),t+=1,e=this.object.entityChildren(t)}for(;this.children.length>t;)this.remove(this.children[t])}get visible(){var t;return this.object.visible||this.object.dataPatched.visible&&((t=this.object.dataPatched.cloner)==null?void 0:t.hideBase)===!0}set visible(t){}get castShadow(){return this.object.castShadow}set castShadow(t){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(t){}get isMesh(){return KDt(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(t){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},w0=new G,_0=new G,pb=new dt,Lwe=[new G(-1,1,1),new G(-1,-1,1),new G(1,-1,1),new G(1,1,1),new G(-1,1,-1),new G(-1,-1,-1),new G(1,-1,-1),new G(1,1,-1)],JDt=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],ZDt=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],Nae=(t,e,n)=>{t.updateEntityBoxSize(w0,_0),pb.copy(e).multiply(t.matrixWorld),_0.x===0&&_0.y===0&&_0.z===0?n.push(new G(w0.x,w0.y,w0.z).applyMatrix4(pb)):Lwe.forEach(i=>{n.push(i.clone().multiply(_0).add(w0).applyMatrix4(pb))})},zae=class extends cs{constructor(){super(...arguments),this.matrix=new dt,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(t){return super.copy(t),this.matrix.copy(t.matrix),this.vertices=t.vertices.map(e=>e.clone()),this.faces=t.faces.map(e=>e.clone()),this.edges=t.edges.map(e=>e.clone()),this.centerEdges=t.centerEdges.map(e=>e.clone()),this}setFromObjectSize(t,e=!1){t.updateWorldMatrix(!1,e),this.makeEmpty(),this.matrix.copy(t.matrixWorld);let n=new dt().copy(t.matrixWorld).invert();return this.expandByObjectSize(t,n,e)}expandByObjectSize(t,e,n=!1){let i=[];return n===!0?t.traverseEntity(r=>{(r.visible||r.cloner&&r.data.visible)&&Nae(r,e,i)}):Nae(t,e,i),this.setFromPoints(i)}getCenter(t){return t=super.getCenter(t),t.applyMatrix4(this.matrix),t}getPositionToCenter(t){return t=super.getCenter(t),t.applyMatrix4(pb.copy(this.matrix).setPosition(0,0,0)),t}computeVertices(){this.getSize(_0).multiplyScalar(.5),this.getCenter(w0),pb.copy(this.matrix).setPosition(w0),this.vertices=Lwe.map(t=>t.clone().multiply(_0).applyMatrix4(pb))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=JDt.map(([t,e])=>new Rc(this.vertices[t],this.vertices[e])),this.centerEdges=this.edges.map(t=>t.getCenter(new G))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=ZDt.map(([t,e])=>this.vertices[t].clone().add(this.vertices[e]).multiplyScalar(.5))}},mm={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},QDt=class extends Jxe{constructor(){super()}getPoints(t=12){let e=[],n,i=this.getCurveLengths(),r=i[i.length-1]/i.length;for(let s=0,o=this.curves;s<o.length;s++){let a=o[s],l=s===0?i[s]:i[s]-i[s-1],c=Math.ceil(t*l/r),h=a.getPoints(c);for(let u=0;u<h.length;u++){let d=h[u];n&&n.equals(d)||(e.push(d),n=d)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}},Ej=.001;function Cj(t,e,n){return e.clone().sub(t).cross(e.clone().sub(n)).length()<=Ej}function q5(t,e){let n=new G(...t.position),i=new G(...t.controlNext.position),r=new G(...e.controlPrevious.position),s=new G(...e.position);return Cj(n,i,s)&&Cj(n,r,s)}function Rwe(t){let e=t.points.map(h=>new G(...h.data.position)),n=[t.points[0]],i=new G(...n[0].data.position);for(let h=0;h<t.points.length-1;h++)Cj(i,e[h],e[h+1])||(n.push(t.points[h]),i=e[h]);n.push(t.points[t.points.length-1]);let r=t.isClosed,s=n.length-(r?0:1),o=n.length,a=[];for(let h=0;h<o;h++){let u=n[h].data,d=new G(...u.position),f=new G(...u.controlPrevious.position),p=new G(...u.controlNext.position),m={position:d,baseRoundness:u.roundness,controlPrevious:f,controlNext:p};if(u.roundness===0||!t.isClosed&&(h===0||h===o-1)){a[h]={...m,removedLength:0};continue}let g=r&&h==0?o-1:h-1,v=r&&h==o-1?0:h+1,y=n[g].data,x=n[v].data,b=new G(...y.position),S=new G(...x.position),A=b.clone().sub(d).normalize(),E=S.clone().sub(d).normalize();Object.assign(m,{prevDir:A,nextDir:E});let M=q5(y,u),C=q5(u,x);if(!M||!C)a[h]={...m,removedLength:0};else{let T=A.clone().add(E).normalize(),D=T.clone().cross(A).length()/A.dot(T);a[h]={...m,tan:D,removedLength:u.roundness/D}}}for(let h=0;h<s;h++){let u=h,d=r&&h===o-1?0:h+1,f=a[u],p=a[d];if(f.removedLength!==0||p.removedLength!==0){let m=f.position.distanceTo(p.position);f.removedLength=Math.min(f.removedLength,m/2),p.removedLength=Math.min(p.removedLength,m/2)}}let l=[];for(let h=0;h<s;h++){let u=h,d=r&&h===o-1?0:h+1,f=a[u],p=a[d],m=null;if(!q5(n[u].data,n[d].data))f.position.distanceTo(p.position)>Ej&&(m=new VD(f.position,f.controlNext,p.controlPrevious,p.position));else{let g=f.position.clone(),v=p.position.clone();(f.removedLength!==0||p.removedLength!==0)&&(f.nextDir&&g.add(f.nextDir.clone().setLength(f.removedLength)),p.prevDir&&v.add(p.prevDir.clone().setLength(p.removedLength))),g.distanceTo(v)>Ej&&(m=new VD(g,g.clone().lerp(v,.3),v.clone().lerp(g,.3),v))}l[2*h+1]=m}for(let h=0;h<o;h++){let u=a[h];if(u.removedLength===0){l[2*h]=null;continue}let d=u.position,f=u.prevDir.clone().multiplyScalar(u.removedLength).add(d),p=u.nextDir.clone().multiplyScalar(u.removedLength).add(d),m=u.tan*u.removedLength,g=u.prevDir.clone().add(u.nextDir).normalize(),v=f.clone().lerp(p,.5),y=f.distanceTo(p)/2,x=g.clone().multiplyScalar(Math.sqrt(Math.pow(m,2)-Math.pow(y,2))).add(v),b=g.clone().multiplyScalar(-m).add(x),S=d.distanceTo(b)/d.distanceTo(v),A=u.prevDir.clone().multiplyScalar(S*d.distanceTo(f)).add(d),E=A.clone().lerp(b,2),M=f.clone().lerp(A,4/3),C=p.clone().lerp(E,4/3);l[2*h]=new VD(f,M,C,p)}let c=new QDt;return l.forEach(h=>{h&&c.add(h)}),c}var ki;(t=>{function e(n){return n&&n.__isEntity}t.is=e})(ki||(ki={}));var Kp=t=>ki.is(t),eOt={type:"completeState",isfromEntity:!0},Iwe=t=>class extends a7(t){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new zae,this._recursiveBBox=new zae,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(e){let n=this.children[e];if(ki.is(n))return n}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let e=this;for(;e.data.type!=="Instance";){let n=e.parent;if(ki.is(n))e=n;else return}return e}forInstancesRec(e){this.instances.forEach(n=>{n.disposed||e(n),n.forInstancesRec(e)})}super_Entity(e,n){typeof e=="string"&&(this.uuid=e),this.identity=e,this.data=n,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(e,n,i=!1){if(!(this.data.states.length===0&&!i)){for(let r of this.data.states)B0.toOps(this.data,r.data).forEach(s=>{let o=QH.replaceProps(s,this.data);this.dataPatched=this.data,this.updateByPatchedOp(o,this.data,n)});if(e!==null){let r=this.data.states.data(e);r&&(this.dataPatched=B0.patch(this.data,r),B0.toOps(this.data,r).forEach(s=>{this.updateByPatchedOp(s,this.dataPatched,n)}))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=e,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(e,n){e.setScalar(0),n.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{Kp(e)&&e.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(e=>{e.resetBBoxNeedsUpdateSelf()})}find(e){let n;return this.traverseEntity(i=>{i.uuid===e&&(n=i)}),n}traverseSortNextHelper(){let e=this.parent;if(e){let n=e.children,i=n.indexOf(this)+1;if(ki.is(n[i]))return n[i];if(ki.is(e))return e.traverseSortNextHelper()}}sortNext(){let e=this.children;return this.children.length>0&&ki.is(this.children[0])?e[0]:this.traverseSortNextHelper()}goUp(e){let n=this;for(;e>0&&n!==null;)n=n.parent,e-=1;return n}hasAnccestorOrSelf(e){return this===e||this.hasAnccestor(e)}hasAnccestor(e){let n=this.parent;for(;n;){if(e===n)return!0;n=n.parent}return!1}countToAccestor(e){let n=0,i=this;for(;i!==e;){if(i===null)return-1;i=i.parent,n+=1}return n}forEachEntity(e){for(let n of this.children)Kp(n)&&e(n)}traverseEntityAncestors(e){this.traverseAncestors(n=>{ki.is(n)&&e(n)})}traverseEntity(e,n=0){if(e(this,n)!==!0)for(let i of this.children)Kp(i)&&i.traverseEntity(e,n+1)}traverseVisibleEntity(e){e(this);for(let n of this.children)Kp(n)&&n.visible&&n.traverseVisibleEntity(e)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}copy(e,n=!0){return super.copy(e,!1),this.raycastLock=e.raycastLock,this.scaleLock=e.scaleLock,this.hiddenMatrix.copy(e.hiddenMatrix),this}hasEntityChild(){return this.children.some(e=>Kp(e))}isAncestorOf(e){if(this.uuid===e)return!1;let n=!1;return this.traverseEntity(i=>{i.uuid===e&&(n=!0)}),n}toObjectTransformState(e=[]){this.updateWorldMatrix(!0,!1);let n={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return ZH(n,e)}updateTransformState(e){let n=!1;return e.position&&(this.position.fromArray(e.position),n=!0),e.rotation&&(this.rotation.fromArray(e.rotation),n=!0),e.scale&&(n=!0,this.scale.fromArray(e.scale)),e.hiddenMatrix!==void 0&&(n=!0,this.hiddenMatrix.fromArray(e.hiddenMatrix??cw.identity)),n&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(i=>{i.invalidateClonerTransform(this)})),e.position&&e.rotation&&e.scale&&e.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),n}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let e of this.children)ki.is(e)&&e.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(e=>{ki.is(e)&&e.disposeRecursively()})}toState(e=[]){let n={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(e)};return ZH(n,e)}updateByOp(e,n,i,r){let s=this.data;this.data=n;let o=e,a=Xp(e.path,["states","*"]);if(a!==null){if(e.type===0){let[l]=a;if((this==null?void 0:this.stateSelection)===l){let c={...e.props};if(Object.values(e.props).some(h=>h===void 0)){let h=this.data;if(h!==void 0){let u=Kh.zoom(h,e.path.slice(2));if(u)for(let d in e.props)e.props[d]===void 0&&d in u&&(c[d]=u[d])}}o={...e,props:c,path:e.path.slice(2)}}}}else if(e.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(e.props.name!==void 0&&l.name){let{name:h,...u}=l;l=u}if(e.props.material!==void 0&&"material"in l){let{material:h,...u}=l;l=u}let c=Kh.removeOverridden(e.path,e.props,l);o={...e,props:c}}}if(this.updateByPatchedOpBase(o,B0.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i),Xp(e.path,["overrides"])){let l=[],c=[...e.path];for(l.push(c[1]),c.splice(0,2);c.length>0&&c[0]==="descendants";)l.push(c[1]),c.splice(0,2);if(l[l.length-1]===void 0){if(e.type===0)for(let h of Object.keys(e.props)){l[l.length-1]=h;let u=i.scene.findInstance([this.uuid,...l]);u&&(u.overrideData=e.props[h],u.updateState(nv.apply(u.component.data,u.overrideData),i))}}else{let h=i.scene.findInstance([this.uuid,...l]);if(h){let u=Kh.zoom(h.component.data,c);if(e={...e,path:c},e.type===0){let d=e.props;if(u)for(let[f,p]of Object.entries(e.props))p===void 0&&(d===e.props&&(d={...e.props}),d[f]=u[f]);e={...e,props:d}}h.overrideData=ZL.resolve(n.overrides,l),h.updateByOp(e,ul.applySimple(h.data,e),i,!1)}}}else if(this.instances.length>0){let l;if(e.path.length===0&&e.type===0){let c;for(let h of hw.rootOverrideProps)h in e.props&&(c===void 0&&(c={}),c[h]=e.props[h]);c&&(l={...e,props:c})}else for(let c of hw.rootOverrideProps)if(Xp(e.path,[c])){l=e;break}l!==void 0&&this.instances.forEach(c=>{if(c.isInstanceRoot){let h=nv.filterOp(c.overrideData,l);h&&c.updateByOp(h,ul.applySimple(c.data,h),i,!0)}}),this.instances.forEach(c=>{if(!c.isInstanceRoot){let h=nv.filterOp(c.overrideData,e);if(h){let u;s===c.data&&e===h?u=n:u=ul.applySimple(c.data,h),c.updateByOp(h,u,i,!0)}}})}}updateByPatchedOpBase(e,n,i){if(this.dataPatched=n,e.path.length===0&&e.type===0)e.props.type!==void 0&&!Ov.is(e.props.type)&&mm.changeEntityProptotype(this,n,i);else if(e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&"type"in e.props){mm.changeEntityProptotype(this,n,i);for(let r of this.children)ki.is(r)&&r.updateVisible()}this.updateByPatchedOp(e,n,i)}updateByPatchedOp(e,n,i){if(e.path.length===0&&e.type===0&&this.updateState(e.props,i),Xp(e.path,["pathSnapping"])!==null&&this.updatePathSnapping(n.pathSnapping),Xp(e.path,["cloner"])!==null){let r=ul.drop(e,1);r.path.length===0&&r.type===0&&r.props.disabled===!0?this.setFromClonerState(null,i):this.cloner?this.cloner.updateState(n.cloner,i.scene):(this.setFromClonerState(n.cloner,i),this.expandCloner(i.scene)),this.updateVisible()}}updatePathSnapping(e){this._updatedPathSnapping=e,this._needApplyPathSnapping=!0}applyPathSnapping(e){var p,m,g,v,y;let n=((p=this._updatedPathSnapping)==null?void 0:p.pathId)??this.dataPatched.pathSnapping.pathId,i=((m=this._updatedPathSnapping)==null?void 0:m.slide)??this.dataPatched.pathSnapping.slide,r=((g=this._updatedPathSnapping)==null?void 0:g.offset)??this.dataPatched.pathSnapping.offset,s=((v=this._updatedPathSnapping)==null?void 0:v.orientation)??this.dataPatched.pathSnapping.orientation;if(n===null)return;let o=e.find(n);if(!o||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let a=o.data,l=Rwe(a.geometry.path),c=(i+r)%1,h=l.getPointAt(c),u=this.parent?(y=this.parent)==null?void 0:y.matrixWorld:new dt;o.updateMatrixWorld();let d=new dt().multiplyMatrices(u.clone().invert(),o.matrixWorld);h.applyMatrix4(d);let f={position:h.toArray(),rotation:a.rotation};if(s==="tangential"){let x=new dt().extractRotation(o.matrixWorld),b=l.getTangentAt(c).applyMatrix4(x).add(h),S=new dt().lookAt(h,b,new G(0,1,0)),A=new Mo().setFromRotationMatrix(S);f={...f,rotation:[A.x,A.y,A.z]}}this.updateTransformState(f),this.traverseEntity(x=>{x._cameraType&&x.dispatchEvent(eOt)})}updateVisible(){var e;this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((e=this.dataPatched.cloner)==null?void 0:e.hideBase)!==!0)}updateState_Entity(e,n){e.name!==void 0&&(this.name=e.name),e.raycastLock!==void 0&&(this.raycastLock=e.raycastLock),e.visible!==void 0&&(this.updateVisible(),this.resetBBoxNeedsUpdate()),"cloner"in e&&e.cloner!==void 0&&(this.setFromClonerState(e.cloner,n),this.updateVisible()),this.updateTransformState(e)}get attachedSurfaceCloners(){return this.children.filter(e=>e instanceof mm.Cloner&&e.parameters.type==="toObject")}setFromClonerState(e,n){this.disposed||(e===null||e.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new mm.Cloner(this,e),n.scene.addPendingExpandCloner(this)):this.cloner.updateState(e,n.scene))}expandCloner(e){!this.disposed&&this.cloner&&this.cloner.expandClones(e)}invalidateClonerTransform(e){this.cloner&&this.cloner.invalidateTransform(e)}},tOt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},t.parameters),i=n.width/2,r=n.radiusTop??i,s=n.radiusBottom??i;return r===s?(r=i,s=i):r>s?(r=i,s=s*i/r):(r=r*i/s,s=i),{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),radiusTop:r,radiusBottom:s})}}static build(t){let{width:e,depth:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,radiusTop:c,radiusBottom:h,cornerRadius:u,cornerSegments:d,hollow:f}=t.parameters,p;return u||f?p=new Bwe(c,h,i,r,s,o,a,l*Math.PI/180,u,u,d,f):p=new E$(c,h,i,r,s,o,a,l*Math.PI/180),p.scale(1,1,n/e),Object.assign(p,{userData:{...t,type:"CylinderGeometry"}})}};function Tp(t,e,n){n.x=t.x*e.x,n.y=t.y,n.z=t.x*e.y}function Uae(t){return new Ae(t.y,-t.x)}var Bwe=class extends Qt{constructor(t,e,n,i,r,s,o,a,l,c,h,u,d=!1){super(),this.type="RoundedCylinderBufferGeometry",t=t!==void 0?t:1,e=e!==void 0?e:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,s=s!==void 0?s:!1,o=o!==void 0?o:0,a=a!==void 0?a:Math.PI*2,s&&(l=0,c=0);let f=[],p=[],m=[],g=[],v=0,y=n/2,x=new G,b=new G;d&&t==0&&(t=l),d&&e==0&&(e=c);let S=new Ae(t,y),A=new Ae(e,-y),E=null,M=null,C=null,T=null,D=S.clone().sub(A),L=0,I=0,R=0;u>0&&(L=Math.min(t,e)*(1-u),I=t-L,R=e-L);let H=S.clone();H.x-=L;let Z=Math.PI-D.angle(),ee=D.angle(),F=Math.tan(ee/2),V=Math.tan(Z/2),U=F+V,j=u?U:V,z=u?U:F;if(l=Math.min(l,(t-I)/j,D.length()/U),c=Math.min(c,(e-R)/z,D.length()/U),l>0){let re=l/F;E=S.clone().sub(new Ae(re,l)),u&&(C=E.clone(),C.x-=L-U*l),S.sub(D.clone().setLength(re))}if(c>0){let re=c/V;M=A.clone().sub(new Ae(re,-c)),A.add(D.clone().setLength(re)),u&&(T=M.clone(),T.x-=L-U*c,H.sub(D.clone().setLength(re)))}D=S.clone().sub(A);let Y=D.length()<.5,J=[];for(let re=0;re<=i;re++){let se=[],ce=re/i,ge=ce*a+o,oe=new Ae(Math.sin(ge),Math.cos(ge));T&&M?(K(se,ce,oe,Z,c,T,-1,!0),K(se,ce,oe,ee,c,M,-1,!1)):M?(X(se,oe,M.x,0,-1),K(se,ce,oe,ee,c,M,-1,!1)):s||X(se,oe,e,R,-1);let ae=Uae(D).normalize();if(Tp(ae,oe,x),!Y)for(let ye=0;ye<=r;ye++){let we=ye/r,Se=D.clone().multiplyScalar(we).add(A);Tp(Se,oe,b),p.push(b.x,b.y,b.z),m.push(x.x,x.y,x.z),g.push(ce,.5+b.y/n),se.push(v++)}if(C&&E?(K(se,ce,oe,Z,l,E,1,!1),K(se,ce,oe,ee,l,C,1,!0)):E?(K(se,ce,oe,Z,l,E,1,!1),X(se,oe,E.x,0,1)):s||X(se,oe,t,I,1),u&&!Y){let ye=Uae(D).multiplyScalar(-1).normalize();Tp(ye,oe,x);for(let we=0;we<=r;we++){let Se=we/r,Pe=D.clone().multiplyScalar(-Se).add(H);Tp(Pe,oe,b),p.push(b.x,b.y,b.z),m.push(x.x,x.y,x.z),g.push(ce,.5+b.y/n),se.push(v++)}}u&&!s&&se.push(se[0]),J.push(se)}for(let re=0;re<J.length-1;re++)for(let se=0;se<J[0].length-1;se++){if(s&&u&&se==r)continue;let ce=J[re][se],ge=J[re+1][se],oe=J[re+1][se+1],ae=J[re][se+1],ye=p[oe*3+0],we=p[oe*3+2];f.push(ce,ge,ae),(ye!=0||we!=0)&&f.push(ge,oe,ae)}a<Math.PI*2&&(te(-1,J[0],o),te(1,J[J.length-1],o+a)),this.setIndex(f),this.setAttribute("position",new At(p,3)),this.setAttribute("normal",new At(m,3)),this.setAttribute("uv",new At(g,2));function K(re,se,ce,ge,oe,ae,ye,we){for(let Se=0;Se<h+1;Se++){let Pe=Se/h,Te=ye<0?Pe:1-Pe;we&&(Te-=1),Te*=ge;let Ie=new Ae(Math.sin(Te),Math.cos(Te)*ye),xe=Ie.clone().multiplyScalar(oe).add(ae);Tp(xe,ce,b),p.push(b.x,b.y,b.z),Tp(Ie,ce,x),m.push(x.x,x.y,x.z),g.push(se,.5+b.y/n),re.push(v++)}}function X(re,se,ce,ge,oe){let ae=new G,ye=new Ae,we=[ce,ge];oe<0&&we.reverse();for(let Se of we)ye.set(Se,y*oe),Tp(ye,se,ae),p.push(ae.x,ae.y,ae.z),m.push(0,oe,0),g.push(.5,.5),re.push(v++)}function te(re,se,ce){let ge=new Ae(Math.sin(ce),Math.cos(ce)),oe=new Ae(-Math.cos(ce),Math.sin(ce)),ae=new G,ye=re<0?(Pe,Te,Ie)=>f.push(Pe,Te,Ie):(Pe,Te,Ie)=>f.push(Pe,Ie,Te),we=new Ae((t+e+I+R)/4,0);Tp(we,ge,ae),p.push(ae.x,ae.y,ae.z),m.push(oe.x,0,oe.y),g.push(.5,.5);let Se=v++;for(let Pe of se){let Te=p.slice(Pe*3,Pe*3+3);p.push(...Te),m.push(oe.x,0,oe.y);let Ie=g.slice(Pe*2,Pe*2+2);g.push(...Ie),v++}for(let Pe=Se+1;Pe<v-1;Pe++)ye(Se,Pe,Pe+1);ye(Se,v-1,Se+1)}}},nOt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,depth:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,cornerRadiusTop:c,cornerRadiusBottom:h,cornerSegments:u}=t.parameters,d;return c>0||h>0||l<360?d=new Bwe(0,e/2,i,r,s,o,a,l*Math.PI/180,c,h,u,0,!0):d=new Qxe(e/2,i,r,s,o),d.scale(1,1,n/e),Object.assign(d,{userData:{...t,type:"ConeGeometry"}})}},iOt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o,cornerRadius:a,cornerSegments:l}=t.parameters,c;return a==0?c=new rd(e,n,i,r,s,o):c=new rOt(e,n,i,r,s,o,a,l),Object.assign(c,{userData:{...t,type:"CubeGeometry"}})}},X5=Math.PI/2,rOt=class extends Qt{constructor(t=1,e=1,n=1,i=1,r=1,s=1,o=0,a=4){super(),this.type="BoxGeometry";let l=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s),a=Math.floor(a),o=Math.min(o,t/2,e/2,n/2);let c=[],h=[],u=[],d=[],f=0,p=0;m("z","y","x",-1,-1,n,e,t,s,r,0),m("z","y","x",1,-1,n,e,-t,s,r,1),m("x","z","y",1,1,t,n,e,i,s,2),m("x","z","y",1,-1,t,n,-e,i,s,3),m("x","y","z",1,-1,t,e,n,i,r,4),m("x","y","z",-1,-1,t,e,-n,i,r,5),o>0&&(g("z","y","x",-1,-1,1,n,e,t,s,0),g("z","y","x",1,-1,-1,n,e,t,s,1),g("z","y","x",-1,1,-1,n,e,t,s,1),g("z","y","x",1,1,1,n,e,t,s,0),g("x","y","z",-1,-1,-1,t,e,n,i,0),g("x","y","z",1,-1,1,t,e,n,i,1),g("x","y","z",-1,1,1,t,e,n,i,0),g("x","y","z",1,1,-1,t,e,n,i,1),g("y","x","z",-1,-1,1,e,t,n,r,0),g("y","x","z",1,-1,-1,e,t,n,r,1),g("y","x","z",1,1,1,e,t,n,r,1),g("y","x","z",-1,1,-1,e,t,n,r,0),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(c),this.setAttribute("position",new At(h,3)),this.setAttribute("normal",new At(u,3)),this.setAttribute("uv",new At(d,2));function m(y,x,b,S,A,E,M,C,T,D,L){let I=(E-2*o)/T,R=(M-2*o)/D,H=E/2-o,Z=M/2-o,ee=C/2,F=T+1,V=D+1,U=0,j=0,z=new G;for(let Y=0;Y<V;Y++){let J=Y*R-Z;for(let K=0;K<F;K++){let X=K*I-H;z[y]=X*S,z[x]=J*A,z[b]=ee,h.push(z.x,z.y,z.z),z[y]=0,z[x]=0,z[b]=C>0?1:-1,u.push(z.x,z.y,z.z),d.push(K/T),d.push(1-Y/D),U+=1}}for(let Y=0;Y<D;Y++)for(let J=0;J<T;J++){let K=f+J+F*Y,X=f+J+F*(Y+1),te=f+(J+1)+F*(Y+1),re=f+(J+1)+F*Y;c.push(K,X,re),c.push(X,te,re),j+=6}l.addGroup(p,j,L),p+=j,f+=U}function g(y,x,b,S,A,E,M,C,T,D,L){let I=(M-2*o)/D,R=M/2-o,H=C/2-o,Z=T/2,ee=D+1,F=0,V=0,U=new G,j=new G;for(let z=0;z<a+1;z++){let Y=z/a*X5,J=Math.sin(Y)*o,K=(1-Math.cos(Y))*o,X=Math.sin(Y),te=Math.cos(Y);U[x]=(H+J)*A,U[b]=(Z-K)*E,j[y]=0,j[x]=X*Math.sign(U[x]),j[b]=te*Math.sign(U[b]);for(let re=0;re<ee;re++){let se=re*I-R;U[y]=se*S,h.push(U.x,U.y,U.z),u.push(j.x,j.y,j.z),d.push(re/D),d.push(0),F+=1}}for(let z=0;z<a;z++)for(let Y=0;Y<D;Y++){let J=f+Y+ee*z,K=f+Y+ee*(z+1),X=f+(Y+1)+ee*(z+1),te=f+(Y+1)+ee*z;c.push(J,K,te),c.push(K,X,te),V+=6}l.addGroup(p,V,L),p+=V,f+=F}function v(y,x,b){let S=new G,A=new G(t/2,e/2,n/2);A.subScalar(o);let E=[],M=y*x*b>0?(T,D,L)=>c.push(T,D,L):(T,D,L)=>c.push(T,L,D);for(let T=0;T<=a;T++){let D=[],L=X5*(1-T/a),I=Math.cos(L),R=Math.sin(L),H=0;for(let Z=0;Z<=T;Z++){let ee=Math.cos(H),F=Math.sin(H);S.x=I*ee,S.y=R,S.z=I*F;let V=A.clone().addScaledVector(S,o);h.push(y*V.x,x*V.y,b*V.z),u.push(y*S.x,x*S.y,b*S.z),d.push(0,0),D.push(f++),H+=X5/T}E.push(D)}let C=E.length-1;for(let T=0;T<C;T++){let D=E[T],L=E[T+1],I=D.length-1;M(D[0],L[1],L[0]);for(let R=1;R<=I;R++)M(D[R-1],D[R],L[R]),M(D[R],L[R+1],L[R])}}}},l7=class extends Qt{constructor(t=[],e=[],n="",i=1,r=.2,s=4){super(),this.type="PolyhedronGeometryRound";let o=[],a=[],l=[];c(),h(),this.setAttribute("position",new At(o,3)),this.setAttribute("normal",new At(l,3)),this.setAttribute("uv",new At(a,2));return;function c(){var ee;r=Math.min(1-1e-5,r),r==0&&(s=0);let u={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[n],d=new G,f=d.clone(),p=new ga,m=r*i,g=i-m,v=s+1,y=new G,x=(F,V)=>y.subVectors(F,V).normalize(),b=(F,V)=>Array(F).fill(void 0).map(V),S=b(t.length/3,(F,V)=>new G().fromArray(t,V*3).setLength(i)),A=[],E=1e6;for(let F=0;F<S.length;F++){let V=S[F],U=[],j,z,Y,J=1e10,K=-1;for(;(K=e.indexOf(F,K+1))!=-1;){let se=K-K%3;j=e[se+(K+1)%3],z=e[se+(K+2)%3],Y=V.distanceToSquared(S[j]),J=Math.min(J,Y),U.push([j,z,Y])}J+=1e-6;let X=[],te=0,re=U.length;for(let se=0;se<re;se++){[j,z,Y]=U[te];let ce=((ee=A[j])==null?void 0:ee.includes(F))==!0;Y<=J&&X.push(j+ +ce*E),te=U.findIndex(ge=>ge[0]==z)}A.push(X)}let M=[];{let F=0,V=0,U,j,z=u==3;for(let Y=0;Y<=s;Y++){U=Y*(Y+1)/2,j=(Y+1)*(Y+2)/2;for(let J=0;J<s-Y;J++)[F,V]=[U+J+Y+2,j+J+Y+3],M.push(U,j,...z?[V,U]:[F,j],V,F),[U,j]=[F,V];M.push(U,j,U+s+2)}}let C=d.clone(),T=d.clone(),D=d.clone(),L=d.clone(),I=d.clone(),R=[],H=b(S.length,()=>b(u,()=>d.clone()));for(let F=0;F<S.length;F++){d.copy(S[F]).normalize(),C.copy(d).multiplyScalar(g);let V=A[F];for(let X=0;X<V.length;X++){let te=V[X],re=V[(X+1)%u];p.setFromPointsAndIndices(S,F,te%E,re%E),p.b.sub(p.a).setLength(1e10).add(p.a),p.c.sub(p.a).setLength(1e10).add(p.a),p.closestPointToPoint(C,H[F][X])}let U=[],j=[],z=[],Y=new G;s==0&&[...H[F]].reduce((X,te)=>X.add(te),Y).multiplyScalar(1/u);for(let X=0;X<u;X++){let te=[],re=(X-1+u)%u,se=H[F][re],ce=H[F][X];d.copy(se).sub(C),f.copy(ce).sub(C);let ge=C.angleTo(d),oe=d.angleTo(f),ae=Math.cos(ge)*m;s==0?T.copy(Y):T.copy(C).setLength(g+ae),j.push(ae);let ye=[T,se,ce];for(let we=0;we<2;we++){let Se=ye[we],Pe=ye[we+1];L.subVectors(Se,C),I.subVectors(Pe,C),D.crossVectors(L,I).normalize();for(let Te=0;Te<v;Te++){let Ie=[ge,oe][we]*Te/v;d.copy(L).applyAxisAngle(D,Ie).add(C),U.push(d.clone()),we&&(x(d,C),te.push([Te==0?Se:d.clone(),y.clone()]))}we&&(x(Pe,C),te.push([Pe,y.clone()]))}z.push(te)}R.push(z);let J=2*v,K=2;for(let X=0;X<u;X++){let te=J*X,re=J*((X+1)%u),se=[U[te]];for(let ge=1;ge<v;ge++){L=U[te+ge],I=U[re+ge],se.push(L);for(let oe=1,ae=ge-K+1;oe<=ae;oe++)d.lerpVectors(L,I,oe/(ae+1)),d.sub(C).setLength(j[X]).add(C),se.push(d.clone());se.push(I)}for(let ge=0;ge<v;ge++)se.push(U[ge+v+te]);se.push(U[re+v]);let ce=M.map(ge=>se[ge]);o.push(...ce.map(ge=>[ge.x,ge.y,ge.z]).flat()),l.push(...ce.map(ge=>(x(ge,C),[y.x,y.y,y.z])).flat())}}let Z=[];for(let F=0;F<A.length;F++)for(let V=0;V<u;V++){let U=A[F][V];if(U<E){let j=A[U].findIndex(J=>J%E==F),z=R[F][V],Y=R[U][j];for(let J=0;J<v;J++){let K=z[J],X=Y[v-J],te=z[J+1],re=Y[v-(J+1)];[K,X,te,te,X,re].forEach(se=>{o.push(se[0].x,se[0].y,se[0].z),l.push(se[1].x,se[1].y,se[1].z)})}Z.push(z[0][0],Y[v][0],z[v][0],Y[0][0])}}for(;Z.length;){let F,V,U,j;[F,V]=Z.splice(0,2);let z=[F];for(;F!=V;)z.push(V),U=Z.indexOf(V),j=U%2,V=Z.splice(U-j,2)[1-j];y.subVectors(z[0],z[1]).cross(d.subVectors(z[0],z[2])).normalize();let Y=y.dot(z[0])<0;Y&&y.negate();for(let J=1;J<=z.length-2;J++)[z[J+ +Y],z[J+1-+Y],z[0]].forEach(K=>{o.push(K.x,K.y,K.z),l.push(y.x,y.y,y.z)})}}function h(){let u=new G;for(let A=0;A<o.length;A+=3){u.x=o[A+0],u.y=o[A+1],u.z=o[A+2];let E=b(u)/2/Math.PI+.5,M=S(u)/Math.PI+.5;a.push(E,1-M)}let d=new G,f=new G,p=new G,m=new G,g=new Ae,v=new Ae,y=new Ae,x=(A,E,M,C)=>{C<0&&A.x===1&&(a[E]=A.x-1),M.x===0&&M.z===0&&(a[E]=C/2/Math.PI+.5)};for(let A=0,E=0;A<o.length;A+=9,E+=6){d.set(o[A+0],o[A+1],o[A+2]),f.set(o[A+3],o[A+4],o[A+5]),p.set(o[A+6],o[A+7],o[A+8]),g.set(a[E+0],a[E+1]),v.set(a[E+2],a[E+3]),y.set(a[E+4],a[E+5]),m.copy(d).add(f).add(p).divideScalar(3);let M=b(m);x(g,E+0,d,M),x(v,E+2,f,M),x(y,E+4,p,M)}for(let A=0;A<a.length;A+=6){let E=a[A+0],M=a[A+2],C=a[A+4],T=Math.max(E,M,C),D=Math.min(E,M,C);T>.9&&D<.1&&(E<.2&&(a[A+0]+=1),M<.2&&(a[A+2]+=1),C<.2&&(a[A+4]+=1))}function b(A){return Math.atan2(A.z,-A.x)}function S(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}}static fromJSON(t){return new l7(t.vertices,t.indices,t.radius,t.corner,t.cornerSides)}},sOt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,detail:0,corner:0,cornerSides:4},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,detail:r,corner:s,cornerSides:o}=t.parameters,a=r===0&&s!==0?new kwe(e*.5,s,o):new ebe(e*.5,r);return a.scale(1,n/e,i/e),Object.assign(a,{userData:{...t,type:"DodecahedronGeometry"}})}},kwe=class extends l7{constructor(t=1,e=.2,n=4){let i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a="DodecahedronGeometry";super(s,o,a,t,e,n),this.type=a}static fromJSON(t){return new kwe(t.radius,t.corner,t.cornerSides)}},$S=1e-12,c7=class{constructor(t){this.position=new Ae,this.startPosition=new Ae,this.uuid=Ln.generateUUID(),this.position=t.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(t){this.position.copy(this.startPosition).add(t)}copy(t){return this.position.copy(t.position),this.startPosition.copy(t.startPosition),this}clone(){return new c7(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},Tj=class extends c7{constructor(t){super(t.position),this.parent=t}copy(t){return super.copy(t),this}clone(){return new Tj(this.parent).copy(this)}},mb=class extends c7{constructor(t,e){super(e),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=t,this.controls.push(new Tj(this),new Tj(this))}static create(t,e){let n=new mb(t,new Ae(...e.position));return n.controls[0].position.set(...e.controlPrevious.position),n.controls[1].position.set(...e.controlNext.position),n.roundness=e.roundness,n.areControlsDirectionsMirrored=e.areControlsDirectionsMirrored,n}getOppositeControl(t){let e=this.controls.indexOf(t);return e===0?this.controls[1]:e===1?this.controls[0]:null}applyOffsetToControls(t,e=1){for(let n=0,i=this.controls.length;n<i;n++){let r=this.controls[n];this.position.distanceTo(r.position)<=e?r.position.copy(this.position):r.applyOffset(t)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(t){return super.copy(t),this.controls[0].copy(t.controls[0]),this.controls[1].copy(t.controls[1]),this.roundness=t.roundness,this.uuid=t.uuid,this}clone(){return new mb(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var n,i;let t=(n=this.curveBefore)==null?void 0:n.getTangentAt(1),e=(i=this.curveAfter)==null?void 0:i.getTangentAt(0);return[t,e]}computeNormals(t=new Ae,e=new Ae){let[n,i]=this.computeTangents();return n&&i&&(Gae(n,t),Gae(i,e)),[t,e]}computeTangent(t=new Ae){let[e,n]=this.computeTangents();return e&&n&&t.copy(e).add(n).normalize(),t}computeNormal(t=new Ae){let[e,n]=this.computeNormals();return t.copy(e).add(n).normalize(),t}};function Gae(t,e=new Ae){let n=t.length();return e.set(-t.y/n,t.x/n)}var u7=t=>t,r_=new Ae,NB=new Ae,oOt=new Ae,aOt=new Ae,lOt=new Ae,cOt=new Ae,Fwe=new G,Nwe=new G;function uOt(t){let e=new Ae;e.addVectors(t.v0,r_.subVectors(t.v1,t.v0).multiplyScalar(2/3));let n=new Ae;return n.addVectors(t.v2,NB.subVectors(t.v1,t.v2).multiplyScalar(2/3)),new xu(t.v0,e,n,t.v2)}function PA(t,e,n=Number.EPSILON){return Math.abs(t-e)<n}function hOt(t,e,n=Number.EPSILON){return t.distanceTo(e)<n}function dOt(t,e,n=Number.EPSILON){return t.distanceTo(e)<n}function zwe(t,e,n){let i=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),r=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),s=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));return Math.acos((r*r+i*i-s*s)/(2*r*i))}function fOt(t,e,n){return jae(t,e)&&jae(e,n)&&Pj(t.position,e.position,n.position)}function Pj(t,e,n){return r_.copy(e).sub(t).cross(NB.copy(n).sub(t))===0}function pOt(t,e,n,i,r){let s=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=(t.y+e.y)/2,a=(t.x+e.x)/2,l=Math.sqrt(Math.pow(n,2)-Math.pow(s/2,2))*(t.y-e.y)/s,c=Math.sqrt(Math.pow(n,2)-Math.pow(s/2,2))*(e.x-t.x)/s;return i.set(a+l,o+c),r.set(a-l,o-c),[i,r]}function mOt(t,e,n){let i=t.distanceTo(n),r=e.distanceTo(n);return i<r?e:t}function gOt(t,e,n,i,r,s){let o=e.x-t.x,a=e.y-t.y,l=n.x-t.x,c=n.y-t.y,h=Math.sqrt((o+l)*(o+l)+(a+c)*(a+c)),u;return zwe(e,t,n)>Math.PI&&(h*=-1),PA(c,a)?u=(a+c)*(i/h-.5)*8/3/(o-l):u=(o+l)*(i/h-.5)*8/3/(c-a),r.set(e.x-u*a,e.y+u*o),s.set(n.x+u*c,n.y-u*l),[r,s]}function Hae(t,e){return t.position.equals(t.controls[1].position)&&e.position.equals(e.controls[0].position)}function jae(t,e){return Pj(t.position,t.controls[1].position,e.position)&&Pj(t.position,e.controls[0].position,e.position)}function vOt(t,e,n,i,r=.5){let s=r_.subVectors(e,t).multiplyScalar(r).add(t),o=NB.subVectors(n,e).multiplyScalar(r).add(e),a=oOt.subVectors(i,n).multiplyScalar(r).add(n),l=s,c=aOt.subVectors(o,s).multiplyScalar(r).add(s),h=lOt.subVectors(a,o).multiplyScalar(r).add(o),u=a,d=cOt.subVectors(h,c).multiplyScalar(r).add(c);return[t.x,t.y,l.x,l.y,c.x,c.y,d.x,d.y,h.x,h.y,u.x,u.y,i.x,i.y]}function yOt(t,e,n=12,i=!0){let r=Nwe.set(0,0,0),s,o=0;for(let a=0;a<e.length;a++){let l=u7(e[a]),c=r_,h=rv(l,n);for(let u=0;u<=h;u++)if(l instanceof xu||l instanceof Xm||l instanceof Ru){if(l.getPoint(u/h,c),r.set(c.x,c.y,0),s!==void 0&&dOt(s,r))continue;s===void 0&&(s=Fwe),s.copy(r),t.setXYZ(o,r.x,r.y,r.z),o++}}return i&&o>1&&!(t.getX(o-1)===t.getX(0)&&t.getY(o-1)===t.getY(0)&&t.getZ(o-1)===t.getZ(0))&&(t.setXYZ(o,t.getX(0),t.getY(0),t.getZ(0)),o++),t}function xOt(t,e,n,i=12,r=!0){let s=Nwe.set(0,0,0),o=0,a=[];for(let l=0;l<e.length;l++){if(n[l]===!1)continue;let c,h=u7(e[l]),u=r_,d=rv(h,i);a.push(d);for(let f=0;f<=d;f++)if(h instanceof xu||h instanceof Xm||h instanceof Ru){if(h.getPoint(f/d,u),s.set(u.x,u.y,0),c==null?void 0:c.equals(s))continue;c===void 0?c=Fwe:(t.setXYZ(o,c.x,c.y,c.z),o++,t.setXYZ(o,s.x,s.y,s.z),o++),c.copy(s)}}return r&&o>1&&!(t.getX(o-1)===t.getX(0)&&t.getY(o-1)===t.getY(0)&&t.getZ(o-1)===t.getZ(0))&&(t.setXYZ(o,t.getX(0),t.getY(0),t.getZ(0)),o++),a}function Vae(t,e=12,n=!1){let i=[];for(let r=0,s=t.length;r<s;r++){let o=t[r],a=0;if(n&&o.roundedCurveCorner!==void 0){let l=rv(o.roundedCurveCorner,e)*.5;r>0&&(i[r-1]+=l),a+=l}o.curveAfter!==void 0&&(a+=rv(o.curveAfter,e)),i.push(a)}return t.length>0&&n&&t[0].roundedCurveCorner!==void 0&&(i[t.length-1]+=rv(t[0].roundedCurveCorner,e)*.5),i}function rv(t,e=12){return t&&t instanceof SB?e*2:t&&(t instanceof Ru||t instanceof Kxe)?1:t&&t instanceof M$?e*t.points.length:e}function bOt(t,e,n=12,i=!0){let r,s=0;for(let o=0;o<e.length;o++){let a=u7(e[o]),l=rv(a,n),c=r_;for(let h=0;h<=l;h++)if(a instanceof xu||a instanceof Xm||a instanceof Ru){if(a.getPoint(h/l,c),r!==void 0&&hOt(r,c,$S))continue;r===void 0&&(r=NB),r.copy(c),t.push(c.x,c.y),s++}}return PA(t[0],t[t.length-2],$S)&&PA(t[1],t[t.length-1],$S)&&(t.pop(),t.pop()),i&&s>1&&!(PA(t[s-1],t[1],$S)&&PA(t[s-2],t[0],$S))&&(t.push(t[0],t[1]),s++),t}var Y5=new Ae,wOt=new Ae,_Ot=new Ae,SOt=new Ae,AOt=new Ae,MOt=new Ae,Dr=class extends LL{constructor(t=100,e=100){super(),this.points=[],this.shapeHoles=[],this.plane=new gc(new G(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=Ln.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=t,this._height=e}static createFromState(t,e,n){let i=new Dr;return i.isClosed=t.isClosed,i.points=t.points.map(r=>mb.create(r.id,r.data)),typeof t.roundness=="number"&&(i.roundness=t.roundness),i.shapeHoles=t.shapeHoles.map(r=>Dr.createFromState(r)),e!==void 0&&n!==void 0&&i.applySize(e,n),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(t){if(this._roundness!==t){this._roundness=t;for(let e=0,n=this.points.length;e<n;e++)this.points[e].roundness=t;this.needsUpdate=!0}}getPointsIndexesByIds(t){return t.map(e=>this.getPointIndexById(e)).filter(e=>e>=0)}getPointIndexById(t){let e=this.points.length,n=this.points.findIndex(i=>i.uuid===t);if(n<0){let i=e;for(let r=0,s=this.shapeHoles.length;r<s;r++){let o=this.shapeHoles[r],a=o.points.length,l=o.getPointIndexById(t);if(l<0)i+=a;else return l+i}}return n}getLineIndexById(t){return this.getPointIndexById(t)}getBezierPoint(t){if(t<=this.points.length-1)return this.points[t];if(this.shapeHoles.length>0){let e=this.points.length;for(let n=0,i=this.shapeHoles.length;n<i;n++){let r=this.shapeHoles[n],s=t-e;if(s<=r.points.length-1)return r.points[s];e+=r.points.length}}throw new Error("This shape does not have a point for this index: "+t)}getBezierPointIndex(t){let e=this.points.indexOf(t);if(e>=0)return e;if(e=this.points.length,this.shapeHoles.length>0)for(let n=0,i=this.shapeHoles.length;n<i;n++){let r=this.shapeHoles[n],s=r.points.indexOf(t);if(s>=0)return e+s;e+=r.points.length}return-1}getAllPoints(){let t=[].concat(...this.shapeHoles.map(e=>e.points));return[...this.points,...t]}applySize(t,e){t===0&&(t=.001),e===0&&(e=.001),this._width=t,this._height=e}applyScale(t,e){let n=Y5.set(t,e);for(let i=0,r=this.points.length;i<r;i++){let s=this.points[i];s.position.multiply(n),s.controls[0].position.multiply(n),s.controls[1].position.multiply(n)}for(let i=0,r=this.shapeHoles.length;i<r;i++)this.shapeHoles[i].applyScale(t,e);this._update()}createPoint(t,e=0,n=Ln.generateUUID()){let i;t instanceof Ae?i=t:i=new Ae(t,e);let r=new mb(n,i);return r.roundness=this.roundness,r}addPoint(t){this.points.push(t),this.needsUpdate=!0}addPointAt(t,e){this.points.splice(e,0,t),this.needsUpdate=!0}getPointByUuid(t){for(let e=0,n=this.points.length;e<n;e++){let i=this.points[e];if(i.uuid===t)return i}for(let e=0,n=this.shapeHoles.length;e<n;e++){let i=this.shapeHoles[e].getPointByUuid(t);if(i)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(t){let e=this.points.indexOf(t);e>=0&&this.points.splice(e,1),this.needsUpdate=!0}removePointById(t){let e=this.points.find(n=>n.uuid===t);e&&this.removePoint(e)}update(){for(let t=0,e=this.shapeHoles.length;t<e;t++)this.shapeHoles[t].update();this._update()}extractShapePointsToBuffer(t,e=12,n=!1){this.subdivision=e,this.curveDivisions===void 0&&this.computeCurveDivisions(e);let i=n?this.roundedCurveDivisions:this.curveDivisions;return yOt(t,n?this.roundedCurves:this.curves,e,this.autoClose),i.reduce((r,s)=>r+s,0)+1}computeCurveDivisions(t=12){return this.curveDivisions=Vae(this.points,t,!1),this.roundedCurveDivisions=Vae(this.points,t,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(t,e,n=12){return xOt(t,this.curves,e,n,this.autoClose).reduce((i,r)=>i+r,0)*2}extractShapePointsToFlatArray(t,e=12){return this.subdivision=e,this.curveDivisions===void 0&&this.computeCurveDivisions(e),bOt(t,this.roundedCurves,e,this.autoClose)}getCurveIndexFromVertexId(t,e=!1){let n=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let i=e?this.roundedCurveDivisions:this.curveDivisions,r=0;e&&this.points[0].roundedCurveCorner!==void 0&&(r=rv(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=t-r;s<0&&(s+=i.reduce((o,a)=>o+a,0));for(let o=0,a=i.length;o<a;o++){let l=i[o];if(s<n+l)return[o,(s-n+1)/l];n+=l}return[0,1]}getCurveT(t,e,n){let i=this.points[t],r=this.points[t>=this.points.length-1?0:t+1],s=this.curveDivisions,o=s[t];if(Hae(i,r)){let l=i.position.distanceTo(r.position);return i.position.distanceTo(Y5.set(n.x,n.y))/l}let a=0;for(let l=0;l<t;l++)a+=s[l];return(e-a)/o}dispose(){}_applyCurveForPoint(t,e){Hae(e,t)?this.lineTo(t.position.x,t.position.y):this.bezierCurveTo(e.controls[1].position.x,e.controls[1].position.y,t.controls[0].position.x,t.controls[0].position.y,t.position.x,t.position.y);let n=this.curves[this.curves.length-1];t.curveBefore=n,e.curveAfter=n;let i=n.clone();t.roundedCurveBefore=i,e.roundedCurveAfter=i,t.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let e=0,n=this.points.length;e<n;e++){let i=this.points[e];if(e===0)this.moveTo(i.position.x,i.position.y);else{let r=this.points[e-1];this._applyCurveForPoint(i,r)}}let t=this.getLastPoint();if(t!=null&&t.curveAfter&&(t.curveAfter=void 0),this.isClosed){let e=this.points[0],n=this.points[this.points.length-1];this._applyCurveForPoint(e,n)}if(this.points.length>2){let e=0;for(let n=0,i=this.points.length;n<i;n++){let r=this.points[n],s=this.points[n-1]??this.points[this.points.length-1],o=this.points[n+1]??this.points[0],a=r.roundness,l=s&&o&&fOt(s,r,o);if(!r.controlsMoved()&&a>0&&!l){let c=r.curveBefore,h=r.curveAfter;if(c===void 0||h===void 0)continue;let u=r.roundedCurveBefore,d=r.roundedCurveAfter,f=c.getLength(),p=h.getLength(),m=Math.min(a,f*.499),g=Math.min(a,p*.499),v=Math.min(m,g),y=1-v/f,x=v/p,b=c.getPointAt(y,Y5),S=h.getPointAt(x,wOt);this._subSplitCurve(c,u,y,b,void 0),this._subSplitCurve(h,d,x,void 0,S);let A;if(this.useCubicForRoundedCorners){let E=zwe(b,r.position,S)/2,M=Math.tan(E)*b.distanceTo(r.position),[C,T]=pOt(b,S,M,_Ot,SOt),D=mOt(C,T,r.position),[L,I]=gOt(D,b,S,M,AOt,MOt);A=new xu(b.clone(),L.clone(),I.clone(),S.clone())}else A=new Xm(b.clone(),r.position.clone(),S.clone());r.roundedCurveCorner=A,this.roundedCurves.splice(n+e,0,A),e++}}}}_subSplitCurve(t,e,n,i,r){if(t instanceof Ru)i!==void 0&&e.v2.copy(i),r!==void 0&&e.v1.copy(r);else{let s=t,o=e,a=s.getUtoTmapping(n,0),l=vOt(s.v0,s.v1,s.v2,s.v3,a);return i!==void 0&&(o.v0.set(l[0],l[1]),o.v1.set(l[2],l[3]),o.v2.set(l[4],l[5]),o.v3.set(l[6],l[7])),r!==void 0&&(o.v0.set(l[6],l[7]),o.v1.set(l[8],l[9]),o.v2.set(l[10],l[11]),o.v3.set(l[12],l[13])),o}return e}clone(){let t=new Dr(this._width,this._height);return t.points=this.points.map(e=>e.clone()),t.isClosed=this.isClosed,t.roundness=this.roundness,t.isMesh2D=this.isMesh2D,t.shapeHoles=this.shapeHoles.map(e=>e.clone()),t}toJSON(){return{points:this.points.reduce((t,e)=>t.concat(e.toJSON()),[]),shapeHoles:this.shapeHoles.map(t=>t.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(t){var n;this.points=[],this.pointIDs=0;let e=t.points.length/7;for(let i=0;i<e;i++){let r=i*7,s=t.points[r+0],o=t.points[r+1],a=t.points[r+2],l=t.points[r+3],c=t.points[r+4],h=t.points[r+5],u=t.points[r+6],d=new mb(Ln.generateUUID(),new Ae(s,o));d.controls[0].position.set(a,l),d.controls[1].position.set(c,h),d.roundness=u,this.points.push(d)}return this.shapeHoles=(n=t.shapeHoles)!=null&&n.length?t.shapeHoles.map(i=>{let r=new Dr;return r.fromJSON(i),r}):[],this.isClosed=t.isClosed,this._roundness=t.roundness,this._update(),this}fromShape(t){let e=(i,r)=>{r instanceof xu&&r.v3.equals(i.position)&&i.controls[0].position.copy(r.v2)},n=i=>{let r=[],s,o;for(s=0,o=i.length;s<o;s++)i[s]instanceof Xm&&(i[s]=uOt(i[s]));for(s=0,o=i.length;s<o;s++){let c=i[s],h=s>0?i[s-1]:null,u;c instanceof xu?(u=this.createPoint(c.v0),u.controls[1].position.copy(c.v1)):c instanceof Ru&&(u=this.createPoint(c.v1)),u!==void 0&&(h!==null&&e(u,h),r.push(u))}let a=i[i.length-1],l=!1;return a instanceof xu?a.v3.equals(r[0].position)&&(r[0].controls[0].position.copy(a.v2),l=!0):a instanceof Ru&&a.v2.equals(r[0].position)&&(l=!0),this.isClosed=l,r};return this.points=n(t.curves),t instanceof LL&&(this.shapeHoles=t.holes.map(i=>{let r=new Dr;return r.fromShape(i),r})),this.update(),this}updatePoint(t,e){let n=this.getPointByUuid(t);n&&(e.position!==void 0&&n.position.fromArray(e.position),e.roundness!==void 0&&(n.roundness=e.roundness),e.areControlsDirectionsMirrored!==void 0&&(n.areControlsDirectionsMirrored=e.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(t,e){var i;let n=(i=this.getPointByUuid(t))==null?void 0:i.controls[0];n&&(e.position&&n.position.fromArray(e.position),this.needsUpdate=!0)}updateNextControl(t,e){var i;let n=(i=this.getPointByUuid(t))==null?void 0:i.controls[1];n&&(e.position&&n.position.fromArray(e.position),this.needsUpdate=!0)}},Dj=Math.PI*2;function K5({x:t,y:e},n,i,r,s){return{x:t*n+r,y:e*i+s}}function EOt(t,e){let n=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),i=Math.cos(t),r=Math.sin(t),s=Math.cos(t+e),o=Math.sin(t+e);return[{x:i-r*n,y:r+i*n},{x:s+o*n,y:o-s*n},{x:s,y:o}]}function Wae(t,e,n,i){let r=t*i-e*n<0?-1:1,s=Math.min(1,Math.max(-1,t*n+e*i));return r*Math.acos(s)}function COt(t,e,n,i,r,s,o,a,l,c){let h=Math.pow(r,2),u=Math.pow(s,2),d=Math.pow(o,2),f=Math.pow(a,2),p=h*u-h*f-u*d;p<0&&(p=0),p/=h*f+u*d,p=Math.sqrt(p)*(l===c?-1:1);let m=p*r/s*a,g=p*-s/r*o,v=m+(t+n)/2,y=g+(e+i)/2,x=(o-m)/r,b=(a-g)/s,S=(-o-m)/r,A=(-a-g)/s,E=Wae(1,0,x,b),M=Wae(x,b,S,A);return!c&&M>0&&(M-=Dj),c&&M<0&&(M+=Dj),{centerx:v,centery:y,ang1:E,ang2:M}}function TOt({px:t,py:e,cx:n,cy:i,rx:r,ry:s,largeArcFlag:o,sweepFlag:a}){let l=[];if(r===0||s===0)return[];let c=(t-n)/2,h=(e-i)/2;if(c===0&&h===0)return[];r=Math.abs(r),s=Math.abs(s);let u=Math.pow(c,2)/Math.pow(r,2)+Math.pow(h,2)/Math.pow(s,2);u>1&&(r*=Math.sqrt(u),s*=Math.sqrt(u));let d=COt(t,e,n,i,r,s,c,h,o,a),{ang1:f,ang2:p}=d,{centerx:m,centery:g}=d,v=Math.abs(p)/(Dj/4);Math.abs(1-v)<1e-7&&(v=1);let y=Math.max(Math.ceil(v),1);p/=y;for(let x=0;x<y;x++)l.push(EOt(f,p)),f+=p;return l.map(x=>{let{x:b,y:S}=K5(x[0],r,s,m,g),{x:A,y:E}=K5(x[1],r,s,m,g),{x:M,y:C}=K5(x[2],r,s,m,g);return{x1:b,y1:S,x2:A,y2:E,x:M,y:C}})}var fi;(function(t){t[t.ODD=0]="ODD",t[t.NONZERO=1]="NONZERO",t[t.POSITIVE=2]="POSITIVE",t[t.NEGATIVE=3]="NEGATIVE",t[t.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(fi||(fi={}));var as;(function(t){t[t.POLYGONS=0]="POLYGONS",t[t.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",t[t.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(as||(as={}));function Kt(t,e){if(!t)throw e||"Assertion Failed!"}var jt=function(){function t(){}return t.vertEq=function(e,n){return e.s===n.s&&e.t===n.t},t.vertLeq=function(e,n){return e.s<n.s||e.s===n.s&&e.t<=n.t},t.transLeq=function(e,n){return e.t<n.t||e.t===n.t&&e.s<=n.s},t.edgeGoesLeft=function(e){return t.vertLeq(e.Dst,e.Org)},t.edgeGoesRight=function(e){return t.vertLeq(e.Org,e.Dst)},t.vertL1dist=function(e,n){return Math.abs(e.s-n.s)+Math.abs(e.t-n.t)},t.edgeEval=function(e,n,i){Kt(t.vertLeq(e,n)&&t.vertLeq(n,i));var r=n.s-e.s,s=i.s-n.s;return r+s>0?r<s?n.t-e.t+(e.t-i.t)*(r/(r+s)):n.t-i.t+(i.t-e.t)*(s/(r+s)):0},t.edgeSign=function(e,n,i){Kt(t.vertLeq(e,n)&&t.vertLeq(n,i));var r=n.s-e.s,s=i.s-n.s;return r+s>0?(n.t-i.t)*r+(n.t-e.t)*s:0},t.transEval=function(e,n,i){Kt(t.transLeq(e,n)&&t.transLeq(n,i));var r=n.t-e.t,s=i.t-n.t;return r+s>0?r<s?n.s-e.s+(e.s-i.s)*(r/(r+s)):n.s-i.s+(i.s-e.s)*(s/(r+s)):0},t.transSign=function(e,n,i){Kt(t.transLeq(e,n)&&t.transLeq(n,i));var r=n.t-e.t,s=i.t-n.t;return r+s>0?(n.s-i.s)*r+(n.s-e.s)*s:0},t.vertCCW=function(e,n,i){return e.s*(n.t-i.t)+n.s*(i.t-e.t)+i.s*(e.t-n.t)>=0},t.interpolate=function(e,n,i,r){return e=e<0?0:e,i=i<0?0:i,e<=i?i===0?(n+r)/2:n+(r-n)*(e/(e+i)):r+(n-r)*(i/(e+i))},t.intersect=function(e,n,i,r,s){var o,a,l;t.vertLeq(e,n)||(l=e,e=n,n=l),t.vertLeq(i,r)||(l=i,i=r,r=l),t.vertLeq(e,i)||(l=e,e=i,i=l,l=n,n=r,r=l),t.vertLeq(i,n)?t.vertLeq(n,r)?(o=t.edgeEval(e,i,n),a=t.edgeEval(i,n,r),o+a<0&&(o=-o,a=-a),s.s=t.interpolate(o,i.s,a,n.s)):(o=t.edgeSign(e,i,n),a=-t.edgeSign(e,r,n),o+a<0&&(o=-o,a=-a),s.s=t.interpolate(o,i.s,a,r.s)):s.s=(i.s+n.s)/2,t.transLeq(e,n)||(l=e,e=n,n=l),t.transLeq(i,r)||(l=i,i=r,r=l),t.transLeq(e,i)||(l=e,e=i,i=l,l=n,n=r,r=l),t.transLeq(i,n)?t.transLeq(n,r)?(o=t.transEval(e,i,n),a=t.transEval(i,n,r),o+a<0&&(o=-o,a=-a),s.t=t.interpolate(o,i.t,a,n.t)):(o=t.transSign(e,i,n),a=-t.transSign(e,r,n),o+a<0&&(o=-o,a=-a),s.t=t.interpolate(o,i.t,a,r.t)):s.t=(i.t+n.t)/2},t}(),qS=function(){function t(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return t}(),N3=function(){function t(e){this.side=e,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(t.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(e){this.Sym.Lface=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(e){this.Sym.Org=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(e){this.Sym.Lnext=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(e){this.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(e){this.Lnext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(e){this.Sym.Onext=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(e){this.Sym.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(e){this.Sym.Lnext.Sym=e},enumerable:!0,configurable:!0}),t}(),G1=function(){function t(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return t}(),$ae=function(){function t(){var e=new G1,n=new qS,i=new N3(0),r=new N3(1);e.next=e.prev=e,e.anEdge=null,n.next=n.prev=n,i.next=i,i.Sym=r,r.next=r,r.Sym=i,this.vHead=e,this.fHead=n,this.eHead=i,this.eHeadSym=r}return t.prototype.makeEdge_=function(e){var n=new N3(0),i=new N3(1);e.Sym.side<e.side&&(e=e.Sym);var r=e.Sym.next;return i.next=r,r.Sym.next=n,n.next=e,e.Sym.next=i,n.Sym=i,n.Onext=n,n.Lnext=i,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,i.Sym=n,i.Onext=i,i.Lnext=n,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,n},t.prototype.splice_=function(e,n){var i=e.Onext,r=n.Onext;i.Sym.Lnext=n,r.Sym.Lnext=e,e.Onext=r,n.Onext=i},t.prototype.makeVertex_=function(e,n,i){var r=e;Kt(r,"Vertex can't be null!");var s=i.prev;r.prev=s,s.next=r,r.next=i,i.prev=r,r.anEdge=n;var o=n;do o.Org=r,o=o.Onext;while(o!==n)},t.prototype.makeFace_=function(e,n,i){var r=e;Kt(r,"Face can't be null");var s=i.prev;r.prev=s,s.next=r,r.next=i,i.prev=r,r.anEdge=n,r.trail=null,r.marked=!1,r.inside=i.inside;var o=n;do o.Lface=r,o=o.Lnext;while(o!==n)},t.prototype.killEdge_=function(e){e.Sym.side<e.side&&(e=e.Sym);var n=e.next,i=e.Sym.next;n.Sym.next=i,i.Sym.next=n},t.prototype.killVertex_=function(e,n){var i=e.anEdge,r=i;do r.Org=n,r=r.Onext;while(r!==i);var s=e.prev,o=e.next;o.prev=s,s.next=o},t.prototype.killFace_=function(e,n){var i=e.anEdge,r=i;do r.Lface=n,r=r.Lnext;while(r!==i);var s=e.prev,o=e.next;o.prev=s,s.next=o},t.prototype.makeEdge=function(){var e=new G1,n=new G1,i=new qS,r=this.makeEdge_(this.eHead);return this.makeVertex_(e,r,this.vHead),this.makeVertex_(n,r.Sym,this.vHead),this.makeFace_(i,r,this.fHead),r},t.prototype.splice=function(e,n){var i=!1,r=!1;if(e!==n){if(n.Org!==e.Org&&(r=!0,this.killVertex_(n.Org,e.Org)),n.Lface!==e.Lface&&(i=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(n,e),!r){var s=new G1;this.makeVertex_(s,n,e.Org),e.Org.anEdge=e}if(!i){var o=new qS;this.makeFace_(o,n,e.Lface),e.Lface.anEdge=e}}},t.prototype.delete=function(e){var n=e.Sym,i=!1;if(e.Lface!==e.Rface&&(i=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!i){var r=new qS;this.makeFace_(r,e,e.Lface)}n.Onext===n?(this.killVertex_(n.Org,null),this.killFace_(n.Lface,null)):(e.Lface.anEdge=n.Oprev,n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),this.killEdge_(e)},t.prototype.addEdgeVertex=function(e){var n=this.makeEdge_(e),i=n.Sym;this.splice_(n,e.Lnext),n.Org=e.Dst;var r=new G1;return this.makeVertex_(r,i,n.Org),n.Lface=i.Lface=e.Lface,n},t.prototype.splitEdge=function(e){var n=this.addEdgeVertex(e),i=n.Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,i),e.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=e.Rface,i.winding=e.winding,i.Sym.winding=e.Sym.winding,i.idx=e.idx,i.Sym.idx=e.Sym.idx,i},t.prototype.connect=function(e,n){var i=!1,r=this.makeEdge_(e),s=r.Sym;if(n.Lface!==e.Lface&&(i=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(r,e.Lnext),this.splice_(s,n),r.Org=e.Dst,s.Org=n.Org,r.Lface=s.Lface=e.Lface,e.Lface.anEdge=s,!i){var o=new qS;this.makeFace_(o,r,e.Lface)}return r},t.prototype.zapFace=function(e){var n=e.anEdge,i,r,s,o,a;r=n.Lnext;do i=r,r=i.Lnext,i.Lface=null,i.Rface===null&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),s=i.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(i));while(i!=n);o=e.prev,a=e.next,a.prev=o,o.next=a},t.prototype.countFaceVerts_=function(e){var n=e.anEdge,i=0;do i++,n=n.Lnext;while(n!==e.anEdge);return i},t.prototype.mergeConvexFaces=function(e){var n,i,r,s,o,a,l;for(n=this.fHead.next;n!==this.fHead;n=n.next)if(n.inside)for(i=n.anEdge,o=i.Org;r=i.Lnext,s=i.Sym,s&&s.Lface&&s.Lface.inside&&(a=this.countFaceVerts_(n),l=this.countFaceVerts_(s.Lface),a+l-2<=e&&jt.vertCCW(i.Lprev.Org,i.Org,s.Lnext.Lnext.Org)&&jt.vertCCW(s.Lprev.Org,s.Org,i.Lnext.Lnext.Org)&&(r=s.Lnext,this.delete(s),i=null,s=null)),!(i&&i.Lnext.Org===o);)i=r;return!0},t.prototype.check=function(){var e=this.fHead,n=this.vHead,i=this.eHead,r,s,o,a,l,c;for(s=e,s=e;(r=s.next)!==e;s=r){Kt(r.prev===s),l=r.anEdge;do Kt(l.Sym!==l),Kt(l.Sym.Sym===l),Kt(l.Lnext.Onext.Sym===l),Kt(l.Onext.Sym.Lnext===l),Kt(l.Lface===r),l=l.Lnext;while(l!==r.anEdge)}for(Kt(r.prev===s&&r.anEdge===null),a=n,a=n;(o=a.next)!==n;a=o){Kt(o.prev===a),l=o.anEdge;do Kt(l.Sym!==l),Kt(l.Sym.Sym===l),Kt(l.Lnext.Onext.Sym===l),Kt(l.Onext.Sym.Lnext===l),Kt(l.Org===o),l=l.Onext;while(l!==o.anEdge)}for(Kt(o.prev===a&&o.anEdge===null),c=i,c=i;(l=c.next)!==i;c=l)Kt(l.Sym.next===c.Sym),Kt(l.Sym!==l),Kt(l.Sym.Sym===l),Kt(l.Org!==null),Kt(l.Dst!==null),Kt(l.Lnext.Onext.Sym===l),Kt(l.Onext.Sym.Lnext===l);Kt(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},t}(),qae=function(){function t(){this.handle=null}return t}(),Xae=function(){function t(){this.key=null,this.node=0}return t}(),POt=function(){function t(e,n){this.leq=n,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=e,this.nodes=[],this.handles=[];for(var i=0;i<e+1;i++)this.nodes[i]=new qae,this.handles[i]=new Xae;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return t.prototype.floatDown_=function(e){var n=this.nodes,i=this.handles,r,s,o;for(r=n[e].handle;;){if(o=e<<1,o<this.size&&this.leq(i[n[o+1].handle].key,i[n[o].handle].key)&&++o,Kt(o<=this.max),s=n[o].handle,o>this.size||this.leq(i[r].key,i[s].key)){n[e].handle=r,i[r].node=e;break}n[e].handle=s,i[s].node=e,e=o}},t.prototype.floatUp_=function(e){var n=this.nodes,i=this.handles,r,s,o;for(r=n[e].handle;;){if(o=e>>1,s=n[o].handle,o===0||this.leq(i[s].key,i[r].key)){n[e].handle=r,i[r].node=e;break}n[e].handle=s,i[s].node=e,e=o}},t.prototype.init=function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},t.prototype.min=function(){return this.handles[this.nodes[1].handle].key},t.prototype.insert=function(e){var n,i;if(n=++this.size,n*2>this.max){this.max*=2;var r,s;for(s=this.nodes.length,this.nodes.length=this.max+1,r=s;r<this.nodes.length;r++)this.nodes[r]=new qae;for(s=this.handles.length,this.handles.length=this.max+1,r=s;r<this.handles.length;r++)this.handles[r]=new Xae}return this.freeList===0?i=n:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[n].handle=i,this.handles[i].node=n,this.handles[i].key=e,this.initialized&&this.floatUp_(n),i},t.prototype.extractMin=function(){var e=this.nodes,n=this.handles,i=e[1].handle,r=n[i].key;return this.size>0&&(e[1].handle=e[this.size].handle,n[e[1].handle].node=1,n[i].key=null,n[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),r},t.prototype.delete=function(e){var n=this.nodes,i=this.handles,r;Kt(e>=1&&e<=this.max&&i[e].key!==null),r=i[e].node,n[r].handle=n[this.size].handle,i[n[r].handle].node=r,--this.size,r<=this.size&&(r<=1||this.leq(i[n[r>>1].handle].key,i[n[r].handle].key)?this.floatDown_(r):this.floatUp_(r)),i[e].key=null,i[e].node=this.freeList,this.freeList=e},t}(),J5=function(){function t(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return t}(),Yae=function(){function t(){this.key=null,this.next=null,this.prev=null}return t}(),DOt=function(){function t(e,n){this.frame=e,this.leq=n,this.head=new Yae,this.head.next=this.head,this.head.prev=this.head}return t.prototype.min=function(){return this.head.next},t.prototype.max=function(){return this.head.prev},t.prototype.insert=function(e){return this.insertBefore(this.head,e)},t.prototype.search=function(e){var n=this.head;do n=n.next;while(n.key!==null&&!this.leq(this.frame,e,n.key));return n},t.prototype.insertBefore=function(e,n){do e=e.prev;while(e.key!==null&&!this.leq(this.frame,e.key,n));var i=new Yae;return i.key=n,i.next=e.next,e.next.prev=i,i.prev=e,e.next=i,i},t.prototype.delete=function(e){e.next.prev=e.prev,e.prev.next=e.next},t}(),OOt=function(){function t(){}return t.regionBelow=function(e){return e.nodeUp.prev.key},t.regionAbove=function(e){return e.nodeUp.next.key},t.debugEvent=function(e){},t.addWinding=function(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding},t.edgeLeq=function(e,n,i){var r=e.event,s=n.eUp,o=i.eUp;if(s.Dst===r)return o.Dst===r?jt.vertLeq(s.Org,o.Org)?jt.edgeSign(o.Dst,s.Org,o.Org)<=0:jt.edgeSign(s.Dst,o.Org,s.Org)>=0:jt.edgeSign(o.Dst,r,o.Org)<=0;if(o.Dst===r)return jt.edgeSign(s.Dst,r,s.Org)>=0;var a=jt.edgeEval(s.Dst,r,s.Org),l=jt.edgeEval(o.Dst,r,o.Org);return a>=l},t.deleteRegion=function(e,n){n.fixUpperEdge&&Kt(n.eUp.winding===0),n.eUp.activeRegion=null,e.dict.delete(n.nodeUp)},t.fixUpperEdge=function(e,n,i){Kt(n.fixUpperEdge),e.mesh.delete(n.eUp),n.fixUpperEdge=!1,n.eUp=i,i.activeRegion=n},t.topLeftRegion=function(e,n){var i=n.eUp.Org,r;do n=t.regionAbove(n);while(n.eUp.Org===i);if(n.fixUpperEdge){if(r=e.mesh.connect(t.regionBelow(n).eUp.Sym,n.eUp.Lnext),r===null)return null;t.fixUpperEdge(e,n,r),n=t.regionAbove(n)}return n},t.topRightRegion=function(e){var n=e.eUp.Dst;do e=t.regionAbove(e);while(e.eUp.Dst===n);return e},t.addRegionBelow=function(e,n,i){var r=new J5;return r.eUp=i,r.nodeUp=e.dict.insertBefore(n.nodeUp,r),r.fixUpperEdge=!1,r.sentinel=!1,r.dirty=!1,i.activeRegion=r,r},t.isWindingInside=function(e,n){switch(e.windingRule){case fi.ODD:return(n&1)!==0;case fi.NONZERO:return n!==0;case fi.POSITIVE:return n>0;case fi.NEGATIVE:return n<0;case fi.ABS_GEQ_TWO:return n>=2||n<=-2}throw new Error("Invalid winding rulle")},t.computeWinding=function(e,n){n.windingNumber=t.regionAbove(n).windingNumber+n.eUp.winding,n.inside=t.isWindingInside(e,n.windingNumber)},t.finishRegion=function(e,n){var i=n.eUp,r=i.Lface;r.inside=n.inside,r.anEdge=i,t.deleteRegion(e,n)},t.finishLeftRegions=function(e,n,i){for(var r,s=null,o=n,a=n.eUp;o!==i;){if(o.fixUpperEdge=!1,s=t.regionBelow(o),r=s.eUp,r.Org!=a.Org){if(!s.fixUpperEdge){t.finishRegion(e,o);break}r=e.mesh.connect(a.Lprev,r.Sym),t.fixUpperEdge(e,s,r)}a.Onext!==r&&(e.mesh.splice(r.Oprev,r),e.mesh.splice(a,r)),t.finishRegion(e,o),a=s.eUp,o=s}return a},t.addRightEdges=function(e,n,i,r,s,o){var a,l,c,h,u=!0;c=i;do Kt(jt.vertLeq(c.Org,c.Dst)),t.addRegionBelow(e,n,c.Sym),c=c.Onext;while(c!==r);for(s===null&&(s=t.regionBelow(n).eUp.Rprev),l=n,h=s;a=t.regionBelow(l),c=a.eUp.Sym,c.Org===h.Org;)c.Onext!==h&&(e.mesh.splice(c.Oprev,c),e.mesh.splice(h.Oprev,c)),a.windingNumber=l.windingNumber-c.winding,a.inside=t.isWindingInside(e,a.windingNumber),l.dirty=!0,!u&&t.checkForRightSplice(e,l)&&(t.addWinding(c,h),t.deleteRegion(e,l),e.mesh.delete(h)),u=!1,l=a,h=c;l.dirty=!0,Kt(l.windingNumber-c.winding===a.windingNumber),o&&t.walkDirtyRegions(e,l)},t.spliceMergeVertices=function(e,n,i){e.mesh.splice(n,i)},t.vertexWeights=function(e,n,i){var r=jt.vertL1dist(n,e),s=jt.vertL1dist(i,e),o=.5*s/(r+s),a=.5*r/(r+s);e.coords[0]+=o*n.coords[0]+a*i.coords[0],e.coords[1]+=o*n.coords[1]+a*i.coords[1],e.coords[2]+=o*n.coords[2]+a*i.coords[2]},t.getIntersectData=function(e,n,i,r,s,o){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,t.vertexWeights(n,i,r),t.vertexWeights(n,s,o)},t.checkForRightSplice=function(e,n){var i=t.regionBelow(n),r=n.eUp,s=i.eUp;if(jt.vertLeq(r.Org,s.Org)){if(jt.edgeSign(s.Dst,r.Org,s.Org)>0)return!1;jt.vertEq(r.Org,s.Org)?r.Org!==s.Org&&(e.pq.delete(r.Org.pqHandle),t.spliceMergeVertices(e,s.Oprev,r)):(e.mesh.splitEdge(s.Sym),e.mesh.splice(r,s.Oprev),n.dirty=i.dirty=!0)}else{if(jt.edgeSign(r.Dst,s.Org,r.Org)<0)return!1;t.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(r.Sym),e.mesh.splice(s.Oprev,r)}return!0},t.checkForLeftSplice=function(e,n){var i=t.regionBelow(n),r=n.eUp,s=i.eUp,o;if(Kt(!jt.vertEq(r.Dst,s.Dst)),jt.vertLeq(r.Dst,s.Dst)){if(jt.edgeSign(r.Dst,s.Dst,r.Org)<0)return!1;t.regionAbove(n).dirty=n.dirty=!0,o=e.mesh.splitEdge(r),e.mesh.splice(s.Sym,o),o.Lface.inside=n.inside}else{if(jt.edgeSign(s.Dst,r.Dst,s.Org)>0)return!1;n.dirty=i.dirty=!0,o=e.mesh.splitEdge(s),e.mesh.splice(r.Lnext,s.Sym),o.Rface.inside=n.inside}return!0},t.checkForIntersect=function(e,n){var i=t.regionBelow(n),r=n.eUp,s=i.eUp,o=r.Org,a=s.Org,l=r.Dst,c=s.Dst,h,u,d=new G1,f,p;if(Kt(!jt.vertEq(c,l)),Kt(jt.edgeSign(l,e.event,o)<=0),Kt(jt.edgeSign(c,e.event,a)>=0),Kt(o!==e.event&&a!==e.event),Kt(!n.fixUpperEdge&&!i.fixUpperEdge),o===a||(h=Math.min(o.t,l.t),u=Math.max(a.t,c.t),h>u))return!1;if(jt.vertLeq(o,a)){if(jt.edgeSign(c,o,a)>0)return!1}else if(jt.edgeSign(l,a,o)<0)return!1;return t.debugEvent(e),jt.intersect(l,o,c,a,d),Kt(Math.min(o.t,l.t)<=d.t),Kt(d.t<=Math.max(a.t,c.t)),Kt(Math.min(c.s,l.s)<=d.s),Kt(d.s<=Math.max(a.s,o.s)),jt.vertLeq(d,e.event)&&(d.s=e.event.s,d.t=e.event.t),f=jt.vertLeq(o,a)?o:a,jt.vertLeq(f,d)&&(d.s=f.s,d.t=f.t),jt.vertEq(d,o)||jt.vertEq(d,a)?(t.checkForRightSplice(e,n),!1):!jt.vertEq(l,e.event)&&jt.edgeSign(l,e.event,d)>=0||!jt.vertEq(c,e.event)&&jt.edgeSign(c,e.event,d)<=0?c===e.event?(e.mesh.splitEdge(r.Sym),e.mesh.splice(s.Sym,r),n=t.topLeftRegion(e,n),r=t.regionBelow(n).eUp,t.finishLeftRegions(e,t.regionBelow(n),i),t.addRightEdges(e,n,r.Oprev,r,r,!0),!0):l===e.event?(e.mesh.splitEdge(s.Sym),e.mesh.splice(r.Lnext,s.Oprev),i=n,n=t.topRightRegion(n),p=t.regionBelow(n).eUp.Rprev,i.eUp=s.Oprev,s=t.finishLeftRegions(e,i,null),t.addRightEdges(e,n,s.Onext,r.Rprev,p,!0),!0):(jt.edgeSign(l,e.event,d)>=0&&(t.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(r.Sym),r.Org.s=e.event.s,r.Org.t=e.event.t),jt.edgeSign(c,e.event,d)<=0&&(n.dirty=i.dirty=!0,e.mesh.splitEdge(s.Sym),s.Org.s=e.event.s,s.Org.t=e.event.t),!1):(e.mesh.splitEdge(r.Sym),e.mesh.splitEdge(s.Sym),e.mesh.splice(s.Oprev,r),r.Org.s=d.s,r.Org.t=d.t,r.Org.pqHandle=e.pq.insert(r.Org),t.getIntersectData(e,r.Org,o,l,a,c),t.regionAbove(n).dirty=n.dirty=i.dirty=!0,!1)},t.walkDirtyRegions=function(e,n){for(var i=t.regionBelow(n),r,s;;){for(;i.dirty;)n=i,i=t.regionBelow(i);if(!n.dirty&&(i=n,n=t.regionAbove(n),n===null||!n.dirty))return;if(n.dirty=!1,r=n.eUp,s=i.eUp,r.Dst!==s.Dst&&t.checkForLeftSplice(e,n)&&(i.fixUpperEdge?(t.deleteRegion(e,i),e.mesh.delete(s),i=t.regionBelow(n),s=i.eUp):n.fixUpperEdge&&(t.deleteRegion(e,n),e.mesh.delete(r),n=t.regionAbove(i),r=n.eUp)),r.Org!==s.Org)if(r.Dst!==s.Dst&&!n.fixUpperEdge&&!i.fixUpperEdge&&(r.Dst===e.event||s.Dst===e.event)){if(t.checkForIntersect(e,n))return}else t.checkForRightSplice(e,n);r.Org===s.Org&&r.Dst===s.Dst&&(t.addWinding(s,r),t.deleteRegion(e,n),e.mesh.delete(r),n=t.regionAbove(i))}},t.connectRightVertex=function(e,n,i){var r,s=i.Onext,o=t.regionBelow(n),a=n.eUp,l=o.eUp,c=!1;if(a.Dst!==l.Dst&&t.checkForIntersect(e,n),jt.vertEq(a.Org,e.event)&&(e.mesh.splice(s.Oprev,a),n=t.topLeftRegion(e,n),s=t.regionBelow(n).eUp,t.finishLeftRegions(e,t.regionBelow(n),o),c=!0),jt.vertEq(l.Org,e.event)&&(e.mesh.splice(i,l.Oprev),i=t.finishLeftRegions(e,o,null),c=!0),c){t.addRightEdges(e,n,i.Onext,s,s,!0);return}jt.vertLeq(l.Org,a.Org)?r=l.Oprev:r=a,r=e.mesh.connect(i.Lprev,r),t.addRightEdges(e,n,r,r.Onext,r.Onext,!1),r.Sym.activeRegion.fixUpperEdge=!0,t.walkDirtyRegions(e,n)},t.connectLeftDegenerate=function(e,n,i){var r,s,o,a,l;if(r=n.eUp,jt.vertEq(r.Org,i)){Kt(!1),t.spliceMergeVertices(e,r,i.anEdge);return}if(!jt.vertEq(r.Dst,i)){e.mesh.splitEdge(r.Sym),n.fixUpperEdge&&(e.mesh.delete(r.Onext),n.fixUpperEdge=!1),e.mesh.splice(i.anEdge,r),t.sweepEvent(e,i);return}Kt(!1),n=t.topRightRegion(n),l=t.regionBelow(n),o=l.eUp.Sym,s=a=o.Onext,l.fixUpperEdge&&(Kt(s!==o),t.deleteRegion(e,l),e.mesh.delete(o),o=s.Oprev),e.mesh.splice(i.anEdge,o),jt.edgeGoesLeft(s)||(s=null),t.addRightEdges(e,n,o.Onext,a,s,!0)},t.connectLeftVertex=function(e,n){var i,r,s,o,a,l,c=new J5;if(c.eUp=n.anEdge.Sym,i=e.dict.search(c).key,r=t.regionBelow(i),!!r){if(o=i.eUp,a=r.eUp,jt.edgeSign(o.Dst,n,o.Org)===0){t.connectLeftDegenerate(e,i,n);return}if(s=jt.vertLeq(a.Dst,o.Dst)?i:r,i.inside||s.fixUpperEdge){if(s===i)l=e.mesh.connect(n.anEdge.Sym,o.Lnext);else{var h=e.mesh.connect(a.Dnext,n.anEdge);l=h.Sym}s.fixUpperEdge?t.fixUpperEdge(e,s,l):t.computeWinding(e,t.addRegionBelow(e,i,l)),t.sweepEvent(e,n)}else t.addRightEdges(e,i,n.anEdge,n.anEdge,null,!0)}},t.sweepEvent=function(e,n){e.event=n,t.debugEvent(e);for(var i=n.anEdge;i.activeRegion===null;)if(i=i.Onext,i===n.anEdge){t.connectLeftVertex(e,n);return}var r=t.topLeftRegion(e,i.activeRegion);Kt(r!==null);var s=t.regionBelow(r),o=s.eUp,a=t.finishLeftRegions(e,s,null);a.Onext===o?t.connectRightVertex(e,r,a):t.addRightEdges(e,r,a.Onext,o,o,!0)},t.addSentinel=function(e,n,i,r){var s=new J5,o=e.mesh.makeEdge();o.Org.s=i,o.Org.t=r,o.Dst.s=n,o.Dst.t=r,e.event=o.Dst,s.eUp=o,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=e.dict.insert(s)},t.initEdgeDict=function(e){e.dict=new DOt(e,t.edgeLeq);var n=e.bmax[0]-e.bmin[0],i=e.bmax[1]-e.bmin[1],r=e.bmin[0]-n,s=e.bmax[0]+n,o=e.bmin[1]-i,a=e.bmax[1]+i;t.addSentinel(e,r,s,o),t.addSentinel(e,r,s,a)},t.doneEdgeDict=function(e){for(var n,i=0;(n=e.dict.min().key)!==null;)n.sentinel||(Kt(n.fixUpperEdge),Kt(++i===1)),Kt(n.windingNumber===0),t.deleteRegion(e,n)},t.removeDegenerateEdges=function(e){var n,i,r,s=e.mesh.eHead;for(n=s.next;n!==s;n=i)i=n.next,r=n.Lnext,jt.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(t.spliceMergeVertices(e,r,n),e.mesh.delete(n),n=r,r=n.Lnext),r.Lnext===n&&(r!==n&&((r===i||r===i.Sym)&&(i=i.next),e.mesh.delete(r)),(n===i||n===i.Sym)&&(i=i.next),e.mesh.delete(n))},t.initPriorityQ=function(e){var n,i,r,s=0;for(r=e.mesh.vHead,i=r.next;i!==r;i=i.next)s++;for(s+=8,n=e.pq=new POt(s,jt.vertLeq),r=e.mesh.vHead,i=r.next;i!==r;i=i.next)i.pqHandle=n.insert(i);return i!==r?!1:(n.init(),!0)},t.donePriorityQ=function(e){e.pq=null},t.removeDegenerateFaces=function(e,n){var i,r,s;for(i=n.fHead.next;i!==n.fHead;i=r)r=i.next,s=i.anEdge,Kt(s.Lnext!==s),s.Lnext.Lnext===s&&(t.addWinding(s.Onext,s),e.mesh.delete(s));return!0},t.computeInterior=function(e,n){n===void 0&&(n=!0);var i,r;if(t.removeDegenerateEdges(e),!t.initPriorityQ(e))return!1;for(t.initEdgeDict(e);(i=e.pq.extractMin())!==null;){for(;r=e.pq.min(),!(r===null||!jt.vertEq(r,i));)r=e.pq.extractMin(),t.spliceMergeVertices(e,i.anEdge,r.anEdge);t.sweepEvent(e,i)}return e.event=e.dict.min().key.eUp.Org,t.debugEvent(e),t.doneEdgeDict(e),t.donePriorityQ(e),t.removeDegenerateFaces(e,e.mesh)?(n&&e.mesh.check(),!0):!1},t}(),LOt=function(){function t(){this.mesh=new $ae,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=fi.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return t.prototype.dot_=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},t.prototype.normalize_=function(e){var n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!n)throw"Zero-size vector!";n=Math.sqrt(n),e[0]/=n,e[1]/=n,e[2]/=n},t.prototype.longAxis_=function(e){var n=0;return Math.abs(e[1])>Math.abs(e[0])&&(n=1),Math.abs(e[2])>Math.abs(e[n])&&(n=2),n},t.prototype.computeNormal_=function(e){var n,i,r,s,o,a,l=[0,0,0],c=[0,0,0],h=[0,0,0],u=[0,0,0],d=[0,0,0],f=[null,null,null],p=[null,null,null],m=this.mesh.vHead;n=m.next;for(var g=0;g<3;++g)s=n.coords[g],c[g]=s,p[g]=n,l[g]=s,f[g]=n;for(n=m.next;n!==m;n=n.next)for(var v=0;v<3;++v)s=n.coords[v],s<c[v]&&(c[v]=s,p[v]=n),s>l[v]&&(l[v]=s,f[v]=n);var y=0;if(l[1]-c[1]>l[0]-c[0]&&(y=1),l[2]-c[2]>l[y]-c[y]&&(y=2),c[y]>=l[y]){e[0]=0,e[1]=0,e[2]=1;return}for(a=0,i=p[y],r=f[y],h[0]=i.coords[0]-r.coords[0],h[1]=i.coords[1]-r.coords[1],h[2]=i.coords[2]-r.coords[2],n=m.next;n!==m;n=n.next)u[0]=n.coords[0]-r.coords[0],u[1]=n.coords[1]-r.coords[1],u[2]=n.coords[2]-r.coords[2],d[0]=h[1]*u[2]-h[2]*u[1],d[1]=h[2]*u[0]-h[0]*u[2],d[2]=h[0]*u[1]-h[1]*u[0],o=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],o>a&&(a=o,e[0]=d[0],e[1]=d[1],e[2]=d[2]);a<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(h)]=1)},t.prototype.checkOrientation_=function(){for(var e=this.mesh.fHead,n,i=this.mesh.vHead,r,s=0,o=e.next;o!==e;o=o.next)if(r=o.anEdge,!(r.winding<=0))do s+=(r.Org.s-r.Dst.s)*(r.Org.t+r.Dst.t),r=r.Lnext;while(r!==o.anEdge);if(s<0){for(n=i.next;n!==i;n=n.next)n.t=-n.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},t.prototype.projectPolygon_=function(){var e=this.mesh.vHead,n=[0,0,0],i,r,s=!1;n[0]=this.normal[0],n[1]=this.normal[1],n[2]=this.normal[2],!n[0]&&!n[1]&&!n[2]&&(this.computeNormal_(n),s=!0),i=this.sUnit,r=this.tUnit;var o=this.longAxis_(n);i[o]=0,i[(o+1)%3]=1,i[(o+2)%3]=0,r[o]=0,r[(o+1)%3]=0,r[(o+2)%3]=n[o]>0?1:-1;for(var a=e.next;a!==e;a=a.next)a.s=this.dot_(a.coords,i),a.t=this.dot_(a.coords,r);s&&this.checkOrientation_();for(var l=!0,c=e.next;c!==e;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},t.prototype.addWinding_=function(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding},t.prototype.tessellateMonoRegion_=function(e,n){var i,r;if(i=n.anEdge,!(i.Lnext!==i&&i.Lnext.Lnext!==i))throw"Mono region invalid";for(;jt.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;jt.vertLeq(i.Org,i.Dst);i=i.Lnext);r=i.Lprev;for(var s=void 0;i.Lnext!==r;)if(jt.vertLeq(i.Dst,r.Org)){for(;r.Lnext!==i&&(jt.edgeGoesLeft(r.Lnext)||jt.edgeSign(r.Org,r.Dst,r.Lnext.Dst)<=0);)s=e.connect(r.Lnext,r),r=s.Sym;r=r.Lprev}else{for(;r.Lnext!==i&&(jt.edgeGoesRight(i.Lprev)||jt.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)s=e.connect(i,i.Lprev),i=s.Sym;i=i.Lnext}if(r.Lnext===i)throw"Mono region invalid";for(;r.Lnext.Lnext!==i;)s=e.connect(r.Lnext,r),r=s.Sym;return!0},t.prototype.tessellateInterior_=function(e){for(var n,i=e.fHead.next;i!==e.fHead;i=n)if(n=i.next,i.inside&&!this.tessellateMonoRegion_(e,i))return!1;return!0},t.prototype.discardExterior_=function(e){for(var n,i=e.fHead.next;i!==e.fHead;i=n)n=i.next,i.inside||e.zapFace(i)},t.prototype.setWindingNumber_=function(e,n,i){for(var r,s=e.eHead.next;s!==e.eHead;s=r)r=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?n:-n:i?e.delete(s):s.winding=0},t.prototype.getNeighbourFace_=function(e){return!e.Rface||!e.Rface.inside?-1:e.Rface.n},t.prototype.outputPolymesh_=function(e,n,i,r){var s,o=0,a=0,l;i>3&&e.mergeConvexFaces(i);for(var c=e.vHead.next;c!==e.vHead;c=c.next)c.n=-1;for(var h=e.fHead.next;h!==e.fHead;h=h.next)if(h.n=-1,!!h.inside){s=h.anEdge,l=0;do{var c=s.Org;c.n===-1&&(c.n=a,a++),l++,s=s.Lnext}while(s!==h.anEdge);if(l>i)throw"Face vertex greater that support polygon";h.n=o,++o}this.elementCount=o,n===as.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*i,this.vertexCount=a,this.vertices=[],this.vertices.length=a*r,this.vertexIndices=[],this.vertexIndices.length=a;for(var c=e.vHead.next;c!==e.vHead;c=c.next)if(c.n!==-1){var u=c.n*r;this.vertices[u+0]=c.coords[0],this.vertices[u+1]=c.coords[1],r>2&&(this.vertices[u+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}for(var d=0,h=e.fHead.next;h!==e.fHead;h=h.next)if(h.inside){s=h.anEdge,l=0;do{var c=s.Org;this.elements[d++]=c.n,l++,s=s.Lnext}while(s!==h.anEdge);for(var f=l;f<i;++f)this.elements[d++]=-1;if(n===as.CONNECTED_POLYGONS){s=h.anEdge;do this.elements[d++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==h.anEdge);for(var p=l;p<i;++p)this.elements[d++]=-1}}},t.prototype.outputContours_=function(e,n){var i,r,s=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){r=i=a.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==r);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*n,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,h=0;s=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){o=0,r=i=a.anEdge;do this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],n>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,o++,i=i.Lnext;while(i!==r);this.elements[h++]=s,this.elements[h++]=o,s+=o}},t.prototype.addContour=function(e,n){this.mesh===null&&(this.mesh=new $ae),e<2&&(e=2),e>3&&(e=3);for(var i=null,r=0;r<n.length;r+=e)i===null?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=n[r+0],i.Org.coords[1]=n[r+1],e>2?i.Org.coords[2]=n[r+2]:i.Org.coords[2]=0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},t.prototype.tesselate=function(e,n,i,r,s,o){if(e===void 0&&(e=fi.ODD),n===void 0&&(n=as.POLYGONS),o===void 0&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=e,r<2&&(r=2),r>3&&(r=3),!this.mesh)return!1;this.projectPolygon_(),OOt.computeInterior(this,o);var a=this.mesh;return n===as.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),n===as.BOUNDARY_CONTOURS?this.outputContours_(a,r):this.outputPolymesh_(a,n,i,r),!0},t}();function gm(t){var e=t.windingRule,n=e===void 0?fi.ODD:e,i=t.elementType,r=i===void 0?as.POLYGONS:i,s=t.polySize,o=s===void 0?3:s,a=t.vertexSize,l=a===void 0?2:a,c=t.normal,h=c===void 0?[0,0,1]:c,u=t.contours,d=u===void 0?[]:u,f=t.strict,p=f===void 0?!0:f,m=t.debug,g=m===void 0?!1:m;if(!d&&p)throw new Error("Contours can't be empty");if(d){var v=new LOt;t.edgeCreateCallback&&(v.edgeCreateCallback=t.edgeCreateCallback),t.vertexIdCallback&&(v.vertexIdCallback=t.vertexIdCallback);for(var y=0;y<d.length;y++)v.addContour(l||2,d[y]);return v.tesselate(n,r,o,l,h,p),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:g?v.mesh:void 0}}}fi.ODD;fi.NONZERO;fi.POSITIVE;fi.NEGATIVE;fi.ABS_GEQ_TWO;as.POLYGONS;as.CONNECTED_POLYGONS;as.BOUNDARY_CONTOURS;var Oj=class{constructor(t=256,e=!1){this.capacity=t,this.size=0,this.debug=e,this.debug&&console.log(`allocating with cap ${t}`);let n=t*Oj.eSize;this.buffer=new ArrayBuffer(n);let i=Float32Array.BYTES_PER_ELEMENT,r=0;this.positions=new Float32Array(this.buffer,r*i,3*t),r+=3*t,this.normals=new Float32Array(this.buffer,r*i,3*t),r+=3*t,this.uvs=new Float32Array(this.buffer,r*i,2*t)}realloc(t,e=!1){if(t<this.size)throw Error("cannot shrink buffer");if(t<=this.capacity&&!e)return;this.debug&&console.log(`resizing from ${this.capacity} → ${t}`);let n=t*Oj.eSize,i=new ArrayBuffer(n),r=Float32Array.BYTES_PER_ELEMENT,s=0,o=new Float32Array(i,s*r,3*t);s+=3*t;let a=new Float32Array(i,s*r,3*t);s+=3*t;let l=new Float32Array(i,s*r,2*t);o.set(this.positions.slice(0,this.size*3)),a.set(this.normals.slice(0,this.size*3)),l.set(this.uvs.slice(0,this.size*2)),this.buffer=i,this.positions=o,this.normals=a,this.uvs=l,this.capacity=t}get(t=1){let e=this.size+t;if(e>this.capacity){let i=this.capacity;for(;e>i;)i*=2;this.realloc(i)}let n=this.size;return this.size=e,n}reserve(t){let e=this.size+t;e>this.capacity&&this.realloc(e)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},Uwe=Oj;Uwe.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var h7={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},Gwe={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},Hwe={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},Z5=(t,e)=>([n,i])=>(i<n&&(i+=e),(t>=n?t:t+e)<=i),jwe=class extends Qt{constructor(t,e,n=0,i=12,r=3,s=fi.ODD){super(),this.type="ShapeGeometry",this.vertexCache={},this._shape=t,this._depth=e,this._bevel=n,this._curveSegments=i,this._bevelSegmentsInput=r,n<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(n,e/2-1e-12),this._bevelSegments=Math.floor(r));let o=this._shape.extractShapePointsToFlatArray([],i),a=this._shape.shapeHoles.map(S=>{let A=S.extractShapePointsToFlatArray([],i),E=[];for(let M=A.length-1;M>=1;M-=2){let C=A[M-1],T=A[M-0];E.push(C,T)}return E}),l;try{l=gm({windingRule:s,elementType:as.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]})}catch{l=h7}let c;try{c=gm({windingRule:fi.ODD,elementType:as.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...a]})}catch{c=Gwe}if(!l)throw new Error("error generating geometry");let h=l.elementCount;if(c){l.elementCount+=c.elementCount;for(let S=0;S<c.elements.length;S++){let A=c.elements[S],E=S%2===0?l.vertexCount:0;l.elements.push(A+E)}for(let S=0;S<c.vertexIndices.length;S++){let A=c.vertexIndices[S],E=l.vertexCount;l.vertexIndices.push(A+E)}for(let S=0;S<c.vertices.length;S++){let A=c.vertices[S];l.vertices.push(A)}}let u=1/0,d=-1/0,f=1/0,p=-1/0;for(let S=0,A=l.vertexCount;S<A;S++){let E=S*2,M=l.vertices[E+0],C=l.vertices[E+1];M<u&&(u=M),M>d&&(d=M),C<f&&(f=C),C>p&&(p=C)}this._minX=u,this._minY=f,this._width=d-u,this._height=p-f,this._buffer=new Uwe(this._computeBufferEstimatedSize(l));let m=[],g=[];for(let S=l.elementCount-1;S>=0;S--){let A=S>=h,E=S*2,M=l.elements[E+0],C=l.elements[E+1],T=M+C,D={start:M,count:C,normals:[],continuous:[],concave:[]},L=M,I=T-1,R=M+1,H=this._shape.roundedCurves.length;do{let V=L-M,U=l.vertices[I*2+0],j=l.vertices[I*2+1],z=l.vertices[L*2+0],Y=l.vertices[L*2+1],J=l.vertices[R*2+0],K=l.vertices[R*2+1],X=z-U,te=Y-j,re=Math.sqrt(X*X+te*te);X/=re,te/=re;let se=z-J,ce=Y-K,ge=Math.sqrt(se*se+ce*ce);se/=ge,ce/=ge,D.normals[V*2+0]=-ce,D.normals[V*2+1]=se,D.concave[V]=X*ce-te*se>0;let oe=l.vertexIndices[L];if(Array.isArray(oe))D.continuous[V]=!1;else{let[ae,ye]=this._shape.getCurveIndexFromVertexId(oe-1,!0);if(ye>0&&ye<1)D.continuous[V]=!0;else{let we=ye===1?ae+1:ae-1;we=(we+H)%H;let Se=ye===1?0:1,Pe=this._shape.roundedCurves[ae].getTangent(ye),Te=this._shape.roundedCurves[we].getTangent(Se);D.continuous[V]=Pe.dot(Te)>.95}}A&&(D.normals[V*2+0]*=-1,D.normals[V*2+1]*=-1),[I,L,R]=[L,R,R+1],R>=T&&(R-=C)}while(R!==M+1);let Z=[];Z.push({bevelI:0,angle:0,size:0,boundary:{vertices:l.vertices.slice(M*2,T*2),vertexCount:C,vertexIndices:new Array(C).fill(!0).map((V,U)=>[U,U]),elements:[0,C],elementCount:1,mesh:null},reverseMap:[],insetPoints:l.vertices.slice(M*2,T*2)});for(let V=1;V<=this._bevelSegments;V++){let U=V/this._bevelSegments*Math.PI/2,j=(1-Math.cos(U))*this._bevelSize,z=[],Y=[],J=0;for(let X=0;X<C;X++){let te=X*2,re=(X-1+C)%C*2,se=l.vertices[D.start*2+te+0],ce=l.vertices[D.start*2+te+1],ge=-D.normals[re+0]*j,oe=-D.normals[re+1]*j,ae=-D.normals[te+0]*j,ye=-D.normals[te+1]*j;if(D.concave[X]||!D.concave[X]&&A){let we=Math.atan2(oe,ge),Se=Math.atan2(ye,ae);Se>we&&(Se-=Math.PI*2);let Pe=Se-we;if(D.continuous[X]||A){let Te=we+Pe/2,Ie=Math.cos(Te)*j,xe=Math.sin(Te)*j;z[2*J+0]=se+Ie*(A?-1:1),z[2*J+1]=ce+xe*(A?-1:1),Y[J]=X,J++}else{let Te=Math.max(1,Math.floor(i/4*Math.abs(Pe)/Math.PI));for(let Ie=0;Ie<=Te;Ie++){let xe=we+Pe*(Ie/Te),Re=Math.cos(xe)*j,N=Math.sin(xe)*j;z[2*J+0]=se+Re,z[2*J+1]=ce+N,Y[J]=X,J++}}}else z[2*J+0]=se+ge,z[2*J+1]=ce+oe,Y[J]=X,J++,z[2*J+0]=se,z[2*J+1]=ce,Y[J]=X,J++,z[2*J+0]=se+ae,z[2*J+1]=ce+ye,Y[J]=X,J++}let K=gm({windingRule:fi.POSITIVE,elementType:as.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[z],edgeCreateCallback:X=>{let te=X.Org.idx,re=Y[te],se=Y[(te+1)%Y.length];X.idx=[re,se],X.Sym.idx=[se,re]},vertexIdCallback:X=>{let te=X.Lprev.idx;return[te?te[1]:0,X.idx?X.idx[0]:0]}});if(!K)throw console.log("Error"),new Error(`error generating bevel geometry for ${V}'th loop`);if(!K.vertexCount)break;for(let X=0;X<K.vertexIndices.length;X++){let[te,re]=K.vertexIndices[X];if(te===re)continue;let se=re;re<te&&(se+=C);for(let ce=te;ce<se;ce++){let ge=ce%C,oe=(ce+1)%C;if(!D.continuous[ge]||!D.continuous[oe]){K.vertexIndices[X]=[te,ge],K.vertexIndices.splice(X+1,0,[oe,re]),K.vertices.splice((X+1)*2,0,K.vertices[X*2],K.vertices[X*2+1]);break}}}Z.push({bevelI:V,angle:U,size:j,boundary:K,reverseMap:Y,insetPoints:z})}let ee=(V,U,j)=>{let z=0,Y=V.boundary.vertexIndices.length;for(;z<Y&&j(V.boundary.vertexIndices[U]);)U=(U+1)%Y,z++;return z},F=m.length;for(let V=1;V<Z.length;V++){let U=Z[V-1],j=Z[V],z=U.boundary.vertexIndices.length,Y=j.boundary.vertexIndices.length;if(!z||!Y)break;let J=D.concave.length,K=0,X=Z5(K,C);for(;!U.boundary.vertexIndices.filter(X).length||!j.boundary.vertexIndices.filter(X).length;)K++,X=Z5(K,C);let te=U.boundary.vertexIndices.findIndex(X),re=j.boundary.vertexIndices.findIndex(X);do te=(te+1)%z;while(X(U.boundary.vertexIndices[te]));do re=(re+1)%Y;while(X(j.boundary.vertexIndices[re]));K=(K+1)%C;let se=K,ce=this._buildBevelVert(D,U,(te-1+z)%z),ge=this._buildBevelVert(D,j,(re-1+Y)%Y),oe=ce,ae=ge,ye,we,Se=!1;do{X=Z5(K,C);let Pe=ee(U,te,X),Te=ee(j,re,X),Ie=Se;if(Se=!1,Pe&&!Te){for(let xe=0;xe<Pe;xe++)ye=this._buildBevelVert(D,U,(te+xe)%z,xe/(Pe-1)),m.push(oe.topN,ye.topP,ae.topN),m.push(ye.bottomP,oe.bottomN,ae.bottomN),oe=ye;Se=!0}else if(!Pe&&Te)for(let xe=0;xe<Te;xe++)we=this._buildBevelVert(D,j,(re+xe)%Y,xe/(Te-1)),m.push(ae.topN,oe.topP,we.topP),m.push(oe.bottomP,ae.bottomN,we.bottomP),ae=we;else if(Pe&&Te)if(ye=this._buildBevelVert(D,U,te,0),we=this._buildBevelVert(D,j,re,0),Ie?(m.push(oe.topN,we.topP,ae.topN),m.push(oe.topN,ye.topP,we.topP),m.push(we.bottomP,oe.bottomN,ae.bottomN),m.push(we.bottomP,ye.bottomP,oe.bottomN)):(m.push(ae.topN,oe.topN,ye.topP),m.push(ae.topN,ye.topP,we.topP),m.push(ye.bottomP,oe.bottomN,ae.bottomN),m.push(ye.bottomP,ae.bottomN,we.bottomP)),oe=ye,ae=we,Pe===Te)for(let xe=1;xe<Pe;xe++)ye=this._buildBevelVert(D,U,(te+xe)%z,xe/(Pe-1)),we=this._buildBevelVert(D,j,(re+xe)%Y,xe/(Te-1)),m.push(oe.topN,ye.topP,ae.topN),m.push(ae.topN,ye.topP,we.topP),m.push(ye.bottomP,oe.bottomN,ae.bottomN),m.push(ye.bottomP,ae.bottomN,we.bottomP),oe=ye,ae=we;else if(Pe>Te){let xe=Pe/Te,Re=0;for(let N=1;N<Pe;N++)ye=this._buildBevelVert(D,U,(te+N)%z,N/(Pe-1)),m.push(oe.topN,ye.topP,ae.topN),m.push(ye.bottomP,oe.bottomN,ae.bottomN),oe=ye,N>(Re+1)*xe&&(Re++,we=this._buildBevelVert(D,j,(re+Re)%Y,Re/(Te-1)),m.push(ae.topN,ye.topP,we.topP),m.push(ye.bottomP,ae.bottomN,we.bottomP),ae=we)}else{let xe=Te/Pe,Re=0;for(let N=1;N<Te;N++)we=this._buildBevelVert(D,j,(re+N)%Y,N/(Te-1)),m.push(ae.topN,ye.topP,we.topP),m.push(ye.bottomP,ae.bottomN,we.bottomP),ae=we,N>(Re+1)*xe&&(Re++,ye=this._buildBevelVert(D,U,(te+Re)%z,Re/(Pe-1)),m.push(oe.topN,ye.topP,ae.topN),m.push(ye.bottomP,oe.bottomN,ae.bottomN),oe=ye)}te=(te+Pe)%z,re=(re+Te)%Y,K=(K+1)%J}while(K!==se)}if(this._buildWall(Z,D,m),A){let V=[];for(let U=m.length-1;U>=F+2;U-=3){let j=m[U-2],z=m[U-1],Y=m[U-0];V.push(Y,z,j)}m.splice(F,m.length-F,...V)}if(A){let V=[];for(let U=Z[Z.length-1].boundary.vertices.length-1;U>=1;U-=2){let j=Z[Z.length-1].boundary.vertices[U-1],z=Z[Z.length-1].boundary.vertices[U-0];V.push(j,z)}g.push(V)}if(!A){let V=Z[Z.length-1],U;try{U=gm({windingRule:Z.length>1?fi.POSITIVE:fi.ODD,elementType:as.POLYGONS,vertexSize:2,strict:!0,contours:[V.insetPoints,...g]})}catch{U=Hwe}if(!U)throw new Error("Error generating geometry for surface");a.length===0&&Object.assign(this,{capStartIndex:m.length});for(let j=0;j<U.elementCount*3;j+=3){let z=this._buildSurfaceVert(U,U.elements[j+0]),Y=this._buildSurfaceVert(U,U.elements[j+1]),J=this._buildSurfaceVert(U,U.elements[j+2]);m.push(z.top,Y.top,J.top),m.push(J.bottom,Y.bottom,z.bottom)}}this.vertexCache={}}this._buffer.shrink();let v=new on(Uint32Array.from(m),1),y=new on(this._buffer.positions,3),x=new on(this._buffer.normals,3),b=new on(this._buffer.uvs,2);y.needsUpdate=!0,x.needsUpdate=!0,b.needsUpdate=!0,v.needsUpdate=!0,this.setAttribute("position",y),this.setAttribute("normal",x),this.setAttribute("uv",b),this.setIndex(v)}_computeBufferEstimatedSize(t){return t.vertexCount*2*(2+this._bevelSegments)}_buildWall(t,e,n){let i=t[0];for(let r=0,s=i.boundary.vertexCount;r<s;r++){let o=this._buildBevelVert(e,i,r),a=this._buildBevelVert(e,i,(r+1)%s);n.push(a.topP,o.topN,o.bottomN),n.push(a.topP,o.bottomN,a.bottomP)}}_buildSurfaceVert(t,e){let n=e.toString();if(n in this.vertexCache)return this.vertexCache[n];let i=t.vertices[e*2+0],r=t.vertices[e*2+1],s=(i-this._minX)/this._width,o=(r-this._minY)/this._height,a=this._buffer.get(2),l=a*3,c=a*2,h={top:a+0,bottom:a+1};return this._buffer.positions[l+0]=i,this._buffer.positions[l+1]=r,this._buffer.positions[l+2]=this._depth,this._buffer.normals[l+0]=0,this._buffer.normals[l+1]=0,this._buffer.normals[l+2]=1,this._buffer.uvs[c+0]=s,this._buffer.uvs[c+1]=o,this._buffer.positions[l+3]=i,this._buffer.positions[l+4]=r,this._buffer.positions[l+5]=0,this._buffer.normals[l+3]=0,this._buffer.normals[l+4]=0,this._buffer.normals[l+5]=-1,this._buffer.uvs[c+2]=s,this._buffer.uvs[c+3]=o,this.vertexCache[n]=h,h}_buildBevelVert(t,e,n,i=1){let r=`${e.bevelI}:${n}`;if(r in this.vertexCache)return this.vertexCache[r];let[s,o]=e.boundary.vertexIndices[n],a,l,c,h;s!==o?(l=s,a=o,h=!1,c=t.continuous[l]&&t.continuous[a]):(a=s,l=(a-1+t.count)%t.count,h=t.concave[a]&&e.bevelI>0,c=t.continuous[a]||h);let u=Math.cos(e.angle),d=Math.sin(e.angle),f=n*2,p=a*2,m=l*2,g=e.boundary.vertices[f+0],v=e.boundary.vertices[f+1],y=(1-d)*this._bevelSize,x=(g-this._minX)/this._width,b=(v-this._minY)/this._height,S=t.normals[p+0],A=t.normals[p+1],E=t.normals[m+0],M=t.normals[m+1];if(h){let I=E-S,R=M-A;S=S+I*(1-i),A=A+R*(1-i);let H=Math.sqrt(S*S+A*A);S/=H,A/=H}let C=this._buffer.get(c?2:4),T=C*3,D=C*2,L={i:n,fi:a,topP:C+0,topN:C+0,bottomP:C+1,bottomN:C+1};return this._buffer.positions[T+0]=g,this._buffer.positions[T+1]=v,this._buffer.positions[T+2]=this._depth-y,this._buffer.normals[T+0]=S*u,this._buffer.normals[T+1]=A*u,this._buffer.normals[T+2]=d,this._buffer.uvs[D+0]=x,this._buffer.uvs[D+1]=b,this._buffer.positions[T+3]=g,this._buffer.positions[T+4]=v,this._buffer.positions[T+5]=y,this._buffer.normals[T+3]=S*u,this._buffer.normals[T+4]=A*u,this._buffer.normals[T+5]=-d,this._buffer.uvs[D+2]=b,this._buffer.uvs[D+3]=x,c||(C+=2,T+=6,D+=4,L.topP=C+0,L.bottomP=C+1,this._buffer.positions[T+0]=g,this._buffer.positions[T+1]=v,this._buffer.positions[T+2]=this._depth-y,this._buffer.normals[T+0]=E*u,this._buffer.normals[T+1]=M*u,this._buffer.normals[T+2]=d,this._buffer.uvs[D+0]=x,this._buffer.uvs[D+1]=b,this._buffer.positions[T+3]=g,this._buffer.positions[T+4]=v,this._buffer.positions[T+5]=y,this._buffer.normals[T+3]=E*u,this._buffer.normals[T+4]=M*u,this._buffer.normals[T+5]=-d,this._buffer.uvs[D+2]=b,this._buffer.uvs[D+3]=x),this.vertexCache[r]=L,L}clone(){let t=new jwe(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return t.userData=OB(this.userData),t}},Vwe=class extends Qt{constructor(t,e=12,n={}){super(),this.type="ShapeGeometry",this.windingRule=fi.ODD,this.elementType=as.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=t,this._curveSegments=e,this._triangulationOptions=Object.assign({windingRule:fi.ODD,elementType:as.POLYGONS,polySize:3,vertexSize:2,strict:!0},n);let i=this._shape.extractShapePointsToFlatArray([],this._curveSegments),r=this._shape.shapeHoles.map(d=>d.extractShapePointsToFlatArray([],this._curveSegments)),s,o=!0,a=!0,l,c;for(let d=0,f=i.length/2;d<f;d++){let p=d*2,m=i[p+0],g=i[p+1];if(l!==void 0&&m!==l&&(o=!1),c!==void 0&&g!==c&&(a=!1),l=m,c=g,!o&&!a)break}if(!o&&!a)try{s=gm({contours:[i,...r],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{s=h7}let h=(s==null?void 0:s.vertexCount)??1,u=(s==null?void 0:s.elementCount)??1;if(this._positionAttribute=new on(new Float32Array(h*3),3),this._normalAttribute=new on(new Float32Array(h*3),3),this._uvAttribute=new on(new Float32Array(h*2),2),this._indexAttribute=new on(new Uint32Array(u*3),1),s){let d=1/0,f=-1/0,p=1/0,m=-1/0;for(let y=0,x=h;y<x;y++){let b=y*2,S=s.vertices[b+0],A=s.vertices[b+1];S<d&&(d=S),S>f&&(f=S),A<p&&(p=A),A>m&&(m=A)}let g=f-d,v=m-p;for(let y=0,x=h;y<x;y++){let b=y*2,S=s.vertices[b+0],A=s.vertices[b+1],E=(S-d)/g,M=(A-p)/v;this._positionAttribute.setXYZ(y,S,A,0),this._normalAttribute.setXYZ(y,0,0,1),this._uvAttribute.setXY(y,E,M)}for(let y=0,x=u;y<x;y++){let b=y*3,S=s.elements[b+0],A=s.elements[b+1],E=s.elements[b+2];this._indexAttribute.setX(b+0,S),this._indexAttribute.setX(b+1,A),this._indexAttribute.setX(b+2,E)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((s==null?void 0:s.elementCount)??1)*3)}clone(){let t=new Vwe(this._shape,this._curveSegments);return t.userData=OB(this.userData),t}},Wwe=class extends jwe{constructor(t,e,n=0,i=12,r=3,s=fi.ODD){super(t,e,n,i,r,s),this.type="ShapeGeometry"}_computeBufferEstimatedSize(t){return t.vertexCount*2*(2+this._bevelSegments)}_buildWall(t,e,n){let i=t[0];for(let r=0,s=i.boundary.vertexCount;r<s;r++){let o=this._buildBevelVert(e,i,r),a=this._buildBevelVert(e,i,(r+1)%s);n.push(a.topP,o.topN,o.bottomN),n.push(a.topP,o.bottomN,a.bottomP)}}clone(){let t=new Wwe(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return t.userData=OB(this.userData),t}},oy=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,n){var h,u;let i=Object.assign({},(n==null?void 0:n.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:fi.ODD},e.parameters),r=Math.abs(i.width),s=Math.abs(i.height??i.width),o=Math.abs(i.depth??0),a=e.shape??(n==null?void 0:n.shape),l=(a==null?void 0:a.roundness)??i.roundness;a!==void 0&&(a instanceof Dr?(a.width!==r||a.height!==s)&&a.applySize(r,s):a=new Dr(r,s).fromJSON(a),((h=e.parameters)==null?void 0:h.roundness)!==void 0&&((u=e.parameters)==null?void 0:u.roundness)>0&&a.update());let c=a??new Dr(r,s);return{parameters:Object.assign(i,{width:r,height:s,depth:o,roundness:l}),shape:c}}static build(e){let{depth:n,extrudeBevelSize:i,extrudeBevelSegments:r,subdivisions:s,roundness:o,windingRule:a}=e.parameters;e.shape.roundness=o;let l;return n<=0?l=new Vwe(e.shape,s,{windingRule:a}):l=new Wwe(e.shape,n,i,s,r,a),Object.assign(l,{userData:{...e,type:"VectorGeometry"}})}},$we=Math.PI*2,d7=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters);return{shape:t.shape&&t.shape instanceof Dr?t.shape:new Dr,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e,height:n,spikes:i,angle:r,innerRadius:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=t.parameters,c=t.shape,h=e*.5,u=n*.5,d=ROt(c,h,u,r*Math.PI/180,i,s);c.isClosed=!0,c.update();let f=oy.create({shape:c,parameters:{subdivisions:d,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(f,{userData:{...t,type:"EllipseGeometry"}})}};function ROt(t,e,n,i,r,s){if(i>=$we)return r>30||r%4===0?(BOt(t,e,n,s),Math.round(r/4)):Kae(t,i,r,e,n,s);i=Math.max(i,.001);let o={x:0,y:n},a=i+Math.PI*.5,l={x:Math.cos(a)*e,y:Math.sin(a)*n},c=TOt({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:e,ry:n,largeArcFlag:i>Math.PI,sweepFlag:!0});return r>30||r%c.length===0?IOt(t,o.x,o.y,c,r,e,n,s):Kae(t,i,r,e,n,s)}function IOt(t,e,n,i,r,s,o,a){let l=Math.round(r/i.length);t.addPoint(gb(e,n));for(let c=0,h=i.length;c<h;c++){let u=i[c],d=t.points[c],f=gb(u.x,u.y);d.controls[1].position.set(u.x1,u.y1),f.controls[0].position.set(u.x2,u.y2),t.addPoint(f)}return a>0?qwe(t,s,o,a):t.addPoint(gb(0,0)),l}function Kae(t,e,n,i,r,s){let o=-e/n;for(let a=0;a<=n;a++){let l=o*a,c=Math.sin(l)*i,h=Math.cos(l)*r;t.addPoint(gb(c,h))}return e<$we?s>0?qwe(t,i,r,s):t.addPoint(gb(0,0)):(t.removePoint(t.points[t.points.length-1]),s>0&&Xwe(t,i,r,s)),1}function BOt(t,e,n,i=0,r=0,s=0){let o=.5522847498,a=e*o,l=n*o;t.addPoint(z3(r-e,s,r-e,s-l,r-e,s+l)),t.addPoint(z3(r,s+n,r-a,s+n,r+a,s+n)),t.addPoint(z3(r+e,s,r+e,s+l,r+e,s-l)),t.addPoint(z3(r,s-n,r+a,s-n,r-a,s-n)),i>0&&Xwe(t,e,n,i)}function gb(t,e){return new mb(Ln.generateUUID(),new Ae(t,e))}function z3(t,e,n,i,r,s){let o=gb(t,e);return o.controls[0].position.set(n,i),o.controls[1].position.set(r,s),o}function qwe(t,e,n,i){Ywe(t,e,n,i).forEach(r=>t.addPoint(r))}function Xwe(t,e,n,i){let r=Ywe(t,e,n,i),s=new Dr;r.forEach(o=>s.addPoint(o)),s.isClosed=!0,t.shapeHoles.push(s)}function Ywe(t,e,n,i){let r=i*e/100,s=r*(Math.abs(n)/Math.abs(e)),o=new Ae(r/e,s/n),a=t.points.map(l=>{let c=l.clone();return c.uuid=Ln.generateUUID(),c}).reverse();return a.forEach(l=>{l.position.multiply(o);let c=l.controls[0].position.clone().multiply(o),h=l.controls[1].position.clone().multiply(o);l.controls[0].position.copy(h),l.controls[1].position.copy(c)}),a}var kOt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},t.parameters),i=Math.abs(n.width),r=Math.abs(n.height??i),s=Math.abs(n.depth??i),o=Math.abs(Math.min(i,s))/2;return{parameters:Object.assign(n,{width:i,height:r,depth:s,radius:o,segments:Math.round(n.segments),pathSegments:Math.round(n.pathSegments),cornerSegments:Math.round(n.cornerSegments)})}}static build(t){let{width:e,height:n,depth:i,radius:r,revolutions:s,segments:o,pathRadius:a,pathType:l,pathSegments:c,cornerRadius:h,cornerSegments:u}=t.parameters,d=new f7(!1,e,n,i,r,s,o,a,l,c,h,u);return Object.assign(d,{userData:{...t,type:"HelixGeometry"}})}},f7=class extends Qt{constructor(t=!0,e=1,n=1,i=1,r=1,s=1,o=1,a=1,l=1,c=1,h=1,u=1,d=!1){super();let f=t&&s===1;f&&(u=0),h>100&&(h=100);let p=()=>new G,m=new G,g=p(),v=p(),y=p(),x,b,S,A,E,M,C,T,D=p(),L=p(),I=p(),R=p(),H=p(),Z=p(),ee=p(),F=p(),V=n-2*a+.001,U=V/s,j=Math.ceil(o*s),z=j+1,Y=V/j,J=-V/2,K=c+1,X=2*Math.PI/c,te=Math.PI/2/u,re=.01,se=Math.min((1-h/100)*a,a-re),ce=a-se,ge=0,oe=2,ae=u*oe+oe,ye=K*ae/oe,we=ye+K*z,Se=K*(z+ae),[Pe,Te,Ie]=[3,3,2].map(Xe=>Array(Se*Xe).fill(0)),xe=[],Re=r-a;function N(Xe,Ge){let We=Math.PI/2;M=Ge*Y,T=2*Math.PI*(M%U)/U+We,M+=J,C=Math.sin(T)*Re,E=Math.cos(T)*Re,t?Xe.set(E,C,M):Xe.set(E,M,C)}N(m,-1e-10),N(g,0),D.copy(m),N(m,1);let B=m.distanceTo(g),le=f?0:ce+se,_e=B*j+2*le,Ee=se,Fe=_e-le;for(let Xe=0;Xe<=j;Xe++){N(v,Xe),F.subVectors(v,D).normalize(),D.copy(v),Z.copy(v).setComponent(+t+1,0).normalize(),ee.crossVectors(F,Z).normalize();let Ge=Xe===0,We=Xe===j,Je=Ge?3*Math.PI/2:te,Qe=Ge?Ee:Fe,xt=Ge?K:we,Vt=Ge?0:Se-K,gn=F.clone().multiplyScalar(Ge?-ce:ce).add(v),ie=F.clone().multiplyScalar(Ge?-1:1).normalize();for(let ve=0;ve<K;ve++){let Ce=ve*X;if(L.addVectors(m.copy(Z).multiplyScalar(a*Math.cos(Ce)),g.copy(ee).multiplyScalar(a*Math.sin(Ce))),I.copy(L).normalize(),Ge||We){f||(ge=Vt+ve,[0,1,2].forEach(Ne=>{Pe[ge*3+Ne]=gn.getComponent(Ne),Te[ge*3+Ne]=ie.getComponent(Ne)}),Ie[ge*2]=+We,Ie[ge*2+1]=ve/c),g.copy(I).multiplyScalar(se),y.addVectors(v,g);for(let Ne=0;Ne<u;Ne++){let $e=Ne*te+Je;R.addVectors(m.copy(F).multiplyScalar(ce*Math.sin($e)),g.copy(I).multiplyScalar(ce*Math.cos($e))),H.copy(R).normalize(),g.addVectors(y,R),R.normalize(),ge=xt+Ne*K+ve,[0,1,2].forEach(rn=>{Pe[ge*3+rn]=g.getComponent(rn),Te[ge*3+rn]=H.getComponent(rn)});let Ct=+Ge+Math.sin($e);Ie[ge*2]=(Qe+ce*Ct)/_e,Ie[ge*2+1]=ve/c}}g.addVectors(v,L),ge=ye+Xe*K+ve,[0,1,2].forEach(Ne=>{Pe[ge*3+Ne]=g.getComponent(Ne),Te[ge*3+Ne]=I.getComponent(Ne)}),Ie[ge*2]=(le+Xe*B)/_e,Ie[ge*2+1]=ve/c}}let Ze=z+2*u+oe,[Ue,be]=[+f,Ze-1];d&&(be-=1);for(let Xe=Ue;Xe<=be-1;Xe++){let Ge=f&&Xe===be-1;for(let We=0;We<K-1;We++)x=Xe*K+We,b=x+1,S=(Ge?We:x)+K,A=(Ge?We+1:b)+K,Xe===0?xe.push(b,A,S):Xe===Ze-2?xe.push(x,b,S):xe.push(x,b,S,b,A,S)}this.setIndex(xe),this.setAttribute("position",new At(Pe,3)),this.setAttribute("normal",new At(Te,3)),this.setAttribute("uv",new At(Ie,2))}},FOt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,detail:0,corner:0,cornerSides:4},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,detail:r,corner:s,cornerSides:o}=t.parameters,a=r===0&&s!==0?new Kwe(e*.5,s,o):new sbe(e*.5,r);return a.scale(1,n/e,i/e),Object.assign(a,{userData:{...t,type:"IcosahedronGeometry"}})}},Kwe=class extends l7{constructor(t=1,e=.2,n=4){let i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o="IcosahedronGeometry";super(r,s,o,t,e,n),this.type=o}static fromJSON(t){return new Kwe(t.radius,t.corner,t.cornerSides)}},NOt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var i;(((i=t.parameters)==null?void 0:i.points)??[]).forEach(r=>{Array.isArray(r)&&(r.x=r[0],r.y=r[1])});let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{points:e,segments:n,verticalSegments:i}=t.parameters,r=new LL;r.moveTo(e[0].x,e[0].y),r.bezierCurveTo(e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y);let s=new Zxe(r.extractPoints(i).shape,n);return s.rotateZ(Math.PI),Object.assign(s,{userData:{...t,type:"LatheGeometry"}})}},mh=new dt,Q5=new wi,U3=new G,lR=class extends Ba{constructor(){super(),this.uuid=Ln.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(t){let e=new Eo().getNormalMatrix(t);for(let n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(t);for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n];r.normal.applyMatrix3(e).normalize();for(let s=0,o=r.vertexNormals.length;s<o;s++)r.vertexNormals[s].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(t){return mh.makeRotationX(t),this.applyMatrix4(mh),this}rotateY(t){return mh.makeRotationY(t),this.applyMatrix4(mh),this}rotateZ(t){return mh.makeRotationZ(t),this.applyMatrix4(mh),this}translate(t,e,n){return mh.makeTranslation(t,e,n),this.applyMatrix4(mh),this}scale(t,e,n){return mh.makeScale(t,e,n),this.applyMatrix4(mh),this}lookAt(t){return Q5.lookAt(t),Q5.updateMatrix(),this.applyMatrix4(Q5.matrix),this}fromBufferGeometry(t){let e=this,n=t.index!==null?t.index:void 0,i=t.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let r=i.position,s=i.normal,o=i.color,a=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<r.count;u++)e.vertices.push(new G().fromBufferAttribute(r,u)),o!==void 0&&e.colors.push(new Zt().fromBufferAttribute(o,u));function c(u,d,f,p){let m=o===void 0?[]:[e.colors[u].clone(),e.colors[d].clone(),e.colors[f].clone()],g=s===void 0?[]:[new G().fromBufferAttribute(s,u),new G().fromBufferAttribute(s,d),new G().fromBufferAttribute(s,f)],v=new Lj(u,d,f,g,m,p);e.faces.push(v),a!==void 0&&e.faceVertexUvs[0].push([new Ae().fromBufferAttribute(a,u),new Ae().fromBufferAttribute(a,d),new Ae().fromBufferAttribute(a,f)]),l!==void 0&&e.faceVertexUvs[1].push([new Ae().fromBufferAttribute(l,u),new Ae().fromBufferAttribute(l,d),new Ae().fromBufferAttribute(l,f)])}let h=t.groups;if(h.length>0)for(let u=0;u<h.length;u++){let d=h[u],f=d.start,p=d.count;for(let m=f,g=f+p;m<g;m+=3)n!==void 0?c(n.getX(m),n.getX(m+1),n.getX(m+2),d.materialIndex):c(m,m+1,m+2,d.materialIndex)}else if(n!==void 0)for(let u=0;u<n.count;u+=3)c(n.getX(u),n.getX(u+1),n.getX(u+2));else for(let u=0;u<r.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(U3).negate(),this.translate(U3.x,U3.y,U3.z),this}normalize(){this.computeBoundingSphere();let t=this.boundingSphere.center,e=this.boundingSphere.radius,n=e===0?1:1/e,i=new dt;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let t=new G,e=new G;for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n],s=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];t.subVectors(a,o),e.subVectors(s,o),t.cross(e),t.normalize(),r.normal.copy(t)}}computeVertexNormals(t=!0){let e=new Array(this.vertices.length);for(let n=0,i=this.vertices.length;n<i;n++)e[n]=new G;if(t){let n=new G,i=new G;for(let r=0,s=this.faces.length;r<s;r++){let o=this.faces[r],a=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c];n.subVectors(c,l),i.subVectors(a,l),n.cross(i),e[o.a].add(n),e[o.b].add(n),e[o.c].add(n)}}else{this.computeFaceNormals();for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n];e[r.a].add(r.normal),e[r.b].add(r.normal),e[r.c].add(r.normal)}}for(let n=0,i=this.vertices.length;n<i;n++)e[n].normalize();for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n],s=r.vertexNormals;s.length===3?(s[0].copy(e[r.a]),s[1].copy(e[r.b]),s[2].copy(e[r.c])):(s[0]=e[r.a].clone(),s[1]=e[r.b].clone(),s[2]=e[r.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){let n=this.faces[t],i=n.vertexNormals;i.length===3?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let e=0,n=this.faces.length;e<n;e++){let i=this.faces[e];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let r=0,s=i.vertexNormals.length;r<s;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}let t=new lR;t.faces=this.faces;for(let e=0,n=this.morphTargets.length;e<n;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];let r=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){let l=new G,c={a:new G,b:new G,c:new G};r.push(l),s.push(c)}}let i=this.morphNormals[e];t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let r=0,s=this.faces.length;r<s;r++){let o=this.faces[r],a=i.faceNormals[r],l=i.vertexNormals[r];a.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let e=0,n=this.faces.length;e<n;e++){let i=this.faces[e];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new cs),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Gc),this.boundingSphere.setFromPoints(this.vertices)}merge(t,e,n=0){if(!(t&&t.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);return}let i,r=this.vertices.length,s=this.vertices,o=t.vertices,a=this.faces,l=t.faces,c=this.colors,h=t.colors;e!==void 0&&(i=new Eo().getNormalMatrix(e));for(let u=0,d=o.length;u<d;u++){let f=o[u].clone();e!==void 0&&f.applyMatrix4(e),s.push(f)}for(let u=0,d=h.length;u<d;u++)c.push(h[u].clone());for(let u=0,d=l.length;u<d;u++){let f=l[u],p,m,g=f.vertexNormals,v=f.vertexColors,y=new Lj(f.a+r,f.b+r,f.c+r);y.normal.copy(f.normal),i!==void 0&&y.normal.applyMatrix3(i).normalize();for(let x=0,b=g.length;x<b;x++)p=g[x].clone(),i!==void 0&&p.applyMatrix3(i).normalize(),y.vertexNormals.push(p);y.color.copy(f.color);for(let x=0,b=v.length;x<b;x++)m=v[x],y.vertexColors.push(m.clone());y.materialIndex=f.materialIndex+n,a.push(y)}for(let u=0,d=t.faceVertexUvs.length;u<d;u++){let f=t.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,m=f.length;p<m;p++){let g=f[p],v=[];for(let y=0,x=g.length;y<x;y++)v.push(g[y].clone());this.faceVertexUvs[u].push(v)}}}mergeMesh(t){if(!(t&&t.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);return}t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)}mergeVertices(t=4){let e={},n=[],i=[],r=Math.pow(10,t);for(let a=0,l=this.vertices.length;a<l;a++){let c=this.vertices[a],h=Math.round(c.x*r)+"_"+Math.round(c.y*r)+"_"+Math.round(c.z*r);e[h]===void 0?(e[h]=a,n.push(this.vertices[a]),i[a]=n.length-1):i[a]=i[e[h]]}let s=[];for(let a=0,l=this.faces.length;a<l;a++){let c=this.faces[a];c.a=i[c.a],c.b=i[c.b],c.c=i[c.c];let h=[c.a,c.b,c.c];for(let u=0;u<3;u++)if(h[u]===h[(u+1)%3]){s.push(a);break}}for(let a=s.length-1;a>=0;a--){let l=s[a];this.faces.splice(l,1);for(let c=0,h=this.faceVertexUvs.length;c<h;c++)this.faceVertexUvs[c].splice(l,1)}let o=this.vertices.length-n.length;return this.vertices=n,o}setFromPoints(t){this.vertices=[];for(let e=0,n=t.length;e<n;e++){let i=t[e];this.vertices.push(new G(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let t=this.faces,e=t.length;for(let a=0;a<e;a++)t[a]._id=a;function n(a,l){return a.materialIndex-l.materialIndex}t.sort(n);let i=this.faceVertexUvs[0],r=this.faceVertexUvs[1],s,o;i&&i.length===e&&(s=[]),r&&r.length===e&&(o=[]);for(let a=0;a<e;a++){let l=t[a]._id;s&&s.push(i[l]),o&&o.push(r[l])}s&&(this.faceVertexUvs[0]=s),o&&(this.faceVertexUvs[1]=o)}toJSON(){let t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let p in f)f[p]!==void 0&&(t[p]=f[p]);return t}let e=[];for(let f=0;f<this.vertices.length;f++){let p=this.vertices[f];e.push(p.x,p.y,p.z)}let n=[],i=[],r={},s=[],o={},a=[],l={};for(let f=0;f<this.faces.length;f++){let p=this.faces[f],m=!0,g=!1,v=this.faceVertexUvs[0][f]!==void 0,y=p.normal.length()>0,x=p.vertexNormals.length>0,b=p.color.r!==1||p.color.g!==1||p.color.b!==1,S=p.vertexColors.length>0,A=0;if(A=c(A,0,0),A=c(A,1,m),A=c(A,2,g),A=c(A,3,v),A=c(A,4,y),A=c(A,5,x),A=c(A,6,b),A=c(A,7,S),n.push(A),n.push(p.a,p.b,p.c),n.push(p.materialIndex),v){let E=this.faceVertexUvs[0][f];n.push(d(E[0]),d(E[1]),d(E[2]))}if(y&&n.push(h(p.normal)),x){let E=p.vertexNormals;n.push(h(E[0]),h(E[1]),h(E[2]))}if(b&&n.push(u(p.color)),S){let E=p.vertexColors;n.push(u(E[0]),u(E[1]),u(E[2]))}}function c(f,p,m){return m?f|1<<p:f&~(1<<p)}function h(f){let p=f.x.toString()+f.y.toString()+f.z.toString();return r[p]!==void 0||(r[p]=i.length/3,i.push(f.x,f.y,f.z)),r[p]}function u(f){let p=f.r.toString()+f.g.toString()+f.b.toString();return o[p]!==void 0||(o[p]=s.length,s.push(f.getHex())),o[p]}function d(f){let p=f.x.toString()+f.y.toString();return l[p]!==void 0||(l[p]=a.length/2,a.push(f.x,f.y)),l[p]}return t.data={},t.data.vertices=e,t.data.normals=i,s.length>0&&(t.data.colors=s),a.length>0&&(t.data.uvs=[a]),t.data.faces=n,t}clone(){return new lR().copy(this)}copy(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;let e=t.vertices;for(let u=0,d=e.length;u<d;u++)this.vertices.push(e[u].clone());let n=t.colors;for(let u=0,d=n.length;u<d;u++)this.colors.push(n[u].clone());let i=t.faces;for(let u=0,d=i.length;u<d;u++)this.faces.push(i[u].clone());for(let u=0,d=t.faceVertexUvs.length;u<d;u++){let f=t.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,m=f.length;p<m;p++){let g=f[p],v=[];for(let y=0,x=g.length;y<x;y++){let b=g[y];v.push(b.clone())}this.faceVertexUvs[u].push(v)}}let r=t.morphTargets;for(let u=0,d=r.length;u<d;u++){let f={};if(f.name=r[u].name,r[u].vertices!==void 0){f.vertices=[];for(let p=0,m=r[u].vertices.length;p<m;p++)f.vertices.push(r[u].vertices[p].clone())}if(r[u].normals!==void 0){f.normals=[];for(let p=0,m=r[u].normals.length;p<m;p++)f.normals.push(r[u].normals[p].clone())}this.morphTargets.push(f)}let s=t.morphNormals;for(let u=0,d=s.length;u<d;u++){let f={};if(s[u].vertexNormals!==void 0){f.vertexNormals=[];for(let p=0,m=s[u].vertexNormals.length;p<m;p++){let g=s[u].vertexNormals[p],v={};v.a=g.a.clone(),v.b=g.b.clone(),v.c=g.c.clone(),f.vertexNormals.push(v)}}if(s[u].faceNormals!==void 0){f.faceNormals=[];for(let p=0,m=s[u].faceNormals.length;p<m;p++)f.faceNormals.push(s[u].faceNormals[p].clone())}this.morphNormals.push(f)}let o=t.skinWeights;for(let u=0,d=o.length;u<d;u++)this.skinWeights.push(o[u].clone());let a=t.skinIndices;for(let u=0,d=a.length;u<d;u++)this.skinIndices.push(a[u].clone());let l=t.lineDistances;for(let u=0,d=l.length;u<d;u++)this.lineDistances.push(l[u]);let c=t.boundingBox;c!==null&&(this.boundingBox=c.clone());let h=t.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}toBufferGeometry(){let t=new zOt().fromGeometry(this),e=new Qt,n=new Float32Array(t.vertices.length*3);if(e.setAttribute("position",G3.call(new on(n,3),t.vertices)),t.normals.length>0){let i=new Float32Array(t.normals.length*3);e.setAttribute("normal",G3.call(new on(i,3),t.normals))}if(t.colors.length>0){let i=new Float32Array(t.colors.length*3);e.setAttribute("color",Jae.call(new on(i,3),t.colors))}if(t.uvs.length>0){let i=new Float32Array(t.uvs.length*2);e.setAttribute("uv",Zae.call(new on(i,2),t.uvs))}if(t.uvs2.length>0){let i=new Float32Array(t.uvs2.length*2);e.setAttribute("uv2",Zae.call(new on(i,2),t.uvs2))}e.groups=t.groups;for(let i in t.morphTargets){let r=[],s=t.morphTargets[i];for(let o=0,a=s.length;o<a;o++){let l=s[o],c=new At(l.data.length*3,3);c.name=l.name,r.push(G3.call(c,l.data))}e.morphAttributes[i]=r}if(t.skinIndices.length>0){let i=new At(t.skinIndices.length*4,4);e.setAttribute("skinIndex",Qae.call(i,t.skinIndices))}if(t.skinWeights.length>0){let i=new At(t.skinWeights.length*4,4);e.setAttribute("skinWeight",Qae.call(i,t.skinWeights))}return t.boundingSphere!==null&&(e.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(e.boundingBox=t.boundingBox.clone()),e}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(t){let e=new Qt,n=t.geometry;if(t.isPoints||t.isLine){let i=new At(n.vertices.length*3,3),r=new At(n.colors.length*3,3);if(e.setAttribute("position",G3.call(i,n.vertices)),e.setAttribute("color",Jae.call(r,n.colors)),n.lineDistances&&n.lineDistances.length===n.vertices.length){let s=new At(n.lineDistances.length,1);e.setAttribute("lineDistance",UOt.call(s,n.lineDistances))}n.boundingSphere!==null&&(e.boundingSphere=n.boundingSphere.clone()),n.boundingBox!==null&&(e.boundingBox=n.boundingBox.clone())}else t.isMesh&&(e=n.toBufferGeometry());return e}};lR.prototype.isGeometry=!0;var zOt=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){let e=[],n,i,r,s=t.faces;for(i=0;i<s.length;i++){let o=s[i];o.materialIndex!==r&&(r=o.materialIndex,n!==void 0&&(n.count=i*3-n.start,e.push(n)),n={start:i*3,materialIndex:r})}n!==void 0&&(n.count=i*3-n.start,e.push(n)),this.groups=e}fromGeometry(t){let e=t.faces,n=t.vertices,i=t.faceVertexUvs,r=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,o=t.morphTargets,a=o.length,l;if(a>0){l=[];for(let g=0;g<a;g++)l[g]={name:o[g].name,data:[]};this.morphTargets.position=l}let c=t.morphNormals,h=c.length,u;if(h>0){u=[];for(let g=0;g<h;g++)u[g]={name:c[g].name,data:[]};this.morphTargets.normal=u}let d=t.skinIndices,f=t.skinWeights,p=d.length===n.length,m=f.length===n.length;n.length>0&&e.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<e.length;g++){let v=e[g];this.vertices.push(n[v.a],n[v.b],n[v.c]);let y=v.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{let b=v.normal;this.normals.push(b,b,b)}let x=v.vertexColors;if(x.length===3)this.colors.push(x[0],x[1],x[2]);else{let b=v.color;this.colors.push(b,b,b)}if(r===!0){let b=i[0][g];b!==void 0?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new Ae,new Ae,new Ae))}if(s===!0){let b=i[1][g];b!==void 0?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new Ae,new Ae,new Ae))}for(let b=0;b<a;b++){let S=o[b].vertices;l[b].data.push(S[v.a],S[v.b],S[v.c])}for(let b=0;b<h;b++){let S=c[b].vertexNormals[g];u[b].data.push(S.a,S.b,S.c)}p&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),m&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this}},Lj=class{constructor(t,e,n,i,r,s=0){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new G,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new Zt,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(let e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}};function UOt(t){return this.array.set(t),this}function Jae(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new Zt),e[n++]=s.r,e[n++]=s.g,e[n++]=s.b}return this}function Zae(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new Ae),e[n++]=s.x,e[n++]=s.y}return this}function G3(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new G),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z}return this}function Qae(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new Sn),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z,e[n++]=s.w}return this}var GOt=["a","b","c"];function HOt(t,e){switch(e){case"c":return t.c;case"b":return t.b;case"a":default:return t.a}}function ez(t,e,n){let i=Math.min(t,e),r=Math.max(t,e),s=i+"_"+r;return n.get(s)}function tz(t,e,n,i,r,s){let o=Math.min(t,e),a=Math.max(t,e),l=o+"_"+a,c;if(i.has(l))c=i.get(l);else{let h=n[o],u=n[a];c={a:h,b:u,newEdge:null,faces:[]},i.set(l,c)}c.faces.push(r),s[t].edges.push(c),s[e].edges.push(c)}function jOt(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;r++)n[r]={edges:[]};for(r=0,s=e.length;r<s;r++)o=e[r],tz(o.a,o.b,t,i,o,n),tz(o.b,o.c,t,i,o,n),tz(o.c,o.a,t,i,o,n)}function H3(t,e,n,i,r){t.push(new Lj(e,n,i,void 0,void 0,r))}function w1(t,e){return Math.abs(e-t)/2+Math.min(t,e)}function j3(t,e,n,i){t.push([e.clone(),n.clone(),i.clone()])}var VOt=class{constructor(t=1){this.subdivisions=t}modify(t){t instanceof Qt?t=new lR().fromBufferGeometry(t):t=t.clone(),t.mergeVertices();let e=this.subdivisions;for(;e-- >0;)this._smooth(t);return t.computeFaceNormals(),t.computeVertexNormals(),t}_smooth(t){let e=new G,n,i,r,s,o,a=t.vertices,l=t.faces,c=t.faceVertexUvs[0],h=c!==void 0&&c.length>0,u=[],d=new Map;jOt(a,l,u,d);let f=[],p,m,g,v,y,x,b;for(let te of Array.from(d.keys())){for(m=d.get(te),g=new G,y=3/8,x=1/8,b=m.faces.length,b!=2&&(y=.5,x=0,b!=1),g.addVectors(m.a,m.b).multiplyScalar(y),e.set(0,0,0),s=0;s<b;s++){for(v=m.faces[s],o=0;o<3&&(p=a[HOt(v,GOt[o])],!(p!==m.a&&p!==m.b));o++);p&&e.add(p)}e.multiplyScalar(x),g.add(e),m.newEdge=f.length,f.push(g)}let S,A,E,M,C,T,D,L=[];for(i=0,r=a.length;i<r;i++){for(T=a[i],C=u[i].edges,n=C.length,n==3?S=3/16:n>3&&(S=3/(8*n)),A=1-n*Number(S),E=S,n<=2&&(n==2?(A=3/4,E=1/8):n==1||n==0),D=T.clone().multiplyScalar(A),e.set(0,0,0),s=0;s<n;s++)M=C[s],p=M.a!==T?M.a:M.b,e.add(p);e.multiplyScalar(Number(E)),D.add(e),L.push(D)}let I=L.concat(f),R=L.length,H,Z,ee,F=[],V=[],U,j,z,Y,J=new Ae,K=new Ae,X=new Ae;for(i=0,r=l.length;i<r;i++)v=l[i],H=Number(ez(v.a,v.b,d).newEdge)+R,Z=Number(ez(v.b,v.c,d).newEdge)+R,ee=Number(ez(v.c,v.a,d).newEdge)+R,H3(F,H,Z,ee,v.materialIndex),H3(F,v.a,H,ee,v.materialIndex),H3(F,v.b,Z,H,v.materialIndex),H3(F,v.c,ee,Z,v.materialIndex),h&&(U=c[i],j=U[0],z=U[1],Y=U[2],J.set(w1(j.x,z.x),w1(j.y,z.y)),K.set(w1(z.x,Y.x),w1(z.y,Y.y)),X.set(w1(j.x,Y.x),w1(j.y,Y.y)),j3(V,J,K,X),j3(V,j,J,X),j3(V,z,K,J),j3(V,Y,X,K));t.vertices=I,t.faces=F,h&&(t.faceVertexUvs[0]=V)}},ps=new G,WOt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=t.geometry??(e==null?void 0:e.geometry)??new Qt().copy(new rd(100,100,100)),i;e===void 0?(n.computeBoundingBox(),n.boundingBox.getSize(ps),i={width:ps.x,height:ps.y,depth:ps.z,subdivisions:0}):i=e.parameters;let r={...i,...t.parameters};return{parameters:{width:Math.abs(r.width),height:Math.abs(r.height),depth:Math.abs(r.depth),subdivisions:Math.abs(r.subdivisions)},geometry:n}}static build(t){let{width:e,height:n,depth:i,subdivisions:r}=t.parameters,s=t.geometry??new Qt().copy(new rd(100,100,100)),o=s.userData.parameters;o===void 0?(s.computeBoundingBox(),s.boundingBox.getSize(ps)):ps.set(o.width,o.height,o.depth),(e!==ps.x||n!==ps.y||i!==ps.z)&&s.scale(ps.x===0?1:e/ps.x,ps.y===0?1:n/ps.y,ps.z===0?1:i/ps.z);let a=s.originalGeometry;return r>0?(a===void 0||(o==null?void 0:o.subdivisions)!==r)&&(a===void 0&&(a=s),s=new VOt(r).modify(a).toBufferGeometry()):(a!==void 0&&(s=a),a=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals()),a!==void 0&&Object.assign(s,{originalGeometry:a}),delete t.geometry,Object.assign(s,{userData:{...t,type:"NonParametricGeometry"}})}static loadFromUrl(t,e,n){new lbe(n).load(t,i=>{let r=this.normalizeInputs({geometry:i});i.boundingBox.getSize(ps);let s=100/ps.x;Object.assign(r.parameters,{width:100,height:ps.y*s,depth:ps.z*s}),e(this.build(r))})}},Jwe=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},t.parameters);return{shape:t.shape&&t.shape instanceof Dr?t.shape:new Dr,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e,height:n,spikes:i,cornerRadius:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}=t.parameters,l=t.shape,c=e*.5,h=n*.5,u=0,d=0,f=2*Math.PI/i;for(let m=0;m<i;m++){let g=f*m,v=u+Math.sin(g)*c,y=d+Math.cos(g)*h;l.addPoint(l.createPoint(v,y))}l.isClosed=!0;for(let m=0,g=l.points.length;m<g;m++)l.points[m].roundness=r;l.roundness=r,l.update();let p=oy.create({shape:l,parameters:{roundness:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}});return Object.assign(p,{userData:{...t,type:"PolygonGeometry"}})}},$Ot=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,radialSegments:r,heightSegments:s,openEnded:o,cornerRadius:a,cornerSegments:l}=t.parameters,c=new XOt(e*.5,n,r,s,o,a,l);return c.scale(1,1,i/e),Object.assign(c,{userData:{...t,type:"PyramidGeometry"}})}};function XS(t,e,n){n.x=t.x*e.x,n.y=t.y,n.z=t.x*e.y}function nz(t,e,n,i,r,s){let o=e.clone().sub(t),a=n.clone().sub(t),l=o.angleTo(a);if(o.normalize(),a.normalize(),i===r){let c=o.add(a).normalize();s.copy(t).addScaledVector(c,i/Math.sin(l/2))}else{let c=o.angleTo(a);s.copy(t),s.addScaledVector(o,r/Math.sin(c)),s.addScaledVector(a,i/Math.sin(c))}}function qOt(t,e,n){let i=t.clone().sub(e),r=n.clone().sub(e);return i.projectOnVector(r),i.add(e)}var XOt=class extends Qt{constructor(t=.5,e=1,n=4,i=1,r=!1,s=0,o=4){super(),n=Math.floor(Math.max(3,n)),i=Math.floor(i),o=Math.floor(o);let a=[],l=[],c=[],h=[],u=0,d=e/2,f=Math.PI/n,p=t*Math.cos(Math.PI/n),m=2*Math.PI/n,g=(n-2)*Math.PI/n,v=Math.PI-g,y=new G(0,-d,0),x=new G(0,d,0),b=new Ae(t,-d),S=new Ae(p,-d),A=new Ae(0,x.y).sub(S),E=new Ae(0,x.y).sub(b),M=new Ae(A.y,-A.x).normalize(),C=new Ae(E.y,-E.x).normalize(),T=t*Math.cos(Math.PI/n)*Math.tan((Math.PI-A.angle())/2)-1e-8;s=Math.min(s,T);let D;{let ee=new G(M.x,M.y,0),F=new G(Math.cos(m)*ee.x,ee.y,Math.sin(m)*ee.x);D=ee.angleTo(F)}let L=s/Math.tan((Math.PI-A.angle())/2),I=s/Math.tan((Math.PI-D)/2),R=new G;if(!r){l.push(y.x,y.y,y.z),c.push(0,-1,0),h.push(0,0);let ee=u++,F=[],V=b.clone(),U=L/Math.cos(Math.PI/n);V.x-=U;for(let j=0;j<n;j++){let z=j/n*Math.PI*2+f,Y=new Ae(Math.sin(z),Math.cos(z));XS(V,Y,R),l.push(R.x,R.y,R.z),c.push(0,-1,0),h.push(0,0),F.push(u++)}for(let j=0;j<F.length;j++)a.push(F[j],ee,F[(j+1)%F.length])}{let ee=new G,F=new G,V=new G,U=new G,j=new G,z=new G;for(let Y=0;Y<n;Y++){let J=Y/n*Math.PI*2+f,K=(Y+.5)/n*Math.PI*2+f,X=(Y+1)/n*Math.PI*2+f,te=new Ae(Math.sin(J),Math.cos(J)),re=new Ae(Math.sin(K),Math.cos(K)),se=new Ae(Math.sin(X),Math.cos(X));XS(b,te,F),XS(b,se,V),XS(M,re,ee),nz(x,F,V,I,I,U),l.push(U.x,U.y,U.z),nz(F,x,V,I,L,j),l.push(j.x,j.y,j.z),nz(V,F,x,L,I,z),l.push(z.x,z.y,z.z),c.push(ee.x,ee.y,ee.z),c.push(ee.x,ee.y,ee.z),c.push(ee.x,ee.y,ee.z),h.push(0,0),h.push(0,0),h.push(0,0);let ce=u++,ge=u++,oe=u++;if(a.push(ce,ge,oe),s>0){{let we=F.clone().add(V).multiplyScalar(.5),Se=x.clone().sub(we).normalize(),Pe=y.clone().sub(we).normalize().add(Se).normalize().multiplyScalar(-1),Te=z.clone().sub(j);H(we,Te,Pe,A.angle())}let ae,ye;{let we=new G;XS(C,se,we);let Se=z.clone().add(U).multiplyScalar(.5);Se=qOt(Se,V,x);let Pe=z.clone().sub(U);[ae,ye]=H(Se,Pe,we,D,U.y)}{let we=ae,Se=we.clone().setY(0).normalize(),Pe=new G(0,-1,0),Te=Se.clone().cross(Pe);Z(we,Se,Pe,Te)}{let we=A.angle(),Se=Math.PI-we,Pe=x.clone();Pe.y-=s/Math.sin(we-Math.PI/2);let Te=new G,Ie=[];for(let Re=0;Re<o;Re++){let N=[],B=Math.PI/2-Se*Re/o,le=Math.cos(B),_e=Math.sin(B),Ee=K;for(let Fe=0;Fe<=Re;Fe++){let Ze=Math.cos(Ee),Ue=Math.sin(Ee);ee.x=le*Ue,ee.y=_e,ee.z=le*Ze,Te.copy(Pe).addScaledVector(ee,s),l.push(Te.x,Te.y,Te.z),c.push(ee.x,ee.y,ee.z),h.push(0,0),N.push(u++),Ee+=Math.PI*2/Re/n}Ie.push(N)}ye.reverse(),Ie.push(ye);let xe=Ie.length-1;for(let Re=0;Re<xe;Re++){let N=Ie[Re],B=Ie[Re+1],le=N.length-1;a.push(B[1],N[0],B[0]);for(let _e=1;_e<=le;_e++)a.push(N[_e],N[_e-1],B[_e]),a.push(B[_e+1],N[_e],B[_e])}}}}}this.setIndex(a),this.setAttribute("position",new At(l,3)),this.setAttribute("normal",new At(c,3)),this.setAttribute("uv",new At(h,2));function H(ee,F,V,U,j){let z=-U/2,Y=(Math.PI-U)/2,J=F.clone().normalize().cross(V);ee.addScaledVector(V,-s/Math.sin(Y));let K=new G,X=new G,te=1,re=u,se=[];for(let ce=0;ce<=o;ce++){let ge=z+ce/o*U;X.set(0,0,0),X.addScaledVector(J,Math.sin(ge)),X.addScaledVector(V,Math.cos(ge));for(let oe=0;oe<=te;oe++){let ae=oe/te-.5;if(K.copy(ee),K.addScaledVector(F,ae),K.addScaledVector(X,s),j!=null){let ye=Math.max(0,K.y-j);K.addScaledVector(F,-ye/F.y)}l.push(K.x,K.y,K.z),c.push(X.x,X.y,X.z),h.push(0,0),oe===0&&se.push(u),u++}}for(let ce=0;ce<o;ce++)for(let ge=0;ge<te;ge++){let oe=re+ge+(te+1)*ce,ae=oe+(te+1),ye=ae+1,we=oe+1;a.push(oe,ae,we),a.push(ae,ye,we)}return[ee.clone().addScaledVector(F,.5),se]}function Z(ee,F,V,U){let j=Math.PI/2,z=E.angle()-j,Y=[],J=new G,K=new G;for(let te=0;te<=o;te++){let re=[],se=te/o;for(let ce=0;ce<=te;ce++){let ge=((te?ce/te:0)-.5)*v,oe=Math.cos(ge),ae=Math.sin(ge),ye=Math.atan(Math.tan(z)*oe),we=(j+ye)*se,Se=Math.cos(we),Pe=Math.sin(we);J.set(0,0,0),J.addScaledVector(F,Pe*oe),J.addScaledVector(V,Se),J.addScaledVector(U,Pe*ae),K.copy(ee).addScaledVector(J,s),l.push(K.x,K.y,K.z),c.push(J.x,J.y,J.z),h.push(0,0),re.push(u++)}Y.push(re)}let X=Y.length-1;for(let te=0;te<X;te++){let re=Y[te],se=Y[te+1],ce=re.length-1;a.push(re[0],se[1],se[0]);for(let ge=1;ge<=ce;ge++)a.push(re[ge-1],re[ge],se[ge]),a.push(re[ge],se[ge+1],se[ge])}}}},Zwe=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters),i=Object.assign((e==null?void 0:e.ui)??{enabledIndieCorners:!1},t.ui);return{shape:t.shape&&t.shape instanceof Dr?t.shape:new Dr,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)}),ui:i}}static build(t){let e=t.shape,{width:n,height:i,cornerRadius:r,cornerType:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=t.parameters,c={x:n*.5,y:i*.5},h={x:-c.x,y:-c.y},u={x:c.x,y:c.y};function d(b,S,A){return S>n&&A>i?Math.min(b*n/S,b*i/A):S>n?b*n/S:A>i?b*i/A:b}let f=[];f[0]=r[0]===0?0:d(r[0],r[0]+r[3],r[0]+r[1]),f[1]=r[1]===0?0:d(r[1],r[1]+r[2],r[1]+r[0]),f[2]=r[2]===0?0:d(r[2],r[2]+r[1],r[2]+r[3]),f[3]=r[3]===0?0:d(r[3],r[3]+r[0],r[3]+r[2]);let p=h.x,m=u.x,g=u.y,v=h.y;e.addPoint(e.createPoint(p,g)),e.addPoint(e.createPoint(m,g)),e.addPoint(e.createPoint(m,v)),e.addPoint(e.createPoint(p,v)),e.isClosed=!0;let y=!0;for(let b=0,S=e.points.length;b<S;b++)e.points[b].roundness=f[b],b>0&&f[b]!==f[b-1]&&(y=!1);y&&(e.roundness=f[0]),e.useCubicForRoundedCorners=s!==1,e.update();let x=oy.create({shape:e,parameters:{depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(x,{userData:{...t,type:"RectangleGeometry"}})}},YOt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e=100,height:n=e,depth:i=e,widthSegments:r=64,heightSegments:s=64,phiStart:o,phiLength:a,thetaStart:l,thetaLength:c}=t.parameters,h=new T$(.5*e,r,s,o,a,l,c);return h.scale(1,n/e,i/e),Object.assign(h,{userData:{...t,type:"SphereGeometry"}})}},KOt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:0})}}static build(t){let{width:e=100,height:n=e,widthSegments:i=8,heightSegments:r=8}=t.parameters,s=new wB(e,n,i,r);return s.scale(1,1,1),Object.assign(s,{userData:{...t,type:"PlaneGeometry"}})}},JOt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,angle:r,cornerRadius:s,cornerSegments:o}=t.parameters,a=new ZOt(e,n,i,r,s,o);return Object.assign(a,{userData:{...t,type:"BackdropGeometry"}})}},ZOt=class extends Qt{constructor(t=1,e=1,n=1,i=90,r=10,s=24){super(),this.type="BackdropGeometry";let o=[],a=[],l=[],c=.001;r==0&&(s=1),s=Math.max(1,Math.floor(s)),r=Math.min(r,100),i=Math.min(180-c,i),i*=Math.PI/180;let h=[],u=Math.PI/2,d=(te=0,re=0,se=0)=>new G(te,re,se),f=d(),p=d(),[m,g,v]=[e/2,t/2,n/2],y=-g,x=+g,[b,S,A]=[d(y,-m,+v),d(y,-m,-v),d(y,+m,-v)],E=(te,re=!1)=>Math.sin(te-Math.PI/(1+ +re)),M=(te,re=!1)=>Math.cos(te-Math.PI/(1+ +re));A.y=Math.sin(i)*e-m;let C=Math.cos(i)*e-v,T=b.z-c;i<=u?(A.z=Math.min(C,T),A.z==T&&(A.y-=(C-T)/Math.tan(u-i))):S.z=Math.min(S.z-C-v,b.z-c),f.subVectors(b,S),p.subVectors(A,S);let D=Math.min(f.length(),p.length())*r/100,L=D*Math.tan(i/2),I=D/Math.cos(i/2),R=f.clone().normalize().add(p.normalize()).setLength(I).add(S);f.set(0,E(i,!0),M(i,!0)),h.push([A,f.clone()]);let H=(Math.PI-i)/s;for(let te=0;te<=s;te++){let re=u+i+te*H;f.set(0,Math.sin(re)*L,Math.cos(re)*L),f.add(R),p.set(0,E(re),M(re)),h.push([f.clone(),p.clone()])}h.push([b,d(0,1,0)]);let Z=Math.sin(H/2)*L*2,ee=h.length-1,F=h[0][0].distanceTo(h[1][0]),V=h[ee-1][0].distanceTo(h[ee][0]),U=F+Z*s+V;h[0].push(1);for(let te=0;te<=s;te++)h[te+1].push(1-(F+te*Z)/U);h[ee].push(0);let[j,z,Y]=h[0],J,K,X;for(let te=1;te<h.length;te++)[J,K,X]=h[te],o.push(y,j.y,j.z,y,J.y,J.z,x,j.y,j.z,x,j.y,j.z,y,J.y,J.z,x,J.y,J.z),a.push(0,z.y,z.z,0,K.y,K.z,0,z.y,z.z,0,z.y,z.z,0,K.y,K.z,0,K.y,K.z),l.push(0,Y,0,X,1,Y,1,Y,0,X,1,X),[j,z,Y]=[J,K,X];this.setAttribute("position",new At(o,3)),this.setAttribute("normal",new At(a,3)),this.setAttribute("uv",new At(l,2))}},Qwe=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters);return{shape:t.shape&&t.shape instanceof Dr?t.shape:new Dr,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e,height:n,innerRadiusPercent:i,spikes:r,cornerRadius:s,angle:o,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}=t.parameters,h=t.shape,u=e*.5,d=n*.5,f=0,p=0,m=o*Math.PI/360/r,g=Math.PI/2*3*-1,v=u*i/100,y=d*i/100;if(r===3&&i===50){m=2*Math.PI/r;for(let b=0;b<r;b++){let S=m*b,A=f+Math.sin(S)*u,E=p+Math.cos(S)*d;h.addPoint(h.createPoint(A,E))}}else for(let b=0;b<r;b++){let S=f+Math.cos(g)*u,A=p+Math.sin(g)*d;h.addPoint(h.createPoint(S,A)),g+=m,S=f+Math.cos(g)*v,A=p+Math.sin(g)*y,h.addPoint(h.createPoint(S,A)),g+=m}h.isClosed=!0;for(let b=0,S=h.points.length;b<S;b++)h.points[b].roundness=s;h.roundness=s,h.update();let x=oy.create({shape:h,parameters:{roundness:s,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(x,{userData:{...t,type:"StarGeometry"}})}},QOt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e,height:n}=t.parameters,i=new wB(e,n);return Object.assign(i,{userData:{...t,type:"TextFrameGeometry"}})}},eLt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},t.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),s=Math.round(Math.abs(n.depth??n.width*.25));return{parameters:Object.assign(n,{width:i,height:r,depth:s})}}static build(t){let{width:e,height:n,depth:i,radialSegments:r,tubularSegments:s,arc:o,cornerRadius:a,cornerSegments:l}=t.parameters,c=tLt(e,n,i,e*.5,o,s,0,0,r,a,l);return c.scale(1,n/e,1),Object.assign(c,{userData:{...t,type:"TorusGeometry"}})}};function tLt(t,e,n,i,r,s,o,a,l,c,h){return[e,n]=[n,e],o=e/2,r/=2*Math.PI,r==1&&(c=0),new f7(!0,t,e,n,i,r,s,o,a,l,c,h)}var nLt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),tube:n.tube??n.width*.125})}}static build(t){let{width:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o}=t.parameters,a=e*.5;a!==n&&(a-=n);let l=new obe(a,n,i,r,s,o);return Object.assign(l,{userData:{...t,type:"TorusKnotGeometry"}})}},iLt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},t.parameters);return{shape:t.shape&&t.shape instanceof Dr?t.shape:new Dr,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width*(n.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e=100,height:n,cornerRadius:i,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o,isRect:a}=t.parameters,l=t.shape,c=e*.5,h=n*.5;a?(l.addPoint(l.createPoint(-c,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))):(l.addPoint(l.createPoint(0,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))),l.isClosed=!0;for(let d=0,f=l.points.length;d<f;d++)l.points[d].roundness=i;l.roundness=i,l.update();let u=oy.create({shape:l,parameters:{roundness:i,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o}});return Object.assign(u,{userData:{...t,type:"TriangleGeometry"}})}};function rLt(t,e){let n=2*Math.PI;return(t%n+n)%n===(e%n+n)%n}function sLt(t,e,n){let i=[new G,new G,new G],r=[new G,new G,new G];return t.extractBasis(i[0],i[1],i[2]),e.extractBasis(r[0],r[1],r[2]),i.forEach((s,o)=>{let a=r[o],l=Ln.lerp(s.length(),a.length(),n);s.lerp(a,n).setLength(l)}),new dt().makeBasis(i[0],i[1],i[2])}var oLt=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},t.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),s=Math.abs(n.depth??0),o=(e==null?void 0:e.shapeData)??d7.create({parameters:wwe}).userData.shape;return{path:t.path??YL.defaultData(),parameters:Object.assign(n,{width:i,height:r,depth:s,extrusion:{..._we,...n.extrusion}}),shapeData:o}}static build(t){if(t.path.points.length>=2){let e=new aLt(t);return Object.assign(e,{userData:{...t,type:"PathGeometry"}})}else return Object.assign(new Qt,{userData:{...t,type:"PathGeometry"}})}},aLt=class extends Qt{constructor(t){super(),this.type="PathExtrusionGeometry",this.inputs=t,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let t=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&t.depth===1)||!rLt(t.twist,0)||t.startScale!==t.endScale}build(){let t=this._extractPathPoints();if(t.length<2)return;let e=this._computeBasisMatrices(t),{depth:n,offset:i}=this.inputs.parameters.extrusion,r=this.inputs.path.isClosed?t.length:t.length-1,s=Math.floor(i*r),o=this.inputs.path.isClosed?Math.ceil((n+i)*r):Math.ceil(Math.min(1,n+i)*r),a=Math.min(Math.max(2,o-s+1),r+2),l=[],c=[];for(let T=0;T<a;T++){let D=this.inputs.path.isClosed?(T+s)%t.length:Math.min(T+s,t.length-1);l.push(t[D].clone()),c.push(e[D].clone())}let h=(T,D,L)=>{l[T]=l[T].clone().lerp(l[D],L),c[T]=sLt(c[T],c[D],L)},u=0,d=i*r%1;(!this.inputs.path.isClosed||n<=1)&&(d||i===0)&&(u=d,h(0,1,u));let f=0,p=(i+n)*r%1;if((this.inputs.path.isClosed&&n<=1||!this.inputs.path.isClosed&&i+n<1)&&p&&(f=p,h(l.length-1,l.length-2,1-f)),n===0){let T=l.length-1;l[T].copy(l[0]),c[T].copy(c[0])}this._applyPathModifiers(c,u,f);let{regions:m,infos:g,vertices:v}=this._computeShapePoints(5),y=0,x=0;g.sort((T,D)=>T.start-D.start),g.forEach(T=>{T.verticesStart=y,T.verticesCount=T.continuous.reduce((D,L,I)=>D+(I===0||!L?2:1),0),x+=T.verticesCount,y=x});let b=x*a,S,A=0;if(this._isOpenEnded()){try{S=gm({windingRule:fi.ODD,elementType:as.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:m})}catch{S=Hwe}A=S.vertexCount}let E=b+2*A,M={positions:new Float32Array(E*3),normals:new Float32Array(E*3),uvs:new Float32Array(E*2)},C=[];g.forEach(T=>{this._extrudeRegion(T,v,c,l,M,C,this._isGeometryClosed()&&!this._isOpenEnded())}),S&&(this._closeEnd(S,b,C,M,c[0],l[0],!1),this._closeEnd(S,b+A,C,M,c[c.length-1],l[l.length-1],!0)),this.setAttribute("position",new on(M.positions,3)),this.setAttribute("normal",new on(M.normals,3)),this.setAttribute("uv",new on(M.uvs,2)),this.setIndex(C)}_extractPathPoints(){let t=Rwe(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(t.length<2)return[];let e=[t[0]];return t.forEach(n=>{e[e.length-1].distanceToSquared(n)>.001&&e.push(n)}),this.inputs.path.isClosed&&e[e.length-1].distanceTo(e[0])<.001&&e.pop(),e}_computeBasisMatrices(t){let e=[],n=t.length,i=this.inputs.path.isClosed,r=new G,s=new G,o=new G,a=new G,l=new G(0,1,0);for(let p=0;p<n;p++){let m=t[p],g;p===0?g=i?t[t.length-2]:m.clone().multiplyScalar(2).sub(t[1]):g=t[p-1];let v;p===n-1?v=i?t[1]:m.clone().multiplyScalar(2).sub(t[p-1]):v=t[p+1];let y=m.clone().sub(g).normalize(),x=v.clone().sub(m).normalize(),b=y.clone().add(x).normalize();o.copy(b),p===0&&(b.equals(l)||b.clone().negate().equals(l))&&l.set(0,0,1);let S=l.clone().cross(b).normalize(),A=b.clone().cross(S).normalize();l.copy(A),a.copy(S),p===0&&(r.copy(A),s.copy(b));let E=new dt().makeBasis(S,A,b);e.push(E)}let c=i?s:o,h=i?r:new G(0,1,0),u=c.clone().cross(a).normalize(),d=Math.acos(h.dot(u));if(isNaN(d))return e;let f=h.clone().cross(u);c.dot(f)>0&&(d*=-1);for(let p=1;p<e.length;p++){let m=new dt().makeRotationZ(d*p/e.length);e[p].multiply(m)}return e}_applyPathModifiers(t,e,n){let i=t.length,{angle:r,twist:s,startScale:o,endScale:a}=this.inputs.parameters.extrusion,l=new dt,c=new dt;return t.forEach((h,u)=>{let d=u===0?0:u===i-1?1:(u-e)/(i-(n===0?0:1)-(e+(1-n)));l.makeRotationZ(Ln.lerp(r,r+s,d));let f=Ln.lerp(o,a,d);c.makeScale(f,f,f),h.multiply(l).multiply(c)}),t}_computeShapePoints(t=12,e=fi.ODD){let n=this.inputs.shapeData,i=n.extractShapePointsToFlatArray([],t),r=n.shapeHoles.map(c=>{let h=c.extractShapePointsToFlatArray([],t),u=[];for(let d=h.length-1;d>=1;d-=2){let f=h[d-1],p=h[d-0];u.push(f,p)}return u}),s;try{s=gm({windingRule:e,elementType:as.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[i]})}catch{s=h7}let o;try{o=gm({windingRule:fi.ODD,elementType:as.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...r]})}catch{o=Gwe}if(!s)throw new Error("error generating geometry");let a=s.elementCount;if(o){s.elementCount+=o.elementCount;for(let c=0;c<o.elements.length;c++){let h=o.elements[c],u=c%2===0?s.vertexCount:0;s.elements.push(h+u)}for(let c=0;c<o.vertexIndices.length;c++){let h=o.vertexIndices[c],u=s.vertexCount;s.vertexIndices.push(h+u)}for(let c=0;c<o.vertices.length;c++){let h=o.vertices[c];s.vertices.push(h)}}for(let c=0,h=s.vertexCount;c<h;c++){let u=c*2;s.vertices[u+0],s.vertices[u+1]}let l=[];for(let c=s.elementCount-1;c>=0;c--){let h=c>=a,u=c*2,d=s.elements[u+0],f=s.elements[u+1],p=d+f,m={start:d,count:f,normals:[],isHole:h,continuous:[],verticesStart:0,verticesCount:0};l.push(m);let g=d,v=p-1,y=d+1,x=n.roundedCurves.length;do{let b=g-d;s.vertices[v*2+0],s.vertices[v*2+1];let S=s.vertices[g*2+0],A=s.vertices[g*2+1],E=s.vertices[y*2+0],M=s.vertices[y*2+1],C=S-E,T=A-M,D=Math.sqrt(C*C+T*T);C/=D,T/=D,m.normals[b*2+0]=-T,m.normals[b*2+1]=C;let L=s.vertexIndices[g];if(Array.isArray(L))m.continuous[b]=!1;else{let[I,R]=n.getCurveIndexFromVertexId(L-1,!0);if(R>0&&R<1)m.continuous[b]=!0;else{let H=R===1?I+1:I-1;H=(H+x)%x;let Z=R===1?0:1,ee=n.roundedCurves[I].getTangent(R),F=n.roundedCurves[H].getTangent(Z);m.continuous[b]=ee.dot(F)>.95}}h&&(m.normals[b*2+0]*=-1,m.normals[b*2+1]*=-1),[v,g,y]=[g,y,y+1],y>=p&&(y-=f)}while(y!==d+1)}return{regions:[i,...r],infos:l,vertices:s.vertices}}_insertVertex(t,e,n,i,r){let s=e*2,o=e*3;t.positions[o+0]=n.x,t.positions[o+1]=n.y,t.positions[o+2]=n.z,t.normals[o+0]=i.x,t.normals[o+1]=i.y,t.normals[o+2]=i.z,t.uvs[s+0]=r.x,t.uvs[s+1]=r.y}_extrudeRegion(t,e,n,i,r,s,o){let a=new G,l=new G,c=new G,h=new G,u=new Ae;n.forEach((f,p)=>{let m=i[p],g=t.verticesStart*n.length+t.verticesCount*p;for(let v=0;v<t.count;v++){let y=(t.start+v)*2;if(a.set(e[y+0],e[y+1],0),c.copy(a).applyMatrix4(f).add(m),t.continuous[v])h.set(t.normals[v*2+0],t.normals[v*2+1],0);else{let x=v==0?(t.start+t.count-1)*2:y-2;l.set(e[x+0],e[x+1],0),h.copy(a).sub(l),h.set(-h.y,h.x,0),t.isHole||h.negate()}if(h.applyMatrix4(f).normalize(),u.set(v===0?1:v/t.count,p/(n.length-1)),this._insertVertex(r,g,c,h,u),g++,!t.continuous[v]||v===0){if(v===0)h.set(t.normals[v*2+0],t.normals[v*2+1],0),u.set(0,p/(n.length-1));else{let x=v===t.count-1?t.start*2:y+2;l.set(e[x+0],e[x+1],0),h.copy(l).sub(a),h.set(-h.y,h.x,0),t.isHole||h.negate()}h.applyMatrix4(f).normalize(),this._insertVertex(r,g,c,h,u),g++}}});let d=n.length-1;for(let f=0;f<d;f++){let p=t.verticesStart*n.length+t.verticesCount*f,m=t.verticesStart*n.length+t.verticesCount*(f+1),g=0;for(let v=0;v<t.count;v++){(!t.continuous[v]||v===0)&&g++;let y=v===t.count-1?0:g+1,x=p+g,b=p+y,S=m+y,A=m+g;t.isHole?s.push(x,S,b,x,A,S):s.push(x,b,S,x,S,A),g++}}}_closeEnd(t,e,n,i,r,s,o){let a=t.vertexCount,l=new G(0,0,o?-1:1).applyMatrix4(r),c=new G,h=new Ae;for(let d=0;d<a;d++){let f=2*d;c.set(t.vertices[f+0],t.vertices[f+1],0).applyMatrix4(r).add(s),this._insertVertex(i,e+d,c,l,h)}let u=t.elements;for(let d=0;d<t.elementCount;d++){let f=3*d,p=u[f+0]+e,m=u[f+(o?1:2)]+e,g=u[f+(o?2:1)]+e;n.push(p,m,g)}}};function lLt(){let t=new Qt;return t.setAttribute("position",new on(new Float32Array([]),3)),t.setIndex(new on(new Uint16Array([]),1)),t}var cLt=12,uLt=1,e_e=class extends Qt{constructor(t,e){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],this.userData={parameters:t,type:"TextGeometry"};let n=e.getFont(t.font);n!=null&&n.isLoaded?(this.font=n,this.update(t)):this.updateFont(t.font,e).then(()=>{this.update(t),e==null||e.requestRender()})}async updateFont(t,e){let n=e.getFont(t);n&&(this.font=n,await n.loadingPromise)}update(t){let e=this.font;if(this.userData={parameters:t,type:"TextGeometry"},!(e!=null&&e.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:n,height:i,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o,text:a,textTransform:l}=t,c=l===2?a.toUpperCase():l===3?a.toLowerCase():a,h=hLt(t,e,c),{shapes:u,charWidths:d,charCoords:f}=e.generateShapes(h,t),p=n*.5,m=i*.5,g=u.map(x=>new Dr().fromShape(x));this.vectorShapes=g;let v=g.map(x=>oy.create({shape:x,parameters:{depth:r,extrudeBevelSegments:o,extrudeBevelSize:s,windingRule:r<=0?fi.NONZERO:fi.ODD,subdivisions:this.isLowResolution&&r>0?uLt:cLt}})),y=v.length?Ix(v):lLt();y.translate(-p,m,0),this.dispose(),this.wrappedText=h,this.charCoords=f,this.charWidths=d,this.deleteAttribute("extrudeNormal"),Object.entries(y.attributes).forEach(([x,b])=>{this.setAttribute(x,b)}),this.setIndex(y.index),this.computeBoundingSphere()}clone(){let t=Lv(new Qt,e_e.prototype);return t.copy(this),console.log("CloneGeometry",this,t),t}copy(t){return Object.entries(t.attributes).forEach(([e,n])=>{this.setAttribute(e,n)}),this.setIndex(t.index),this.userData={parameters:{...t.userData.parameters},type:"TextGeometry"},this}async setText(t){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:t})}get text(){return this.userData.parameters.text??""}};function hLt(t,e,n){n=n??t.text;let i=[""],r="";for(let s of n)r+=s,s===" "||s===`
`?(i[i.length-1]+=r,r="",s===`
`&&i.push("")):e.getTextWidth(i[i.length-1]+r,t)>t.width&&(i[i.length-1].length&&i.push(""),e.getTextWidth(i[i.length-1]+r,t)>t.width&&(r.length===1?(i[i.length-1]+=r,r=""):(i[i.length-1]+=r.slice(0,-1),r=r[r.length-1],i.push(""))));return i[i.length-1]+=r,i}var t_e,p7=new Promise(t=>{t_e=t}),ele=!1;async function dLt(){if(ele)return;let t="https://unpkg.com/@splinetool/modelling-wasm@0.9.295/build",[e,n]=await Promise.all([Nw(()=>import("./process-d5be692d.js"),[]),fetch(`${t}/process.wasm`).then(s=>s.arrayBuffer())]),i=e.default,r=await i({wasmBinary:n});t_e(r),ele=!0}function cR(t,e,n){let i={parameters:t,type:t.type};if(t.type==="PathGeometry")i.path=t.path;else if(t.type==="VectorGeometry"){let s=Dr.createFromState(t.shape,t.width,t.height);i.shape=s}else if(t.type==="NonParametricGeometry")t.data.groups&&t.data.groups.forEach(s=>s.materialIndex=Math.max(s.materialIndex??0,0)),i.geometry=new lbe().parse(t);else{if(t.type==="SubdivGeometry")return new Ko(t,n);if(t.type==="TextGeometry")return new e_e(t,e)}let r;try{r=ole(i)}catch(s){console.error(s)}if(!r){let s=Dr.createFromState(XL.defaultData(),100,100);i.shape=s,r=ole(i)}return r}var fLt=new dt;function Rj(t,e,n,i){let r=t.position.array,s=t.normal.array,o=fLt.makeScale(e,n,i).invert().elements,a,l,c;for(var h=0,u=r.length;h<u;h+=3)r[h]*=e,r[h+1]*=n,r[h+2]*=i,a=s[h],l=s[h+1],c=s[h+2],s[h]=o[0]*a+o[4]*l+o[8]*c,s[h+1]=o[1]*a+o[5]*l+o[9]*c,s[h+2]=o[2]*a+o[6]*l+o[10]*c;t.position.needsUpdate=!0,t.normal.needsUpdate=!0}var V3=new cs,_1=new G,qt;p7.then(t=>{qt=t});var tle=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),nle=new Uint32Array([0,1,2,3]),ile=new Uint8Array([4]),Ko=class extends Qt{constructor(t,e){super(),this.data=t,this.flatShading=e,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(t,e){this.freeSubdivPointer();let n=this.data.scaleBaked,i=iv.div(e,n);this.subdividedGeometry&&Rj(this.subdividedGeometry.attributes,...i),this.originalGeometry&&Rj(this.originalGeometry.attributes,...i),this.data=t;let r=this.userData.parameters;this.userData.parameters={width:r.width*i[0],height:r.height*i[1],depth:r.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(_1.fromArray(i));let s=_1.set(r.width,r.height,r.depth).length();this.originalGeometry.boundingSphere.radius=s/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let t,e,n;try{({originalGeometry:t,subdividedGeometry:e,subdivPointer:n}=Ko.build(this.data,void 0,!this.flatShading,void 0))}catch{t=new rd(100,100,100),n=0}this.subdivPointer=n,this.originalGeometry=t,this.subdividedGeometry=e??void 0;let i=this.subdividedGeometry??this.originalGeometry;Object.assign(this,i),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(Ko.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let t=this.originalGeometry;t.boundingSphere===null&&(t.boundingSphere=new Gc,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=t.boundingSphere));let e=t.attributes.position,n=t.boundingSphere.center;V3.setFromBufferAttribute(e),V3.getCenter(n),t.boundingSphere.radius=n.distanceTo(V3.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),V3.getSize(_1);let i={width:_1.x,height:_1.y,depth:_1.z};return this.userData.parameters=i,i}static build(t,e,n,i){let r,s,o,a=(t==null?void 0:t.phongAngle)??35;n===!1&&(a=-1),e&&(qt.free_bvh(e),qt.free_subdivision_surface(e));try{r=Ko.allocate(t,i)}catch(l){console.error(l,t),r=Ko.allocate({positionWASM:tle,indexWASM:nle,verticesPerFaceWASM:ile},i)}if(qt.set_destination_refinement_level(r,0),s=Ko.buildLevel(r,!0,a),t.subdivisions>0)try{qt.set_destination_refinement_level(r,t.subdivisions),o=Ko.buildLevel(r,!1,a)}catch{try{qt.set_destination_refinement_level(r,t.subdivisions-1),o=Ko.buildLevel(r,!1,a)}catch{o=null}}else o=null;return{subdivPointer:r,originalGeometry:s,subdividedGeometry:o}}static primitiveToQuads(t,e,n){t.widthSegments>16&&(t.widthSegments=16),t.heightSegments>16&&(t.heightSegments=16),t.depthSegments>16&&(t.depthSegments=16),t.radialSegments>16&&(t.radialSegments=16),t.type==="DodecahedronGeometry"&&(t.detail=0);let i;if(t.type==="TorusGeometry"&&t.arc===Math.PI*2){let{width:c,height:h,depth:u,arc:d,tubularSegments:f,radialSegments:p}=t;i=new f7(!0,c,u,h,c*.5,d/(2*Math.PI),f,u/2,0,p,0,0,!0)}else i=t.shape!==void 0?e.geometry:cR(t,n,!1);let r,s,o,a;({positions:r,triIndices:a}=m7(i.getAttribute("position"),i.getIndex()));let l;if(t.type==="CylinderGeometry"&&t.cornerRadius===0&&t.hollow===0&&t.openEnded===!1){let c=t.radialSegments*t.heightSegments*3*2,h=c+t.radialSegments*3;l=[c,h]}return{indices:s,verticesPerFace:o}=n_e(r,a,i,l),{positions:r,indices:s,verticesPerFace:o}}static allocate(t,e){var x;let n,i,r,s=[],o=[];t.positionWASM&&t.positionWASM.length>0?(n=t.positionWASM,i=t.indexWASM,r=t.verticesPerFaceWASM):(n=tle,i=nle,r=ile);let a=n.length,l=i.length,c=r.length,h=n.length+s.length+o.length,u=i.length+r.length,d=h*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,f=h*Float32Array.BYTES_PER_ELEMENT,p=qt._malloc(d),m=new Float32Array(qt.HEAPF32.buffer,p,h),g=new Uint32Array(qt.HEAPU32.buffer,p+f,u);m.set(n,0),m.set(s,n.length),m.set(o,n.length+s.length),g.set(i,0),g.set(r,i.length);let v;(x=t==null?void 0:t.scaleBaked)!=null&&x.some(b=>b!==1)&&(v=new dt().makeScale(...t.scaleBaked)),e&&(v?v.premultiply(e):v=e);let y=v?qt.alloc_subdivision_surface2(p,a,p+f,l,p+f+i.length*Uint32Array.BYTES_PER_ELEMENT,c,v.elements):qt.alloc_subdivision_surface(p,a,p+f,l,p+f+i.length*Uint32Array.BYTES_PER_ELEMENT,c);return qt._free(p),y}static buildLevel(t,e,n,i,r){let s=r?qt.get_mesh_data2(t,e?qt.Level.CONTROL:qt.Level.REFINED,n,r.elements):qt.get_mesh_data(t,e?qt.Level.CONTROL:qt.Level.REFINED,n),o=8,a=qt.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(4,4+4),c=0,h=qt.HEAPU32[a[c]>>2],u=qt.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let d=qt.HEAPU32[a[c]>>2],f=qt.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let p=qt.HEAPU32[a[c]>>2],m=qt.HEAPU32.subarray(p>>2,(p>>2)+l[c]);c++;let g=qt.HEAPU32[a[c]>>2],v=qt.HEAPU32.subarray(g>>2,(g>>2)+l[c]);if(c++,i===void 0){let y=new Qt;if(y.setIndex(new pM(v,1)),y.setAttribute("position",new At(u,3)),y.setAttribute("normal",new At(f,3)),e){y.setAttribute("faceMap",new pM(m,1));let x=new Float32Array(f.length/3*4).fill(0);y.setAttribute("color",new on(x,4))}return qt.free_mesh_data(s),y.userData.type="SubdivGeometry",y}i.getAttribute("position").copyArray(u),i.getAttribute("normal").copyArray(f),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,qt.free_mesh_data(s)}static freeSubdivPointer(t){qt.free_bvh(t),qt.free_subdivision_surface(t)}static buildControlCageWireframe(t,e,n){let i=qt.get_wireframe_data_for_base_level(t),r=4,s=qt.HEAPU32.subarray(i>>2,(i>>2)+r),o=s.subarray(2,2+2),a=0,l=qt.HEAPU32[s[a]>>2],c=qt.HEAPF32.subarray(l>>2,(l>>2)+o[a]);a++;let h=qt.HEAPU32[s[a]>>2],u=qt.HEAPU32.subarray(h>>2,(h>>2)+o[a]);if(e===void 0){let d=new Qt;d.setAttribute("position",new At(c,3));let f=new Float32Array(c.length);for(let p=0,m=c.length;p<m;)f[p++]=n.r,f[p++]=n.g,f[p++]=n.b;return d.setAttribute("color",new on(f,3)),d.setIndex(new pM(u,1)),qt.free_wireframe_data_for_base_level(i),d}e.getAttribute("position").copyArray(c),e.attributes.position.needsUpdate=!0,qt.free_wireframe_data_for_base_level(i)}static updateCollabMesh(t,e,n){let i=e===0;i||qt.set_destination_refinement_level(t,e);let r=n?qt.get_topological_data2(t,i?qt.Level.CONTROL:qt.Level.REFINED,n.elements):qt.get_topological_data(t,i?qt.Level.CONTROL:qt.Level.REFINED),s=6,o=qt.HEAPU32.subarray(r>>2,(r>>2)+s),a=o.subarray(3,3+3),l=0,c=qt.HEAPU32[o[l]>>2],h=new Float32Array(qt.HEAPF32.subarray(c>>2,(c>>2)+a[l]));l++;let u=qt.HEAPU32[o[l]>>2],d=new Uint32Array(qt.HEAPU32.subarray(u>>2,(u>>2)+a[l]));l++;let f=qt.HEAPU32[o[l]>>2],p=new Uint8Array(qt.HEAPU32.subarray(f>>2,(f>>2)+a[l]));return qt.free_topological_data(r),{positions:h,indices:d,verticesPerFace:p}}},rle=["getX","getY","getZ"];function m7(t,e){let n={},i=e?e.count:t.count,r=0,s=[],o=[],a=1e4;for(let c=0;c<i;c++){let h=e?e.getX(c):c,u="";for(let d=0;d<3;d++)u+=`${~~(t[rle[d]](h)*a)},`;if(u in n)s.push(n[u]);else{for(let d=0;d<3;d++)o.push(t[rle[d]](h));n[u]=r,s.push(r),r++}}let l=[];for(let c=0;c<s.length;c+=3)s[c]===s[c+1]||s[c]===s[c+2]||s[c+1]===s[c+2]||l.push(s[c],s[c+1],s[c+2]);return{positions:o,triIndices:l}}var W3=new G,iz=new G,rz=new G,sz=new G;function n_e(t,e,n,i){let r=[],s=[];if(n.userData.shape!==void 0&&n.userData.parameters.depth===0&&n.userData.shape.shapeHoles.length===0){let o=n.userData.shape.extractShapePointsToFlatArray([]),a=n.userData.parameters.spikes;if(n.userData.type==="EllipseGeometry"&&a<=24&&a%4===0&&n.userData.parameters.angle>=360){let h=o.length/2/a;o=o.filter((u,d)=>Math.floor(d/2)%h===0)}let l=0;for(let h=0;h<o.length;h+=2)l+=(o[h]-o[(h===0?o.length:h)-2])*(o[h+1]+o[(h===0?o.length:h)-1]);t.length=0;let c=0;if(l<0)for(let h=0;h<o.length;h+=2)t.push(o[h],o[h+1],0),r.push(c++);else for(let h=o.length-2;h>=0;h-=2)t.push(o[h],o[h+1],0),r.push(c++);return s.push(c),{indices:r,verticesPerFace:s}}for(let o=0,a=n.capStartIndex??e.length;o<a;)if(e[o+1]===e[o+3]&&e[o+2]===e[o+5]||e[o+0]===e[o+3]&&e[o+2]===e[o+4]){W3.set(t[e[o]*3],t[e[o]*3+1],t[e[o]*3+2]),iz.set(t[e[o+1]*3],t[e[o+1]*3+1],t[e[o+1]*3+2]),rz.set(t[e[o+4]*3],t[e[o+4]*3+1],t[e[o+4]*3+2]),sz.set(t[e[o+5]*3],t[e[o+5]*3+1],t[e[o+5]*3+2]),iz.sub(W3).normalize(),rz.sub(W3).normalize(),sz.sub(W3).normalize();let l=iz.cross(rz).dot(sz);Math.abs(l)>.005||i&&i.some((c,h)=>h%2===1?!1:o>=i[h]&&o<i[h+1])?(r.push(e[o],e[o+1],e[o+2]),s.push(3),o+=3):(r.push(e[o],e[o+1],e[o+4],e[o+5]),s.push(4),o+=6)}else r.push(e[o],e[o+1],e[o+2]),s.push(3),o+=3;if(n.capStartIndex!==void 0){let o=[],a=[],l=0,c=new Float32Array([n.userData.parameters.depth])[0];for(let h=0,u=0;h<t.length;h+=3,u++)t[h+2]===0&&(o.push(u),l++),t[h+2]===c&&a.push(u);if(n.userData.parameters.extrudeBevelSize===0){let h=a[0];a[0]=a[1],a[1]=h}o.reverse(),r.push(...o,...a),s.push(l,l)}return{indices:r,verticesPerFace:s}}var Hp={};U0t(Hp,{calcBoolean:()=>yLt,calcBooleanTopological:()=>vLt,freeMeshSet:()=>wLt,getMeshSet:()=>xLt,transformMeshSet:()=>bLt});var i_e,pLt=new Promise(t=>{i_e=t}),sle=!1;async function mLt(){if(sle)return;let t="https://unpkg.com/@splinetool/boolean-wasm@0.9.295/build",[e,n]=await Promise.all([Nw(()=>import("./boolean-63aef768.js"),[]),fetch(`${t}/boolean.wasm`).then(s=>s.arrayBuffer())]),i=e.default,r=await i({wasmBinary:n});i_e(r),sle=!0}var On,vb;pLt.then(t=>On=t);function gLt(t,e,n){let i,{positions:r,triIndices:s}=m7(t.getAttribute("position"),t.getIndex()),o;if(e&&n){let{indices:a,verticesPerFace:l}=n_e(r,s,t);o=l.length,i=[];for(let c=0,h=0;c<o;c++){i.push(l[c]);for(let u=0;u<l[c];u++)i.push(a[h++])}}else{let a=s.length;i=Array(a+a/3),o=0;for(let l=0,c=0;c<i.length;)i[c++]=3,o++,i[c++]=s[l++],i[c++]=s[l++],i[c++]=s[l++]}return{positions:r,faceIndices:i,nFaces:o}}function r_e(t){let e=t.length,n=e*Uint32Array.BYTES_PER_ELEMENT,i=e*Float32Array.BYTES_PER_ELEMENT,r=Number.isInteger(t[0])?n:i,s=On._malloc(r);return(Number.isInteger(t[0])?new Uint32Array(On.HEAPU32.buffer,s,e):new Float32Array(On.HEAPF32.buffer,s,e)).set(t,0),s}function s_e(t){switch(t){case 0:return On.OP.UNION;case 1:return On.OP.INTERSECTION;case 2:return On.OP.A_MINUS_B;case 3:return On.OP.B_MINUS_A;case 4:return On.OP.SYMMETRIC_DIFFERENCE;case 5:return On.OP.ALL;default:throw new Error("Unknown boolean operation "+t)}}function vLt(t,e){vb===void 0&&(vb=On.init_csg());let n=r_e(t),i=On.csg_calc_topological(vb,n,t.length,s_e(e));On._free(n);let r=6,s=On.HEAPU32.subarray(i>>2,(i>>2)+r),o=s.subarray(3,3+3),a=0,l=On.HEAPU32[s[a]>>2],c=new Float32Array(On.HEAPF32.subarray(l>>2,(l>>2)+o[a]));a++;let h=On.HEAPU32[s[a]>>2],u=new Uint32Array(On.HEAPU32.subarray(h>>2,(h>>2)+o[a]));a++;let d=On.HEAPU32[s[a]>>2],f=new Uint8Array(On.HEAPU32.subarray(d>>2,(d>>2)+o[a]));return On.free_mesh_data(i),{positions:c,indices:u,verticesPerFace:f}}function yLt(t,e,n,i){vb===void 0&&(vb=On.init_csg());let r=r_e(t),s=On.csg_calc(vb,r,t.length,i,s_e(e));On._free(r);let o=5,a=On.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(2,2+3),c=0,h=On.HEAPU32[a[c]>>2],u=On.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let d=On.HEAPU32[a[c]>>2],f=On.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let p=l[c];n.setAttribute("position",new At(u,3)),n.setAttribute("normal",new At(f,3));let m=On.HEAPF32.subarray((s>>2)+5,(s>>2)+5+6);return n.boundingSphere===null&&(n.boundingSphere=new Gc),n.boundingSphere.center.set(m[0],m[1],m[2]),n.boundingSphere.radius=(m[3]**2+m[4]**2+m[5]**2)**.5,n.userData.parameters={width:m[3]*2,height:m[4]*2,depth:m[5]*2},On.free_mesh_data(s),p}function xLt(t,e,n){if(On===void 0)return-1;let i,r,s;if(e&&t.userData.positions!==void 0){let m=t.userData;s=m.verticesPerFace.length,i=m.positions,r=Array(m.verticesPerFace.reduce((g,v)=>g+v,0)+s);for(let g=0,v=0,y=0;g<m.verticesPerFace.length;g++){r[y++]=m.verticesPerFace[g];for(let x=0;x<m.verticesPerFace[g];x++)r[y++]=m.indices[v++]}}else({positions:i,faceIndices:r,nFaces:s}=gLt(t,e,n));let o=i.length,a=r.length,l=i.length,c=r.length,h=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,u=l*Float32Array.BYTES_PER_ELEMENT,d=On._malloc(h),f=new Float32Array(On.HEAPF32.buffer,d,l),p=new Uint32Array(On.HEAPU32.buffer,d+u,c);return f.set(i,0),p.set(r,0),On.get_csg_mesh(d,o,d+u,a,s)}function bLt(t,e){On.transform_csg_mesh(t,e.elements)}function wLt(t){On.free_csg_mesh(t)}var _Lt={ConeGeometry:nOt,CubeGeometry:iOt,CylinderGeometry:tOt,DodecahedronGeometry:sOt,EllipseGeometry:d7,HelixGeometry:kOt,IcosahedronGeometry:FOt,LatheGeometry:NOt,NonParametricGeometry:WOt,PolygonGeometry:Jwe,PyramidGeometry:$Ot,RectangleGeometry:Zwe,SphereGeometry:YOt,PlaneGeometry:KOt,BackdropGeometry:JOt,StarGeometry:Qwe,TextFrameGeometry:QOt,TorusGeometry:eLt,TorusKnotGeometry:nLt,TriangleGeometry:iLt,PathGeometry:oLt,VectorGeometry:oy},ole=t=>_Lt[t.type].create(t);function YS(t){return t!==null&&"booleanOp"in t}var o_e=class extends Iwe(cl){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new dt}updateVisible(){super.updateVisible(),this.visible=!YS(this.parent)&&this.visible,YS(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Hp.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(t=!1){return t?this.booleanWasTransformed=!0:this.freeBooleanPointer(),YS(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let t of this.children)t instanceof o_e&&(t.freeBooleanPointer(),YS(t)&&t.invalidateUpstreamBooleanData())}updateTransformState(t){let e=super.updateTransformState(t);return e&&YS(this.parent)&&this.invalidateDownstreamBooleanData(!0),e}},$3=new cs;function g7(t,e=0,n=t.count,i,r){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,h=-1/0;for(let u=e;u<n;u++){let d=t.getX(u),f=t.getY(u),p=t.getZ(u);d<s&&(s=d),f<o&&(o=f),p<a&&(a=p),d>l&&(l=d),f>c&&(c=f),p>h&&(h=p)}$3.min.set(s,o,a),$3.max.set(l,c,h),$3.getCenter(i),$3.getSize(r).multiplyScalar(.5)}var SLt=new Qt,ALt=new JE,_l=class extends o_e{constructor(t,e){super(SLt,ALt),this.super_Entity(t,e)}updateState(t,e){this.updateState_Entity(t,e)}updateEntityBoxSize(t,e){let n=this.geometry.getAttribute("position");n!==void 0?g7(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,t,e):super.updateEntityBoxSize(t,e)}},ale=class{constructor(t){t=t??{},this.name=t.name,this.type=t.type,this.node=t.node,this.size=t.size,this.needsUpdate=t.needsUpdate}get value(){return this.node.value}set value(t){this.node.value=t}},hg=class{constructor(t){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=Ln.generateUUID(),this.type=t,this.name=""}analyze(t,e){e=e??{},t.analyzing=!0,this.build(t.addFlow(e.slot,e.cache,e.context),"v4"),t.clearVertexNodeCode(),t.clearFragmentNodeCode(),t.removeFlow(),t.analyzing=!1}analyzeAndFlow(t,e,n){return n=n??{},this.analyze(t,n),this.flow(t,e,n)}flow(t,e,n){n=n??{},t.addFlow(n.slot,n.cache,n.context);let i={result:this.build(t,e),code:t.clearNodeCode(),extra:t.context.extra};return t.removeFlow(),i}build(t,e,n){e=e??this.getType(t,e);let i=t.getNodeData(n??this);return t.analyzing&&this.appendDepsNode(t,i,e),t.nodes.indexOf(this)===-1&&t.nodes.push(this),this.updateFrame!==void 0&&t.updaters.indexOf(this)===-1&&t.updaters.push(this),this.generate(t,e,n)}updateFrame(t){}generateReadonly(t,e,n,i,r,s){return""}generate(t,e,n,i,r){return""}parse(t,e,n,i){}appendDepsNode(t,e,n){e.deps=(e.deps||0)+1;let i=t.getTypeLength(n);(i>(e.outputMax||0)||this.getType(t,n))&&(e.outputMax=i,e.output=n)}setName(t){this.name=t}getName(){return this.name}getType(t,e){return e==="sampler2D"||e==="samplerCube"?e:this.type}getHash(){let t="{",e,n;for(e in this)n=this[e],n instanceof hg&&(t+='"'+e+'":'+n.getHash()+",");if(this.hashProperties)for(let i=0;i<this.hashProperties.length;i++)e=this.hashProperties[i],n=this[e],t+='"'+e+'":"'+String(n)+'",';return t+='"id":"'+this.uuid+'"}',t}},MLt=class{constructor(){this.nodes={},this.keywords={}}add(t){this.nodes[t.name]=t}addKeyword(t,e,n){n=n!==void 0?n:!0,this.keywords[t]={callback:e,cache:n}}remove(t){delete this.nodes[t.name]}removeKeyword(t){delete this.keywords[t]}get(t){return this.nodes[t]}getKeyword(t,e){return this.keywords[t].callback(e)}getKeywordData(t){return this.keywords[t]}contains(t){return this.nodes[t]!==void 0}containsKeyword(t){return this.keywords[t]!==void 0}},ya=new MLt,Pi=class extends hg{constructor(t,e){super(t),this.scope="",e=e??{},this.shared=e.shared!==void 0?e.shared:!0,this.unique=e.unique!==void 0?e.unique:!1}build(t,e,n,i){if(e=e??this.getType(t),this.getShared(t,e)){let r=this.getUnique(t,e);r&&this.uuid===void 0&&(this.uuid=Ln.generateUUID()),n=t.getUUID(n??this.getUUID(),!r);let s=t.getNodeData(n),o=s.output||this.getType(t);if(t.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(t,s,e),this.generate(t,e,n)):super.build(t,e,n);if(r)return s.name=s.name||super.build(t,e,n),s.name;if(!this.getLabel()&&(!this.getShared(t,o)||t.context.ignoreCache||s.deps===1))return super.build(t,e,n);n=this.getUUID(!1);let a=this.getTemp(t,n);if(a)return t.format(a,o,e);{a=super.generate(t,e,n,s.output,i);let l=this.generate(t,o,n);return t.addNodeCode(a+" = "+l+";"),t.format(a,o,e)}}return super.build(t,e,n)}getShared(t,e){return e!=="sampler2D"&&e!=="samplerCube"&&this.shared}getUnique(t,e){return this.unique}setLabel(t){return this.label=t,this}getLabel(){return this.label}getUUID(t){let e=this.uuid;return typeof this.scope=="string"&&(e=this.scope+"-"+e),e}getTemp(t,e){e=e||this.uuid;let n=t.getVars()[e];return n?n.name:void 0}generate(t,e,n,i,r){return this.getShared(t,e)||console.error("TempNode is not shared"),n=n??this.uuid,t.getTempVar(n,i??this.getType(t),r,this.getLabel()).name}},Dl=class extends Pi{constructor(t,e){e=e??{},e.shared=e.shared!==void 0?e.shared:!1,super(t,e),this.readonly=!1}setReadonly(t){return this.readonly=t,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(t,e,n,i,r,s){n=t.getUUID(n??this.getUUID()),i=i??this.getType(t);let o=t.getNodeData(n);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(t,e,n,i,r,s):t.isShader("vertex")?(o.vertex||(o.vertex=t.createVertexUniform(i,this,r,s,this.getLabel())),t.format(o.vertex.name,i,e)):(o.fragment||(o.fragment=t.createFragmentUniform(i,this,r,s,this.getLabel())),t.format(o.fragment.name,i,e))}},cc=class extends Dl{constructor(t=0,e){super("v2"),this.nodeType="Vector2",this.value=t instanceof Ae?t:new Ae(t,e)}get x(){return this.value.x}set x(t){this.value.x=t}get y(){return this.value.y}set y(t){this.value.y=t}generateReadonly(t,e,n,i,r,s){return t.format("vec2("+this.value.x+", "+this.value.y+")",i,e)}},tc=class extends Dl{constructor(t=0,e,n){super("v3"),this.nodeType="Vector3",this.value=t instanceof G?t:new G(t,e,n)}get x(){return this.value.x}set x(t){this.value.x=t}get y(){return this.value.y}set y(t){this.value.y=t}get z(){return this.value.z}set z(t){this.value.z=t}generateReadonly(t,e,n,i,r,s){return t.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",i,e)}},Pa=class extends Zt{constructor(t,e,n,i){super(t,e,n),this.isColorA=!0,this.a=i}setRGBA(t,e,n,i){super.setRGB(t,e,n),this.a=i}copy(t){return super.copy(t),this.a="a"in t?t.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}setStyle(t,e="srgb"){let n;if(t==="transparent")return this.setRGBA(0,0,0,0),this;if(n=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(t)){let i,r=n[1],s=n[2];switch(r){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a=r==="rgba"?parseFloat(i[4]):1,super.setStyle(t,e);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a=r==="hsla"?parseFloat(i[4]):1,super.setStyle(t,e);break}}return super.setStyle(t,e)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(t){this.r=t}set y(t){this.g=t}set z(t){this.b=t}set w(t){this.a=t}},S0=class extends Dl{constructor(t){super("v4"),this.nodeType="Vector4",this.value=t instanceof Pa?t:new Pa(t.r,t.g,t.b,t.a)}generateReadonly(t,e,n,i,r,s){return t.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,e)}},ELt=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,lle=/[a-z_0-9]+/gi,kt=class extends Pi{constructor(t,e,n,i,r){super(r),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=r===void 0,this.isInterface=!1,this.parse(t,e,n,i)}getShared(t,e){return!this.isMethod}getType(t){return t.getTypeByFormat(this.type)}getInputByName(t){if(this.inputs){let e=this.inputs.length;for(;e--;)if(this.inputs[e].name===t)return this.inputs[e]}}getIncludeByName(t){if(this.includes){let e=this.includes.length;for(;e--;)if(this.includes[e].name===t)return this.includes[e]}}generate(t,e,n,i,r){let s,o=0,a=this.src;if(this.includes)for(let c=0;c<this.includes.length;c++)t.include(this.includes[c],this);for(let c in this.extensions)t.extensions[c]=!0;let l=[];for(;s=lle.exec(this.src);)l.push(s);for(let c=0;c<l.length;c++){let h=l[c],u=h[0],d=this.isMethod?!this.getInputByName(u):!0,f=u;if(this.keywords[u]||this.useKeywords&&d&&ya.containsKeyword(u)){let p=this.keywords[u];if(!p){let m=ya.getKeywordData(u);m.cache&&(p=t.keywords[u]),p=p||ya.getKeyword(u,t),m.cache&&(t.keywords[u]=p)}f=p.build(t)}u!==f&&a[h.index+o-1]!=="."&&(a=a.substring(0,h.index+o)+f+a.substring(h.index+u.length+o),o+=f.length-u.length),this.getIncludeByName(f)===void 0&&ya.contains(f)&&t.include(ya.get(f))}return e==="source"?a:this.isMethod?(this.isInterface||t.include(this,void 0,a),this.name):t.format("( "+a+" )",this.getType(t),e)}parse(t,e,n,i){if(this.src=t||"",this.includes=e??[],this.extensions=n??{},this.keywords=i??{},this.isMethod){let r=ELt.exec(this.src);if(this.inputs=[],r&&r.length==4){this.type=r[1],this.name=r[2];let s=r[3].match(lle);if(s){let o=0;for(;o<s.length;){let a=s[o++],l;a==="in"||a==="out"||a==="inout"?l=s[o++]:(l=a,a="");let c=s[o++];this.inputs.push({name:c,type:l,qualifier:a})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},CLt=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,a_e=class extends Pi{constructor(t="",e){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(t||a_e.PI,void 0,void 0,void 0,e)}getType(t){return t.getTypeByFormat(this.type)}parse(t,e,n,i,r){this.src=t||"";let s,o,a="",l=CLt.exec(t);this.useDefine=r??this.src.charAt(0)==="#",l&&l.length>1?(o=l[1],s=l[2],a=l[3]):(s=this.src,o="f"),this.name=s,this.type=o,this.value=a}build(t,e){if(e==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return t.include(this),t.format(this.name,this.getType(t),e)}generate(t,e,n,i,r){return t.format(this.name,this.getType(t),e)}},hi=a_e;hi.PI="PI",hi.PI2="PI2",hi.RECIPROCAL_PI="RECIPROCAL_PI",hi.RECIPROCAL_PI2="RECIPROCAL_PI2",hi.LOG2="LOG2",hi.EPSILON="EPSILON";var TLt=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),PLt=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),l_e=class extends Pi{constructor(t=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(t)}getType(t){return t.getTypeByFormat(this.name)}getInputByName(t){let e=this.inputs.length;for(;e--;)if(this.inputs[e].name===t)return this.inputs[e]}generate(t,e,n,i,r){return e==="source"?this.src+";":t.format("( "+this.src+" )",this.getType(t),e)}parse(t=""){this.src=t,this.inputs=[];let e=TLt.exec(t);if(e){let n=e[2],i;for(;i=PLt.exec(n);)this.inputs.push({type:i[1],name:i[2]});this.name=e[1]}else this.name="";this.type=this.name}},v7=class extends Pi{constructor(t){super("v2",{shared:!1}),this.nodeType="UV",this.index=t??0}generate(t,e){t.requires.uv[this.index]=!0;let n=this.index>0?this.index+1:"",i=t.isShader("vertex")?"uv"+n:"vUv"+n;return t.format(i,this.getType(t),e)}};ya.addKeyword("uv",function(){return new v7});ya.addKeyword("uv2",function(){return new v7(1)});var H1=class extends Pi{constructor(t,e){super("v4"),this.nodeType="ColorSpace",this.input=t,this.method=e??H1.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(t){switch(t){case id:return["Linear"];case mn:return["sRGB"];default:return[]}}generate(t,e){var o;let n=this.input.build(t,"v4"),i=this.getType(t),r=H1.Nodes[this.method],s=t.include(r);if(s===H1.LINEAR_TO_LINEAR)return t.format(n,i,e);if(((o=r.inputs)==null?void 0:o.length)===2){let a=this.factor.build(t,"f");return t.format(s+"( "+n+", "+a+" )",i,e)}else return t.format(s+"( "+n+" )",i,e)}fromEncoding(t){let e=H1.getEncodingComponents(t);this.method="LinearTo"+e[0],this.factor=e[1]}fromDecoding(t){let e=H1.getEncodingComponents(t);this.method=e[0]+"ToLinear",this.factor=e[1]}},zh=H1;zh.Nodes={LinearToLinear:new kt(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new kt(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new kt(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},zh.LINEAR_TO_LINEAR="LinearToLinear",zh.SRGB_TO_LINEAR="sRGBToLinear",zh.LINEAR_TO_SRGB="LinearTosRGB";var Yi=class extends kt{constructor(t="",e,n,i,r){super(t,r,i,n,e),this.nodeType="Expression"}},vm=class extends Dl{constructor(e=new Hs,n,i,r){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=n??new v7,this.bias=i,this.project=r!==void 0?r:!1}getTexture(e,n){return super.generate(e,n,this.value.uuid,"t")}generate(e,n){if(n==="sampler2D")return this.getTexture(e,n);let i=this.getTexture(e,n),r=this.uv.build(e,this.project?"v4":"v2"),s=this.bias?this.bias.build(e,"f"):void 0;s===void 0&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f"));let o,a;this.project?o="texture2DProj":o=s?"tex2DBias":"tex2D",s?a=o+"( "+i+", "+r+", "+s+" )":a=o+"( "+i+", "+r+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},c=this.getType(e);return e.addContext(l),this.colorSpace=this.colorSpace??new zh(new Yi("",c)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,c),e.removeContext(),e.format(a,c,n)}},Ot=class extends Dl{constructor(t){super("f"),this.nodeType="Float",this.value=t??0}generateReadonly(t,e,n,i,r,s){return t.format(this.value+(this.value%1?"":".0"),i,e)}},cle=class extends Pi{constructor(t,e){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=t,this.inputs=e??[]}getFunction(){return this.value}getType(t){return this.value.getType(t)}generate(t,e,n,i,r){i=this.getType(t);let s=this.value,o=s.build(t,e)+"( ",a=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let c=s.inputs[l],h=this.inputs[l]||this.inputs[c.name];a.push(h.build(t,t.getTypeByFormat(c.type)))}o+=a.join(", ")+" )"}return t.format(o,i,e)}},c_e=class extends Pi{constructor(t,e,n=c_e.ADD){super(),this.nodeType="Operator",this.type=t.type,this.a=t,this.b=e,this.op=n}getType(t){let e=this.a.getType(t),n=this.b.getType(t);return t.isTypeMatrix(e)?"v4":t.getTypeLength(n)>t.getTypeLength(e)?n:e}generate(t,e){let n=this.getType(t);this.type=n;let i=this.a.build(t,n),r=this.b.build(t,n);return t.format("( "+i+" "+this.op+" "+r+" )",n,e)}},Uh=c_e;Uh.ADD="+",Uh.SUB="-",Uh.MUL="*",Uh.DIV="/";var ci=class extends Pi{constructor(t,e=ci.ABS,n,i){super(),this.nodeType="Math",this.a=t,typeof e!="string"?this.b=e:i=e,typeof n!="string"?this.c=n:i=n,this.method=i,this.hashProperties=["method"]}getNumInputs(t){switch(this.method){case ci.MIX:case ci.CLAMP:case ci.REFRACT:case ci.SMOOTHSTEP:case ci.FACEFORWARD:return 3;case ci.MIN:case ci.MAX:case ci.MOD:case ci.STEP:case ci.REFLECT:case ci.DISTANCE:case ci.DOT:case ci.CROSS:case ci.POW:return 2;default:return 1}}getInputType(t){let e=t.getTypeLength(this.a.getType(t)),n=this.b?t.getTypeLength(this.b.getType(t)):0,i=this.c?t.getTypeLength(this.c.getType(t)):0;return e>n&&e>i?this.a.getType(t):n>i?this.b.getType(t):this.c.getType(t)}getType(t){switch(this.method){case ci.LENGTH:case ci.DISTANCE:case ci.DOT:return"f";case ci.CROSS:return"v3"}return this.getInputType(t)}generate(t,e){let n,i,r,s=this.a?t.getTypeLength(this.a.getType(t)):0,o=this.b?t.getTypeLength(this.b.getType(t)):0,a=this.c?t.getTypeLength(this.c.getType(t)):0,l=this.getInputType(t),c=this.getType(t);switch(this.type=c,this.method){case ci.NEGATE:return t.format("( -"+this.a.build(t,l)+" )",l,e);case ci.INVERT:return t.format("( 1.0 - "+this.a.build(t,l)+" )",l,e);case ci.CROSS:n=this.a.build(t,"v3"),i=this.b.build(t,"v3");break;case ci.STEP:n=this.a.build(t,s===1?"f":l),i=this.b.build(t,l);break;case ci.MIN:case ci.MAX:case ci.MOD:n=this.a.build(t,l),i=this.b.build(t,o===1?"f":l);break;case ci.REFRACT:n=this.a.build(t,l),i=this.b.build(t,l),r=this.c.build(t,"f");break;case ci.MIX:n=this.a.build(t,l),i=this.b.build(t,l),r=this.c.build(t,a===1?"f":l);break;default:n=this.a.build(t,l),this.b&&(i=this.b.build(t,l)),this.c&&(r=this.c.build(t,l));break}let h=[];h.push(n),i&&h.push(i),r&&h.push(r);let u=this.getNumInputs(t);if(h.length!==u)throw Error(`Arguments not match used in "${this.method}". Require ${u}, currently ${h.length}.`);return t.format(this.method+"( "+h.join(", ")+" )",c,e)}},ln=ci;ln.RAD="radians",ln.DEG="degrees",ln.EXP="exp",ln.EXP2="exp2",ln.LOG="log",ln.LOG2="log2",ln.SQRT="sqrt",ln.INV_SQRT="inversesqrt",ln.FLOOR="floor",ln.CEIL="ceil",ln.NORMALIZE="normalize",ln.FRACT="fract",ln.SATURATE="saturate",ln.SIN="sin",ln.COS="cos",ln.TAN="tan",ln.ASIN="asin",ln.ACOS="acos",ln.ARCTAN="atan",ln.ABS="abs",ln.SIGN="sign",ln.LENGTH="length",ln.NEGATE="negate",ln.INVERT="invert",ln.MIN="min",ln.MAX="max",ln.MOD="mod",ln.STEP="step",ln.REFLECT="reflect",ln.DISTANCE="distance",ln.DOT="dot",ln.CROSS="cross",ln.POW="pow",ln.MIX="mix",ln.CLAMP="clamp",ln.REFRACT="refract",ln.SMOOTHSTEP="smoothstep",ln.FACEFORWARD="faceforward";var DA=class extends Pi{constructor(t,e,n){super("v4"),this.nodeType="TextureCubeUV",this.value=t,this.uv=e,this.bias=n}bilinearCubeUV(t,e,n,i){let r=new cle(DA.Nodes.bilinearCubeUV,[e,n,i]);this.colorSpaceTL=this.colorSpaceTL??new zh(new Yi("","v4")),this.colorSpaceTL.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(r.build(t)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new zh(new Yi("","v4")),this.colorSpaceTR.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(r.build(t)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new zh(new Yi("","v4")),this.colorSpaceBL.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(r.build(t)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new zh(new Yi("","v4")),this.colorSpaceBR.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(r.build(t)+".br");let s={include:t.isShader("vertex"),ignoreCache:!0};t.addContext(s),this.colorSpaceTLExp=new Yi(this.colorSpaceTL.build(t,"v4"),"v4"),this.colorSpaceTRExp=new Yi(this.colorSpaceTR.build(t,"v4"),"v4"),this.colorSpaceBLExp=new Yi(this.colorSpaceBL.build(t,"v4"),"v4"),this.colorSpaceBRExp=new Yi(this.colorSpaceBR.build(t,"v4"),"v4"),t.removeContext();let o=new Yi("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return o.keywords.cubeUV_TL=this.colorSpaceTLExp,o.keywords.cubeUV_TR=this.colorSpaceTRExp,o.keywords.cubeUV_BL=this.colorSpaceBLExp,o.keywords.cubeUV_BR=this.colorSpaceBRExp,o.keywords.cubeUV=r,o}generate(t,e){if(t.isShader("fragment")){let n=this.uv,i=this.bias||t.context.roughness,r=new cle(DA.Nodes.roughnessToMip,[i]),s=new ln(r,DA.Nodes.m0,DA.Nodes.cubeUV_maxMipLevel,ln.CLAMP),o=new ln(s,ln.FLOOR),a=new ln(s,ln.FRACT),l=this.bilinearCubeUV(t,this.value,n,o),c=this.bilinearCubeUV(t,this.value,n,new Uh(o,new Ot(1).setReadonly(!0),Uh.ADD)),h=new ln(l,c,a,ln.MIX);return t.format(h.build(t),"v4",e)}else return console.warn("TextureCubeUVNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.getType(t),e)}},Ij=DA;Ij.Nodes=function(){let t=new l_e(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),e=new hi("float cubeUV_maxMipLevel 8.0",!0),n=new hi("float cubeUV_minMipLevel 4.0",!0),i=new hi("float cubeUV_maxTileSize 256.0",!0),r=new hi("float cubeUV_minTileSize 16.0",!0),s=new kt(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let o=new kt(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);o.useKeywords=!1;let a=new kt(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[t,s,o,e,n,i,r]);a.useKeywords=!1;let l=new hi("float r0 1.0",!0),c=new hi("float v0 0.339",!0),h=new hi("float m0 -2.0",!0),u=new hi("float r1 0.8",!0),d=new hi("float v1 0.276",!0),f=new hi("float m1 -1.0",!0),p=new hi("float r4 0.4",!0),m=new hi("float v4 0.046",!0),g=new hi("float m4 2.0",!0),v=new hi("float r5 0.305",!0),y=new hi("float v5 0.016",!0),x=new hi("float m5 3.0",!0),b=new hi("float r6 0.21",!0),S=new hi("float v6 0.0038",!0),A=new hi("float m6 4.0",!0),E=[l,c,h,u,d,f,p,m,g,v,y,x,b,S,A],M=new kt(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,E);return{bilinearCubeUV:a,roughnessToMip:M,m0:h,cubeUV_maxMipLevel:e}}();var j1=class extends Pi{constructor(t){super("v3"),this.nodeType="Normal",this.scope=t??j1.VIEW}getShared(){return this.scope===j1.WORLD}build(t,e,n,i){let r=t.context[this.scope+"Normal"];return r?r.build(t,e,n,i):super.build(t,e,n)}generate(t,e,n,i,r){let s;switch(this.scope){case j1.VIEW:t.isShader("vertex")?s="transformedNormal":s="geometryNormal";break;case j1.LOCAL:t.isShader("vertex")?s="objectNormal":(t.requires.normal=!0,s="vObjectNormal");break;case j1.WORLD:t.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(t.requires.worldNormal=!0,s="vWNormal");break}return t.format(s,this.getType(t),e)}},_a=j1;_a.LOCAL="local",_a.WORLD="world",_a.VIEW="view",_a.NORMAL="normal";ya.addKeyword("viewNormal",function(){return new _a(_a.VIEW)});ya.addKeyword("localNormal",function(){return new _a(_a.NORMAL)});ya.addKeyword("worldNormal",function(){return new _a(_a.WORLD)});var rf=class extends Pi{constructor(t){super("v3"),this.nodeType="Position",this.scope=t??rf.LOCAL}getType(){switch(this.scope){case rf.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case rf.LOCAL:case rf.WORLD:return!1}return!0}generate(t,e,n,i,r){let s;switch(this.scope){case rf.LOCAL:t.isShader("vertex")?s="transformed":(t.requires.position=!0,s="vPosition");break;case rf.WORLD:if(t.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";t.requires.worldPosition=!0,s="vWPosition";break;case rf.VIEW:s=t.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case rf.PROJECTION:s=t.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return t.format(s,this.getType(),e)}},wu=rf;wu.LOCAL="local",wu.WORLD="world",wu.VIEW="view",wu.PROJECTION="projection";ya.addKeyword("position",function(){return new wu});ya.addKeyword("worldPosition",function(){return new wu(wu.WORLD)});ya.addKeyword("viewPosition",function(){return new wu(wu.VIEW)});var _h=class extends Pi{constructor(t){super("v3"),this.nodeType="Reflect",this.scope=t??_h.CUBE}getUnique(t){return!t.context.viewNormal}getType(){switch(this.scope){case _h.SPHERE:return"v2"}return this.type}generate(t,e){let n=this.getUnique(t);if(t.isShader("fragment")){let i;switch(this.scope){case _h.VECTOR:{let r=new _a(_a.VIEW),s=t.context.roughness,o=r.build(t,"v3"),a=new wu(wu.VIEW).build(t,"v3"),l=s?s.build(t,"f"):void 0,c=`reflect( -normalize( ${a} ), ${o} )`;l&&(c=`normalize( mix( ${c}, ${o}, ${l} * ${l} ) )`);let h=`inverseTransformDirection( ${c}, viewMatrix )`;n?(t.addNodeCode(`vec3 reflectVec = ${h};`),i="reflectVec"):i=h;break}case _h.CUBE:{let r=new _h(_h.VECTOR).build(t,"v3"),s="vec3( -"+r+".x, "+r+".yz )";n?(t.addNodeCode(`vec3 reflectCubeVec = ${s};`),i="reflectCubeVec"):i=s;break}case _h.SPHERE:{let r="normalize( ( viewMatrix * vec4( "+new _h(_h.VECTOR).build(t,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";n?(t.addNodeCode(`vec2 reflectSphereVec = ${r};`),i="reflectSphereVec"):i=r;break}}return t.format(i,this.getType(),e)}else return console.warn("ReflectNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.type,e)}},yb=_h;yb.CUBE="cube",yb.SPHERE="sphere",yb.VECTOR="vector";var DLt=class extends Pi{constructor(t=new vm,e,n){super("v4"),this.nodeType="TextureCube",this.value=t,this.radianceNode=new Ij(this.value,e??new yb(yb.VECTOR),n),this.irradianceNode=new Ij(this.value,new _a(_a.WORLD),new Ot(1).setReadonly(!0))}generate(t,e){return t.isShader("fragment")?(t.require("irradiance"),t.context.bias&&t.context.bias.setTexture(this.value),(t.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(t,e)):(console.warn("TextureCubeNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.getType(t),e))}},OLt=class extends Dl{constructor(t=new b$,e,n){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=t,this.uv=e??new yb,this.bias=n}getTexture(t,e){return super.generate(t,e,this.value.uuid,"tc")}generate(t,e){var l;if(e==="samplerCube")return this.getTexture(t,e);let n=this.getTexture(t,e),i=(l=this.uv)==null?void 0:l.build(t,"v3"),r=this.bias?this.bias.build(t,"f"):void 0;r===void 0&&t.context.bias&&(r=t.context.bias.setTexture(this).build(t,"f"));let s;r?s="texCubeBias( "+n+", "+i+", "+r+" )":s="texCube( "+n+", "+i+" )";let o={include:t.isShader("vertex"),ignoreCache:!0},a=this.getType(t);return t.addContext(o),this.colorSpace=this.colorSpace??new zh(new Yi("",a)),this.colorSpace.fromDecoding(t.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(t,a),t.removeContext(),t.format(s,a,e)}},ule=["x","y","z","w"],LLt=["float","vec2","vec3","vec4"],RLt={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},ILt={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},BLt=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function t(e,n){return e.deps.length-n.deps.length}return function(e,n){let i=this.getIncludes(e,n);if(!i)return"";let r="";i=i.sort(t);for(let s=0;s<i.length;s++)i[s].src&&(r+=i[s].src+`
`);return r}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(t,e){this.buildShader("vertex",t),this.buildShader("fragment",e);for(let n=0;n<this.requires.uv.length;n++)if(this.requires.uv[n]){let i=n>0?n+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),n>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}buildShader(t,e){this.resultCode[t]=e.build(this.setShader(t),"v4")}setMaterial(t,e){return this.defines={},this}addFlow(t,e,n){return this.addSlot(t).addCache(e).addContext(n)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(t){return this.cache=t??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(t){return this.context=Object.assign({},this.context,t),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(t){return this.slot=t||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(t,e){this.fragmentVariables[t]===void 0&&(this.addFragmentCode(`${e} ${t};`),this.fragmentVariables[t]="")}addFragmentParsVariable(t,e){this.fragmentParsVariables[t]===void 0&&(this.addFragmentParsCode(`${e} ${t};`),this.fragmentParsVariables[t]="")}addVertexParsVariable(t,e){this.vertexParsVariables[t]===void 0&&(this.addVertexParsCode(`${e} ${t};`),this.vertexParsVariables[t]="")}addVertexCode(t){this.addCode(t,"vertex")}addFragmentCode(t){this.addCode(t,"fragment")}addCode(t,e){this.code[e??this.shader]+=t+`
`}addVertexNodeCode(t){this.addNodeCode(t,"vertex")}addFragmentNodeCode(t){this.addNodeCode(t,"fragment")}addNodeCode(t,e){this.nodeCode[e??this.shader]+=t+`
`}clearNodeCode(t){t=t??this.shader;let e=this.nodeCode[t];return this.nodeCode[t]="",e}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(t){this.addFinalCode(t,"vertex")}addFragmentFinalCode(t){this.addFinalCode(t,"fragment")}addFinalCode(t,e){this.finalCode[e??this.shader]+=t+`
`}addVertexParsCode(t){this.addParsCode(t,"vertex")}addFragmentParsCode(t){this.addParsCode(t,"fragment")}addParsCode(t,e){this.parsCode[e??this.shader]+=t+`
`}addVaryCode(t){this.addVertexParsCode(t),this.addFragmentParsCode(t)}isCache(t){return this.caches.indexOf(t)!==-1}isSlot(t){return this.slots.indexOf(t)!==-1}define(t,e){this.defines[t]=e===void 0?1:e}require(t){this.requires[t]=!0}isDefined(t){return this.defines[t]!==void 0}getVar(t,e,n,i="varying",r="V",s=""){let o=this.getVars(i),a=o[t];if(!a){let l=o.length;a={name:n||"node"+r+l+(s?"_"+s:""),type:e},o.push(a),o[t]=a}return a}getTempVar(t,e,n,i){return this.getVar(t,e,n,this.shader,"T",i)}getAttribute(t,e){if(!this.attributes[t]){let n=this.getVar(t,e);this.addVertexParsCode("attribute "+e+" "+t+";"),this.addVertexFinalCode(n.name+" = "+t+";"),this.attributes[t]={varying:n,name:t,type:e}}return this.attributes[t]}getCode(t){return[this.prefixCode,this.parsCode[t],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[t],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[t],"uniform"),this.getIncludesCode("consts",t),this.getIncludesCode("structs",t),this.getIncludesCode("functions",t),"void main() {",this.getVarListCode(this.getVars(t)),this.code[t],this.resultCode[t],this.finalCode[t],"}"].join(`
`)}getVarListCode(t,e){e=e??"";let n="";for(let i=0,r=t.length;i<r;++i){let s=t[i],o=s.type,a=s.name,l=s.size,c=this.getFormatByType(o);if(c===void 0)throw new Error("Node pars "+c+" not found.");c.includes("[]")?n+=e+" "+c.substring(0,c.length-2)+" "+a+`[${l}];
`:n+=e+" "+c+" "+a+`;
`}return n}getVars(t){return this.inputs.vars[t??this.shader]}getNodeData(t){let e=t instanceof hg?t.uuid:t;return this.nodeData[e]=this.nodeData[e]||{}}createUniform(t,e,n,i,r,s){if(e.includes("[]")){let o=this.inputs.arrayUniforms,a=o.list.length,l=new ale({type:e,size:n.size,name:i||"nodeUA"+a+(s?"_"+s:""),node:n,needsUpdate:r});return o.list.push(l),o[t].push(l),o[t][l.name]=l,this.uniforms[l.name]=l,l}else{let o=this.inputs.uniforms,a=o.list.length,l=new ale({type:e,name:i||"nodeU"+a+(s?"_"+s:""),node:n,needsUpdate:r});return o.list.push(l),o[t].push(l),o[t][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(t,e,n,i,r){return this.createUniform("vertex",t,e,n,i,r)}createFragmentUniform(t,e,n,i,r){return this.createUniform("fragment",t,e,n,i,r)}include(t,e,n){var s;let i;if(t=typeof t=="string"?ya.get(t):t,this.context.include===!1)return t.name;t instanceof kt?i=this.includes.functions:t instanceof hi?i=this.includes.consts:t instanceof l_e&&(i=this.includes.structs);let r=i[this.shader]=i[this.shader]||[];if(t){let o=r[t.name];if(o||(o=r[t.name]={node:t,deps:[]},r.push(o),o.src=t.build(this,"source")),t instanceof kt&&e&&r[e.name]&&r[e.name].deps.indexOf(t)===-1&&(r[e.name].deps.push(t),(s=t.includes)==null?void 0:s.length)){let a=0;do this.include(t.includes[a++],e);while(a<t.includes.length)}return n&&(o.src=n),t.name}else throw new Error("Include not found.")}colorToVectorProperties(t){return t.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(t){return t.replace(/c/g,"v3")}getIncludes(t,e){return this.includes[t][e||this.shader]}getConstructorFromLength(t){return LLt[t-1]}isTypeMatrix(t){return/^m/.test(t)}getTypeLength(t){return t==="f"?1:parseInt(this.colorToVector(t).substr(1))}getTypeFromLength(t){return t===1?"f":"v"+t}findNode(...t){for(let e=0;e<arguments.length;e++){let n=t[e];if(n!=null&&n.isNode)return n}}resolve(...t){for(let e=0;e<arguments.length;e++){let n=t[e];if(n!==void 0){if(n.isNode)return n;if(n.isTexture)switch(n.mapping){case Cv:case Tv:return new OLt(n);case YE:return new DLt(new vm(n));default:return new vm(n)}else{if(n.isVector2)return new cc(n);if(n.isVector3)return new tc(n);if(n.isVector4)return new S0(n)}}}}format(t,e,n){switch(this.colorToVector(n+" <- "+e)){case"f <- v2":return t+".x";case"f <- v3":return t+".x";case"f <- v4":return t+".x";case"f <- i":case"f <- b":return"float( "+t+" )";case"v2 <- f":return"vec2( "+t+" )";case"v2 <- v3":return t+".xy";case"v2 <- v4":return t+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+t+" ) )";case"v3 <- f":return"vec3( "+t+" )";case"v3 <- v2":return"vec3( "+t+", 0.0 )";case"v3 <- v4":return t+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+t+" ) )";case"v4 <- f":return"vec4( "+t+" )";case"v4 <- v2":return"vec4( "+t+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+t+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+t+" ) )";case"i <- f":case"i <- b":return"int( "+t+" )";case"i <- v2":return"int( "+t+".x )";case"i <- v3":return"int( "+t+".x )";case"i <- v4":return"int( "+t+".x )";case"b <- f":return"( "+t+" != 0.0 )";case"b <- v2":return"( "+t+" != vec2( 0.0 ) )";case"b <- v3":return"( "+t+" != vec3( 0.0 ) )";case"b <- v4":return"( "+t+" != vec4( 0.0 ) )";case"b <- i":return"( "+t+" != 0 )"}return t}getTypeByFormat(t){return RLt[t]||t}getFormatByType(t){return ILt[t]||t}getUUID(t,e){return e=e!==void 0?e:!0,e&&this.cache&&(t=this.cache+"-"+t),t}getElementByIndex(t){return ule[t]}getIndexByElement(t){return ule.indexOf(t)}isShader(t){return this.shader===t}setShader(t){return this.shader=t,this}mergeDefines(t){for(let e in t)this.defines[e]=t[e];return this.defines}mergeUniform(t){for(let e in t)this.uniforms[e]=t[e];return this.uniforms}getTextureEncodingFromMap(t){let e;return t?t.isTexture&&(e=t.encoding):e=id,e===id&&this.context.gamma&&(e=mn),e}},Or=class extends Dl{constructor(t=0,e,n,i){super("c"),this.nodeType="Color",this.value=t instanceof Pa?t:new Pa(t||0,e,n,i)}setRGBA(t){this.value.setRGBA(t.r,t.g,t.b,t.a)}generate(t,e,n,i,r,s){n=t.getUUID(n??this.getUUID()),i=i??this.getType(t);let o=t.getNodeData(n),a=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(t,"f");t.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return a?this.generateReadonly(t,e,n,i,r,s):t.isShader("vertex")?(o.vertex||(o.vertex=t.createVertexUniform(i,this,r,s,this.getLabel())),t.format(o.vertex.name,i,e)):(o.fragment||(o.fragment=t.createFragmentUniform(i,this,r,s,this.getLabel())),t.format(o.fragment.name,i,e))}generateReadonly(t,e,n,i,r,s){return t.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,e)}},yi=class extends Dl{constructor(t){super("i"),this.nodeType="Int",this.value=Math.floor(t??0)}generateReadonly(t,e,n,i,r,s){return t.format(this.value.toString(),i,e)}},u_e=class extends hg{constructor(){super("basic"),this.nodeType="Basic",this.color=new Or(5526619),this.shadingAlpha=new Ot(1),this.shadingBlend=new yi(0)}get category(){return"phong"}generate(t){let e;if(t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(Xw.merge([ut.fog])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{this.color===void 0&&(this.color=new Or(5526619)),this.color.analyze(t,{slot:"color"}),this.alpha&&this.alpha.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"});let n=this.color.flow(t,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(t,"f"):void 0,r=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0;t.requires.transparent=i!==void 0,t.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let s=["#include <normal_fragment_begin>",n.code];i&&s.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),r?s.push(r.code,`vec3 outgoingLight = ${n.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${r.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${n.result};`),i?s.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} );`):s.push("gl_FragColor = vec4("+n.result+", 1.0 );"),s.push("#include <fog_fragment>","#include <dithering_fragment>"),e=s.join(`
`)}return e}},u0=class extends Dl{constructor(t=1,e){super("f[]"),this.nodeType="FloatArray",this.size=t,this.value=Array.isArray(e)?e:typeof e=="number"?new Array(t).fill(e):new Array(t).fill(0)}},rr={normalRenderTarget:new vm,normalRenderTargetDepth:new vm,transmissionRenderTarget:new vm,transmissionSize:new cc(2048,2048),transmissionRenderTargetDepth:new vm,pixelRatioNode:new Ot(1),resolution:new cc,penumbraSize:new u0(5,.5)};for(let t of Object.values(rr))t.isRenderGlobal=!0;var kLt=class extends hg{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new Or(5526619),this.emissive=new Or(0),this.emissiveIntensity=new Ot(1),this.shadingAlpha=new Ot(1),this.shadingBlend=new yi(0)}get category(){return"lambert"}build(t){let e;if(t.define("LAMBERT"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(Xw.merge([ut.fog,ut.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{t.mergeUniform({penumbraSize:rr.penumbraSize}),this.color===void 0&&(this.color=new Or(5526619)),this.color.analyze(t,{slot:"color"}),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let n=this.color.flow(t,"c",{slot:"color"}),i=this.emissive.flow(t,"c",{slot:"emissive"}),r=this.emissiveIntensity.flow(t,"f",{slot:"emissive"}),s=this.shadingAlpha.flow(t,"f"),o=this.shadingBlend.flow(t,"i"),a=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(t,"f"):void 0;t.requires.transparent=l!==void 0,t.addParsCode(["uniform float penumbraSize[5];","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];c.push(n.code,"vec3 diffuseColor = "+n.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&c.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+r.result+";"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=c.join(`
`)}return e}},FLt=class extends hg{constructor(){super("phong"),this.nodeType="Phong",this.color=new Or(5526619),this.specular=new Or(1118481),this.shininess=new Ot(30),this.shadingAlpha=new Ot(1),this.shadingBlend=new yi(0)}get category(){return"phong"}build(t){let e;if(t.define("PHONG"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(Xw.merge([ut.fog,ut.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{t.mergeUniform({penumbraSize:rr.penumbraSize}),this.color===void 0&&(this.color=new Or(5526619)),this.color.analyze(t,{slot:"color"}),this.specular.analyze(t),this.shininess.analyze(t),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let n=this.color.flow(t,"c",{slot:"color"}),i=this.specular.flow(t,"c"),r=this.shininess.flow(t,"f"),s=this.shadingAlpha.flow(t,"f"),o=this.shadingBlend.flow(t,"i"),a=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(t,"f"):void 0;t.requires.transparent=l!==void 0,t.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];c.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",i.code,"	vec3 specular = "+i.result+";",r.code,"	float shininess = max( 0.0001, "+r.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=c.join(`
`)}return e}},NLt=class extends hg{constructor(){super("standard"),this.nodeType="Standard",this.color=new Or(5526619),this.roughness=new Ot(.3),this.metalness=new Ot(0),this.reflectivity=new Ot(.5),this.shadingAlpha=new Ot(1),this.shadingBlend=new yi(0)}get category(){return"physical"}build(t){let e;if(t.define("STANDARD"),t.requires.lights=!0,t.extensions.derivatives=!0,t.extensions.shaderTextureLOD=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(Xw.merge([ut.fog,ut.lights])),ut.LTC_1&&(t.uniforms.ltc_1={value:void 0},t.uniforms.ltc_2={value:void 0}),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{t.mergeUniform({penumbraSize:rr.penumbraSize});let n={gamma:!0};this.color===void 0&&(this.color=new Or(5526619)),this.color.analyze(t,{slot:"color",context:n}),this.roughness.analyze(t),this.metalness.analyze(t),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t),this.reflectivity&&this.reflectivity.analyze(t);let i=this.color.flow(t,"c",{slot:"color",context:n}),r=this.roughness.flow(t,"f"),s=this.metalness.flow(t,"f"),o=this.shadingAlpha.flow(t,"f"),a=this.shadingBlend.flow(t,"i"),l=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(t,"f"):void 0,h=this.reflectivity?this.reflectivity.flow(t,"f"):void 0;t.requires.transparent=c!==void 0,t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let u=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];u.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"	float roughnessFactor = "+r.result+";",s.code,"	float metalnessFactor = "+s.result+";"),c&&u.push(c.code,"#ifdef ALPHATEST","	if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),u.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),u.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),h?u.push(h.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+h.result+" ) ), diffuseColor, metalnessFactor );"):u.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),u.push("#include <lights_fragment_begin>"),u.push("#include <lights_fragment_end>"),u.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result}, ${a.result} );
				}
				`),l&&u.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=u.join(`
`)}return e}},zLt=class extends hg{constructor(){super("toon"),this.nodeType="Toon",this.color=new Or(5526619),this.specular=new Or(1118481),this.shininess=new Ot(30),this.shadingAlpha=new Ot(1),this.shadingBlend=new yi(0)}get category(){return"toon"}build(t){let e;if(t.define("TOON"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(Xw.merge([ut.fog,ut.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{t.mergeUniform({penumbraSize:rr.penumbraSize}),this.color===void 0&&(this.color=new Or(5526619)),this.color.analyze(t,{slot:"color"}),this.specular.analyze(t),this.shininess.analyze(t),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let n=this.color.flow(t,"c",{slot:"color"}),i=this.specular.flow(t,"c"),r=this.shininess.flow(t,"f"),s=this.shadingAlpha.flow(t,"f"),o=this.shadingBlend.flow(t,"i"),a=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(t,"f"):void 0;t.requires.transparent=l!==void 0,t.addParsCode(["uniform float penumbraSize[5];","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];c.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",r.code,"	float shininess = max( 0.0001, "+r.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=c.join(`
`)}return e}},KS=class extends Dl{constructor(t){super("b"),this.nodeType="Bool",this.value=t??!1}generateReadonly(t,e,n,i){return t.format(this.value?"true":"false",i,e)}},h_e=class extends Dl{constructor(t){super("m3"),this.nodeType="Matrix3",this.value=t??new Eo}generateReadonly(t,e,n,i,r,s){return t.format("mat3("+this.value.elements.join(", ")+")",i,e)}get elements(){return this.value.elements}set elements(t){this.value.fromArray(t)}},h0=class extends Dl{constructor(t=1,e){super("v4[]"),this.nodeType="Vector4Array",this.size=t,this.value=Array.isArray(e)?e:e instanceof Sn?new Array(t).fill(e):new Array(t).fill(new Sn(0))}},y7=(t=>(t.SIMPLEX="simplex3d",t.SIMPLEX_FRACTAL="simplex3dFractal",t.ASHIMA="simplexAshima",t.FBM="fbm",t.PERLIN="perlin",t))(y7||{}),_c=function(){let t=new kt(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),e=new kt(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[t]);e.keywords.F3=new hi("float F3 0.3333333"),e.keywords.G3=new hi("float G3 0.1666667");let n=new kt(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[e]),i=new kt("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),r=new kt("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new kt(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[i,r]),o=new kt("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),a=new kt("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),l=new kt(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[a]),c=new kt(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);c.keywords.NUM_OCTAVES=new hi("int NUM_OCTAVES 5");let h=new kt("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),u=new kt(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[i,r,h]);return{simplex:e,simplexFractal:n,simplexAshima:s,fbm:c,perlin:u}}(),d_e=class extends Pi{constructor(t,e,n,i,r,s,o,a,l,c,h,u){super("v3"),this.nodeType="Noise",this.scale=t,this.size=e,this.move=n,this.fA=i,this.fB=r,this.distortion=s,this.colorA=o,this.colorB=a,this.colorC=l,this.colorD=c,this.alpha=h,this.noiseType=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e,n,i,r){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let s=Object.values(y7)[this.noiseType.value],o=new kt(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {
                vec3 st = position / size;
				st /= scale;
				vec3 q = vec3(${s}(st),
							  ${s}(st + vec3(1.0)),
							  ${s}(st + vec3(1.0)));
				vec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
							  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
							  ${s}(st * q));
				float f = ${s}(st + r);
				vec4 color;
				color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
				color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
				color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));

                float lalpha = alpha * color.a;
                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return clamp(color, 0.0, 1.0).rgb;
			}`,[_c.simplex,_c.simplexFractal,_c.simplexAshima,_c.fbm,_c.perlin]),a=t.include(o),l=[];return l.push(this.scale.build(t,"f")),l.push(this.size.build(t,"v3")),l.push(this.move.build(t,"f")),l.push(this.fA.build(t,"v2")),l.push(this.fB.build(t,"v2")),l.push(this.distortion.build(t,"v2")),l.push(this.colorA.build(t,"v4")),l.push(this.colorB.build(t,"v4")),l.push(this.colorC.build(t,"v4")),l.push(this.colorD.build(t,"v4")),l.push(this.alpha.build(t,"f")),l.push(this.calpha),t.format(a+"("+l.join(",")+")",this.getType(t),e)}};d_e.numOctaves=5;var f_e=class extends Pi{constructor(t,e,n,i,r,s,o){super("v3"),this.nodeType="Fresnel",this.color=t,this.bias=e,this.scale=n,this.intensity=i,this.factor=r,this.alpha=s,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("vWorldViewDir"),t.require("worldNormal"),t.isShader("fragment")){t.addFragmentVariable(this.calpha,"float");let n=t.include(f_e.Nodes.fresnel),i=[];return i.push(this.color.build(t,"c")),i.push(this.bias.build(t,"f")),i.push(this.scale.build(t,"f")),i.push(this.intensity.build(t,"f")),i.push(this.factor.build(t,"f")),i.push(this.alpha.build(t,"f")),i.push(this.mode.build(t,"i")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("FresnelNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},p_e=f_e;p_e.Nodes=function(){return{fresnel:new kt(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {
				float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

				float lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;
				calpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;
				return color;
			}`)}}();var m_e=class extends Pi{constructor(t,e,n,i,r,s,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=t,this.movement=e,this.wavelengths=n,this.noiseStrength=i,this.noiseScale=r,this.offset=s,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("vWorldViewDir"),t.require("worldNormal"),t.isShader("fragment")){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let n=t.include(m_e.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(t,"f")),i.push(this.movement.build(t,"f")),i.push(this.wavelengths.build(t,"v3")),i.push(this.noiseStrength.build(t,"f")),i.push(this.noiseScale.build(t,"f")),i.push(this.offset.build(t,"v3")),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("RainbowNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},g_e=m_e;g_e.Nodes=function(){let t=new kt(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[_c.simplex]);return{rainbow:new kt(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {
                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);
                 float lalpha = alpha * rainbowContribution;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

                 return res;
             }`,[t])}}();var v_e=class extends Pi{constructor(t,e,n,i,r,s,o,a,l,c,h,u,d,f,p,m){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=t,this.contourColor=e,this.outlineWidth=n,this.contourWidth=i,this.contourThreshold=r,this.outlineThreshold=s,this.contourFrequency=o,this.outlineSmoothing=a,this.contourDirection=l,this.positionalLines=c,this.compensation=h,this.resolution=u,this.normalMap=d,this.depthMap=f,this.pixelRatio=p,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("vWorldViewDir"),t.require("worldNormal"),t.extensions.derivatives=!0,this.firstTime){let n=this.outlineWidth.build(t,"f"),i=this.resolution.build(t,"v2"),r=this.compensation.build(t,"b"),s=this.pixelRatio.build(t,"f");t.addVertexParsVariable("randomColor","attribute vec3"),t.addVertexParsVariable("extrudeNormal","attribute vec3"),t.addVertexParsVariable(n,"uniform float"),t.addVertexParsVariable(i,"uniform vec2"),t.addVertexParsVariable(r,"uniform bool"),t.addVertexParsVariable(s,"uniform float"),t.addVertexParsVariable("vID","flat out float"),t.addFragmentParsVariable("vID","flat in float");let o=`g${this.uuid.toString().replace(/-/g,"")}`;t.addVertexFinalCode(`
                vID = randomColor.r;
                if (${r}) {
                    vec4 ${o}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${o}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    vec2 ${o}_offset = normalize(${o}_clipNormal.xy) / ${i} * (${n} / 2.0) * ${o}_clipPosition.w * 2.0 * ${s};
                    ${o}_clipPosition.xy += ${o}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${o}_clipPosition;
                }
            `)}if(t.isShader("fragment")){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let n=t.include(v_e.Nodes.outline),i=[];return i.push(this.outlineColor.build(t,"c")),i.push(this.contourColor.build(t,"c")),i.push(this.outlineWidth.build(t,"f")),i.push(this.contourWidth.build(t,"f")),i.push(this.contourThreshold.build(t,"f")),i.push(this.outlineThreshold.build(t,"f")),i.push(this.contourFrequency.build(t,"f")),i.push(this.outlineSmoothing.build(t,"f")),i.push(this.contourDirection.build(t,"v3")),i.push(this.positionalLines.build(t,"b")),i.push(this.resolution.build(t,"v2")),i.push(this.normalMap.getTexture(t,"t")),i.push(this.depthMap.getTexture(t,"t")),i.push(this.pixelRatio.build(t,"f")),i.push(this.compensation.build(t,"b")),i.push(this.alpha.build(t,"f")),i.push(this.calpha),this.firstTime=!this.firstTime,t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("OutlineNode is not compatible with "+t.shader+" shader."),""}},y_e=v_e;y_e.Nodes=function(){let t=new kt(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 texelSize = (vec2(1.0) / resolution) * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -texelSize.x, -texelSize.y);
	uvSamples[1] = uv + vec2(0.0, -texelSize.y);
	uvSamples[2] = uv + vec2(  texelSize.x, -texelSize.y);
	uvSamples[3] = uv + vec2( -texelSize.x, 0.0);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  texelSize.x, 0.0);
	uvSamples[6] = uv + vec2( -texelSize.x, texelSize.y);
	uvSamples[7] = uv + vec2(0.0, texelSize.y);
	uvSamples[8] = uv + vec2(  texelSize.x, texelSize.y);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec4 sobel_edge_h = normalSamples[2] + (2.0*normalSamples[5]) + normalSamples[8] - (normalSamples[0] + (2.0*normalSamples[3]) + normalSamples[6]);
  	vec4 sobel_edge_v = normalSamples[0] + (2.0*normalSamples[1]) + normalSamples[2] - (normalSamples[6] + (2.0*normalSamples[7]) + normalSamples[8]);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new kt(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return result;
             }`,[t])}}();var x_e=class extends Pi{constructor(t,e,n,i,r,s,o,a){super("v3"),this.nodeType="Transmission",this.thickness=t,this.ior=e,this.roughness=n,this.transmissionSamplerSize=i,this.transmissionSamplerMap=r,this.transmissionDepthMap=s,this.aspectRatio=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.extensions.shaderTextureLOD=!0,t.extensions.derivatives=!0,t.isShader("fragment")){t.define("NUM_SAMPLES",30),t.require("worldPosition"),t.requires.worldNormal=!0,t.requires.modelMatrix=!0,t.requires.projectionMatrix=!0,t.addFragmentVariable(this.calpha,"float");let n=t.include(x_e.Nodes.transmission),i=[];return i.push(this.thickness.build(t,"f")),i.push(this.ior.build(t,"f")),i.push(this.roughness.build(t,"f")),i.push(this.transmissionSamplerSize.build(t,"v2")),i.push(this.transmissionSamplerMap.getTexture(t,"t")),i.push(this.transmissionDepthMap.getTexture(t,"t")),i.push(this.aspectRatio.build(t,"v2")),i.push("normal"),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("TransmissionNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},b_e=x_e;b_e.Nodes=function(){let t=new kt(`
            float gaussian(vec2 i) {
                const float sigma = float(NUM_SAMPLES) * .25;
                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );
            }`),e=new kt(`
            vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

                const int LOD = 2;
                const int sLOD = 4; // tile size = 2^LOD

                vec3 O = vec3(0);
                float a = 0.0;
                const int s = NUM_SAMPLES/sLOD;
                for ( int i = 0; i < s*s; i++ ) {
                    int modulo = (i)-((i)/(s))*(s);
                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;
                    vec2 uv = U + (scale * aspectRatio) * d;
                    // What is the depth of the opaque object we're trying to sample
                    float opaqueDepth = unpackRGBAToDepth(texture2D(dm, uv));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    float gaussian = gaussian(d);
		            #ifdef TEXTURE_LOD_EXT
                    O += gaussian * texture2DLodEXT( sp, uv, lod).rgb;
                    #else
                    O += gaussian * textureLod( sp, uv, lod).rgb;
                    #endif
                    a += gaussian;
                }
                return O / a;
            }`,[t]),n=new kt(`
            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        // Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		        // The thickness is specified in local space.
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),i=new kt(`
float applyIorToRoughness( float roughness, float ior ) {
		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	} `),r=new kt(`
vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
        float lod = applyIorToRoughness(roughness, ior);

        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
	}`,[i,e]),s=new kt(`
vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
        vec3 refractedRayExit = position + transmissionRay;

        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
        vec2 refractionCoords = ndcPos.xy / ndcPos.w;
        refractionCoords += 1.0;
        refractionCoords /= 2.0;

        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
        unrefractedCoords += 1.0;
        unrefractedCoords /= 2.0;

        // Sample framebuffer to get pixel the refracted ray hits.
        return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    }`,[r,n]);return{transmission:new kt(`
            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                float lalpha = alpha;

                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return transmission;
            }`,[s])}}();var OA=class extends Pi{constructor(t,e,n,i,r,s,o,a,l,c,h){super("v3"),this.nodeType="Depth",this.gradientType=t,this.smooth=e,this.near=n,this.far=i,this.isVector=r,this.isWorldSpace=s,this.origin=o,this.direction=a,this.colors=l,this.steps=c,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){let n=`g${this.uuid.toString().replace(/-/g,"")}`,i=new kt(`vec3 ${n}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${n}_MAX_COLORS], float steps[${n}_MAX_COLORS], float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${n}_IS_VECTOR
                   #ifdef ${n}_LINEAR
                       #ifdef ${n}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${n}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${n}_SMOOTH
				for ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a;
               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
               return color.rgb;
			}`,[OA.Nodes.vectorLinearWorldSpaceDepth,OA.Nodes.vectorLinearObjectSpaceDepth,OA.Nodes.vectorSphericalObjectSpaceDepth,OA.Nodes.vectorSphericalWorldSpaceDepth]);if(t.isShader("fragment")){t.define(`${n}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&t.define(`${n}_SMOOTH`),this.isVector.value>.5&&t.define(`${n}_IS_VECTOR`),this.gradientType.value===0&&t.define(`${n}_LINEAR`),this.isWorldSpace.value>.5&&t.define(`${n}_WORLDSPACE`),t.require("worldPosition"),t.addFragmentVariable(this.calpha,"float");let r=t.include(i),s=[];return s.push(this.near.build(t,"f")),s.push(this.far.build(t,"f")),s.push(this.origin.build(t,"v3")),s.push(this.direction.build(t,"v3")),s.push(this.colors.build(t,"v4[]")),s.push(this.steps.build(t,"f[]")),s.push(this.alpha.build(t,"f")),s.push(this.calpha),t.format(r+"("+s.join(",")+")",this.getType(t),e)}else return console.warn("DepthNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},w_e=OA;w_e.Nodes=function(){let t=new kt(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),e=new kt(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),n=new kt(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),i=new kt(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:t,vectorLinearObjectSpaceDepth:e,vectorSphericalWorldSpaceDepth:n,vectorSphericalObjectSpaceDepth:i}}();var hle=class extends Pi{constructor(t,e,n,i){super("v3"),this.nodeType="Blend",this.a=t,this.b=e,this.alpha=n,this.mode=i}generate(t,e){if(t.isShader("fragment")){let n=[];return n.push(this.a.build(t,"c")),n.push(this.b.build(t,"c")),n.push(this.alpha.build(t,"f")),n.push(this.mode.build(t,"i")),t.format("spe_blend("+n.join(",")+")",this.getType(t),e)}else return console.warn("BlendNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},Bj=(t=>(t.NOISE="noise",t.MAP="map",t))(Bj||{}),__e=class extends Pi{constructor(t,e,n,i,r){super("v3"),this.displacementTypeIndex=new yi(0),this.nodeType="VertexDisplacement",this.intensity=t,this.movementOrTexture=e,Object.values(Bj)[this.displacementTypeIndex.value]==="map"&&(this.mat=new h_e(this.movementOrTexture.value.matrix)),this.cropOrOffset=n,this.scale=i,this.noiseFunctionIndex=r}generate(t,e){if(t.isShader("vertex")){t.define("USE_LAYER_DISPLACE");let n,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(Bj)[this.displacementTypeIndex.value]){case"map":{n=t.include(__e.Nodes.map),i.push(this.movementOrTexture.getTexture(t,"t")),i.push("uv"),i.push(this.cropOrOffset.build(t,"f")),this.mat&&i.push(this.mat.build(t,"mat3"));break}case"noise":{let r=Object.values(y7)[this.noiseFunctionIndex.value],s=new kt(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),o=new kt(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {
							return p + n * ${r}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
						}`,[_c.simplex,_c.simplexFractal,_c.simplexAshima,_c.fbm,_c.perlin]),a=new kt(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[o,s]);n=t.include(a),i.push(this.scale.build(t,"f")),i.push(this.cropOrOffset.build(t,"v3")),i.push(this.movementOrTexture.build(t,"f"));break}}return i.push(this.intensity.build(t,"f")),i.push("displaced_normal"),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("VertexDisplacementNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},S_e=__e;S_e.Nodes=function(){let t=new kt(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),e=new kt(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new kt(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[t,e])}}();var A_e=class extends Pi{constructor(t,e,n,i,r,s,o,a){super("v3"),this.nodeType="Gradient",this.gradientType=t,this.smooth=e,this.colors=n,this.steps=i,this.offset=r,this.morph=s,this.angle=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.isShader("fragment")){t.define("GRAD_MAX",10),t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let n=t.include(A_e.Nodes.gradient),i=[];return i.push(this.gradientType.build(t,"i")),i.push(this.smooth.build(t,"b")),i.push(this.colors.build(t,"v4[]")),i.push(this.steps.build(t,"f[]")),i.push(this.offset.build(t,"v2")),i.push(this.morph.build(t,"v2")),i.push(this.angle.build(t,"f")),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("GradientNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},M_e=A_e;M_e.Nodes=function(){return{gradient:new kt(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return color.xyz;
			}`)}}();var ZD=class extends Pi{constructor(t,e,n,i,r,s,o,a,l,c){super("v3"),this.nodeType="CustomTexture",this.firstTime=!0,this.texture=t,this.textureSize=e,this.crop=n,this.projection=i,this.axis=r,this.side=s,this.size=o,this.mat=a,this.alpha=l,this.mode=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){t.require("position"),t.require("normal"),t.require("uv"),t.requires.uv=[!0],t.extensions.shaderTextureLOD=!0,t.extensions.derivatives=!0;let n=`g${this.uuid.toString().replace(/-/g,"")}`,i;switch(this.projection.value){case 3:i=t.include(ZD.Nodes.cylindrical);break;case 2:i=t.include(ZD.Nodes.spherical);break;case 1:let s=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],o=new kt(`
		vec3 ${n}_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( (${n}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${s}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);i=t.include(o);break;default:i=t.include(ZD.Nodes.uv);break}if(this.projection.value===1&&this.firstTime){t.addVertexParsCode(`varying vec2 ${n}_vCustomUv;`),t.addFragmentParsCode(`varying vec2 ${n}_vCustomUv;`);let s=["zy","xz","xy"][this.axis.value];t.addVertexFinalCode(`${n}_vCustomUv = (1. + (transformed.${s})) / 2.;`)}t.addFragmentVariable(this.calpha,"float");let r=[];return r.push(this.texture.generate(t,"t")),r.push(this.textureSize.build(t,"v2")),r.push(this.crop.build(t,"f")),r.push(this.mat.build(t,"mat3")),r.push(this.size.build(t,"v2")),r.push(this.alpha.build(t,"f")),r.push(this.mode.build(t,"i")),r.push(this.calpha),this.firstTime=!this.firstTime,t.format(i+"("+r.join(",")+")",this.getType(t),e)}},E_e=ZD;E_e.Nodes=function(){let t=new kt(`
vec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),e=new kt(`
vec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),n=new kt(`vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);return{cylindrical:t,spherical:e,uv:n}}();var C_e=class extends Pi{constructor(t,e){super("v3"),this.nodeType="CustomNormal",this.cnormal=t,this.alpha=e}generate(t,e){if(t.isShader("fragment")){let n=t.include(C_e.Nodes.customNormal),i=[];return i.push(this.cnormal.build(t,"v3")),i.push("normal"),i.push(this.alpha.build(t,"f")),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("CustomNormalNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},T_e=C_e;T_e.Nodes=function(){return{customNormal:new kt(`vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return normal;
			}`)}}();function dl(t,e){return e.color(t)}function ULt(t,e){switch(t.type){case"fresnel":return jLt(t,e);case"gradient":return VLt(t);case"depth":return WLt(t);case"normal":return $Lt(t);case"noise":return qLt(t,e);case"rainbow":return XLt(t);case"toon":return YLt(t,e);case"outline":return KLt(t,e);case"transmission":return JLt(t);case"color":return HLt(t,e)}}function GLt(t){return{type:t.type}}function vd(t){let{alpha:e,mode:n}=t;return{...GLt(t),alpha:e,mode:n}}function HLt(t,e){return{...vd(t),color:dl(t.color,e)}}function jLt(t,e){let{bias:n,scale:i,intensity:r,factor:s,color:o}=t;return{...vd(t),color:dl(o,e),bias:n,scale:i,intensity:r,factor:s}}function VLt(t){let{gradientType:e,smooth:n,colors:i,steps:r,angle:s,offset:o,morph:a}=t;return{...vd(t),gradientType:e,smooth:n,colors:i.map(l=>new Sn(l[0],l[1],l[2],l[3])),num:i.length,steps:r,offset:new Ae(...o),morph:new Ae(...a),angle:s}}function WLt(t){let{gradientType:e,near:n,far:i,isVector:r,isWorldSpace:s,origin:o,direction:a,colors:l,steps:c,smooth:h}=t;return{...vd(t),gradientType:e,near:n,far:i,isVector:r,isWorldSpace:s,origin:new G(...o),direction:a?new G(...a):new G(1,0,0),colors:l.map(u=>u!==void 0?new Sn(u[0],u[1],u[2],u[3]):new Sn(0,0,0,0)),steps:c.slice(0,l.length),smooth:h}}function $Lt(t){let{cnormal:e}=t;return{...vd(t),cnormal:new G(e[0],e[1],e[2])}}function qLt(t,e){return{...vd(t),scale:t.scale,move:t.move,fA:new Ae(...t.fA),fB:new Ae(...t.fB),size:new G(...t.size),distortion:new Ae(...t.distortion),colorA:dl(t.colorA,e),colorB:dl(t.colorB,e),colorC:dl(t.colorC,e),colorD:dl(t.colorD,e),noiseType:t.noiseType}}function XLt(t){return{...vd(t),filmThickness:t.filmThickness,movement:t.movement,wavelengths:new G(...t.wavelengths),noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,offset:new G(...t.offset)}}function YLt(t,e){return{...vd(t),positioning:t.positioning,colors:t.colors.map(n=>new Sn(n[0],n[1],n[2],n[3])),num:t.colors.length,steps:t.steps,source:new G(...t.source),isWorldSpace:t.isWorldSpace,noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,shadowColor:dl(t.shadowColor,e),offset:new G(...t.offset)}}function KLt(t,e){return{...vd(t),outlineColor:dl(t.outlineColor,e),contourColor:dl(t.contourColor,e),outlineWidth:t.outlineWidth,contourWidth:t.contourWidth,outlineThreshold:t.outlineThreshold,contourThreshold:t.contourThreshold,outlineSmoothing:t.outlineSmoothing,contourFrequency:t.contourFrequency,contourDirection:new G(...t.contourDirection),positionalLines:t.positionalLines,compensation:t.compensation}}function JLt(t,e){return{...vd(t),thickness:t.thickness,ior:t.ior,roughness:t.roughness}}var uR=class extends Pa{},ZLt=class{constructor(t=1e3*10){this.timeout=t,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...t){}remove(t){let e=this.cache.get(t);e&&(this.dispose(t,e.data),this.cache.delete(t),e.prev.next=e.next,e.next.prev=e.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let t=Date.now(),e=this.head.next;for(;e.time<t-this.timeout;)this.dispose(e.src,e.data),this.cache.delete(e.src),e=e.next,e.prev=this.head,this.head.next=e;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(t){var e;return(e=this.cache.get(t))==null?void 0:e.data}load(t){let e=Date.now(),n=this.cache.get(t);return n===void 0?(n={data:this.create(t),src:t,time:e,next:null,prev:null},this.cache.set(t,n)):(n.time=e,n.prev.next=n.next,n.next.prev=n.prev),n.prev=this.tail.prev,n.next=this.tail,this.tail.prev.next=n,this.tail.prev=n,this.scheduleCleanup(),n.data}},QLt=class extends ZLt{create(t){return URL.createObjectURL(new Blob([t]))}dispose(t,e){URL.revokeObjectURL(e)}},oz;function eRt(t){return typeof t=="string"?t:(oz||(oz=new QLt),oz.load(t))}var tRt=class{constructor(t,e){this.data=t,this.cache=e,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},nRt=class{constructor(){this.cache=new Map}remove(t){this.cache.delete(t.data)}load(t){let e=this.cache.get(t);return e===void 0&&(e=this.create(t),this.cache.set(t,e)),e.refCount+=1,e}},P_e=class extends tRt{constructor(t,e){super(t,e.imageHolderCache),this.data=t,this.shared=e,this.loaded=!1,this.isVideo=!1,this.isVideo=t.type=="video",this.updateSrc(t.data)}async updateSrc(t){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let e=()=>{this.loaded=!0;let i=[1e3,1001,1002];for(let r of i){let s=this[r];s&&(s.image=this.img,s.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof t!="string"){var n=new FileReader;n.readAsDataURL(new Blob([t],{type:"video/mp4"}));let i;await new Promise(r=>{n.onloadend=s=>{var o;i=(o=s.target)==null?void 0:o.result,r(null)}}),this.img.src=i}else this.img.src=t;this.img.onloadeddata=()=>{e()}}else this.img=new Image,this.img.src=eRt(t),this.img.onload=e}getTexture(t){let e=this[t];if(e)return e;{let n;return this.isVideo?n=new Zwt(this.img,void 0,t,t):n=new Hs(this.img,void 0,t,t),this.loaded&&(n.needsUpdate=!0),this[t]=n,n}}disposeTextures(){var t,e,n;(t=this[1e3])==null||t.dispose(),this[1e3]=void 0,(e=this[1001])==null||e.dispose(),this[1001]=void 0,(n=this[1002])==null||n.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},F0=class extends P_e{},x7=class extends Dl{},D_e={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],depth:["smooth","isWorldSpace","gradientType","isVector"]},O_e={depth:["colors"]};function iRt(t,e,n){var s,o;let i=D_e[t.type],r=O_e[t.type];if(r!==void 0){let a=t.color;if(r.includes(e)){let l=(o=(s=a[e])==null?void 0:s.value)==null?void 0:o.length;if(l!==void 0&&l!==n.length)return!0}}return i!==void 0?i.includes(e):!1}function L_e(t,e,n){let i=n.uniforms[`f${n.id}_texture`];if(!i)return!1;let r=!1,s=t;if("image"in s){let o=s.image,a=e.image(o),l=i;l.image instanceof F0||l.image.deref(),l.image=a}if("video"in s){let o=s.video,a=e.video(o),l=i;l.image instanceof F0||l.image.deref(),l.image=a}if("wrapping"in s){let o=i;o.wrap=s.wrapping}if("repeat"in s||"offset"in s){let o="mat",a=n.uniforms[`f${n.id}_${o}`];"repeat"in s&&(a.repeat=s.repeat),"offset"in s&&(a.offset=s.offset),a.updateMatrix()}return r}function rRt(t,e,n,i){let r=!1;for(let[s,o]of Object.entries(t)){if(!s||o===void 0)continue;if(N_e(s,n,i)){s==="visible"&&n.type==="light"&&(r=!0);continue}n.visible=i.visible;let a=n.uniforms[`f${n.id}_${s}`];if(a&&!(a instanceof x7))switch(r=r||iRt(n,s,o),a.constructor){case Or:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof uR?a.value=new Pa(l.r,l.g,l.b,l.a):a.setRGBA(l);break}case S0:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof uR?a.value=new Pa(l.r,l.g,l.b,l.a):a.value.setRGBA(l.r,l.g,l.b,l.a);break}case cc:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]);break}case tc:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]),a.value.setZ(l[2]);break}case vm:{L_e(o,e,n);break}case h0:{a.value=o.map(l=>new Sn(...l));break}default:{a.value=o;break}}}return r}var R_e=class extends Pi{constructor(t,e,n){super("v3"),this.nodeType="Matcap",this.texture=t,this.alpha=e,this.mode=n,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.isShader("fragment")){t.addFragmentVariable(this.calpha,"float");let n=t.include(R_e.Nodes.matcap);t.require("normal"),t.requires.normal=!0;let i=[];return i.push(this.texture.generate(t,"t")),i.push("normal"),i.push(this.alpha.build(t,"f")),i.push(this.mode.build(t,"i")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("MatcapNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},I_e=R_e;I_e.Nodes=function(){return{matcap:new kt(`vec3 matcap(sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {
                vec3 viewDir = normalize( vViewPosition );
                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
                vec3 y = cross( viewDir, x );
                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
                vec4 matcapColor = texture2D( matcapTex, uv );

                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;
                
                return matcapColor.rgb;
            }
            `)}}();var kj=class extends x7{constructor(t,e){super("t"),this.image=t,this.wrap=e}get value(){return this.image.getTexture(this.wrap)}},sRt=class extends x7{constructor(t){super("v3"),this.image=t,this._value=new G}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},B_e=class extends Pi{constructor(t,e,n,i,r,s,o,a,l,c){super("v3"),this.nodeType="Toon",this.positioning=t,this.colors=e,this.steps=n,this.source=i,this.isWorldSpace=r,this.noiseStrength=s,this.noiseScale=o,this.shadowColor=a,this.offset=l,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("worldNormal"),t.require("worldPosition"),t.isShader("fragment")){t.define("COLORS_MAX",10),t.addFragmentVariable(this.calpha,"float");let n=t.include(B_e.Nodes.toon),i=[];return i.push(this.positioning.build(t,"i")),i.push(this.colors.build(t,"v4[]")),i.push(this.steps.build(t,"f[]")),i.push(this.source.build(t,"v3")),i.push(this.isWorldSpace.build(t,"b")),i.push(this.noiseStrength.build(t,"f")),i.push(this.noiseScale.build(t,"f")),i.push(this.shadowColor.build(t,"v4")),i.push(this.offset.build(t,"v3")),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("ToonNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},k_e=B_e;k_e.Nodes=function(){let t=new kt(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),e=new kt(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),n=new kt(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[e]),i=new kt(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),r=new kt(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[i]);return{toon:new kt(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[_c.simplex,t,n,r])}}();function dle(t,e,n){t.setUvTransform(n[0],n[1],e[0],e[1],0,0,0)}var oRt=class extends h_e{constructor(t,e){super(new Eo),this.repeat=t,this.offset=e,dle(this.value,t,e)}updateMatrix(){dle(this.value,this.repeat,this.offset)}},sv=class{constructor(t,e,n,i){this.id=t,this.uuid=e,this.data=n,this.uniforms={};for(let r in i)this.uniforms[`f${this.id}_${r}`]=i[r];for(let r in n)N_e(r,this,n)}get type(){return this.data.type}static create(t,e,n,i){if(n.type==="light")return kx.createLigherLayer(t,e,n,i);if(n.type==="texture"||n.type==="video"){let r=n.type==="texture"?i.image(n.texture.image):i.video(n.texture.video),s=new kj(r,n.texture.wrapping),o=new sRt(r),a=new oRt(n.texture.repeat,n.texture.offset),l=new Ot(n.crop?1:0),c=new yi(n.projection??0),h=new yi(["x","y","z"].indexOf(n.axis)??0),u=new yi(n.side??0),d=new cc(n.size?new Ae(n.size[0],n.size[1]):new Ae(100,100)),f=new Ot(n.alpha??1),p=new yi(n.mode??0),m=new E_e(s,o,l,c,h,u,d,a,f,p),g=new Yi(m.calpha,"f");return new Zs(t,e,n,{texture:s,textureSize:o,crop:l,projection:c,axis:h,side:u,size:d,mat:a,alpha:f,mode:p},m,p,g)}else if(n.type==="matcap"){let r=i.image(n.texture.image),s=new kj(r,n.texture.wrapping),o=new Ot(n.alpha??1),a=new yi(n.mode??0),l=new I_e(s,o,a),c=new Yi(l.calpha,"f");return new Zs(t,e,n,{texture:s,alpha:o,mode:a},l,a,c)}else if(n.type==="displace")if(n.displacementType==="noise"){let r=new tc(new G(...n.offset)),s=new Ot(n.scale??10),o=new Ot(n.intensity??8),a=new Ot(n.movement??1),l=new yi(n.noiseType??0),c=new S_e(o,a,r,s,l);return new F_e(t,e,n,{offset:r,scale:s,intensity:o,movement:a,noiseType:l},c)}else throw new Error;else return cRt(t,e,n,i)}updateByOp(t,e,n){var r;let i=t;if(i.path[0]===void 0){if(i.type===0)return"type"in i.props||"category"in i.props||"visible"in i.props?((r=n.scene)==null||r.markNeedsUpdateRendererDirty(),!0):rRt(i.props,n.shared,this,e)}else if(i.path[0]==="texture")return"texture"in e||"video"in e?L_e(i.props,n.shared,this):!0;return!1}dispose(){if(aRt(this)){let t=this.uniforms[`f${this.id}_texture`];if(!t)return!1;let e=t;e.image instanceof F0||e.image.deref()}}hasValueByKey(t){return this.uniforms[t]!==void 0}hasValue(t){return this.hasValueByKey(`f${this.id}_${t}`)}setValue(t,e){let n=`f${this.id}_${t}`;this.hasValueByKey(n)&&e!==void 0&&(this.uniforms[n].value=e)}getNode(t){let e=`f${this.id}_${t}`;if(this.hasValueByKey(e))return this.uniforms[e]}getValue(t){let e=`f${this.id}_${t}`;if(this.hasValueByKey(e))return this.uniforms[e].value}getName(t){let e=/f\d+_(.*)/.exec(t);if(e&&e.length>1)return e[1];console.log(`Layer.getName: error ${t}`)}getNames(){let t=[];for(let e in this.uniforms){let n=this.getName(e);n&&t.push(n)}return t}},Zs=class extends sv{constructor(t,e,n,i,r,s,o){super(t,e,n,i),this.params=i,this.color=r,this.mode=s,this.alpha=o}},F_e=class extends sv{constructor(t,e,n,i,r){super(t,e,n,i),this.position=r}},kx=class extends sv{constructor(t,e,n,i,r){super(t,e,n,r),this.node=i}static createLigherLayer(t,e,n,i){let r,s=new Ot(n.alpha),o=new yi(n.mode),a;if(!n.visible)r=new u_e,a={};else if(n.category==="lambert"){r=new kLt;let l=new Or(i.color(n.emissive)??0);a={emissive:l},r.emissive=l}else if(n.category==="toon"){r=new zLt;let l=new Ot(n.shininess??30),c=new Or(i.color(n.specular)??1118481);a={shininess:l,specular:c},r.shininess=l,r.specular=c}else if(n.category==="physical"){r=new NLt;let l=new Ot(n.roughness??.3),c=new Ot(n.metalness??0),h=new Ot(n.reflectivity??.5);a={roughness:l,metalness:c,reflectivity:h},r.roughness=l,r.metalness=c,r.reflectivity=h}else{r=new FLt;let l=new Ot(n.shininess??30),c=new Or(n.specular!==void 0?i.color(n.specular)??1118481:1118481);a={shininess:l,specular:c},r.shininess=l,r.specular=c}return r.alpha=new Ot(1),r.shadingAlpha=s,r.shadingBlend=o,a.alpha=r.shadingAlpha,a.mode=r.shadingBlend,new kx(t,e,n,r,a)}get category(){return this.node.category}};function aRt(t){let e=t instanceof sv?t.type:t;return e==="texture"||e==="video"||e==="displace_map"||e==="matcap"}function lRt(t,e,n,i){switch(t.type){case"color":{let r=new Or(i.color??5526619),s=new Ot(i.alpha??1),o=new Yi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=s;let a=new yi(i.mode??0);return r.alpha=s,new Zs(e,n,t,{color:r,alpha:s,mode:a},r,a,o)}case"fresnel":{let r=new Or(i.color??16777215),s=new Ot(i.bias??.1),o=new Ot(i.scale??1),a=new Ot(i.intensity??2),l=new Ot(i.factor??1),c=new Ot(i.alpha??1),h=new yi(i.mode??0),u=new p_e(r,s,o,a,l,c,h),d=new Yi(u.calpha,"f");return new Zs(e,n,t,{color:r,bias:s,scale:o,intensity:a,factor:l,alpha:c,mode:h},u,h,d)}case"rainbow":{let r=new Ot(i.filmThickness??30),s=new Ot(i.movement??0),o=new tc(i.wavelengths??new G(0,0,0)),a=new Ot(i.noiseStrength??0),l=new Ot(i.noiseScale??1),c=new tc(i.offset??new G(0,0,0)),h=new Ot(i.alpha??1),u=new g_e(r,s,o,a,l,c,h),d=new Yi(u.calpha,"f"),f=new yi(i.mode??0);return new Zs(e,n,t,{filmThickness:r,movement:s,wavelengths:o,noiseStrength:a,noiseScale:l,offset:c,alpha:h,mode:f},u,f,d)}case"transmission":{let r=new Ot(i.thickness??10),s=new Ot(i.ior??1.5),o=new Ot(i.roughness??.5),a=rr.transmissionSize,l=rr.transmissionRenderTarget,c=rr.transmissionRenderTargetDepth,h=window.innerWidth,u=window.innerHeight,d=h>=u?new cc(u/h,1):new cc(1,h/u),f=new Ot(i.alpha??1),p=new b_e(r,s,o,a,l,c,d,f),m=new Yi(p.calpha,"f"),g=new yi(i.mode??0);return new Zs(e,n,t,{thickness:r,ior:s,roughness:o,aspectRatio:d,alpha:f,mode:g},p,g,m)}case"toon":{let r=new yi(i.positioning??0),s;i.colors?s=new h0(i.colors.length,i.colors):(s=new h0(10,new Sn(0,0,0,1)),s.value[1]=new Sn(1,1,1,1));let o;i.steps?o=new u0(i.steps.length,i.steps):(o=new u0(10,1),o.value[0]=0);let a=new tc(i.source??new G(0,0,0)),l=new KS(i.isWorldSpace??!0),c=new Ot(i.noiseStrength??0),h=new Ot(i.noiseScale??1),u=new S0(i.shadowColor),d=new tc(i.offset??new G(0,0,0)),f=new Ot(i.alpha??1),p=new k_e(r,s,o,a,l,c,h,u,d,f),m=new Yi(p.calpha,"f"),g=new yi(i.mode??0);return new Zs(e,n,t,{positioning:r,colors:s,steps:o,source:a,isWorldSpace:l,noiseStrength:c,noiseScale:h,shadowColor:u,offset:d,alpha:f,mode:g},p,g,m)}case"outline":{let r=new Or(i.outlineColor??16777215),s=new Or(i.contourColor??16777215),o=new Ot(i.outlineWidth??.1),a=new Ot(i.contourWidth??.1),l=new Ot(i.outlineThreshold??.1),c=new Ot(i.contourThreshold??.1),h=new Ot(i.outlineSmoothing??.1),u=new Ot(i.contourFrequency??.1),d=new tc(i.contourDirection??new G(0,1,0)),f=new KS(i.positionalLines??!1),p=new KS(i.compensation??!0),m=rr.normalRenderTarget,g=rr.normalRenderTargetDepth,v=rr.pixelRatioNode,y=rr.resolution,x=new Ot(i.alpha??1),b=new y_e(r,s,o,a,l,c,h,u,d,f,p,y,m,g,v,x),S=new Yi(b.calpha,"f"),A=new yi(i.mode??0);return new Zs(e,n,t,{outlineColor:r,contourColor:s,outlineWidth:o,contourWidth:a,outlineThreshold:l,contourThreshold:c,outlineSmoothing:h,contourFrequency:u,contourDirection:d,positionalLines:f,compensation:p,alpha:x,mode:A},b,A,S)}case"depth":{let r=new yi(i.gradientType??0),s=new KS(i.smooth??!1),o=new Ot(i.near??50),a=new Ot(i.far??200),l=new Ot(i.isVector??1),c=new Ot(i.isWorldSpace??0),h=new tc(i.origin??new G),u=new tc(i.direction??new G),d;i.colors?d=new h0(i.colors.length,i.colors):(d=new h0(2,new Sn(0,0,0,1)),d.value[1]=new Sn(1,1,1,1));let f;i.steps?f=new u0(i.steps.length,i.steps):(f=new u0(2,1),f.value[0]=0);let p=new Ot(i.alpha??1),m=new yi(i.mode??0),g=new w_e(r,s,o,a,l,c,h,u,d,f,p),v=new Yi(g.calpha,"f");return new Zs(e,n,t,{gradientType:r,smooth:s,near:o,far:a,isVector:l,isWorldSpace:c,origin:h,direction:u,colors:d,steps:f,alpha:p,mode:m},g,m,v)}case"noise":{let r=new Ot(i.scale??1),s=new tc(i.size??new G(100,100,100)),o=new Ot(i.move??1),a=new cc(i.fA??new Ae(1.7,9.2)),l=new cc(i.fB??new Ae(8.3,2.8)),c=new cc(i.distortion??new Ae(1,1)),h=new S0(i.colorA),u=new S0(i.colorB),d=new S0(i.colorC),f=new S0(i.colorD),p=new Ot(i.alpha??1),m=new yi(i.mode??0),g=new yi(i.noiseType??0),v=new d_e(r,s,o,a,l,c,h,u,d,f,p,g),y=new Yi(v.calpha,"f");return new Zs(e,n,t,{scale:r,size:s,move:o,fA:a,fB:l,distortion:c,colorA:h,colorB:u,colorC:d,colorD:f,alpha:p,mode:m,noiseType:g},v,m,y)}case"normal":{let r=new tc(i.cnormal??new G(1,1,1)),s=new Ot(i.alpha??1),o=new yi(i.mode??0),a=new T_e(r,s),l=new Yi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return l.keywords.alpha=s,new Zs(e,n,t,{cnormal:r,alpha:s,mode:o},a,o,l)}case"gradient":{let r=new yi(i.gradientType??0),s=new KS(i.smooth??!1),o;i.colors?o=new h0(i.colors.length,i.colors):(o=new h0(10,new Sn(0,0,0,1)),o.value[1]=new Sn(1,1,1,1));let a;i.steps?a=new u0(i.steps.length,i.steps):(a=new u0(10,1),a.value[0]=0);let l=new cc(i.offset??new Ae(0,0)),c=new cc(i.morph??new Ae(0,0)),h=new Ot(i.angle??0),u=new Ot(i.alpha??1),d=new yi(i.mode??0),f=new M_e(r,s,o,a,l,c,h,u),p=new Yi(f.calpha,"f");return new Zs(e,n,t,{gradientType:r,smooth:s,colors:o,steps:a,offset:l,morph:c,angle:h,alpha:u,mode:d},f,d,p)}default:{let r=new Or(1,0,0,1),s=new Ot(1),o=new Yi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=s;let a=new yi(0);return r.alpha=s,new Zs(e,n,t,{color:r,alpha:s,mode:a},r,a,o)}}}function cRt(t,e,n,i){let r=ULt(n,i);return lRt(n,t,e,r)}function N_e(t,e,n){if(n.type==="displace"&&(t==="intensity"||t==="visible")){let i=e.uniforms[`f${e.id}_intensity`];return i?(i.value=n.intensity*(n.visible?1:0),i):void 0}if(n.type!=="displace"&&(t==="alpha"||t==="visible")){let i=e.uniforms[`f${e.id}_alpha`];if(!i)return;if(i.value=n.alpha*(n.visible?1:0),n.type==="outline"&&t==="visible"){let r=e.uniforms[`f${e.id}_compensation`];r&&(r.value=n.compensation&&n.visible)}return i}}function hR(t,e){let n=0;for(let i of t.layers)if(i.data.type!=="displace"&&"alpha"in i.data&&i.data.type!=="light"&&i.data.type!=="fresnel"&&i.data.type!=="texture"&&i.data.type!=="matcap"&&i.data.type!=="rainbow"&&i.data.type!=="outline"){let r=i.data.visible?i.data.alpha:0;if(r===1&&i.data.type==="depth"||i.data.type==="gradient"){for(let s of i.data.colors)if(s[3]<1){r=s[3];break}}else if(r===1&&i.data.type==="noise"){let s=e.color(i.data.colorA).a,o=e.color(i.data.colorB).a,a=e.color(i.data.colorC).a,l=e.color(i.data.colorD).a,c=Math.min(s,Math.min(o,Math.min(a,l)));c<1&&(r=c)}n+=(1-n)*r}return n<1}var Km=class extends Ms{constructor(){super(void 0),this.flatShading=!1,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},uRt=class extends Km{constructor(t,e,n,i){super(),this.flatShading=t,this.side=e,this.wireframe=n,this.root=i}updateAfterBuild(){let t=this.root;this.lights=t.lights,this.vertexShader=t.vertexShader,this.fragmentShader=t.fragmentShader,this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.transparent=t.transparent,this.cacheKey=t.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(t,e){this.root.onBeforeCompile(t)}get data(){return this.root.data}get category(){return this.root.category}getFlavor(t,e,n){return this.root.getFlavor(t,e,n)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(t){return this.root.getLayersOfType(t)}getLayerByUuid(t){return this.root.getLayerByUuid(t)}updateByOp(t,e,n){this.root.updateByOp(t,e,n)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},z_e=class extends Km{constructor(t,e){super(),this.data=t,this.layerIdGen=0,this.flavors=[],this.type="NodeMaterial",this.updaters=[],this.reset0(t,e)}get nodeMaterial(){return this}getFlavor(t,e,n){let i=n?6:(t?3:0)+e;if(i===0)return this;this.flavors===void 0&&(this.flavors=[]),i-=1;let r=this.flavors[i];return r===void 0&&(r=new uRt(t,e,n,this),this.flavors[i]=r,r.flatShading=t,r.side=e,r.updateAfterBuild()),r}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}reset(t,e){this.data!==t&&this.reset0(t,e)}reset0(t,e){this.data=t;let n=t.layers??yl.defaultTwoLayerData("phong").layers;this.layers=n.map(i=>sv.create(this.layerIdGen++,i.id,i.data,e.shared)),this.layers.reverse(),this.name=t.name??"Untitled Material",this.onUpdate(),this.transparent=hR(t,e.shared)}getLayersOfType(t){return this.layers.filter(e=>e.type===t)}getLayerByUuid(t){return this.layers.find(e=>e.uuid===t)}onUpdate(){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(t=>t instanceof kx),this.lightLayer===void 0&&(this.lightLayer=new kx(0,"",{...vc.defaultData("light","phong"),visible:!1},new u_e,{})),this.dispose();for(let t of this.flavors)t&&t.dispose();this.blendColors(),this.blendAfterColors(),this.blendPositions()}updateByOp(t,e,n){var i,r,s;if(e!==void 0?this.data=e:e=this.data,this.transparent=hR(e,n.shared),t.path[0]==="layers"){this.data=e;let o=n.shared,a=t.path[1];if(a===void 0){if(this.layers.reverse(),t.type===4){let l=sv.create(this.layerIdGen++,t.id,t.data,n.shared);this.layers.splice(t.localIndex,0,l),(i=n.scene)==null||i.markNeedsUpdateRendererDirty()}else if(t.type===5)this.layers.splice(t.localIndex,1)[0].dispose(),(r=n.scene)==null||r.markNeedsUpdateRendererDirty();else if(t.type===6){let l=this.layers.findIndex(h=>h.uuid===t.id),c=this.layers[l];this.layers.splice(l,1),this.layers.splice(t.localIndex,0,c),(s=n.scene)==null||s.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate()}else{let l=this.layers.find(c=>c.uuid===a);if(l){let c=e.layers.data(a);if(l.updateByOp({...t,path:t.path.slice(2)},c,n)){let h=sv.create(this.layerIdGen++,a,c,o);this.layers.splice(this.layers.findIndex(u=>u.uuid===a),1,h),this.onUpdate()}}}}else this.reset(e,n)}blendColors(){let t=this.layers.findIndex(n=>n instanceof Zs),e=this.layers.findIndex(n=>n instanceof kx);if(t!==-1&&t<e){let n=this.layers[t].color;for(let i=t+1;i<e;++i){let r=this.layers[i];r instanceof Zs&&(n=new hle(n,r.color,r.alpha,r.mode))}this.fragment.color=n}else this.fragment.color=void 0}blendAfterColors(){let t=new Yi("outgoingLight","f"),e=this.layers.findIndex(n=>n instanceof kx);if(this.layers.length>e+1){for(let n=e+1;n<this.layers.length;++n){let i=this.layers[n];i instanceof Zs&&(t=new hle(t,i.color,i.alpha,i.mode))}this.fragment.afterColor=t}else this.fragment.afterColor=void 0}blendPositions(){let t=this.layers.filter(e=>e instanceof F_e);if(t.length>0){let e=t[0].position;for(let n=1;n<t.length;++n)t[n]&&(e=new Uh(e,t[n].position,Uh.ADD),e=new Uh(e,new Ot(.5).setReadonly(!0),Uh.MUL));this.fragment.position=e}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(t){this.build(),t.defines=this.defines,t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.extensionDerivatives=this.extensions.derivatives===!0,t.extensionFragDepth=this.extensions.fragDepth===!0,t.extensionDrawBuffers=this.extensions.drawBuffers===!0,t.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(t,e){let n=(i,r,s)=>Math.min(Math.max(i,r),s);for(let i of this.layers)if(i.type==="displace"){let r=n(i.uniforms[`f${i.id}_intensity`].value,t,e);i.uniforms[`f${i.id}_intensity`].value=r}}computeCacheKey(){let t="[";for(let{data:e}of this.data.layers)if(e.type==="light")t+=`"${e.visible?e.category.toUpperCase():"Basic"}"`;else{let n=(D_e[e.type]??[]).map(s=>e[s]),i=(O_e[e.type]??[]).map(s=>{var o;return((o=e[s])==null?void 0:o.length)??0}),r=[...n,...i];r.length?t+=`["${e.type}", "${r.join('","')}"],`:t+=`"${e.type}",`}return t=t.slice(0,-1)+"]",t}updateFrame(t){for(let e=0;e<this.updaters.length;++e)t.updateNode(this.updaters[e])}build(){let t=new BLt;this.lights=this.lightLayer.data.visible,t.build(this.fragment,this.fragment),this.vertexShader=t.getCode("vertex"),this.fragmentShader=t.getCode("fragment"),this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.updaters=t.updaters;for(let e of this.flavors)e&&e.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(t=>t.dispose()),super.dispose();for(let t of this.flavors)t&&t.dispose()}assetsLoaded(){for(let t of this.layers)if(t instanceof Zs){let e=t.params.texture;if(e instanceof kj&&!e.image.loaded)return!1}return!0}getHash(){let t="{";return t+='"fragment":'+this.fragment.getHash(),t+="}",t}};Object.defineProperties(Km.prototype,{properties:{get:function(){return this.fragment.properties}}});var Fj=class extends z_e{},hRt=XE(j0t()),fle=new Map;function dRt(t){if(typeof t=="string")return t;let e=fle.get(t);return e||(e={url:URL.createObjectURL(new Blob([t]))},fle.set(t,e)),e.url}var LA=class{constructor({src:t,volume:e,delay:n,loop:i}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let r;typeof t=="string"?r={src:t}:r={src:dRt(t),format:"wav"},this.sound=new hRt.Howl(r),this.sound.on("end",this.onEnd),this.src=t,e!==void 0&&(this.volume=e),n!==void 0&&(this.delay=n),i!==void 0&&(this.loop=i)}get status(){return this._status}get volume(){return this._volume}set volume(t){this._volume=t,this.sound.volume(t)}get loop(){return this._loop}set loop(t){this._loop=t,this.loopsRemaining=t}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(t,e=1e3){t?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,e),this.clearFade()},t)):this.sound.fade(this._volume,0,e)}on(t,e,n){this.sound.on(t,e,n)}off(t,e,n){this.sound.off(t,e,n)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(t=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},fRt=class{constructor(){this.type="ShapePath",this.color=new Zt,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new OL,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){var n;return(n=this.currentPath)==null||n.lineTo(t,e),this}quadraticCurveTo(t,e,n,i){var r;return(r=this.currentPath)==null||r.quadraticCurveTo(t,e,n,i),this}bezierCurveTo(t,e,n,i,r,s){var o;return(o=this.currentPath)==null||o.bezierCurveTo(t,e,n,i,r,s),this}splineThru(t){var e;return(e=this.currentPath)==null||e.splineThru(t),this}toShapes(){let t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},e={loc:t.ORIGIN,t:0};function n(f,p,m,g){let v=f.x,y=p.x,x=m.x,b=g.x,S=f.y,A=p.y,E=m.y,M=g.y,C=(b-x)*(S-E)-(M-E)*(v-x),T=(y-v)*(S-E)-(A-S)*(v-x),D=(M-E)*(y-v)-(b-x)*(A-S),L=C/D,I=T/D;if(D===0&&C!==0||L<=0||L>=1||I<0||I>1)return null;if(C===0&&D===0){for(let R=0;R<2;R++)if(i(R===0?m:g,f,p),e.loc===t.ORIGIN){let H=R===0?m:g;return{x:H.x,y:H.y,t:e.t}}else if(e.loc===t.BETWEEN){let H=+(v+e.t*(y-v)).toPrecision(10),Z=+(S+e.t*(A-S)).toPrecision(10);return{x:H,y:Z,t:e.t}}return null}else{for(let Z=0;Z<2;Z++)if(i(Z===0?m:g,f,p),e.loc===t.ORIGIN){let ee=Z===0?m:g;return{x:ee.x,y:ee.y,t:e.t}}let R=+(v+L*(y-v)).toPrecision(10),H=+(S+L*(A-S)).toPrecision(10);return{x:R,y:H,t:L}}}function i(f,p,m){let g=m.x-p.x,v=m.y-p.y,y=f.x-p.x,x=f.y-p.y,b=g*x-y*v;if(f.x===p.x&&f.y===p.y){e.loc=t.ORIGIN,e.t=0;return}if(f.x===m.x&&f.y===m.y){e.loc=t.DESTINATION,e.t=1;return}if(b<-Number.EPSILON){e.loc=t.LEFT;return}if(b>Number.EPSILON){e.loc=t.RIGHT;return}if(g*y<0||v*x<0){e.loc=t.BEHIND;return}if(Math.sqrt(g*g+v*v)<Math.sqrt(y*y+x*x)){e.loc=t.BEYOND;return}let S;g!==0?S=y/g:S=x/v,e.loc=t.BETWEEN,e.t=S}function r(f,p){let m=[],g=[];for(let v=1;v<f.length;v++){let y=f[v-1],x=f[v];for(let b=1;b<p.length;b++){let S=p[b-1],A=p[b],E=n(y,x,S,A);E!==null&&m.find(M=>M.t<=E.t+Number.EPSILON&&M.t>=E.t-Number.EPSILON)===void 0&&(m.push(E),g.push(new Ae(E.x,E.y)))}}return g}function s(f,p,m){let g=new Ae;p.getCenter(g);let v=[];return m.forEach(y=>{y.boundingBox.containsPoint(g)&&r(f,y.points).forEach(x=>{v.push({identifier:y.identifier,isCW:y.isCW,point:x})})}),v.sort((y,x)=>y.point.x-x.point.x),v}function o(f,p,m,g,v){(v==null||v==="")&&(v="nonzero");let y=new Ae;f.boundingBox.getCenter(y);let x=[new Ae(m,y.y),new Ae(g,y.y)],b=s(x,f.boundingBox,p);b.sort((T,D)=>T.point.x-D.point.x);let S=[],A=[];b.forEach(T=>{T.identifier===f.identifier?S.push(T):A.push(T)});let E=S[0].point.x,M=[],C=0;for(;C<A.length&&A[C].point.x<E;)M.length>0&&M[M.length-1]===A[C].identifier?M.pop():M.push(A[C].identifier),C++;if(M.push(f.identifier),v==="evenodd"){let T=M.length%2===0,D=M[M.length-2];return{identifier:f.identifier,isHole:T,for:D}}else if(v==="nonzero"){let T=!0,D=null,L=null;for(let I=0;I<M.length;I++){let R=M[I];p[R]&&(T?(L=p[R].isCW,T=!1,D=R):L!==p[R].isCW&&(L=p[R].isCW,T=!0))}return{identifier:f.identifier,isHole:T,for:D}}else console.warn('fill-rule: "'+v+'" is currently not implemented.')}let a=0,l=999999999,c=-999999999,h=[];this.subPaths.forEach(f=>{let p=f.getPoints(),m=-999999999,g=999999999,v=-999999999,y=999999999;for(let x=0;x<p.length;x++){let b=p[x];b.y>m&&(m=b.y),b.y<g&&(g=b.y),b.x>v&&(v=b.x),b.x<y&&(y=b.x)}c<=v&&(c=v+1),l>=y&&(l=y-1),p.length&&h.push({curves:f.curves,points:p,isCW:rbe.isClockWise(p),identifier:a++,boundingBox:new z_t(new Ae(y,g),new Ae(v,m))})});let u=h.map(f=>{var p;return o(f,h,l,c,(p=this.userData)==null?void 0:p.style.fillRule)}),d=[];return h.forEach(f=>{let p=u[f.identifier];if(p&&!p.isHole){let m=new LL;m.curves=f.curves,u.filter(g=>(g==null?void 0:g.isHole)&&g.for===f.identifier).forEach(g=>{if(g){let v=h[g.identifier],y=new OL;y.curves=v.curves,m.holes.push(y)}}),d.push(m)}}),d}},U_e,ple=new Promise(t=>{U_e=t}),mle=!1;async function pRt(){if(mle)return;let t=await Nw(()=>import("./opentype-42dc7a8f.js"),[]);U_e(t),mle=!0}var mRt=class{async load(t,e,n=()=>{}){let{load:i}=await ple;i(t,(r,s)=>{r||!s?n(r??"Something went wrong"):e(s)})}async parse(t){let{parse:e,Bidi:n}=await ple;try{let i=e(t),r=new n,s=o=>i.charToGlyphIndex(o.char);return r.registerModifier("glyphIndex",null,s),r.applyFeatures(i,i.defaultRenderOptions.features),{font:i,bidi:r}}catch(i){console.error(i)}}};async function gRt(t){return await(await fetch(t)).arrayBuffer()}var vRt=new mRt;async function gle(t){let e,n,i=!1;if(t.url?(e=await gRt(t.url),n=t.url,i=t.url.startsWith("/")):t.data&&(e=t.data.buffer),e){let r=await vRt.parse(e);if(r)return{font:r.font,url:n,intercepted:i,arr:e,bidi:r.bidi}}}function yRt(t,e){return e.state.glyphIndex===t||e.state.fina===t||e.state.medi===t||e.state.init===t}var xRt=class{constructor(t){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=t.isUserFont??!1,this._loadingPromise=gle(t).then(e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)})}update(t){this._isLoaded=!1,this._isUserFont=t.isUserFont??!1,this._loadingPromise=gle(t).then(e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(t,e,n){if(!this._bidi)return[];let i=this._bidi;i.getTextGlyphs(e);let r=i.tokenizer.tokens,s=[],o=0,a=n.length===r.length;for(let l=0;l<n.length;l++){let c=n[l].index,h=String.fromCharCode(n[l].unicode),u=r[o];if(yRt(c,u)||a)s.push({char:h,index:c,replacements:[u.state.glyphIndex],replacementChars:[u.char]}),o++;else{let d=u.char,f="",p=[u.state.glyphIndex],m=[],g=!1;for(;!g;)o++,f=e.charAt(o),d+=f,p.push(t.charToGlyphIndex(f)),m=t.stringToGlyphs(d),m.length===1&&m[0].index===c&&(g=!0),o>e.length&&(g=!0);s.push({char:h,index:c,replacements:p,replacementChars:Array.from(d)}),o++}}return s}generateShapes(t,e){if(!this._isLoaded)return;let n=this.font,i=e.fontSize/this.unitsPerEm,r=e.fontSize*e.lineHeight,s=t.map(v=>this.getTextWidth(v,e)),o=e.width,a=this.getCharWidth(`
`,e),l=e.horizontalAlign===1?a:0,c=this.computeSpaceWidthForLine(t,0,e),h=this.getLineInitialOffsetX(s[0],o,e.horizontalAlign,t[0],a),u=this.getLineInitialOffsetY(r,t.length,e.height,i,e.verticalAlign),d=[],f=t.map(v=>[]),p=t.map(v=>[]),m;for(let v=0;v<t.length;v++){let y=t[v],x={features:{liga:!0}},b=[];try{b=n.stringToGlyphs(y,x)}catch(A){console.warn(A)}h=this.getLineInitialOffsetX(s[v],o,e.horizontalAlign,y,a);let S=[];try{S=this.reverseLigaturesTable(n,y,b)}catch(A){console.warn(A)}c=this.computeSpaceWidthForLine(t,v,e);for(let A=0;A<b.length;A++){let E=b[A],M=E.index===0?`
`:E.unicode?String.fromCharCode(E.unicode):void 0,C=S[A],T=0,D=0;A===0&&e.horizontalAlign===2&&E.leftSideBearing!==void 0&&(D=-E.leftSideBearing*i),m&&(T=n.getKerningValue(E,m)*i),h+=D+T;let L=0;if(M===`
`)L=l;else if(M===" ")L=c;else{let I=this.createPath(E,i,h,u,e);I&&(L=I.offsetX-(T+D),d.push(I.path))}if(C.replacements.length===1)p[v].push([h,u]),f[v].push(L);else{let I=C.replacements.map(ee=>(n.glyphs.get(ee).advanceWidth??0)*i),R=I.reduce((ee,F)=>ee+=F,0),H=I.map(ee=>ee/R),Z=h;for(let ee=0;ee<H.length;ee++){let F=L*H[ee];p[v].push([Z,u]),f[v].push(F),Z+=F}}h+=L,m=E}u-=r}let g=[];for(let v=0,y=d.length;v<y;v++)g.push(...d[v].toShapes());return{shapes:g,charWidths:f,lineWidths:s,charCoords:p}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var t;return((t=this.font)==null?void 0:t.ascender)??0}get descender(){var t;return((t=this.font)==null?void 0:t.descender)??0}get familyName(){var t;return((t=this.font)==null?void 0:t.names.fontFamily)??""}get subfamilyName(){var t;return((t=this.font)==null?void 0:t.names.fontSubfamily)??""}get unitsPerEm(){var t;return((t=this.font)==null?void 0:t.unitsPerEm)??1}getLineInitialOffsetX(t,e,n,i,r){return(n===3||n===2)&&i.indexOf(`
`)>=0&&(t-=r),n===3?e*.5-t*.5:n===2?e-t:0}getLineInitialOffsetY(t,e,n,i,r){let s=e*t,o=Math.abs(this.ascender-this.descender)*i,a=t-o,l=-this.ascender*i-a/2;return r===3?-(n-s-l):r===2?-(n*.5-s*.5-l):l}createPath(t,e,n,i,r){var l;let s=t.getPath(n,-i,r.fontSize,{kerning:!1,letterSpacing:r.letterSpacing});if(!s){console.error('THREE.Font: character "'+t+'" does not exists in font family '+this.familyName+".");return}let o=new fRt,a=(t.advanceWidth??1)*e;if(t)for(let c of s.commands){let h=(l=o.currentPath)==null?void 0:l.currentPoint;if(!(h&&c.type!=="Z"&&h.x===c.x&&-h.y===c.y))switch(c.type){case"M":o.moveTo(c.x,-c.y);break;case"L":o.lineTo(c.x,-c.y);break;case"Q":o.quadraticCurveTo(c.x1,-c.y1,c.x,-c.y);break;case"C":o.bezierCurveTo(c.x1,-c.y1,c.x2,-c.y2,c.x,-c.y);break}}return o.subPaths.forEach(c=>{let h=bRt(c.curves);h!==void 0&&c.currentPoint.distanceTo(h)>0&&c.lineTo(h.x,h.y)}),{offsetX:a+r.fontSize*r.letterSpacing,path:o}}getCharWidth(t,e){var n;return((n=this.font)==null?void 0:n.getAdvanceWidth(t,e.fontSize,{kerning:!0,letterSpacing:e.letterSpacing}))??0}getTextWidth(t,e){var n;return((n=this.font)==null?void 0:n.getAdvanceWidth(t,e.fontSize,{kerning:!0,letterSpacing:e.letterSpacing}))??0}computeSpaceWidthForLine(t,e,n){let i=this.getCharWidth(" ",n),r=t[e];if(r){let s=this.countSpaces(r.trimEnd());if(n.horizontalAlign===4&&e<t.length-1&&s){let o=n.width,a=this.getTextWidth(r,n);return(o-(a-s*i))/s}}return i}countSpaces(t){return(t.match(/ /g)||[]).length}};function bRt(t){if(t.length){let e=t[0];if(e instanceof Ru)return e.v1;if(e instanceof xu||e instanceof Xm)return e.v0}}var wRt=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(t){return this.objects.get(t)}get size(){return this.objects.size}get(t,e){let n=this.objects.get(t);return n===void 0?(n=this.createObject(t,e),this.objects.set(t,n)):n.isShared=!0,n}mutateIfUnique(t,e){let n=this.objects.get(t);if(n&&n.isShared!==!0)return this.objects.delete(t),this.objects.set(e,n),n}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(t,e){let n=this.objects.get(t);e===n&&this.unreachable.delete(t)}endGc(){this.unreachable.forEach(t=>{this.disposeObject(this.objects.get(t)),this.objects.delete(t)}),this.unreachable.clear()}dispose(){this.objects.forEach(t=>{this.disposeObject(t)}),this.objects.clear()}},vle=class extends wRt{constructor(t){super(),this.flatShading=t}disposeObject(t){t.dispose()}createObject(t,e){let n=cR(t,e,this.flatShading);return n.computeBoundingSphere(),n}},_Rt={find(t){},markNeedsUpdateRendererDirty:function(){},markGeometryCacheDirty:function(){},addPendingExpandCloner:function(t){},addPendingUpdateCloner(t){},addPendingCommand(t){}},SRt=class extends nRt{constructor(t){super(),this.shared=t}create(t){return new P_e(t,this.shared)}},zB=class{constructor(t,e={}){if(this.geometryCache=new vle(!0),this.geometryCache2=new vle(!1),this.imageHolderCache=new SRt(this),this.thisContext={scene:_Rt,shared:this},this.deletedMaterial=new Fj(yl.defaultTwoLayerData("phong"),this.thisContext),this.deletedImage=new F0(iR.emptyImage,this),this.deletedVideo=new F0(qL.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.penumbraSize=[],this.requestRender=()=>{this._requestRender&&this._requestRender()},e.images)for(let[n,i]of Object.entries(e.images))this.addImage(n,i);if(e.videos)for(let[n,i]of Object.entries(e.videos))this.addVideo(n,i);if(e.audios)for(let[n,i]of Object.entries(e.audios))this.addAudio(n,i.data);this.reset(t)}setRequestRender(t){this._requestRender=t}reset(t){for(let[e,n]of Object.entries(t.images))this.addImage(e,n);for(let[e,n]of Object.entries(t.videos))this.addVideo(e,n);for(let[e,n]of Object.entries(t.colors))this.addColor(e,n);for(let[e,n]of Object.entries(t.materials))this.addMaterial(e,new Fj(n,this.thisContext));for(let[e,n]of Object.entries(t.audios))this.addAudio(e,n.data);for(let[e,n]of Object.entries(t.fonts))this.addFont(e,n);this.penumbraSize=t.penumbraSize}addMaterial(t,e){e.uuid=t,this.materials[t]=e}deleteMaterial(t){this.materials[t]&&(this.materials[t].nodeMaterialDispose(),delete this.materials[t])}getMaterial(t){return this.materials[t]}getMaterialOrDeletedPlaceholder(t){return this.materials[t]??this.deletedMaterial}material(t){return typeof t=="string"?this.getMaterialOrDeletedPlaceholder(t):new z_e(t,this.thisContext)}getMaterials(){return this.materials}addImage(t,e){return this.images[t]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[t].updateSrc(e.data),!0):(this.images[t]=new F0(e,this),!1)}deleteImage(t){let e=this.images[t];e&&(e.dispose(),delete this.images[t])}getDefaultImage(){return this.images.image_0}getImage(t){return this.images[t]??this.deletedImage}image(t){return typeof t=="string"?this.getImage(t):this.imageHolderCache.load(t)}addVideo(t,e){return this.videos[t]?(this.videos[t].updateSrc(e.data),!0):(this.videos[t]=new F0(e,this),!1)}deleteVideo(t){let e=this.videos[t];e&&(e.dispose(),delete this.videos[t])}getVideo(t){return this.videos[t]??this.deletedVideo}video(t){return typeof t=="string"?this.getVideo(t):this.imageHolderCache.load(t)}addColor(t,e){return this.colors[t]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in e?this.colors[t].setRGBA(e.r,e.g,e.b,e.a):this.colors[t].setRGBA(e.r,e.g,e.b,1),!0):("a"in e?this.colors[t]=new uR(e.r,e.g,e.b,e.a):this.colors[t]=new uR(e.r,e.g,e.b,1),!1)}updateColor(t,e){if(this.colors[t]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let n=this.colors[t];return this.colors[t].r=e.r??n.r,this.colors[t].g=e.g??n.g,this.colors[t].b=e.b??n.b,this.colors[t].a=e.a??n.a,!0}return!1}deleteColor(t){this.colors[t]&&delete this.colors[t]}getColor(t){return this.colors[t]}color(t){let e;if(typeof t=="string"){let n=this.getColor(t);n?e=n:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),e=new Pa(0,0,0,0))}else return"a"in t?new Pa(t.r,t.g,t.b,t.a):new Pa(t.r,t.g,t.b,1);return e}addAudio(t,e){this.audios[t]=e}getAudio(t){let e=this.audios[t];if(e instanceof LA)return e;{let n=new LA({src:e});return this.audios[t]=n,n}}deleteAudio(t){let e=this.audios[t];e&&(e instanceof LA&&e.dispose(),delete this.audios[t])}addFont(t,e){this.fonts[t]=new xRt(e),this.fonts[t].loadingPromise.then(()=>this.requestRender())}getFont(t){return this.fonts[t]}deleteFont(t){this.fonts[t]&&delete this.fonts[t]}dispose(){Object.keys(this.materials).forEach(t=>this.deleteMaterial(t)),this._requestRender=void 0,Object.values(this.audios).forEach(t=>{t instanceof LA&&t.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}};new zB(rR.emptyData());var UB=class extends _l{updateByPatchedOp(t,e,n){if(super.updateByPatchedOp(t,e,n),f3t(t.path,["materials"])!==null&&t.type===0&&Array.isArray(this.material))for(let[i,r]of Object.entries(t.props)){let s=n.shared.material(r);this.material[Number(i)]=s}else if(Xp(t.path,["material"])&&this.material instanceof Km)"material"in e&&typeof e.material!="string"&&this.material.updateByOp(ul.drop(t,1),e.material,n);else if(Xp(t.path,["materials","*"])&&Array.isArray(this.material)){let i=t.path[1];if("materials"in e&&i<this.material.length){let r=e.materials[i];typeof r!="string"&&this.material[i].updateByOp(ul.drop(t,2),r,n)}}}updateState(t,e){var i,r,s,o,a;super.updateState(t,e),t.castShadow!==void 0&&(this.castShadow=t.castShadow),t.receiveShadow!==void 0&&(this.receiveShadow=t.receiveShadow);let n=this.dataPatched;if(((i=t.geometry)==null?void 0:i.type)!=="NonParametricGeometry"&&"material"in t&&t.material!==void 0&&(this.disposeMaterial(),this.material=e.shared.material(t.material).getFlavor(n.flatShading,n.side,n.wireframe),(r=e.scene)==null||r.markNeedsUpdateRendererDirty()),((s=t.geometry)==null?void 0:s.type)==="NonParametricGeometry"&&("materials"in t&&t.materials!==void 0?(this.disposeMaterial(),this.material=t.materials.map(l=>e.shared.material(l).getFlavor(n.flatShading,n.side,n.wireframe)),(o=e.scene)==null||o.markNeedsUpdateRendererDirty()):"material"in t&&t.material!==void 0&&(this.disposeMaterial(),this.material=[e.shared.material(t.material).getFlavor(n.flatShading,n.side,n.wireframe)],(a=e.scene)==null||a.markNeedsUpdateRendererDirty())),t.flatShading!==void 0||t.wireframe!==void 0||t.side!==void 0)if(Array.isArray(this.material))for(let l=0;l<this.material.length;l++)this.material[l]=this.material[l].getFlavor(n.flatShading,n.side,n.wireframe);else this.material=this.material.getFlavor(n.flatShading,n.side,n.wireframe)}disposeMaterial(){this.material&&Awe(this.material).forEach(t=>{t instanceof Km&&(t instanceof Fj||t.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},jc=class extends UB{constructor(t,e,n){super(t,e),this.data=e,this.localGeometry=void 0}chooseGeoemtryCache(t){return t.geometryCache}markGeometryAsReachable(t){this.geometryCreateDeleyed instanceof Qt&&this.chooseGeoemtryCache(t).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof zB){let t=this.geometryCreateDeleyed,e=this.chooseGeoemtryCache(t);this.geometryCreateDeleyed=e.get(this.dataPatched.geometry,t)}return this.geometryCreateDeleyed}set geometry(t){this.localGeometry=t}get is2DAndNoDepth(){let t=this.dataPatched.geometry;return KL.is2DParametricMesh(t.type)&&t.depth===0}get is2DType(){return KL.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(t,e,n){super.updateByPatchedOp(t,e,n),Xp(t.path,["geometry"])&&this.updateByPatchedOpGeometry(ul.drop(t,1),e.geometry,n)}removeInteractionGeometry(){var t;(t=this.localGeometry)==null||t.dispose(),this.localGeometry=void 0}updateGeometryInteractions(t,e){var i;this.invalidateDownstreamBooleanData();let n=this.data.geometry.type;if(n==="NonParametricGeometry"||n==="SubdivGeometry"){let r=t;if(this.localGeometry===void 0){let c={...this.data.geometry,...r};this.localGeometry=cR(c,e,this.data.flatShading)}let s,o,a;r.scaleBaked?[s,o,a]=r.scaleBaked:{width:s,height:o,depth:a}=r;let l=this.localGeometry.userData;l.sxPrev!==void 0&&Rj(this.localGeometry.attributes,s/l.sxPrev,o/l.syPrev,a/l.szPrev),l.sxPrev=s,l.syPrev=o,l.szPrev=a}else{let r={...this.data.geometry,...t};(i=this.localGeometry)==null||i.dispose(),this.localGeometry=cR(r,e,this.data.flatShading)}}refreshAttachedCloners(t){for(let e of this.attachedSurfaceCloners)t.scene.addPendingUpdateCloner(e.object)}refreshAttachedPaths(t){for(let e of this.attachedPaths)t.scene.addPendingCommand(()=>e.updateShape())}createGeometryDelayed(t){this.geometryCreateDeleyed=t.shared,this.refreshAttachedCloners(t),this.refreshAttachedPaths(t)}updateByPatchedOpGeometry(t,e,n){var r;let i=!1;t.type===0&&t.path.length===0&&Y$(["scaleBaked"],Object.keys(t.props))&&this.geometryCreateDeleyed instanceof Ko&&this.chooseGeoemtryCache(n.shared).mutateIfUnique(this.geometryCreateDeleyed.data,e)===this.geometryCreateDeleyed&&(i=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(e,t.props.scaleBaked),this.refreshAttachedCloners(n),this.refreshAttachedPaths(n)),i||((r=n.scene)==null||r.markGeometryCacheDirty(),this.createGeometryDelayed(n)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(t,e){this.createGeometryDelayed(e)}updateState(t,e){t.geometry!==void 0&&this.updateGeometryOnStateUpdate(t.geometry,e),super.updateState(t,e)}updateGeometryGroupsIfNeeded(){var t;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((t=this.geometry.getIndex())==null?void 0:t.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(t,e){let n=this.geometry.userData.parameters;this.is2DType?t.set(0,0,n.depth*.5):this.isNonParametric?(t.setScalar(0),this.geometry.boundingSphere&&t.copy(this.geometry.boundingSphere.center),e.set(n.width,n.height,n.depth??0).multiplyScalar(.5)):t.setScalar(0),e.set(n.width,n.height,n.depth??0).multiplyScalar(.5)}};function ARt(t){var o,a;if(t.geometry.attributes.extrudeNormal||!t.geometry.attributes.position||!t.geometry.attributes.normal)return;let e=new Map,n=t.geometry.attributes,i=n.position.array,r=n.normal.array,s=new Float32Array(i.length);for(let l=0;l<i.length;l+=3){let c=`${i[l]}_${i[l+1]}_${i[l+2]}`,h=new G(r[l],r[l+1],r[l+2]);e.has(c)?(o=e.get(c))==null||o.normals.push(h):e.set(c,{normals:[h],result:new G})}e.forEach((l,c)=>{for(let h of l.normals)l.result.add(h);l.result.divideScalar(l.normals.length)});for(let l=0;l<i.length;l+=3){let c=`${i[l]}_${i[l+1]}_${i[l+2]}`,h=(a=e.get(c))==null?void 0:a.result;h&&(s[l]=h.x,s[l+1]=h.y,s[l+2]=h.z)}t.geometry.setAttribute("extrudeNormal",new At(s,3))}function MRt(t){if(t.geometry.attributes.extrudeNormals||!t.geometry.attributes.position)return;let e=t.geometry.attributes.position.array,n=new Float32Array(e.length),i=new G;for(let r=0;r<e.length;r+=3)i.set(e[r],e[r+1],e[r+2]).normalize(),n[r]=i.x,n[r+1]=i.y,n[r+2]=i.z;t.geometry.setAttribute("extrudeNormal",new At(n,3))}function b7(t){if(Array.isArray(t.material)){for(let e of t.material)if(e.getLayersOfType("outline").length===0)return}else if(!(t.material instanceof Km)||t.material.getLayersOfType("outline").length===0)return;t instanceof jc&&t.is2DAndNoDepth?MRt(t):ARt(t)}function w7(t){if(!t.geometry.attributes.position)return;let e=t.geometry.attributes.position.array,n=new Float32Array(e.length),i=parseInt(t.uuid.replace(/\D/g,"")),r=[Ln.seededRandom(i),Ln.seededRandom(i+1e4),Ln.seededRandom(i+2e4)];for(let s=0;s<e.length;s++)n[s]=r[s%3];t.geometry.setAttribute("randomColor",new on(n,3))}p7.then(t=>{});var gh=new cs,JS=new G;function ERt(t){let e=!1;return t.scene.objects.traverse((n,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(e=!0)}),e}var Y2=class extends jc{constructor(t,e,n){super(t,e,n),this.data=e,this.hiddenMatrixOld=new dt,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(t){return this.dataPatched.flatShading?t.geometryCache:t.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(t,e){let n=this.geometry.userData.parameters;t.copy(this.originalGeometryNew.boundingSphere.center),e.set(n.width,n.height,n.depth??0).multiplyScalar(.5)}createGeometryByControls(t){var s,o,a;if(this.skipReactionUpdate===!0)return;let e=(s=this.localGeometry)==null?void 0:s.uuid,{originalGeometry:n,subdividedGeometry:i,subdivPointer:r}=Ko.build(t,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=r,n!==void 0&&((o=this.originalGeometry)==null||o.dispose(),this.originalGeometry=n),i!==void 0&&((a=this.subdividedGeometry)==null||a.dispose(),this.subdividedGeometry=i??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,b7(this),w7(this),this.calcBoundingBox(),e&&(this.localGeometry.uuid=e)}updateState(t,e){if(super.updateState(t,e),t.flatShading!==void 0){let n=this.material;this.material=n.getFlavor(!1,n.side,n.wireframe),this.smoothShading=!t.flatShading,this.createGeometryDelayed(e)}}updateMesh(t=!1){Ko.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,t&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&Ko.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,t&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=Ko.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Ko.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(t,e){let n=this.localGeometry;this.localGeometry=this.originalGeometryNew,_l.prototype.raycast.call(this,t,e),this.localGeometry=n}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let t=this.originalGeometry;t.boundingSphere===null&&(t.boundingSphere=new Gc,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=t.boundingSphere));let e=t.attributes.position,n=t.boundingSphere.center;gh.setFromBufferAttribute(e),gh.getCenter(n),t.boundingSphere.radius=n.distanceTo(gh.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),gh.getSize(JS),this.hasNonUniformScale&&JS.divide(this.scale);let i={width:JS.x,height:JS.y,depth:JS.z};return this.geometry.userData.parameters=i,i}updateBoundingSphere(t){let e=this.originalGeometry;gh.min.set(t[0],t[2],t[4]),gh.max.set(t[1],t[3],t[5]),this.hasNonUniformScale&&(gh.min.applyMatrix4(this.shearScaleInv),gh.max.applyMatrix4(this.shearScaleInv)),e.boundingSphere===null&&(e.boundingSphere=new Gc);let n=e.boundingSphere.center;gh.getCenter(n),e.boundingSphere.radius=n.distanceTo(gh.max)}freeSubdivPointer(){var t,e;this.subdivPointer&&(Ko.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(t=this.originalGeometry)==null||t.dispose(),(e=this.subdividedGeometry)==null||e.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(t,e,n){super.updateByPatchedOpGeometry(t,e,n),this.localGeometry&&this.createGeometryByControls(e)}},yle=-1,CRt=1,TRt={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},PRt={polygon_center:0,edge:1,vertex:2},q3=(t,e)=>(n,i)=>!e||n===0||t===0?0:t*i/100,hn=(t,e)=>{let n=Math.abs(e),i=n*-1;return(t-yle)*(n-i)/(CRt-yle)+i};function DRt(t){let e=[],n={};for(var i=0,r=t.length;i<r;i++){var s=JSON.stringify(t[i].pos.map(o=>Math.round(o*1e4)/1e4));n[s]||(e.push(t[i]),n[s]=!0)}return e}var ORt=new G,X3=new G,LRt=new G,RRt=new G;function xb(t,e){let n=LRt.fromArray(t),i=RRt.fromArray(e);X3.copy(i).sub(n);let r=X3.length();return X3.normalize().multiplyScalar(r*.5),ORt.copy(n).add(X3).toArray()}var yc=new ga,Y3=new G,dR=new G,A0=new G;function IRt(t){let e=[];for(let n=0;n<=t.index.count;n++)if(Y3.fromArray(t.index.array,n*3),yc.setFromAttributeAndIndices(t.attributes.position,Y3.x,Y3.y,Y3.z),yc.getNormal(dR),yc.getMidpoint(A0),!(isNaN(A0.x)||isNaN(A0.y)||isNaN(A0.z))){let{a:i,b:r,c:s}=yc,o=i.toArray(),a=r.toArray(),l=s.toArray(),c=i.distanceTo(r),h=r.distanceTo(s),u=s.distanceTo(i),d=xb(o,a),f=xb(a,l),p=xb(l,o),m=[c,h,u],g=Math.max(...m),v=m.filter(b=>Math.round(b)===Math.round(g)).length>1,y=[],x=yc.getMidpoint(A0).toArray();g===c&&!v&&(y=[f,p,p],x=d),g===h&&!v&&(y=[d,p,p],x=f),g===u&&!v&&(y=[d,f,f],x=p),v&&(y=[d,f,p]),e.push({vertices:[o,a,l],faceCenters:y,midpoint:x,norm:yc.getNormal(dR).toArray()})}return e}function BRt(t){let e=[],{position:n}=t.attributes;for(let i=0;i<n.count;i++){yc.setFromAttributeAndIndices(n,i*3,i*3+1,i*3+2),yc.getNormal(dR),yc.getMidpoint(A0);let r=yc.a.toArray(),s=yc.b.toArray(),o=yc.c.toArray();e.push({vertices:[r,s,o],faceCenters:[xb(r,s),xb(s,o),xb(o,r)],midpoint:A0.toArray(),norm:dR.toArray()})}return e}var kRt=4,FRt=.5,az=t=>.5*(1-Math.cos(t*Math.PI)),NRt=class{constructor(){this.perlin=new Array(4095+1)}noise(t,e=0,n=0){if(this.perlin==null){this.perlin=new Array(4095+1);for(let g=0;g<4095+1;g++)this.perlin[g]=Math.random()}t<0&&(t=-t),e<0&&(e=-e),n<0&&(n=-n);let i=Math.floor(t),r=Math.floor(e),s=Math.floor(n),o=t-i,a=e-r,l=n-s,c,h,u=0,d=.5,f,p,m;for(let g=0;g<kRt;g++){let v=i+(r<<4)+(s<<8);c=az(o),h=az(a),f=this.perlin[v&4095],f+=c*(this.perlin[v+1&4095]-f),p=this.perlin[v+16&4095],p+=c*(this.perlin[v+16+1&4095]-p),f+=h*(p-f),v+=256,p=this.perlin[v&4095],p+=c*(this.perlin[v+1&4095]-p),m=this.perlin[v+16&4095],m+=c*(this.perlin[v+16+1&4095]-m),p+=h*(m-p),f+=az(l)*(p-f),u+=f*d,d*=FRt,i<<=1,o*=2,r<<=1,a*=2,s<<=1,l*=2,o>=1&&(i++,o--),a>=1&&(r++,a--),l>=1&&(s++,l--)}return u}noiseSeed(t){let e=(()=>{let n,i;return{setSeed(r){i=n=(r??Math.random()*4294967296)>>>0},getSeed(){return n},rand(){return i=(1664525*i+1013904223)%4294967296,i/4294967296}}})();e.setSeed(t),this.perlin=new Array(4095+1);for(let n=0;n<4095+1;n++)this.perlin[n]=e.rand()}},zRt=NRt,xle=new G,ble=new dt,wle=new qw;function _le(t){let e=!1;return t.scene.objects.traverse((n,i)=>{i.type==="Mesh"&&i.geometry.type==="TextGeometry"&&(e=!0)}),e}var G_e=class extends jc{constructor(t,e,n){super(t,e,n),this.data=e}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var e;let t=this.dataPatched;return((e=this.font)==null?void 0:e.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,t.geometry.height,this.fontScale,t.geometry.verticalAlign))??0}get fontScale(){let t=this.dataPatched;return this.font?t.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var t;return(((t=this.font)==null?void 0:t.ascender)??1)*this.fontScale}get descender(){var t;return(((t=this.font)==null?void 0:t.descender)??1)*this.fontScale}get lineHeight(){let t=this.dataPatched;return t.geometry.fontSize*t.geometry.lineHeight}raycast(t,e){let{matrixWorld:n}=this;if(!(isNaN(t.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(ble.copy(n).invert(),wle.copy(t.ray).applyMatrix4(ble),wle.intersectBox(this.singleBBox,xle))){let i=xle.applyMatrix4(n),r=t.ray.origin.distanceTo(i);e.push({distance:r,point:i.clone(),object:this})}}},jo=1e-4,vh,H_e,j_e,V_e,Sle=new G,Ale=new G;p7.then(t=>{vh=t,H_e=[vh.get_face_center,vh.get_edge_midpoint,vh.get_vertex_position],j_e=[vh.get_face_normal,vh.get_edge_normal,vh.get_vertex_normal],V_e=[vh.face_count,vh.edge_count,vh.vertex_count]});var URt=new dt,GRt=new dt,Pp=new G,jg=new G,ZS=new G,lz=new G,HRt=new G,jRt=new G,$d=new zRt,fR=class extends a7(wi){constructor(t,e){super(),this.parameters=e,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=t}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(t){if(this.parent===null)this.updateState(this.parameters,t);else for(let e of this.children)e instanceof k0&&e.expand()}invalidateTransform(t){this.matrixWorldNeedsUpdate=!0,this.traverse(e=>{e instanceof k0&&e.object===t&&(e.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let t of this.children)t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD())}_updateCount(t){let e;if(t!==void 0?e=t:e=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(e=0),this.parameters.type==="toObject"&&this.objectForSample){for(let i=0,r=this.children.length;i<r;++i)this.remove(this.children[0]);let n=this.children;if(n.length===e)return;if(n.length<e)for(let i=0,r=e-n.length;i<r;++i){let s=new k0(this.object);s.expand(),this.add(s)}else for(let i=0,r=n.length-e;i<r;++i)this.remove(n[i])}else{if(this.children.length===e)return;if(this.children.length<e)for(let n=0,i=e-this.children.length;n<i;++n){let r=new k0(this.object);r.expand(),this.add(r)}else for(let n=0,i=this.children.length-e;n<i;++n)this.remove(this.children[0])}}_updateRadial(t){let e=t.radial,n=e.start*Ln.DEG2RAD,i=e.end*Ln.DEG2RAD,r=n-i,s=new Mo(e.rotation[0],e.rotation[1],e.rotation[2]),o;switch(e.axis){case"z":o=new G(0,0,1);break;case"y":o=new G(0,1,0);break;default:case"x":o=new G(1,0,0);break}let a=t.randomnessObject??pm.defaultData([1,1,1]).randomnessObject,l=a.noiseType==="perlin";$d.noiseSeed(a.seed);let c=$5((0,VS.default)(a.seed)),h=q3(a.strength,this.parameters.randomness);for(let[u,d]of this.children.entries()){let f=u*(a.freqScale/10)+a.movement,p=l?$d.noise(f):c(f,f);d.scale.x=e.scale[0]+h(u,hn(p,a.scale[0]))||jo,d.scale.y=e.scale[1]+h(u,hn(p,a.scale[1]))||jo,d.scale.z=e.scale[2]+h(u,hn(p,a.scale[2]))||jo,d.position.setScalar(0);let m=r/t.count*u-n;switch(e.axis){case"x":d.rotation.set(0,m,0);break;case"y":d.rotation.set(0,0,m);break;case"z":d.rotation.set(m,0,0);break}d.translateOnAxis(o,e.radius),d.position.x+=e.position[0]+h(u,hn(p,a.position[0])),d.position.y+=e.position[1]+h(u,hn(p,a.position[1])),d.position.z+=e.position[2]+h(u,hn(p,a.position[2]));let g=h(u,hn(p,a.rotation[0])),v=h(u,hn(p,a.rotation[1])),y=h(u,hn(p,a.rotation[2]));e.alignment===!0?(d.rotation.x+=s.x+g,d.rotation.y+=s.y+v,d.rotation.z+=s.z+y):d.rotation.set(s.x+g,s.y+v,s.z+y)}}_updateLinear(t){if(t.type!=="linear")throw new Error;let e=t.linear,n=new Mo(e.rotation[0],e.rotation[1],e.rotation[2]),i=t.randomnessObject??pm.defaultData([1,1,1]).randomnessObject,r=i.noiseType==="perlin";$d.noiseSeed(i.seed);let s=$5((0,VS.default)(i.seed)),o=q3(i.strength,this.parameters.randomness);for(let[a,l]of this.children.entries()){let c=a*(i.freqScale/10)+i.movement,h=r?$d.noise(c):s(c,c),u=o(a,hn(h,i.rotation[0])),d=o(a,hn(h,i.rotation[1])),f=o(a,hn(h,i.rotation[2]));l.scale.x=1+(e.scale[0]-1)*a+o(a,hn(h,i.scale[0]))||jo,l.scale.y=1+(e.scale[1]-1)*a+o(a,hn(h,i.scale[1]))||jo,l.scale.z=1+(e.scale[2]-1)*a+o(a,hn(h,i.scale[2]))||jo,l.rotation.x=n.x*a+u,l.rotation.y=n.y*a+d,l.rotation.z=n.z*a+f,l.position.x=e.position[0]*a+o(a,hn(h,i.position[0])),l.position.y=e.position[1]*a+o(a,hn(h,i.position[1])),l.position.z=e.position[2]*a+o(a,hn(h,i.position[2]))}}_updateGrid(t){let e=0,n=t.grid,i=t.randomnessObject??pm.defaultData([1,1,1]).randomnessObject,r=q3(i.strength,this.parameters.randomness),s=i.noiseType==="perlin";$d.noiseSeed(i.seed);let o=jDt((0,VS.default)(i.seed));if(n.useCenter===!0){let a={x:n.count[0]%2===0?2:1,y:n.count[1]%2===0?2:1,z:n.count[2]%2===0?2:1},l=new G(n.size[0]*(n.count[0]-a.x)*.5,n.size[1]*(n.count[1]-a.y)*.5,n.size[2]*(n.count[2]-a.z)*.5);for(let c=0;c<n.count[0];c++)for(let h=0;h<n.count[1];h++)for(let u=0;u<n.count[2];u++){let d=[(c+1)*(i.freqScale/10)+i.movement,(h+1)*(i.freqScale/10)+i.movement,(u+1)*(i.freqScale/10)+i.movement],f=s?$d.noise(...d):o(...d),p=this.children[e++];p.scale.x=1+r(e,hn(f,i.scale[0]))||jo,p.scale.y=1+r(e,hn(f,i.scale[1]))||jo,p.scale.z=1+r(e,hn(f,i.scale[2]))||jo;let m=r(e,hn(f,i.rotation[0])),g=r(e,hn(f,i.rotation[1])),v=r(e,hn(f,i.rotation[2]));p.rotation.set(m,g,v),p.position.x=n.size[0]*c-l.x+r(e,hn(f,i.position[0])),p.position.y=n.size[1]*h-l.y+r(e,hn(f,i.position[1])),p.position.z=n.size[2]*u-l.z+r(e,hn(f,i.position[2]))}}else for(let a=0;a<n.count[0];a++)for(let l=0;l<n.count[1];l++)for(let c=0;c<n.count[2];c++){let h=[(a+1)*(i.freqScale/10)+i.movement,(l+1)*(i.freqScale/10)+i.movement,(c+1)*(i.freqScale/10)+i.movement],u=s?$d.noise(...h):o(...h),d=this.children[e++];d.scale.x=1+r(e,hn(u,i.scale[0]))||jo,d.scale.y=1+r(e,hn(u,i.scale[1]))||jo,d.scale.z=1+r(e,hn(u,i.scale[2]))||jo;let f=r(e,hn(u,i.rotation[0])),p=r(e,hn(u,i.rotation[1])),m=r(e,hn(u,i.rotation[2]));d.rotation.set(f,p,m),d.position.x=n.size[0]*a+r(e,hn(u,i.position[0])),d.position.y=-n.size[1]*l+r(e,hn(u,i.position[1])),d.position.z=-n.size[2]*c+r(e,hn(u,i.position[2]))}}_updateToObject(t){var m;if(t.type!=="toObject")throw new Error;let{toObject:e}=t,n=new Mo(e.rotation[0],e.rotation[1],e.rotation[2]),i=t.randomnessObject??pm.defaultData([1,1,1]).randomnessObject,r=i.noiseType==="perlin";$d.noiseSeed(i.seed);let s=$5((0,VS.default)(i.seed)),o=q3(i.strength,this.parameters.randomness);if(!e.object){for(let[,g]of this.children.entries())g.position.set(0,0,0),g.scale.setScalar(1),g.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof G_e)if(!((m=this.objectForSample.font)!=null&&m.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let a=this.getSubdivData(),l=[],c=g=>{let v=g.length,y=g.map(S=>S[0]).reduce((S,A)=>S+A,0),x=g.map(S=>S[1]).reduce((S,A)=>S+A,0),b=g.map(S=>S[2]).reduce((S,A)=>S+A,0);return[y/v,x/v,b/v]},h=g=>Math.round(g*1e6)/1e6;a.forEach(g=>{let v=a.filter(y=>h(g.pos[0])===h(y.pos[0])&&h(g.pos[1])===h(y.pos[1])&&h(g.pos[2])===h(y.pos[2]));v.length>1?l.push({pos:g.pos,norm:c(v.map(y=>y.norm))}):l.push(g)});let u=DRt(l);if(a.length>0){let g=Math.round(u.length*e.count/100);this._updateCount(g)}this.objectForSample.updateMatrixWorld();let d=new VDt(this.objectForSample).build(),f=TRt[e.axis],p=this.children;d.setRandomGenerator((0,VS.default)(this.object.uuid+e.seed));for(let[g,v]of p.entries()){let y=g*(i.freqScale/10)+i.movement,x=r?$d.noise(y):s(y,y),b=o(g,hn(x,i.rotation[0])),S=o(g,hn(x,i.rotation[1])),A=o(g,hn(x,i.rotation[2]));e.spreadType==="random"?d.sample(ZS,lz):(u.length&&(ZS.fromArray(u[g].pos),lz.fromArray(u[g].norm)),this.objectForSample instanceof Y2&&ZS.applyMatrix4(URt.copy(this.objectForSample.matrixWorld).invert())),ZS.applyMatrix4(this.object.hiddenMatrix.clone().invert()),v.position.copy(ZS),Pp.fromArray(f);let E=e.align==="normal"?lz:this.object.getWorldDirection(jRt),M=jg.fromArray(e.position);jg.x+=jg.x+o(g,hn(x,i.position[0])),jg.y+=jg.y+o(g,hn(x,i.position[1])),jg.z+=jg.z+o(g,hn(x,i.position[2]));let C=Math.acos(E.dot(Pp)),T=HRt.crossVectors(Pp,E).normalize(),D=GRt.makeRotationAxis(T,C),L=E.clone().cross(this.object.up).normalize(),I=L.clone().cross(E).normalize(),R=new dt().makeBasis(L,E,I),H=new G(Pp.y,Pp.z,Pp.x).normalize(),Z=H.clone().cross(Pp).normalize(),ee=new dt().makeBasis(H,Pp,Z).invert(),F=new dt().multiplyMatrices(R,ee);v.rotation.setFromRotationMatrix(F),M.applyMatrix4(D),v.position.add(M),v.rotation.x=v.rotation.x+n.x+b,v.rotation.y=v.rotation.y+n.y+S,v.rotation.z=v.rotation.z+n.z+A,v.scale.setScalar(1),v.scale.x=v.scale.x+e.scale[0]+o(g,hn(x,i.scale[0]))||jo,v.scale.y=v.scale.y+e.scale[1]+o(g,hn(x,i.scale[1]))||jo,v.scale.z=v.scale.z+e.scale[2]+o(g,hn(x,i.scale[2]))||jo,v.scale.multiply(this.object.scale),v.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let t=this.parameters.toObject.spreadType;if(t==="random")return[];if(this.objectForSample instanceof Y2){let e=this.objectForSample,n=PRt[t],i=V_e[n],r=H_e[n],s=j_e[n],o=[],a=i(e.subdivPointerNew);for(let l=0;l<=a-1;l++){let c=r(e.subdivPointerNew,l),h=s(e.subdivPointerNew,l);Sle.fromArray(c).applyMatrix4(e.matrixWorld),Ale.fromArray(h),o.push({pos:Sle.toArray(),norm:Ale.toArray()})}return o}else return(this.objectForSample.geometry.index?IRt(this.objectForSample.geometry):BRt(this.objectForSample.geometry)).map((e,n)=>t==="polygon_center"?{pos:e.midpoint,norm:e.norm}:t==="vertex"?[{pos:e.vertices[0],norm:e.norm},{pos:e.vertices[1],norm:e.norm},{pos:e.vertices[2],norm:e.norm}]:t==="edge"?[{pos:e.faceCenters[0],norm:e.norm},{pos:e.faceCenters[1],norm:e.norm},{pos:e.faceCenters[2],norm:e.norm}]:[]).flat()}updateState(t,e){var n;if(this.parameters=OB(t),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(n=this.object.parent)==null||n.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let i=e.find(this.parameters.toObject.object);i instanceof _l?this.objectForSample=i:this.objectForSample=void 0,this.matrix=new dt,this.hiddenMatrix=new dt,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,i&&i.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},nC=t=>{var e;return e=class extends t{},e.geometryHelper=new rd(30,30,30),e},K3=new qw,cz=new Gc,Mle=new dt,iC=(t,e,n,i,r=!1)=>{let s=e,o=t.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),cz.copy(s.boundingSphere),cz.applyMatrix4(o),n.ray.intersectsSphere(cz)===!1||(Mle.copy(o).invert(),K3.copy(n.ray).applyMatrix4(Mle),s.boundingBox!==null&&K3.intersectsBox(s.boundingBox)===!1))return;let a,l,c,h,u=s.index,d=s.attributes.position,f=s.drawRange,p,m;if(r===!1){let v=Math.max(0,f.start),y=Math.min(u.count,f.start+f.count);for(p=v,m=y;p<m;p+=3)if(l=u.getX(p),c=u.getX(p+1),h=u.getX(p+2),a=g(t,n,K3,d,l,c,h),a){a.faceIndex=Math.floor(p/3),i.push(a);return}}else{let v=s.attributes.position,y=new G,x=new G,b=new G,S=new G,A=2,E=1/((t.scale.x+t.scale.y+t.scale.z)/3),M=E*E,C=Math.max(0,f.start),T=Math.min(v.count,f.start+f.count);for(let D=C,L=T-1;D<L;D+=A){if(y.fromBufferAttribute(v,D),x.fromBufferAttribute(v,D+1),K3.distanceSqToSegment(y,x,S,b)>M)continue;S.applyMatrix4(t.matrixWorld);let I=n.ray.origin.distanceTo(S);I<n.near||I>n.far||i.push({distance:I,point:b.clone().applyMatrix4(t.matrixWorld),object:t})}}function g(v,y,x,b,S,A,E){let M=new G,C=new G,T=new G,D=new G,L=new G;if(M.fromBufferAttribute(b,S),C.fromBufferAttribute(b,A),T.fromBufferAttribute(b,E),x.intersectTriangle(M,C,T,!1,D)===null)return null;L.copy(D),L.applyMatrix4(v.matrixWorld);let I=y.ray.origin.distanceTo(L);return I<y.near||I>y.far?null:{faceIndex:1,distance:I,point:L.clone(),object:v}}},J3=new G,Kl=new Yw,VRt=class extends ZE{constructor(t){let e=new Qt,n=new ug({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={},o=new Zt(15711266),a=new Zt(15711266),l=new Zt(2857471);c("n1","n2",o),c("n2","n4",o),c("n4","n3",o),c("n3","n1",o),c("f1","f2",o),c("f2","f4",o),c("f4","f3",o),c("f3","f1",o),c("n1","f1",o),c("n2","f2",o),c("n3","f3",o),c("n4","f4",o),c("p","n1",a),c("p","n2",a),c("p","n3",a),c("p","n4",a),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l);function c(u,d,f){h(u,f),h(d,f)}function h(u,d){i.push(0,0,0),r.push(d.r,d.g,d.b),s[u]===void 0&&(s[u]=[]),s[u].push(i.length/3-1)}e.setAttribute("position",new At(i,3)),e.setAttribute("color",new At(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let t=this.geometry,e=this.pointMap;Kl.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let n=1,i=1,r=.8;au("n1",e,t,Kl,-n,-i,r),au("n2",e,t,Kl,n,-i,r),au("n3",e,t,Kl,-n,i,r),au("n4",e,t,Kl,n,i,r);let s=r;au("f1",e,t,Kl,-n,-i,s),au("f2",e,t,Kl,n,-i,s),au("f3",e,t,Kl,-n,i,s),au("f4",e,t,Kl,n,i,s);let o=s,a=.5;au("u1",e,t,Kl,n*.7*a,i*1.1,o),au("u2",e,t,Kl,-n*.7*a,i*1.1,o),au("u3",e,t,Kl,0,i*(1.1+.9*a),o),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function au(t,e,n,i,r,s,o){J3.set(r,s,o).unproject(i);let a=e[t];if(a!==void 0){let l=n.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],J3.x,J3.y,J3.z)}}var WRt=class extends nC(VRt){constructor(t){super(t),this.object=t,this.object=t,this.name=`CombinedCameraHelper: ${t.uuid}`}updateMatrixWorld(t){super.updateMatrixWorld(t),this.updateTarget()}updateTarget(){let t=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(t)}raycast(t,e){iC(this.object,this.geometry,t,e,!0)}},Nj;(t=>t.is=e=>"objectHelper"in e)(Nj||(Nj={}));var GB=(t,e)=>class extends Iwe(t){constructor(){super(...arguments),this.objectHelper=new e(this),this.gizmos={}}get geometryHelper(){return e.geometryHelper}raycast(n,i){this.objectHelper.raycast(n,i)}showGizmos(){for(let n in this.gizmos){let i=this.gizmos[n];i instanceof IL&&(i.visible=!0)}}updateEntityBoxSize(n,i){this.objectHelper.visible&&this.geometryHelper instanceof rd?(n.setScalar(0),i.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(n,i)}hideGizmos(){for(let n in this.gizmos){let i=this.gizmos[n];i instanceof IL&&(i.visible=!1)}}},uz=790,S1=new G,hz=new G,dz=new Wn,fz=new G,QS=new G,pz=new G,Da=class extends GB(Yw,WRt){constructor(t="",e={...JL.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=V2.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.super_Entity(t,e),this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let n=this.width,i=this.height;if(e.orthographic.autoZoom){let r=e.orthographic.autoZoomFrustumSize??uz,s=n/i,o=n>i?s:1,a=n>i?1:s;this.orthoCamera=new PL(-r*.5*o,r*.5*o,r*.5*(1/a),-r*.5*(1/a),-5e4,1e4)}else this.orthoCamera=new PL(n*-.5,n*.5,i*.5,i*-.5,-5e4,1e4);this.perspCamera=new So(45,n/i,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(t){this.perspCamera.fov=t}get fov(){return this.perspCamera.fov}setNear(t,e){t==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}setZoom(t,e){e>=0&&(t==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}set cameraType(t){t==="PerspectiveCamera"?this.toPerspective():t==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(t){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(t){t>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}lookAt(t,e,n){typeof t=="number"&&(t=new G(t,e,n)),super.lookAt(t),this.getWorldPosition(S1),this.targetOffset=S1.distanceTo(t)}getTarget(t=new G){return this.getWorldDirection(hz),this.getWorldPosition(S1),hz.multiplyScalar(this.targetOffset),t.copy(S1).add(hz),t}getDistanceToTarget(){let t=this.getTarget();return this.getWorldPosition(S1),S1.distanceTo(t)}updateUp(){this.getWorldQuaternion(dz),fz.set(0,0,1).applyQuaternion(dz),QS.copy(wi.DEFAULT_UP),this.isUpVectorFlipped&&QS.negate(),QS.applyQuaternion(dz),pz.copy(wi.DEFAULT_UP).projectOnPlane(fz),this.angleOffsetFromUp=pz.angleTo(QS),this.angleOffsetFromUp*=pz.cross(QS).dot(fz)>=0?1:-1}updateTransformState(t){let e=super.updateTransformState(t);return t.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=t.isUpVectorFlipped),this.updateUp(),e}getViewFrontToObject(t){let e=t.getWorldPosition(new G),n=t.getWorldDirection(new G).multiplyScalar(this.targetOffset);return{position:e.clone().add(n),target:e}}getViewToObject(t){let e=t.getWorldPosition(new G),n=this.getWorldDirection(new G).multiplyScalar(this.targetOffset);return{position:e.clone().sub(n),target:e}}setViewplaneSize(t,e){if(this.aspect=t/e,this.data.type==="OrthographicCamera"&&this.data.orthographic.autoZoom){let n=this.data.orthographic.autoZoomFrustumSize??uz,i=t>e?this.aspect:1,r=t>e?1:this.aspect;this.left=-n*.5*i,this.right=n*.5*i,this.top=n*.5*(1/r),this.bottom=-n*.5*(1/r)}else this.left=-t*.5,this.right=t*.5,this.top=e*.5,this.bottom=-e*.5;this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(t){this.perspCamera.setFocalLength(t),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(t,e,n,i,r,s){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(t,e,n,i,r,s):this.orthoCamera.setViewOffset(t,e,n,i,r,s)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(t,e){return super.copy(t,e),this.orthoCamera.copy(t.orthoCamera),this.perspCamera.copy(t.perspCamera),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.far=t.far,this.view=t.view===null?null:Object.assign({},t.view),this._cameraType=t._cameraType,this.aspect=t.aspect,this.fov=t.fov,this.focus=t.focus,this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this.targetOffset=t.targetOffset,this.updateProjectionMatrix(),this}toCameraState(t=[]){let e={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom,autoZoom:!0,autoZoomFrustumSize:uz},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return ZH(e,t)}updateCameraSubtype(t,e){let n=t==="perspective"?"PerspectiveCamera":"OrthographicCamera";e.zoom!==void 0&&this.setZoom(n,e.zoom),e.near!==void 0&&this.setNear(n,e.near),e.fov!==void 0&&n==="PerspectiveCamera"&&(this.fov=e.fov)}updateState(t,e){this.updateCameraState(t,e)}updateCameraState(t,e){this.updateState_Entity(t,e),t.far!==void 0&&(this.far=t.far),t.orthographic!==void 0&&this.updateCameraSubtype("orthographic",t.orthographic),t.perspective!==void 0&&this.updateCameraSubtype("perspective",t.perspective),t.type!==void 0&&(this.cameraType=t.type),t.up!==void 0&&this.up.fromArray(t.up),t.targetOffset!==void 0&&(this.targetOffset=t.targetOffset),t.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=t.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(t,e,n){super.updateByPatchedOp(t,e,n),t.path.length===1&&t.type===0&&this.updateCameraSubtype(t.path[0],t.props)}toState(t){return{...super.toState(t),...this.toCameraState(t),type:this.cameraType}}},Ele=new dt;function Cle(t){let e=!1;return t.scene.objects.traverse((n,i)=>{var r;((r=i.geometry)==null?void 0:r.type)==="BooleanGeometry"&&(e=!0)}),e}var fw=class extends UB{constructor(t,e,n){super(t,e),this.data=e,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Qt,this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(t,e,n){super.updateByPatchedOp(t,e,n),t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&t.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(t,e=!0){var i;if(this.booleanMeshSetAddress!==-1&&!t)return;for(let r=0;r<this.children.length;r++){let s=this.children[r];s instanceof fw&&s.recomputeBoolean(t===!0,e)}this.meshSetAddresses=[];for(let r=0;r<this.children.length;r++){let s=this.children[r];if(s instanceof _l&&s.dataPatched.visible===!0&&((i=s.geometry.attributes.position)==null?void 0:i.count)>0&&s.geometry.drawRange.count>0){if(s.booleanMeshSetAddress===-1){if((s.geometry.index??s.geometry.getAttribute("position")).count/3<15e5&&(s.booleanMeshSetAddress=Hp.getMeshSet(s.geometry,t===!0,e)),s.booleanMeshSetAddress===-1)return;Hp.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1}else s instanceof fw&&s.needsTransformForDownstream===!0?(Hp.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.needsTransformForDownstream=!1):s.booleanWasTransformed===!0&&(Ele.multiplyMatrices(s.matrix,s.booleanMatrixInvOld),Hp.transformMeshSet(s.booleanMeshSetAddress,Ele),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1);this.meshSetAddresses.push(s.booleanMeshSetAddress)}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new cyt([],0)),this.geometry.setDrawRange(0,0);return}if(t===!0)return Hp.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let n=this.geometry;n.dispose(),this.geometry=new Qt,this.geometry.userData=n.userData,this.geometry.boundingSphere=n.boundingSphere;try{this.booleanMeshSetAddress=Hp.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(r){this.booleanMeshSetAddress=0,console.error(r)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,b7(this),w7(this)}dispose(){super.dispose(),this.geometry.dispose()}},zj;(t=>{function e(n){return ki.is(n)&&n instanceof QE}t.is=e})(zj||(zj={}));var _7=(t,e)=>class extends GB(t,e){updateState_Light(n,i){this.updateState_Entity(n,i),n.color!==void 0&&(this.color=i.shared.color(n.color)),n.intensity!==void 0&&(this.intensity=n.intensity),n.depth!==void 0&&(this.shadow.camera.far=n.depth,this.shadow.needsUpdate=!0),n.shadows!==void 0&&(this.castShadow=n.shadows)}},xf=t=>t instanceof _l,ym=t=>t!==null&&t instanceof fw,$Rt=t=>t instanceof Da,qRt=t=>zj.is(t),XRt=t=>Nj.is(t),S7=class extends nC(j_t){constructor(t,e=15){super(e),this.object=t,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${t.uuid}`,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}raycast(t,e){iC(this.object,S7.geometryHelper,t,e)}update(){}},Uj=class extends GB(Ox,S7){constructor(t,e){super(),this.super_Entity(t,e),this.objectHelper.update()}updateState(t,e){this.updateState_Entity(t,e)}},W_e=class extends nC(H_t){constructor(t,e=15,n=10066329){super(t,e,n),this.object=t,this.added=!1,this.name=`DirectionalLightHelper: ${t.uuid}`}raycast(t,e){iC(this.object,W_e.geometryHelper,t,e)}},$_e=class extends nC(G_t){constructor(t,e=15,n=6710886){super(t,e,n),this.object=t,this.name=`PointLightHelper: ${t.uuid}`}raycast(t,e){iC(this.object,$_e.geometryHelper,t,e)}},Gj=class extends nC(U_t){constructor(t,e=6710886){super(t,e),this.object=t,this.name=`SpotLightHelper: ${t.uuid}`}raycast(t,e){iC(this.object,Gj.geometryHelper,t,e)}update(){if(this.object!==void 0){let t=Gj._vector,e=this.object.distance?this.object.distance:1e3,n=e*Math.tan(this.object.angle);this.cone.scale.set(n,n,e),t.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(t);let i=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let r=0,s=this.cone.material.length;r<s;r++)this.cone.material[r].color.set(i);else this.cone.material.color.set(i)}}},q_e=Gj;q_e._vector=new G;function YRt(t,e){t.shadow.camera.right=e/2,t.shadow.camera.left=-e/2,t.shadow.camera.top=e/2,t.shadow.camera.bottom=-e/2,t.shadow.needsUpdate=!0}var KRt=class extends _7(B_t,W_e){constructor(t,e,n){super(),this.super_Entity(t,e),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.top=1250,i.bottom=-1250,i.right=1250,i.left=-1250,i.near=-1e4,i.far=2500;let r=new RL(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r}update(){this.shadow.camera.updateProjectionMatrix();for(let t in this.gizmos){let e=this.gizmos[t];e instanceof RL&&e.update()}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.objectHelper&&this.objectHelper.update()}updateState(t,e){this.updateState_Light(t,e);let n=t.depth!==void 0&&t.depth!==this.shadow.camera.far||t.size!==void 0&&t.size/2!==this.shadow.camera.right;t.size!==void 0&&YRt(this,t.size),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),n&&this.update()}},JRt=class extends _7(R_t,$_e){constructor(t,e,n){super(),this.super_Entity(t,e),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=90,i.aspect=1,i.near=100,i.far=2500;let r=new G(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),s=new G(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z),o=new cs(r,s),a=new IL(o,new Zt(16755200));a.visible=!1,this.gizmos.shadowmap=a,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let t in this.gizmos){let e=this.gizmos[t];if(e instanceof IL){let n=this.shadow.camera,i=new G(-n.far+this.position.x,-n.far+this.position.y,-n.far+this.position.z),r=new G(n.far+this.position.x,n.far+this.position.y,n.far+this.position.z);e.box.set(i,r),e.updateMatrixWorld(!0)}}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.objectHelper&&this.objectHelper.update()}updateState(t,e){this.updateState_Light(t,e),t.distance!==void 0&&(this.distance=t.distance),t.decay!==void 0&&(this.decay=t.decay),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Tle=new G,Ple=new G,Dle=new Wn,ZRt=class extends _7(O_t,q_e){constructor(t,e,n){super(),this.super_Entity(t,e),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=Ln.RAD2DEG*2*this.angle,i.aspect=1,i.near=100,i.far=2500;let r=new RL(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let t in this.gizmos){let e=this.gizmos[t];e instanceof RL&&e.update()}}updateMatrixWorld(t){super.updateMatrixWorld(t),Ple.setFromMatrixPosition(this.matrixWorld),Dle.setFromRotationMatrix(this.matrixWorld),Tle.copy(this.up).applyQuaternion(Dle).negate().multiplyScalar(this.distance),this.target.position.copy(Ple).add(Tle),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(t,e){this.updateState_Light(t,e),t.distance!==void 0&&(this.distance=t.distance),t.decay!==void 0&&(this.decay=t.decay),t.angle!==void 0&&(this.angle=t.angle),t.penumbra!==void 0&&(this.penumbra=t.penumbra),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},QRt=class extends jc{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(t,e){let n=this.geometry.getAttribute("position");n!==void 0?g7(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,t,e):super.updateEntityBoxSize(t,e)}},A7=class extends jc{constructor(t,e,n){super(t,e,n),this._shapeId=null,this._context=n}updateState(t,e){super.updateState(t,e),this.updateShape()}updateShape(){var i;let t=this.data.geometry.extrusion.shape,e;if(t.type==="Custom"){let r=t.shapeId;if(r!==this._shapeId&&this.detachShape(),r){this._shapeId=r;let s=this._context.scene.find(r);s!=null&&s.data&&(s.attachedPaths.add(this),e=(i=s.geometry.userData)==null?void 0:i.shape),e||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let r;switch(t.type){case"Rectangle":r=Zwe;break;case"Ellipse":r=d7;break;case"Polygon":r=Jwe;break;case"Star":r=Qwe;break;default:throw new Error(`Unknown shape type: ${t.type}`)}e=r.create({parameters:t}).userData.shape}let n=this.geometry;e&&n.inputs&&(n.inputs.shapeData=e,n.build(),this.attachedSurfaceCloners.forEach(r=>r.update()))}detachShape(){var t;this._shapeId!==null&&((t=this._context.scene.find(this._shapeId))==null||t.attachedPaths.delete(this))}createGeometryDelayed(t){this.geometryCreateDeleyed=t.shared,this.updateShape(),this.refreshAttachedPaths(t)}updateTransformState(t){return super.updateTransformState(t)}updateGeometryInteractions(t,e){super.updateGeometryInteractions(t,e),this.updateShape()}updateEntityBoxSize(t,e){let n=this.geometry.getAttribute("position");n!==void 0?g7(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,t,e):super.updateEntityBoxSize(t,e)}},bb=class extends GB(Ox,S7){constructor(t,e,n){super(),e.type==="Instance"&&typeof t=="string"&&(e=this.transformAssignData(e,n)),this.super_Entity(t,e),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(t,e){let n=e.scene.data.objects.get(t.component);if(n){let i,r;for(let s of hw.rootOverrideProps)t[s]===void 0?(i===void 0&&(i={...t}),i[s]=n.data[s]):(r===void 0&&(r={}),r[s]=t[s]);return this.overrideData=r,i??t}return t}updateByOp(t,e,n,i){let r;if(this.isInstanceRoot&&!i&&(e=this.transformAssignData(e,n),t.type===0&&t.path.length===0&&this.component))for(let s of hw.rootOverrideProps)s in t.props&&t.props[s]===void 0&&(r===void 0&&(r={...t,props:{...t.props}}),r.props[s]=this.component.data[s]);super.updateByOp(r??t,e,n,i)}updateState(t,e){this.updateState_Entity(t,e)}expandInstanceChildren(t){let e=this.data;if(this.component===void 0){this.component=t.scene.find(e.component)??null;let n=!1;if(this.component!==this.oldComponent){if(this.oldComponent){let i=0;for(let r of this.children)if(ki.is(r))t.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),M7(r),i+=1;else break;this.children.splice(0,i)}n=!0}this.component&&X_e(t,[this.uuid],e.overrides,this,this.component,this.component,0,n),this.oldComponent=this.component}}};function M7(t){if(t.component){let e=t.component.instances.indexOf(t);e>=0&&t.component.instances.splice(e,1);for(let n of t.children)ki.is(n)&&M7(n)}}function Ole(t,e,n,i){return t.component===e&&Y$(t.identity,i)?t.overrideData===n?2:1:0}function X_e(t,e,n,i,r,s,o,a){if(o>50)return!1;if(i.component!==r){if(i.component){let c=i.component.instances.indexOf(i);c>=0&&i.component.instances.splice(c,1)}r.instances.push(i),i.component=r}r instanceof bb&&r.isInstanceRoot&&r.expandInstanceChildren(t);let l=0;for(let c of r.children)if(ki.is(c)){let h=[...e,...typeof c.identity=="string"?[c.identity]:c.identity],u=ZL.resolve(n,h,1),d=null,f;if(!a){let p=i.children[l];if(d=ki.is(p)?p:null,d!==null){let m=Ole(d,c,u,h);f=m>=1?d.stateSelection:void 0,m!==2&&(d=null)}if(d===null&&(d=t.scene.findInstance(h)??null,d!==null)){let m=Ole(d,c,u,h);if(f=m>=1?d.stateSelection:void 0,m!==2)d=null;else{let g=d.parent.children.indexOf(d);d.parent.children.splice(g,1),i.children.splice(l,0,d),d.parent===i?g<=l&&console.error("not possible"):(d.parent=i,d.matrixWorldNeedsUpdate=!0,d.resetBBoxNeedsUpdate(),d.updateVisible(),t.pendingDeletes.delete(d))}}}if(d===null){let p=u?nv.apply(c.data,u):c.data;Ov.is(p.type)&&(p={...p,type:"Empty"}),d=mm.createEntity(h,p,t),d.overrideData=u,i.add(d),i.children.splice(i.children.length-1,1),i.children.splice(l,0,d),d.updateState(d.data,t),f&&d.changeSelectedState(f,t),t.scene.registerInstanceAndSetUuid(d)}l+=1,X_e(t,e,n,d,c,s,o+1,a)}if(!a){let c=l;for(;;){let h=i.children[l];if(ki.is(h))t.pendingDeletes.add(h);else break;l+=1}i.children.splice(c,l-c)}return!0}function eIt(t,e,n){let i;return e.geometry.type==="TextGeometry"?new G_e(t,e,n):(e.geometry.type==="SubdivGeometry"?i=new Y2(t,e,n):e.geometry.type==="PathGeometry"?i=new A7(t,e,n):e.geometry.type==="VectorGeometry"?i=new QRt(t,e,n):e.geometry.type==="BooleanGeometry"?i=new fw(t,e,n):i=new jc(t,e,n),i)}function E7(t,e,n){return e.type==="Mesh"?eIt(t,e,n):e.type==="Empty"?new Uj(t,e):e.type==="PointLight"?new JRt(t,e,n):e.type==="SpotLight"?new ZRt(t,e,n):e.type==="DirectionalLight"?new KRt(t,e,n):e.type==="Component"||e.type==="Instance"?new bb(t,e,n):Ov.is(e.type)?new Da(t,e):(console.error(e),new Uj(t,e))}mm.createEntity=E7;function tIt(t,e,n){let i=E7(t.identity,e,n),r=t.children,s=t.attachedPaths,o=t.parent,a=t.component,l=t.instances,c=t.overrideData,h=t.uuid,u=t.stateSelection;t.dispose();for(let d of Object.keys(t))delete t[d];Object.setPrototypeOf(t,Object.getPrototypeOf(i));for(let d of Object.keys(i))t[d]=i[d];t.children=[...t.children,...r],t.attachedPaths=s,t.parent=o,t.component=a,t.instances=l,t.uuid=h,t.overrideData=c,t.updateState(t.data,n),u&&t.changeSelectedState(u,n),t.resetBBoxNeedsUpdate()}mm.changeEntityProptotype=tIt;mm.Cloner=fR;function nIt(t,e,n,i){t.updateByOp(e,n,i,!1)}function Lle(t,e){let n=!1,i=e.getLayersOfType("transmission"),r=e.getLayersOfType("outline");return r.length>0&&(t.layers.set(8),i.length>0&&t.layers.enable(3),n=!0,w7(t),b7(t)),i.length===0&&r.length===0&&t.layers.set(0),n}function Rle(t,e){if(!e.layers)return!1;let n=!1,i=e.getLayersOfType("transmission").filter(s=>s.data.visible),r=e.getLayersOfType("outline").filter(s=>s.data.visible);return i.length>0&&(t.layers.set(3),r.length>0&&t.layers.enable(8),n=!0),i.length===0&&r.length===0&&t.layers.set(0),n}function iIt(t){let e=!1;return t.traverseEntity(n=>{if(n instanceof UB)if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)Lle(n,n.material[i])&&(e=!0);else Lle(n,n.material)&&(e=!0)}),e}function rIt(t){let e=!1;return t.traverseEntity(n=>{if(n instanceof UB)if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)Rle(n,n.material[i])&&(e=!0);else Rle(n,n.material)&&(e=!0)}),e}var sIt=new ube,oIt=new dt,aIt=new qw;function lIt(t,e,n){let i=t.cloner;if(i)for(let r of i.children){let s=oIt.copy(r.matrixWorld).invert(),o=aIt.copy(e.ray).applyMatrix4(s),a=t.matrixWorld;o.applyMatrix4(a);let l=sIt;l.set(o.origin,o.direction),l.near=e.near,l.far=e.far,l.intersectObject(t,!1).length>0&&n.push({object:t})}}var cIt=t=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${t};
const int gShadowSamples = ${t};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

vec2 vogelDiskSample(int sample_index, int sample_count, float angle)
{
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sample_index) + 0.5f) / sqrt(float(sample_count));
  float theta = float(sample_index) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// NOTE: For now we aren't using this screen-space noise. But we should enable
// it again once we do some sort of temporal AA. Then we could potentially lower
// the number of samples needed and still get a pretty smooth result.
// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos)
{
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

vec4 shadowmod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 shadowperm(vec4 x){return shadowmod289(((x * 34.0) + 1.0) * x);}
float shadowNoise(vec3 p){
            vec3 a = floor(p);
            vec3 d = p - a;
            d = d * d * (3.0 - 2.0 * d);
            vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
            vec4 k1 = shadowperm(b.xyxy);
            vec4 k2 = shadowperm(k1.xyxy + b.zzww);
            vec4 c = k2 + a.zzzz;
            vec4 k3 = shadowperm(c);
            vec4 k4 = shadowperm(c + 1.0);
            vec4 o1 = fract(k3 * (1.0 / 41.0));
            vec4 o2 = fract(k4 * (1.0 / 41.0));
            vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
            vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
            return o4.y * d.y + o4.x * (1.0 - d.y);
        }

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;
    float temporalOffset = shadowNoise(floor(vWPosition * 10.));

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    //float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        float temporalOffset = shadowNoise(floor(vWPosition * 10.));
        float temporalAngle  = temporalOffset * PI2;


        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,uIt=pn.lights_fragment_begin,hIt=pn.shadowmask_pars_fragment,Ile=!1,dIt=t=>{switch(t){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},fIt=(t="medium")=>{if(Ile)return;Ile=!0;let e=dIt(t);pn.shadowmap_pars_fragment=cIt(e);let n=uIt.slice();n=n.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),n=n.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),pn.lights_fragment_begin=n;let i=hIt.slice();i=i.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),pn.shadowmask_pars_fragment=i},pIt=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,mIt=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,mz=new Ms({vertexShader:pIt,fragmentShader:mIt,uniforms:{depthContrast:{value:1}}}),gIt=class{constructor(){this._constraints=new Map}setConstraint(t,e){e===null?this._constraints.delete(t):this._constraints.set(t,e)}removeDependencies(t){this._constraints.delete(t)}applyConstraints(t){let e=new Set;this._constraints.forEach((n,i)=>{let r=[i,n],s=n;for(;this._constraints.has(s);)s=this._constraints.get(s),e.has(s)||r.push(s);for(let o=r.length-2;o>=0;o--)if(!e.has(r[o])){let a=t.find(r[o]);a?a.applyPathSnapping(t):console.warn(`missing entity ${r[o]}`),e.add(r[o])}})}findDependency(t,e){let n=t;for(;this._constraints.has(n);)if(n=this._constraints.get(n),n===e)return!0;return!1}},Hj=new JE;Hj.wireframe=!0;var Ble=new G,Y_e=class extends tv{constructor(t,e){super(),this.data=t,this.backupFog=new Yxe(16777215,.1,2e3),this.fogUseBGColor=!1,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.bgColor=new Pa(1,1,1,1),this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new gIt,this.needsRecomputeInstances=!1,this.ambientLight=new P_t(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.postprocessing=t.postprocessing,this.init(t,e),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=rIt(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=iIt(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(t){let e=t.identity.join("-"),n=this.entityIdentityToEntity[e];n&&(t.uuid=n.uuid),this.entityIdentityToEntity[e]=t,this.entityByUuid[t.uuid]=t}findInstance(t){return this.entityIdentityToEntity[t.join("-")]}getWithSortKey(t){let e=this.find(t);if(e===void 0)return;let n=[],i=e;for(;i!==this;){let r=i;i=i.parent;let s=i.children.indexOf(r);n.splice(0,0,s)}return{entity:e,sortKey:n}}getAllSorted(t){let e=[];for(let n of t){let i=this.getWithSortKey(n.id);i!==void 0&&e.push(i)}return e.sort((n,i)=>B3t(n.sortKey,i.sortKey)),e.map(n=>n.entity)}nonExistOrDescendantOf(t,e){let n=this.find(t);if(n===void 0)return!0;for(;n;){if(n.uuid===e)return!0;n=n.parent}return!1}find(t){if(t===""||t===void 0)return;let e=this.entityByUuid[t];return e===void 0?this.getObjectByProperty("uuid",t):e}debugEnsureEntity(t){let e=this.find(t);if(e){if(Array.isArray(e.identity)&&this.findInstance(e.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(t){this.toExpandCloner.add(t)}addPendingUpdateCloner(t){this.toUpdateCloner.add(t)}markToExpandCloner(t){this.toExpandCloner.add(t),t.traverseEntityAncestors(e=>{this.toExpandCloner.add(e)})}doPendingExpandCloner(){this.toExpandCloner.forEach(t=>{t.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(t=>{var e;(e=t.cloner)==null||e.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(t){this.pendingCommands.push(t)}applyPendingCommands(){this.pendingCommands.forEach(t=>t()),this.pendingCommands.length=0}updateTreeByOp(t,e){var n;if(t.path.length===0&&t.type===7){let i=t.parent===null?this:this.find(t.parent);if(i===void 0)throw new Error("unexpected");let r=this.createObject(t.id,t.data,t.children,i,t.localIndex,e);r.updateVisible(),r.resetBBoxNeedsUpdate(),xf(r)&&ym(r.parent)&&(r.invalidateUpstreamBooleanData(),r.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(r),this.markToExpandCloner(r)}else if(t.path.length===0&&t.type===8){let i=this.find(t.id);if(i===void 0)throw new Error("unexpected");this.markToExpandCloner(i),i.resetBBoxNeedsUpdate(),this.unregisterObject(i);let r=i.parent;this.markNeedsRecomputeInstancesForAncessors(r),this.markNeedsRecomputeInstancesForChildren(i),i.parent.remove(i),ym(i.parent)&&(i.parent.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),xf(i)&&(i.freeBooleanPointer(),r instanceof fw&&r.invalidateDownstreamBooleanData().recomputeBoolean()),i instanceof A7&&i.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),this.pathConstraints.removeDependencies(i.uuid)}else if(t.path.length===0&&t.type===9){let i=this.find(t.id);if(i===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(i);let r=i.parent;this.markNeedsRecomputeInstancesForAncessors(r),(n=i.cloner)==null||n.resetOnMove(),this.markToExpandCloner(i);let s=t.parent===null?this:this.find(t.parent);if(s===void 0)throw new Error("unexpected");s.add(i),this.markNeedsRecomputeInstancesForAncessors(s),this.markToExpandCloner(i),i.invalidateClonerTransform(i),i.updateVisible(),i.resetBBoxNeedsUpdate();let o=t.localIndex;s.children.splice(o,0,s.children.pop()),xf(i)&&(i.invalidateUpstreamBooleanData(),ym(i.parent)?i.parent.invalidateDownstreamBooleanData().recomputeBoolean():r instanceof fw&&r.invalidateDownstreamBooleanData().recomputeBoolean())}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}updateEntityByOp(t,e,n,i){if(e.type===0){if(("overrides"in e.props||"component"in e.props)&&this.markNeedsRecomputeInstances(),e.path.includes("overrides")&&"states"in e.props){let{states:s,rest:o}=e.props;e={...e,props:o},this.markNeedsRecomputeInstances()}e.path[0]==="pathSnapping"&&e.props.pathId!==void 0&&this.pathConstraints.setConstraint(t,e.props.pathId)}let r=this.find(t);if(r)try{nIt(r,e,n,{scene:this,shared:i}),r instanceof jc&&r.updateGeometryGroupsIfNeeded()}catch(s){console.error(s)}}get enableFog(){return this.fog!==null}set enableFog(t){this.fog=t===!0?this.backupFog:null}init(t,e){if(this.createChildrenObjects(t.objects,this,e),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(dl(t.backgroundColor,e)),this.updateFog(t.fog,e),this.updateAmbientLight(t.environment.ambientLight,e),this.activeCamera=this.personalCamera,t.publish.playCamera!==null){let n=this.find(t.publish.playCamera);n instanceof Da&&this.switchActiveCamera(n)}this.expandInstances(e,!0),this.traverseEntity(n=>{ym(n)&&n.recomputeBoolean(),n instanceof Da&&n.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(t){t.traverseEntity(e=>{(e.data.type==="Component"||e.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(t){ki.is(t)&&(t.data.type==="Component"&&this.markNeedsRecomputeInstances(),t.traverseAncestors(e=>{ki.is(e)&&e.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(t,e,n,i,r,s,o){t&&t!==i.uuid&&i.find(t)&&r.forInstancesRec(a=>{a.isInstanceRoot||(a.data=HL(a.data,l=>{let c=l.events.data(o.id),h=a.goUp(s);if(h){let u=[...Awe(h.identity),t].join("-"),d=this.entityIdentityToEntity[u];if(d){let f=d.uuid;Kh.zoom(c,e)[n]=f}else console.warn("cannot find instance")}}).data)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(t=>{if(t instanceof bb&&typeof t.identity=="string"&&t.data.type==="Component")return t.traverseEntity((e,n)=>{e.data.events.forEach(i=>{i.data.type==="GameControl"?e.forInstancesRec(r=>{r.isInstanceRoot||(r.data=HL(r.data,s=>{s.events.delete(i.id)}).data)}):i.data.type==="Conditional"?(i.data.condition.type==="Distance"?(this.relativeizeInner(i.data.condition.fromObject,["condition"],"fromObject",t,e,n,i),this.relativeizeInner(i.data.condition.toObject,["condition"],"toObject",t,e,n,i)):i.data.condition.type==="State"?this.relativeizeInner(i.data.condition.object,["condition"],"object",t,e,n,i):i.data.condition.type==="Comparison"&&(i.data.condition.lOperand.type==="Property"&&this.relativeizeInner(i.data.condition.lOperand.value[0],["condition","lOperand","value"],0,t,e,n,i),i.data.condition.rOperand.type==="Property"&&this.relativeizeInner(i.data.condition.rOperand.value[0],["condition","rOperand","value"],0,t,e,n,i)),i.data.inActions.forEach(r=>{r.data.type==="Transition"&&this.relativeizeInner(r.data.object,["inActions",r.id],"object",t,e,n,i)}),i.data.outActions.forEach(r=>{r.data.type==="Transition"&&this.relativeizeInner(r.data.object,["outActions",r.id],"object",t,e,n,i)})):"actions"in i.data&&i.data.actions.forEach(r=>{r.data.type==="Transition"&&this.relativeizeInner(r.data.object,["actions",r.id],"object",t,e,n,i)})})}),!0})}expandInstances(t,e){let n=new Set;this.traverseEntity(i=>{if(i instanceof bb&&i.isInstanceRoot)return i.expandInstanceChildren({scene:this,shared:t,pendingDeletes:n}),e||i.resetBBoxNeedsUpdate(),!0});for(let i of n)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),M7(i)}recomputeInstances(t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(e=>{e instanceof bb&&e.isInstanceRoot&&(e.component=void 0)}),this.expandInstances(t,!1))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(t){t.traverseEntity(e=>{let n=typeof e.identity=="string"?e.identity:e.identity.join("-");this.entityIdentityToEntity[n]===e&&(delete this.entityByUuid[e.uuid],delete this.entityIdentityToEntity[n]),e.dispose()})}clearScene(){for(let t of this.children)ki.is(t)&&t.disposeRecursively();this.children.length=0}resetAfterClear(t,e){this.init(t,e)}createPersonalCamera(){let t=new Da(Y_e.PERSONAL_CAMERA_ID,{...JL.defaultData,name:"Personal Camera"});return t.objectHelper.visible=!1,this.registerObjectCreatedInLegacy(t),t}raycast(t){let e=[],n=i=>{for(let r of i.children){let s=r.cloner;ki.is(r)&&!r.raycastLock&&(r.visible||s!=null&&s.object.data.visible)&&((xf(r)||XRt(r)&&this.enableHelpers&&r.objectHelper.visible)&&(t.intersectObject(r,!1,e),lIt(r,t,e)),n(r))}};return n(this),e}forEachEntity(t){for(let e of this.children)ki.is(e)&&t(e)}traverseEntity(t){for(let e of this.children)ki.is(e)&&e.traverseEntity(t)}traverseObject(t){for(let e of this.children)aR.is(e)&&e.traverseObject(t)}traverseVisibleEntity(t){for(let e of this.children)ki.is(e)&&e.visible&&e.traverseVisibleEntity(t)}updateFog(t,e){this.enableFog=t.enabled,this.fogUseBGColor=t.useBackgroundColor,t.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=dl(t.color,e),this.backupFog.near=t.near,this.backupFog.far=t.far}dispose(){this.clearScene()}updateAmbientLight(t,e){t.color!==void 0&&(this.ambientLight.color=dl(t.color,e)),t.intensity!==void 0&&(this.ambientLight.intensity=t.intensity),t.groundColor!==void 0&&(this.ambientLight.groundColor=dl(t.groundColor,e)),t.enabled!==void 0&&(this.ambientLight.visible=t.enabled)}switchActiveCamera(t){this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=t,t.objectHelper.visible=!1}setBackgroundColor(t){this.bgColor=t,this.fogUseBGColor===!0&&(this.backupFog.color=t)}createChildrenObjects(t,e,n){let i=0;for(let r of t)this.createObject(r.id,r.data,r.children,e,i,n),i+=1}registerObjectCreatedInLegacy(t){this.entityByUuid[t.uuid]=t}unregisterObject(t){delete this.entityByUuid[t.uuid];for(let e of t.children)this.unregisterObject(e)}createObject(t,e,n,i,r,s){var l;let o={scene:this,shared:s},a=E7(t,e,o);return a&&(this.entityByUuid[t]=a,i.add(a),i.children.splice(r,0,i.children.pop()),n.length>0&&(a.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(n,a,s)),a.updateState(e,o),a instanceof jc&&a.updateGeometryGroupsIfNeeded(),a.updateVisible(),a.cloner&&this.toExpandCloner.add(a),(l=e.pathSnapping)!=null&&l.pathId&&this.pathConstraints.setConstraint(t,e.pathSnapping.pathId)),a}getCenter(t){let e=[];for(let i=0,r=t.length;i<r;++i){let{id:s,recursive:o}=t[i],a=this.find(s),l=o?a.recursiveBBox:a.singleBBox;e.push(...l.vertices)}let n=new cs;return n.setFromPoints(e),n.getCenter(Ble),Ble}copyMatrixWorld(t,e){if(t===null){e.identity();return}let n=this.find(t);n?e.copy(n.matrixWorld):e.identity()}copyParentMatrixWorld(t,e){var i;if(t===null){e.identity();return}let n=(i=this.find(t))==null?void 0:i.parent;n?e.copy(n.matrixWorld):e.identity()}traverseMaterial(t){this.traverseEntity(e=>{if(e instanceof _l)if(Array.isArray(e.material))for(let n=0;n<e.material.length;n++)e.material[n]instanceof Km&&t(e.material[n]);else e.material instanceof Km&&t(e.material)})}updateCanvasSize(t,e){this.activeCamera.setViewplaneSize(t,e);let n,i;t>=e?(n=e/t,i=1):(n=1,i=t/e),this.traverseMaterial(r=>{r.getLayersOfType("transmission").forEach(s=>{s.uniforms[`f${s.id}_aspectRatio`].value.x=n,s.uniforms[`f${s.id}_aspectRatio`].value.y=i})})}},s_=Y_e;s_.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera";var QD=(t,e)=>{let n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},vIt=(t,e)=>{let n=e.x-t.x,i=e.y-t.y;return xIt(Math.atan2(i,n))},yIt=(t,e,n)=>{let i={x:0,y:0};return n=jj(n),i.x=t.x-e*Math.cos(n),i.y=t.y-e*Math.sin(n),i},jj=t=>t*(Math.PI/180),xIt=t=>t*(180/Math.PI),bIt=t=>isNaN(t.buttons)?t.pressure!==0:t.buttons!==0,gz=new Map,kle=t=>{gz.has(t)&&clearTimeout(gz.get(t)),gz.set(t,setTimeout(t,100))},pR=(t,e,n)=>{let i=e.split(/[ ,]+/g),r;for(let s=0;s<i.length;s+=1)r=i[s],t.addEventListener?t.addEventListener(r,n,!1):t.attachEvent&&t.attachEvent(r,n)},Fle=(t,e,n)=>{let i=e.split(/[ ,]+/g),r;for(let s=0;s<i.length;s+=1)r=i[s],t.removeEventListener?t.removeEventListener(r,n):t.detachEvent&&t.detachEvent(r,n)},K_e=t=>(t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t),Nle=()=>{if(typeof window>"u")return;let t=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,e=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:t,y:e}},Vj=(t,e)=>{e.top||e.right||e.bottom||e.left?(t.style.top=e.top,t.style.right=e.right,t.style.bottom=e.bottom,t.style.left=e.left):(t.style.left=e.x+"px",t.style.top=e.y+"px")},C7=(t,e,n)=>{let i=J_e(t);for(let r in i)if(i.hasOwnProperty(r))if(typeof e=="string")i[r]=e+" "+n;else{let s="";for(let o=0,a=e.length;o<a;o+=1)s+=e[o]+" "+n+", ";i[r]=s.slice(0,-2)}return i},wIt=(t,e)=>{let n=J_e(t);for(let i in n)n.hasOwnProperty(i)&&(n[i]=e);return n},J_e=t=>{let e={};return e[t]="",["webkit","Moz","o"].forEach(function(n){e[n+t.charAt(0).toUpperCase()+t.slice(1)]=""}),e},vz=(t,e)=>{for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},_It=(t,e)=>{let n={};for(let i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)?n[i]=e[i]:t.hasOwnProperty(i)&&(n[i]=t[i]);return n},Wj=(t,e)=>{if(t.length)for(let n=0,i=t.length;n<i;n+=1)e(t[n]);else e(t)},SIt=(t,e,n)=>({x:Math.min(Math.max(t.x,e.x-n),e.x+n),y:Math.min(Math.max(t.y,e.y-n),e.y+n)});typeof window<"u"&&(Z_e="ontouchstart"in window,Q_e=!!window.PointerEvent,eSe=!!window.MSPointerEvent);var Z_e,Q_e,eSe,eA={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},Fx,K2={};Q_e?Fx=eA.pointer:eSe?Fx=eA.MSPointer:Z_e?(Fx=eA.touch,K2=eA.mouse):Fx=eA.mouse;function ay(){}ay.prototype.on=function(t,e){var n=this,i=t.split(/[ ,]+/g),r;n._handlers_=n._handlers_||{};for(var s=0;s<i.length;s+=1)r=i[s],n._handlers_[r]=n._handlers_[r]||[],n._handlers_[r].push(e);return n};ay.prototype.off=function(t,e){var n=this;return n._handlers_=n._handlers_||{},t===void 0?n._handlers_={}:e===void 0?n._handlers_[t]=null:n._handlers_[t]&&n._handlers_[t].indexOf(e)>=0&&n._handlers_[t].splice(n._handlers_[t].indexOf(e),1),n};ay.prototype.trigger=function(t,e){var n=this,i=t.split(/[ ,]+/g),r;n._handlers_=n._handlers_||{};for(var s=0;s<i.length;s+=1)r=i[s],n._handlers_[r]&&n._handlers_[r].length&&n._handlers_[r].forEach(function(o){o.call(n,{type:r,target:n},e)})};ay.prototype.config=function(t){var e=this;e.options=e.defaults||{},t&&(e.options=_It(e.options,t))};ay.prototype.bindEvt=function(t,e){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[e]=function(){typeof n["on"+e]=="function"?n["on"+e].apply(n,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},pR(t,Fx[e],n._domHandlers_[e]),K2[e]&&pR(t,K2[e],n._domHandlers_[e]),n};ay.prototype.unbindEvt=function(t,e){var n=this;return n._domHandlers_=n._domHandlers_||{},Fle(t,Fx[e],n._domHandlers_[e]),K2[e]&&Fle(t,K2[e],n._domHandlers_[e]),delete n._domHandlers_[e],this};var T7=ay;function Ts(t,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(e),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Ts.id,Ts.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Ts.prototype=new T7;Ts.constructor=Ts;Ts.id=0;Ts.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Ts.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",e=wIt("borderRadius","50%"),n=C7("transition","opacity",t),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},vz(i.el,n),this.options.shape==="circle"&&vz(i.back,e),vz(i.front,e),this.applyStyles(i),this};Ts.prototype.applyStyles=function(t){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var n in t[e])this.ui[e].style[n]=t[e][n];return this};Ts.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Ts.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Ts.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Ts.prototype.show=function(t){var e=this;return e.options.dataOnly||(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),typeof t=="function"&&t.call(this)},e.options.fadeTime)),e};Ts.prototype.hide=function(t){var e=this;if(e.options.dataOnly)return e;if(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var n=e.options.mode==="dynamic"?"none":"block";e.ui.el.style.display=n,typeof t=="function"&&t.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.options.restJoystick){let n=e.options.restJoystick,i={};i.x=n===!0||n.x!==!1?0:e.instance.frontPosition.x,i.y=n===!0||n.y!==!1?0:e.instance.frontPosition.y,e.setPosition(t,i)}return e};Ts.prototype.setPosition=function(t,e){var n=this;n.frontPosition={x:e.x,y:e.y};var i=n.options.fadeTime+"ms",r={};r.front=C7("transition",["top","left"],i);var s={front:{}};s.front={left:n.frontPosition.x+"px",top:n.frontPosition.y+"px"},n.applyStyles(r),n.applyStyles(s),n.restTimeout=setTimeout(function(){typeof t=="function"&&t.call(n),n.restCallback()},n.options.fadeTime)};Ts.prototype.restCallback=function(){var t=this,e={};e.front=C7("transition","none",""),t.applyStyles(e),t.trigger("rested",t.instance)};Ts.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Ts.prototype.computeDirection=function(t){var e=t.angle.radian,n=Math.PI/4,i=Math.PI/2,r,s,o;if(e>n&&e<n*3&&!t.lockX?r="up":e>-n&&e<=n&&!t.lockY?r="left":e>-n*3&&e<=-n&&!t.lockX?r="down":t.lockY||(r="right"),t.lockY||(e>-i&&e<i?s="left":s="right"),t.lockX||(e>0?o="up":o="down"),t.force>this.options.threshold){var a={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(a[l]=this.direction[l]);var c={};this.direction={x:s,y:o,angle:r},t.direction=this.direction;for(l in a)a[l]===this.direction[l]&&(c[l]=!0);if(c.x&&c.y&&c.angle)return t;(!c.x||!c.y)&&this.trigger("plain",t),c.x||this.trigger("plain:"+s,t),c.y||this.trigger("plain:"+o,t),c.angle||this.trigger("dir dir:"+r,t)}else this.resetDirection();return t};var AIt=Ts;function Yr(t,e){var n=this;n.nipples=[],n.idles=[],n.actives=[],n.ids=[],n.pressureIntervals={},n.manager=t,n.id=Yr.id,Yr.id+=1,n.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},n.config(e),(n.options.mode==="static"||n.options.mode==="semi")&&(n.options.multitouch=!1),n.options.multitouch||(n.options.maxNumberOfNipples=1);let i=getComputedStyle(n.options.zone.parentElement);return i&&i.display==="flex"&&(n.parentIsFlex=!0),n.updateBox(),n.prepareNipples(),n.bindings(),n.begin(),n.nipples}Yr.prototype=new T7;Yr.constructor=Yr;Yr.id=0;Yr.prototype.prepareNipples=function(){var t=this,e=t.nipples;e.on=t.on.bind(t),e.off=t.off.bind(t),e.options=t.options,e.destroy=t.destroy.bind(t),e.ids=t.ids,e.id=t.id,e.processOnMove=t.processOnMove.bind(t),e.processOnEnd=t.processOnEnd.bind(t),e.get=function(n){if(n===void 0)return e[0];for(var i=0,r=e.length;i<r;i+=1)if(e[i].identifier===n)return e[i];return!1}};Yr.prototype.bindings=function(){var t=this;t.bindEvt(t.options.zone,"start"),t.options.zone.style.touchAction="none",t.options.zone.style.msTouchAction="none"};Yr.prototype.begin=function(){var t=this,e=t.options;if(e.mode==="static"){var n=t.createNipple(e.position,t.manager.getIdentifier());n.add(),t.idles.push(n)}};Yr.prototype.createNipple=function(t,e){var n=this,i=n.manager.scroll,r={},s=n.options,o={x:n.parentIsFlex?i.x:i.x+n.box.left,y:n.parentIsFlex?i.y:i.y+n.box.top};if(t.x&&t.y)r={x:t.x-o.x,y:t.y-o.y};else if(t.top||t.right||t.bottom||t.left){var a=document.createElement("DIV");a.style.display="hidden",a.style.top=t.top,a.style.right=t.right,a.style.bottom=t.bottom,a.style.left=t.left,a.style.position="absolute",s.zone.appendChild(a);var l=a.getBoundingClientRect();s.zone.removeChild(a),r=t,t={x:l.left+i.x,y:l.top+i.y}}var c=new AIt(n,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:e,position:t,zone:s.zone,frontPosition:{x:0,y:0},shape:s.shape});return s.dataOnly||(Vj(c.ui.el,r),Vj(c.ui.front,c.frontPosition)),n.nipples.push(c),n.trigger("added "+c.identifier+":added",c),n.manager.trigger("added "+c.identifier+":added",c),n.bindNipple(c),c};Yr.prototype.updateBox=function(){var t=this;t.box=t.options.zone.getBoundingClientRect()};Yr.prototype.bindNipple=function(t){var e=this,n,i=function(r,s){n=r.type+" "+s.id+":"+r.type,e.trigger(n,s)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)};Yr.prototype.pressureFn=function(t,e,n){var i=this,r=0;clearInterval(i.pressureIntervals[n]),i.pressureIntervals[n]=setInterval(function(){var s=t.force||t.pressure||t.webkitForce||0;s!==r&&(e.trigger("pressure",s),i.trigger("pressure "+e.identifier+":pressure",s),r=s)}.bind(i),100)};Yr.prototype.onstart=function(t){var e=this,n=e.options,i=t;t=K_e(t),e.updateBox();var r=function(s){e.actives.length<n.maxNumberOfNipples?e.processOnStart(s):i.type.match(/^touch/)&&(Object.keys(e.manager.ids).forEach(function(o){if(Object.values(i.touches).findIndex(function(l){return l.identifier===o})<0){var a=[t[0]];a.identifier=o,e.processOnEnd(a)}}),e.actives.length<n.maxNumberOfNipples&&e.processOnStart(s))};return Wj(t,r),e.manager.bindDocument(),!1};Yr.prototype.processOnStart=function(t){var e=this,n=e.options,i,r=e.manager.getIdentifier(t),s=t.force||t.pressure||t.webkitForce||0,o={x:t.pageX,y:t.pageY},a=e.getOrCreate(r,o);a.identifier!==r&&e.manager.removeIdentifier(a.identifier),a.identifier=r;var l=function(h){h.trigger("start",h),e.trigger("start "+h.id+":start",h),h.show(),s>0&&e.pressureFn(t,h,h.identifier),e.processOnMove(t)};if((i=e.idles.indexOf(a))>=0&&e.idles.splice(i,1),e.actives.push(a),e.ids.push(a.identifier),n.mode!=="semi")l(a);else{var c=QD(o,a.position);if(c<=n.catchDistance)l(a);else{a.destroy(),e.processOnStart(t);return}}return a};Yr.prototype.getOrCreate=function(t,e){var n=this,i=n.options,r;return/(semi|static)/.test(i.mode)?(r=n.idles[0],r?(n.idles.splice(0,1),r):i.mode==="semi"?n.createNipple(e,t):(console.warn("Coudln't find the needed nipple."),!1)):(r=n.createNipple(e,t),r)};Yr.prototype.processOnMove=function(t){var e=this,n=e.options,i=e.manager.getIdentifier(t),r=e.nipples.get(i),s=e.manager.scroll;if(!bIt(t)){this.processOnEnd(t);return}if(!r){console.error("Found zombie joystick with ID "+i),e.manager.removeIdentifier(i);return}if(n.dynamicPage){var o=r.el.getBoundingClientRect();r.position={x:s.x+o.left,y:s.y+o.top}}r.identifier=i;var a=r.options.size/2,l={x:t.pageX,y:t.pageY};n.lockX&&(l.y=r.position.y),n.lockY&&(l.x=r.position.x);var c=QD(l,r.position),h=vIt(l,r.position),u=jj(h),d=c/a,f={distance:c,position:l},p,m;if(r.options.shape==="circle"?(p=Math.min(c,a),m=yIt(r.position,p,h)):(m=SIt(l,r.position,a),p=QD(m,r.position)),n.follow){if(c>a){let x=l.x-m.x,b=l.y-m.y;r.position.x+=x,r.position.y+=b,r.el.style.top=r.position.y-(e.box.top+s.y)+"px",r.el.style.left=r.position.x-(e.box.left+s.x)+"px",c=QD(l,r.position)}}else l=m,c=p;var g=l.x-r.position.x,v=l.y-r.position.y;r.frontPosition={x:g,y:v},n.dataOnly||Vj(r.ui.front,r.frontPosition);var y={identifier:r.identifier,position:l,force:d,pressure:t.force||t.pressure||t.webkitForce||0,distance:c,angle:{radian:u,degree:h},vector:{x:g/a,y:-v/a},raw:f,instance:r,lockX:n.lockX,lockY:n.lockY};y=r.computeDirection(y),y.angle={radian:jj(180-h),degree:180-h},r.trigger("move",y),e.trigger("move "+r.id+":move",y)};Yr.prototype.processOnEnd=function(t){var e=this,n=e.options,i=e.manager.getIdentifier(t),r=e.nipples.get(i),s=e.manager.removeIdentifier(r.identifier);!r||(n.dataOnly||r.hide(function(){n.mode==="dynamic"&&(r.trigger("removed",r),e.trigger("removed "+r.id+":removed",r),e.manager.trigger("removed "+r.id+":removed",r),r.destroy())}),clearInterval(e.pressureIntervals[r.identifier]),r.resetDirection(),r.trigger("end",r),e.trigger("end "+r.id+":end",r),e.ids.indexOf(r.identifier)>=0&&e.ids.splice(e.ids.indexOf(r.identifier),1),e.actives.indexOf(r)>=0&&e.actives.splice(e.actives.indexOf(r),1),/(semi|static)/.test(n.mode)?e.idles.push(r):e.nipples.indexOf(r)>=0&&e.nipples.splice(e.nipples.indexOf(r),1),e.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(e.manager.ids[s.id]=s.identifier))};Yr.prototype.onDestroyed=function(t,e){var n=this;n.nipples.indexOf(e)>=0&&n.nipples.splice(n.nipples.indexOf(e),1),n.actives.indexOf(e)>=0&&n.actives.splice(n.actives.indexOf(e),1),n.idles.indexOf(e)>=0&&n.idles.splice(n.idles.indexOf(e),1),n.ids.indexOf(e.identifier)>=0&&n.ids.splice(n.ids.indexOf(e.identifier),1),n.manager.removeIdentifier(e.identifier),n.manager.unbindDocument()};Yr.prototype.destroy=function(){var t=this;t.unbindEvt(t.options.zone,"start"),t.nipples.forEach(function(n){n.destroy()});for(var e in t.pressureIntervals)t.pressureIntervals.hasOwnProperty(e)&&clearInterval(t.pressureIntervals[e]);t.trigger("destroyed",t.nipples),t.manager.unbindDocument(),t.off()};var MIt=Yr;function Vs(t){var e=this;e.ids={},e.index=0,e.collections=[],e.scroll=Nle(),e.config(t),e.prepareCollections();var n=function(){var r;e.collections.forEach(function(s){s.forEach(function(o){r=o.el.getBoundingClientRect(),o.position={x:e.scroll.x+r.left,y:e.scroll.y+r.top}})})};if(typeof window>"u")return e.collections;pR(window,"resize",function(){kle(n)});var i=function(){e.scroll=Nle()};return pR(window,"scroll",function(){kle(i)}),e.collections}Vs.prototype=new T7;Vs.constructor=Vs;Vs.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(e){var n;return t.collections.every(function(i){return n=i.get(e),!n}),n}};Vs.prototype.create=function(t){return this.createCollection(t)};Vs.prototype.createCollection=function(t){var e=this,n=new MIt(e,t);return e.bindCollection(n),e.collections.push(n),n};Vs.prototype.bindCollection=function(t){var e=this,n,i=function(r,s){n=r.type+" "+s.id+":"+r.type,e.trigger(n,s)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)};Vs.prototype.bindDocument=function(){var t=this;t.binded||(t.bindEvt(document,"move").bindEvt(document,"end"),t.binded=!0)};Vs.prototype.unbindDocument=function(t){var e=this;(!Object.keys(e.ids).length||t===!0)&&(e.unbindEvt(document,"move").unbindEvt(document,"end"),e.binded=!1)};Vs.prototype.getIdentifier=function(t){var e;return t?(e=t.identifier===void 0?t.pointerId:t.identifier,e===void 0&&(e=this.latest||0)):e=this.index,this.ids[e]===void 0&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]};Vs.prototype.removeIdentifier=function(t){var e={};for(var n in this.ids)if(this.ids[n]===t){e.id=n,e.identifier=this.ids[n],delete this.ids[n];break}return e};Vs.prototype.onmove=function(t){var e=this;return e.onAny("move",t),!1};Vs.prototype.onend=function(t){var e=this;return e.onAny("end",t),!1};Vs.prototype.oncancel=function(t){var e=this;return e.onAny("end",t),!1};Vs.prototype.onAny=function(t,e){var n=this,i,r="processOn"+t.charAt(0).toUpperCase()+t.slice(1);e=K_e(e);var s=function(a,l,c){c.ids.indexOf(l)>=0&&(c[r](a),a._found_=!0)},o=function(a){i=n.getIdentifier(a),Wj(n.collections,s.bind(null,a,i)),a._found_||n.removeIdentifier(i)};return Wj(e,o),!1};Vs.prototype.destroy=function(){var t=this;t.unbindDocument(!0),t.ids={},t.index=0,t.collections.forEach(function(e){e.destroy()}),t.off()};Vs.prototype.onDestroyed=function(t,e){var n=this;if(n.collections.indexOf(e)<0)return!1;n.collections.splice(n.collections.indexOf(e),1)};var EIt=Vs,zle=new EIt,CIt={create:function(t){return zle.create(t)},factory:zle},TIt=XE(Cxe());function A1(t,e){let n=new Qt;if(!t.getAttribute("position"))return n.setAttribute("position",new At([],3)),n.setIndex([]),n;let{positions:i,triIndices:r}=m7(t.getAttribute("position"),t.getIndex());return n.setAttribute("position",new At(i,3)),n.setIndex(r),e&&n.applyMatrix4(e),n}var PIt=new dt,DIt=new dt,yh=[[0,0,0],[0,0,0],[0,0,0]];function tSe(t){let e=t.elements;yh[0][0]=e[0],yh[0][1]=e[4],yh[0][2]=e[8],yh[1][0]=e[1],yh[1][1]=e[5],yh[1][2]=e[9],yh[2][0]=e[2],yh[2][1]=e[6],yh[2][2]=e[10];let{u:n,v:i}=(0,TIt.SVD)(yh),r=PIt.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),s=DIt.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1);return r.multiply(s.transpose())}var OIt=class extends ube{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(t,e){e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):e.isPerspectiveCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(e),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(t,e=!0,n=[]){return t.forEach(i=>{i.visible&&this.intersectObject(i,e,n)}),n}createRaycastLineHelper(){let t=new ug({color:65280,linewidth:10}),e=new G(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),n=new G(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,r=new G().addVectors(e,n.multiplyScalar(i)),s=new Qt;return s.setFromPoints([e,r]),new DL(s,t)}},nSe=t=>t instanceof Uj||t instanceof bb;function LIt(t,e){return t.distance-e.distance}function iSe(t,e,n){if(!(!Kp(e)||!e.visible)){xf(e)&&e.raycast(t,n);for(let i of e.children)iSe(t,i,n)}}function $j(t,e,n){if(!n.some(r=>mR(t,r)!==void 0))return[];let i=[];return e.children.forEach(r=>iSe(t,r,i)),i.sort(LIt),i}function qj(t){let e=[];if(t.length){let n=t[0].object;Kp(n)&&e.push(n);let i=n.parent;for(;i;)nSe(i)&&e.push(i),i=i.parent}return e}function mR(t,e){if(xf(e)){if(e.visible){let n=[];return e.raycast(t,n),n.length?n[0]:void 0}}else if(nSe(e))return rSe(t,e)}function rSe(t,e){if(!(!Kp(e)||!e.visible)){if(xf(e)){let n=[];if(e.raycast(t,n),n.length)return n[0]}for(let n of e.children){let i=rSe(t,n);if(i)return i}}}function RIt(t,e,n){return{x:(t-(n.left+window.scrollX))/n.width*2-1,y:-((e-(n.top+window.scrollY))/n.height)*2+1}}var IIt=class{constructor(t,e,n,i,r,s){this.isExport=s,this.raycaster=new OIt,this.raycasterNeedsUpdate=!0,this.stopRaycast=!1,this._useWindowEvents=!1,this.sharedAssets=new zB(rR.emptyData()),this.scene=new s_({...wj.defaultData},this.sharedAssets),this.camera=new Da,this.renderer=t,this._useWindowEvents=e.data.publish.mouseEventTarget==="window",this.domElement=t.domElement,this.eventElement=this._useWindowEvents?window:t.domElement,this.stopRaycast=r,this.sharedAssets=i,this.scene=e,this.camera=n}set useWindowEvents(t){this._useWindowEvents=t,this.eventElement=t?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}updateRaycaster(t){if(!this.raycasterNeedsUpdate)return;this.raycasterNeedsUpdate=!1;let{pageX:e,pageY:n}=t.touches!==void 0&&t.touches.length>0?t.touches[0]:t,i=this.domElement.getBoundingClientRect();this.raycaster.setFromCamera(RIt(e,n,i),this.camera)}},sSe=(t=>(t[t.keydown=0]="keydown",t[t.keyup=1]="keyup",t[t.pointerdown=2]="pointerdown",t[t.pointerup=3]="pointerup",t[t.pointermove=4]="pointermove",t[t.wheel=5]="wheel",t[t.scroll=6]="scroll",t))(sSe||{}),dg=class{constructor(t){this.eventContext=t,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},oSe=new Map,xM=new Map,Nx=class{constructor(t,e,n,i){this.data=e;let{audio:r,volume:s,delay:o,loop:a}=e;if(!r)throw new Error("Missing property");let l=typeof r=="string"?i.getAudio(r).src:r.data;this.audioPlayer=new LA({src:l,volume:s,delay:o,loop:a}),xM.has(n.uuid)?xM.get(n.uuid).push(this):xM.set(n.uuid,[this]),oSe.set(t,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},Xj=class{constructor(t){this.data=t}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(t){let e=oSe.get(t);!e||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):e.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(t){let e=xM.get(t);!(e!=null&&e.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(n=>n.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):e.forEach(n=>n.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let t=[...xM.values()];!t.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(e=>{e.forEach(n=>{n.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):t.forEach(e=>{e.forEach(n=>{n.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},zx=class{constructor(t,e,n,i){if(this.data=e,e.interaction==="play")this.interaction=new Nx(t,e,n,i);else if(e.interaction==="pause"||e.interaction==="stop")this.interaction=new Xj(e);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof Nx?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof Nx?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(t){this.interaction instanceof Nx&&(t==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}};function BIt(t,e){let n=t.material.layers.find(i=>i.uuid===e);return n.color.texture.image.img instanceof HTMLVideoElement?n.color.texture.image.img:void 0}var aSe=new Map,bM=new Map,wM=class{constructor(t,e,n){this.data=e,this.delay=0,this.status="stopped";let{layerId:i,loop:r,volume:s,delay:o}=e;if(this.object=n,i===void 0)throw new Error("Missing property");let a=BIt(n,i);if(a)this.videoElement=a,this.videoElement.loop=r===1/0,this.videoElement.autoplay=!0,s!==void 0&&(this.videoElement.volume=s);else throw new Error("Missing property");o!==void 0&&(this.delay=o),bM.has(n.uuid)?bM.get(n.uuid).push(this):bM.set(n.uuid,[this]),aSe.set(t,this),this.pause()}mute(){this.videoElement.muted=!0}unMute(){this.videoElement.muted=!1}play(t){let e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);t?(this.mute(),this.delay+=150):e?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{this.videoElement.play(),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){this.videoElement.pause(),this.status="paused"}stop(){this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay()}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){this.stop(),this.videoElement.muted=!0}},Yj=class{constructor(t){this.data=t}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(t){let e=aSe.get(t);!e||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e[this.data.interaction](),this.disposeDelay()},this.data.delay)):e[this.data.interaction]())}pauseAllVideosFromObject(t){let e=bM.get(t);!(e!=null&&e.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(n=>n[this.data.interaction]()),this.disposeDelay()},this.data.delay)):e.forEach(n=>n[this.data.interaction]()))}pauseAllVideos(){let t=[...bM.values()];!t.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(e=>{e.forEach(n=>{n[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):t.forEach(e=>{e.forEach(n=>{n[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},gR=class{constructor(t,e,n){if(this.data=e,e.interaction==="play")this.interaction=new wM(t,e,n);else if(e.interaction==="pause"||e.interaction==="stop")this.interaction=new Yj(e);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof wM?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof wM?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},kIt="text/plain",FIt="us-ascii",Ule=(t,e)=>e.some(n=>n instanceof RegExp?n.test(t):n===t),NIt=(t,{stripHash:e})=>{let n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!n)throw new Error(`Invalid URL: ${t}`);let{type:i,data:r,hash:s}=n.groups,o=i.split(";");s=e?"":s;let a=!1;o[o.length-1]==="base64"&&(o.pop(),a=!0);let l=(o.shift()||"").toLowerCase(),c=[...o.map(h=>{let[u,d=""]=h.split("=").map(f=>f.trim());return u==="charset"&&(d=d.toLowerCase(),d===FIt)?"":`${u}${d?`=${d}`:""}`}).filter(Boolean)];return a&&c.push("base64"),(c.length>0||l&&l!==kIt)&&c.unshift(l),`data:${c.join(";")},${a?r.trim():r}${s?`#${s}`:""}`};function zIt(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return NIt(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let n=t.startsWith("//");!n&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let s=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,o=0,a="";for(;;){let c=s.exec(i.pathname);if(!c)break;let h=c[0],u=c.index,d=i.pathname.slice(o,u);a+=d.replace(/\/{2,}/g,"/"),a+=h,o=u+h.length}let l=i.pathname.slice(o,i.pathname.length);a+=l.replace(/\/{2,}/g,"/"),i.pathname=a}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let s=i.pathname.split("/"),o=s[s.length-1];Ule(o,e.removeDirectoryIndex)&&(s=s.slice(0,-1),i.pathname=s.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let s of[...i.searchParams.keys()])Ule(s,e.removeQueryParameters)&&i.searchParams.delete(s);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let r=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!r.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),n&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}var UIt=class{constructor({url:t,context:e},n){if(this.managers=n,!t)throw new Error("Missing property");this.url=t.startsWith("mailto:")?t:zIt(t,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=e??"tab"}dispatch(){var t;bj?window.location.assign(this.url):(this.context==="tab"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(t=this.managers.controlsManager.orbitControls)==null||t.onPointerUp(dn[0]),k3t())}},GIt=class{constructor(t,e,n,i){this.scene=e,this.sharedAssets=n,this.sceneData=t,this.managers=i}dispatch(){var t,e,n;MSe(this.sceneData,this.scene,this.sharedAssets,!0),(t=this.managers.eventManager)==null||t.reset(),(e=this.managers.controlsManager.orbitControls)==null||e.reset(),(n=this.managers.controlsManager)==null||n.gameControls.forEach(i=>i.reset(!0))}},lSe={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},P7={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},HIt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],vR={CSS:{},springs:{}};function Gh(t,e,n){return Math.min(Math.max(t,e),n)}function _M(t,e){return t.indexOf(e)>-1}function yz(t,e){return t.apply(null,e)}var Jt={arr:function(t){return Array.isArray(t)},obj:function(t){return _M(Object.prototype.toString.call(t),"Object")},pth:function(t){return Jt.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return!("isNode"in t)&&(t.nodeType||Jt.svg(t))},str:function(t){return typeof t=="string"},fnc:function(t){return typeof t=="function"},und:function(t){return typeof t>"u"},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return Jt.hex(t)||Jt.rgb(t)||Jt.hsl(t)},key:function(t){return!lSe.hasOwnProperty(t)&&!P7.hasOwnProperty(t)&&t!=="targets"&&t!=="keyframes"}};function cSe(t){var e=/\(([^)]+)\)/.exec(t);return e?e[1].split(",").map(function(n){return parseFloat(n)}):[]}function uSe(t,e){var n=cSe(t),i=Gh(Jt.und(n[0])?1:n[0],.1,100),r=Gh(Jt.und(n[1])?100:n[1],.1,100),s=Gh(Jt.und(n[2])?10:n[2],.1,100),o=Gh(Jt.und(n[3])?0:n[3],.1,100),a=Math.sqrt(r/i),l=s/(2*Math.sqrt(r*i)),c=l<1?a*Math.sqrt(1-l*l):0,h=1,u=l<1?(l*a+-o)/c:-o+a;function d(p){var m=e?e*p/1e3:p;return l<1?m=Math.exp(-m*l*a)*(h*Math.cos(c*m)+u*Math.sin(c*m)):m=(h+u*m)*Math.exp(-m*a),p===0||p===1?p:1-m}function f(){var p=vR.springs[t];if(p)return p;for(var m=1/6,g=0,v=0;;)if(g+=m,d(g)===1){if(v++,v>=16)break}else v=0;var y=g*m*1e3;return vR.springs[t]=y,y}return e?d:f}function jIt(t){return t===void 0&&(t=10),function(e){return Math.ceil(Gh(e,1e-6,1)*t)*(1/t)}}var VIt=function(){var t=11,e=1/(t-1);function n(h,u){return 1-3*u+3*h}function i(h,u){return 3*u-6*h}function r(h){return 3*h}function s(h,u,d){return((n(u,d)*h+i(u,d))*h+r(u))*h}function o(h,u,d){return 3*n(u,d)*h*h+2*i(u,d)*h+r(u)}function a(h,u,d,f,p){var m,g,v=0;do g=u+(d-u)/2,m=s(g,f,p)-h,m>0?d=g:u=g;while(Math.abs(m)>1e-7&&++v<10);return g}function l(h,u,d,f){for(var p=0;p<4;++p){var m=o(u,d,f);if(m===0)return u;var g=s(u,d,f)-h;u-=g/m}return u}function c(h,u,d,f){if(!(0<=h&&h<=1&&0<=d&&d<=1))return;var p=new Float32Array(t);if(h!==u||d!==f)for(var m=0;m<t;++m)p[m]=s(m*e,h,d);function g(v){for(var y=0,x=1,b=t-1;x!==b&&p[x]<=v;++x)y+=e;--x;var S=(v-p[x])/(p[x+1]-p[x]),A=y+S*e,E=o(A,h,d);return E>=.001?l(v,A,h,d):E===0?A:a(v,y,y+e,h,d)}return function(v){return h===u&&d===f||v===0||v===1?v:s(g(v),u,f)}}return c}(),hSe=function(){var t={linear:function(){return function(i){return i}}},e={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var r,s=4;i<((r=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((r*3-2)/22-i,2)}},Elastic:function(i,r){i===void 0&&(i=1),r===void 0&&(r=.5);var s=Gh(i,1,10),o=Gh(r,.1,2);return function(a){return a===0||a===1?a:-s*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/o)}}},n=["Quad","Cubic","Quart","Quint","Expo"];return n.forEach(function(i,r){e[i]=function(){return function(s){return Math.pow(s,r+2)}}}),Object.keys(e).forEach(function(i){var r=e[i];t["easeIn"+i]=r,t["easeOut"+i]=function(s,o){return function(a){return 1-r(s,o)(1-a)}},t["easeInOut"+i]=function(s,o){return function(a){return a<.5?r(s,o)(a*2)/2:1-r(s,o)(a*-2+2)/2}}}),t}();function D7(t,e){if(Jt.fnc(t))return t;var n=t.split("(")[0],i=hSe[n],r=cSe(t);switch(n){case"spring":return uSe(t,e);case"cubicBezier":return yz(VIt,r);case"steps":return yz(jIt,r);default:return yz(i,r)}}function dSe(t){try{var e=document.querySelectorAll(t);return e}catch{return}}function HB(t,e){for(var n=t.length,i=arguments.length>=2?arguments[1]:void 0,r=[],s=0;s<n;s++)if(s in t){var o=t[s];e.call(i,o,s,t)&&r.push(o)}return r}function jB(t){return t.reduce(function(e,n){return e.concat(Jt.arr(n)?jB(n):n)},[])}function Gle(t){return Jt.arr(t)?t:(Jt.str(t)&&(t=dSe(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function O7(t,e){return t.some(function(n){return n===e})}function L7(t){var e={};for(var n in t)e[n]=t[n];return e}function Kj(t,e){var n=L7(t);for(var i in t)n[i]=e.hasOwnProperty(i)?e[i]:t[i];return n}function VB(t,e){var n=L7(t);for(var i in e)n[i]=Jt.und(t[i])?e[i]:t[i];return n}function WIt(t){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t);return e?"rgba("+e[1]+",1)":t}function $It(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,n=t.replace(e,function(a,l,c,h){return l+l+c+c+h+h}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n),r=parseInt(i[1],16),s=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+r+","+s+","+o+",1)"}function qIt(t){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),n=parseInt(e[1],10)/360,i=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100,s=e[4]||1;function o(d,f,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?d+(f-d)*6*p:p<1/2?f:p<2/3?d+(f-d)*(2/3-p)*6:d}var a,l,c;if(i==0)a=l=c=r;else{var h=r<.5?r*(1+i):r+i-r*i,u=2*r-h;a=o(u,h,n+1/3),l=o(u,h,n),c=o(u,h,n-1/3)}return"rgba("+a*255+","+l*255+","+c*255+","+s+")"}function XIt(t){if(Jt.rgb(t))return WIt(t);if(Jt.hex(t))return $It(t);if(Jt.hsl(t))return qIt(t)}function Df(t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(e)return e[1]}function YIt(t){if(_M(t,"translate")||t==="perspective")return"px";if(_M(t,"rotate")||_M(t,"skew"))return"deg"}function Jj(t,e){return Jt.fnc(t)?t(e.target,e.id,e.total):t}function Hh(t,e){return t.getAttribute(e)}function R7(t,e,n){var i=Df(e);if(O7([n,"deg","rad","turn"],i))return e;var r=vR.CSS[e+n];if(!Jt.und(r))return r;var s=100,o=document.createElement(t.tagName),a=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=s+n;var l=s/o.offsetWidth;a.removeChild(o);var c=l*parseFloat(e);return vR.CSS[e+n]=c,c}function fSe(t,e,n){if(e in t.style){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=t.style[e]||getComputedStyle(t).getPropertyValue(i)||"0";return n?R7(t,r,n):r}}function I7(t,e){if(Jt.dom(t)&&!Jt.inp(t)&&(Hh(t,e)||Jt.svg(t)&&t[e]))return"attribute";if(Jt.dom(t)&&O7(HIt,e))return"transform";if(Jt.dom(t)&&e!=="transform"&&fSe(t,e))return"css";if(t[e]!=null)return"object"}function pSe(t){if(Jt.dom(t)){for(var e=t.style.transform||"",n=/(\w+)\(([^)]*)\)/g,i=new Map,r;r=n.exec(e);)i.set(r[1],r[2]);return i}}function KIt(t,e,n,i){var r=_M(e,"scale")?1:0+YIt(e),s=pSe(t).get(e)||r;return n&&(n.transforms.list.set(e,s),n.transforms.last=e),i?R7(t,s,i):s}function B7(t,e,n,i){switch(I7(t,e)){case"transform":return KIt(t,e,i,n);case"css":return fSe(t,e,n);case"attribute":return Hh(t,e);default:return t[e]||0}}function k7(t,e){var n=/^(\*=|\+=|-=)/.exec(t);if(!n)return t;var i=Df(t)||0,r=parseFloat(e),s=parseFloat(t.replace(n[0],""));switch(n[0][0]){case"+":return r+s+i;case"-":return r-s+i;case"*":return r*s+i}}function mSe(t,e){if(Jt.col(t))return XIt(t);if(/\s/g.test(t))return t;var n=Df(t),i=n?t.substr(0,t.length-n.length):t;return e?i+e:i}function F7(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function JIt(t){return Math.PI*2*Hh(t,"r")}function ZIt(t){return Hh(t,"width")*2+Hh(t,"height")*2}function QIt(t){return F7({x:Hh(t,"x1"),y:Hh(t,"y1")},{x:Hh(t,"x2"),y:Hh(t,"y2")})}function gSe(t){for(var e=t.points,n=0,i,r=0;r<e.numberOfItems;r++){var s=e.getItem(r);r>0&&(n+=F7(i,s)),i=s}return n}function eBt(t){var e=t.points;return gSe(t)+F7(e.getItem(e.numberOfItems-1),e.getItem(0))}function vSe(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return JIt(t);case"rect":return ZIt(t);case"line":return QIt(t);case"polyline":return gSe(t);case"polygon":return eBt(t)}}function tBt(t){var e=vSe(t);return t.setAttribute("stroke-dasharray",e),e}function nBt(t){for(var e=t.parentNode;Jt.svg(e)&&Jt.svg(e.parentNode);)e=e.parentNode;return e}function ySe(t,e){var n=e||{},i=n.el||nBt(t),r=i.getBoundingClientRect(),s=Hh(i,"viewBox"),o=r.width,a=r.height,l=n.viewBox||(s?s.split(" "):[0,0,o,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:a/l[3]}}function iBt(t,e){var n=Jt.str(t)?dSe(t)[0]:t,i=e||100;return function(r){return{property:r,el:n,svg:ySe(n),totalLength:vSe(n)*(i/100)}}}function rBt(t,e){function n(a){a===void 0&&(a=0);var l=e+a>=1?e+a:0;return t.el.getPointAtLength(l)}var i=ySe(t.el,t.svg),r=n(),s=n(-1),o=n(1);switch(t.property){case"x":return(r.x-i.x)*i.w;case"y":return(r.y-i.y)*i.h;case"angle":return Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI}}function Hle(t,e){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=mSe(Jt.pth(t)?t.totalLength:t,e)+"";return{original:i,numbers:i.match(n)?i.match(n).map(Number):[0],strings:Jt.str(t)||e?i.split(n):[]}}function xSe(t){var e=t?jB(Jt.arr(t)?t.map(Gle):Gle(t)):[];return HB(e,function(n,i,r){return r.indexOf(n)===i})}function bSe(t){var e=xSe(t);return e.map(function(n,i){return{target:n,id:i,total:e.length,transforms:{list:pSe(n)}}})}function sBt(t,e){var n=L7(e);if(/^spring/.test(n.easing)&&(n.duration=uSe(n.easing)),Jt.arr(t)){var i=t.length,r=i===2&&!Jt.obj(t[0]);r?t={value:t}:Jt.fnc(e.duration)||(n.duration=e.duration/i)}var s=Jt.arr(t)?t:[t];return s.map(function(o,a){var l=Jt.obj(o)&&!Jt.pth(o)?o:{value:o};return Jt.und(l.delay)&&(l.delay=a?0:e.delay),Jt.und(l.endDelay)&&(l.endDelay=a===s.length-1?e.endDelay:0),l}).map(function(o){return VB(o,n)})}function oBt(t){for(var e=HB(jB(t.map(function(s){return Object.keys(s)})),function(s){return Jt.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),n={},i=function(s){var o=e[s];n[o]=t.map(function(a){var l={};for(var c in a)Jt.key(c)?c==o&&(l.value=a[c]):l[c]=a[c];return l})},r=0;r<e.length;r++)i(r);return n}function aBt(t,e){var n=[],i=e.keyframes;i&&(e=VB(oBt(i),e));for(var r in e)Jt.key(r)&&n.push({name:r,tweens:sBt(e[r],t)});return n}function lBt(t,e){var n={};for(var i in t){var r=Jj(t[i],e);Jt.arr(r)&&(r=r.map(function(s){return Jj(s,e)}),r.length===1&&(r=r[0])),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}function cBt(t,e){var n;return t.tweens.map(function(i){var r=lBt(i,e),s=r.value,o=Jt.arr(s)?s[1]:s,a=Df(o),l=B7(e.target,t.name,a,e),c=n?n.to.original:l,h=Jt.arr(s)?s[0]:c,u=Df(h)||Df(l),d=a||u;return Jt.und(o)&&(o=c),r.from=Hle(h,d),r.to=Hle(k7(o,h),d),r.start=n?n.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=D7(r.easing,r.duration),r.isPath=Jt.pth(s),r.isColor=Jt.col(r.from.original),r.isColor&&(r.round=1),n=r,r})}var wSe={css:function(t,e,n){return t.style[e]=n},attribute:function(t,e,n){return t.setAttribute(e,n)},object:function(t,e,n){return t[e]=n},transform:function(t,e,n,i,r){if(i.list.set(e,n),e===i.last||r){var s="";i.list.forEach(function(o,a){s+=a+"("+o+") "}),t.style.transform=s}}};function _Se(t,e){var n=bSe(t);n.forEach(function(i){for(var r in e){var s=Jj(e[r],i),o=i.target,a=Df(s),l=B7(o,r,a,i),c=a||Df(l),h=k7(mSe(s,c),l),u=I7(o,r);wSe[u](o,r,h,i.transforms,!0)}})}function uBt(t,e){var n=I7(t.target,e.name);if(n){var i=cBt(e,t),r=i[i.length-1];return{type:n,property:e.name,animatable:t,tweens:i,duration:r.end,delay:i[0].delay,endDelay:r.endDelay}}}function hBt(t,e){return HB(jB(t.map(function(n){return e.map(function(i){return uBt(n,i)})})),function(n){return!Jt.und(n)})}function SSe(t,e){var n=t.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},r={};return r.duration=n?Math.max.apply(Math,t.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0;return i(s)+o+a+s.duration*(s.loop??1)})):e.duration,r.delay=n?Math.min.apply(Math,t.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0;return i(s)+o+a+s.delay})):e.delay,r.endDelay=n?r.duration-Math.max.apply(Math,t.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0;return i(s)+o+a+s.duration*(s.loop??1)-s.endDelay})):e.endDelay,r}var jle=0;function dBt(t){var e=Kj(lSe,t),n=Kj(P7,t),i=aBt(n,t),r=bSe(t.targets),s=hBt(r,i),o=SSe(s,n),a=jle;return jle++,VB(e,{id:a,children:[],animatables:r,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay,startOnceDelay:n.startOnceDelay,pingPongDelayCorrection:n.pingPongDelayCorrection})}var Bc=[],Vle=[],eO,fBt=function(){function t(){eO=requestAnimationFrame(e)}function e(n){var i=Bc.length;if(i){for(var r=0;r<i;){var s=Bc[r];s.paused?(Bc.splice(r,1),i-=1):(s.tick(n),r++)}t()}else eO=cancelAnimationFrame(eO)}return t}();function pBt(t){document.hidden?(Bc.forEach(function(e){return e.pause(t.timeStamp)}),Vle=Bc.slice(0),qr.running=Bc=[]):Vle.forEach(function(e){return e.play(t.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",pBt);function qr(t){t===void 0&&(t={});var e=0,n=0,i=0,r,s,o=0,a=null;function l(x){var b=window.Promise&&new Promise(function(S){return a=S});return x.finished=b,b}var c=dBt(t);l(c);function h(){var x=c.direction;x!=="alternate"&&(c.direction=x!=="normal"?"normal":"reverse"),c.reversed=!c.reversed,s.forEach(function(b){return b.reversed=c.reversed})}function u(x){return c.reversed?c.duration-x:x}function d(){e=0,n=u(c.currentTime)*(1/qr.speed)}function f(x,b){b&&(c.reversed?b.seek(b.duration*b.loop-(x-b.timelineOffset-b.pingPongDelayCorrection)):b.seek(x-b.timelineOffset-b.startOnceDelay-b.pingPongDelayCorrection))}function p(x){if(c.reversed)for(var b=o;b--;)f(x,s[b]);else for(var S=0;S<o;S++)f(x,s[S])}function m(x){var b=0,S=c.animations,A=S.length;for(c.reversePlayback===!0&&c.rewind===!1&&(x=c.duration+c.delay-c.endDelay-x);b<A;){var E=S[b],M=E.animatable,C=E.tweens,T=C.length-1,D=C[T];T&&(D=HB(C,function(te){return x<te.end})[0]||D);for(var L=Gh(x-D.start-D.delay,0,D.duration)/D.duration,I=isNaN(L)?1:D.easing(L),R=D.to.strings,H=D.round,Z=[],ee=D.to.numbers.length,F=void 0,V=0;V<ee;V++){var U=void 0;if(c.reversePlayback===!0&&c.rewind===!1)var z=D.to.numbers[V],j=D.from.numbers[V]||0;else var j=D.to.numbers[V],z=D.from.numbers[V]||0;D.isPath?U=rBt(D.value,I*j):U=z+I*(j-z),H&&(D.isColor&&V>2||(U=Math.round(U*H)/H)),Z.push(U)}var Y=R.length;if(!Y)F=Z[0];else{F=R[0];for(var J=0;J<Y;J++){R[J];var K=R[J+1],X=Z[J];isNaN(X)||(K?F+=X+K:F+=X+" ")}}wSe[E.type](M.target,E.property,F,M.transforms),E.currentValue=F,b++}}function g(x){c[x]&&!c.passThrough&&c[x](c)}function v(){c.remaining&&c.remaining!==!0&&c.remaining--}function y(x){var b=c.duration,S=c.delay,A=b-c.endDelay,E=u(x);if(c.progress=Gh(E/b*100,0,100),c.reversePlayback=E<c.currentTime,o&&p(E),!c.began&&c.currentTime>=0&&(c.began=!0,g("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,g("loopBegin")),(c.reversed||E>=0)&&E<=S&&c.currentTime!==0&&(m(0),g("change")),(E>=A&&c.currentTime!==b||!b)&&(m(b),g("change")),E>S&&E<A?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,g("changeBegin")),m(E),g("change")):c.changeBegan?(c.changeCompleted=!0,c.changeBegan=!1,g("change"),o&&g("timelineChangeComplete")):c.began&&E>A&&g("changeComplete"),c.currentTime=Gh(E,0,b),c.began&&g("update"),x>=b)if(v(),!c.remaining)c.paused=!0,c.completed||(c.completed=!0,g("loopComplete"),g("complete"),!c.passThrough&&"Promise"in window&&(a(),l(c)));else{o?e+=c.duration/qr.speed:e+=c.duration;for(let M of s)M.setStartTime(0),M.remaining=M.loop;g("loopComplete"),c.loopBegan=!1,c.direction==="alternate"&&h()}}return c.reset=function(){var x=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed=x==="reverse",c.remaining=c.loop,s=c.children,o=s.length;for(var b=o;b--;)c.children[b].reset();(c.reversed&&c.loop!==!0||x==="alternate"&&c.loop===1)&&c.remaining++,m(c.reversed?c.duration:0)},c.setStartTime=function(x){e=x},c.set=function(x,b){return _Se(x,b),c},c.tick=function(x){i=x,e||(e=i),y((i+(n-e))*qr.speed)},c.seek=function(x){y(x-e)},c.pause=function(x){c.paused=!0,o&&(r=x??performance.now())},c.play=function(x){!c.paused||(c.completed&&c.reset(),c.paused=!1,Bc.push(c),o&&r!==void 0&&(e+=(x??performance.now())-r),eO||fBt())},c.reverse=function(){h(),c.completed=!c.reversed,d()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function Wle(t,e){for(var n=e.length;n--;)O7(t,e[n].animatable.target)&&e.splice(n,1)}function mBt(t){for(var e=xSe(t),n=Bc.length;n--;){var i=Bc[n],r=i.animations,s=i.children;Wle(e,r);for(var o=s.length;o--;){var a=s[o],l=a.animations;Wle(e,l),!l.length&&!a.children.length&&s.splice(o,1)}!r.length&&!s.length&&i.pause()}}function gBt(t,e){e===void 0&&(e={});var n=e.direction||"normal",i=e.easing?D7(e.easing):null,r=e.grid,s=e.axis,o=e.from||0,a=o==="first",l=o==="center",c=o==="last",h=Jt.arr(t),u=parseFloat(h?t[0]:t),d=h?parseFloat(t[1]):0,f=Df(h?t[1]:t)||0,p=e.start||0+(h?u:0),m=[],g=0;return function(v,y,x){if(a&&(o=0),l&&(o=(x-1)/2),c&&(o=x-1),!m.length){for(var b=0;b<x;b++){if(!r)m.push(Math.abs(o-b));else{var S=l?(r[0]-1)/2:o%r[0],A=l?(r[1]-1)/2:Math.floor(o/r[0]),E=b%r[0],M=Math.floor(b/r[0]),C=S-E,T=A-M,D=Math.sqrt(C*C+T*T);s==="x"&&(D=-C),s==="y"&&(D=-T),m.push(D)}g=Math.max.apply(Math,m)}i&&(m=m.map(function(I){return i(I/g)*g})),n==="reverse"&&(m=m.map(function(I){return s?I<0?I*-1:-I:Math.abs(g-I)}))}var L=h?(d-u)/g:u;return p+L*(Math.round(m[y]*100)/100)+f}}function vBt(t){t===void 0&&(t={});var e=qr(t);return e.duration=0,e.add=function(n,i){var r=Bc.indexOf(e),s=e.children;r>-1&&Bc.splice(r,1);function o(d){d.passThrough=!0}for(var a=0;a<s.length;a++)o(s[a]);var l=VB(n,Kj(P7,t));l.targets=l.targets||t.targets;var c=e.duration;l.autoplay=!1,l.timelineOffset=Jt.und(i)?c:k7(i,c),o(e);var h=qr(l);o(h),s.push(h);var u=SSe(s,t);return e.delay=u.delay,e.endDelay=u.endDelay,e.duration=u.duration,h.loop===!0&&(e.duration=1/0),e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}qr.version="3.2.0";qr.speed=1;qr.running=Bc;qr.remove=mBt;qr.get=B7;qr.set=_Se;qr.convertPx=R7;qr.path=iBt;qr.setDashoffset=tBt;qr.stagger=gBt;qr.timeline=vBt;qr.easing=D7;qr.penner=hSe;qr.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};var yBt=qr,$le=new G,qle=new G,Xle=new Wn;function xBt(t,e,n,i){if(i===0)return n.copy(t);if(i===1)return n.copy(e);let r=t.w*e.w+t.x*e.x+t.y*e.y+t.z*e.z;if(r>=1)return n.copy(t);let s=1-r*r;if(s<=Number.EPSILON){let h=1-i;return n.w=h*t.w+i*e.w,n.x=h*t.x+i*e.x,n.y=h*t.y+i*e.y,n.z=h*t.z+i*e.z,n.normalize(),n}let o=Math.sqrt(s),a=Math.atan2(o,r),l=Math.sin((1-i)*a)/o,c=Math.sin(i*a)/o;return n.w=t.w*l+e.w*c,n.x=t.x*l+e.x*c,n.y=t.y*l+e.y*c,n.z=t.z*l+e.z*c,n}function Rv(t,e,n,i,r){let s=n[t]?n[t]:void 0,o=i[t];if(o==null)return;let a=s??e[t],l=o;if(a!==l)return{update:c=>{let h=Ln.lerp(a,l,c);r?e[t]=Math.trunc(h):e[t]=h},start:()=>{e[t]=a},end:()=>{e[t]=l}}}function ASe(t,e,n,i,r){let s=n[t]?n[t]:void 0,o=i[t];if(!o)return;let a=e[t],l=[...s??a],c=[...o];if(!(l.length!==c.length||Y$(l,c)))return{update:h=>{l.forEach((u,d)=>{let f=Ln.lerp(u,c[d],h);e[t][d]=r?Math.trunc(f):f})},start:()=>{Object.assign(e[t],l)},end:()=>{Object.assign(e[t],c)}}}function Yle(t,e,n,i){let r=n[t]?n[t]:void 0,s=i[t];if(!s)return;let o=e[t],a=r?new G().fromArray(r):o.clone(),l=new G().fromArray(s);if(!a.equals(l))return{update:c=>{o.lerpVectors(a,l,c)},start:()=>{o.copy(a)},end:()=>{o.copy(l)}}}function bBt(t,e,n,i){let r=n[t]?n[t]:void 0,s=i[t];if(!s)return;let o=e[t],a=r?new dt().fromArray(r):o.clone(),l=new G,c=new Wn,h=new G;a.decompose(l,c,h);let u=new dt().fromArray(s),d=new G,f=new Wn,p=new G;if(u.decompose(d,f,p),!a.equals(u))return{update:m=>{Xle.slerpQuaternions(c,f,m),$le.lerpVectors(l,d,m),qle.lerpVectors(h,p,m),o.compose($le,Xle,qle)},start:()=>{o.compose(l,c,h)},end:()=>{o.compose(d,f,p)}}}function wBt(t,e,n,i,r){let s=n[t]?n[t]:void 0,o=i[t];if(!o)return;let a=e[t],l=s?typeof s=="string"?r.getColor(s).clone():new Zt().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?r.getColor(o).clone():new Zt().setRGB(o.r,o.g,o.b);if(l.equals(c))return;let h=a.clone();return e[t]=h,{update:u=>{h.lerpColors(l,c,u)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function fg(t,e,n,i){if(typeof e[t]=="number")return Rv(t,e,n??{},i);if(Array.isArray(e[t]))return ASe(t,e,n??{},i)}function _Bt(t,e,n){var o,a,l,c;let i=[],r=t.cameraType==="OrthographicCamera"?(o=e.orthographic)==null?void 0:o.zoom:(a=e.perspective)==null?void 0:a.zoom,s=t.cameraType==="OrthographicCamera"?(l=n.orthographic)==null?void 0:l.zoom:(c=n.perspective)==null?void 0:c.zoom;if(s!==void 0){let h=r??t.zoom,u=s;h!==u&&i.push({update:d=>{t.zoom=Ln.lerp(h,u,d),t.updateProjectionMatrix()},start:()=>{t.zoom=h,t.updateProjectionMatrix()},end:()=>{t.zoom=u,t.updateProjectionMatrix()}})}if(n.targetOffset!==void 0){let h=Rv("targetOffset",t,e,n);h&&i.push(h)}return i}function SBt(t,e,n,i){if(n.scaleBaked===void 0)return;let r=e.scaleBaked??t.data.geometry.scaleBaked,s=n.scaleBaked;if(iv.isEqual(r,s))return;let o=[];return o.push({update:a=>{t.updateGeometryInteractions({scaleBaked:[Ln.lerp(r[0],s[0],a),Ln.lerp(r[1],s[1],a),Ln.lerp(r[2],s[2],a)]},i),t.invalidateDownstreamBooleanData()},start:()=>{t.updateGeometryInteractions({scaleBaked:r},i),t.invalidateDownstreamBooleanData()},end:()=>{t.updateGeometryInteractions({scaleBaked:s},i),t.invalidateDownstreamBooleanData()}}),o}function ABt(t,e,n){if(!n.extrusion)return;let i=t.extrusion,r=e.extrusion??{},s=n.extrusion,o=[];return Swe.forEach(a=>{let l=fg(a,i,r,s);l&&o.push(l)}),o}function MBt(t,e,n,i){let r=[];if(!("geometry"in n))return r;let s=t.geometry.userData.parameters,o="geometry"in e?e.geometry:{},a=n.geometry;if(t instanceof Y2){let l=SBt(t,o,a,i);l&&r.push(...l)}else{let l={};if(Object.assign(l,G2(s,cae)),cae.forEach(c=>{let h=fg(c,l,o,a);h&&r.push(h)}),t instanceof A7){Object.assign(l,{extrusion:{...s.extrusion}});let c=ABt(l,o,a);c&&r.push(...c)}r.length&&r.push({update:c=>{t.updateGeometryInteractions(l,i),t.updateGeometryGroupsIfNeeded()},start:c=>{t.updateGeometryInteractions(l,i),t.updateGeometryGroupsIfNeeded()},end:c=>{t.updateGeometryInteractions(l,i),t.updateGeometryGroupsIfNeeded()}})}return r}function EBt(t,e,n,i){let r=[];if(n.intensity!==void 0){let s=Rv("intensity",t,e,n);s&&r.push(s)}if(n.color!==void 0){let s=wBt("color",t,e,n,i);s&&r.push(s)}return r}function CBt(t,e,n,i){let r=[];if(Array.isArray(t.material)){if(!("materials"in n&&n.materials))return r;let s="materials"in e&&e.materials?e.materials:[],o=n.materials;t.material.forEach((a,l)=>{if(!o[l])return;let c=s[l]??{},h=o[l];typeof c=="string"||typeof h=="string"||r.push(...Kle(a,c,h,i))})}else{if(!("material"in n&&n.material))return r;let s="material"in e&&e.material?e.material:{},o=n.material;if(typeof s=="string"||typeof o=="string")return r;r.push(...Kle(t.material,s,o,i))}return r}function Kle(t,e,n,i){var o;let r=[],s=hR(n,i)||!!e.layers&&hR(e,i);r.push(kBt(t,s));for(let a of t.layers){let l=(o=e.layers)==null?void 0:o.data(a.uuid),c=n.layers.data(a.uuid);if(!c||!(a.visible??!0)||!(c.visible??!0))continue;let h=a.getNames().filter(u=>!bwe.some(d=>u.includes(d)));for(let u of h)try{let d=a.getValue(u),f;if(u==="colors")f=IBt(a,l,c,u);else if(Array.isArray(d))u==="steps"&&(f=RBt(a,l,c,u));else if(typeof d=="number")f=TBt(a,l,c,u);else{if(typeof d=="boolean")continue;d instanceof Ae?f=PBt(a,l,c,u):d instanceof G?f=DBt(a,l,c,u):d instanceof Pa?f=LBt(a,l,c,u,i):d instanceof Zt?f=OBt(a,l,c,u,i):"isTexture"in d&&(f=BBt(a,l,c,u))}f&&(Array.isArray(f)?r.push(...f):r.push(f))}catch(d){console.error(`lerpMaterial: unexpected material layer for ${u}`,d)}}return r}function TBt(t,e,n,i){if(!t.hasValue(i)||!(i in n))return;let r=e?e[i]:t.getValue(i),s=n[i];if(r!==s)return{update:o=>{t.setValue(i,Ln.lerp(r,s,o))},start:()=>{t.setValue(i,r)},end:()=>{t.setValue(i,s)}}}function PBt(t,e,n,i){if(!t.hasValue(i)||!(i in n))return;let r=t.getValue(i),s=e?new Ae().fromArray(e[i]):r.clone(),o=new Ae().fromArray(n[i]);if(!s.equals(o))return{update:a=>{r.lerpVectors(s,o,a)},start:()=>{r.copy(s)},end:()=>{r.copy(o)}}}function DBt(t,e,n,i){if(!t.hasValue(i)||!(i in n))return;let r=t.getValue(i),s=e?new G().fromArray(e[i]):r.clone(),o=new G().fromArray(n[i]);if(!s.equals(o))return{update:a=>{r.lerpVectors(s,o,a)},start:()=>{r.copy(s)},end:()=>{r.copy(o)}}}function OBt(t,e,n,i,r){if(!t.hasValue(i)||!(i in n))return;let s=e?e[i]:void 0,o=n[i],a=t.getValue(i),l=s?typeof s=="string"?r.getColor(s).clone():new Zt().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?r.getColor(o).clone():new Zt().setRGB(o.r,o.g,o.b);if(l.equals(c))return;let h=a.clone();return t.setValue(i,h),{update:u=>{h.lerpColors(l,c,u)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function LBt(t,e,n,i,r){if(!t.hasValue(i)||!(i in n))return;let s=e?e[i]:void 0,o=n[i],a=t.getValue(i),l=s?typeof s=="string"?r.getColor(s).clone():new Zt().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?r.getColor(o).clone():new Pa(o.r,o.g,o.b,o.a);if(l.equals(c))return;let h=a.clone();return t.setValue(i,h),{update:u=>{h.lerpColors(l,c,u)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function RBt(t,e,n,i="steps"){if(!t.hasValue(i)||!(i in n))return;let r=[],s=t.getValue(i),o=e?e[i]:s,a=n[i];for(let l=0;l<s.length;++l){let c=o[l],h=a[l];c!==h&&r.push({update:u=>{s[l]=Ln.lerp(c,h,u)},start:()=>{s[l]=c},end:()=>{s[l]=h}})}return r.length?r:void 0}function IBt(t,e,n,i="colors"){if(!t.hasValue(i)||!(i in n))return;let r=[],s=t.getValue(i),o=e?e[i]:s.map(l=>l.toArray()),a=n[i];for(let l=0;l<s.length;++l){let c=[...o[l]],h=[...a[l]];$L.isEqual(c,h)||r.push({update:u=>{s[l].fromArray($L.lerp(c,h,u))},start:()=>{s[l].fromArray(c)},end:()=>{s[l].fromArray(h)}})}return r.length?r:void 0}function BBt(t,e,n,i="texture"){if(!t.hasValue(i)||!(i in n))return;let r=t.getNode("mat");if(!r)return;let s=e?e[i]:r,o=n[i],a=[...s.repeat],l=[...s.offset],c=[...o.repeat],h=[...o.offset];if(!Rx.isEqual(a,c)||!Rx.isEqual(l,h))return{update:u=>{r.repeat=Rx.lerp(a,c,u),r.offset=Rx.lerp(l,h,u),r.updateMatrix()},start:()=>{r.repeat=[...a],r.offset=[...l],r.updateMatrix()},end:()=>{r.repeat=[...c],r.offset=[...h],r.updateMatrix()}}}function kBt(t,e){return{update:()=>{t.transparent=e}}}var xz=new G,Jle=new Mo;function FBt(t,e,n,i){let r=[],s,o,a,l,c,h,u={slide:(e.pathSnapping??t.dataPatched.pathSnapping).slide,offset:(e.pathSnapping??t.dataPatched.pathSnapping).offset};if(c=Rv("slide",u,e.pathSnapping??t.dataPatched.pathSnapping,n.pathSnapping??t.dataPatched.pathSnapping),c&&r.push(c),h=Rv("offset",u,e.pathSnapping??t.dataPatched.pathSnapping,n.pathSnapping??t.dataPatched.pathSnapping),h&&r.push(h),!c&&!h&&(s=Yle("position",t,e,n),s&&r.push(s),o=Yle("scale",t,e,n),o&&r.push(o),a=NBt(t,e,n,i),a&&r.push(a),l=bBt("hiddenMatrix",t,e,n),l&&r.push(l)),s||o||a||l||c||h){let d=()=>{var f;t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),(f=t.parent)!=null&&f.matrixWorldFusedFalse&&(t.matrixWorld.multiplyMatrices(t.parent.matrixWorldFusedFalse,t.matrix),t.matrixWorldNeedsUpdate=!1),xf(t)&&ym(t.parent)&&t.invalidateDownstreamBooleanData(!0),t.updatePathSnapping(Object.assign({},e.pathSnapping,u))};r.push({update:d,start:d,end:d})}return r}function NBt(t,e,n,i){let r=e!=null&&e.rotation?e.rotation:void 0,s=n.rotation;if(!s)return;let o=r?new G().fromArray(r):new G().setFromEuler(t.rotation),a=new G().fromArray(s);if(o.equals(a))return;let l=xz.subVectors(a,o);if(i&&l.toArray().every(c=>Math.abs(c)<2*Math.PI)){let c=new Wn().setFromEuler(Jle.setFromVector3(o)),h=new Wn().setFromEuler(Jle.setFromVector3(a));return{update:u=>{xBt(c,h,t.quaternion,u)},start:()=>{t.rotation.setFromVector3(o)},end:()=>{t.rotation.setFromVector3(a)}}}else return{update:c=>{xz.lerpVectors(o,a,c),t.rotation.setFromVector3(xz)},start:()=>{t.rotation.setFromVector3(o)},end:()=>{t.rotation.setFromVector3(a)}}}function zBt(t,e,n){let i=[];if(!("cloner"in n)||!t.cloner)return i;let r=t.cloner,s="cloner"in e?e.cloner:{},o=n.cloner;pwe.forEach(d=>{let f;d==="count"?f=Rv("count",r.parameters,s,o,!0):f=fg(d,r.parameters,s??{},o),f&&i.push(f)});let a=UBt(r,s,o);a!=null&&a.length&&i.push(...a);let l=GBt(r,s,o);l!=null&&l.length&&i.push(...l);let c=HBt(r,s,o);c!=null&&c.length&&i.push(...c);let h=jBt(r,s,o);h!=null&&h.length&&i.push(...h);let u=VBt(r,s,o);return u!=null&&u.length&&i.push(...u),i.length&&i.push({update:()=>{r.update()}}),i}function UBt(t,e,n){if(t.parameters.type!=="radial")return;let i=e.radial,r=n.radial;if(!r)return;let s=t.parameters.radial,o=[];return mwe.forEach(a=>{let l=fg(a,s,i??{},r);l&&o.push(l)}),o}function GBt(t,e,n){if(t.parameters.type!=="linear")return;let i=e.linear,r=n.linear;if(!r)return;let s=[],o=t.parameters.linear;return gwe.forEach(a=>{let l=fg(a,o,i??{},r);l&&s.push(l)}),s}function HBt(t,e,n){if(t.parameters.type!=="grid")return;let i=e.grid,r=n.grid;if(!r)return;let s=[],o=t.parameters.grid;return vwe.forEach(a=>{let l;a==="count"?l=ASe(a,o,i??{},r,!0):l=fg(a,o,i??{},r),l&&s.push(l)}),s}function jBt(t,e,n){if(t.parameters.type!=="toObject")return;let i=e.toObject,r=n.toObject;if(!r)return;let s=[],o=t.parameters.toObject;return ywe.forEach(a=>{let l;a==="count"?l=Rv(a,o,i??{},r,!0):l=fg(a,o,i??{},r),l&&s.push(l)}),s}function VBt(t,e,n){if(!t.parameters.randomness)return;let i=e.randomnessObject,r=n.randomnessObject;if(!r)return;let s=[],o=t.parameters.randomnessObject;return xwe.forEach(a=>{let l=fg(a,o,i??{},r);l&&s.push(l)}),s}function Zle(t,e,n,i,r){let s=[];return t.data.visible&&s.push(...FBt(t,e,n,r)),t.data.visible&&s.push(...zBt(t,e,n)),xf(t)?(t instanceof jc&&t.data.visible&&s.push(...MBt(t,e,n,i)),t.data.visible&&s.push(...CBt(t,e,n,i))):qRt(t)?t.data.visible&&s.push(...EBt(t,e,n,i)):$Rt(t)&&s.push(..._Bt(t,e,n)),s.length?{update:o=>{s.forEach(a=>a.update(o))},start:o=>{s.forEach(a=>{var l;return(l=a.start)==null?void 0:l.call(a,o)})},end:o=>{s.forEach(a=>{var l;return(l=a.end)==null?void 0:l.call(a,o)})}}:void 0}var Qle=new G;function MSe(t,e,n,i=!1){let r=[];e.traverseObject(s=>{var c,h,u,d,f;if(i&&((c=s.rigidBody)==null||c.setTranslation(s.position0,!0),(h=s.rigidBody)==null||h.setRotation(s.rotation0,!0),(u=s.rigidBody)==null||u.setLinvel(Qle,!0),(d=s.rigidBody)==null||d.setAngvel(Qle,!0)),!ki.is(s))return;let o=s.uuid,a=s.data;if(delete s.states,!a.states)return;let l=!1;r.some(p=>t.objects.isDescendantOf(o,p))?l=!0:((f=a.physics)==null?void 0:f.fusedBody)===!0&&a.physics.rigidBody==="dynamic"&&r.push(o),s.data=a,s.currentState=null,s.reversibleToState=null,s.currentTransitionEvent=null;for(let p of a.states)t.environment.usePhysics===!0&&a.physics&&(a.physics.rigidBody==="dynamic"||l)&&(p.data.position!==void 0||p.data.rotation!==void 0||p.data.hiddenMatrix!==void 0)||(s.states||(s.states={}),s.states[p.id]=B0.patch(a,p.data));WBt(e,s,null,n,a.events.find(p=>p.data.type==="Follow"||p.data.type==="LookAt")!==void 0)})}function WBt(t,e,n,i,r=!1){e instanceof jc&&e.removeInteractionGeometry(),e.changeSelectedState(n,{scene:t,shared:i},r),e instanceof jc&&e.updateGeometryGroupsIfNeeded()}function $Bt(t){let e;switch(t.easing){case 0:e="cubicBezier( 0, 0, 1, 1 )";break;case 1:e="cubicBezier( .25, .1, .25, 1 )";break;case 2:e="cubicBezier( .42, 0, 1, 1 )";break;case 3:e="cubicBezier( 0, 0, .58, 1 )";break;case 4:e="cubicBezier( .42, 0, .58, 1 )";break;case 5:let{control1:n,control2:i}=t;e=`cubicBezier(
				${n[0]}, ${n[1]}, ${i[0]}, ${i[1]}
			)`;break;case 6:let{mass:r,stiffness:s,damping:o,velocity:a}=t;e=`spring( ${r}, ${s}, ${o}, ${a} )`;break;default:e="linear"}return{duration:t.duration,easing:e}}function ESe(t){let e={delay:0,loop:t.repeat===-1?!0:t.repeat+1};if(t.repeat===0)e.direction="normal",e.rewind=t.direction==="pingpong-rewind";else switch(t.direction){case"pingpong":e.direction="alternate",e.rewind=!1;break;case"pingpong-rewind":e.direction="alternate",e.rewind=!0;break;default:e.direction="normal",e.rewind=!1;break}switch(e.delay=0,e.endDelay=0,e.startOnceDelay=0,e.pingPongDelayCorrection=0,t.delayDirection){case"start-once":e.startOnceDelay=t.delay;break;case"start":e.delay=t.delay;break;case"end":e.endDelay=t.delay;break;case"start-end":case void 0:e.delay=t.delay,e.endDelay=t.delay;break}return e.direction==="alternate"&&(e.delay/=2,e.endDelay/=2,e.delay!==0&&(e.pingPongDelayCorrection=e.delay)),e}var qBt={type:"beginState"},XBt={type:"completeState",isfromEntity:!1},ece=class{constructor(t,e,n,i,r,s){if(this.object=t,this.data=i,this.sharedAssets=r,this.allowSlerp=s,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let o=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"beginState",state:o}),this.object.traverseEntity(a=>{a!==this.object&&a instanceof Da&&a.dispatchEvent(qBt)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let o=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"completeState",state:o}),this.object.traverseEntity(a=>{a!==this.object&&a instanceof Da&&a.dispatchEvent(XBt)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=Zle(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},e===void 0){let o=tO(this.object,this.object.currentState===n?this.object.prevState:this.object.currentState);if(!o)throw new Error("Missing property");this.from=o}else{let o=tO(this.object,e);if(!o)throw new Error("Missing property");this.from=o}if(n===void 0)throw new Error("Missing property");{let o=tO(this.object,n);if(!o)throw new Error("Missing property");this.to=o}this.useCurrentState=e===void 0||n===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...ESe(i),...$Bt(i),change:this.onChange},this.callback=Zle(this.object,e===void 0?{}:this.from.data,n===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},Ux=class extends Ba{constructor(t,e,n){if(super(),this.data=t,this.scene=e,this.sharedAssets=n,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{var r;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((r=this.timeline)==null||r.pause(),this.buildTimeline({isForward:this.toggleIsForward,isRebuild:!0}),this.timeline.play())},!t.object)throw new Error("Missing property");let i=e.find(t.object);if(!i)throw new Error("Missing property");if(!i.states)throw new Error("Missing property");if(this.object=i,t.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=t.tweens[0].data.delayDirection==="start-once"?t.tweens[0].data.delay:0,this.init()}get playing(){return this.tweens.some(t=>t.changeBegan)??!1}init(){this.initialCurrentState=tO(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:t=!0,isRebuild:e=!1}={}){var n,i,r,s;try{let o=ESe(this.data.tweens[0].data),a=o.loop;e&&typeof o.loop=="number"&&o.loop--,(n=this.timeline)==null||n.pause(),this.timeline=yBt.timeline({autoplay:!1,...o,...a===!0||a>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let l=this.tweens.findIndex(c=>c==null?void 0:c.changeBegan);if(this.timelineNeedsRebuild=l!==-1&&(a===!0||a>1),o.pingPongDelayCorrection&&e===!1&&(this.timelineNeedsRebuild=!0),t){let c=l===-1?0:l;for(let h=c;h<this.data.tweens.length-1;h++){let u=this.data.tweens[h],d=this.data.tweens[h+1],f;h===c&&(this.object.wasMovedByUser===!0||((i=this.object.previousAction)==null?void 0:i.playing)===!0)?(f=void 0,this.object instanceof Da&&(this.object.wasMovedByUser=!1)):f=u.data.state===void 0?this.currentState:u.data.state;let p=new ece(this.object,f,d.data.state===void 0?this.currentState:d.data.state,d.data,this.sharedAssets,this.data.allowSlerp??!1);l!==-1&&h===c&&Object.assign(p.params,{startOnceDelay:0}),this.tweens[h]=p,this.timeline.add(p.params,this.timeline.duration+(h===c?o.delay:0)+(h===c&&!e?o.pingPongDelayCorrection:0))}this.timeline.duration+=o.endDelay}else{let c=l===-1?this.data.tweens.length-1:l+1;for(let h=c;h>0;h--){let u=this.data.tweens[h],d=this.data.tweens[h-1],f;h===c&&(this.object.wasMovedByUser===!0||((r=this.object.previousAction)==null?void 0:r.playing)===!0)?(f=void 0,this.object instanceof Da&&(this.object.wasMovedByUser=!1)):f=u.data.state===void 0?this.currentState:u.data.state;let p=new ece(this.object,f,d.data.state===void 0?this.currentState:d.data.state,u.data,this.sharedAssets,this.data.allowSlerp??!1);l!==-1&&h===c&&Object.assign(p.params,{startOnceDelay:0}),this.tweens[h-1]=p,this.timeline.add(p.params,this.timeline.duration+(h===c?o.endDelay:0))}this.timeline.duration+=o.delay+(e?0:o.pingPongDelayCorrection)}}catch(o){o instanceof Error&&console.error(o.message)}((s=this.object.previousAction)==null?void 0:s.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(this.playing)return!1;clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(t){t instanceof Error&&console.error(t.message)}},this.startOnceDelay)}pause(){var t;(t=this.timeline)==null||t.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let t=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object.changeSelectedState(t,{scene:this.scene,shared:this.sharedAssets}),this.object.currentState=t}seek(t){var e;this.timeline===void 0&&this.buildTimeline(),(e=this.timeline)==null||e.seek(t*this.timeline.duration)}toggle(t){var e;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=t??!this.toggleIsForward,this.playing?((e=this.timeline)==null||e.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var n;(n=this.timeline)==null||n.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function tO(t,e){var r;let n,i;if(typeof e=="string"?(n=e,i=(r=t.states)==null?void 0:r[n]):e===null&&(n=null,i=t.data),!(n===void 0||i===void 0))return{id:n,data:i}}function Jm(t,e,n,i,r,s){let o={Audio:[],Video:[],Link:[],Reset:[],Transition:[]};return e.forEach(({id:a,data:l})=>{try{l.type==="Audio"?US[t.type].includes("Audio")&&o.Audio.push(new zx(a,l,n,r)):l.type==="Video"?US[t.type].includes("Video")&&o.Video.push(new gR(a,l,n)):l.type==="Link"?US[t.type].includes("Link")&&o.Link.push(new UIt(l,s)):l.type==="Reset"?US[t.type].includes("Reset")&&o.Reset.push(new GIt(i.data,i,r,s)):l.type==="Transition"&&US[t.type].includes("Transition")&&o.Transition.push(new Ux(l,i,r))}catch{}}),o}function Zm(t){Object.values(t).forEach(e=>{e.forEach(n=>{(n instanceof zx||n instanceof gR||n instanceof Ux)&&n.dispose()})})}var N7=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],CSe=t=>{var e;return(e=N7.find(([n,i])=>i===t))==null?void 0:e[0]},rC=t=>{var e;return(e=N7.find(([n])=>n===t))==null?void 0:e[1]},YBt=(t,e)=>{let n=CSe(t);if(n){let i=new CustomEvent(n,{bubbles:!0});return Object.defineProperty(i,"target",{writable:!1,value:e}),i}},KBt=class extends dg{constructor(t){super(t),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=n=>{var s;if(!n.eventName||!n.target||n.eventName==="Scroll")return;let i=(s=this.splineEvents[CSe(n.eventName)])==null?void 0:s[n.target.uuid];if(!i)return;n.eventName==="Scroll"&&n.deltaY!==void 0&&Object.assign(i,{deltaY:n.deltaY});let{domElement:r}=this.eventContext;r.dispatchEvent(i)};let{scene:e}=this.eventContext;e.traverseEntity(n=>{var i,r;if((i=n.data)!=null&&i.events.length){for(let[s,o]of N7)if(n.data.events.some(a=>a.data.type===o&&!a.data.disabled)){this.objectsPerEvents.has(s)?(r=this.objectsPerEvents.get(s))==null||r.push(n):this.objectsPerEvents.set(s,[n]);let a={id:n.uuid,name:n.name},l=YBt(o,a),c=this.splineEvents[s];c?c[n.uuid]=l:this.splineEvents[s]={[n.uuid]:l}}}})}connect(){this.objectsPerEvents.forEach(t=>{t.forEach(e=>{e.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(t=>{t.forEach(e=>{e.removeEventListener("beginEvent",this.onBeginEvent)})})}},JBt=class{constructor(t,e,n,i,r,s){if(this.id=t,this.data=e,this.object=n,this.entered=!1,this.useToggle=e.toggle,(e.type==="KeyDown"||e.type==="KeyUp"||e.type==="KeyPress")&&!e.key)throw new Error("Missing property");this.actions=Jm(e,e.actions,n,i,r,s)}disconnect(){Zm(this.actions)}dispatch(){let t=new Set;this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this?(e.object.currentTransitionEvent=this,e.init()):this.useToggle===!1&&t.add(e)}),this.useToggle?this.actions.Transition.forEach(e=>{e.toggle()}):this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent())):this.actions.Transition.some(e=>e.playing)||this.actions.Transition.forEach(e=>{t.has(e)===!1&&e.play()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()})}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(t=>t.reverseFromCurrent()))}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?this.actions.Transition.forEach(e=>e.reverseFromCurrent()):this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()})}},ZBt=class extends dg{constructor(t,e,n){super(t),this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.onMouseDown=s=>{dn.length>1||(this.eventContext.updateRaycaster(s),this.handleMouseEvent("MouseDown"))},this.onMouseUp=s=>{dn.length>1||(this.eventContext.updateRaycaster(s),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=s=>{dn.length>1||(this.eventContext.updateRaycaster(s),this.handleMousePressEvent())},this.onMousePressRelease=s=>{dn.length>1||(this.eventContext.updateRaycaster(s),this.handleMousePressEvent(!0))},this.onKeyDown=s=>{this.heldKeys[s.key]||this.handleKeyEvent(s,"KeyDown"),this.heldKeys[s.key]=!0},this.onKeyUp=s=>{this.handleKeyEvent(s,"KeyUp")},this.onKeyPressDown=s=>{this.heldKeysPress[s.key]||this.handleKeyEvent(s,"KeyPress"),this.heldKeysPress[s.key]=!0},this.onKeyPressUp=s=>{this.handleKeyEvent(s,"KeyPress",!0)},this.releaseHeldKey=s=>{delete this.heldKeys[s.key]},this.releaseHeldKeyPress=s=>{delete this.heldKeysPress[s.key]},this._onUserEvent=({eventName:s,target:o,reverse:a})=>{var c,h,u,d;if(!s||!o)return;let l=rC(s);l&&(l==="MouseDown"||l==="MouseUp"||l==="MousePress"?(o.dispatchEvent({type:"beginEvent",eventName:l}),(h=(c=this.eventsPerObjects[l])==null?void 0:c[o.uuid])==null||h.forEach(f=>{f.dispatchUserEvent(a)})):(l==="KeyDown"||l==="KeyUp"||l==="KeyPress")&&(o.dispatchEvent({type:"beginEvent",eventName:l}),(d=(u=this.eventsPerObjects[l])==null?void 0:u[o.uuid])==null||d.forEach(f=>{f.dispatchUserEvent()})))};let{scene:i,sharedAssets:r}=this.eventContext;i.traverseEntity(s=>{var a,l;if(!((a=s.data)!=null&&a.events.length))return;let o=s.visible?["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"]:["KeyDown","KeyUp","KeyPress"];for(let c of o){let h=this.eventsPerObjects[c];s.data.events.filter(({data:u})=>u.type===c&&u.disabled!==!0).forEach(({id:u,data:d})=>{try{let f=new JBt(u,d,s,i,r,{controlsManager:e,eventManager:n});f.actions.Video.length&&(this.hasVideoAction=!0),h[s.uuid]?h[s.uuid].push(f):h[s.uuid]=[f]}catch{}}),(l=h[s.uuid])!=null&&l.length&&this.objectsPerTypes[c].push(s)}})}connect(){var e,n,i,r,s,o;let{domElement:t}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),(e=this.objectsPerTypes.MouseDown)!=null&&e.length&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseDown)),(n=this.objectsPerTypes.MouseUp)!=null&&n.length&&(this.domEventsNeeded.add("pointerup"),t.addEventListener("pointerup",this.onMouseUp)),(i=this.objectsPerTypes.MousePress)!=null&&i.length&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),t.addEventListener("pointerup",this.onMousePressRelease)),(r=this.objectsPerTypes.KeyDown)!=null&&r.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(s=this.objectsPerTypes.KeyUp)!=null&&s.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(o=this.objectsPerTypes.KeyPress)!=null&&o.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([a,l])=>{l.forEach(c=>{c.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:t}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},t.removeEventListener("pointerdown",this.onMouseDown),t.removeEventListener("pointerdown",this.onMousePressDown),t.removeEventListener("pointerup",this.onMouseUp),t.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(e=>{Object.values(e).forEach(n=>{n.forEach(i=>{i.disconnect()})})}),Object.entries(this.objectsPerTypes).forEach(([e,n])=>{n.forEach(i=>{i.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(t){let{stopRaycast:e,raycaster:n,scene:i}=this.eventContext,r=this.objectsPerTypes[t];if(r.length)if(e){let s=$j(n,i,r);qj(s).forEach(o=>{this.eventsPerObjects[t][o.uuid]&&this.handleObjectMouseEventDispatch(o,t)})}else r.forEach(s=>{mR(n,s)&&this.handleObjectMouseEventDispatch(s,t)})}handleMousePressEvent(t=!1){let e="MousePress",n=this.objectsPerTypes[e],i=[];if(n.length){if(!t){let{stopRaycast:r,raycaster:s,scene:o}=this.eventContext;if(r){let a=$j(s,o,n);i=qj(a)}else n.forEach(a=>{mR(s,a)&&i.push(a)})}this._prevObjects.length&&this._prevObjects.forEach(r=>{i.includes(r)||this.handleObjectMouseEventDispatchRelease(r,e)}),i.length&&i.forEach(r=>{this.handleObjectMouseEventDispatch(r,e)}),this._prevObjects=i}}handleObjectMouseEventDispatch(t,e){var n,i;t.dispatchEvent({type:"beginEvent",eventName:e}),(i=(n=this.eventsPerObjects[e])==null?void 0:n[t.uuid])==null||i.forEach(r=>{r.dispatch()})}handleObjectMouseEventDispatchRelease(t,e){var n,i;t.dispatchEvent({type:"beginEvent",eventName:e}),(i=(n=this.eventsPerObjects[e])==null?void 0:n[t.uuid])==null||i.forEach(r=>{r.dispatchRelease()})}handleKeyEvent(t,e,n=!1){this.objectsPerTypes[e].forEach(i=>{let r=this.eventsPerObjects[e][i.uuid];r.some(({data:s})=>"key"in s&&s.key===t.key)&&i.dispatchEvent({type:"beginEvent",eventName:e}),r.forEach(s=>{"key"in s.data&&s.data.key===t.key&&(n?s.dispatchRelease():s.dispatch())})})}},QBt=new G,ekt=new G,TSe=class{constructor(t,e,n,i){this.actionsIn=Jm(t,t.inActions,e,n,i),this.actionsOut=Jm(t,t.outActions,e,n,i)}disconnect(){Zm(this.actionsIn),Zm(this.actionsOut)}},tkt=class extends TSe{constructor(t,e,n,i,r){super(e,n,i,r),this.id=t,this.data=e,this.object=n,this.stage="out",this.objects=[],this.onUpdateMatrix=()=>{let l=QBt.setFromMatrixPosition(this.objects[0].matrixWorld),c=ekt.setFromMatrixPosition(this.objects[1].matrixWorld),h=l.distanceTo(c)<=this.distance?"in":"out";if(this.stage!==h){let u=h==="in"?this.actionsIn:this.actionsOut;u.Audio.forEach(d=>d.dispatchConditional()),u.Video.forEach(d=>d.dispatchConditional()),u.Transition.forEach(d=>{d.object.currentTransitionEvent!==this&&(d.object.currentTransitionEvent=this),d.init()}),u.Transition.forEach(d=>d.play()),this.stage=h}};let{distance:s,fromObject:o,toObject:a}=e.condition;this.distance=s;for(let l of[o,a]){if(!l)throw new Error("Missing property");let c=i.find(l);if(!c)throw new Error("Missing property");this.objects.push(c)}}connect(){this.objects.forEach(t=>{t.addEventListener("updateMatrix",this.onUpdateMatrix)}),this.onUpdateMatrix()}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(t=>{t.removeEventListener("updateMatrix",this.onUpdateMatrix)})}},nkt=class extends TSe{constructor(t,e,n,i,r){var a;super(e,n,i,r),this.id=t,this.data=e,this.object=n,this.onBegin=({target:l,state:c})=>{this.toState!==c&&(this.actionsOut.Audio.forEach(h=>h.dispatchConditional()),this.actionsOut.Video.forEach(h=>h.dispatchConditional()),this.actionsIn.Transition.forEach(h=>h.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(h=>h.play()))},this.onComplete=({target:l,state:c})=>{this.toState===c&&(this.actionsIn.Audio.forEach(h=>h.dispatchConditional()),this.actionsIn.Video.forEach(h=>h.dispatchConditional()),this.actionsOut.Transition.forEach(h=>h.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(h=>h.play()))};let{condition:s}=e;if(!s.object)throw new Error("Missing property");let o=i.find(s.object);if(!o)throw new Error("Missing property");if(this.toObject=o,s.state&&!((a=this.toObject.states)!=null&&a[s.state]))throw new Error("Missing property");this.toState=s.state}connect(){(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Transition.length)&&this.toObject.addEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsIn.Transition.length)&&this.toObject.addEventListener("completeState",this.onComplete)}disconnect(){super.disconnect(),(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Transition.length)&&this.toObject.removeEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsIn.Transition.length)&&this.toObject.removeEventListener("completeState",this.onComplete)}},ikt=class extends dg{constructor(t){super(t),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{scene:e,sharedAssets:n}=this.eventContext;e.traverseEntity(i=>{var r;if((r=i.data)!=null&&r.events.length){for(let{id:s,data:o}of i.data.events)if(!o.disabled&&o.type==="Conditional")try{let a;o.condition.type==="Comparison"||(o.condition.type==="Distance"?a=new tkt(s,o,i,e,n):o.condition.type==="State"&&(a=new nkt(s,o,i,e,n))),a&&(this.eventsPerConditions[o.condition.type].push(a),(a.actionsIn.Video.length||a.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(t=>t.forEach(e=>e.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(t=>t.forEach(e=>e.disconnect()))}},M1=new G,bz=new G,qd=new G,Xd=new G,tce=new gc,rkt=.01,skt={type:"requestRender"},okt=function(){let t=new G,e=new G;return(n,i,r)=>r>0?(t.subVectors(n,i),t.length()<=r?n:e.copy(i).add(t.normalize().multiplyScalar(r))):i}(),nce=function(){let t=new dt;return(e,n)=>{e.position.copy(n),e.parent!==null&&(t.copy(e.parent.matrixWorld).invert(),e.position.applyMatrix4(t)),t.copy(e.hiddenMatrix).invert(),e.position.applyMatrix4(t),e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),e instanceof _l&&ym(e.parent)&&e.invalidateDownstreamBooleanData(!0)}}(),akt=class{constructor(t,e,n){this.data=t,this.object=e,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new G,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...oj.defaultData,...t,...t.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},t.target===void 0||t.target==="cursor"||(t.target==="personal camera"?this.target=n.find(s_.PERSONAL_CAMERA_ID):this.target=n.find(t.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0)}},lkt=class extends dg{constructor(t){super(t),this.events=[],this.pairOfEventListeners=[],this.onMouseMove=n=>{if(!(dn.length>1)){this.eventContext.updateRaycaster(n);for(let i of this.events)i.target===void 0&&this.updateSingleEvent(i)}},this.onMouseEnter=n=>{for(let i of this.events)i.target===void 0&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)},this.onMouseLeave=n=>{for(let i of this.events)i.target===void 0&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),this.updateSingleEvent(i))},this.onTargetChange=n=>()=>{this.updateSingleEvent(n)};let{scene:e}=this.eventContext;e.traverseEntity(n=>{var r,s;let i=(r=n.data)==null?void 0:r.events.find(o=>o.data.type==="Follow"&&!o.data.disabled);i&&(!e.data.environment.usePhysics||((s=n.dataPatched.physics)==null?void 0:s.rigidBody)!=="dynamic")&&this.events.push(new akt(i.data,n,e))})}connect(){if(!this.events.length)return;let{domElement:t,eventElement:e}=this.eventContext;this.domEventsNeeded.clear(),hl&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let n of this.events)if(n.target!==void 0){let i=n.target,r=this.onTargetChange(n);this.pairOfEventListeners.push([i,r]),i.addEventListener("requestRender",r)}}disconnect(){if(!this.events.length)return;let{domElement:t,eventElement:e}=this.eventContext;this.domEventsNeeded.clear(),hl&&t.removeEventListener("pointerdown",this.onMouseMove),e.removeEventListener("pointermove",this.onMouseMove),t.removeEventListener("pointerenter",this.onMouseEnter),t.removeEventListener("pointerleave",this.onMouseLeave);for(let[n,i]of this.pairOfEventListeners)n.removeEventListener("requestRender",i);for(let n of this.events)n.paused=!0,n.isReset=!1}onAnimationFrameDamping(){for(let t of this.events)t.paused||this.updateSingleEvent(t)}updateSingleEvent(t){var s;let{plane:e,limitDistance:n,limitDistanceEnabled:i}=t.data;if(t.object.getWorldPosition(qd),t.isReset)Xd.copy(t.worldPosition0);else if(t.target)t.target.getWorldPosition(Xd);else{let{camera:o,raycaster:a}=this.eventContext;if(e==="custom"?(o.getWorldDirection(bz),bz.negate(),M1.copy(bz)):e==="xy"?M1.set(0,0,1):e==="xz"?M1.set(0,1,0):e==="yz"&&M1.set(1,0,0),tce.setFromNormalAndCoplanarPoint(M1,qd),!a.ray.intersectPlane(tce,Xd))return}if(!t.isReset){if(Xd.distanceTo(t.worldPosition0)>n&&i&&t.target)if(t.snapComplete=!1,t.data.snapDelay&&(t.delayFinished=!1,typeof window<"u"&&t.timeoutId!==null&&(window.clearTimeout(t.timeoutId),t.timeoutId=null)),t.wasOutside=!0,t.data.resetAfterDistanceLimit)Xd.copy(t.worldPosition0),t.currentDampingFactor=t.resetDampingFactor;else return;else if(t.wasOutside&&(t.data.snapDelay&&typeof window<"u"&&(t.timeoutId=window.setTimeout(()=>{t.delayFinished=!0,t.paused=!1,this.updateSingleEvent(t)},t.data.snapDelay*1e3)),t.currentDampingFactor=t.data.dampingFactor,t.wasOutside=!1),t.delayFinished===!1)return}t.data.enabledTranslation[0]===!1&&(Xd.x=qd.x),t.data.enabledTranslation[1]===!1&&(Xd.y=qd.y),t.data.enabledTranslation[2]===!1&&(Xd.z=qd.z);let r=okt(qd,Xd,t.wasOutside?0:t.data.maxDelta);if(t.currentDampingFactor>1){let o=M1.subVectors(r,qd).divideScalar(t.currentDampingFactor);qd.add(o),nce(t.object,qd),t.paused=o.length()<rkt}else nce(t.object,r),t.paused=!0;(s=t.object)==null||s.dispatchEvent({type:"beginEvent",eventName:"Follow"}),t.object.dispatchEvent(skt)}},tA=new G,Z3=new G,nA=new dt,E1=new Wn,Dp=new Wn,iA=new G,rA=new G,Vg=new G,Yd=new G,wz=new gc,ckt=1e-6,ukt={type:"requestRender"},hkt={type:"changeRotation"},ice=function(){let t=new dt;return function(e,n){e.parent!==null?t.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix):t.copy(e.hiddenMatrix),n.premultiply(tSe(t).invert()),e.rotation.setFromRotationMatrix(n),e.updateMatrix(),e instanceof _l&&ym(e.parent)&&e.invalidateDownstreamBooleanData(!0)}}(),dkt=class{constructor(t,e,n){this.object=e,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new Wn,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...aj.defaultData,...t,...t.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},t.target===void 0||t.target==="cursor"||(t.target==="personal camera"?this.target=n.find(s_.PERSONAL_CAMERA_ID):this.target=n.find(t.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},fkt=class extends dg{constructor(t){super(t),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=n=>{if(!(dn.length>1)){this._lastMouseEvent=n,this.eventContext.updateRaycaster(n);for(let i of this.events)i.target===void 0&&this.updateSingleEvent(i)}},this.onMouseEnter=n=>{for(let i of this.events)i.target===void 0&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)},this.onMouseLeave=n=>{for(let i of this.events)i.target===void 0&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),this.updateSingleEvent(i))},this.onScroll=n=>{if(this._lastMouseEvent){let i=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(i)}},this.onTargetChange=n=>()=>{this.updateSingleEvent(n)},this.createUserEventListener=n=>({eventName:i,target:r})=>{if(!i||!r)return;let s=rC(i);s&&s==="LookAt"&&this.updateSingleEvent(n)};let{scene:e}=this.eventContext;e.traverseEntity(n=>{var r,s;let i=(r=n.data)==null?void 0:r.events.find(o=>o.data.type==="LookAt"&&!o.data.disabled);i&&(!e.data.environment.usePhysics||((s=n.dataPatched.physics)==null?void 0:s.rigidBody)!=="dynamic")&&this.events.push(new dkt(i.data,n,e))})}connect(){if(!this.events.length)return;let{domElement:t,eventElement:e}=this.eventContext;this.domEventsNeeded.clear(),hl&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?e.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let n of this.events){if(n.target!==void 0){let s=this.onTargetChange(n),o=n.target;this.pairOfEventListeners.push([o,s]),o.addEventListener("requestRender",s)}let i=this.createUserEventListener(n),r=n.object;this.pairOfUserEventListeners.push([r,i]),r.addEventListener("userEvent",i)}}disconnect(){if(!this.events.length)return;let{domElement:t,eventElement:e}=this.eventContext;this.domEventsNeeded.clear(),hl&&t.removeEventListener("pointerdown",this.onMouseMove),e.removeEventListener("pointermove",this.onMouseMove),t.removeEventListener("pointerenter",this.onMouseEnter),t.removeEventListener("pointerleave",this.onMouseLeave),e.removeEventListener("scroll",this.onScroll);for(let[n,i]of this.pairOfEventListeners)n.removeEventListener("requestRender",i);for(let[n,i]of this.pairOfUserEventListeners)n.removeEventListener("userEvent",i);for(let n of this.events)n.paused=!0,n.isReset=!1}onAnimationFrameDamping(){for(let t of this.events)t.paused||this.updateSingleEvent(t)}updateSingleEvent(t){var d;let{tilt:e,axis:n,distance:i,plane:r,limitDistance:s,enabledRotation:o,limitDistanceEnabled:a}=t.data,{camera:l,raycaster:c}=this.eventContext,{object:h,target:u}=t;if(h.getWorldPosition(iA),!t.isReset)if(t.target)t.target.getWorldPosition(rA);else{if(r==="custom"?(l.getWorldDirection(Z3),Z3.negate(),wz.setFromNormalAndCoplanarPoint(Z3,iA)):(r==="xy"?tA.set(0,0,1):r==="xz"?tA.set(0,1,0):r==="yz"&&tA.set(1,0,0),wz.setFromNormalAndCoplanarPoint(tA,iA)),!c.ray.intersectPlane(wz,rA))return;i>0&&(r==="custom"||r===void 0)&&rA.addScaledVector(Z3,i)}if(t.isReset||(u?e==="target"?Vg.copy(u.up).applyMatrix4(nA.extractRotation(u.matrixWorld)).normalize():o.some(f=>f===!1)?(n==="x"?(Yd.set(0,0,1),o[2]===!1&&Yd.set(0,1,0)):n==="y"?(Yd.set(1,0,0),o[0]===!1&&Yd.set(0,0,1)):(Yd.set(0,1,0),o[1]===!1&&Yd.set(1,0,0)),Vg.copy(Yd).applyQuaternion(t.worldQuaternion0).normalize()):Vg.set(0,1,0):r==="custom"?Vg.set(0,1,0):Vg.copy(tA)),t.isReset)Dp.copy(t.worldQuaternion0);else if(iA.distanceTo(rA)>s&&a&&u)if(t.data.snapDelay&&(t.delayFinished=!1,typeof window<"u"&&t.timeoutId!==null&&(window.clearTimeout(t.timeoutId),t.timeoutId=null)),t.wasOutside=!0,t.data.resetAfterDistanceLimit)Dp.copy(t.worldQuaternion0),t.currentDampingFactor=t.resetDampingFactor;else return;else{if(t.wasOutside&&(t.data.snapDelay&&typeof window<"u"&&(t.timeoutId=window.setTimeout(()=>{t.delayFinished=!0,t.paused=!1,this.updateSingleEvent(t)},t.data.snapDelay*1e3)),t.currentDampingFactor=t.data.dampingFactor,t.wasOutside=!1),t.delayFinished===!1)return;pkt(nA,rA,iA,Vg,n,Yd),Dp.setFromRotationMatrix(nA),E1.setFromUnitVectors(Yd.applyQuaternion(Dp),Vg),o.some(f=>f===!1)&&e!=="target"&&Dp.premultiply(E1).normalize()}t.currentDampingFactor>1?(h.updateWorldMatrix(!0,!1),E1.setFromRotationMatrix(tSe(h.matrixWorld)),E1.slerp(Dp,1/t.currentDampingFactor),ice(h,nA.makeRotationFromQuaternion(E1)),t.paused=8*(1-E1.dot(Dp))<ckt):(ice(h,nA.makeRotationFromQuaternion(Dp)),t.paused=!0),(d=t.object)==null||d.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),h.dispatchEvent(ukt),h.dispatchEvent(hkt)}},Jl=new G,ms=new G,Ur=new G;function pkt(t,e,n,i,r,s){let o=t.elements;Ur.subVectors(e,n),Ur.lengthSq()===0&&(Ur.z=1),Ur.normalize(),ms.crossVectors(i,Ur),ms.lengthSq()===0&&(Math.abs(i.z)===1?Ur.x+=1e-4:Ur.z+=1e-4,Ur.normalize(),ms.crossVectors(i,Ur)),ms.normalize(),Jl.crossVectors(Ur,ms),r==="x"?s.z===1?[ms,Jl,Ur]=[Ur,ms,Jl]:(ms.negate(),[ms,Ur]=[Ur,ms]):r==="y"?s.x===1?[ms,Jl,Ur]=[Jl,Ur,ms]:(ms.negate(),[Jl,Ur]=[Ur,Jl]):s.x===1&&(ms.negate(),[ms,Jl]=[Jl,ms]),o[0]=ms.x,o[4]=Jl.x,o[8]=Ur.x,o[1]=ms.y,o[5]=Jl.y,o[9]=Ur.y,o[2]=ms.z,o[6]=Jl.z,o[10]=Ur.z}var mkt=class{constructor(t,e,n,i,r){this.id=t,this.data=e,this.object=n,this.entered=!1,this.actions=Jm(e,e.actions,n,i,r)}disconnect(){Zm(this.actions)}dispatchEnter(){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()))}dispatchLeave(){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(t=>t.reverseFromCurrent()))}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?this.actions.Transition.forEach(e=>e.reverseFromCurrent()):this.actions.Transition.forEach(e=>e.playFromCurrent())}},gkt=class extends dg{constructor(t){super(t),this.eventsPerObjects={},this.objects=[],this._prevObjects=[],this.onMouseDown=i=>{dn.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onMouseUp=i=>{dn.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=i=>{dn.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:i,target:r,reverse:s})=>{var a;if(!i||!r)return;let o=rC(i);o&&o==="MouseHover"&&(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(a=this.eventsPerObjects[r.uuid])==null||a.forEach(l=>l.dispatchUserEvent(s)))};let{scene:e,sharedAssets:n}=this.eventContext;e.traverseEntity(i=>{var r,s;if(!(!i.visible||!((r=i.data)!=null&&r.events.length))){for(let{id:o,data:a}of i.data.events)if(!a.disabled&&a.type==="MouseHover")try{let l=new mkt(o,a,i,e,n);this.eventsPerObjects[i.uuid]?this.eventsPerObjects[i.uuid].push(l):this.eventsPerObjects[i.uuid]=[l]}catch{}(s=this.eventsPerObjects[i.uuid])!=null&&s.length&&this.objects.push(i)}})}connect(){if(!this.objects.length)return;let{domElement:t}=this.eventContext;this.domEventsNeeded.clear(),hl&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),t.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(e=>{e.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:t}=this.eventContext;this.domEventsNeeded.clear(),hl&&(t.removeEventListener("pointerdown",this.onMouseDown),t.removeEventListener("pointerup",this.onMouseUp)),t.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(e=>{e.forEach(n=>{n.disconnect()})}),this.objects.forEach(e=>{e.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(t=!1){let e=[];if(!t){let{stopRaycast:n,raycaster:i,scene:r}=this.eventContext;if(n){let s=$j(i,r,this.objects);e=qj(s)}else this.objects.forEach(s=>{mR(i,s)&&e.push(s)})}this._prevObjects.length&&this._prevObjects.forEach(n=>{var i;e.includes(n)||(n.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[n.uuid])==null||i.forEach(r=>r.dispatchLeave()))}),e.length&&e.forEach(n=>{var i;n.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[n.uuid])==null||i.forEach(r=>r.dispatchEnter())}),this._prevObjects=e}},vkt=class{constructor(t,e,n,i,r){this.id=t,this.data=e,this.object=n,this.scrollCounter=0,this.actions=Jm(e,e.actions,n,i,r)}connect(){this.scrollCounter=0}disconnect(){Zm(this.actions)}dispatch(t){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())});let e=t>0?1:-1;this.scrollCounter+=e,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let n=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(i=>i.seek(n))}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?this.actions.Transition.forEach(e=>e.reverseFromCurrent()):this.actions.Transition.forEach(e=>{e.playFromCurrent()})}},ykt=class{constructor(t,e,n,i,r,s){this.id=t,this.data=e,this.object=n,this.domElement=s,this.scrollStart=0,this.scrollEnd=0,this.actions=Jm(e,e.actions,n,i,r)}computeScrollBounds(){let t=this.domElement.getBoundingClientRect(),e=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||e.scrollTop,r=n.clientTop||e.clientTop||0,s=Math.round(t.top+i-r);if(this.data.startFrom==="enter"){let o=window.innerHeight,a=t.height,l=this.data.enterAnchor,c=l==="top"?o:l==="bottom"?o-a:o-a*.5;this.scrollStart=s-c}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.dispatch({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){Zm(this.actions)}handleResize(){this.computeScrollBounds()}dispatch({x:t,y:e}){this.actions.Transition.forEach(r=>{r.object.currentTransitionEvent!==this&&(r.object.currentTransitionEvent=this,r.init())});let n=this.scrollEnd-this.scrollStart,i=Math.min(1,Math.max(0,(e-this.scrollStart)/n));this.actions.Transition.forEach(r=>r.seek(i))}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?this.actions.Transition.forEach(e=>e.reverseFromCurrent()):this.actions.Transition.forEach(e=>{e.playFromCurrent()})}},xkt=class extends dg{constructor(t){super(t),this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([s,o])=>{o.forEach(a=>a.handleResize())})},this.onScroll=s=>{if(!this.isInview)return;let o={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([a,l])=>{a.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:o}),l.forEach(c=>c.dispatch(o))})},this.onWheel=s=>{!this.isInview||s.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([o,a])=>{o.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:s.deltaY}),a.forEach(l=>l.dispatch(s.deltaY))})},this.onUserEvent=({eventName:s,target:o,reverse:a})=>{var c;if(!s||!o)return;let l=rC(s);l&&l==="Scroll"&&(o.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(c=this.wheelEventsPerObject.get(o))==null||c.forEach(h=>{h.dispatchUserEvent(a)}))};let{scene:e,sharedAssets:n,domElement:i,isExport:r}=this.eventContext;e.traverseEntity(s=>{var o,a,l;if((o=s.data)!=null&&o.events.length){for(let{id:c,data:h}of s.data.events)if(!h.disabled&&h.type==="Scroll")if(h.trigger==="load"||!r){let u=new vkt(c,h,s,e,n);this.wheelEventsPerObject.has(s)?(a=this.wheelEventsPerObject.get(s))==null||a.push(u):this.wheelEventsPerObject.set(s,[u])}else{let u=new ykt(c,h,s,e,n,i);this.scrollEventsPerObject.has(s)?(l=this.scrollEventsPerObject.get(s))==null||l.push(u):this.scrollEventsPerObject.set(s,[u])}}}),this.intersectionObserver=new IntersectionObserver(s=>{let o=s[0];o&&(this.isInview=o.isIntersecting)},{root:null})}connect(){this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([t,e])=>{e.forEach(n=>n.connect()),t.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([t,e])=>{e.forEach(n=>n.connect()),t.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(t=>t.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(t=>t.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([t,e])=>{e.forEach(n=>n.disconnect()),t.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([t,e])=>{e.forEach(n=>n.disconnect()),t.removeEventListener("userEvent",this.onUserEvent)})}},bkt=class{constructor(t,e,n,i,r){this.id=t,this.data=e,this.object=n,this.actions=Jm(e,e.actions,n,i,r)}disconnect(){Zm(this.actions)}dispatch(){this.actions.Transition.forEach(t=>{t.play()})}dispatchAfter(t){this.actions.Audio.forEach(e=>{(e.interaction.data.triggerAfter??"any")===t&&(e.interaction instanceof Nx?e.interaction.audioPlayer.play():e.interaction instanceof Xj&&e.interaction.dispatch())}),this.actions.Video.forEach(e=>{let n=e.interaction.data.triggerAfter??"autoplay";n===t&&(e.interaction instanceof wM?e.interaction.play(n==="autoplay"):e.interaction instanceof Yj&&e.interaction.dispatch())})}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?this.actions.Transition.forEach(e=>e.reverseFromCurrent()):this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Audio.forEach(e=>{e.interaction instanceof Nx?e.interaction.audioPlayer.play():e.interaction instanceof Xj&&e.interaction.dispatch()}),this.actions.Video.forEach(e=>{e.interaction instanceof wM?e.interaction.play():e.interaction instanceof Yj&&e.interaction.dispatch()})}},wkt=class extends dg{constructor(t){super(t),this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(s=>{s.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(s=>{s.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:i,isExport:r}=this.eventContext;(r?document:i).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([s,o])=>{s.dispatchEvent({type:"beginEvent",eventName:"Start"}),o.forEach(a=>{a.dispatchAfter("any")})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(s=>{s.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:i,target:r,reverse:s})=>{var a,l;if(!i||!r)return;let o=rC(i);o&&o==="Start"&&(r.dispatchEvent({type:"beginEvent",eventName:"Start"}),(a=this.eventsPerObject.get(r))==null||a.forEach(c=>{c.dispatchUserEvent(s)}),(l=this.eventsAfterPerObject.get(r))==null||l.forEach(c=>{c.dispatchUserEvent(s)}))};let{scene:e,sharedAssets:n}=this.eventContext;e.traverseEntity(i=>{var r,s,o,a;if((r=i.data)!=null&&r.events.length)for(let{id:l,data:c}of i.data.events){if(c.disabled||c.type!=="Start")continue;let h=new bkt(l,c,i,e,n);h.actions.Transition.length&&(this.eventsPerObject.has(i)?(s=this.eventsPerObject.get(i))==null||s.push(h):this.eventsPerObject.set(i,[h])),h.actions.Audio.length&&(this.eventsAfterPerObject.has(i)?(o=this.eventsAfterPerObject.get(i))==null||o.push(h):this.eventsAfterPerObject.set(i,[h])),h.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(i)?(a=this.eventsAfterPerObject.get(i))==null||a.push(h):this.eventsAfterPerObject.set(i,[h]))}})}connect(){if([...this.eventsAfterPerObject.values()].some(t=>t.length)){let{domElement:t,isExport:e}=this.eventContext,n=e?document:t;n.addEventListener("pointerdown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),n.addEventListener("pointerdown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.addEventListener("userEvent",this.onUserEvent)}),this.onPlay()}[...this.eventsPerObject.entries()].forEach(([t,e])=>{t.dispatchEvent({type:"beginEvent",eventName:"Start"}),e.forEach(n=>n.dispatch()),t.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(t=>t.length)){let{domElement:t,isExport:e}=this.eventContext,n=e?document:t;n.removeEventListener("pointerdown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),n.removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.removeEventListener("userEvent",this.onUserEvent),r.forEach(s=>s.disconnect())})}[...this.eventsPerObject.entries()].forEach(([t,e])=>{t.removeEventListener("userEvent",this.onUserEvent),e.forEach(n=>n.disconnect())})}},_kt=class{constructor(t,e,n,i,r){this.id=t,this.data=e,this.object=n,this.disabled=!0,this.actions=Jm(e,e.actions,n,i,r),this.target=e.target,this.useToggle=e.toggle}disconnect(){Zm(this.actions)}dispatch(){this.disabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?this.actions.Transition.forEach(t=>{t.toggle()}):this.actions.Transition.forEach(t=>{t.play()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}))}},wr;e3t.then(t=>wr=t);var ua=new G,Op=new Wn,Wg=new G,_z=new Mo(0,0,0,"YXZ"),Skt={type:"updateMatrix"},PSe={type:"beginEvent",eventName:"Collision"};function Akt(t){if(t.scene.environment.usePhysics)return!0;let e=!1;return t.scene.objects.traverse((n,i)=>{for(let r of i.events)if(r.data.disabled!==!0&&r.data.type==="GameControl"&&r.data.collisionEnabled){e=!0;break}}),e}var rce=t=>t.states.some(e=>e.data.position!==void 0||e.data.rotation!==void 0||e.data.hiddenMatrix!==void 0||e.data.cloner!==void 0||e.data.pathSnapping!==void 0),sce=t=>t.events.find(e=>e.data.disabled!==!0&&e.data.type==="Follow"),Mkt=class{constructor(t,e,n,i,r,s=!1){var g;this.scene=e,this.sharedAssets=r,this.isExport=s,this.orbitControlsNeedsUpdate=!0,this.gameControls=[],this.gameControlStates=[],this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],eventsPerObjects:{},colliderToEntity:{},gamePads:[]},this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.processRigidBody=v=>{if(v.bodyType()!==wr.RigidBodyType.Dynamic)return;v.isSleeping()||this.nActiveRigidBodies++;let[y,x,b]=this.rigidBodyToMesh.get(v.handle);if(ua.copy(v.translation()).multiplyScalar(this.pixelsPerMeter),Op.copy(v.rotation()),y.matrixWorld.compose(ua,Op,x),y.hasNonUniformScale&&y.matrixWorld.multiply(y.shearScale),y.dispatchEvent(Skt),b){let S=y.cloner;if(S&&S.objectForSample===void 0){S.matrixWorld.copy(y.matrixWorld);for(let A of S.children)A.updateMatrixWorld(!0)}for(let A of y.children)A.updateMatrixWorld(!0)}},this.handleCollisionEvents=(v,y,x)=>{if(x!==!1)if(this.gameControls.some(b=>b.object===this.sharedGameControlGlobals.colliderToEntity[v])){let b=this.sharedGameControlGlobals.colliderToEntity[y],S=this.sharedGameControlGlobals.eventsPerObjects[b.uuid];if(S===void 0)return;for(let A of S)A.data.target==="character"&&this.dispatchCollisionEvent(A,b)}else if(this.gameControls.some(b=>b.object===this.sharedGameControlGlobals.colliderToEntity[y])){let b=this.sharedGameControlGlobals.colliderToEntity[v],S=this.sharedGameControlGlobals.eventsPerObjects[b.uuid];if(S===void 0)return;for(let A of S)A.data.target==="character"&&this.dispatchCollisionEvent(A,b)}else{let b=this.sharedGameControlGlobals.colliderToEntity[v],S=this.sharedGameControlGlobals.eventsPerObjects[b.uuid];if(S!==void 0)for(let M of S)M.data.target==="scene"&&this.dispatchCollisionEvent(M,b);let A=this.sharedGameControlGlobals.colliderToEntity[y],E=this.sharedGameControlGlobals.eventsPerObjects[A==null?void 0:A.uuid];if(E!==void 0)for(let M of E)M.data.target==="scene"&&this.dispatchCollisionEvent(M,A)}},this.domElement=n.domElement;let o;t.scene.publish.playCamera===null?o=s_.PERSONAL_CAMERA_ID:o=t.scene.publish.playCamera;let a=this.scene.find(o),l=!1,c,h=5,u=8,d=9,f="drag";if(this.usePhysics=t.scene.environment.usePhysics??el.defaultData.usePhysics,this.pixelsPerMeter=t.scene.environment.pixelsPerMeter??el.defaultData.pixelsPerMeter,(g=t.scene.objects.data(t.scene.publish.gameControlObject))==null||g.events.forEach(v=>{v.data.disabled!==!0&&v.data.type==="GameControl"&&(c=v.data.keyAssignments,h=v.data.joystickPosLoc,u=v.data.joystickRotLoc,d=v.data.jumpTouchButtonLoc,f=v.data.rotByTouch)}),this.scene.traverseEntity(v=>{v.dataPatched.events.forEach(y=>{var b,S;if(y.data.disabled||y.data.type!=="GameControl")return;let x=v;for(;((b=x=x.parent)==null?void 0:b.parent)!==null;)if((S=x.dataPatched.physics)!=null&&S.fusedBody)return;y.data.collisionEnabled&&(this.needsCollisionDetection=!0),this.gameControlStates.push([v,y.data])})}),this.usePhysics&&this.initPhysics(t.scene.environment.gravity??el.defaultData.gravity),this.gameControlStates.forEach(([v,y])=>{l=l||y.camera===a.uuid||v.uuid===a.uuid;let x=new DSe(v,n.domElement,{...y,keyAssignments:c},t.scene.environment,this.sharedGameControlGlobals,v.uuid!==a.uuid&&y.camera===a.uuid,a,this.scene,r);x.addEventListener("change",i),x.addEventListener("end",i),x.addEventListener("start",i),this.gameControls.push(x),hl&&y.touchControl&&(this.joystickToGameControls[h]!==void 0?this.joystickToGameControls[h].push([x,"pos"]):this.joystickToGameControls[h]=[[x,"pos"]],y.moveMode==="walk"&&(this.joystickToGameControls[d]!==void 0?this.joystickToGameControls[d].push([x,"jmp"]):this.joystickToGameControls[d]=[[x,"jmp"]]),f==="joystick"&&(this.joystickToGameControls[u]!==void 0?this.joystickToGameControls[u].push([x,"rot"]):this.joystickToGameControls[u]=[[x,"rot"]]))}),l===!1){let{enableRotate:v,enablePan:y,enableZoom:x,autoRotate:b,hoverRotatePanMode:S}=t.scene.publish.orbitControls;(v||y||x||b||S!==0)&&(this.orbitControls=new OSe(a,n.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",i),this.orbitControls.addEventListener("end",i),this.orbitControls.addEventListener("start",i),this.orbitControls.fromJSON(t.scene.publish.orbitControls,t.scene.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let p=n.domElement.width/n.getPixelRatio(),m=n.domElement.height/n.getPixelRatio();this.joystickToGameControls.forEach((v,y)=>{let x=document.body.appendChild(document.createElement("div")),[b,S,A]=(t.scene.publish.joystickSizeAndXYOffset??dw.defaultData.joystickSizeAndXYOffset)[y],E=(p-5*b)/4+b,M={},C=v.some(I=>I[1]==="jmp"),T=C?0:b;y<10?(y<5?M.top=T/2:M.bottom=T/2,M.left=T/2+y%5*E):y===10?(M.left=T/2,M.top=m/2):(M.right=T/2,M.top=m/2),M.top?M.top-=S[1]:M.bottom+=S[1],M.left?M.left+=S[0]:M.right-=S[0];for(let I in M)M[I]+="px";if(C){let I=x.appendChild(document.createElement("div"));Object.assign(I.style,M,{position:"absolute",width:b+"px",height:b+"px",backgroundColor:`rgba(255,255,255,${A==="show"?.4:0})`,zIndex:"9999",borderRadius:b+"px",border:A==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let R=b/16*16*.4;A==="show"&&(I.innerHTML=`
						<svg width="${R}" height="${b*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),I.addEventListener("pointerdown",()=>{v.forEach(H=>{H[0].movementState.jump=1}),i()}),I.addEventListener("touchend",H=>H.preventDefault()),this.joysticks[y]=[void 0,x];return}let D={zone:x,mode:"static",position:M,size:b};A==="hide"&&(D.restOpacity=0);let L=CIt.create(D);L.on("move",(I,R)=>{v.forEach(H=>{let Z=H[0];H[1]==="pos"?R.force<.2?Z.moveForce=0:(Z.movementState.movePosZ=Math.sin(-R.angle.radian),Z.movementState.movePosX=Math.cos(-R.angle.radian),R.force<.3?Z.moveForce=(R.force-.2)/.1:Z.moveForce=1):R.force<.2?Z.rotForce=0:(Z.movementState.rotPosX=R.vector.y,Z.movementState.rotPosY=-R.vector.x,R.force<.3?Z.rotForce=(R.force-.2)/.1:Z.rotForce=1)}),i()}),L.on("end",(I,R)=>{v.forEach(H=>{let Z=H[0];H[1]==="pos"?(Z.movementState.movePosZ=0,Z.movementState.movePosX=0,Z.moveForce=1):(Z.movementState.rotPosX=0,Z.movementState.rotPosY=0,Z.rotForce=1)})}),this.joysticks[y]=[L,x]}),this.usePhysics===!1&&this.needsCollisionDetection&&this.initBVH(),this.initializationCounter++,window.setTimeout(()=>this.collisionEvents.forEach(v=>v.disabled=!1),80)}attachVRControllers(t){t.forEach(e=>{e.addEventListener("connected",n=>{"gamepad"in n.data&&"axes"in n.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(n.data.gamepad)})})}initBVH(){let t=[];if(this.scene.traverseObject(e=>{let n;if(e instanceof fR)return;e instanceof k0?n=e.object:n=e;let i=n.dataPatched;if(!i.visible||sce(i))return!0;let r=e.geometry;if(rce(i)||n.dataPatched.events.some(s=>s.data.disabled!==!0&&s.data.type==="GameControl")){e.updateMatrixWorldSVD();let s=[];if((r==null?void 0:r.getAttribute("position"))!==void 0&&s.push(A1(r,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,s)),e.children.forEach(o=>o.updateMatrixWorld(!0)),s.length>0){let o=Ix(s,!1);e.boundsTree=new so(o),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)}return!0}else r&&t.push(A1(r,e.matrixWorld))}),t.length>0){let e=Ix(t,!1);this.sharedGameControlGlobals.staticMeshBVH=new so(e)}}addCollider(t,e,n,i,r,s=!0){var l,c;if((i==null?void 0:i.getAttribute("position").count)===0||((l=i==null?void 0:i.getIndex())==null?void 0:l.count)===0)return;let o;r!==void 0?r.collider.type==="sphere"?o=wr.ColliderDesc.ball(r.collider.radius/this.pixelsPerMeter):r.collider.type==="capsule"?o=wr.ColliderDesc.capsule((r.collider.height/2-r.collider.radius)/this.pixelsPerMeter,r.collider.radius/this.pixelsPerMeter):o=wr.ColliderDesc.cuboid(r.collider.width/this.pixelsPerMeter/2,r.collider.height/this.pixelsPerMeter/2,r.collider.depth/this.pixelsPerMeter/2):i&&(n.colliderType==="trimesh"?o=wr.ColliderDesc.trimesh(i.getAttribute("position").array,i.getIndex().array):o=wr.ColliderDesc.convexMesh(i.getAttribute("position").array,s?i.getIndex().array:void 0)),o.setFrictionCombineRule(wr.CoefficientCombineRule.Average).setRestitutionCombineRule(wr.CoefficientCombineRule.Average).setDensity(n.density).setFriction(n.friction).setRestitution(n.restitution);let a=this.sharedGameControlGlobals.rapierWorld.createCollider(o,e);if(this.sharedGameControlGlobals.colliderToEntity[a.handle]=t,r!==void 0){ua.fromArray(r.collider.position).multiply(Wg.setFromMatrixScale(t.matrixWorld)).divideScalar(this.pixelsPerMeter),a.setTranslationWrtParent(ua);let h=new Wn().setFromEuler(new Mo().setFromVector3(new G().fromArray(r.collider.rotation)));a.setRotationWrtParent(h),a.setActiveEvents(wr.ActiveEvents.COLLISION_EVENTS)}else(c=this.sharedGameControlGlobals.eventsPerObjects[t.uuid])!=null&&c.some(h=>h.target==="scene")&&a.setActiveEvents(wr.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(t,e){return(n,i)=>{if(i===0)return;i===1?t.hasNonUniformScale?n.matrixWorld.multiplyMatrices(t.shearScale,n.hiddenMatrix):n.matrixWorld.copy(n.hiddenMatrix):n.matrixWorld.multiplyMatrices(n.parent.matrixWorld,n.hiddenMatrix),n.matrixWorld.multiply(n.matrix);let r=n.geometry;(r==null?void 0:r.getAttribute("position"))!==void 0&&e.push(A1(r,n.matrixWorld))}}initPhysics(t){this.sharedGameControlGlobals.rapierWorld=new wr.World(new wr.Vector3(0,t??-10,0)),this.events=new wr.EventQueue(!0);let e=[];if(this.scene.traverseObject(o=>{var p;let a;if(o instanceof fR)if(o.objectForSample){if(o.objectForSample.dataPatched.physics.fusedBody)return;a=o.object}else return o.object.dataPatched.physics.fusedBody===!0&&o.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else o instanceof k0?a=o.object:a=o;let l=a.dataPatched;if(!l.physics||!l.visible)return!0;o.updateMatrixWorldSVD();let c=rce(l),h=sce(l),u,d=!1;for(let m of l.events)if(m.data.disabled!==!0){if(m.data.type==="GameControl")u=m.data;else if(m.data.type==="Collision"){d=!0;let g=new _kt(m.id,m.data,a,this.scene,this.sharedAssets);this.collisionEvents.push(g),this.sharedGameControlGlobals.eventsPerObjects[a.uuid]?this.sharedGameControlGlobals.eventsPerObjects[a.uuid].push(g):this.sharedGameControlGlobals.eventsPerObjects[a.uuid]=[g]}}l.physics.rigidBody==="dynamic"&&l.physics.fusedBody===!1&&(o.matrixWorldFusedFalse=o.matrixWorld.clone());let f=o.geometry;if(l.physics.rigidBody==="dynamic"||c||h||d||u!==void 0){let m=[];if((f==null?void 0:f.getAttribute("position"))!==void 0&&m.push(A1(f,o.shearScale)),l.physics.fusedBody){let g=this.gatherChildrenGeom(o,m);o.traverseObject(g),o.children.forEach(y=>y.updateMatrixWorld(!0));let v=o.cloner;v&&v.objectForSample===void 0&&l.physics.rigidBody==="dynamic"&&(v.traverseObject(g),v.children.forEach(y=>y.updateMatrixWorld(!0)))}if(m.length>0||u!==void 0){let g;u!==void 0?g=wr.RigidBodyDesc.kinematicPositionBased():l.physics.rigidBody==="dynamic"?(g=wr.RigidBodyDesc.dynamic(),g.setLinearDamping(l.physics.damping).setAdditionalMass(1e-9).setGravityScale(l.physics.gravityScale).enabledRotations(...l.physics.enabledRotation).enabledTranslations(...l.physics.enabledTranslation)):c||h?(g=wr.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(o)):g=wr.RigidBodyDesc.fixed();let v;v=m.length>0?Ix(m):void 0,(o.hasNonUniformScale?o.matrixWorldRigid:o.matrixWorld).decompose(ua,Op,Wg),o.position0=ua.clone().divideScalar(this.pixelsPerMeter),o.rotation0=Op.clone(),ua.divideScalar(this.pixelsPerMeter),g.setTranslation(ua.x,ua.y,ua.z).setRotation(Op),f?v==null||v.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):v==null||v.scale(Wg.x/this.pixelsPerMeter,Wg.y/this.pixelsPerMeter,Wg.z/this.pixelsPerMeter);let y=this.sharedGameControlGlobals.rapierWorld.createRigidBody(g);u===void 0&&l.physics.rigidBody==="dynamic"&&this.rigidBodyToMesh.set(y.handle,[o,Wg.clone(),l.physics.fusedBody]),o.rigidBody=y;let x=!(l.geometry===void 0||l.geometry.type==="SubdivGeometry"||l.geometry.type==="NonParametricGeometry"||l.geometry.type==="BooleanGeometry"||l.geometry.type==="VectorGeometry"||l.geometry.type==="StarGeometry"||l.geometry.type==="RectangleGeometry"||l.geometry.type==="EllipseGeometry"||l.geometry.type==="TriangleGeometry"||l.geometry.type==="TorusGeometry"||l.geometry.type==="HelixGeometry");try{this.addCollider(a,y,l.physics,v,u,x)}catch{try{this.addCollider(a,y,l.physics,v,u,!1)}catch(b){console.error(b)}}}}else f&&e.push(A1(f,o.matrixWorld)),l.physics.fusedBody&&o.traverse(m=>{!m.geometry||m===o||e.push(A1(m.geometry,m.matrixWorld))});if(((p=l.physics)==null?void 0:p.fusedBody)===!0||u)return!0}),e.length===0)return;let n=Ix(e);n.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let i=wr.RigidBodyDesc.fixed(),r=this.sharedGameControlGlobals.rapierWorld.createRigidBody(i),s=wr.ColliderDesc.trimesh(n.getAttribute("position").array,n.getIndex().array).setFrictionCombineRule(wr.CoefficientCombineRule.Multiply).setRestitutionCombineRule(wr.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(s,r)}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}dispose(){var t;this.scene.traverse(e=>{let n=e;n.matrixWorldFusedFalse&&(n.matrixWorldFusedFalse=void 0),n.rigidBody&&(n.rigidBody=void 0),n.position0&&(n.position0=void 0),n.rotation0&&(n.rotation0=void 0)}),(t=this.sharedGameControlGlobals.rapierWorld)==null||t.free(),this.sharedGameControlGlobals.staticMeshBVH=void 0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.gameControls.forEach(e=>{e.reset(),e.dispose()}),this.gameControls=[],this.joysticks.forEach(([e,n])=>{e==null||e.destroy(),n.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0);for(let e of Object.values(this.sharedGameControlGlobals.eventsPerObjects))e.forEach(n=>n.disconnect());this.sharedGameControlGlobals.eventsPerObjects={},this.scene.updateMatrixWorld(!0)}update(t,e,n){var r;let i=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(i=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2)this.initializationCounter++,i=!1;else if(this.initializationCounter===2)for(let s of this.gameControls)i=!s.update(t,e,n)&&i;if(this.usePhysics){for(let s of this.sharedGameControlGlobals.entitiesWithTransformAnim){(s.hasNonUniformScale?s.matrixWorldRigid:s.matrixWorld).decompose(ua,Op,Wg),_z.setFromQuaternion(Op);let o=s;o.prevR===void 0?(o.prevR=_z.clone(),o.prevT=ua.clone()):(o.prevR.copy(_z),o.prevT.copy(ua)),s.rigidBody.setNextKinematicTranslation(ua.divideScalar(this.pixelsPerMeter)),s.rigidBody.setNextKinematicRotation(Op)}this.sharedGameControlGlobals.rapierWorld.step(this.events),(r=this.events)==null||r.drainCollisionEvents(this.handleCollisionEvents),i=!this.updatePositions()&&i}return i}dispatchCollisionEvent(t,e){e.dispatchEvent(PSe),t.dispatch()}updateUseWindowEvents(t){var e;(e=this.orbitControls)==null||e.updateUseWindowEvents(t)}},Sz={type:"change"},Ekt={type:"lock"},Ckt={type:"unlock"};new G;var oce=new G,ace=new G,Tkt=new G,Vo=new G,qa=new G,Lp=new G,Az=new dt,lce=new dt,Pkt=new dt;new dt;var lu=new Wn,Kd=new Wn,xh=new Mo(0,0,0,"YXZ"),Dkt=new G(1,0,0),cu=new G(0,1,0),Okt=new G(0,0,1),cce=new G(1,1,1),Lkt=1,Rkt=.025,Ikt=16e-6,uce=12,Bkt=20,xo=new Rc,Zl=new cs,kkt={type:"requestRender"},hce=Math.PI/6,Zj=class extends Ba{constructor(t,e,n,i,r,s,o,a,l){var p,m;super(),this.object=t,this.domElement=e,this.sharedGameControlGlobals=r,this.cameraFollow=s,this.camera=o,this.scene=a,this.sharedAssets=l,this.enableDamping=!0,this.position0=new G,this.rotation0=new Mo(0,0,0,"XYZ"),this.scale0=new G,this.hiddenMatrix0=new dt,this.target0=new G,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.euler0=new Mo(0,0,0,"YXZ"),this.position0Cam=new G,this.quat0Cam=new Wn,this.scale0Cam=new G,this.hiddenMatrix0Cam=new dt,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Rc(new G(0,-40,0),new G(0,40,0)),matrix:new dt,position:new G,rotation:new Wn},this.euler=new Mo(0,0,0,"YXZ"),this.eulerDelta=new G,this.lastPosition=new G,this.lastCameraQuaternion=new Wn,this.lastCameraPosition=new G,this.PI_2=Math.PI/2,this.prevMouse=new Ae,this.velocityTarget=new G,this.velocity=new G,this.directionXZ=new G,this.rotVelocityStick=new G,this.rotVelocityTarget=new G,this.rotVelocity=new G,this.rotDirection=new G,this.nonColliderRotOffset=new dt,this.nonColliderPosOffset=new dt,this.firstPointerId=-1,this.rot=new G,this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new dt,this.objectToTarget=new G,this.objectToTarget0=new G,this.objectToCamXZ=new G,this.objectToCamXZ0=new G,this.targetToCamera=new G,this.targetToCamera0=new G,this.cameraPolarAxis0=new G,this.targetPos=new G,this.targetQuat=new Wn,this.lerpFactorPos=new G().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Wn,this.objXZQuatInv=new Wn,this.objXZRotMat=new dt,this.isFirstPerson=!1,this.actions={},this.didHit=!1,this.groundVelocity=new G,this.pushedVelocity=new G,this.groundYRotation=0,this.objectRealQuat=new Wn,this.colliderWorldQuat=new Wn,this.groundNormal=new G,this.groundTilt=new Wn,this.groundTiltInv=new Wn,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.onPointerDown=g=>{g.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=g.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!hl&&(!fae||pae>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(g.clientX,g.clientY))},this.onPointerUp=g=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),g.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=g=>{if(g.pointerId!==this.firstPointerId)return;let v=g.clientX-this.prevMouse.x,y=g.clientY-this.prevMouse.y;this.prevMouse.set(g.clientX,g.clientY),g.pointerType==="mouse"&&this.rotBy!=="keys"&&(fae&&pae<15.5&&!hl?(this.eulerDelta.y=-v*this.mouseOrbitSensitivity,this.eulerDelta.x=-y*this.mouseOrbitSensitivity):(this.eulerDelta.y=-g.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-g.movementY*this.mouseOrbitSensitivity)),g.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-v*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-y*this.mouseOrbitSensitivity*5),this.dispatchEvent(Sz)},this.onPointerlockChange=g=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(Ekt),Zj.isLocked=!0):(this.dispatchEvent(Ckt),Zj.isLocked=!1)},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.onKeyDown=g=>{!(g.target instanceof HTMLInputElement)&&(g.code==="ArrowLeft"||g.code==="ArrowUp"||g.code==="ArrowRight"||g.code==="ArrowDown"||g.code==="Space")&&g.preventDefault();for(let v of this.keyAssignments)if(g.key.toUpperCase()===v[1]||g.key===v[1]){this.movementState[v[0]]=1;break}this.dispatchEvent(Sz)},this.onKeyUp=g=>{for(let v of this.keyAssignments)if(g.key.toUpperCase()===v[1]||g.key===v[1]||g.code.slice(3,g.code.length).toUpperCase()===v[1]){this.movementState[v[0]]=0;break}},this.copyVRGamePadValues=(g,v)=>{for(let y=2;y<4;y++){let x=g.axes[y];v===0?y===2?this.movementState.movePosX=x:this.movementState.movePosZ=x:(g.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,y===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(x)>=.3&&(this.vrEulerYOffset+=x<0?1:-1),this.movementState.rotPosY=x):this.moveMode==="fly"&&(this.movementState.moveNegY=x))}},t===o&&(this.isFirstPerson=!0),this.position0.copy(this.object.position),this.rotation0.copy(this.object.rotation),this.scale0.copy(this.object.scale),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.rotation.reorder("YXZ"),this.euler0.copy(this.object.rotation);let c=this.object.rotation.y;if(this.objectRealQuat.copy(this.object.quaternion),this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,c,0),this.rot.setFromEuler(this.object.rotation),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){if(this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),(m=(p=this.camera)==null?void 0:p.parent)==null?void 0:m.parent){let b=this.camera.matrix.clone().invert().premultiply(this.camera.matrixWorld),S=b.clone().invert();this.camera.hiddenMatrix.multiply(S),this.camera.matrix.premultiply(b),this.camera.matrixWorld.decompose(this.camera.position,this.camera.quaternion,this.camera.scale)}this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let g=new G(0,0,-1).applyQuaternion(this.camera.quaternion),v=new G().subVectors(this.object.position,this.camera.position);this.objectToCamXZ.copy(v),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let y;if(Math.abs(g.y)<1e-6){v.y=0,g.y=0;let b=v.projectOnVector(g);this.targetToCamera0.copy(b).negate(),y=this.camera.position.clone().add(b)}else{let b=g.multiplyScalar(v.y/g.y);this.targetToCamera0.copy(b).negate(),y=b.clone().add(this.camera.position)}this.objectToTarget0.subVectors(y,this.object.position);let x=new Mo().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-x.x,x.x=0,x.z=0,x.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(x)}if(this.object instanceof Da&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.connect(),this.rotByTouch=n.rotByTouch??"joystick",this.rotBy=n.rotBy??"keys",this.rotationMode=n.rotationMode??"normal",this.moveMode=n.moveMode??"walk",this.collisionEnabled=n.collisionEnabled,this.speedTranslate=(n.speedTranslate??250)*Lkt,this.speedOrbit=(n.speedRotate??100)*Rkt,this.mouseOrbitSensitivity=(n.speedRotate??100)*Ikt,this.keyAssignments=n.keyAssignments.map(g=>{let v=[g[0],g[1]];return v[1]==="▲"?v[1]="ArrowUp":v[1]==="◀"?v[1]="ArrowLeft":v[1]==="▼"?v[1]="ArrowDown":v[1]==="▶"?v[1]="ArrowRight":v[1]==="⇧"?v[1]="Shift":v[1]==="↵"?v[1]="Enter":v[1]==="Space"?v[1]=" ":v[1]==="⌘"?v[1]="Meta":v[1]==="Ctrl"?v[1]="Control":v[1]==="Esc"&&(v[1]="Escape"),v}),n.rotBy==="mouse"){let g;g=this.keyAssignments.findIndex(v=>v[0]==="rotNegX"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(v=>v[0]==="rotPosX"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(v=>v[0]==="rotPosY"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(v=>v[0]==="rotNegY"),g!==-1&&(this.keyAssignments[g][1]="")}this.lerpFactorPosStart=1-.02**(1/((n.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((n.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((n.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((n.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((n.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((n.delayRotCamera??.3)*60)),this.gravity=(i.gravity??el.defaultData.gravity)*uce,this.pixelsPerMeter=i.pixelsPerMeter??el.defaultData.pixelsPerMeter,this.usePhysics=i.usePhysics??el.defaultData.usePhysics,this.jumpPower=n.jumpPower*Bkt,this.resetYPosition=this.object.position.y+Math.abs(n.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=n.alignToGround??!1,this.orientMode=n.autoOrientMove?n.orientMode:"none",this.orientWith=n.orientWith??_j.defaultDataThirdPerson.orientWith;let h=i.skinWidthRelative??el.defaultData.skinWidthRelative,u=i.stepThreshRelative??el.defaultData.stepThreshRelative;this.slopeThresh=(i.slopeThresh??el.defaultData.slopeThresh)*Math.PI/180,n.collider.type==="capsule"?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=n.collider.height/2-n.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=n.collider.height*h/this.pixelsPerMeter,this.stepThresh=n.collider.height*u/this.pixelsPerMeter):n.collider.type==="sphere"?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*n.collider.radius*h/this.pixelsPerMeter,this.stepThresh=2*n.collider.radius*u/this.pixelsPerMeter):(this.offset=n.collider.height*h/this.pixelsPerMeter,this.stepThresh=n.collider.height*u/this.pixelsPerMeter),this.collider.type=n.collider.type;let d=new G().fromArray(n.collider.position),f=new Wn().setFromEuler(new Mo().fromArray([...n.collider.rotation,"XYZ"]));this.collider.position.copy(d).multiply(this.object.scale),this.collider.rotation.copy(f),this.collider.matrix.compose(d,f,cce),n.cameraXAxis!==void 0&&(this.cameraXAxis=n.cameraXAxis,this.cameraYAxis=n.cameraYAxis,this.minPolarAngle=n.cameraRotXLimits[0],this.maxPolarAngle=n.cameraRotXLimits[1],this.minAzimuthAngleRel=n.cameraRotYLimits[0],this.maxAzimuthAngleRel=n.cameraRotYLimits[1]),n.gameActions!==void 0&&Object.entries(n.gameActions).forEach(([g,v],y)=>{v.forEach(({id:x,data:b})=>{try{this.actions[g]===void 0&&(this.actions[g]=[]),b.type==="Transition"?this.actions[g].push(new Ux(b,a,l)):b.type==="Audio"?this.actions[g].push(new zx(x,b,t,l)):b.type==="Video"&&this.actions[g].push(new gR(x,b,t))}catch{}})}),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle")}reset(t=!1){if(this.object.rotation.copy(this.rotation0),this.object.position.copy(this.position0),this.object.scale.copy(this.scale0),this.object.hiddenMatrix.copy(this.hiddenMatrix0),t===!0){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.rotation.reorder("YXZ");let e=this.object.rotation.y;this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,e,0),this.rot.setFromEuler(this.object.rotation),this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}t===!1&&(this.object instanceof Da?this.object.matrixAutoUpdate=!0:this.object.updateMatrix()),this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.dispatchEvent(Sz)}connect(){this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError)}dispose(){this.disconnect(),Object.values(this.actions).forEach(t=>{t.forEach(e=>{(e instanceof Ux||e instanceof zx||e instanceof gR)&&e.dispose()})})}dispatchStartEvent(t){this.actions[t]!==void 0&&(this.actionState[t]||(this.actionState[t]=!0,this.actions[t].forEach(e=>{e instanceof Ux?e.play():e instanceof zx&&e.dispatchGameControl("start")})))}dispatchStopEvent(t){this.actions[t]!==void 0&&(!this.actionState[t]||(this.actionState[t]=!1,this.actions[t].forEach(e=>{e instanceof Ux?e.stop():e instanceof zx&&e.dispatchGameControl("stop")}),this.object.traverseEntity(e=>{e.currentState!==null&&e.changeSelectedState(null,{scene:this.scene,shared:this.sharedAssets})})))}update(t,e,n){var a,l,c,h,u,d;if(this.gravity<0?this.object.position.y<this.resetYPosition:this.object.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let i=(this.isFirstFrame?16.6:t)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let r=i*60,s=!1;if(this.usePhysics&&this.collisionEnabled){let f=qa.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*uce),1)*(this.gravity>0?1:-1):this.velocity.y)*i,0).divideScalar(this.pixelsPerMeter),p=this.sharedGameControlGlobals.rapierWorld.castShape(Vo.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,f,(a=this.object.rigidBody)==null?void 0:a.collider(0).shape,1,!1,void 0,void 0,void 0,this.object.rigidBody);if(p){this.onObject=!0,this.groundNormal.set(p.normal2.x,p.normal2.y,p.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(s=!0),((l=p.collider.parent())==null?void 0:l.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let m=p.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let g of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(g.rigidBody===m){(g.hasNonUniformScale?g.matrixWorldRigid:g.matrixWorld).decompose(Vo,Kd,qa),this.groundVelocity.subVectors(Vo,g.prevT),this.object.getWorldPosition(qa).add(this.collider.position).sub(g.position),this.groundYRotation=xh.setFromQuaternion(Kd).y-g.prevR.y,Lp.copy(qa).applyAxisAngle(cu,this.groundYRotation),this.groundVelocity.add(Lp.sub(qa)).divideScalar(i);break}}else this.onObject=!1}this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*r),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.directionXZ.normalize(),this.movementState.moveNegZ||this.movementState.movePosZ?this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce:this.velocityTarget.z=0,this.movementState.moveNegX||this.movementState.movePosX?this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce:this.velocityTarget.x=0,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**r),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**r),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**r)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("move")));let o=Tkt.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let f=qa.copy(o);f.y=0,o.set(0,o.y,f.length()*-1)}if(xh.setFromVector3(this.rot),this.moveMode==="walk"&&(xh.x=0),o.applyEuler(xh),s&&(Kd.setFromUnitVectors(cu,this.groundNormal),o.applyQuaternion(Kd)),n){let f=xh.set(0,this.vrEulerYOffset*hce,0);n.applyEuler(f),o.x+=n.x,o.z+=n.z,this.nonColliderPosOffset.elements[13]+=n.y*i}if(this.usePhysics===!0){let f=qa;this.pushedVelocity.set(0,0,0);for(let p of this.sharedGameControlGlobals.entitiesWithTransformAnim){let m=Lp.setFromMatrixPosition(p.matrixWorld).sub(p.prevT).divideScalar(i).divideScalar(this.pixelsPerMeter),g=p.rigidBody.collider(0).castCollider(m,this.object.rigidBody.collider(0),Vo.copy(o).divideScalar(this.pixelsPerMeter),i,!1);if(m.multiplyScalar(this.pixelsPerMeter),g!==null){this.pushedVelocity.copy(m),f.copy(g.normal1).applyQuaternion(p.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let p=f.dot(o);p<0&&o.addScaledVector(f,-p),o.add(this.pushedVelocity)}else o.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(i),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**r):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**r),this.euler.x+=this.rotVelocity.x*i,this.euler.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*i),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){let f=Vo,p=qa.copy(this.directionXZ);p.x*=-1,this.camera.getWorldDirection(f);let m=Lp.copy(cu).multiplyScalar(f.dot(cu));if(f.sub(m),this.orientWith==="camera"?this.rot.y=f.angleTo(p)*(f.cross(p).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera:this.rot.y=this.euler.y+Math.atan2(-this.directionXZ.z,this.directionXZ.x)-Math.PI/2,this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(cu,this.euler.y-this.euler0.y);let g=qa.copy(this.objectToCamXZ).normalize(),v=Lp.copy(o).multiplyScalar(i);v.y=0;let y=v.sub(Vo.copy(g).multiplyScalar(v.dot(g))).cross(g).y;this.euler.y-=Math.atan2(y,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=Ln.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=Ln.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=Ln.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(e?(xh.copy(e),xh.y=0):(xh.copy(this.euler),xh.y=0),this.nonColliderRotOffset.makeRotationFromEuler(xh)),e&&(this.moveMode==="walk"?(this.rot.y=e.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(e),this.rot.y+=this.vrEulerYOffset*hce),lu.setFromAxisAngle(Dkt,this.rot.x),Kd.setFromAxisAngle(cu,this.rot.y),Kd.multiply(lu),lu.setFromAxisAngle(Okt,this.rot.z),Kd.multiply(lu),this.object.quaternion.copy(Kd),this.objectRealQuat.multiplyQuaternions(this.object.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let f=qa.copy(o).multiplyScalar(i/this.pixelsPerMeter),p=null;this.didHit=!1;let m=new G;for(let g=0;g<5;g++){let v=f.length(),y=Lp.copy(f).normalize();if(p=this.sharedGameControlGlobals.rapierWorld.castShape(Vo.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter).add(m),this.colliderWorldQuat,y,(c=this.object.rigidBody)==null?void 0:c.collider(0).shape,v,!1,8,void 0,void 0,this.object.rigidBody),p!==null){this.didHit=!0;let x=this.sharedGameControlGlobals.colliderToEntity[p.collider.handle];if(x!==this.lastHitObj&&g===0){this.lastHitObj=x;let E=this.sharedGameControlGlobals.eventsPerObjects[x==null?void 0:x.uuid];if(E)for(let M of E)M.data.target==="character"&&(x.dispatchEvent(PSe),M.dispatch())}let b=oce.set(p.normal2.x,p.normal2.y,p.normal2.z).applyQuaternion(this.colliderWorldQuat),S=ace.copy(y).multiplyScalar(p.toi).dot(b),A=p.toi;if(A===0&&(this.object.position.y+=this.offset*this.pixelsPerMeter),S>this.offset&&(A=p.toi*(S-this.offset)/S,m.addScaledVector(y,A)),f.copy(y).multiplyScalar(v-A),Math.acos(-b.y)>this.slopeThresh){let E=Vo.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter).add(m),M=Lp.copy(p.witness2).applyQuaternion(this.colliderWorldQuat);M.y=0;let C=E.add(M);C.y+=this.stepThresh;let T=this.sharedGameControlGlobals.rapierWorld.castShape(C,this.colliderWorldQuat,f,(h=this.object.rigidBody)==null?void 0:h.collider(0).shape,1,!1,8,void 0,void 0,this.object.rigidBody);T!==null&&T.toi===0&&(b.y=0,b.normalize())}f.addScaledVector(b,-f.dot(b))}else{g===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),m.add(f);break}}this.object.position.addScaledVector(m,this.pixelsPerMeter),(u=this.object.rigidBody)==null||u.setTranslation(Vo.copy(this.object.position).divideScalar(this.pixelsPerMeter),!0),(d=this.object.rigidBody)==null||d.setRotation(lu.copy(this.object.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let f=this.onObject?1:5,p=o.multiplyScalar(i/f);for(let m=0;m<f;m++)this.object.position.add(p),this.collisionAdjustment(i/f)}else this.object.position.addScaledVector(o,i);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.object.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.updateMatrix(),this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.object.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let f=this.objectToTarget.add(this.object.position),p=this.targetToCamera.add(f);Az.lookAt(p,f,cu).setPosition(p),Az.decompose(this.targetPos,this.targetQuat,Vo),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**r),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**r),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=Ln.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=Ln.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.lastPosition.distanceToSquared(this.object.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.object.position),this.object.dispatchEvent(kkt),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let t=lu.setFromAxisAngle(cu,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?Ln.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(t);let e;this.cameraXAxis==="Limit"?e=Ln.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):e=Ln.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let n=Vo.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&n.applyQuaternion(t);let i=Kd.setFromAxisAngle(n,e);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(t),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(i)}groundTiltAdjustment(t){cu.angleTo(t)*180/Math.PI<15||cu.angleTo(t)*180/Math.PI>85?lu.identity():lu.setFromUnitVectors(cu,t),this.groundTilt.slerp(lu,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(t){var r;let e=ace.set(0,0,0);this.object.updateMatrix();let n=Az.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Vo,lu,qa).compose(Vo,lu,cce);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(s=>{if(s===this.object||s.isDescendantOf(this.object))return;Zl.makeEmpty(),s.updateMatrixWorldSVD();let o=s.matrixWorldRigid,a=lce.copy(o).invert(),l=Pkt.copy(lce).multiply(n);xo.copy(this.collider.segment),xo.start.applyMatrix4(l),xo.end.applyMatrix4(l);let c=oce.copy(this.object.position).applyMatrix4(a);Zl.expandByPoint(xo.start),Zl.expandByPoint(xo.end),Zl.min.addScalar(-this.collider.radius),Zl.max.addScalar(this.collider.radius),s.boundsTree.shapecast({intersectsBounds:h=>h.intersectsBox(Zl),intersectsTriangle:h=>{let u=Vo,d=qa,f=h.closestPointToSegment(xo,u,d);if(f<this.collider.radius){let p=this.collider.radius-f,m=d.sub(u).normalize(),g=Lp.copy(c);g.addScaledVector(m,p);let v=g.applyMatrix4(o).sub(this.object.position);e.add(v),xo.start.addScaledVector(m,p),xo.end.addScaledVector(m,p)}}})}),Zl.makeEmpty(),xo.copy(this.collider.segment),xo.start.applyMatrix4(n),xo.end.applyMatrix4(n),Zl.expandByPoint(xo.start),Zl.expandByPoint(xo.end),Zl.min.addScalar(-this.collider.radius),Zl.max.addScalar(this.collider.radius),(r=this.sharedGameControlGlobals.staticMeshBVH)==null||r.shapecast({intersectsBounds:s=>s.intersectsBox(Zl),intersectsTriangle:s=>{let o=Vo,a=qa,l=s.closestPointToSegment(xo,o,a);if(l<this.collider.radius){let c=this.collider.radius-l,h=a.sub(o).normalize();this.alignToGround&&this.groundTiltAdjustment(h),e.addScaledVector(h,c),xo.start.addScaledVector(h,c),xo.end.addScaledVector(h,c)}}}),this.onObject=Math.abs(e.y)>Math.abs(t*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let i=Math.max(0,e.length()-1e-5);e.normalize().multiplyScalar(i),this.object.position.add(e)}},DSe=Zj;DSe.isLocked=!1;var Mz={type:"change"},dce={type:"changeZoom"},Fkt={type:"changePan"},C1={type:"start"},T1={type:"end",changed:!0},Nkt={type:"end",changed:!1},Ez=new Wn,fce=new Ae,zkt=2*Math.PI,Ukt=1e-8,Gkt=.01,Cz=new G,Q3=new Ae,Tz=new G,eD=new Wn,pce=new dt,Hkt={type:"requestRender"},OSe=class extends Ba{constructor(t,e,n={isPlayMode:!1,isExport:!1}){super(),this.object=t,this.domElement=e,this.options=n,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,Xl.DOLLY_ROTATE,Xl.PAN],this.offset=new G,this.eye=new G,this.lastPosition=new G,this.lastQuaternion=new Wn,this.current=new Ae,this.overShoot=new Ae,this.overRatio=new Ae,this.spherical=new Kse,this.sphericalDelta=new Kse,this.panOffset=new G,this.panLeftV=new G,this.panUpV=new G,this.panV=new G,this.rotateStart=new Ae,this.rotateEnd=new Ae,this.rotateDelta=new Ae,this.panStart=new Ae,this.panEnd=new Ae,this.panDelta=new Ae,this.dollyStart=new Ae,this.dollyEnd=new Ae,this.dollyDelta=new Ae,this.rotationRangeFactor=new Ae,this.panRangeFactor=new Ae,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(Tz,eD,Cz),this.offset.copy(Tz).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(Ez.copy(eD).invert()),this.panOffset.applyQuaternion(Ez),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(eD),this.panOffset.applyQuaternion(eD)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),Tz.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(pce.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(pce));let i=this.spherical.phi%zkt;return this.eye.copy(this.offset).normalize(),this.object.up.copy(wi.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),i>0&&i>Math.PI||i<0&&i>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.object.wasMovedByUser=!0,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>Gkt||8*(1-this.lastQuaternion.dot(this.object.quaternion))>Ukt?(this.dispatchEvent(Mz),this.object.dispatchEvent(Hkt),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=i=>{this.enabled!==!1&&(i.pointerType==="touch"||i.pointerType==="pen"&&hl?this.onPointerDownTouch(i):this.onPointerDownMouse(i),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(C1),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&hl||this.domElement.setPointerCapture(i.pointerId)))},this.onPointerLeave=i=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,Cz.subVectors(this.position0,this.target0),this.spherical.setFromVector3(Cz),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=i},this.onPointerEnter=i=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?Q3.set(i.clientX-this.domElement.clientWidth/2,i.clientY-this.domElement.clientHeight/2):Q3.set(i.clientX-this.pointerLeaveEvent.clientX,i.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(Q3).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(fce,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(i.clientX,i.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(Q3).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(i.clientX,i.clientY)),this.update()},this.onPointerMove=i=>{this.enabled!==!1&&(i.pointerType==="touch"||i.pointerType==="pen"&&hl?this.onPointerMoveTouch(i):this.onPointerMoveMouse(i),i.stopPropagation())},this.onPointerUp=i=>{this.isPointerDown=!1,dn.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),this.hasChange?this.dispatchEvent(T1):this.dispatchEvent(Nkt),this.state=-1,i&&(i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&hl||this.domElement.releasePointerCapture(i.pointerId))},this.onPointerDownMouse=i=>{let r;switch(this.useKeyEvents?r=this.mouseButtons[i.button]:r=this.mouseButtonsPlay[i.button],r){case 0:if(i.altKey===!0&&!i.shiftKey&&!P3(i)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2;break;case 3:if(P3(i)||i.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}break;case 5:if(P3(i)||i.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=i=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(i);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(i);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(i);break}},this.onPointerDownTouch=i=>{switch(this.touches[dn.length-1]){case Xl.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case Xl.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case Xl.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1||this.isTouchZoom===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case Xl.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1||this.isTouchZoom===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=i=>{switch(this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(i),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(i),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1||this.isTouchZoom===!1)return;this.handleTouchMoveDollyPan(i),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1||this.isTouchZoom===!1)return;this.handleTouchMoveDollyRotate(i),this.update();break;default:this.state=-1}},this.dispatchEndDebounced=$be(()=>this.dispatchEvent(T1),33),this.onMouseWheel=i=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||(this.options.isExport===!1&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&i.preventDefault(),this.dispatchEvent(C1),this.handleMouseWheel(i),this.dispatchEndDebounced())},this.onGesture=i=>{if(this.enabled!==!1)if(i.preventDefault(),i.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(C1),i.scale>this.prevScale?this.dollyIn(this.getZoomScale()):i.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=i.scale,this.update()}else this.dispatchEvent(T1)},this.onContextMenu=i=>{this.enabled!==!1&&i.preventDefault()},this.onTouchEnd=i=>{i.preventDefault()},this.onKeyDown=i=>{this.enabled!==!1&&(this.key=i.key,i.key===" "&&this.dispatchEvent(C1))},this.onKeyUp=i=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&this.onPointerUp(dn[0]),i.key===" "&&this.dispatchEvent(T1))},this.onPointerHover=i=>{i.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(i,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(i,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=i=>{i.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.addEventListenersToCamera()}dispatchEvent(t){t.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(t)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState)}reset(){this.object.quaternion.copy(this.quat0),this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.isUpVectorFlipped=this.isUpVectorFlipped0,this.object.updateProjectionMatrix(),this.dispatchEvent(Mz),this.state=-1,this.pointerLeaveEvent=void 0}resetTo(t,e,n,i,r=!1){this.object.quaternion.copy(i),this.target.copy(t),this.object.position.copy(e),this.object.zoom=n,this.object.isUpVectorFlipped=r,this.object.updateProjectionMatrix(),this.dispatchEvent(Mz),this.update(),this.state=-1}updateUseWindowEvents(t){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=t,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(t,e){this.setEnableDampingSpeed(t.enableDamping),this.enablePan=t.enablePan,this.enableZoom=t.enableZoom,this.enableRotate=t.enableRotate,this.rotationLimitsMode=t.rotationLimitsMode,this.thetaIsFree=t.rotationHorizontalOffset.min===t.rotationHorizontalOffset.max&&t.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=t.rotationVerticalOffset.min===t.rotationVerticalOffset.max&&t.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=t.panLimitsMode,this.panSoftLimit=t.panSoftLimit,this.rotationSoftLimit=t.rotationSoftLimit,this.hoverRotatePanMode=t.hoverRotatePanMode,this.useWindowEvents=e==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let n=t.hoverRotatePanStrength/100;this.hoverRotatePanStrength=n**2,this.zoomLimitsEnabled=t.zoomLimitsEnabled,this.minZoom=t.zoomLimits.min,this.maxZoom=Math.max(t.zoomLimits.min,t.zoomLimits.max),this.minDistance=1e3/t.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/t.zoomLimits.min),this.autoRotate=t.autoRotate,this.autoRotateSpeed=t.autoRotateSpeed,this.autoRotateClockwise=t.autoRotateClockwise;let i=this.object.getTarget().applyQuaternion(Ez.copy(this.object.quaternion).invert());this.minV=-t.panVerticalOffset.min+i.y,this.maxV=t.panVerticalOffset.max+i.y,this.minH=-t.panHorizontalOffset.min+i.x,this.maxH=t.panHorizontalOffset.max+i.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=bh(this.spherical.phi-t.rotationVerticalOffset.min),this.maxPhi=bh(this.spherical.phi+t.rotationVerticalOffset.max),this.minTheta=bh(bh(this.spherical.theta)-t.rotationHorizontalOffset.min),this.maxTheta=bh(bh(this.spherical.theta)+t.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,t.orbitTouches===1&&(this.touches[0]=Xl.ROTATE),t.panTouches===1&&(this.touches[0]=Xl.PAN),t.orbitTouches===2&&(this.touches[1]=Xl.DOLLY_ROTATE),t.panTouches===2&&(this.touches[1]=Xl.DOLLY_PAN),t.orbitTouches===3&&(this.touches[2]=Xl.ROTATE),t.panTouches===3&&(this.touches[2]=Xl.PAN),this.isTouchZoom=t.isTouchZoom,this.resetHoverEffectOnPointerLeave=t.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),bj||(this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture)),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),bj||(this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture)),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(t,e,n,i,r,s,o,a){this.overShoot.set(0,0);let l,c,h;t instanceof G?(l=t.x,c=t.y,this.current.set(this.target.x,this.target.y),h=!0):(l=t.theta,c=t.phi,this.current.set(bh(this.spherical.theta),bh(this.spherical.phi)),h=!1),n===0&&(this.current.x+=l,this.current.y+=c),(e===3||e===2)&&(!h&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<r&&this.current.x>0&&(this.overShoot.x=r-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<r&&(this.overShoot.x=r-this.current.x)),(e===3||e===1)&&(this.current.y>s?this.overShoot.y=s-this.current.y:this.current.y<o&&(this.overShoot.y=o-this.current.y)),h||(this.overShoot.x=bh(this.overShoot.x),this.overShoot.y=bh(this.overShoot.y)),n!==0?(this.overRatio.copy(this.overShoot).divide(a),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),n===1&&(this.overRatio.x=mce(Math.abs(this.overRatio.x)),this.overRatio.y=mce(Math.abs(this.overRatio.y))),this.isPointerDown||n===1?n===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),c*this.overShoot.y<0&&!this.phiIsFree&&(c*=1-this.overRatio.y)):n===2&&(!h&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||h&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(c=this.overShoot.y*.05),h?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):h?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,c+=this.overShoot.y),t instanceof G?(t.x=l,t.y=c):(this.thetaIsFree||(t.theta=l),this.phiIsFree||(t.phi=c))}setEnableDampingSpeed(t){this.enableDamping=t,this.rotateSpeed=t===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(t){this.sphericalDelta.theta-=t}rotateUp(t){this.sphericalDelta.phi-=t}panLeft(t,e){this.panLeftV.setFromMatrixColumn(e,0),this.panLeftV.multiplyScalar(-t),this.panOffset.add(this.panLeftV)}panUp(t,e){this.panUpV.setFromMatrixColumn(e,1),this.panUpV.multiplyScalar(t),this.panOffset.add(this.panUpV)}pan(t,e){let n=this.domElement;if(n&&this.object.isPerspectiveCamera){let i=this.object.position;this.panV.copy(i).sub(this.target);let r=this.panV.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*t*r/n.clientHeight,this.object.matrixWorld),this.panUp(2*e*r/n.clientHeight,this.object.matrixWorld)}else n&&this.object.isOrthographicCamera&&(this.panLeft(t*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrixWorld),this.panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrixWorld));this.dispatchEvent(Fkt)}dollyOut(t){this.object.isPerspectiveCamera?this.scale/=t:this.object.isOrthographicCamera&&(this.object.zoom*=t,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(dce)}dollyIn(t){this.object.isPerspectiveCamera?this.scale*=t:this.object.isOrthographicCamera&&(this.object.zoom/=t,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(dce)}zoomOut(t=this.getZoomScale()){this.dispatchEvent(C1),this.dollyOut(t),this.dispatchEvent(T1)}zoomIn(t=this.getZoomScale()){this.dispatchEvent(C1),this.dollyIn(t),this.dispatchEvent(T1)}handleMouseDownRotate(t){this.rotateStart.set(t.clientX,t.clientY)}handleMouseDownDolly(t){this.dollyStart.set(t.clientX,t.clientY)}handleMouseDownPan(t){this.panStart.set(t.clientX,t.clientY)}handleMouseMoveRotate(t,e=1){t.movementX!==void 0?this.rotateDelta.set(t.movementX,t.movementY):(this.rotateEnd.set(t.clientX,t.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*e).rotateAround(fce,-this.object.angleOffsetFromUp);let n=this.domElement,i=this.useWindowEvents?window.innerHeight:n.clientHeight,r=2*Math.PI*this.rotateDelta.x/i,s=2*Math.PI*this.rotateDelta.y/i;this.rotateLeft(r),this.rotateUp(s),this.update()}handleMouseMoveDolly(t){this.dollyEnd.set(t.clientX,t.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(t,e=1){t.movementX!==void 0?this.panDelta.set(t.movementX,t.movementY):(this.panEnd.set(t.clientX,t.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*e),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(t){if(I3t===!1&&P3(t)===!1&&jkt(t)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-t.deltaX,-t.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),t.altKey?this.pan(0,this.panDelta.y):t.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;t.deltaY===0?t.deltaX<0?this.dollyIn(this.getZoomScale()):t.deltaX>0&&this.dollyOut(this.getZoomScale()):t.deltaY<0?this.dollyIn(this.getZoomScale()):t.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(dn.length===2){let t=.5*(dn[0].pageX+dn[1].pageX),e=.5*(dn[0].pageY+dn[1].pageY);this.rotateStart.set(t,e)}else this.rotateStart.set(dn[0].pageX,dn[0].pageY)}handleTouchStartPan(){if(dn.length===2){let t=.5*(dn[0].pageX+dn[1].pageX),e=.5*(dn[0].pageY+dn[1].pageY);this.panStart.set(t,e)}else this.panStart.set(dn[0].pageX,dn[0].pageY)}handleTouchStartDolly(){let t=dn[0].pageX-dn[1].pageX,e=dn[0].pageY-dn[1].pageY,n=Math.sqrt(t*t+e*e);this.dollyStart.set(0,n)}handleTouchStartDollyPan(){this.enableZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(t){if(dn.length===2){let n=z5(t),i=.5*(t.pageX+n.x),r=.5*(t.pageY+n.y);this.rotateEnd.set(i,r)}else{if(t.pointerId!==dn[0].pointerId)return;this.rotateEnd.set(t.pageX,t.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;e&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/e.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/e.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(t){if(dn.length===2){let e=z5(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);this.panEnd.set(n,i)}else{if(t.pointerId!==dn[0].pointerId)return;this.panEnd.set(t.pageX,t.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(t){let e=z5(t),n=t.pageX-e.x,i=t.pageY-e.y,r=Math.sqrt(n*n+i*i);this.dollyEnd.set(0,r),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(t){this.enableZoom&&this.handleTouchMoveDolly(t),this.enablePan&&this.handleTouchMovePan(t)}handleTouchMoveDollyRotate(t){this.enableZoom&&this.handleTouchMoveDolly(t),this.enableRotate&&this.handleTouchMoveRotate(t)}};function bh(t){let e=Math.PI*2;for(;t<=-Math.PI;)t+=e;for(;t>Math.PI;)t-=e;return t}function mce(t){return 1-Math.pow(1-t,4)}function jkt(t){return t.wheelDeltaY===0||t.deltaY===0?FB&&t.shiftKey&&Math.abs(t.wheelDeltaX)>=120?!1:t.wheelDeltaX?t.wheelDeltaX===-3*t.deltaX:t.deltaMode===0:t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY:t.deltaMode===0}var Pz=new WeakMap,Vkt=class extends P${constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,i){let r=new jH(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,s=>{this.decodeDracoFile(s,e).catch(i)},n,i)}decodeDracoFile(t,e,n,i){let r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};return this.decodeGeometry(t,r).then(e)}decodeGeometry(t,e){let n=JSON.stringify(e);if(Pz.has(t)){let a=Pz.get(t);if(a.key===n)return a.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i,r=this.workerNextTaskID++,s=t.byteLength,o=this._getWorker(r,s).then(a=>(i=a,new Promise((l,c)=>{i._callbacks[r]={resolve:l,reject:c},i.postMessage({type:"decode",id:r,taskConfig:e,buffer:t},[t])}))).then(a=>this._createGeometry(a.geometry));return o.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),Pz.set(t,{key:n,promise:o}),o}_createGeometry(t){let e=new Qt;t.index&&e.setIndex(new on(t.index.array,1));for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n],r=i.name,s=i.array,o=i.itemSize;e.setAttribute(r,new on(s,o))}return e}_loadLibrary(t,e){let n=new jH(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((i,r)=>{n.load(t,i,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(n=>{let i=n[0];t||(this.decoderConfig.wasmBinary=n[1]);let r=Wkt.toString(),s=["/* draco decoder */",i,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(r){let s=r.data;switch(s.type){case"decode":i._callbacks[s.id].resolve(s);break;case"error":i._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,r){return i._taskLoad>r._taskLoad?-1:1});let n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function Wkt(){let t,e;onmessage=function(o){let a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(h){t.onModuleLoaded=function(u){h({draco:u})},DracoDecoderModule(t)});break;case"decode":let l=a.buffer,c=a.taskConfig;e.then(h=>{let u=h.draco,d=new u.Decoder,f=new u.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{let p=n(u,d,f,c),m=p.attributes.map(g=>g.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:a.id,error:p.message})}finally{u.destroy(f),u.destroy(d)}});break}};function n(o,a,l,c){let h=c.attributeIDs,u=c.attributeTypes,d,f,p=a.GetEncodedGeometryType(l);if(p===o.TRIANGULAR_MESH)d=new o.Mesh,f=a.DecodeBufferToMesh(l,d);else if(p===o.POINT_CLOUD)d=new o.PointCloud,f=a.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let m={index:null,attributes:[]};for(let g in h){let v=self[u[g]],y,x;if(c.useUniqueIDs)x=h[g],y=a.GetAttributeByUniqueId(d,x);else{if(x=a.GetAttributeId(d,o[h[g]]),x===-1)continue;y=a.GetAttribute(d,x)}m.attributes.push(r(o,a,d,g,v,y))}return p===o.TRIANGULAR_MESH&&(m.index=i(o,a,d)),o.destroy(d),m}function i(o,a,l){let c=l.num_faces()*3,h=c*4,u=o._malloc(h);a.GetTrianglesUInt32Array(l,h,u);let d=new Uint32Array(o.HEAPF32.buffer,u,c).slice();return o._free(u),{array:d,itemSize:1}}function r(o,a,l,c,h,u){let d=u.num_components(),f=l.num_points()*d,p=f*h.BYTES_PER_ELEMENT,m=s(o,h),g=o._malloc(p);a.GetAttributeDataArrayForAllPoints(l,u,m,p,g);let v=new h(o.HEAPF32.buffer,g,f).slice();return o._free(g),{name:c,array:v,itemSize:d}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var xm;function $kt(){return xm||(xm=new Vkt,xm.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),xm.decoderPending}async function qkt(t){if(xm){let e={attributeIDs:xm.defaultAttributeIDs,attributeTypes:xm.defaultAttributeTypes,useUniqueIDs:!1},n;try{n=await xm.decodeGeometry(new Int8Array(t).buffer,e)}catch(i){console.error(i)}if(n)return{index:n.index?{array:n.index.array}:void 0,attributes:Object.entries(n.attributes).map(([i,r])=>({name:i,itemSize:r.itemSize,array:r.array}))}}return null}async function Xkt(t,e){let[n,i]=twe(rj.deserialize(new Uint8Array(t)));mDt(n);let r=[];n.scene.objects.traverse((s,o)=>{o.type==="Mesh"&&o.geometry.type==="NonParametricGeometry"&&o.geometry.data.draco!==void 0&&r.push(o)}),r.length&&await $kt();for(let s of r){let o=await qkt(To(s.geometry.data.draco));if(o){o.index&&(s.geometry.data.index={array:o.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let a={};o.attributes.forEach(({name:l,array:c,itemSize:h})=>{a[l]={array:c,itemSize:h,type:"Float32Array",normalized:!1}}),s.geometry.data.attributes=a,s.geometry.data.draco=void 0}}return e&&e(n),i.result().data}var gce=Object.keys(sSe).filter(t=>isNaN(Number(t))),Ykt=class{constructor(t,e,n,i,r,s,o,a,l,c,h){this.preventScroll=r,this.preventTouchScroll=s,this.hideCursor=o,this.requestRender=l,this.isEnable=!1,this.onResetRaycaster=()=>{this.eventContext.raycasterNeedsUpdate=!0},this.onTouchMovePreventScroll=u=>{(u.touches.length>1||this.preventTouchScroll)&&u.preventDefault()},this.onMouseWheelPreventScroll=u=>{this.preventScroll&&u.preventDefault()},this.eventContext=new IIt(t,e,n,a,i,h??!1),this.handlers={Spline:new KBt(this.eventContext),Conditional:new ikt(this.eventContext),Start:new wkt(this.eventContext),Basic:new ZBt(this.eventContext,c,this),MouseHover:new gkt(this.eventContext),Scroll:new xkt(this.eventContext),Follow:new lkt(this.eventContext),LookAt:new fkt(this.eventContext)}}activate(){let{scene:t,domElement:e,eventElement:n}=this.eventContext;this.hideCursor&&(e.style.cursor="none"),this.isEnable=!0,t.traverseEntity(i=>{i.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(i=>i.connect()),gce.forEach(i=>{Object.values(this.handlers).some(r=>r.domEventsNeeded.has(i))&&(e.addEventListener(i,this.onResetRaycaster),n.addEventListener(i,this.onResetRaycaster))}),e.addEventListener("wheel",this.onMouseWheelPreventScroll),e.addEventListener("touchmove",this.onTouchMovePreventScroll)}deactivate(){let{scene:t,domElement:e}=this.eventContext;this.isEnable=!1,e.style.cursor="",Object.values(this.handlers).forEach(n=>n.disconnect()),t.traverseEntity(n=>{n.removeEventListener("requestRender",this.requestRender)}),gce.forEach(n=>{e.removeEventListener(n,this.onResetRaycaster)}),e.removeEventListener("touchmove",this.onTouchMovePreventScroll),e.removeEventListener("wheel",this.onMouseWheelPreventScroll)}reset(){this.deactivate(),this.activate()}updateUseWindowEvents(t){let e=this.isEnable;e&&this.deactivate(),this.eventContext.useWindowEvents=t,e&&this.activate()}},Kkt=class{constructor(t,e,n,i,r){this._aspect=1,this._renderer=t,this._camera=e,this._frameSize=new Ae().copy(n),this._editorSize=new Ae().copy(i),this._aspect=e.aspect,this._fov=r??e.fov}set frameSize(t){this._frameSize.copy(t)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let t=this._frameSize.x,e=this._frameSize.y,n=this._editorSize.y;this._aspect=t/e,e<=n&&(this._camera.zoom*=n/e),this._renderer.setViewport(0,0,t,e)}updateCamera(){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,e=this._editorSize.y,n=this._fov;if(t>e){let i=Jkt(t,1080,2160,1,15)/100;n*=t/e,n*=1-i}this._camera.aspect=this._aspect,this._camera.fov=n,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y)}setCamera(t){this._camera=t,this._aspect=t.aspect,this._fov=t.fov}revert(){let t=window.innerWidth,e=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,t,e),this._renderer.setSize(t,e)),this._camera&&(this._camera.aspect=t/e,this._camera.fov=this._fov,this._camera.setViewplaneSize(t,e),this._camera.updateProjectionMatrix())}};function Jkt(t,e,n,i,r){return(t-e)/(n-e)*(r-i)+i}var LSe={RED:0,GREEN:1,BLUE:2,ALPHA:3},sC="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Zkt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,tD=class extends Ms{constructor(t=!1,e=!1){super({name:"BokehMaterial",defines:{PASS:t?"2":"1"},uniforms:{kernel64:new Lt(null),kernel16:new Lt(null),inputBuffer:new Lt(null),cocBuffer:new Lt(null),texelSize:new Lt(new Ae),scale:new Lt(1)},blending:io,depthWrite:!1,depthTest:!1,fragmentShader:Zkt,vertexShader:sC}),this.toneMapped=!1,e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set cocBuffer(t){this.uniforms.cocBuffer.value=t}setCoCBuffer(t){this.uniforms.cocBuffer.value=t}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(t){return this.uniforms.scale.value=t}setScale(t){this.uniforms.scale.value=t}generateKernel(){let t=2.39996323,e=new Float32Array(128),n=new Float32Array(32),i=0,r=0;for(let a=0;a<80;++a){let l=a*t,c=Math.sqrt(a)/Math.sqrt(80),h=c*Math.cos(l),u=c*Math.sin(l);a%5===0?(n[r++]=h,n[r++]=u):(e[i++]=h,e[i++]=u)}let s=[],o=[];for(let a=0;a<128;)s.push(new Sn(e[a++],e[a++],e[a++],e[a++]));for(let a=0;a<32;)o.push(new Sn(n[a++],n[a++],n[a++],n[a++]));this.uniforms.kernel64.value=s,this.uniforms.kernel16.value=o}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}};function vce(t,e,n){return t*(e-n)-e}function Qj(t,e,n){return Math.min(Math.max((t+e)/(e-n),0),1)}var Qkt=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,eFt=class extends Ms{constructor(t){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Lt(null),focusDistance:new Lt(0),focusRange:new Lt(0),cameraNear:new Lt(.3),cameraFar:new Lt(1e3)},blending:io,depthWrite:!1,depthTest:!1,fragmentShader:Qkt,vertexShader:sC}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(t)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=np){this.depthBuffer=t,this.depthPacking=e}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(t){this.uniforms.focusDistance.value=t}get worldFocusDistance(){return-vce(this.focusDistance,this.near,this.far)}set worldFocusDistance(t){this.focusDistance=Qj(-t,this.near,this.far)}getFocusDistance(t){this.uniforms.focusDistance.value=t}setFocusDistance(t){this.uniforms.focusDistance.value=t}get focalLength(){return this.focusRange}set focalLength(t){this.focusRange=t}get focusRange(){return this.uniforms.focusRange.value}set focusRange(t){this.uniforms.focusRange.value=t}get worldFocusRange(){return-vce(this.focusRange,this.near,this.far)}set worldFocusRange(t){this.focusRange=Qj(-t,this.near,this.far)}getFocalLength(t){return this.focusRange}setFocalLength(t){this.focusRange=t}adoptCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof So?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},tFt=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,nFt="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",yce=class extends Ms{constructor(t=new Ae){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Lt(null),texelSize:new Lt(new Ae),halfTexelSize:new Lt(new Ae),kernel:new Lt(0),scale:new Lt(1)},blending:io,depthWrite:!1,depthTest:!1,fragmentShader:tFt,vertexShader:nFt}),this.toneMapped=!1,this.setTexelSize(t.x,t.y)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e),this.uniforms.halfTexelSize.value.set(t,e).multiplyScalar(.5)}setSize(t,e){let n=this.uniforms;n.texelSize.value.set(1/t,1/e),n.halfTexelSize.value.copy(n.texelSize.value).multiplyScalar(.5)}},iFt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,rFt=class extends Ms{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Lt(null),opacity:new Lt(1)},blending:io,depthWrite:!1,depthTest:!1,fragmentShader:iFt,vertexShader:sC}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},sFt=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,oFt=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,z7={DEPTH:0,LUMA:1,COLOR:2},RSe={DISABLED:0,DEPTH:1,CUSTOM:2},aFt=class extends Ms{constructor(t=new Ae,e=z7.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:$w.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Lt(null),depthBuffer:new Lt(null),predicationBuffer:new Lt(null),texelSize:new Lt(t)},blending:io,depthWrite:!1,depthTest:!1,fragmentShader:sFt,vertexShader:oFt}),this.toneMapped=!1,this.edgeDetectionMode=e}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=np){this.depthBuffer=t,this.depthPacking=e}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(t){this.defines.EDGE_DETECTION_MODE=t.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(t){this.edgeDetectionMode=t}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(t){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=t.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(t){this.localContrastAdaptationFactor=t}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(t){this.defines.EDGE_THRESHOLD=t.toFixed("6"),this.defines.DEPTH_THRESHOLD=(t*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(t){this.edgeDetectionThreshold=t}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(t){this.defines.PREDICATION_MODE=t.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(t){this.predicationMode=t}set predicationBuffer(t){this.uniforms.predicationBuffer.value=t}setPredicationBuffer(t){this.uniforms.predicationBuffer.value=t}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(t){this.defines.PREDICATION_THRESHOLD=t.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(t){this.predicationThreshold=t}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(t){this.defines.PREDICATION_SCALE=t.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(t){this.predicationScale=t}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(t){this.defines.PREDICATION_STRENGTH=t.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(t){this.predicationStrength=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},lFt=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,cFt="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",uu={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},eV=class extends Ms{constructor(t,e,n,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:$w.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Lt(null),depthBuffer:new Lt(null),resolution:new Lt(new Ae),texelSize:new Lt(new Ae),cameraNear:new Lt(.3),cameraFar:new Lt(1e3),aspect:new Lt(1),time:new Lt(0)},blending:io,depthWrite:!1,depthTest:!1,dithering:r}),this.toneMapped=!1,t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.adoptCameraSettings(i)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=np){this.depthBuffer=t,this.depthPacking=e}setShaderParts(t){return this.fragmentShader=lFt.replace(uu.FRAGMENT_HEAD,t.get(uu.FRAGMENT_HEAD)).replace(uu.FRAGMENT_MAIN_UV,t.get(uu.FRAGMENT_MAIN_UV)).replace(uu.FRAGMENT_MAIN_IMAGE,t.get(uu.FRAGMENT_MAIN_IMAGE)),this.vertexShader=cFt.replace(uu.VERTEX_HEAD,t.get(uu.VERTEX_HEAD)).replace(uu.VERTEX_MAIN_SUPPORT,t.get(uu.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(t){for(let e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(let e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(let e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof So?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){let n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return uu}},uFt=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,hFt=class extends Ms{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:$w.replace(/\D+/g,"")},uniforms:{inputBuffer:new Lt(null),threshold:new Lt(0),smoothing:new Lt(1),range:new Lt(null)},blending:io,depthWrite:!1,depthTest:!1,fragmentShader:uFt,vertexShader:sC}),this.toneMapped=!1,this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return this.luminanceRange!==null}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){t!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},dFt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,ISe={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},fFt=class extends Ms{constructor(t=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Lt(t),inputBuffer:new Lt(null),strength:new Lt(1)},blending:io,depthWrite:!1,depthTest:!1,fragmentShader:dFt,vertexShader:sC}),this.toneMapped=!1,this.setColorChannel(LSe.RED),this.setMaskFunction(ISe.DISCARD)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set maskTexture(t){this.uniforms.maskTexture.value=t,delete this.defines.MASK_PRECISION_HIGH,t.type!==Lo&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(t){this.maskTexture=t}set colorChannel(t){this.defines.COLOR_CHANNEL=t.toFixed(0),this.needsUpdate=!0}setColorChannel(t){this.colorChannel=t}set maskFunction(t){this.defines.MASK_FUNCTION=t.toFixed(0),this.needsUpdate=!0}setMaskFunction(t){this.maskFunction=t}get inverted(){return this.defines.INVERTED!==void 0}set inverted(t){this.inverted&&!t?delete this.defines.INVERTED:t&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(t){this.inverted=t}get strength(){return this.uniforms.strength.value}set strength(t){this.uniforms.strength.value=t}getStrength(){return this.strength}setStrength(t){this.strength=t}},pFt=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,mFt="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",gFt=class extends Ms{constructor(t=new Ae,e=new Ae){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Lt(null),searchTexture:new Lt(null),areaTexture:new Lt(null),resolution:new Lt(e),texelSize:new Lt(t)},blending:io,depthWrite:!1,depthTest:!1,fragmentShader:pFt,vertexShader:mFt}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(t){this.uniforms.searchTexture.value=t}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(t){this.uniforms.areaTexture.value=t}setLookupTextures(t,e){this.searchTexture=t,this.areaTexture=e}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(t){let e=Math.min(Math.max(t,0),112);this.defines.MAX_SEARCH_STEPS_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(t){this.orthogonalSearchSteps=t}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(t){let e=Math.min(Math.max(t,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(t){this.diagonalSearchSteps=t}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(t){t?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(t){this.diagonalDetection=t}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(t){let e=Math.min(Math.max(t,0),100);this.defines.CORNER_ROUNDING=e.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(e/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(t){this.cornerRounding=t}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(t){t?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(t){this.cornerDetection=t}setSize(t,e){let n=this.uniforms;n.texelSize.value.set(1/t,1/e),n.resolution.value.set(t,e)}},vFt=new Yw,Rp=null;function yFt(){if(Rp===null){let t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Rp=new Qt,Rp.setAttribute!==void 0?(Rp.setAttribute("position",new on(t,3)),Rp.setAttribute("uv",new on(e,2))):(Rp.addAttribute("position",new on(t,3)),Rp.addAttribute("uv",new on(e,2)))}return Rp}var Vc=class{constructor(t="Pass",e=new tv,n=vFt){this.name=t,this.renderer=null,this.scene=e,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){let e=this.getFullscreenMaterial();e!==null&&(e.needsUpdate=!0),this.rtt=!t}}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;e!==null?e.material=t:(e=new cl(yFt(),t),e.frustumCulled=!1,this.scene===null&&(this.scene=new tv),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=np){}render(t,e,n,i,r){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,n){}dispose(){for(let t of Object.keys(this)){let e=this[t];if(e!==null&&typeof e.dispose=="function"){if(e instanceof tv||e===this.renderer)continue;this[t].dispose()}}}},yR=class extends Vc{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new rFt,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new _s(1,1,{minFilter:oi,magFilter:oi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,i,r){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==Lo?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":t.outputEncoding===mn&&(this.renderTarget.texture.encoding=mn))}},xFt=class extends Vc{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,i,r){let s=t.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},Dz=new Zt,WB=class extends Vc{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,i,r){let s=this.overrideClearColor,o=this.overrideClearAlpha,a=t.getClearAlpha(),l=s!==null,c=o>=0;l?(Dz.copy(t.getClearColor(Dz)),t.setClearColor(s,c?o:a)):c&&t.setClearAlpha(o),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),l?t.setClearColor(Dz,a):c&&t.setClearAlpha(a)}},Ip=-1,Sa=class extends Ba{constructor(e,n=Ip,i=Ip,r=1){super(),this.resizable=e,this.base=new Ae(1,1),this.preferred=new Ae(n,i),this.target=this.preferred,this.s=r}get width(){let{base:e,preferred:n,scale:i}=this,r;return n.width!==Ip?r=n.width:n.height!==Ip?r=Math.round(n.height*(e.width/Math.max(e.height,1))):r=Math.round(e.width*i),r}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:n,scale:i}=this,r;return n.height!==Ip?r=n.height:n.width!==Ip?r=Math.round(n.width/Math.max(e.width/Math.max(e.height,1),1)):r=Math.round(e.height*i),r}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(Ip),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,n){(this.base.width!==e||this.base.height!==n)&&(this.base.set(e,n),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,n){(this.preferred.width!==e||this.preferred.height!==n)&&(this.preferred.set(e,n),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Ip}},Oz=!1,xce=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case ll:n=this.materialsFlatShadedDoubleSide;break;case Us:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case ll:n=this.materialsDoubleSide;break;case Us:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){let e=this.materials=[t.clone(),t.clone(),t.clone()];for(let n of e)n.uniforms=Object.assign({},t.uniforms),n.side=zu;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.side=Us,i}),this.materialsDoubleSide=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.side=ll,i}),this.materialsFlatShaded=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=Us,i}),this.materialsFlatShadedDoubleSide=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=ll,i})}}render(t,e,n){let i=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,Oz){let r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(let s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{let r=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=r}t.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){let t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Oz}static set workaroundEnabled(t){Oz=t}},bFt=class extends Vc{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new WB,this.overrideMaterialManager=n===null?null:new xce(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){let t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){let e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new xce(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,i,r){let s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=s.background,h=t.shadowMap.autoUpdate,u=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(u),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,s,o):t.render(s,o),o.layers.mask=l,s.background=c,t.shadowMap.autoUpdate=h}},bce=class extends Vc{constructor(t,e,{resolutionScale:n=1,width:i=Sa.AUTO_SIZE,height:r=Sa.AUTO_SIZE,renderTarget:s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new bFt(t,e,new qxe({depthPacking:Ixe}));let o=this.renderPass;o.skipShadowMapUpdate=!0,o.ignoreBackground=!0;let a=o.getClearPass();a.overrideClearColor=new Zt(16777215),a.overrideClearAlpha=1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new _s(1,1,{minFilter:hr,magFilter:hr,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new Sa(this,i,r,n);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,r){let s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,s)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}},Nn={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},wFt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",_Ft="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",SFt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",AFt="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",MFt="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",EFt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",CFt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",TFt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",PFt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",DFt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",OFt="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",LFt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",RFt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",IFt="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",BFt="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",kFt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",FFt="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",NFt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",zFt=new Map([[Nn.SKIP,null],[Nn.ADD,wFt],[Nn.ALPHA,_Ft],[Nn.AVERAGE,SFt],[Nn.COLOR_BURN,AFt],[Nn.COLOR_DODGE,MFt],[Nn.DARKEN,EFt],[Nn.DIFFERENCE,CFt],[Nn.EXCLUSION,TFt],[Nn.LIGHTEN,PFt],[Nn.MULTIPLY,DFt],[Nn.DIVIDE,OFt],[Nn.NEGATION,LFt],[Nn.NORMAL,RFt],[Nn.OVERLAY,IFt],[Nn.REFLECT,BFt],[Nn.SCREEN,kFt],[Nn.SOFT_LIGHT,FFt],[Nn.SUBTRACT,NFt]]),UFt=class extends Ba{constructor(t,e=1){super(),this.f=t,this.opacity=new Lt(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this.f}set blendFunction(t){this.f=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return zFt.get(this.blendFunction)}},Jh={NONE:0,DEPTH:1,CONVOLUTION:2},yd=class extends Ba{constructor(t,e,{attributes:n=Jh.NONE,blendFunction:i=Nn.SCREEN,defines:r=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=a,this.defines=r,this.uniforms=s,this.extensions=o,this.blendMode=new UFt(i),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=np){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(let t of Object.keys(this)){let e=this[t];if(e!==null&&typeof e.dispose=="function"){if(e instanceof tv||e===this.renderer)continue;this[t].dispose()}}}};function wce(t,e,n){for(let i of e){let r="$1"+t+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(let o of n.entries())o[1]!==null&&n.set(o[0],o[1].replace(s,r))}}function GFt(t,e,n,i,r,s,o){let a=new Map([["fragment",e.getFragmentShader()],["vertex",e.getVertexShader()]]),l=a.get("fragment")!==void 0&&/mainImage/.test(a.get("fragment")),c=a.get("fragment")!==void 0&&/mainUv/.test(a.get("fragment")),h=[],u=[],d=!1,f=!1;if(a.get("fragment")===void 0)console.error("Missing fragment shader",e);else if(c&&o&Jh.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",e);else if(!l&&!c)console.error("The fragment shader contains neither a mainImage nor a mainUv function",e);else{let p=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,m=eV.Section;if(c){let v=`	${t}MainUv(UV);
`;n.set(m.FRAGMENT_MAIN_UV,n.get(m.FRAGMENT_MAIN_UV)+v),d=!0}if(a.get("vertex")!==null&&/mainSupport/.test(a.get("vertex"))){let v=`	${t}MainSupport(`;v+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(a.get("vertex"))?`vUv);
`:`);
`,n.set(m.VERTEX_MAIN_SUPPORT,n.get(m.VERTEX_MAIN_SUPPORT)+v),h=h.concat([...a.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(y=>y[1])),u=u.concat(h).concat([...a.get("vertex").matchAll(p)].map(y=>y[1]))}u=u.concat([...a.get("fragment").matchAll(p)].map(v=>v[1])),u=u.concat([...e.defines.keys()].map(v=>v.replace(/\([\w\s,]*\)/g,""))),u=u.concat([...e.uniforms.keys()]),e.uniforms.forEach((v,y)=>s.set(t+y.charAt(0).toUpperCase()+y.slice(1),v)),e.defines.forEach((v,y)=>r.set(t+y.charAt(0).toUpperCase()+y.slice(1),v)),wce(t,u,r),wce(t,u,a);let g=e.blendMode;if(i.set(g.blendFunction,g),l){let v=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,y=`${t}MainImage(color0, UV, `;o&Jh.DEPTH&&v.test(a.get("fragment"))&&(y+="depth, ",f=!0),y+=`color1);
	`;let x=t+"BlendOpacity";s.set(x,g.opacity),y+=`color0 = blend${g.blendFunction}(color0, color1, ${x});

	`,n.set(m.FRAGMENT_MAIN_IMAGE,n.get(m.FRAGMENT_MAIN_IMAGE)+y),y=`uniform float ${x};

`,n.set(m.FRAGMENT_HEAD,n.get(m.FRAGMENT_HEAD)+y)}n.set(m.FRAGMENT_HEAD,n.get(m.FRAGMENT_HEAD)+a.get("fragment")+`
`),a.get("vertex")!==null&&n.set(m.VERTEX_HEAD,n.get(m.VERTEX_HEAD)+a.get("vertex")+`
`)}return{varyings:h,transformedUv:d,readDepth:f}}var Lz=class extends Vc{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new eV(null,null,null,t),this.effects=e.sort((n,i)=>i.attributes-n.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){let e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}verifyResources(){let t=this.renderer.capabilities,e=Math.min(t.maxFragmentUniforms,t.maxVertexUniforms);this.uniformCount>e&&console.warn("The current rendering context doesn't support more than "+e+" uniforms, but "+this.uniformCount+" were defined"),e=t.maxVaryings,this.varyingCount>e&&console.warn("The current rendering context doesn't support more than "+e+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let t=eV.Section,e=new Map([[t.FRAGMENT_HEAD,""],[t.FRAGMENT_MAIN_UV,""],[t.FRAGMENT_MAIN_IMAGE,""],[t.VERTEX_HEAD,""],[t.VERTEX_MAIN_SUPPORT,""]]),n=new Map,i=new Map,r=new Map,s=new Set,o=0,a=0,l=0,c=!1,h=!1;for(let d of this.effects)if(d.blendMode.blendFunction===Nn.SKIP)l|=d.getAttributes()&Jh.DEPTH;else if(l&d.getAttributes()&Jh.CONVOLUTION)console.error("Convolution effects cannot be merged",d);else{l|=d.getAttributes();let f="e"+o++,p=GFt(f,d,e,n,i,r,l);if(a+=p.varyings.length,c=c||p.transformedUv,h=h||p.readDepth,d.extensions!==null)for(let m of d.extensions)s.add(m)}let u=/\bblend\b/g;for(let d of n.values()){let f=d.getShaderCode().replace(u,`blend${d.blendFunction}`);e.set(t.FRAGMENT_HEAD,e.get(t.FRAGMENT_HEAD)+f+`
`)}if(l&Jh.DEPTH){if(h){let d=`float depth = readDepth(UV);

	`;e.set(t.FRAGMENT_MAIN_IMAGE,d+e.get(t.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=this.getDepthTexture()===null}else this.needsDepthTexture=!1;if(c){let d=`vec2 transformedUv = vUv;
`;e.set(t.FRAGMENT_MAIN_UV,d+e.get(t.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")}else i.set("UV","vUv");e.forEach((d,f,p)=>p.set(f,d.trim().replace(/^#/,`
#`))),this.uniformCount=r.size,this.varyingCount=a,this.skipRendering=o===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(e).setExtensions(s).setUniforms(r).setDefines(i)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=np){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(let n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,i,r){for(let s of this.effects)s.update(t,e,i);if(!this.skipRendering||this.renderToScreen){let s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=i,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(let n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(let i of this.effects)i.initialize(t,e,n),i.addEventListener("change",r=>this.handleEvent(r));this.updateMaterial(),this.verifyResources(),n!==void 0&&n!==Lo&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let t of this.effects)t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},HFt=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],BSe=class extends Vc{constructor({resolutionScale:t=.5,width:e=Sa.AUTO_SIZE,height:n=Sa.AUTO_SIZE,kernelSize:i=U7.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new _s(1,1,{minFilter:oi,magFilter:oi,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let r=this.resolution=new Sa(this,e,n,t);r.addEventListener("change",s=>this.setSize(r.baseWidth,r.baseHeight)),this.blurMaterial=new yce,this.ditheredBlurMaterial=new yce,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,r){let s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=HFt[this.kernelSize],h=this.blurMaterial,u=e,d,f;for(this.fullscreenMaterial=h,d=0,f=c.length-1;d<f;++d){let p=d&1?l:a;h.kernel=c[d],h.inputBuffer=u.texture,t.setRenderTarget(p),t.render(s,o),u=p}this.dithering&&(h=this.ditheredBlurMaterial,this.fullscreenMaterial=h),h.kernel=c[d],h.inputBuffer=u.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(s,o)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e);let i=n.width,r=n.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(i,r),this.ditheredBlurMaterial.setSize(i,r)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==Lo?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):t.outputEncoding===mn&&(this.renderTargetA.texture.encoding=mn,this.renderTargetB.texture.encoding=mn))}static get AUTO_SIZE(){return Sa.AUTO_SIZE}},jFt=class extends Vc{constructor({width:t=Sa.AUTO_SIZE,height:e=Sa.AUTO_SIZE,renderTarget:n,luminanceRange:i,colorOutput:r}={}){super("LuminancePass"),this.fullscreenMaterial=new hFt(r,i),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new _s(1,1,{minFilter:oi,magFilter:oi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let s=this.resolution=new Sa(this,t,e);s.addEventListener("change",o=>this.setSize(s.baseWidth,s.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,n,i,r){let s=this.fullscreenMaterial;s.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){n!==void 0&&n!==Lo&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},VFt=class extends Vc{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new WB(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,i,r){let s=t.getContext(),o=t.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,h=this.inverted?0:1,u=1-h;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,h,4294967295),o.stencil.setClear(u),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(t,null):(c.render(t,e),c.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(a,l)):(t.setRenderTarget(e),t.render(a,l),t.setRenderTarget(n),t.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},jp=class extends Vc{constructor(t,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=t,this.inputBufferUniform=null,this.setInput(e)}setInput(t){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let e=this.fullscreenMaterial.uniforms;e!==void 0&&e[t]!==void 0&&(this.inputBufferUniform=e[t])}}render(t,e,n,i,r){this.inputBufferUniform!==null&&e!==null&&(this.inputBufferUniform.value=e.texture),t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}initialize(t,e,n){n!==void 0&&n!==Lo&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Rz=1/1e3,WFt=1e3,$Ft=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(t){return this.fixedDeltaEnabled=t,this}isAutoResetEnabled(t){return this.autoReset}setAutoResetEnabled(t){return typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=t),this}getDelta(){return this.delta*Rz}getFixedDelta(){return this.fixedDelta*Rz}setFixedDelta(t){return this.fixedDelta=t*WFt,this}getElapsed(){return this.elapsed*Rz}getTimescale(){return this.timescale}setTimescale(t){return this.timescale=t,this}update(t){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=t!==void 0?t:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(t){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},qFt=class{constructor(t=null,{depthBuffer:e=!0,stencilBuffer:n=!1,multisampling:i=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,n,r,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new yR,this.depthTexture=null,this.passes=[],this.timer=new $Ft,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){let e=this.inputBuffer,n=this.multisampling;n>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,t!==null){let e=t.getSize(new Ae),n=t.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Lo&&t.outputEncoding===mn&&(this.inputBuffer.texture.encoding=mn,this.outputBuffer.texture.encoding=mn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(e.width,e.height);for(let r of this.passes)r.initialize(t,n,i)}}replaceRenderer(t,e=!0){let n=this.renderer,i=n.domElement.parentNode;return this.setRenderer(t),e&&i!==null&&(i.removeChild(n.domElement),i.appendChild(t.domElement)),n}createDepthTexture(){let t=this.depthTexture=new S$;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=Pv,t.type=Z0):t.type=um,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,n,i){let r=this.renderer,s=r===null?new Ae:r.getDrawingBufferSize(new Ae),o={minFilter:oi,magFilter:oi,stencilBuffer:e,depthBuffer:t,type:n},a=new _s(s.width,s.height,o);return i>0&&(a.ignoreDepthForMultisampleCopy=!1,a.samples=i),n===Lo&&r!==null&&r.outputEncoding===mn&&(a.texture.encoding=mn),a.texture.name="EffectComposer.Buffer",a.texture.generateMipmaps=!1,a}addPass(t,e){let n=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new Ae),s=i.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(t.setRenderer(i),t.setSize(r.width,r.height),t.initialize(i,s,o),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?n.splice(e,0,t):n.push(t),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let a=this.createDepthTexture();for(t of n)t.setDepthTexture(a)}else t.setDepthTexture(this.depthTexture)}removePass(t){let e=this.passes,n=e.indexOf(t);if(n!==-1&&e.splice(n,1).length>0){if(this.depthTexture!==null){let i=(r,s)=>r||s.needsDepthTexture;e.reduce(i,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){let t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){let e=this.renderer,n=this.copyPass,i=this.inputBuffer,r=this.outputBuffer,s=!1,o,a,l;t===void 0&&(t=this.timer.update().getDelta());for(let c of this.passes)c.enabled&&(c.render(e,i,r,t,s),c.needsSwap&&(s&&(n.renderToScreen=c.renderToScreen,o=e.getContext(),a=e.state.buffers.stencil,a.setFunc(o.NOTEQUAL,1,4294967295),n.render(e,i,r,t,s),a.setFunc(o.EQUAL,1,4294967295)),l=i,i=r,r=l),c instanceof VFt?s=!0:c instanceof xFt&&(s=!1))}setSize(t,e,n){let i=this.renderer;if(t===void 0||e===void 0){let s=i.getSize(new Ae);t=s.width,e=s.height}i.setSize(t,e,n);let r=i.getDrawingBufferSize(new Ae);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(let s of this.passes)s.setSize(r.width,r.height)}reset(){let t=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(t)}dispose(){for(let t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},U7={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},XFt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,YFt=class extends yd{constructor({blendFunction:t=Nn.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:n=.025,resolutionScale:i=.5,intensity:r=1,width:s=Sa.AUTO_SIZE,height:o=Sa.AUTO_SIZE,kernelSize:a=U7.LARGE}={}){super("BloomEffect",XFt,{blendFunction:t,uniforms:new Map([["map",new Lt(null)],["intensity",new Lt(r)]])}),this.renderTarget=new _s(1,1,{minFilter:oi,magFilter:oi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new jFt({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothingFactor=n,this.blurPass=new BSe({resolutionScale:i,width:s,height:o,kernelSize:a});let l=this.blurPass.getResolution();l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,n){let i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(t,e,i),this.blurPass.render(t,i,i)):this.blurPass.render(t,e,i)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.luminancePass.resolution.copy(n)}initialize(t,e,n){this.blurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,t.outputEncoding===mn&&(this.renderTarget.texture.encoding=mn))}},KFt="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",JFt=class extends yd{constructor({blendFunction:t=Nn.NORMAL,brightness:e=0,contrast:n=0}={}){super("BrightnessContrastEffect",KFt,{blendFunction:t,uniforms:new Map([["brightness",new Lt(e)],["contrast",new Lt(n)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(t){this.uniforms.get("brightness").value=t}getBrightness(t){return this.brightness}setBrightness(t){this.brightness=t}get contrast(){return this.uniforms.get("contrast").value}set contrast(t){this.uniforms.get("contrast").value=t}getContrast(t){return this.contrast}setContrast(t){this.contrast=t}},ZFt="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",QFt=class extends yd{constructor(t=Nn.NORMAL){super("ColorAverageEffect",ZFt,{blendFunction:t})}},eNt="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",tNt="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",nNt=class extends yd{constructor({blendFunction:t=Nn.NORMAL,offset:e=new Ae(.001,5e-4)}={}){super("ChromaticAberrationEffect",eNt,{vertexShader:tNt,blendFunction:t,attributes:Jh.CONVOLUTION,uniforms:new Map([["offset",new Lt(e)]])})}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}},iNt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,rNt=class extends yd{constructor(t,{blendFunction:e=Nn.NORMAL,worldFocusDistance:n,worldFocusRange:i,focusDistance:r=0,focalLength:s=.1,focusRange:o=s,bokehScale:a=1,width:l=Sa.AUTO_SIZE,height:c=Sa.AUTO_SIZE}={}){super("DepthOfFieldEffect",iNt,{blendFunction:e,attributes:Jh.DEPTH,uniforms:new Map([["nearColorBuffer",new Lt(null)],["farColorBuffer",new Lt(null)],["nearCoCBuffer",new Lt(null)],["scale",new Lt(1)]])}),this.camera=t,this.renderTarget=new _s(1,1,{minFilter:oi,magFilter:oi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new jp(new eFt(t));let h=this.cocMaterial;h.focusDistance=r,h.focusRange=o,n!==void 0&&(h.worldFocusDistance=n),i!==void 0&&(h.worldFocusRange=i),this.blurPass=new BSe({kernelSize:U7.MEDIUM,width:l,height:c});let u=this.blurPass.getResolution();u.addEventListener("change",f=>this.setSize(u.getBaseWidth(),u.getBaseHeight())),this.maskPass=new jp(new fFt(this.renderTargetCoC.texture));let d=this.maskPass.fullscreenMaterial;d.maskFunction=ISe.MULTIPLY,d.colorChannel=LSe.GREEN,this.bokehNearBasePass=new jp(new tD(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new jp(new tD(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new jp(new tD(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new jp(new tD(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=a}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(t){let e=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let n of e)n.fullscreenMaterial.setScale(t);this.maskPass.fullscreenMaterial.setStrength(t),this.uniforms.get("scale").value=t}getBokehScale(){return this.bokehScale}setBokehScale(t){this.bokehScale=t}getTarget(){return this.target}setTarget(t){this.target=t}calculateFocusDistance(t){let e=this.camera,n=e.position.distanceTo(t);return Qj(-n,e.near,e.far)}setDepthTexture(t,e=np){this.circleOfConfusionMaterial.depthBuffer=t,this.circleOfConfusionMaterial.depthPacking=e}update(t,e,n){let i=this.renderTarget,r=this.renderTargetCoC,s=this.renderTargetCoCBlurred,o=this.renderTargetMasked;if(this.target!==null){let a=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=a}this.cocPass.render(t,null,r),this.blurPass.render(t,r,s),this.maskPass.render(t,e,o),this.bokehFarBasePass.render(t,o,i),this.bokehFarFillPass.render(t,i,this.renderTargetFar),this.bokehNearBasePass.render(t,e,i),this.bokehNearFillPass.render(t,i,this.renderTargetNear)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e);let i=n.width,r=n.height,s=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];s.push(this.renderTargetCoC,this.renderTargetMasked),s.forEach(o=>o.setSize(t,e)),s=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],s.forEach(o=>o.setSize(i,r)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(o=>o.fullscreenMaterial.setSize(i,r))}initialize(t,e,n){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(t,e,n)),this.blurPass.initialize(t,e,Lo),n!==void 0&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n,t.outputEncoding===mn&&(this.renderTarget.texture.encoding=mn,this.renderTargetNear.texture.encoding=mn,this.renderTargetFar.texture.encoding=mn,this.renderTargetMasked.texture.encoding=mn))}};new G;new dt;var sNt="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",oNt=class extends yd{constructor({blendFunction:t=Nn.NORMAL,hue:e=0,saturation:n=0}={}){super("HueSaturationEffect",sNt,{blendFunction:t,uniforms:new Map([["hue",new Lt(new G)],["saturation",new Lt(n)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(t){this.uniforms.get("saturation").value=t}getSaturation(){return this.saturation}setSaturation(t){this.saturation=t}get hue(){let t=this.uniforms.get("hue").value;return Math.acos((t.x*3-1)/2)}set hue(t){let e=Math.sin(t),n=Math.cos(t);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3)}getHue(){return this.hue}setHue(t){this.hue=t}};new Zt;var aNt=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,lNt=class extends yd{constructor({blendFunction:t=Nn.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",aNt,{blendFunction:t}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}},cNt="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",uNt=class extends yd{constructor(t=30){super("PixelationEffect",cNt,{uniforms:new Map([["active",new Lt(!1)],["d",new Lt(new Ae)]])}),this.resolution=new Ae,this.d=0,this.granularity=t}get granularity(){return this.d}set granularity(t){let e=Math.floor(t);e%2>0&&(e+=1),this.d=e,this.uniforms.get("active").value=e>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(t){this.granularity=t}setSize(t,e){this.resolution.set(t,e),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new G;new G;var _ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",Sce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",hNt="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",dNt="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",V1={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},fNt=class extends yd{constructor({preset:t=V1.MEDIUM,edgeDetectionMode:e=z7.COLOR,predicationMode:n=RSe.DISABLED}={}){super("SMAAEffect",hNt,{vertexShader:dNt,blendFunction:Nn.NORMAL,attributes:Jh.CONVOLUTION|Jh.DEPTH,uniforms:new Map([["weightMap",new Lt(null)]])});let i,r;arguments.length>1&&(i=arguments[0],r=arguments[1],arguments.length>2&&(t=arguments[2]),arguments.length>3&&(e=arguments[3])),this.renderTargetEdges=new _s(1,1,{minFilter:oi,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new WB(!0,!1,!1),this.clearPass.overrideClearColor=new Zt(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new jp(new aFt),this.edgeDetectionMaterial.edgeDetectionMode=e,this.edgeDetectionMaterial.predicationMode=n,this.weightsPass=new jp(new gFt);let s=new abe;s.onLoad=()=>{let o=new Hs(i);o.name="SMAA.Search",o.magFilter=hr,o.minFilter=hr,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!0,this.weightsMaterial.searchTexture=o;let a=new Hs(r);a.name="SMAA.Area",a.magFilter=oi,a.minFilter=oi,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!1,this.weightsMaterial.areaTexture=a,this.dispatchEvent({type:"load"})},s.itemStart("search"),s.itemStart("area"),i!==void 0&&r!==void 0?(s.itemEnd("search"),s.itemEnd("area")):typeof Image<"u"&&(i=new Image,r=new Image,i.addEventListener("load",()=>s.itemEnd("search")),r.addEventListener("load",()=>s.itemEnd("area")),i.src=_ce,r.src=Sce),this.applyPreset(t)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(t){this.edgeDetectionMaterial.edgeDetectionThreshold=t}setOrthogonalSearchSteps(t){this.weightsMaterial.orthogonalSearchSteps=t}applyPreset(t){let e=this.edgeDetectionMaterial,n=this.weightsMaterial;switch(t){case V1.LOW:e.edgeDetectionThreshold=.15,n.orthogonalSearchSteps=4,n.diagonalDetection=!1,n.cornerDetection=!1;break;case V1.MEDIUM:e.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=8,n.diagonalDetection=!1,n.cornerDetection=!1;break;case V1.HIGH:e.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=16,n.diagonalSearchSteps=8,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0;break;case V1.ULTRA:e.edgeDetectionThreshold=.05,n.orthogonalSearchSteps=32,n.diagonalSearchSteps=16,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0;break}}setDepthTexture(t,e=np){this.edgeDetectionMaterial.depthBuffer=t,this.edgeDetectionMaterial.depthPacking=e}update(t,e,n){this.clearPass.render(t,this.renderTargetEdges),this.edgeDetectionPass.render(t,e,this.renderTargetEdges),this.weightsPass.render(t,this.renderTargetEdges,this.renderTargetWeights)}setSize(t,e){this.edgeDetectionMaterial.setSize(t,e),this.weightsMaterial.setSize(t,e),this.renderTargetEdges.setSize(t,e),this.renderTargetWeights.setSize(t,e)}dispose(){let{searchTexture:t,areaTexture:e}=this.weightsMaterial;t!==null&&e!==null&&(t.dispose(),e.dispose()),super.dispose()}static get searchImageDataURL(){return _ce}static get areaImageDataURL(){return Sce}},pNt=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,nD={DEFAULT:0,ESKIL:1},mNt=class extends yd{constructor({blendFunction:t=Nn.NORMAL,technique:e=nD.DEFAULT,eskil:n=!1,offset:i=.5,darkness:r=.5}={}){super("VignetteEffect",pNt,{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new Lt(i)],["darkness",new Lt(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===nD.ESKIL}set eskil(t){this.technique=t?nD.ESKIL:nD.DEFAULT}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}},ip=class{constructor(t,e){this.enabled=!1,this.effect=new t(e),Object.defineProperty(this,"opacity",{enumerable:!0,set(n){this.effect.blendMode.opacity.value=n},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(n){this.effect.blendMode.setBlendFunction(Number(n))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Nn.NORMAL}},gNt=class extends ip{constructor(){super(YFt),this.blendFunction=Nn.SCREEN}set intensity(t){this.effect.intensity=t}get intensity(){return this.effect.intensity}set luminanceThreshold(t){this.effect.luminanceMaterial.threshold=t}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(t){this.effect.luminanceMaterial.smoothing=t}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(t){this.effect.blurPass.scale=t}get blurScale(){return this.effect.blurPass.scale}set kernelSize(t){this.effect.blurPass.kernelSize=t}get kernelSize(){return this.effect.blurPass.kernelSize}},vNt=class extends ip{constructor(){super(JFt)}set contrast(t){this.effect.uniforms.get("contrast").value=t}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(t){this.effect.uniforms.get("brightness").value=t}get brightness(){return this.effect.uniforms.get("brightness").value}},yNt=class extends ip{constructor(){super(nNt),this.effect.offset=new Ae(.01,.01)}set offset(t){this.effect.offset.set(t[0]/1e3,t[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},xNt=class extends ip{constructor(){super(QFt)}},bNt=class extends ip{constructor(){super(oNt),this._hue=0}set hue(t){this._hue=t,this.effect.setHue(t)}get hue(){return this._hue}set saturation(t){this.effect.uniforms.get("saturation").value=t}get saturation(){return this.effect.uniforms.get("saturation").value}},wNt=class extends ip{constructor(){super(lNt),this.blendFunction=Nn.OVERLAY}},_Nt=class extends ip{constructor(){super(mNt)}get eskil(){return this.effect.eskil}set eskil(t){this.effect.eskil=t}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(t){this.effect.uniforms.get("darkness").value=t}get offset(){return this.effect.uniforms.get("offset").value}set offset(t){this.effect.uniforms.get("offset").value=t}},SNt=class extends ip{constructor(t){super(rNt,t)}set focalLength(t){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=t}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(t){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=t}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(t){this.effect.bokehScale=t}},ANt=class extends ip{constructor(){super(uNt)}get granularity(){return this.effect.getGranularity()}set granularity(t){this.effect.setGranularity(t)}},MNt=class extends Vc{constructor(t,e,n){super("TransmissionPass",t,e),this.copyPass=new yR(n.transmissionRenderTarget),this.depthPass=new bce(t,e,{renderTarget:n.transmissionDepthTarget}),this.needsSwap=!1}updatePasses(t){this.copyPass=new yR(t.transmissionRenderTarget),this.depthPass=new bce(this.scene,this.camera,{renderTarget:t.transmissionDepthTarget})}setCamera(t){this.camera=t}setScene(t){this.scene=t}render(t,e,n){let i=this.camera.layers.mask;this.copyPass.render(t,e,n),this.camera.layers.disable(3),this.depthPass.render(t,e,n),t.shadowMap.needsUpdate=!1,t.shadowMap.autoUpdate=!1;let r=this.renderToScreen?null:e;this.camera.layers.set(3),t.setRenderTarget(r),t.render(this.scene,this.camera),this.camera.layers.mask=i}},Ace=new tv,ENt=new Ms({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        void main() {
            gl_FragColor = vec4(0.0);
        }
    `}),Iz=class extends Vc{constructor(t,e){super("OpaquePass",t??Ace,e),this.hasTransmissionPass=!1,this.clear=!0,this.needsSwap=!1,this.originalMaterials=new Map}setCamera(t){this.camera=t}setScene(t){this.scene=t??Ace}getScene(){return this.scene}render(t,e){this.originalMaterials.clear(),this.camera.layers.enable(3),this.hasTransmissionPass&&this.scene.traverse(i=>{i.layers.isEnabled(3)&&i instanceof _l&&(this.originalMaterials.set(i.id,i.material),i.material=ENt)}),this.camera.layers.enable(8),t.shadowMap.needsUpdate=!0,t.shadowMap.autoUpdate=!0;let n=this.renderToScreen?null:e;t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),this.hasTransmissionPass&&this.originalMaterials.forEach((i,r)=>{let s=this.scene.getObjectById(r);s&&(s.material=i)})}};function Mce(t,e){return e&&e.enabled&&t.push(e.effect),t}var CNt=t=>Object.values(Nn).includes(t)?t:Nn.NORMAL,TNt=class extends Ba{constructor(t){super(),this.postprocessingState=W2.defaultData,this._scene=new tv,this._camera=new Da,this.effects=new Map,this._renderToScreen=!0,this.clock=new F_t,this.renderer=t,this.debug=!1,this.effects.set("bloom",new gNt),this.effects.set("chromaticAberration",new yNt),this.effects.set("vignette",new _Nt),this.effects.set("noise",new wNt),this.effects.set("colorAverage",new xNt),this.effects.set("hueSaturation",new bNt),this.effects.set("brightnessContrast",new vNt),this.effects.set("depthOfField",new SNt),this.effects.set("pixelation",new ANt),this.effectComposer=new qFt(this.renderer),this.opaquePass=new Iz(this.scene,this.camera),this.transmissionPass=new MNt(this.scene,this.camera,this.renderer),this.helperPass=new Iz(void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperClearPass=new WB(!1,!0,!1),this.helperPassOnTop=new Iz(void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this._initCopyPass(),this._initSmaa(),this._initPasses()}get scene(){return this._scene}set scene(t){this._scene=t,this.opaquePass.setScene(t),this.transmissionPass.setScene(t)}set sceneHelpers(t){this.helperPass.setScene(t)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(t){this.helperPassOnTop.setScene(t)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}get camera(){return this._camera}set camera(t){this._camera=t,this.opaquePass.setCamera(t),this.transmissionPass.setCamera(t),this.helperPass.setCamera(t),this.helperPassOnTop.setCamera(t)}setTransmissionPassEnabled(t){this.transmissionPass.enabled=t,this.opaquePass.hasTransmissionPass=t}disableHelpers(){this.helperPass.enabled=!1,this.helperClearPass.enabled=!1,this.helperPassOnTop.enabled=!1}enableHelpers(){this.helperPass.enabled=!0,this.helperClearPass.enabled=!0,this.helperPassOnTop.enabled=!0}_initSmaa(){let t=new fNt({preset:V1.ULTRA,edgeDetectionMode:z7.COLOR}),e=()=>{t.removeEventListener("load",e),this.dispatchEvent({type:"smaaloaded"})};t.addEventListener("load",e),t.edgeDetectionMaterial.predicationMode=RSe.DEPTH,t.edgeDetectionMaterial.edgeDetectionThreshold=.05,t.edgeDetectionMaterial.predicationThreshold=.002,t.edgeDetectionMaterial.predicationScale=1,this.smaaPass=new Lz(this.camera,t)}_initPasses(){var t,e;if((t=this.uvEffectPass)==null||t.dispose(),(e=this.effectPass)==null||e.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.postprocessingState.enabled){let n=[this.effects.get("pixelation")].reduce(Mce,[]);n.length>0&&(this.uvEffectPass=new Lz(this.camera,...n),this.effectComposer.addPass(this.uvEffectPass));let i=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(Mce,[]);i.length>0&&(this.effectPass=new Lz(this.camera,...i),this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.helperClearPass),this.effectComposer.addPass(this.helperPassOnTop),this.effectComposer.addPass(this.smaaPass)}_initCopyPass(){if(this._savePass)return;let t=new Ae;this.renderer.getDrawingBufferSize(t),this._rt=new _s(t.x,t.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:L2,wrapT:L2}),this._rt.samples=0,this._savePass=new yR(this._rt,!1),this._savePass.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(t){if(this._renderToScreen===t)return;let e=this.effectComposer;!e||(t===!0?(e.removePass(this._savePass),e.passes[e.passes.length-1].renderToScreen=!0,e.autoRenderToScreen=!0):(e.autoRenderToScreen=!1,e.passes[e.passes.length-1].renderToScreen=!1,this._savePass.renderToScreen=!1,this.postprocessingState.enabled||(this._savePass.needsDepthTexture=!0),e.addPass(this._savePass)),this._renderToScreen=t)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(t){let{enabled:e,...n}=t,i=!1;e!==this.postprocessingState.enabled&&(i=!0);for(let r of Object.entries(n)){let s=r[1],o=this.effects.get(r[0]);if(o){o.enabled!==s.enabled&&(i=!0),o.enabled=s.enabled;for(let[a,l]of Object.entries(s))a==="blendFunction"?o.blendFunction=CNt(l):o[a]=l}}this.postprocessingState=t,i&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(t,e,n,i){t instanceof Sn?(this.effectComposer.inputBuffer.scissor.set(t.x,t.y,t.z,t.w),this.effectComposer.outputBuffer.scissor.set(t.x,t.y,t.z,t.w)):(this.effectComposer.inputBuffer.scissor.set(t,e,n,i),this.effectComposer.outputBuffer.scissor.set(t,e,n,i));let r=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(r),this.effectComposer.outputBuffer.scissor.multiplyScalar(r),this.renderer.setScissor(t,e,n,i)}setScissorTest(t){this.effectComposer.inputBuffer.scissorTest=t,this.effectComposer.outputBuffer.scissorTest=t,this.renderer.setScissorTest(t)}setViewport(t,e,n,i){t instanceof Sn?(this.effectComposer.inputBuffer.viewport.copy(t),this.effectComposer.outputBuffer.viewport.copy(t)):(this.effectComposer.inputBuffer.viewport.set(t,e,n,i),this.effectComposer.outputBuffer.viewport.set(t,e,n,i))}resize(t,e,n){if(this.effectComposer.setSize(t,e,n),this._rt){let i=this.renderer.getPixelRatio();this._rt.setSize(t*i,e*i)}}dispose(){var t,e;(t=this.uvEffectPass)==null||t.dispose(),(e=this.effectPass)==null||e.dispose(),this.effectComposer.dispose()}},Ece=new Hs,PNt=class extends Xxe{constructor(t){super(t),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new Ae,this.pipeline=new TNt(this),this.overrideTransmission=t==null?void 0:t.overrideTransmission,this.autoClear=!1;let e=this.setPixelRatio.bind(this),n=this.setSize.bind(this),i=this.getContext();if(i&&"drawingBufferColorSpace"in i)try{i.drawingBufferColorSpace="display-p3"}catch(r){console.warn(r)}this.setPixelRatio=r=>{this._pixelRatio=r,e(r)},this.setSize=(r,s,o=!0)=>{var a,l,c;(this.viewportWidth!==r||this.viewportHeight!==s)&&(this.viewportWidth=r,this.viewportHeight=s,n(r,s,o),(a=this.normalRenderTarget)==null||a.setSize(r*this._pixelRatio,s*this._pixelRatio),(l=this.transmissionRenderTarget)==null||l.setSize(r*this._pixelRatio/2,s*this._pixelRatio/2),(c=this.transmissionDepthTarget)==null||c.setSize(r*this._pixelRatio/2,s*this._pixelRatio/2),this.pipeline.resize(r,s,o))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new _s(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{generateMipmaps:!0,minFilter:rw,magFilter:oi,wrapS:il,wrapT:il,depthBuffer:!1}),this.transmissionDepthTarget=new _s(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:hr,magFilter:hr,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new _s(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:hr,magFilter:hr,type:hm,depthTexture:new S$(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(t,e){this.normalRenderTarget&&(this.setClearColor(0),e.layers.enable(8),e.layers.disable(0),e.layers.disable(3),this.setRenderTarget(this.normalRenderTarget),this.clear(),e instanceof Da?mz.uniforms.depthContrast.value=(e.far-e.near)/1e4:mz.uniforms.depthContrast.value=1,t.overrideMaterial=mz,this.render(t,e),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=t.wireframeState?Hj:null,e.layers.enable(0),e.layers.enable(3))}renderSplineScene(t,e,n,i,r){this.setClearColor(t.bgColor,t.bgColor.a),n.penumbraSize.forEach((o,a)=>{rr.penumbraSize.value[a]=o}),rr.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?rr.resolution.value.set(this.resolution.x,this.resolution.y):rr.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),this.overrideNormal!==void 0?(rr.normalRenderTarget.value=this.overrideNormal,rr.normalRenderTargetDepth.value=Ece):t.needsNormal()&&(this.createNormalRenderTarget(),rr.normalRenderTarget.value=this.normalRenderTarget.texture,rr.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(t,e));let s=!1;if(this.overrideTransmission!==void 0)rr.transmissionRenderTarget.value=this.overrideTransmission,rr.transmissionRenderTargetDepth.value=Ece,this.pipeline.setTransmissionPassEnabled(!1);else{let o=t.needsTransmission();o&&(this.transmissionRenderTarget===void 0&&(s=!0),this.createTransmissionRenderTarget(),rr.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,rr.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(o)}e.layers.enable(3),e.layers.enable(8),this.pipeline.sceneHelpers=i,this.pipeline.sceneHelpersOnTop=r,this.pipeline.scene=t,this.pipeline.camera=e,s&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==t.postprocessing&&this.pipeline.updatePostprocessing(t.postprocessing),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),t.overrideMaterial=t.wireframeState?Hj:null,this.pipeline.render()}_currentDispose(){var t,e,n,i,r;this._superDispose(),this.pipeline.dispose(),(t=this.transmissionRenderTarget)==null||t.dispose(),(e=this.transmissionDepthTarget)==null||e.dispose(),(n=this.normalRenderTarget)==null||n.dispose(),(r=(i=this.normalRenderTarget)==null?void 0:i.depthTexture)==null||r.dispose()}},DNt=class{get sharedAssets(){return this.shared}constructor(t,e={}){this.shared=new zB(t.shared,e),this.scene=new s_(t.scene,this.sharedAssets),this.scene.switchActiveCamera(this.scene.activeCamera)}reset(t,e){this.scene.clearScene(),this.sharedAssets.reset(t.shared),this.scene.resetAfterClear(t.scene,this.sharedAssets)}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(t=>{t instanceof jc&&t.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},ONt=class{constructor({x:t=10,y:e=10}){this._startTime=0;let n=document.getElementById("spe-perfs");n?this.element=n:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${t}px`,this.element.style.top=`${e}px`}dispose(){var t;(t=this.element.parentElement)==null||t.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let t=performance.now()-this._startTime;this.element.innerHTML=t.toFixed(3)+" ms"}};function LNt(t){let e;if(t.index)for(let n=0;n<t.index.array.length;n+=3)e=t.index.array[n],t.index.array[n]=t.index.array[n+2],t.index.array[n+2]=e}function SM(t){return t instanceof Y2?"SubdivObject":t.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function RNt(t,e){let n={};return t.traverseEntity(i=>{var l;if(!i.visible||!(i instanceof _l)||i.type!=="Mesh"||Array.isArray(i.material)||i.states&&Object.keys(i.states).length)return;let r=i.parent;for(;r;){if(r instanceof _l&&i.states&&Object.keys(i.states).length)return;r=r.parent}let s=i.material.uuid,o=e.shared.materials[s];if(o){if(!yl.isMergable(o))return}else{let c=(l=e.scene.objects.get(i.uuid))==null?void 0:l.data;if(c&&"material"in c&&typeof c.material!="string"){if(!yl.isMergable(c.material))return;s=yl.getHash(c.material)}}n[s]||(n[s]={});let a=n[s][SM(i)];if(a){if(a.push(i),i.cloner)for(let c of i.cloner.children)a.push(c)}else if(n[s][SM(i)]=[i],i.cloner)for(let c of i.cloner.children)n[s][SM(i)].push(c)}),n}function INt(t){let e=0;return Object.values(t).forEach(n=>{Object.values(n).forEach(i=>{let r=i.length;r>e&&(e=r)})}),e}function BNt(t,e){let n=RNt(e,t),i=INt(n),r=new Array(i),s=0,o=new Array(i),a=0,l=new Array(i),c=0,h=new Array(i),u=0;for(let[d,f]of Object.entries(n))for(let p of Object.values(f)){if(a=0,c=0,p.forEach(g=>{g instanceof _l&&(o[a++]=g.geometry.clone(),l[c++]=g)}),c<2)continue;for(let g=0;g<c;g++)l[g].updateWorldMatrix(!0,!1),o[g].applyMatrix4(l[g].matrixWorld),l[g].matrixWorld.determinant()<0&&LNt(o[g]);let m=Ix(o.slice(0,a),!1);if(m){let g;switch(d){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),g=new cl(m,l[0].material);break}default:{g=new cl(m,l[0].material);break}}g.castShadow=l[0].castShadow,g.receiveShadow=l[0].receiveShadow,e.add(g);let v=y=>{u=0;for(let x of y)x.children&&v(x.children),x instanceof _l&&(Array.isArray(x.material)||n[x.material.uuid]&&n[x.material.uuid][SM(x)]&&n[x.material.uuid][SM(x)].length>1||(h[u++]=x));for(let x=0;x<u;x++)e.attach(h[x])};for(let y=0;y<c;y++){let x=l[y];v(x.children),r[s++]=x}}}for(let d=0;d<s;d++)r[d].removeFromParent()}var kNt=XE(V0t(),1),FNt=new Ae;function NNt(t){let e="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";t.endsWith(".spline")?console.warn(e+" The .spline files are only meant to be used by the Editor."):t.endsWith(".splinecode")||console.warn(e)}var zNt=class{constructor(t,{renderOnDemand:e=!0}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._lastTime=performance.now(),this.time=performance.now(),this.dt=0,this._skipRender=!1,this.renderOnDemand=!0,this.disposed=!1,this.requestRender=()=>{this._skipRender=!1},this.render=n=>{var i,r,s;!this._renderer||(this._rafId=requestAnimationFrame(this.render),this.time=n,this.dt=this.time-this._lastTime,this._lastTime=this.time,(i=this._perfs)==null||i.start(),!(this.renderOnDemand&&this._skipRender)&&(this._skipRender=((r=this._controls)==null?void 0:r.update(this.dt))??!0,this._eventManager&&(this._eventManager.isEnable||this._eventManager.activate(),this._eventManager.handlers.Follow.onAnimationFrameDamping(),this._eventManager.handlers.LookAt.onAnimationFrameDamping(),(this._eventManager.handlers.Start.hasVideoAction||this._eventManager.handlers.Basic.hasVideoAction||this._eventManager.handlers.Conditional.hasVideoAction)&&(this._skipRender=!1)),this._scene&&this._camera&&(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.renderSplineScene(this._scene,this._camera,this._sharedAssetsManager)),(s=this._perfs)==null||s.end()))},this._resize=$be(()=>{var n;!this._renderer||(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=FNt.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._camera&&((n=this._frameView)==null||n.updateCamera(),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()),this.requestRender())},10),this.canvas=t,this.renderOnDemand=e,window.location.search.includes("perfs")&&(this._perfs=new ONt({x:10,y:10})),F3t(t)}async load(t,e){NNt(t),this.disposed=!1;let n=await(await fetch(t,e)).arrayBuffer();await this.start(n)}async start(t,{interactive:e=!0}={}){var r;if(this.disposed)return;let n=await Xkt(t);this._data=n,n.version&&(0,kNt.default)(n.version,"0.9.295")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([Cle(n)&&mLt(),ERt(n)&&dLt(),n.scene.environment.usePhysics&&t3t(),_le(n)&&pRt()].filter(Boolean)),this._eventManager&&this._eventManager.deactivate(),this._controls&&this._controls.dispose(),(r=this._scene)==null||r.dispose();let i=new DNt(n);if(this._scene=i.scene,this._sharedAssetsManager=i.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let s=performance.now();BNt(n,i.scene);let o=performance.now();console.log("Merged geometries in ",o-s," ms")}if(Cle(n)&&this._scene.traverse(s=>{ym(s)&&s.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var s;this.requestRender(),(s=this._scene)==null||s.traverse(o=>{o instanceof fR&&o.pendingMediaLoad&&o.update()})}),_le(n)&&Akt(n)){let s=Object.keys(n.shared.fonts).map(o=>this._sharedAssetsManager.getFont(o)).map(o=>o.loadingPromise);await Promise.all(s)}if(this._scene.rewriteEventsBeforeGoToPlayMode(),MSe(n.scene,this._scene,this._sharedAssetsManager),this._renderer||(this._renderer=new PNt({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this.requestRender),this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=n.scene.environment.ambientLight.softShadows?v$:Txe,fIt(n.scene.environment.ambientLight.softShadowQuality)),this._frameView)this._frameView.setCamera(this._camera);else{let s=Object.values(n.frames)[0];s.preset==="fullscreen"?(this._viewportMode=1,this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=s.size[0],this._viewportHeight=s.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new Kkt(this._renderer,this._camera,new Ae(this._viewportWidth,this._viewportHeight),new Ae(window.innerWidth,window.innerHeight))}if(e&&(this._scene.updateMatrixWorld(!0),this._controls=new Mkt(n,this._scene,this._renderer,this.requestRender,this._sharedAssetsManager,!0),this._eventManager=new Ykt(this._renderer,this._scene,this._camera,n.scene.publish.stopRaycast,n.scene.publish.preventScroll,n.scene.publish.preventTouchScroll,n.scene.publish.hideCursor,this._sharedAssetsManager,this.requestRender,this._controls,!0)),this._resize(),!this._resizeObserver&&this.canvas.parentElement){let s=!0;this._resizeObserver=new ResizeObserver(()=>{if(s){s=!1;return}this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._resize()}),this._resizeObserver.observe(this.canvas.parentElement)}this._rafId===void 0?this.render(performance.now()):this.requestRender()}findObjectById(t){var n;let e=(n=this._scene)==null?void 0:n.getObjectByProperty("uuid",t);return this._createProxyObject(e)}findObjectByName(t){var n;let e=(n=this._scene)==null?void 0:n.getObjectByName(t);return this._createProxyObject(e)}getSplineEvents(){var t;return((t=this._eventManager)==null?void 0:t.handlers.Spline).splineEvents}emitEvent(t,e){var n;(n=this.findObjectById(e)||this.findObjectByName(e))==null||n.emitEvent(t)}emitEventReverse(t,e){var n;(n=this.findObjectById(e)||this.findObjectByName(e))==null||n.emitEventReverse(t)}addEventListener(t,e){this.canvas.addEventListener(t,e)}removeEventListener(t,e){this.canvas.removeEventListener(t,e)}setZoom(t){var e,n;((e=this._controls)==null?void 0:e.orbitControls)instanceof OSe&&((n=this._controls)==null||n.orbitControls.zoomOut(t))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(t,e){this._viewportWidth=t,this._viewportHeight=e,this._viewportMode=2,this._resize()}setBackgroundColor(t){var o;let{r:e,g:n,b:i,a:r}={r:0,g:0,b:0,a:1},s=new Pa(e,n,i,r);try{s.setStyle(t)}catch{console.error("This is not a valid css color",t)}(o=this._scene)==null||o.setBackgroundColor(s),this.requestRender()}dispose(){var t,e,n,i,r,s;this.disposed=!0,(t=this._eventManager)==null||t.deactivate(),(e=this._scene)==null||e.dispose(),(n=this._sharedAssetsManager)==null||n.dispose(),this._rafId&&cancelAnimationFrame(this._rafId),this._proxyObjectCache.forEach(o=>{ooe.unsubscribe(o)}),(i=this._renderer)==null||i.dispose(),(r=this._sharedAssetsManager)==null||r.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(s=this._controls)==null||s.dispose(),N3t(this.canvas)}get data(){return this._data}_createProxyObject(t){if(t==null)return;if(this._proxyObjectCache.has(t.uuid))return this._proxyObjectCache.get(t.uuid);let e={name:t.name,uuid:t.uuid,visible:t.visible,intensity:t.intensity,position:t.position,rotation:t.rotation,scale:t.scale,emitEvent(i){t.dispatchEvent({type:"userEvent",eventName:i})},emitEventReverse(i){t.dispatchEvent({type:"userEvent",eventName:i,reverse:!0})}},n=ooe(e,(i,r)=>{var s;typeof t[i]!="object"&&((s=Object.getOwnPropertyDescriptor(t,i))!=null&&s.writable)&&(t[i]=r),this.requestRender(),t.updateMatrix()});return this._proxyObjectCache.set(t.uuid,n),n}},iD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tV={},UNt={get exports(){return tV},set exports(t){tV=t}},sA={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cce;function GNt(){if(Cce)return sA;Cce=1;var t=ue,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var h,u={},d=null,f=null;c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),l.ref!==void 0&&(f=l.ref);for(h in l)i.call(l,h)&&!s.hasOwnProperty(h)&&(u[h]=l[h]);if(a&&a.defaultProps)for(h in l=a.defaultProps,l)u[h]===void 0&&(u[h]=l[h]);return{$$typeof:e,type:a,key:d,ref:f,props:u,_owner:r.current}}return sA.Fragment=n,sA.jsx=o,sA.jsxs=o,sA}(function(t){t.exports=GNt()})(UNt);const nV=tV.jsx;var HNt="Expected a function",Tce=0/0,jNt="[object Symbol]",VNt=/^\s+|\s+$/g,WNt=/^[-+]0x[0-9a-f]+$/i,$Nt=/^0b[01]+$/i,qNt=/^0o[0-7]+$/i,XNt=parseInt,YNt=typeof iD=="object"&&iD&&iD.Object===Object&&iD,KNt=typeof self=="object"&&self&&self.Object===Object&&self,JNt=YNt||KNt||Function("return this")(),ZNt=Object.prototype,QNt=ZNt.toString,e4t=Math.max,t4t=Math.min,Bz=function(){return JNt.Date.now()};function n4t(t,e,n){var i,r,s,o,a,l,c=0,h=!1,u=!1,d=!0;if(typeof t!="function")throw new TypeError(HNt);e=Pce(e)||0,iV(n)&&(h=!!n.leading,u="maxWait"in n,s=u?e4t(Pce(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d);function f(A){var E=i,M=r;return i=r=void 0,c=A,o=t.apply(M,E),o}function p(A){return c=A,a=setTimeout(v,e),h?f(A):o}function m(A){var E=A-l,M=A-c,C=e-E;return u?t4t(C,s-M):C}function g(A){var E=A-l,M=A-c;return l===void 0||E>=e||E<0||u&&M>=s}function v(){var A=Bz();if(g(A))return y(A);a=setTimeout(v,m(A))}function y(A){return a=void 0,d&&i?f(A):(i=r=void 0,o)}function x(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function b(){return a===void 0?o:y(Bz())}function S(){var A=Bz(),E=g(A);if(i=arguments,r=this,l=A,E){if(a===void 0)return p(l);if(u)return a=setTimeout(v,e),f(l)}return a===void 0&&(a=setTimeout(v,e)),o}return S.cancel=x,S.flush=b,S}function iV(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function i4t(t){return!!t&&typeof t=="object"}function r4t(t){return typeof t=="symbol"||i4t(t)&&QNt.call(t)==jNt}function Pce(t){if(typeof t=="number")return t;if(r4t(t))return Tce;if(iV(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=iV(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(VNt,"");var n=$Nt.test(t);return n||qNt.test(t)?XNt(t.slice(2),n?2:8):WNt.test(t)?Tce:+t}var s4t=n4t;function o4t(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}const a4t=[],l4t={width:"100%",height:"100%"},c4t=W.forwardRef(function({className:t,children:e,debounceTime:n=300,ignoreDimensions:i=a4t,parentSizeStyles:r,enableDebounceLeadingCall:s=!0,resizeObserverPolyfill:o,...a},l){const c=W.useRef(null),h=W.useRef(0),[u,d]=W.useState({width:0,height:0,top:0,left:0}),f=W.useMemo(()=>{const p=Array.isArray(i)?i:[i];return s4t(m=>{d(g=>Object.keys(g).filter(v=>g[v]!==m[v]).every(v=>p.includes(v))?g:m)},n,{leading:s})},[n,s,i]);return W.useEffect(()=>{const p=o||window.ResizeObserver,m=new p(g=>{g.forEach(v=>{const{left:y,top:x,width:b,height:S}=(v==null?void 0:v.contentRect)??{};h.current=window.requestAnimationFrame(()=>{f({width:b,height:S,top:x,left:y})})})});return c.current&&m.observe(c.current),()=>{window.cancelAnimationFrame(h.current),m.disconnect(),f.cancel()}},[f,o]),nV("div",{style:{...l4t,...r},ref:o4t([l,c]),className:t,...a,children:e({...u,ref:c.current,resize:f})})}),u4t=W.forwardRef(({scene:t,style:e,onMouseDown:n,onMouseUp:i,onMouseHover:r,onKeyDown:s,onKeyUp:o,onStart:a,onLookAt:l,onFollow:c,onWheel:h,onLoad:u,renderOnDemand:d=!0,...f},p)=>{const m=W.useRef(null),[g,v]=W.useState(!0);return W.useEffect(()=>{v(!0);let y;const x=[{name:"mouseDown",cb:n},{name:"mouseUp",cb:i},{name:"mouseHover",cb:r},{name:"keyDown",cb:s},{name:"keyUp",cb:o},{name:"start",cb:a},{name:"lookAt",cb:l},{name:"follow",cb:c},{name:"scroll",cb:h}];if(m.current){y=new zNt(m.current,{renderOnDemand:d});async function b(){await y.load(t);for(let S of x)S.cb&&y.addEventListener(S.name,S.cb);v(!1),u==null||u(y)}b()}return()=>{for(let b of x)b.cb&&y.removeEventListener(b.name,b.cb);y.dispose()}},[t]),nV(c4t,{ref:p,parentSizeStyles:e,debounceTime:50,...f,children:()=>nV("canvas",{ref:m,style:{display:g?"none":"block"}})})});function h4t({mustBeMetaMask:t=!1,silent:e=!1,timeout:n=3e3}={}){r();let i=!1;return new Promise(s=>{window.ethereum?o():(window.addEventListener("ethereum#initialized",o,{once:!0}),setTimeout(()=>{o()},n));function o(){if(i)return;i=!0,window.removeEventListener("ethereum#initialized",o);const{ethereum:a}=window;a&&(!t||a.isMetaMask)?s(a):(!e&&console.error("@metamask/detect-provider:",t&&a?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum."),s(null))}});function r(){if(typeof t!="boolean")throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if(typeof e!="boolean")throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if(typeof n!="number")throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}}var Dce=h4t;const d4t=({handleCorrect:t})=>{const[e,n]=W.useState(""),[i,r]=W.useState(""),[s,o]=W.useState(!1),[a,l]=W.useState(!1);W.useEffect(()=>{a&&t()},[a]);const c=async()=>{try{const d=await Dce();if(d){const f=await d.request({method:"eth_requestAccounts"});n(f[0]),o(!0)}else console.log("Please install MetaMask")}catch(d){console.log(d)}},h=async d=>{try{await ethereum.request({method:"wallet_addEthereumChain",params:[{...d}]})}catch(f){console.log(f)}},u=async()=>{try{await c();const d=await Dce();if(d){const f=await d.request({method:"net_version"});if(r(f),console.log(f),f!==80001){console.log("Please switch to the Goerli mainnet");const p={chainId:`0x${5 .toString(16)}`,chainName:"Goerli",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:["https://rpc.ankr.com/eth_goerli"],blockExplorerUrls:["https://goerli.etherscan.io"]};await h(p),await ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:p.chainId}]}),r(p.chainId),l(!0)}}else console.log("Please install MetaMask")}catch(d){console.log(d)}};return et("button",{type:"button",className:"text-gray-900 bg-white hover:bg-gray-100 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-gray-600 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700",onClick:()=>u(),children:[et("svg",{className:"w-6 h-5 mr-2 -ml-1",viewBox:"0 0 2405 2501",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[" ",et("g",{clipPath:"url(#clip0_1512_1323)",children:[" ",ne("path",{d:"M2278.79 1730.86L2133.62 2221.69L1848.64 2143.76L2278.79 1730.86Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"5.94955"})," ",ne("path",{d:"M1848.64 2143.76L2123.51 1767.15L2278.79 1730.86L1848.64 2143.76Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"5.94955"})," ",ne("path",{d:"M2065.2 1360.79L2278.79 1730.86L2123.51 1767.15L2065.2 1360.79ZM2065.2 1360.79L2202.64 1265.6L2278.79 1730.86L2065.2 1360.79Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"5.94955"})," ",ne("path",{d:"M1890.29 1081.17L2285.34 919.338L2265.7 1007.99L1890.29 1081.17ZM2253.21 1114.48L1890.29 1081.17L2265.7 1007.99L2253.21 1114.48Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M2253.21 1114.48L2202.64 1265.6L1890.29 1081.17L2253.21 1114.48ZM2332.34 956.82L2265.7 1007.99L2285.34 919.338L2332.34 956.82ZM2253.21 1114.48L2265.7 1007.99L2318.65 1052.01L2253.21 1114.48Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M1542.24 2024.17L1641 2055.7L1848.64 2143.75L1542.24 2024.17Z",fill:"#E2761B",stroke:"#E2761B",strokeWidth:"5.94955"})," ",ne("path",{d:"M2202.64 1265.6L2253.21 1114.48L2296.64 1147.8L2202.64 1265.6ZM2202.64 1265.6L1792.71 1130.55L1890.29 1081.17L2202.64 1265.6Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M1987.86 617.696L1890.29 1081.17L1792.71 1130.55L1987.86 617.696Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M2285.34 919.338L1890.29 1081.17L1987.86 617.696L2285.34 919.338Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M1987.86 617.696L2400.16 570.1L2285.34 919.338L1987.86 617.696Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M2202.64 1265.6L2065.2 1360.79L1792.71 1130.55L2202.64 1265.6Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"5.94955"})," ",ne("path",{d:"M2382.31 236.33L2400.16 570.1L1987.86 617.696L2382.31 236.33Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M2382.31 236.33L1558.3 835.45L1547.59 429.095L2382.31 236.33Z",fill:"#E2761B",stroke:"#E2761B",strokeWidth:"5.94955"})," ",ne("path",{d:"M934.789 380.309L1547.59 429.095L1558.3 835.449L934.789 380.309Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"5.94955"})," ",ne("path",{d:"M1792.71 1130.55L1558.3 835.449L1987.86 617.696L1792.71 1130.55Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M1792.71 1130.55L2065.2 1360.79L1682.65 1403.04L1792.71 1130.55Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"5.94955"})," ",ne("path",{d:"M1682.65 1403.04L1558.3 835.449L1792.71 1130.55L1682.65 1403.04Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"5.94955"})," ",ne("path",{d:"M1987.86 617.696L1558.3 835.45L2382.31 236.33L1987.86 617.696Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M940.144 2134.24L1134.69 2337.11L869.939 2096.16L940.144 2134.24Z",fill:"#C0AD9E",stroke:"#C0AD9E",strokeWidth:"5.94955"})," ",ne("path",{d:"M1848.64 2143.75L1940.86 1793.33L2123.51 1767.15L1848.64 2143.75Z",fill:"#CD6116",stroke:"#CD6116",strokeWidth:"5.94955"})," ",ne("path",{d:"M151.234 1157.92L487.978 803.917L194.666 1115.67L151.234 1157.92Z",fill:"#E2761B",stroke:"#E2761B",strokeWidth:"5.94955"})," ",ne("path",{d:"M2123.51 1767.15L1940.86 1793.33L2065.2 1360.79L2123.51 1767.15ZM1558.3 835.449L1230.48 824.74L934.789 380.309L1558.3 835.449Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"5.94955"})," ",ne("path",{d:"M2065.2 1360.79L1940.86 1793.33L1930.74 1582.12L2065.2 1360.79Z",fill:"#E4751F",stroke:"#E4751F",strokeWidth:"5.94955"})," ",ne("path",{d:"M1682.65 1403.04L2065.2 1360.79L1930.74 1582.12L1682.65 1403.04Z",fill:"#CD6116",stroke:"#CD6116",strokeWidth:"5.94955"})," ",ne("path",{d:"M1230.48 824.74L1558.3 835.449L1682.65 1403.04L1230.48 824.74Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"5.94955"})," ",ne("path",{d:"M1230.48 824.74L345.784 6.08252L934.79 380.309L1230.48 824.74ZM934.195 2258.58L165.513 2496.56L12.0146 1910.53L934.195 2258.58Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"5.94955"})," ",ne("path",{d:"M265.465 1304.27L555.803 1076.41L799.14 1132.93L265.465 1304.27Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M799.139 1132.93L555.803 1076.41L686.098 538.567L799.139 1132.93Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M194.666 1115.67L555.803 1076.41L265.465 1304.27L194.666 1115.67Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M1930.74 1582.12L1780.81 1506.56L1682.65 1403.04L1930.74 1582.12Z",fill:"#CD6116",stroke:"#CD6116",strokeWidth:"5.94955"})," ",ne("path",{d:"M194.666 1115.67L169.083 980.618L555.803 1076.41L194.666 1115.67Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M1749.88 1676.72L1780.81 1506.56L1930.74 1582.12L1749.88 1676.72Z",fill:"#233447",stroke:"#233447",strokeWidth:"5.94955"})," ",ne("path",{d:"M1940.86 1793.33L1749.88 1676.72L1930.74 1582.12L1940.86 1793.33Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"5.94955"})," ",ne("path",{d:"M555.803 1076.41L169.082 980.618L137.55 866.982L555.803 1076.41ZM686.098 538.567L555.803 1076.41L137.55 866.982L686.098 538.567ZM686.098 538.567L1230.48 824.74L799.139 1132.93L686.098 538.567Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M799.14 1132.93L1230.48 824.74L1422.65 1411.96L799.14 1132.93ZM1422.65 1411.96L826.508 1399.47L799.14 1132.93L1422.65 1411.96Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"5.94955"})," ",ne("path",{d:"M265.465 1304.27L799.14 1132.93L826.508 1399.47L265.465 1304.27ZM1682.65 1403.04L1422.65 1411.96L1230.48 824.74L1682.65 1403.04Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"5.94955"})," ",ne("path",{d:"M1780.81 1506.56L1749.88 1676.72L1682.65 1403.04L1780.81 1506.56Z",fill:"#CD6116",stroke:"#CD6116",strokeWidth:"5.94955"})," ",ne("path",{d:"M345.784 6.08252L1230.48 824.74L686.098 538.567L345.784 6.08252Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M12.0146 1910.53L758.088 1879.59L934.195 2258.58L12.0146 1910.53Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"5.94955"})," ",ne("path",{d:"M934.194 2258.58L758.088 1879.59L1124.58 1861.75L934.194 2258.58Z",fill:"#CD6116",stroke:"#CD6116",strokeWidth:"5.94955"})," ",ne("path",{d:"M1749.88 1676.72L1940.86 1793.33L2046.16 2041.42L1749.88 1676.72ZM826.508 1399.47L12.0146 1910.53L265.465 1304.27L826.508 1399.47ZM758.088 1879.59L12.0146 1910.53L826.508 1399.47L758.088 1879.59ZM1682.65 1403.04L1731.43 1580.33L1495.83 1594.02L1682.65 1403.04ZM1495.83 1594.02L1422.65 1411.96L1682.65 1403.04L1495.83 1594.02Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"5.94955"})," ",ne("path",{d:"M1134.69 2337.11L934.194 2258.58L1631.48 2375.79L1134.69 2337.11Z",fill:"#C0AD9E",stroke:"#C0AD9E",strokeWidth:"5.94955"})," ",ne("path",{d:"M265.465 1304.27L151.234 1157.91L194.666 1115.67L265.465 1304.27Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M1710.61 2288.92L1631.48 2375.79L934.194 2258.58L1710.61 2288.92Z",fill:"#D7C1B3",stroke:"#D7C1B3",strokeWidth:"5.94955"})," ",ne("path",{d:"M1748.09 2075.93L934.194 2258.58L1124.58 1861.75L1748.09 2075.93Z",fill:"#E4761B",stroke:"#E4761B",strokeWidth:"5.94955"})," ",ne("path",{d:"M934.194 2258.58L1748.09 2075.93L1710.61 2288.92L934.194 2258.58Z",fill:"#D7C1B3",stroke:"#D7C1B3",strokeWidth:"5.94955"})," ",ne("path",{d:"M137.55 866.982L110.777 409.462L686.098 538.567L137.55 866.982ZM194.665 1115.67L115.536 1035.35L169.082 980.618L194.665 1115.67Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M1289.38 1529.76L1422.65 1411.96L1403.61 1699.92L1289.38 1529.76Z",fill:"#CD6116",stroke:"#CD6116",strokeWidth:"5.94955"})," ",ne("path",{d:"M1422.65 1411.96L1289.38 1529.76L1095.43 1630.31L1422.65 1411.96Z",fill:"#CD6116",stroke:"#CD6116",strokeWidth:"5.94955"})," ",ne("path",{d:"M2046.16 2041.42L2009.87 2014.65L1749.88 1676.72L2046.16 2041.42Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"5.94955"})," ",ne("path",{d:"M1095.43 1630.31L826.508 1399.47L1422.65 1411.96L1095.43 1630.31Z",fill:"#CD6116",stroke:"#CD6116",strokeWidth:"5.94955"})," ",ne("path",{d:"M1403.61 1699.92L1422.65 1411.96L1495.83 1594.02L1403.61 1699.92Z",fill:"#E4751F",stroke:"#E4751F",strokeWidth:"5.94955"})," ",ne("path",{d:"M89.3589 912.199L137.55 866.982L169.083 980.618L89.3589 912.199Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M1403.61 1699.92L1095.43 1630.31L1289.38 1529.76L1403.61 1699.92Z",fill:"#233447",stroke:"#233447",strokeWidth:"5.94955"})," ",ne("path",{d:"M686.098 538.567L110.777 409.462L345.784 6.08252L686.098 538.567Z",fill:"#763D16",stroke:"#763D16",strokeWidth:"5.94955"})," ",ne("path",{d:"M1631.48 2375.79L1664.2 2465.03L1134.69 2337.12L1631.48 2375.79Z",fill:"#C0AD9E",stroke:"#C0AD9E",strokeWidth:"5.94955"})," ",ne("path",{d:"M1124.58 1861.75L1095.43 1630.31L1403.61 1699.92L1124.58 1861.75Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"5.94955"})," ",ne("path",{d:"M826.508 1399.47L1095.43 1630.31L1124.58 1861.75L826.508 1399.47Z",fill:"#E4751F",stroke:"#E4751F",strokeWidth:"5.94955"})," ",ne("path",{d:"M1495.83 1594.02L1731.43 1580.33L2009.87 2014.65L1495.83 1594.02ZM826.508 1399.47L1124.58 1861.75L758.088 1879.59L826.508 1399.47Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"5.94955"})," ",ne("path",{d:"M1495.83 1594.02L1788.55 2039.64L1403.61 1699.92L1495.83 1594.02Z",fill:"#E4751F",stroke:"#E4751F",strokeWidth:"5.94955"})," ",ne("path",{d:"M1403.61 1699.92L1788.55 2039.64L1748.09 2075.93L1403.61 1699.92Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"5.94955"})," ",ne("path",{d:"M1748.09 2075.93L1124.58 1861.75L1403.61 1699.92L1748.09 2075.93ZM2009.87 2014.65L1788.55 2039.64L1495.83 1594.02L2009.87 2014.65Z",fill:"#F6851B",stroke:"#F6851B",strokeWidth:"5.94955"})," ",ne("path",{d:"M2068.18 2224.07L1972.99 2415.05L1664.2 2465.03L2068.18 2224.07ZM1664.2 2465.03L1631.48 2375.79L1710.61 2288.92L1664.2 2465.03Z",fill:"#C0AD9E",stroke:"#C0AD9E",strokeWidth:"5.94955"})," ",ne("path",{d:"M1710.61 2288.92L1768.92 2265.72L1664.2 2465.03L1710.61 2288.92ZM1664.2 2465.03L1768.92 2265.72L2068.18 2224.07L1664.2 2465.03Z",fill:"#C0AD9E",stroke:"#C0AD9E",strokeWidth:"5.94955"})," ",ne("path",{d:"M2009.87 2014.65L2083.05 2059.27L1860.54 2086.04L2009.87 2014.65Z",fill:"#161616",stroke:"#161616",strokeWidth:"5.94955"})," ",ne("path",{d:"M1860.54 2086.04L1788.55 2039.64L2009.87 2014.65L1860.54 2086.04ZM1834.96 2121.15L2105.66 2088.42L2068.18 2224.07L1834.96 2121.15Z",fill:"#161616",stroke:"#161616",strokeWidth:"5.94955"})," ",ne("path",{d:"M2068.18 2224.07L1768.92 2265.72L1834.96 2121.15L2068.18 2224.07ZM1768.92 2265.72L1710.61 2288.92L1748.09 2075.93L1768.92 2265.72ZM1748.09 2075.93L1788.55 2039.64L1860.54 2086.04L1748.09 2075.93ZM2083.05 2059.27L2105.66 2088.42L1834.96 2121.15L2083.05 2059.27Z",fill:"#161616",stroke:"#161616",strokeWidth:"5.94955"})," ",ne("path",{d:"M1834.96 2121.15L1860.54 2086.04L2083.05 2059.27L1834.96 2121.15ZM1748.09 2075.93L1834.96 2121.15L1768.92 2265.72L1748.09 2075.93Z",fill:"#161616",stroke:"#161616",strokeWidth:"5.94955"})," ",ne("path",{d:"M1860.54 2086.04L1834.96 2121.15L1748.09 2075.93L1860.54 2086.04Z",fill:"#161616",stroke:"#161616",strokeWidth:"5.94955"})," "]})," ",et("defs",{children:[" ",et("clipPath",{id:"clip0_1512_1323",children:[" ",ne("rect",{width:"2404",height:"2500",fill:"white",transform:"translate(0.519043 0.132812)"})," "]})," "]})," "]}),s?a?e.substring(0,5)+"..."+e.substring(e.length-5):"Wrong Network":"Connect Wallet"]})},f4t=()=>{const t=Ml(Gt),{enqueueSnackbar:e}=oW();let n=ng();const[i,r]=W.useState(window.innerWidth),[s,o]=W.useState(!1);W.useEffect(()=>{const v=()=>{r(window.innerWidth)};return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const[a,l]=W.useState(!1),c=()=>{l(!a)},h=()=>{Gt.page="otherGift",n("/auction_house_project/otherGift")},u=()=>{Gt.page="home",n("/auction_house_project/home")},d=()=>{Gt.page="auction",n("/auction_house_project/auction")},f=()=>{Gt.page="bidedItem",n("/auction_house_project/bidedItem")},p=v=>{const y=v.target,x=y.value,b=y.name;Gt.fakeUser={...Gt.fakeUser,[b]:x}},m=(v={})=>{const{nodes:y,materials:x}=I0t("https://prod.spline.design/guuXvrnmY9qTKAKk/scene.splinecode");return console.log(y,x),ne(u4t,{scene:"https://prod.spline.design/guuXvrnmY9qTKAKk/scene.splinecode",className:"w-fit h-fit"})},g=()=>{o(!0)};return et(jn.section,{className:"signin",...HO,children:[ne(jn.div,{className:"absolute z-20 top-5 left-5",...pl,children:ne(bn,{type:"outline",title:ne(bw,{size:18}),handleClick:()=>u(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm"})}),ne(jn.div,{className:"absolute z-20 top-5 right-5",...pl,children:i<=960?et(Qo,{children:[ne("div",{className:"flex flex-row justify-end",children:ne("button",{className:" items-end  bg-[#06B6D4] text-dark rounded-lg font-bold text-sm px-4 py-2.5 mr-2",onClick:()=>c(),children:ne(vE,{size:24})})}),ne(zb,{in:a,timeout:"auto",unmountOnExit:!0,className:"",children:et("div",{className:"mt-5 grid grid-cols-1",children:[ne(bn,{type:"filled",title:"All Products",handleClick:()=>h(),customStyles:"w-full px-4 py-2.5 font-bold text-sm mt-2"}),et("button",{className:"relative bg-[#06B6D4] text-dark rounded-lg font-bold text-sm px-4 py-2.5 mt-2",onClick:()=>f(),children:[ne("span",{className:"inline-flex rounded-full bg-red-500 text-dark w-4 h-4 absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2"}),"Acquired Item"]}),ne(bn,{type:"filled",title:"Auction",handleClick:()=>d(),customStyles:"w-full px-4 py-2.5 font-bold text-sm mt-2"})]})})]}):et(Qo,{children:[ne(bn,{type:"filled",title:"All Products",handleClick:()=>h(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm mr-2"}),et("button",{className:"relative bg-[#06B6D4] text-dark rounded-lg font-bold text-sm px-4 py-2.5 mr-2",onClick:()=>f(),children:[ne("span",{className:"inline-flex rounded-full bg-red-500 text-dark w-4 h-4 absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2"}),"Acquired Item"]}),ne(bn,{type:"filled",title:"Auction",handleClick:()=>d(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm"})]})}),ne(jn.div,{className:"z-10 absolute w-auto flex flex-col justify-center items-center py-4 gap-4 h-screen ml-5",children:et("div",{className:"bg-white rounded-lg shadow-md p-6",children:[ne("div",{className:"text-2xl font-bold mb-4",children:t.fakeUser.username}),et("div",{className:"flex flex-col md:flex-row mb-4",children:[ne("div",{className:"md:w-1/3 font-bold",children:"Contact Number:"}),ne("div",{className:"md:w-2/3",children:ne("input",{type:"text",name:"contactNumber",value:t.fakeUser.contactNumber,onChange:p,className:"w-full border rounded-lg p-2"})})]}),et("div",{className:"flex flex-col md:flex-row mb-4",children:[ne("div",{className:"md:w-1/3 font-bold",children:"Contact Email:"}),ne("div",{className:"md:w-2/3",children:ne("input",{type:"text",name:"contactEmail",value:t.fakeUser.contactEmail,onChange:p,className:"w-full border rounded-lg p-2"})})]}),et("div",{className:"flex flex-col md:flex-row mb-4",children:[ne("div",{className:"md:w-1/3 font-bold",children:"Name:"}),ne("div",{className:"md:w-2/3",children:ne("input",{type:"text",name:"name",value:t.fakeUser.name,onChange:p,className:"w-full border rounded-lg p-2"})})]}),et("div",{className:"flex flex-col md:flex-row mb-4",children:[ne("div",{className:"md:w-1/3 font-bold",children:"Address:"}),ne("div",{className:"md:w-2/3",children:ne("textarea",{name:"address",value:t.fakeUser.address,onChange:p,className:"w-full border rounded-lg p-2",rows:"5"})})]}),ne("div",{className:"flex justify-end",children:ne("button",{className:"bg-[#06B6D4] text-dark rounded-lg font-bold text-sm px-4 py-2.5",onClick:()=>e("Account updated",{variant:"success"}),children:"Save"})})]})}),ne(jn.div,{...pl,children:ne("div",{className:"bg-white rounded-lg shadow-md p-6 z-10 absolute w-[700px] h-[700px] right-10 top-1/2 transform -translate-y-1/2",children:et("div",{className:"flex flex-col justify-center items-center py-4 gap-4 h-[550px] mb-4",children:[ne(d4t,{handleCorrect:()=>g()}),s?ne("button",{className:"block mx-auto px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white font-bold rounded-md focus:outline-none focus:shadow-outline",children:"Mint"}):ne(Qo,{}),ne("div",{className:"w-[500px] h-[500px]",children:m()})]})})})]})},Jo={id:99,title:"Ship in Bottle",description:"Ship-in-a-bottle is a model enclosed in glass, featuring a ship with masts, rigging, and a deckhouse, often made of wood. It's sealed with a cork or stopper.",startPrice:100,price:200,endDate:"2023-04-15T00:00:00.000Z",path:"pirate_ship_in_bottle.glb",rotation:[0,1,0],position:[0,0,0],scale:[1,1,1],normalSize:{homePosition:[-50,0,360],auctionPosition:[70,0,360],signPosition:[0,-150,950],otherPosition:[10,-35,450],bidPosition:[.3,-.5,10]},midSize:{homePosition:[-10,30,360],auctionPosition:[70,0,360],signPosition:[0,0,360],otherPosition:[0,0,360],bidPosition:[.3,-.5,10]},phoneSize:{homePosition:[0,120,750],auctionPosition:[0,-60,620],signPosition:[0,-120,950],otherPosition:[0,-30,700],bidPosition:[.3,-.5,10]}},AM={id:98,title:"Shiba Toy",description:"Ship-in-a-bottle is a model enclosed in glass, featuring a ship with masts, rigging, and a deckhouse, often made of wood. It's sealed with a cork or stopper.",startPrice:100,price:200,endDate:"2023-04-15T00:00:00.000Z",path:"shiba.glb",rotation:[.3,-.5,0],position:[0,0,0],scale:[1,1,1],normalSize:{homePosition:[-50,0,360],auctionPosition:[70,0,360],signPosition:[0,-150,950],otherPosition:[.3,-.5,10],bidPosition:[.3,-.5,10]},midSize:{homePosition:[-10,30,360],auctionPosition:[70,0,360],signPosition:[0,0,360],otherPosition:[0,0,360]},phoneSize:{homePosition:[0,80,550],auctionPosition:[0,0,620],signPosition:[0,-150,950],otherPosition:[0,-.4,10],bidPosition:[.3,-.5,10]}},MM={id:97,title:"Abstract Ball",description:"Ship-in-a-bottle is a model enclosed in glass, featuring a ship with masts, rigging, and a deckhouse, often made of wood. It's sealed with a cork or stopper.",startPrice:100,price:200,endDate:"2023-04-15T00:00:00.000Z",path:"abstract_ball.glb",rotation:[0,1,0],position:[0,0,0],scale:[1,1,1],normalSize:{homePosition:[-50,0,360],auctionPosition:[70,0,360],signPosition:[0,-150,950],otherPosition:[1,-2.5,30]},midSize:{homePosition:[-10,30,360],auctionPosition:[70,0,360],signPosition:[0,0,360],otherPosition:[0,0,360]},phoneSize:{homePosition:[0,80,550],auctionPosition:[0,0,620],signPosition:[0,-150,0],otherPosition:[0,-1,25]}},EM={id:96,title:"Cat Cup",description:"Ship-in-a-bottle is a model enclosed in glass, featuring a ship with masts, rigging, and a deckhouse, often made of wood. It's sealed with a cork or stopper.",startPrice:100,price:200,endDate:"2023-04-15T00:00:00.000Z",path:"kawaii_skeleton_cat_cup.glb",rotation:[.4,1,0],position:[0,0,0],scale:[1,1,1],normalSize:{homePosition:[-50,0,360],auctionPosition:[70,0,360],signPosition:[0,-150,950],otherPosition:[1,-2,30]},midSize:{homePosition:[-10,30,360],auctionPosition:[70,0,360],signPosition:[0,0,360],otherPosition:[0,0,360]},phoneSize:{homePosition:[0,80,550],auctionPosition:[0,0,620],signPosition:[0,-150,950],otherPosition:[0,-1,35]}},CM={id:95,title:"Island Gift",description:"Ship-in-a-bottle is a model enclosed in glass, featuring a ship with masts, rigging, and a deckhouse, often made of wood. It's sealed with a cork or stopper.",startPrice:100,price:200,endDate:"2023-04-15T00:00:00.000Z",path:"low_poly_medieval_island.glb",rotation:[.5,0,0],position:[0,0,0],scale:[1,1,1],normalSize:{homePosition:[-50,-10,360],auctionPosition:[70,0,360],signPosition:[0,-150,950],otherPosition:[4,-7,100]},midSize:{homePosition:[-10,30,360],auctionPosition:[70,0,360],signPosition:[0,0,360],otherPosition:[0,0,360]},phoneSize:{homePosition:[0,80,550],auctionPosition:[0,0,620],signPosition:[0,-150,950],otherPosition:[0,-10,170]}},df={id:94,title:"Shoe",description:"Ship-in-a-bottle is a model enclosed in glass, featuring a ship with masts, rigging, and a deckhouse, often made of wood. It's sealed with a cork or stopper.",startPrice:100,price:200,endDate:"2023-04-15T00:00:00.000Z",path:"Shoe/shoe.gltf",rotation:[.3,-.1,0],position:[0,0,0],scale:[1,1,1],normalSize:{homePosition:[-50,0,360],auctionPosition:[70,0,360],signPosition:[0,-150,950],otherPosition:[.3,-.5,10],bidPosition:[-.3,0,6]},midSize:{homePosition:[-10,30,360],auctionPosition:[70,0,360],signPosition:[0,0,360],otherPosition:[0,0,360]},phoneSize:{homePosition:[0,80,550],auctionPosition:[0,0,620],signPosition:[0,-150,950],otherPosition:[250,-100,360],bidPosition:[-0,1.8,15]}},TM={id:93,title:"T-Shirt",description:"Ship-in-a-bottle is a model enclosed in glass, featuring a ship with masts, rigging, and a deckhouse, often made of wood. It's sealed with a cork or stopper.",startPrice:100,price:200,endDate:"2023-04-15T00:00:00.000Z",path:"shirt_baked.glb",rotation:[.3,-.1,0],position:[0,0,0],scale:[1.5,1.5,1.5],normalSize:{homePosition:[-50,0,360],auctionPosition:[70,0,360],signPosition:[0,-150,950],otherPosition:[.4,-.5,10],bidPosition:[.1,0,3]},midSize:{homePosition:[-10,30,360],auctionPosition:[70,0,360],signPosition:[0,0,360],otherPosition:[0,0,360]},phoneSize:{homePosition:[0,80,550],auctionPosition:[0,0,620],signPosition:[0,-150,950],otherPosition:[250,-100,360],bidPosition:[-.1,.4,5]}};function p4t(t){return rg({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M14 20v2H2v-2h12zM14.586.686l7.778 7.778L20.95 9.88l-1.06-.354L17.413 12l5.657 5.657-1.414 1.414L16 13.414l-2.404 2.404.283 1.132-1.415 1.414-7.778-7.778 1.415-1.414 1.13.282 6.294-6.293-.353-1.06L14.586.686zm.707 3.536l-7.071 7.07 3.535 3.536 7.071-7.07-3.535-3.536z"}}]}]})(t)}function m4t(t){return rg({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M128 192l128 128 128-128z"}}]})(t)}function g4t(t){return rg({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M128 320l128-128 128 128z"}}]})(t)}//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var kSe;function gt(){return kSe.apply(null,arguments)}function v4t(t){kSe=t}function Uu(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function ov(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function Qn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function G7(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(Qn(t,e))return!1;return!0}function ha(t){return t===void 0}function qf(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function oC(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function FSe(t,e){var n=[],i,r=t.length;for(i=0;i<r;++i)n.push(e(t[i],i));return n}function bm(t,e){for(var n in e)Qn(e,n)&&(t[n]=e[n]);return Qn(e,"toString")&&(t.toString=e.toString),Qn(e,"valueOf")&&(t.valueOf=e.valueOf),t}function xd(t,e,n,i){return aAe(t,e,n,i,!0).utc()}function y4t(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function _n(t){return t._pf==null&&(t._pf=y4t()),t._pf}var rV;Array.prototype.some?rV=Array.prototype.some:rV=function(t){var e=Object(this),n=e.length>>>0,i;for(i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};function H7(t){if(t._isValid==null){var e=_n(t),n=rV.call(e.parsedDateParts,function(r){return r!=null}),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=i;else return i}return t._isValid}function $B(t){var e=xd(NaN);return t!=null?bm(_n(e),t):_n(e).userInvalidated=!0,e}var Oce=gt.momentProperties=[],kz=!1;function j7(t,e){var n,i,r,s=Oce.length;if(ha(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),ha(e._i)||(t._i=e._i),ha(e._f)||(t._f=e._f),ha(e._l)||(t._l=e._l),ha(e._strict)||(t._strict=e._strict),ha(e._tzm)||(t._tzm=e._tzm),ha(e._isUTC)||(t._isUTC=e._isUTC),ha(e._offset)||(t._offset=e._offset),ha(e._pf)||(t._pf=_n(e)),ha(e._locale)||(t._locale=e._locale),s>0)for(n=0;n<s;n++)i=Oce[n],r=e[i],ha(r)||(t[i]=r);return t}function aC(t){j7(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),kz===!1&&(kz=!0,gt.updateOffset(this),kz=!1)}function Gu(t){return t instanceof aC||t!=null&&t._isAMomentObject!=null}function NSe(t){gt.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Wc(t,e){var n=!0;return bm(function(){if(gt.deprecationHandler!=null&&gt.deprecationHandler(null,t),n){var i=[],r,s,o,a=arguments.length;for(s=0;s<a;s++){if(r="",typeof arguments[s]=="object"){r+=`
[`+s+"] ";for(o in arguments[0])Qn(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[s];i.push(r)}NSe(t+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var Lce={};function zSe(t,e){gt.deprecationHandler!=null&&gt.deprecationHandler(t,e),Lce[t]||(NSe(e),Lce[t]=!0)}gt.suppressDeprecationWarnings=!1;gt.deprecationHandler=null;function bd(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function x4t(t){var e,n;for(n in t)Qn(t,n)&&(e=t[n],bd(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function sV(t,e){var n=bm({},t),i;for(i in e)Qn(e,i)&&(ov(t[i])&&ov(e[i])?(n[i]={},bm(n[i],t[i]),bm(n[i],e[i])):e[i]!=null?n[i]=e[i]:delete n[i]);for(i in t)Qn(t,i)&&!Qn(e,i)&&ov(t[i])&&(n[i]=bm({},n[i]));return n}function V7(t){t!=null&&this.set(t)}var oV;Object.keys?oV=Object.keys:oV=function(t){var e,n=[];for(e in t)Qn(t,e)&&n.push(e);return n};var b4t={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function w4t(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return bd(i)?i.call(e,n):i}function ld(t,e,n){var i=""+Math.abs(t),r=e-i.length,s=t>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var W7=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,rD=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Fz={},wb={};function Wt(t,e,n,i){var r=i;typeof i=="string"&&(r=function(){return this[i]()}),t&&(wb[t]=r),e&&(wb[e[0]]=function(){return ld(r.apply(this,arguments),e[1],e[2])}),n&&(wb[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function _4t(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function S4t(t){var e=t.match(W7),n,i;for(n=0,i=e.length;n<i;n++)wb[e[n]]?e[n]=wb[e[n]]:e[n]=_4t(e[n]);return function(r){var s="",o;for(o=0;o<i;o++)s+=bd(e[o])?e[o].call(r,t):e[o];return s}}function nO(t,e){return t.isValid()?(e=USe(e,t.localeData()),Fz[e]=Fz[e]||S4t(e),Fz[e](t)):t.localeData().invalidDate()}function USe(t,e){var n=5;function i(r){return e.longDateFormat(r)||r}for(rD.lastIndex=0;n>=0&&rD.test(t);)t=t.replace(rD,i),rD.lastIndex=0,n-=1;return t}var A4t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function M4t(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(W7).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[t])}var E4t="Invalid date";function C4t(){return this._invalidDate}var T4t="%d",P4t=/\d{1,2}/;function D4t(t){return this._ordinal.replace("%d",t)}var O4t={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function L4t(t,e,n,i){var r=this._relativeTime[n];return bd(r)?r(t,e,n,i):r.replace(/%d/i,t)}function R4t(t,e){var n=this._relativeTime[t>0?"future":"past"];return bd(n)?n(e):n.replace(/%s/i,e)}var PM={};function Io(t,e){var n=t.toLowerCase();PM[n]=PM[n+"s"]=PM[e]=t}function $c(t){return typeof t=="string"?PM[t]||PM[t.toLowerCase()]:void 0}function $7(t){var e={},n,i;for(i in t)Qn(t,i)&&(n=$c(i),n&&(e[n]=t[i]));return e}var GSe={};function Bo(t,e){GSe[t]=e}function I4t(t){var e=[],n;for(n in t)Qn(t,n)&&e.push({unit:n,priority:GSe[n]});return e.sort(function(i,r){return i.priority-r.priority}),e}function qB(t){return t%4===0&&t%100!==0||t%400===0}function xc(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function In(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=xc(e)),n}function o_(t,e){return function(n){return n!=null?(HSe(this,t,n),gt.updateOffset(this,e),this):xR(this,t)}}function xR(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function HSe(t,e,n){t.isValid()&&!isNaN(n)&&(e==="FullYear"&&qB(t.year())&&t.month()===1&&t.date()===29?(n=In(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),QB(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function B4t(t){return t=$c(t),bd(this[t])?this[t]():this}function k4t(t,e){if(typeof t=="object"){t=$7(t);var n=I4t(t),i,r=n.length;for(i=0;i<r;i++)this[n[i].unit](t[n[i].unit])}else if(t=$c(t),bd(this[t]))return this[t](e);return this}var jSe=/\d/,Ol=/\d\d/,VSe=/\d{3}/,q7=/\d{4}/,XB=/[+-]?\d{6}/,er=/\d\d?/,WSe=/\d\d\d\d?/,$Se=/\d\d\d\d\d\d?/,YB=/\d{1,3}/,X7=/\d{1,4}/,KB=/[+-]?\d{1,6}/,a_=/\d+/,JB=/[+-]?\d+/,F4t=/Z|[+-]\d\d:?\d\d/gi,ZB=/Z|[+-]\d\d(?::?\d\d)?/gi,N4t=/[+-]?\d+(\.\d{1,3})?/,lC=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,bR;bR={};function Mt(t,e,n){bR[t]=bd(e)?e:function(i,r){return i&&n?n:e}}function z4t(t,e){return Qn(bR,t)?bR[t](e._strict,e._locale):new RegExp(U4t(t))}function U4t(t){return tl(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,i,r,s){return n||i||r||s}))}function tl(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var aV={};function _i(t,e){var n,i=e,r;for(typeof t=="string"&&(t=[t]),qf(e)&&(i=function(s,o){o[e]=In(s)}),r=t.length,n=0;n<r;n++)aV[t[n]]=i}function cC(t,e){_i(t,function(n,i,r,s){r._w=r._w||{},e(n,r._w,r,s)})}function G4t(t,e,n){e!=null&&Qn(aV,t)&&aV[t](e,n._a,n,t)}var Po=0,bf=1,kh=2,bs=3,_u=4,wf=5,N0=6,H4t=7,j4t=8;function V4t(t,e){return(t%e+e)%e}var Gr;Array.prototype.indexOf?Gr=Array.prototype.indexOf:Gr=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function QB(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=V4t(e,12);return t+=(e-n)/12,n===1?qB(t)?29:28:31-n%7%2}Wt("M",["MM",2],"Mo",function(){return this.month()+1});Wt("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Wt("MMMM",0,0,function(t){return this.localeData().months(this,t)});Io("month","M");Bo("month",8);Mt("M",er);Mt("MM",er,Ol);Mt("MMM",function(t,e){return e.monthsShortRegex(t)});Mt("MMMM",function(t,e){return e.monthsRegex(t)});_i(["M","MM"],function(t,e){e[bf]=In(t)-1});_i(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);r!=null?e[bf]=r:_n(n).invalidMonth=t});var W4t="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),qSe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),XSe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,$4t=lC,q4t=lC;function X4t(t,e){return t?Uu(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||XSe).test(e)?"format":"standalone"][t.month()]:Uu(this._months)?this._months:this._months.standalone}function Y4t(t,e){return t?Uu(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[XSe.test(e)?"format":"standalone"][t.month()]:Uu(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function K4t(t,e,n){var i,r,s,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)s=xd([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(s,"").toLocaleLowerCase();return n?e==="MMM"?(r=Gr.call(this._shortMonthsParse,o),r!==-1?r:null):(r=Gr.call(this._longMonthsParse,o),r!==-1?r:null):e==="MMM"?(r=Gr.call(this._shortMonthsParse,o),r!==-1?r:(r=Gr.call(this._longMonthsParse,o),r!==-1?r:null)):(r=Gr.call(this._longMonthsParse,o),r!==-1?r:(r=Gr.call(this._shortMonthsParse,o),r!==-1?r:null))}function J4t(t,e,n){var i,r,s;if(this._monthsParseExact)return K4t.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=xd([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!n&&!this._monthsParse[i]&&(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[i].test(t))return i;if(n&&e==="MMM"&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function YSe(t,e){var n;if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=In(e);else if(e=t.localeData().monthsParse(e),!qf(e))return t}return n=Math.min(t.date(),QB(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function KSe(t){return t!=null?(YSe(this,t),gt.updateOffset(this,!0),this):xR(this,"Month")}function Z4t(){return QB(this.year(),this.month())}function Q4t(t){return this._monthsParseExact?(Qn(this,"_monthsRegex")||JSe.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(Qn(this,"_monthsShortRegex")||(this._monthsShortRegex=$4t),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function e5t(t){return this._monthsParseExact?(Qn(this,"_monthsRegex")||JSe.call(this),t?this._monthsStrictRegex:this._monthsRegex):(Qn(this,"_monthsRegex")||(this._monthsRegex=q4t),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function JSe(){function t(o,a){return a.length-o.length}var e=[],n=[],i=[],r,s;for(r=0;r<12;r++)s=xd([2e3,r]),e.push(this.monthsShort(s,"")),n.push(this.months(s,"")),i.push(this.months(s,"")),i.push(this.monthsShort(s,""));for(e.sort(t),n.sort(t),i.sort(t),r=0;r<12;r++)e[r]=tl(e[r]),n[r]=tl(n[r]);for(r=0;r<24;r++)i[r]=tl(i[r]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}Wt("Y",0,0,function(){var t=this.year();return t<=9999?ld(t,4):"+"+t});Wt(0,["YY",2],0,function(){return this.year()%100});Wt(0,["YYYY",4],0,"year");Wt(0,["YYYYY",5],0,"year");Wt(0,["YYYYYY",6,!0],0,"year");Io("year","y");Bo("year",1);Mt("Y",JB);Mt("YY",er,Ol);Mt("YYYY",X7,q7);Mt("YYYYY",KB,XB);Mt("YYYYYY",KB,XB);_i(["YYYYY","YYYYYY"],Po);_i("YYYY",function(t,e){e[Po]=t.length===2?gt.parseTwoDigitYear(t):In(t)});_i("YY",function(t,e){e[Po]=gt.parseTwoDigitYear(t)});_i("Y",function(t,e){e[Po]=parseInt(t,10)});function DM(t){return qB(t)?366:365}gt.parseTwoDigitYear=function(t){return In(t)+(In(t)>68?1900:2e3)};var ZSe=o_("FullYear",!0);function t5t(){return qB(this.year())}function n5t(t,e,n,i,r,s,o){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,i,r,s,o),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,i,r,s,o),a}function J2(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function wR(t,e,n){var i=7+e-n,r=(7+J2(t,0,i).getUTCDay()-e)%7;return-r+i-1}function QSe(t,e,n,i,r){var s=(7+n-i)%7,o=wR(t,i,r),a=1+7*(e-1)+s+o,l,c;return a<=0?(l=t-1,c=DM(l)+a):a>DM(t)?(l=t+1,c=a-DM(t)):(l=t,c=a),{year:l,dayOfYear:c}}function Z2(t,e,n){var i=wR(t.year(),e,n),r=Math.floor((t.dayOfYear()-i-1)/7)+1,s,o;return r<1?(o=t.year()-1,s=r+Of(o,e,n)):r>Of(t.year(),e,n)?(s=r-Of(t.year(),e,n),o=t.year()+1):(o=t.year(),s=r),{week:s,year:o}}function Of(t,e,n){var i=wR(t,e,n),r=wR(t+1,e,n);return(DM(t)-i+r)/7}Wt("w",["ww",2],"wo","week");Wt("W",["WW",2],"Wo","isoWeek");Io("week","w");Io("isoWeek","W");Bo("week",5);Bo("isoWeek",5);Mt("w",er);Mt("ww",er,Ol);Mt("W",er);Mt("WW",er,Ol);cC(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=In(t)});function i5t(t){return Z2(t,this._week.dow,this._week.doy).week}var r5t={dow:0,doy:6};function s5t(){return this._week.dow}function o5t(){return this._week.doy}function a5t(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function l5t(t){var e=Z2(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}Wt("d",0,"do","day");Wt("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Wt("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Wt("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Wt("e",0,0,"weekday");Wt("E",0,0,"isoWeekday");Io("day","d");Io("weekday","e");Io("isoWeekday","E");Bo("day",11);Bo("weekday",11);Bo("isoWeekday",11);Mt("d",er);Mt("e",er);Mt("E",er);Mt("dd",function(t,e){return e.weekdaysMinRegex(t)});Mt("ddd",function(t,e){return e.weekdaysShortRegex(t)});Mt("dddd",function(t,e){return e.weekdaysRegex(t)});cC(["dd","ddd","dddd"],function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);r!=null?e.d=r:_n(n).invalidWeekday=t});cC(["d","e","E"],function(t,e,n,i){e[i]=In(t)});function c5t(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function u5t(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Y7(t,e){return t.slice(e,7).concat(t.slice(0,e))}var h5t="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),eAe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),d5t="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),f5t=lC,p5t=lC,m5t=lC;function g5t(t,e){var n=Uu(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?Y7(n,this._week.dow):t?n[t.day()]:n}function v5t(t){return t===!0?Y7(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function y5t(t){return t===!0?Y7(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function x5t(t,e,n){var i,r,s,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)s=xd([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(s,"").toLocaleLowerCase();return n?e==="dddd"?(r=Gr.call(this._weekdaysParse,o),r!==-1?r:null):e==="ddd"?(r=Gr.call(this._shortWeekdaysParse,o),r!==-1?r:null):(r=Gr.call(this._minWeekdaysParse,o),r!==-1?r:null):e==="dddd"?(r=Gr.call(this._weekdaysParse,o),r!==-1||(r=Gr.call(this._shortWeekdaysParse,o),r!==-1)?r:(r=Gr.call(this._minWeekdaysParse,o),r!==-1?r:null)):e==="ddd"?(r=Gr.call(this._shortWeekdaysParse,o),r!==-1||(r=Gr.call(this._weekdaysParse,o),r!==-1)?r:(r=Gr.call(this._minWeekdaysParse,o),r!==-1?r:null)):(r=Gr.call(this._minWeekdaysParse,o),r!==-1||(r=Gr.call(this._weekdaysParse,o),r!==-1)?r:(r=Gr.call(this._shortWeekdaysParse,o),r!==-1?r:null))}function b5t(t,e,n){var i,r,s;if(this._weekdaysParseExact)return x5t.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=xd([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[i].test(t))return i;if(n&&e==="ddd"&&this._shortWeekdaysParse[i].test(t))return i;if(n&&e==="dd"&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function w5t(t){if(!this.isValid())return t!=null?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return t!=null?(t=c5t(t,this.localeData()),this.add(t-e,"d")):e}function _5t(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function S5t(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=u5t(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function A5t(t){return this._weekdaysParseExact?(Qn(this,"_weekdaysRegex")||K7.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(Qn(this,"_weekdaysRegex")||(this._weekdaysRegex=f5t),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function M5t(t){return this._weekdaysParseExact?(Qn(this,"_weekdaysRegex")||K7.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Qn(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=p5t),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function E5t(t){return this._weekdaysParseExact?(Qn(this,"_weekdaysRegex")||K7.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Qn(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=m5t),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function K7(){function t(h,u){return u.length-h.length}var e=[],n=[],i=[],r=[],s,o,a,l,c;for(s=0;s<7;s++)o=xd([2e3,1]).day(s),a=tl(this.weekdaysMin(o,"")),l=tl(this.weekdaysShort(o,"")),c=tl(this.weekdays(o,"")),e.push(a),n.push(l),i.push(c),r.push(a),r.push(l),r.push(c);e.sort(t),n.sort(t),i.sort(t),r.sort(t),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function J7(){return this.hours()%12||12}function C5t(){return this.hours()||24}Wt("H",["HH",2],0,"hour");Wt("h",["hh",2],0,J7);Wt("k",["kk",2],0,C5t);Wt("hmm",0,0,function(){return""+J7.apply(this)+ld(this.minutes(),2)});Wt("hmmss",0,0,function(){return""+J7.apply(this)+ld(this.minutes(),2)+ld(this.seconds(),2)});Wt("Hmm",0,0,function(){return""+this.hours()+ld(this.minutes(),2)});Wt("Hmmss",0,0,function(){return""+this.hours()+ld(this.minutes(),2)+ld(this.seconds(),2)});function tAe(t,e){Wt(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}tAe("a",!0);tAe("A",!1);Io("hour","h");Bo("hour",13);function nAe(t,e){return e._meridiemParse}Mt("a",nAe);Mt("A",nAe);Mt("H",er);Mt("h",er);Mt("k",er);Mt("HH",er,Ol);Mt("hh",er,Ol);Mt("kk",er,Ol);Mt("hmm",WSe);Mt("hmmss",$Se);Mt("Hmm",WSe);Mt("Hmmss",$Se);_i(["H","HH"],bs);_i(["k","kk"],function(t,e,n){var i=In(t);e[bs]=i===24?0:i});_i(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});_i(["h","hh"],function(t,e,n){e[bs]=In(t),_n(n).bigHour=!0});_i("hmm",function(t,e,n){var i=t.length-2;e[bs]=In(t.substr(0,i)),e[_u]=In(t.substr(i)),_n(n).bigHour=!0});_i("hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[bs]=In(t.substr(0,i)),e[_u]=In(t.substr(i,2)),e[wf]=In(t.substr(r)),_n(n).bigHour=!0});_i("Hmm",function(t,e,n){var i=t.length-2;e[bs]=In(t.substr(0,i)),e[_u]=In(t.substr(i))});_i("Hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[bs]=In(t.substr(0,i)),e[_u]=In(t.substr(i,2)),e[wf]=In(t.substr(r))});function T5t(t){return(t+"").toLowerCase().charAt(0)==="p"}var P5t=/[ap]\.?m?\.?/i,D5t=o_("Hours",!0);function O5t(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var iAe={calendar:b4t,longDateFormat:A4t,invalidDate:E4t,ordinal:T4t,dayOfMonthOrdinalParse:P4t,relativeTime:O4t,months:W4t,monthsShort:qSe,week:r5t,weekdays:h5t,weekdaysMin:d5t,weekdaysShort:eAe,meridiemParse:P5t},ir={},oA={},Q2;function L5t(t,e){var n,i=Math.min(t.length,e.length);for(n=0;n<i;n+=1)if(t[n]!==e[n])return n;return i}function Rce(t){return t&&t.toLowerCase().replace("_","-")}function R5t(t){for(var e=0,n,i,r,s;e<t.length;){for(s=Rce(t[e]).split("-"),n=s.length,i=Rce(t[e+1]),i=i?i.split("-"):null;n>0;){if(r=ek(s.slice(0,n).join("-")),r)return r;if(i&&i.length>=n&&L5t(s,i)>=n-1)break;n--}e++}return Q2}function I5t(t){return t.match("^[^/\\\\]*$")!=null}function ek(t){var e=null,n;if(ir[t]===void 0&&typeof En<"u"&&En&&En.exports&&I5t(t))try{e=Q2._abbr,n=require,n("./locale/"+t),Um(e)}catch{ir[t]=null}return ir[t]}function Um(t,e){var n;return t&&(ha(e)?n=rp(t):n=Z7(t,e),n?Q2=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Q2._abbr}function Z7(t,e){if(e!==null){var n,i=iAe;if(e.abbr=t,ir[t]!=null)zSe("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=ir[t]._config;else if(e.parentLocale!=null)if(ir[e.parentLocale]!=null)i=ir[e.parentLocale]._config;else if(n=ek(e.parentLocale),n!=null)i=n._config;else return oA[e.parentLocale]||(oA[e.parentLocale]=[]),oA[e.parentLocale].push({name:t,config:e}),null;return ir[t]=new V7(sV(i,e)),oA[t]&&oA[t].forEach(function(r){Z7(r.name,r.config)}),Um(t),ir[t]}else return delete ir[t],null}function B5t(t,e){if(e!=null){var n,i,r=iAe;ir[t]!=null&&ir[t].parentLocale!=null?ir[t].set(sV(ir[t]._config,e)):(i=ek(t),i!=null&&(r=i._config),e=sV(r,e),i==null&&(e.abbr=t),n=new V7(e),n.parentLocale=ir[t],ir[t]=n),Um(t)}else ir[t]!=null&&(ir[t].parentLocale!=null?(ir[t]=ir[t].parentLocale,t===Um()&&Um(t)):ir[t]!=null&&delete ir[t]);return ir[t]}function rp(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Q2;if(!Uu(t)){if(e=ek(t),e)return e;t=[t]}return R5t(t)}function k5t(){return oV(ir)}function Q7(t){var e,n=t._a;return n&&_n(t).overflow===-2&&(e=n[bf]<0||n[bf]>11?bf:n[kh]<1||n[kh]>QB(n[Po],n[bf])?kh:n[bs]<0||n[bs]>24||n[bs]===24&&(n[_u]!==0||n[wf]!==0||n[N0]!==0)?bs:n[_u]<0||n[_u]>59?_u:n[wf]<0||n[wf]>59?wf:n[N0]<0||n[N0]>999?N0:-1,_n(t)._overflowDayOfYear&&(e<Po||e>kh)&&(e=kh),_n(t)._overflowWeeks&&e===-1&&(e=H4t),_n(t)._overflowWeekday&&e===-1&&(e=j4t),_n(t).overflow=e),t}var F5t=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,N5t=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,z5t=/Z|[+-]\d\d(?::?\d\d)?/,sD=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Nz=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],U5t=/^\/?Date\((-?\d+)/i,G5t=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,H5t={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function rAe(t){var e,n,i=t._i,r=F5t.exec(i)||N5t.exec(i),s,o,a,l,c=sD.length,h=Nz.length;if(r){for(_n(t).iso=!0,e=0,n=c;e<n;e++)if(sD[e][1].exec(r[1])){o=sD[e][0],s=sD[e][2]!==!1;break}if(o==null){t._isValid=!1;return}if(r[3]){for(e=0,n=h;e<n;e++)if(Nz[e][1].exec(r[3])){a=(r[2]||" ")+Nz[e][0];break}if(a==null){t._isValid=!1;return}}if(!s&&a!=null){t._isValid=!1;return}if(r[4])if(z5t.exec(r[4]))l="Z";else{t._isValid=!1;return}t._f=o+(a||"")+(l||""),tq(t)}else t._isValid=!1}function j5t(t,e,n,i,r,s){var o=[V5t(t),qSe.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(r,10)];return s&&o.push(parseInt(s,10)),o}function V5t(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function W5t(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function $5t(t,e,n){if(t){var i=eAe.indexOf(t),r=new Date(e[0],e[1],e[2]).getDay();if(i!==r)return _n(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function q5t(t,e,n){if(t)return H5t[t];if(e)return 0;var i=parseInt(n,10),r=i%100,s=(i-r)/100;return s*60+r}function sAe(t){var e=G5t.exec(W5t(t._i)),n;if(e){if(n=j5t(e[4],e[3],e[2],e[5],e[6],e[7]),!$5t(e[1],n,t))return;t._a=n,t._tzm=q5t(e[8],e[9],e[10]),t._d=J2.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),_n(t).rfc2822=!0}else t._isValid=!1}function X5t(t){var e=U5t.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(rAe(t),t._isValid===!1)delete t._isValid;else return;if(sAe(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:gt.createFromInputFallback(t)}gt.createFromInputFallback=Wc("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function W1(t,e,n){return t??e??n}function Y5t(t){var e=new Date(gt.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function eq(t){var e,n,i=[],r,s,o;if(!t._d){for(r=Y5t(t),t._w&&t._a[kh]==null&&t._a[bf]==null&&K5t(t),t._dayOfYear!=null&&(o=W1(t._a[Po],r[Po]),(t._dayOfYear>DM(o)||t._dayOfYear===0)&&(_n(t)._overflowDayOfYear=!0),n=J2(o,0,t._dayOfYear),t._a[bf]=n.getUTCMonth(),t._a[kh]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=i[e]=r[e];for(;e<7;e++)t._a[e]=i[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[bs]===24&&t._a[_u]===0&&t._a[wf]===0&&t._a[N0]===0&&(t._nextDay=!0,t._a[bs]=0),t._d=(t._useUTC?J2:n5t).apply(null,i),s=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[bs]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==s&&(_n(t).weekdayMismatch=!0)}}function K5t(t){var e,n,i,r,s,o,a,l,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(s=1,o=4,n=W1(e.GG,t._a[Po],Z2(Qi(),1,4).year),i=W1(e.W,1),r=W1(e.E,1),(r<1||r>7)&&(l=!0)):(s=t._locale._week.dow,o=t._locale._week.doy,c=Z2(Qi(),s,o),n=W1(e.gg,t._a[Po],c.year),i=W1(e.w,c.week),e.d!=null?(r=e.d,(r<0||r>6)&&(l=!0)):e.e!=null?(r=e.e+s,(e.e<0||e.e>6)&&(l=!0)):r=s),i<1||i>Of(n,s,o)?_n(t)._overflowWeeks=!0:l!=null?_n(t)._overflowWeekday=!0:(a=QSe(n,i,r,s,o),t._a[Po]=a.year,t._dayOfYear=a.dayOfYear)}gt.ISO_8601=function(){};gt.RFC_2822=function(){};function tq(t){if(t._f===gt.ISO_8601){rAe(t);return}if(t._f===gt.RFC_2822){sAe(t);return}t._a=[],_n(t).empty=!0;var e=""+t._i,n,i,r,s,o,a=e.length,l=0,c,h;for(r=USe(t._f,t._locale).match(W7)||[],h=r.length,n=0;n<h;n++)s=r[n],i=(e.match(z4t(s,t))||[])[0],i&&(o=e.substr(0,e.indexOf(i)),o.length>0&&_n(t).unusedInput.push(o),e=e.slice(e.indexOf(i)+i.length),l+=i.length),wb[s]?(i?_n(t).empty=!1:_n(t).unusedTokens.push(s),G4t(s,i,t)):t._strict&&!i&&_n(t).unusedTokens.push(s);_n(t).charsLeftOver=a-l,e.length>0&&_n(t).unusedInput.push(e),t._a[bs]<=12&&_n(t).bigHour===!0&&t._a[bs]>0&&(_n(t).bigHour=void 0),_n(t).parsedDateParts=t._a.slice(0),_n(t).meridiem=t._meridiem,t._a[bs]=J5t(t._locale,t._a[bs],t._meridiem),c=_n(t).era,c!==null&&(t._a[Po]=t._locale.erasConvertYear(c,t._a[Po])),eq(t),Q7(t)}function J5t(t,e,n){var i;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(i=t.isPM(n),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function Z5t(t){var e,n,i,r,s,o,a=!1,l=t._f.length;if(l===0){_n(t).invalidFormat=!0,t._d=new Date(NaN);return}for(r=0;r<l;r++)s=0,o=!1,e=j7({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[r],tq(e),H7(e)&&(o=!0),s+=_n(e).charsLeftOver,s+=_n(e).unusedTokens.length*10,_n(e).score=s,a?s<i&&(i=s,n=e):(i==null||s<i||o)&&(i=s,n=e,o&&(a=!0));bm(t,n||e)}function Q5t(t){if(!t._d){var e=$7(t._i),n=e.day===void 0?e.date:e.day;t._a=FSe([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),eq(t)}}function ezt(t){var e=new aC(Q7(oAe(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function oAe(t){var e=t._i,n=t._f;return t._locale=t._locale||rp(t._l),e===null||n===void 0&&e===""?$B({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),Gu(e)?new aC(Q7(e)):(oC(e)?t._d=e:Uu(n)?Z5t(t):n?tq(t):tzt(t),H7(t)||(t._d=null),t))}function tzt(t){var e=t._i;ha(e)?t._d=new Date(gt.now()):oC(e)?t._d=new Date(e.valueOf()):typeof e=="string"?X5t(t):Uu(e)?(t._a=FSe(e.slice(0),function(n){return parseInt(n,10)}),eq(t)):ov(e)?Q5t(t):qf(e)?t._d=new Date(e):gt.createFromInputFallback(t)}function aAe(t,e,n,i,r){var s={};return(e===!0||e===!1)&&(i=e,e=void 0),(n===!0||n===!1)&&(i=n,n=void 0),(ov(t)&&G7(t)||Uu(t)&&t.length===0)&&(t=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=n,s._i=t,s._f=e,s._strict=i,ezt(s)}function Qi(t,e,n,i){return aAe(t,e,n,i,!1)}var nzt=Wc("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Qi.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:$B()}),izt=Wc("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Qi.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:$B()});function lAe(t,e){var n,i;if(e.length===1&&Uu(e[0])&&(e=e[0]),!e.length)return Qi();for(n=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][t](n))&&(n=e[i]);return n}function rzt(){var t=[].slice.call(arguments,0);return lAe("isBefore",t)}function szt(){var t=[].slice.call(arguments,0);return lAe("isAfter",t)}var ozt=function(){return Date.now?Date.now():+new Date},aA=["year","quarter","month","week","day","hour","minute","second","millisecond"];function azt(t){var e,n=!1,i,r=aA.length;for(e in t)if(Qn(t,e)&&!(Gr.call(aA,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(i=0;i<r;++i)if(t[aA[i]]){if(n)return!1;parseFloat(t[aA[i]])!==In(t[aA[i]])&&(n=!0)}return!0}function lzt(){return this._isValid}function czt(){return Yu(NaN)}function tk(t){var e=$7(t),n=e.year||0,i=e.quarter||0,r=e.month||0,s=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,h=e.millisecond||0;this._isValid=azt(e),this._milliseconds=+h+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+s*7,this._months=+r+i*3+n*12,this._data={},this._locale=rp(),this._bubble()}function iO(t){return t instanceof tk}function lV(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function uzt(t,e,n){var i=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),s=0,o;for(o=0;o<i;o++)(n&&t[o]!==e[o]||!n&&In(t[o])!==In(e[o]))&&s++;return s+r}function cAe(t,e){Wt(t,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+ld(~~(n/60),2)+e+ld(~~n%60,2)})}cAe("Z",":");cAe("ZZ","");Mt("Z",ZB);Mt("ZZ",ZB);_i(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=nq(ZB,t)});var hzt=/([\+\-]|\d\d)/gi;function nq(t,e){var n=(e||"").match(t),i,r,s;return n===null?null:(i=n[n.length-1]||[],r=(i+"").match(hzt)||["-",0,0],s=+(r[1]*60)+In(r[2]),s===0?0:r[0]==="+"?s:-s)}function iq(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(Gu(t)||oC(t)?t.valueOf():Qi(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),gt.updateOffset(n,!1),n):Qi(t).local()}function cV(t){return-Math.round(t._d.getTimezoneOffset())}gt.updateOffset=function(){};function dzt(t,e,n){var i=this._offset||0,r;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=nq(ZB,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(r=cV(this)),this._offset=t,this._isUTC=!0,r!=null&&this.add(r,"m"),i!==t&&(!e||this._changeInProgress?dAe(this,Yu(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,gt.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:cV(this)}function fzt(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function pzt(t){return this.utcOffset(0,t)}function mzt(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(cV(this),"m")),this}function gzt(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=nq(F4t,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function vzt(t){return this.isValid()?(t=t?Qi(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function yzt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function xzt(){if(!ha(this._isDSTShifted))return this._isDSTShifted;var t={},e;return j7(t,this),t=oAe(t),t._a?(e=t._isUTC?xd(t._a):Qi(t._a),this._isDSTShifted=this.isValid()&&uzt(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function bzt(){return this.isValid()?!this._isUTC:!1}function wzt(){return this.isValid()?this._isUTC:!1}function uAe(){return this.isValid()?this._isUTC&&this._offset===0:!1}var _zt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Szt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Yu(t,e){var n=t,i=null,r,s,o;return iO(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:qf(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(i=_zt.exec(t))?(r=i[1]==="-"?-1:1,n={y:0,d:In(i[kh])*r,h:In(i[bs])*r,m:In(i[_u])*r,s:In(i[wf])*r,ms:In(lV(i[N0]*1e3))*r}):(i=Szt.exec(t))?(r=i[1]==="-"?-1:1,n={y:$g(i[2],r),M:$g(i[3],r),w:$g(i[4],r),d:$g(i[5],r),h:$g(i[6],r),m:$g(i[7],r),s:$g(i[8],r)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=Azt(Qi(n.from),Qi(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),s=new tk(n),iO(t)&&Qn(t,"_locale")&&(s._locale=t._locale),iO(t)&&Qn(t,"_isValid")&&(s._isValid=t._isValid),s}Yu.fn=tk.prototype;Yu.invalid=czt;function $g(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ice(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Azt(t,e){var n;return t.isValid()&&e.isValid()?(e=iq(e,t),t.isBefore(e)?n=Ice(t,e):(n=Ice(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function hAe(t,e){return function(n,i){var r,s;return i!==null&&!isNaN(+i)&&(zSe(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=i,i=s),r=Yu(n,i),dAe(this,r,t),this}}function dAe(t,e,n,i){var r=e._milliseconds,s=lV(e._days),o=lV(e._months);t.isValid()&&(i=i??!0,o&&YSe(t,xR(t,"Month")+o*n),s&&HSe(t,"Date",xR(t,"Date")+s*n),r&&t._d.setTime(t._d.valueOf()+r*n),i&&gt.updateOffset(t,s||o))}var Mzt=hAe(1,"add"),Ezt=hAe(-1,"subtract");function fAe(t){return typeof t=="string"||t instanceof String}function Czt(t){return Gu(t)||oC(t)||fAe(t)||qf(t)||Pzt(t)||Tzt(t)||t===null||t===void 0}function Tzt(t){var e=ov(t)&&!G7(t),n=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,s,o=i.length;for(r=0;r<o;r+=1)s=i[r],n=n||Qn(t,s);return e&&n}function Pzt(t){var e=Uu(t),n=!1;return e&&(n=t.filter(function(i){return!qf(i)&&fAe(t)}).length===0),e&&n}function Dzt(t){var e=ov(t)&&!G7(t),n=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,s;for(r=0;r<i.length;r+=1)s=i[r],n=n||Qn(t,s);return e&&n}function Ozt(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Lzt(t,e){arguments.length===1&&(arguments[0]?Czt(arguments[0])?(t=arguments[0],e=void 0):Dzt(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||Qi(),i=iq(n,this).startOf("day"),r=gt.calendarFormat(this,i)||"sameElse",s=e&&(bd(e[r])?e[r].call(this,n):e[r]);return this.format(s||this.localeData().calendar(r,this,Qi(n)))}function Rzt(){return new aC(this)}function Izt(t,e){var n=Gu(t)?t:Qi(t);return this.isValid()&&n.isValid()?(e=$c(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function Bzt(t,e){var n=Gu(t)?t:Qi(t);return this.isValid()&&n.isValid()?(e=$c(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function kzt(t,e,n,i){var r=Gu(t)?t:Qi(t),s=Gu(e)?e:Qi(e);return this.isValid()&&r.isValid()&&s.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(r,n):!this.isBefore(r,n))&&(i[1]===")"?this.isBefore(s,n):!this.isAfter(s,n))):!1}function Fzt(t,e){var n=Gu(t)?t:Qi(t),i;return this.isValid()&&n.isValid()?(e=$c(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function Nzt(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function zzt(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Uzt(t,e,n){var i,r,s;if(!this.isValid())return NaN;if(i=iq(t,this),!i.isValid())return NaN;switch(r=(i.utcOffset()-this.utcOffset())*6e4,e=$c(e),e){case"year":s=rO(this,i)/12;break;case"month":s=rO(this,i);break;case"quarter":s=rO(this,i)/3;break;case"second":s=(this-i)/1e3;break;case"minute":s=(this-i)/6e4;break;case"hour":s=(this-i)/36e5;break;case"day":s=(this-i-r)/864e5;break;case"week":s=(this-i-r)/6048e5;break;default:s=this-i}return n?s:xc(s)}function rO(t,e){if(t.date()<e.date())return-rO(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),i=t.clone().add(n,"months"),r,s;return e-i<0?(r=t.clone().add(n-1,"months"),s=(e-i)/(i-r)):(r=t.clone().add(n+1,"months"),s=(e-i)/(r-i)),-(n+s)||0}gt.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";gt.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Gzt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Hzt(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?nO(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):bd(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",nO(n,"Z")):nO(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function jzt(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,i,r,s;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",s=e+'[")]',this.format(n+i+r+s)}function Vzt(t){t||(t=this.isUtc()?gt.defaultFormatUtc:gt.defaultFormat);var e=nO(this,t);return this.localeData().postformat(e)}function Wzt(t,e){return this.isValid()&&(Gu(t)&&t.isValid()||Qi(t).isValid())?Yu({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function $zt(t){return this.from(Qi(),t)}function qzt(t,e){return this.isValid()&&(Gu(t)&&t.isValid()||Qi(t).isValid())?Yu({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Xzt(t){return this.to(Qi(),t)}function pAe(t){var e;return t===void 0?this._locale._abbr:(e=rp(t),e!=null&&(this._locale=e),this)}var mAe=Wc("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function gAe(){return this._locale}var _R=1e3,_b=60*_R,SR=60*_b,vAe=(365*400+97)*24*SR;function Sb(t,e){return(t%e+e)%e}function yAe(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-vAe:new Date(t,e,n).valueOf()}function xAe(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-vAe:Date.UTC(t,e,n)}function Yzt(t){var e,n;if(t=$c(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?xAe:yAe,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Sb(e+(this._isUTC?0:this.utcOffset()*_b),SR);break;case"minute":e=this._d.valueOf(),e-=Sb(e,_b);break;case"second":e=this._d.valueOf(),e-=Sb(e,_R);break}return this._d.setTime(e),gt.updateOffset(this,!0),this}function Kzt(t){var e,n;if(t=$c(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?xAe:yAe,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=SR-Sb(e+(this._isUTC?0:this.utcOffset()*_b),SR)-1;break;case"minute":e=this._d.valueOf(),e+=_b-Sb(e,_b)-1;break;case"second":e=this._d.valueOf(),e+=_R-Sb(e,_R)-1;break}return this._d.setTime(e),gt.updateOffset(this,!0),this}function Jzt(){return this._d.valueOf()-(this._offset||0)*6e4}function Zzt(){return Math.floor(this.valueOf()/1e3)}function Qzt(){return new Date(this.valueOf())}function eUt(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function tUt(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function nUt(){return this.isValid()?this.toISOString():null}function iUt(){return H7(this)}function rUt(){return bm({},_n(this))}function sUt(){return _n(this).overflow}function oUt(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Wt("N",0,0,"eraAbbr");Wt("NN",0,0,"eraAbbr");Wt("NNN",0,0,"eraAbbr");Wt("NNNN",0,0,"eraName");Wt("NNNNN",0,0,"eraNarrow");Wt("y",["y",1],"yo","eraYear");Wt("y",["yy",2],0,"eraYear");Wt("y",["yyy",3],0,"eraYear");Wt("y",["yyyy",4],0,"eraYear");Mt("N",rq);Mt("NN",rq);Mt("NNN",rq);Mt("NNNN",vUt);Mt("NNNNN",yUt);_i(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,i){var r=n._locale.erasParse(t,i,n._strict);r?_n(n).era=r:_n(n).invalidEra=t});Mt("y",a_);Mt("yy",a_);Mt("yyy",a_);Mt("yyyy",a_);Mt("yo",xUt);_i(["y","yy","yyy","yyyy"],Po);_i(["yo"],function(t,e,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[Po]=n._locale.eraYearOrdinalParse(t,r):e[Po]=parseInt(t,10)});function aUt(t,e){var n,i,r,s=this._eras||rp("en")._eras;for(n=0,i=s.length;n<i;++n){switch(typeof s[n].since){case"string":r=gt(s[n].since).startOf("day"),s[n].since=r.valueOf();break}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":r=gt(s[n].until).startOf("day").valueOf(),s[n].until=r.valueOf();break}}return s}function lUt(t,e,n){var i,r,s=this.eras(),o,a,l;for(t=t.toUpperCase(),i=0,r=s.length;i<r;++i)if(o=s[i].name.toUpperCase(),a=s[i].abbr.toUpperCase(),l=s[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return s[i];break;case"NNNN":if(o===t)return s[i];break;case"NNNNN":if(l===t)return s[i];break}else if([o,a,l].indexOf(t)>=0)return s[i]}function cUt(t,e){var n=t.since<=t.until?1:-1;return e===void 0?gt(t.since).year():gt(t.since).year()+(e-t.offset)*n}function uUt(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].name;return""}function hUt(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].narrow;return""}function dUt(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].abbr;return""}function fUt(){var t,e,n,i,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=r[t].since<=r[t].until?1:-1,i=this.clone().startOf("day").valueOf(),r[t].since<=i&&i<=r[t].until||r[t].until<=i&&i<=r[t].since)return(this.year()-gt(r[t].since).year())*n+r[t].offset;return this.year()}function pUt(t){return Qn(this,"_erasNameRegex")||sq.call(this),t?this._erasNameRegex:this._erasRegex}function mUt(t){return Qn(this,"_erasAbbrRegex")||sq.call(this),t?this._erasAbbrRegex:this._erasRegex}function gUt(t){return Qn(this,"_erasNarrowRegex")||sq.call(this),t?this._erasNarrowRegex:this._erasRegex}function rq(t,e){return e.erasAbbrRegex(t)}function vUt(t,e){return e.erasNameRegex(t)}function yUt(t,e){return e.erasNarrowRegex(t)}function xUt(t,e){return e._eraYearOrdinalRegex||a_}function sq(){var t=[],e=[],n=[],i=[],r,s,o=this.eras();for(r=0,s=o.length;r<s;++r)e.push(tl(o[r].name)),t.push(tl(o[r].abbr)),n.push(tl(o[r].narrow)),i.push(tl(o[r].name)),i.push(tl(o[r].abbr)),i.push(tl(o[r].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}Wt(0,["gg",2],0,function(){return this.weekYear()%100});Wt(0,["GG",2],0,function(){return this.isoWeekYear()%100});function nk(t,e){Wt(0,[t,t.length],0,e)}nk("gggg","weekYear");nk("ggggg","weekYear");nk("GGGG","isoWeekYear");nk("GGGGG","isoWeekYear");Io("weekYear","gg");Io("isoWeekYear","GG");Bo("weekYear",1);Bo("isoWeekYear",1);Mt("G",JB);Mt("g",JB);Mt("GG",er,Ol);Mt("gg",er,Ol);Mt("GGGG",X7,q7);Mt("gggg",X7,q7);Mt("GGGGG",KB,XB);Mt("ggggg",KB,XB);cC(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=In(t)});cC(["gg","GG"],function(t,e,n,i){e[i]=gt.parseTwoDigitYear(t)});function bUt(t){return bAe.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function wUt(t){return bAe.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function _Ut(){return Of(this.year(),1,4)}function SUt(){return Of(this.isoWeekYear(),1,4)}function AUt(){var t=this.localeData()._week;return Of(this.year(),t.dow,t.doy)}function MUt(){var t=this.localeData()._week;return Of(this.weekYear(),t.dow,t.doy)}function bAe(t,e,n,i,r){var s;return t==null?Z2(this,i,r).year:(s=Of(t,i,r),e>s&&(e=s),EUt.call(this,t,e,n,i,r))}function EUt(t,e,n,i,r){var s=QSe(t,e,n,i,r),o=J2(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Wt("Q",0,"Qo","quarter");Io("quarter","Q");Bo("quarter",7);Mt("Q",jSe);_i("Q",function(t,e){e[bf]=(In(t)-1)*3});function CUt(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}Wt("D",["DD",2],"Do","date");Io("date","D");Bo("date",9);Mt("D",er);Mt("DD",er,Ol);Mt("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});_i(["D","DD"],kh);_i("Do",function(t,e){e[kh]=In(t.match(er)[0])});var wAe=o_("Date",!0);Wt("DDD",["DDDD",3],"DDDo","dayOfYear");Io("dayOfYear","DDD");Bo("dayOfYear",4);Mt("DDD",YB);Mt("DDDD",VSe);_i(["DDD","DDDD"],function(t,e,n){n._dayOfYear=In(t)});function TUt(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}Wt("m",["mm",2],0,"minute");Io("minute","m");Bo("minute",14);Mt("m",er);Mt("mm",er,Ol);_i(["m","mm"],_u);var PUt=o_("Minutes",!1);Wt("s",["ss",2],0,"second");Io("second","s");Bo("second",15);Mt("s",er);Mt("ss",er,Ol);_i(["s","ss"],wf);var DUt=o_("Seconds",!1);Wt("S",0,0,function(){return~~(this.millisecond()/100)});Wt(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Wt(0,["SSS",3],0,"millisecond");Wt(0,["SSSS",4],0,function(){return this.millisecond()*10});Wt(0,["SSSSS",5],0,function(){return this.millisecond()*100});Wt(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Wt(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Wt(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Wt(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Io("millisecond","ms");Bo("millisecond",16);Mt("S",YB,jSe);Mt("SS",YB,Ol);Mt("SSS",YB,VSe);var wm,_Ae;for(wm="SSSS";wm.length<=9;wm+="S")Mt(wm,a_);function OUt(t,e){e[N0]=In(("0."+t)*1e3)}for(wm="S";wm.length<=9;wm+="S")_i(wm,OUt);_Ae=o_("Milliseconds",!1);Wt("z",0,0,"zoneAbbr");Wt("zz",0,0,"zoneName");function LUt(){return this._isUTC?"UTC":""}function RUt(){return this._isUTC?"Coordinated Universal Time":""}var ot=aC.prototype;ot.add=Mzt;ot.calendar=Lzt;ot.clone=Rzt;ot.diff=Uzt;ot.endOf=Kzt;ot.format=Vzt;ot.from=Wzt;ot.fromNow=$zt;ot.to=qzt;ot.toNow=Xzt;ot.get=B4t;ot.invalidAt=sUt;ot.isAfter=Izt;ot.isBefore=Bzt;ot.isBetween=kzt;ot.isSame=Fzt;ot.isSameOrAfter=Nzt;ot.isSameOrBefore=zzt;ot.isValid=iUt;ot.lang=mAe;ot.locale=pAe;ot.localeData=gAe;ot.max=izt;ot.min=nzt;ot.parsingFlags=rUt;ot.set=k4t;ot.startOf=Yzt;ot.subtract=Ezt;ot.toArray=eUt;ot.toObject=tUt;ot.toDate=Qzt;ot.toISOString=Hzt;ot.inspect=jzt;typeof Symbol<"u"&&Symbol.for!=null&&(ot[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ot.toJSON=nUt;ot.toString=Gzt;ot.unix=Zzt;ot.valueOf=Jzt;ot.creationData=oUt;ot.eraName=uUt;ot.eraNarrow=hUt;ot.eraAbbr=dUt;ot.eraYear=fUt;ot.year=ZSe;ot.isLeapYear=t5t;ot.weekYear=bUt;ot.isoWeekYear=wUt;ot.quarter=ot.quarters=CUt;ot.month=KSe;ot.daysInMonth=Z4t;ot.week=ot.weeks=a5t;ot.isoWeek=ot.isoWeeks=l5t;ot.weeksInYear=AUt;ot.weeksInWeekYear=MUt;ot.isoWeeksInYear=_Ut;ot.isoWeeksInISOWeekYear=SUt;ot.date=wAe;ot.day=ot.days=w5t;ot.weekday=_5t;ot.isoWeekday=S5t;ot.dayOfYear=TUt;ot.hour=ot.hours=D5t;ot.minute=ot.minutes=PUt;ot.second=ot.seconds=DUt;ot.millisecond=ot.milliseconds=_Ae;ot.utcOffset=dzt;ot.utc=pzt;ot.local=mzt;ot.parseZone=gzt;ot.hasAlignedHourOffset=vzt;ot.isDST=yzt;ot.isLocal=bzt;ot.isUtcOffset=wzt;ot.isUtc=uAe;ot.isUTC=uAe;ot.zoneAbbr=LUt;ot.zoneName=RUt;ot.dates=Wc("dates accessor is deprecated. Use date instead.",wAe);ot.months=Wc("months accessor is deprecated. Use month instead",KSe);ot.years=Wc("years accessor is deprecated. Use year instead",ZSe);ot.zone=Wc("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",fzt);ot.isDSTShifted=Wc("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",xzt);function IUt(t){return Qi(t*1e3)}function BUt(){return Qi.apply(null,arguments).parseZone()}function SAe(t){return t}var ei=V7.prototype;ei.calendar=w4t;ei.longDateFormat=M4t;ei.invalidDate=C4t;ei.ordinal=D4t;ei.preparse=SAe;ei.postformat=SAe;ei.relativeTime=L4t;ei.pastFuture=R4t;ei.set=x4t;ei.eras=aUt;ei.erasParse=lUt;ei.erasConvertYear=cUt;ei.erasAbbrRegex=mUt;ei.erasNameRegex=pUt;ei.erasNarrowRegex=gUt;ei.months=X4t;ei.monthsShort=Y4t;ei.monthsParse=J4t;ei.monthsRegex=e5t;ei.monthsShortRegex=Q4t;ei.week=i5t;ei.firstDayOfYear=o5t;ei.firstDayOfWeek=s5t;ei.weekdays=g5t;ei.weekdaysMin=y5t;ei.weekdaysShort=v5t;ei.weekdaysParse=b5t;ei.weekdaysRegex=A5t;ei.weekdaysShortRegex=M5t;ei.weekdaysMinRegex=E5t;ei.isPM=T5t;ei.meridiem=O5t;function AR(t,e,n,i){var r=rp(),s=xd().set(i,e);return r[n](s,t)}function AAe(t,e,n){if(qf(t)&&(e=t,t=void 0),t=t||"",e!=null)return AR(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=AR(t,i,n,"month");return r}function oq(t,e,n,i){typeof t=="boolean"?(qf(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,qf(e)&&(n=e,e=void 0),e=e||"");var r=rp(),s=t?r._week.dow:0,o,a=[];if(n!=null)return AR(e,(n+s)%7,i,"day");for(o=0;o<7;o++)a[o]=AR(e,(o+s)%7,i,"day");return a}function kUt(t,e){return AAe(t,e,"months")}function FUt(t,e){return AAe(t,e,"monthsShort")}function NUt(t,e,n){return oq(t,e,n,"weekdays")}function zUt(t,e,n){return oq(t,e,n,"weekdaysShort")}function UUt(t,e,n){return oq(t,e,n,"weekdaysMin")}Um("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=In(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});gt.lang=Wc("moment.lang is deprecated. Use moment.locale instead.",Um);gt.langData=Wc("moment.langData is deprecated. Use moment.localeData instead.",rp);var Jd=Math.abs;function GUt(){var t=this._data;return this._milliseconds=Jd(this._milliseconds),this._days=Jd(this._days),this._months=Jd(this._months),t.milliseconds=Jd(t.milliseconds),t.seconds=Jd(t.seconds),t.minutes=Jd(t.minutes),t.hours=Jd(t.hours),t.months=Jd(t.months),t.years=Jd(t.years),this}function MAe(t,e,n,i){var r=Yu(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function HUt(t,e){return MAe(this,t,e,1)}function jUt(t,e){return MAe(this,t,e,-1)}function Bce(t){return t<0?Math.floor(t):Math.ceil(t)}function VUt(){var t=this._milliseconds,e=this._days,n=this._months,i=this._data,r,s,o,a,l;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=Bce(uV(n)+e)*864e5,e=0,n=0),i.milliseconds=t%1e3,r=xc(t/1e3),i.seconds=r%60,s=xc(r/60),i.minutes=s%60,o=xc(s/60),i.hours=o%24,e+=xc(o/24),l=xc(EAe(e)),n+=l,e-=Bce(uV(l)),a=xc(n/12),n%=12,i.days=e,i.months=n,i.years=a,this}function EAe(t){return t*4800/146097}function uV(t){return t*146097/4800}function WUt(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if(t=$c(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+i/864e5,n=this._months+EAe(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(uV(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+t)}}function $Ut(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+In(this._months/12)*31536e6:NaN}function sp(t){return function(){return this.as(t)}}var qUt=sp("ms"),XUt=sp("s"),YUt=sp("m"),KUt=sp("h"),JUt=sp("d"),ZUt=sp("w"),QUt=sp("M"),e6t=sp("Q"),t6t=sp("y");function n6t(){return Yu(this)}function i6t(t){return t=$c(t),this.isValid()?this[t+"s"]():NaN}function ly(t){return function(){return this.isValid()?this._data[t]:NaN}}var r6t=ly("milliseconds"),s6t=ly("seconds"),o6t=ly("minutes"),a6t=ly("hours"),l6t=ly("days"),c6t=ly("months"),u6t=ly("years");function h6t(){return xc(this.days()/7)}var of=Math.round,Gx={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function d6t(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function f6t(t,e,n,i){var r=Yu(t).abs(),s=of(r.as("s")),o=of(r.as("m")),a=of(r.as("h")),l=of(r.as("d")),c=of(r.as("M")),h=of(r.as("w")),u=of(r.as("y")),d=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||o<=1&&["m"]||o<n.m&&["mm",o]||a<=1&&["h"]||a<n.h&&["hh",a]||l<=1&&["d"]||l<n.d&&["dd",l];return n.w!=null&&(d=d||h<=1&&["w"]||h<n.w&&["ww",h]),d=d||c<=1&&["M"]||c<n.M&&["MM",c]||u<=1&&["y"]||["yy",u],d[2]=e,d[3]=+t>0,d[4]=i,d6t.apply(null,d)}function p6t(t){return t===void 0?of:typeof t=="function"?(of=t,!0):!1}function m6t(t,e){return Gx[t]===void 0?!1:e===void 0?Gx[t]:(Gx[t]=e,t==="s"&&(Gx.ss=e-1),!0)}function g6t(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,i=Gx,r,s;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(i=Object.assign({},Gx,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),r=this.localeData(),s=f6t(this,!n,i,r),n&&(s=r.pastFuture(+this,s)),r.postformat(s)}var zz=Math.abs;function P1(t){return(t>0)-(t<0)||+t}function ik(){if(!this.isValid())return this.localeData().invalidDate();var t=zz(this._milliseconds)/1e3,e=zz(this._days),n=zz(this._months),i,r,s,o,a=this.asSeconds(),l,c,h,u;return a?(i=xc(t/60),r=xc(i/60),t%=60,i%=60,s=xc(n/12),n%=12,o=t?t.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=P1(this._months)!==P1(a)?"-":"",h=P1(this._days)!==P1(a)?"-":"",u=P1(this._milliseconds)!==P1(a)?"-":"",l+"P"+(s?c+s+"Y":"")+(n?c+n+"M":"")+(e?h+e+"D":"")+(r||i||t?"T":"")+(r?u+r+"H":"")+(i?u+i+"M":"")+(t?u+o+"S":"")):"P0D"}var Vn=tk.prototype;Vn.isValid=lzt;Vn.abs=GUt;Vn.add=HUt;Vn.subtract=jUt;Vn.as=WUt;Vn.asMilliseconds=qUt;Vn.asSeconds=XUt;Vn.asMinutes=YUt;Vn.asHours=KUt;Vn.asDays=JUt;Vn.asWeeks=ZUt;Vn.asMonths=QUt;Vn.asQuarters=e6t;Vn.asYears=t6t;Vn.valueOf=$Ut;Vn._bubble=VUt;Vn.clone=n6t;Vn.get=i6t;Vn.milliseconds=r6t;Vn.seconds=s6t;Vn.minutes=o6t;Vn.hours=a6t;Vn.days=l6t;Vn.weeks=h6t;Vn.months=c6t;Vn.years=u6t;Vn.humanize=g6t;Vn.toISOString=ik;Vn.toString=ik;Vn.toJSON=ik;Vn.locale=pAe;Vn.localeData=gAe;Vn.toIsoString=Wc("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ik);Vn.lang=mAe;Wt("X",0,0,"unix");Wt("x",0,0,"valueOf");Mt("x",JB);Mt("X",N4t);_i("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});_i("x",function(t,e,n){n._d=new Date(In(t))});//! moment.js
gt.version="2.29.4";v4t(Qi);gt.fn=ot;gt.min=rzt;gt.max=szt;gt.now=ozt;gt.utc=xd;gt.unix=IUt;gt.months=kUt;gt.isDate=oC;gt.locale=Um;gt.invalid=$B;gt.duration=Yu;gt.isMoment=Gu;gt.weekdays=NUt;gt.parseZone=BUt;gt.localeData=rp;gt.isDuration=iO;gt.monthsShort=FUt;gt.weekdaysMin=UUt;gt.defineLocale=Z7;gt.updateLocale=B5t;gt.locales=k5t;gt.weekdaysShort=zUt;gt.normalizeUnits=$c;gt.relativeTimeRounding=p6t;gt.relativeTimeThreshold=m6t;gt.calendarFormat=Ozt;gt.prototype=ot;gt.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function CAe(t){return rg({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8.4449 0.608765C8.0183 -0.107015 6.9817 -0.107015 6.55509 0.608766L0.161178 11.3368C-0.275824 12.07 0.252503 13 1.10608 13H13.8939C14.7475 13 15.2758 12.07 14.8388 11.3368L8.4449 0.608765ZM7.4141 1.12073C7.45288 1.05566 7.54712 1.05566 7.5859 1.12073L13.9798 11.8488C14.0196 11.9154 13.9715 12 13.8939 12H1.10608C1.02849 12 0.980454 11.9154 1.02018 11.8488L7.4141 1.12073ZM6.8269 4.48611C6.81221 4.10423 7.11783 3.78663 7.5 3.78663C7.88217 3.78663 8.18778 4.10423 8.1731 4.48612L8.01921 8.48701C8.00848 8.766 7.7792 8.98664 7.5 8.98664C7.2208 8.98664 6.99151 8.766 6.98078 8.48701L6.8269 4.48611ZM8.24989 10.476C8.24989 10.8902 7.9141 11.226 7.49989 11.226C7.08567 11.226 6.74989 10.8902 6.74989 10.476C6.74989 10.0618 7.08567 9.72599 7.49989 9.72599C7.9141 9.72599 8.24989 10.0618 8.24989 10.476Z",fill:"currentColor"}}]})(t)}const v6t=()=>{Ml(Gt);const[t,e]=W.useState(Jo),[n,i]=W.useState([{Price:200,Time:"2023-04-08 00:00:00",From:"u***r"},{Price:190,Time:"2023-04-08 01:45:00",From:"a***m"},{Price:180,Time:"2023-04-08 01:45:00",From:"b***c"},{Price:170,Time:"2023-04-08 01:45:00",From:"d***d"},{Price:150,Time:"2023-04-08 01:45:00",From:"a***a"}]),[r,s]=W.useState(window.innerWidth);W.useEffect(()=>{const R=()=>{s(window.innerWidth)};return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]);const[o,a]=W.useState(!1),l=()=>{a(!o)},{enqueueSnackbar:c}=oW(),[h,u]=W.useState(!1),[d,f]=W.useState(RTe());let p=ng();const m=LTe(),[g,v]=W.useState(!1),y=()=>v(!0),x=()=>v(!1),b={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"auto",p:4},S={position:"absolute",top:"50%",left:"50%",width:"auto",p:4},A=()=>{d?y():c("You need to login to use this feature",{variant:"error"})},E=()=>{Gt.page="otherGift",p("/auction_house_project/otherGift")},M=()=>{m(),f(!1)},C=()=>{Gt.page="signin",p("/auction_house_project/signin")},T=()=>{Gt.page="home",p("/auction_house_project/home")},D=()=>{Gt.page="profile",p("/auction_house_project/profile")},L=()=>{c("Bid successfully",{variant:"success"}),x();const R=t.price+10;e({...t,price:R});const H=n;H.unshift({Price:R,Time:gt().format("YYYY-MM-DD HH:mm:ss"),From:"u***r"}),i(H)},I=()=>{Gt.page="bidedItem",p("/auction_house_project/bidedItem")};return et(jn.section,{children:[ne(jn.div,{className:"absolute z-10 top-5 left-5",...pl,children:ne(bn,{type:"outline",title:ne(bw,{size:18}),handleClick:()=>T(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm"})}),ne(jn.div,{className:"absolute z-10 top-5 right-5",...pl,children:d?r<=960?et(Qo,{children:[ne("div",{className:"flex flex-row justify-end",children:ne("button",{className:" items-end  bg-[#06B6D4] text-dark rounded-lg font-bold text-sm px-4 py-2.5 mr-2",onClick:()=>l(),children:ne(vE,{size:24})})}),ne(zb,{in:o,timeout:"auto",unmountOnExit:!0,className:"",children:et("div",{className:"mt-5 grid grid-cols-1",children:[ne(bn,{type:"filled",title:"All Products",handleClick:()=>E(),customStyles:"w-full px-4 py-2.5 font-bold text-sm"}),ne(bn,{type:"filled",title:"Profile",handleClick:()=>D(),customStyles:"w-full px-4 py-2.5 font-bold text-sm mt-2"}),et("button",{className:"relative bg-[#06B6D4] text-dark rounded-lg font-bold text-sm px-4 py-2.5 mt-2 w-full",onClick:()=>I(),children:[ne("span",{className:"inline-flex rounded-full bg-red-500 text-dark w-4 h-4 absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2"}),"Acquired Item"]}),ne(bn,{type:"filled",title:"Logout",handleClick:()=>M(),customStyles:"w-full px-4 py-2.5 font-bold text-sm mt-2"})]})})]}):et(Qo,{children:[ne(bn,{type:"filled",title:"All Products",handleClick:()=>E(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm mr-2"}),ne(bn,{type:"filled",title:"Profile",handleClick:()=>D(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm mr-2"}),et("button",{className:"relative bg-[#06B6D4] text-dark rounded-lg font-bold text-sm px-4 py-2.5 mr-2",onClick:()=>I(),children:[ne("span",{className:"inline-flex rounded-full bg-red-500 text-dark w-4 h-4 absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2"}),"Acquired Item"]}),ne(bn,{type:"filled",title:"Logout",handleClick:()=>M(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm"})]}):et(Qo,{children:[ne(bn,{type:"filled",title:"All Products",handleClick:()=>E(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm mr-2"}),ne(bn,{type:"filled",title:"Sign In",handleClick:()=>C(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm"})]})}),ne(jn.div,{className:"absolute z-10 top-[45%] right-[0%] md:top-[18%] md:right-[8%] max-w-[500px] md:max-w-[550px] mx-2",...yLe,children:et("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8 md:p-10 lg:p-12 w-full max-w-2xl mx-auto",children:[ne("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold  text-gray-600 mb-2",children:Jo.title}),et("div",{className:" text-xs sm:text-sm md:text-base lg:text-lg font-normal mb-4 sm:mb-6 text-[#04111d]",children:["Product ID: #",Jo.id]}),ne("div",{className:" text-xs  sm:text-sm md:text-base lg:text-lg text-gray-600 mb-4 sm:mb-6 text-justify",children:Jo.description}),et("div",{className:"flex justify-center items-center border border-[#e3e3e3] p-5  text-[#646d75] mb-3 text-xs  sm:text-sm md:text-base lg:text-lg text-center",children:[ne(lFe,{color:"#646d75",className:"text-xs  sm:text-sm md:text-base lg:text-lg"}),"  Sale ends in ",gt(Jo.endDate).format("DD-MMM-YYYY HH:mm:ss")]}),et("div",{className:"flex flex-col sm:flex-col mb-4  border rounded p-5",children:[et("div",{className:"text-[0.65rem] sm:text-xs md:text-sm lg:text-base font-bold text-gray-500 mb-2 sm:mb-0",children:["Current Price   ",et("span",{className:" text-[0.5rem] sm:text-[0.65rem] md:text-xs lg:text-sm",children:["(Start price: $ ",Jo.startPrice,")"]})]}),et("div",{className:" sm:mb-0 flex justify-between items-center",children:[et("span",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold  text-[#04111d]",children:["$",t.price]}),et("button",{onClick:()=>A(),className:"bg-[#06B6D4] hover:bg-[#06A4BF] text-white font-bold py-2 px-4 rounded flex items-center",children:["Make Offer  ",ne(p4t,{})]})]})]}),et("div",{className:"mb-5 border rounded",children:[et("button",{className:" w-full flex h-[3rem] items-center justify-between text-dark px-4 py-2 rounded",onClick:()=>u(!h),children:[et("div",{className:"flex justify-center items-center",children:[ne(cFe,{}),"   ",ne("span",{className:"mr-2",children:"History"})]}),h?ne(g4t,{}):ne(m4t,{})]}),et(zb,{in:h,timeout:"auto",unmountOnExit:!0,children:[et("div",{className:"border flex justify-between items-center",children:[ne("div",{className:"flex-1 text-center font-semibold",children:"Price"}),ne("div",{className:" flex-[2_2_0%] text-center font-semibold",children:"Time"}),ne("div",{className:"flex-1 text-center font-semibold",children:"From"})]}),ne("div",{className:"mt-2  overflow-scroll max-h-[10rem]",children:ne(eUe,{component:dze,children:et(Rze,{sx:{},"aria-label":"simple table",children:[ne(aUe,{}),ne(Gze,{children:n.map((R,H)=>et(pUe,{sx:{},children:[et(fN,{align:"center",children:["$",R.Price]}),ne(fN,{align:"center",children:R.Time}),ne(fN,{align:"center",children:R.From})]},H))})]})})})]})]})]})}),ne(jn.div,{children:ne("div",{className:"rounded",children:ne(Fme,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:g,onClose:x,closeAfterTransition:!0,slots:{backdrop:v9},slotProps:{backdrop:{timeout:500}},children:ne(g9,{in:g,children:ne(kme,{sx:r<=960?S:b,children:et("div",{className:"bg-white rounded-lg md:max-w-md md:mx-auto p-4 fixed inset-x-0 bottom-0 z-50 mb-[15rem] md:mb-4 mx-4 md:relative",children:[et("div",{className:"md:flex items-center",children:[ne("div",{className:"rounded-full border border-gray-300 flex items-center justify-center w-16 h-16 flex-shrink-0 mx-auto",children:ne(CAe,{size:24})}),et("div",{className:"mt-4 md:mt-0 md:ml-6 text-center md:text-left",children:[ne("p",{className:"font-bold",children:"Confirm Your Offer"}),et("p",{className:"text-sm text-gray-700 mt-1 text-justify",children:["Each bid will increase the price by ",ne("strong",{children:"10$"})," of the current price. You can bid as many times as you want."]}),ne("p",{className:" text-xs text-gray-700  text-justify italic my-3",children:"*The highest bidder will win the auction."}),et("p",{className:"text-sm text-gray-700 mt-1 text-justify",children:["New Price: ",et("strong",{children:["$",t.price+10]})]})]})]}),et("div",{className:"text-center md:text-right mt-4 md:flex md:justify-end",children:[ne("button",{className:"block w-full md:inline-block md:w-auto px-4 py-3 md:py-2 bg-gray-200 rounded-lg font-semibold text-sm md:ml-2 md:order-2",onClick:()=>L(),children:"Confirm"}),ne("button",{className:`block w-full md:inline-block md:w-auto px-4 py-3 md:py-2 bg-red-200 text-red-700 rounded-lg font-semibold text-sm mt-4
                                    md:mt-0 md:order-1`,onClick:x,children:"Cancel"})]})]})})})})})})]})},y6t=()=>{Ml(Gt);const[t,e]=ue.useState(Jo);let n=ng();const i=()=>{Gt.page="home",n("/auction_house_project/home")},r=()=>{Gt.page="auction",n("/auction_house_project/auction")},s=o=>{switch(Gt.show=o,o){case"ship":e(Jo);break;case"island":e(CM);break;case"cup":e(EM);break;case"ball":e(MM);break;case"shiba":e(AM);break;default:e(Jo);break}};return et(jn.section,{className:"signin",...HO,children:[ne(jn.div,{className:"absolute z-10 top-5 left-5",...pl,children:ne(bn,{type:"outline",title:ne(bw,{size:18}),handleClick:()=>i(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm"})}),ne(jn.div,{className:"absolute z-10 top-5 right-5",...pl,children:ne(bn,{type:"filled",title:"Auction",handleClick:()=>r(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm"})}),ne(jn.div,{className:"z-10",children:et("div",{className:"model-selector",children:[et("div",{onClick:()=>s("ship"),children:[ne("img",{src:"ship.jpg",alt:Jo.title}),ne("h4",{children:Jo.title})]}),et("div",{onClick:()=>s("shiba"),children:[ne("img",{src:"shiba.jpg",alt:AM.title}),ne("h4",{children:AM.title})]}),et("div",{onClick:()=>s("ball"),children:[ne("img",{src:"ball.jpg",alt:MM.title}),ne("h4",{children:MM.title})]}),et("div",{onClick:()=>s("cup"),children:[ne("img",{src:"catcup.jpg",alt:EM.title}),ne("h4",{children:EM.title})]}),et("div",{onClick:()=>s("island"),children:[ne("img",{src:"island.jpg",alt:CM.title}),ne("h4",{children:CM.title})]})]})}),ne(jn.div,{className:"absolute z-10 bottom-5 top-[32rem] right-[1%] left-[1%] md:top-[36rem] md:right-[48%]",children:et("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8 md:p-10 lg:p-12 w-full max-w-2xl mx-auto",children:[ne("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold  text-gray-600 mb-2",children:t.title}),et("div",{className:" text-xs sm:text-sm md:text-base lg:text-lg font-normal mb-4 sm:mb-6 text-[#04111d]",children:["Product ID: #",t.id]}),t.title==="Ship in Bottle"?ne("div",{className:"bg-green-500 text-white w-20 h-20 flex justify-center items-center absolute top-0 right-0 transform -translate-x-1/2 -translate-y-1/2 rotate-45",children:ne("span",{className:"text-lg font-bold",children:"On Sale"})}):ne("div",{className:"bg-red-500 text-white w-20 h-20 flex justify-center items-center absolute top-0 right-0 transform -translate-x-1/2 -translate-y-1/2 rotate-45",children:ne("span",{className:"text-lg font-bold",children:"SOLD"})}),ne("div",{className:" text-xs  sm:text-sm md:text-base lg:text-lg text-gray-600 mb-4 sm:mb-6 text-justify",children:t.description})]})})]})},x6t=({tab:t,isFilterTab:e,isActiveTab:n,handleClick:i,okState:r})=>{const s=Ml(Gt),o=e&&n?{backgroundColor:s.color,opacity:.5}:{backgroundColor:"transparent",opacity:1},a=()=>{if(t.name!="ColorPicker")return t.name=="Upload Logo"||t.name=="AI Helper"?void 0:t.name=="Logo"||t.name=="Textures"?r?ne("div",{className:"absolute top-[1rem] right-[-1.3rem] w-6 h-6 mr-2 rounded-full bg-green-500 text-xs flex justify-center items-center text-white",children:"On"}):ne("div",{className:"absolute top-[1rem] right-[-1.3rem] w-6 h-6 mr-2 rounded-full bg-gray-500 text-xs flex justify-center items-center text-white",children:"Off"}):r?ne("div",{className:"absolute top-[-1rem] right-[-1rem] text-green-500 text-3xl",children:"✓"}):ne("div",{className:"absolute top-[-1rem] right-[-0.7rem] text-red-500 text-3xl",children:"?"})};return et("div",{className:"relative flex flex-wrap justify-center",children:[ne("div",{className:`tab-btn ${e?"rounded-full glassmorphism":"rounded-4"}`,onClick:i,style:o,children:ne("img",{src:t.icon,alt:t.name,className:`${e?"w-2/3 h-2/3":"w-11/12 h-11/12 object-contain"}`})},t.name),a(),ne("span",{className:" text-sm",children:t.name})]})},kce=({prompt:t,setPrompt:e,handleSubmit:n,name:i,msg:r})=>et("div",{className:"aipicker-container",children:[ne("textarea",{placeholder:r,rows:5,value:t,onChange:s=>e(s.target.value),className:"aipicker-textarea"}),ne("div",{className:"flex flex-wrap gap-3",children:ne(bn,{type:"filled",title:i=="AI Helper"?"Ask":"Save",handleClick:()=>n(i),customStyles:"text-xs"})})]});var Sc={},uC={},b6t=Kve,w6t=ftt;function _6t(t,e){return t&&b6t(t,w6t(e))}var aq=_6t,S6t=Jv,A6t=bW,M6t=tp,E6t="[object Object]",C6t=Function.prototype,T6t=Object.prototype,TAe=C6t.toString,P6t=T6t.hasOwnProperty,D6t=TAe.call(Object);function O6t(t){if(!M6t(t)||S6t(t)!=E6t)return!1;var e=A6t(t);if(e===null)return!0;var n=P6t.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&TAe.call(n)==D6t}var L6t=O6t;Object.defineProperty(uC,"__esModule",{value:!0});uC.flattenNames=void 0;var R6t=Ort,I6t=rk(R6t),B6t=aq,k6t=rk(B6t),F6t=L6t,N6t=rk(F6t),z6t=ltt,U6t=rk(z6t);function rk(t){return t&&t.__esModule?t:{default:t}}var G6t=uC.flattenNames=function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[];return(0,U6t.default)(e,function(i){Array.isArray(i)?t(i).map(function(r){return n.push(r)}):(0,N6t.default)(i)?(0,k6t.default)(i,function(r,s){r===!0&&n.push(s),n.push(s+"-"+r)}):(0,I6t.default)(i)&&n.push(i)}),n};uC.default=G6t;var hC={},H6t=Mrt,j6t=1,V6t=4;function W6t(t){return H6t(t,j6t|V6t)}var $6t=W6t;Object.defineProperty(hC,"__esModule",{value:!0});hC.mergeClasses=void 0;var q6t=aq,X6t=PAe(q6t),Y6t=$6t,K6t=PAe(Y6t),J6t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function PAe(t){return t&&t.__esModule?t:{default:t}}var Z6t=hC.mergeClasses=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=e.default&&(0,K6t.default)(e.default)||{};return n.map(function(r){var s=e[r];return s&&(0,X6t.default)(s,function(o,a){i[a]||(i[a]={}),i[a]=J6t({},i[a],s[a])}),r}),i};hC.default=Z6t;var dC={};Object.defineProperty(dC,"__esModule",{value:!0});dC.autoprefix=void 0;var Q6t=aq,Fce=tGt(Q6t),eGt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function tGt(t){return t&&t.__esModule?t:{default:t}}var nGt={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var n=e&&e.split(" ");return{position:"absolute",top:n&&n[0],right:n&&n[1],bottom:n&&n[2],left:n&&n[3]}},extend:function(e,n){var i=n[e];return i||{extend:e}}},iGt=dC.autoprefix=function(e){var n={};return(0,Fce.default)(e,function(i,r){var s={};(0,Fce.default)(i,function(o,a){var l=nGt[a];l?s=eGt({},s,l(o)):s[a]=o}),n[r]=s}),n};dC.default=iGt;var fC={};Object.defineProperty(fC,"__esModule",{value:!0});fC.hover=void 0;var rGt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sGt=W,Uz=oGt(sGt);function oGt(t){return t&&t.__esModule?t:{default:t}}function aGt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nce(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function lGt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var cGt=fC.hover=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(i){lGt(r,i);function r(){var s,o,a,l;aGt(this,r);for(var c=arguments.length,h=Array(c),u=0;u<c;u++)h[u]=arguments[u];return l=(o=(a=Nce(this,(s=r.__proto__||Object.getPrototypeOf(r)).call.apply(s,[this].concat(h))),a),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return Uz.default.createElement(n,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},Uz.default.createElement(e,rGt({},a.props,a.state)))},o),Nce(a,l)}return r}(Uz.default.Component)};fC.default=cGt;var pC={};Object.defineProperty(pC,"__esModule",{value:!0});pC.active=void 0;var uGt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hGt=W,Gz=dGt(hGt);function dGt(t){return t&&t.__esModule?t:{default:t}}function fGt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zce(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function pGt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var mGt=pC.active=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(i){pGt(r,i);function r(){var s,o,a,l;fGt(this,r);for(var c=arguments.length,h=Array(c),u=0;u<c;u++)h[u]=arguments[u];return l=(o=(a=zce(this,(s=r.__proto__||Object.getPrototypeOf(r)).call.apply(s,[this].concat(h))),a),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return Gz.default.createElement(n,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},Gz.default.createElement(e,uGt({},a.props,a.state)))},o),zce(a,l)}return r}(Gz.default.Component)};pC.default=mGt;var lq={};Object.defineProperty(lq,"__esModule",{value:!0});var gGt=function(e,n){var i={},r=function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[o]=a};return e===0&&r("first-child"),e===n-1&&r("last-child"),(e===0||e%2===0)&&r("even"),Math.abs(e%2)===1&&r("odd"),r("nth-child",e),i};lq.default=gGt;Object.defineProperty(Sc,"__esModule",{value:!0});Sc.ReactCSS=Sc.loop=Sc.handleActive=cq=Sc.handleHover=Sc.hover=void 0;var vGt=uC,yGt=l_(vGt),xGt=hC,bGt=l_(xGt),wGt=dC,_Gt=l_(wGt),SGt=fC,DAe=l_(SGt),AGt=pC,MGt=l_(AGt),EGt=lq,CGt=l_(EGt);function l_(t){return t&&t.__esModule?t:{default:t}}Sc.hover=DAe.default;var cq=Sc.handleHover=DAe.default;Sc.handleActive=MGt.default;Sc.loop=CGt.default;var TGt=Sc.ReactCSS=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var s=(0,yGt.default)(i),o=(0,bGt.default)(e,s);return(0,_Gt.default)(o)},cn=Sc.default=TGt,PGt=function(e,n,i,r,s){var o=s.clientWidth,a=s.clientHeight,l=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=l-(s.getBoundingClientRect().left+window.pageXOffset),u=c-(s.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var d=void 0;if(u<0?d=0:u>a?d=1:d=Math.round(u*100/a)/100,n.a!==d)return{h:n.h,s:n.s,l:n.l,a:d,source:"rgb"}}else{var f=void 0;if(h<0?f=0:h>o?f=1:f=Math.round(h*100/o)/100,r!==f)return{h:n.h,s:n.s,l:n.l,a:f,source:"rgb"}}return null},Hz={},DGt=function(e,n,i,r){if(typeof document>"u"&&!r)return null;var s=r?new r:document.createElement("canvas");s.width=i*2,s.height=i*2;var o=s.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,s.width,s.height),o.fillStyle=n,o.fillRect(0,0,i,i),o.translate(i,i),o.fillRect(0,0,i,i),s.toDataURL()):null},OGt=function(e,n,i,r){var s=e+"-"+n+"-"+i+(r?"-server":"");if(Hz[s])return Hz[s];var o=DGt(e,n,i,r);return Hz[s]=o,o},Uce=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},c_=function(e){var n=e.white,i=e.grey,r=e.size,s=e.renderers,o=e.borderRadius,a=e.boxShadow,l=e.children,c=cn({default:{grid:{borderRadius:o,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+OGt(n,i,r,s.canvas)+") center left"}}});return W.isValidElement(l)?ue.cloneElement(l,Uce({},l.props,{style:Uce({},l.props.style,c.grid)})):ue.createElement("div",{style:c.grid})};c_.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var LGt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},RGt=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function IGt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gce(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function BGt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var uq=function(t){BGt(e,t);function e(){var n,i,r,s;IGt(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(i=(r=Gce(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(a))),r),r.handleChange=function(c){var h=PGt(c,r.props.hsl,r.props.direction,r.props.a,r.container);h&&typeof r.props.onChange=="function"&&r.props.onChange(h,c)},r.handleMouseDown=function(c){r.handleChange(c),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},i),Gce(r,s)}return RGt(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var i=this,r=this.props.rgb,s=cn({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+r.r+","+r.g+","+r.b+`, 0) 0%,
           rgba(`+r.r+","+r.g+","+r.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:r.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+r.r+","+r.g+","+r.b+`, 0) 0%,
           rgba(`+r.r+","+r.g+","+r.b+", 1) 100%)"},pointer:{left:0,top:r.a*100+"%"}},overwrite:LGt({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return ue.createElement("div",{style:s.alpha},ue.createElement("div",{style:s.checkboard},ue.createElement(c_,{renderers:this.props.renderers})),ue.createElement("div",{style:s.gradient}),ue.createElement("div",{style:s.container,ref:function(a){return i.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},ue.createElement("div",{style:s.pointer},this.props.pointer?ue.createElement(this.props.pointer,this.props):ue.createElement("div",{style:s.slider}))))}}]),e}(W.PureComponent||W.Component),kGt=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function FGt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NGt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zGt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function UGt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var GGt=1,OAe=38,HGt=40,jGt=[OAe,HGt],VGt=function(e){return jGt.indexOf(e)>-1},WGt=function(e){return Number(String(e).replace(/%/g,""))},$Gt=1,Un=function(t){UGt(e,t);function e(n){NGt(this,e);var i=zGt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.handleBlur=function(){i.state.blurValue&&i.setState({value:i.state.blurValue,blurValue:null})},i.handleChange=function(r){i.setUpdatedValue(r.target.value,r)},i.handleKeyDown=function(r){var s=WGt(r.target.value);if(!isNaN(s)&&VGt(r.keyCode)){var o=i.getArrowOffset(),a=r.keyCode===OAe?s+o:s-o;i.setUpdatedValue(a,r)}},i.handleDrag=function(r){if(i.props.dragLabel){var s=Math.round(i.props.value+r.movementX);s>=0&&s<=i.props.dragMax&&i.props.onChange&&i.props.onChange(i.getValueObjectWithLabel(s),r)}},i.handleMouseDown=function(r){i.props.dragLabel&&(r.preventDefault(),i.handleDrag(r),window.addEventListener("mousemove",i.handleDrag),window.addEventListener("mouseup",i.handleMouseUp))},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleDrag),window.removeEventListener("mouseup",i.handleMouseUp)},i.state={value:String(n.value).toUpperCase(),blurValue:String(n.value).toUpperCase()},i.inputId="rc-editable-input-"+$Gt++,i}return kGt(e,[{key:"componentDidUpdate",value:function(i,r){this.props.value!==this.state.value&&(i.value!==this.props.value||r.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(i){return FGt({},this.props.label,i)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||GGt}},{key:"setUpdatedValue",value:function(i,r){var s=this.props.label?this.getValueObjectWithLabel(i):i;this.props.onChange&&this.props.onChange(s,r),this.setState({value:i})}},{key:"render",value:function(){var i=this,r=cn({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return ue.createElement("div",{style:r.wrap},ue.createElement("input",{id:this.inputId,style:r.input,ref:function(o){return i.input=o},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?ue.createElement("label",{htmlFor:this.inputId,style:r.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(W.PureComponent||W.Component),qGt=function(e,n,i,r){var s=r.clientWidth,o=r.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=a-(r.getBoundingClientRect().left+window.pageXOffset),h=l-(r.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var u=void 0;if(h<0)u=359;else if(h>o)u=0;else{var d=-(h*100/o)+100;u=360*d/100}if(i.h!==u)return{h:u,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var f=void 0;if(c<0)f=0;else if(c>s)f=359;else{var p=c*100/s;f=360*p/100}if(i.h!==f)return{h:f,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null},XGt=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function YGt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hce(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function KGt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u_=function(t){KGt(e,t);function e(){var n,i,r,s;YGt(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(i=(r=Hce(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(a))),r),r.handleChange=function(c){var h=qGt(c,r.props.direction,r.props.hsl,r.container);h&&typeof r.props.onChange=="function"&&r.props.onChange(h,c)},r.handleMouseDown=function(c){r.handleChange(c),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},i),Hce(r,s)}return XGt(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var i=this,r=this.props.direction,s=r===void 0?"horizontal":r,o=cn({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return ue.createElement("div",{style:o.hue},ue.createElement("div",{className:"hue-"+s,style:o.container,ref:function(l){return i.container=l},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},ue.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),ue.createElement("div",{style:o.pointer},this.props.pointer?ue.createElement(this.props.pointer,this.props):ue.createElement("div",{style:o.slider}))))}}]),e}(W.PureComponent||W.Component);function hV(t,e,n){(n!==void 0&&!hE(t[e],n)||n===void 0&&!(e in t))&&V8(t,e,n)}function JGt(t){return function(e,n,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[t?a:++r];if(n(s[l],l,s)===!1)break}return e}}var ZGt=JGt();const LAe=ZGt;function QGt(t){return Qh(t)&&xw(t)}function dV(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function eHt(t){return dE(t,pE(t))}function tHt(t,e,n,i,r,s,o){var a=dV(t,n),l=dV(e,n),c=o.get(l);if(c){hV(t,n,c);return}var h=s?s(a,l,n+"",t,e,o):void 0,u=h===void 0;if(u){var d=ta(l),f=!d&&s2(l),p=!d&&!f&&X8(l);h=l,d||f||p?ta(a)?h=a:QGt(a)?h=K8(a):f?(u=!1,h=Npe(l,!0)):p?(u=!1,h=jpe(l,!0)):h=[]:O6(l)||WO(l)?(h=a,WO(a)?h=eHt(a):(!wl(a)||j8(a))&&(h=Vpe(l))):u=!1}u&&(o.set(l,h),r(h,l,i,s,o),o.delete(l)),hV(t,n,h)}function RAe(t,e,n,i,r){t!==e&&LAe(e,function(s,o){if(r||(r=new Eu),wl(s))tHt(t,e,o,n,RAe,i,r);else{var a=i?i(dV(t,o),s,o+"",t,e,r):void 0;a===void 0&&(a=s),hV(t,o,a)}},pE)}function sk(t){return t}function nHt(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var jce=Math.max;function iHt(t,e,n){return e=jce(e===void 0?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=jce(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),nHt(t,this,a)}}function rHt(t){return function(){return t}}var sHt=VO?function(t,e){return VO(t,"toString",{configurable:!0,enumerable:!1,value:rHt(e),writable:!0})}:sk;const oHt=sHt;var aHt=800,lHt=16,cHt=Date.now;function uHt(t){var e=0,n=0;return function(){var i=cHt(),r=lHt-(i-n);if(n=i,r>0){if(++e>=aHt)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var hHt=uHt(oHt);const dHt=hHt;function fHt(t,e){return dHt(iHt(t,e,sk),t+"")}function pHt(t,e,n){if(!wl(n))return!1;var i=typeof e;return(i=="number"?xw(n)&&W8(e,n.length):i=="string"&&e in n)?hE(n[e],t):!1}function mHt(t){return fHt(function(e,n){var i=-1,r=n.length,s=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(r--,s):void 0,o&&pHt(n[0],n[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var a=n[i];a&&t(e,a,i,s)}return e})}var gHt=mHt(function(t,e,n){RAe(t,e,n)});const ka=gHt;var mC=function(e){var n=e.zDepth,i=e.radius,r=e.background,s=e.children,o=e.styles,a=o===void 0?{}:o,l=cn(ka({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+n+"px "+n*4+"px rgba(0,0,0,.24)",borderRadius:i,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":n===1});return ue.createElement("div",{style:l.wrap},ue.createElement("div",{style:l.bg}),ue.createElement("div",{style:l.content},s))};mC.propTypes={background:ft.string,zDepth:ft.oneOf([0,1,2,3,4,5]),radius:ft.number,styles:ft.object};mC.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var vHt=function(){return Hu.Date.now()};const jz=vHt;var yHt=/\s/;function xHt(t){for(var e=t.length;e--&&yHt.test(t.charAt(e)););return e}var bHt=/^\s+/;function wHt(t){return t&&t.slice(0,xHt(t)+1).replace(bHt,"")}var Vce=0/0,_Ht=/^[-+]0x[0-9a-f]+$/i,SHt=/^0b[01]+$/i,AHt=/^0o[0-7]+$/i,MHt=parseInt;function Wce(t){if(typeof t=="number")return t;if(mE(t))return Vce;if(wl(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=wl(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=wHt(t);var n=SHt.test(t);return n||AHt.test(t)?MHt(t.slice(2),n?2:8):_Ht.test(t)?Vce:+t}var EHt="Expected a function",CHt=Math.max,THt=Math.min;function IAe(t,e,n){var i,r,s,o,a,l,c=0,h=!1,u=!1,d=!0;if(typeof t!="function")throw new TypeError(EHt);e=Wce(e)||0,wl(n)&&(h=!!n.leading,u="maxWait"in n,s=u?CHt(Wce(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d);function f(A){var E=i,M=r;return i=r=void 0,c=A,o=t.apply(M,E),o}function p(A){return c=A,a=setTimeout(v,e),h?f(A):o}function m(A){var E=A-l,M=A-c,C=e-E;return u?THt(C,s-M):C}function g(A){var E=A-l,M=A-c;return l===void 0||E>=e||E<0||u&&M>=s}function v(){var A=jz();if(g(A))return y(A);a=setTimeout(v,m(A))}function y(A){return a=void 0,d&&i?f(A):(i=r=void 0,o)}function x(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function b(){return a===void 0?o:y(jz())}function S(){var A=jz(),E=g(A);if(i=arguments,r=this,l=A,E){if(a===void 0)return p(l);if(u)return clearTimeout(a),a=setTimeout(v,e),f(l)}return a===void 0&&(a=setTimeout(v,e)),o}return S.cancel=x,S.flush=b,S}var PHt="Expected a function";function DHt(t,e,n){var i=!0,r=!0;if(typeof t!="function")throw new TypeError(PHt);return wl(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),IAe(t,e,{leading:i,maxWait:e,trailing:r})}var OHt=function(e,n,i){var r=i.getBoundingClientRect(),s=r.width,o=r.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=a-(i.getBoundingClientRect().left+window.pageXOffset),h=l-(i.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>s&&(c=s),h<0?h=0:h>o&&(h=o);var u=c/s,d=1-h/o;return{h:n.h,s:u,v:d,a:n.a,source:"hsv"}},LHt=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function RHt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IHt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function BHt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ok=function(t){BHt(e,t);function e(n){RHt(this,e);var i=IHt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.handleChange=function(r){typeof i.props.onChange=="function"&&i.throttle(i.props.onChange,OHt(r,i.props.hsl,i.container),r)},i.handleMouseDown=function(r){i.handleChange(r);var s=i.getContainerRenderWindow();s.addEventListener("mousemove",i.handleChange),s.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.throttle=DHt(function(r,s,o){r(s,o)},50),i}return LHt(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var i=this.container,r=window;!r.document.contains(i)&&r.parent!==r;)r=r.parent;return r}},{key:"unbindEventListeners",value:function(){var i=this.getContainerRenderWindow();i.removeEventListener("mousemove",this.handleChange),i.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var i=this,r=this.props.style||{},s=r.color,o=r.white,a=r.black,l=r.pointer,c=r.circle,h=cn({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:o,black:a,pointer:l,circle:c}},{custom:!!this.props.style});return ue.createElement("div",{style:h.color,ref:function(d){return i.container=d},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},ue.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),ue.createElement("div",{style:h.white,className:"saturation-white"},ue.createElement("div",{style:h.black,className:"saturation-black"}),ue.createElement("div",{style:h.pointer},this.props.pointer?ue.createElement(this.props.pointer,this.props):ue.createElement("div",{style:h.circle}))))}}]),e}(W.PureComponent||W.Component);function kHt(t,e){return t&&LAe(t,e,fE)}function FHt(t,e){return function(n,i){if(n==null)return n;if(!xw(n))return t(n,i);for(var r=n.length,s=e?r:-1,o=Object(n);(e?s--:++s<r)&&i(o[s],s,o)!==!1;);return n}}var NHt=FHt(kHt);const BAe=NHt;function zHt(t){return typeof t=="function"?t:sk}function UHt(t,e){var n=ta(t)?Ope:BAe;return n(t,zHt(e))}function MR(t){return MR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MR(t)}var GHt=/^\s+/,HHt=/\s+$/;function Rt(t,e){if(t=t||"",e=e||{},t instanceof Rt)return t;if(!(this instanceof Rt))return new Rt(t,e);var n=jHt(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}Rt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),n,i,r,s,o,a;return n=e.r/255,i=e.g/255,r=e.b/255,n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),.2126*s+.7152*o+.0722*a},setAlpha:function(e){return this._a=kAe(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=qce(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=qce(this._r,this._g,this._b),n=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.v*100);return this._a==1?"hsv("+n+", "+i+"%, "+r+"%)":"hsva("+n+", "+i+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=$ce(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=$ce(this._r,this._g,this._b),n=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.l*100);return this._a==1?"hsl("+n+", "+i+"%, "+r+"%)":"hsla("+n+", "+i+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return Xce(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return qHt(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(sr(this._r,255)*100)+"%",g:Math.round(sr(this._g,255)*100)+"%",b:Math.round(sr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(sr(this._r,255)*100)+"%, "+Math.round(sr(this._g,255)*100)+"%, "+Math.round(sr(this._b,255)*100)+"%)":"rgba("+Math.round(sr(this._r,255)*100)+"%, "+Math.round(sr(this._g,255)*100)+"%, "+Math.round(sr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:sjt[Xce(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+Yce(this._r,this._g,this._b,this._a),i=n,r=this._gradientType?"GradientType = 1, ":"";if(e){var s=Rt(e);i="#"+Yce(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+n+",endColorstr="+i+")"},toString:function(e){var n=!!e;e=e||this._format;var i=!1,r=this._a<1&&this._a>=0,s=!n&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return Rt(this.toString())},_applyModification:function(e,n){var i=e.apply(null,[this].concat([].slice.call(n)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(JHt,arguments)},brighten:function(){return this._applyModification(ZHt,arguments)},darken:function(){return this._applyModification(QHt,arguments)},desaturate:function(){return this._applyModification(XHt,arguments)},saturate:function(){return this._applyModification(YHt,arguments)},greyscale:function(){return this._applyModification(KHt,arguments)},spin:function(){return this._applyModification(ejt,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(ijt,arguments)},complement:function(){return this._applyCombination(tjt,arguments)},monochromatic:function(){return this._applyCombination(rjt,arguments)},splitcomplement:function(){return this._applyCombination(njt,arguments)},triad:function(){return this._applyCombination(Kce,[3])},tetrad:function(){return this._applyCombination(Kce,[4])}};Rt.fromRatio=function(t,e){if(MR(t)=="object"){var n={};for(var i in t)t.hasOwnProperty(i)&&(i==="a"?n[i]=t[i]:n[i]=RA(t[i]));t=n}return Rt(t,e)};function jHt(t){var e={r:0,g:0,b:0},n=1,i=null,r=null,s=null,o=!1,a=!1;return typeof t=="string"&&(t=cjt(t)),MR(t)=="object"&&(Zd(t.r)&&Zd(t.g)&&Zd(t.b)?(e=VHt(t.r,t.g,t.b),o=!0,a=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Zd(t.h)&&Zd(t.s)&&Zd(t.v)?(i=RA(t.s),r=RA(t.v),e=$Ht(t.h,i,r),o=!0,a="hsv"):Zd(t.h)&&Zd(t.s)&&Zd(t.l)&&(i=RA(t.s),s=RA(t.l),e=WHt(t.h,i,s),o=!0,a="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=kAe(n),{ok:o,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function VHt(t,e,n){return{r:sr(t,255)*255,g:sr(e,255)*255,b:sr(n,255)*255}}function $ce(t,e,n){t=sr(t,255),e=sr(e,255),n=sr(n,255);var i=Math.max(t,e,n),r=Math.min(t,e,n),s,o,a=(i+r)/2;if(i==r)s=o=0;else{var l=i-r;switch(o=a>.5?l/(2-i-r):l/(i+r),i){case t:s=(e-n)/l+(e<n?6:0);break;case e:s=(n-t)/l+2;break;case n:s=(t-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function WHt(t,e,n){var i,r,s;t=sr(t,360),e=sr(e,100),n=sr(n,100);function o(c,h,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?c+(h-c)*6*u:u<1/2?h:u<2/3?c+(h-c)*(2/3-u)*6:c}if(e===0)i=r=s=n;else{var a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=o(l,a,t+1/3),r=o(l,a,t),s=o(l,a,t-1/3)}return{r:i*255,g:r*255,b:s*255}}function qce(t,e,n){t=sr(t,255),e=sr(e,255),n=sr(n,255);var i=Math.max(t,e,n),r=Math.min(t,e,n),s,o,a=i,l=i-r;if(o=i===0?0:l/i,i==r)s=0;else{switch(i){case t:s=(e-n)/l+(e<n?6:0);break;case e:s=(n-t)/l+2;break;case n:s=(t-e)/l+4;break}s/=6}return{h:s,s:o,v:a}}function $Ht(t,e,n){t=sr(t,360)*6,e=sr(e,100),n=sr(n,100);var i=Math.floor(t),r=t-i,s=n*(1-e),o=n*(1-r*e),a=n*(1-(1-r)*e),l=i%6,c=[n,o,s,s,a,n][l],h=[a,n,n,o,s,s][l],u=[s,s,a,n,n,o][l];return{r:c*255,g:h*255,b:u*255}}function Xce(t,e,n,i){var r=[Su(Math.round(t).toString(16)),Su(Math.round(e).toString(16)),Su(Math.round(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function qHt(t,e,n,i,r){var s=[Su(Math.round(t).toString(16)),Su(Math.round(e).toString(16)),Su(Math.round(n).toString(16)),Su(FAe(i))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function Yce(t,e,n,i){var r=[Su(FAe(i)),Su(Math.round(t).toString(16)),Su(Math.round(e).toString(16)),Su(Math.round(n).toString(16))];return r.join("")}Rt.equals=function(t,e){return!t||!e?!1:Rt(t).toRgbString()==Rt(e).toRgbString()};Rt.random=function(){return Rt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function XHt(t,e){e=e===0?0:e||10;var n=Rt(t).toHsl();return n.s-=e/100,n.s=ak(n.s),Rt(n)}function YHt(t,e){e=e===0?0:e||10;var n=Rt(t).toHsl();return n.s+=e/100,n.s=ak(n.s),Rt(n)}function KHt(t){return Rt(t).desaturate(100)}function JHt(t,e){e=e===0?0:e||10;var n=Rt(t).toHsl();return n.l+=e/100,n.l=ak(n.l),Rt(n)}function ZHt(t,e){e=e===0?0:e||10;var n=Rt(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),Rt(n)}function QHt(t,e){e=e===0?0:e||10;var n=Rt(t).toHsl();return n.l-=e/100,n.l=ak(n.l),Rt(n)}function ejt(t,e){var n=Rt(t).toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,Rt(n)}function tjt(t){var e=Rt(t).toHsl();return e.h=(e.h+180)%360,Rt(e)}function Kce(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Rt(t).toHsl(),i=[Rt(t)],r=360/e,s=1;s<e;s++)i.push(Rt({h:(n.h+s*r)%360,s:n.s,l:n.l}));return i}function njt(t){var e=Rt(t).toHsl(),n=e.h;return[Rt(t),Rt({h:(n+72)%360,s:e.s,l:e.l}),Rt({h:(n+216)%360,s:e.s,l:e.l})]}function ijt(t,e,n){e=e||6,n=n||30;var i=Rt(t).toHsl(),r=360/n,s=[Rt(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,s.push(Rt(i));return s}function rjt(t,e){e=e||6;for(var n=Rt(t).toHsv(),i=n.h,r=n.s,s=n.v,o=[],a=1/e;e--;)o.push(Rt({h:i,s:r,v:s})),s=(s+a)%1;return o}Rt.mix=function(t,e,n){n=n===0?0:n||50;var i=Rt(t).toRgb(),r=Rt(e).toRgb(),s=n/100,o={r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a};return Rt(o)};Rt.readability=function(t,e){var n=Rt(t),i=Rt(e);return(Math.max(n.getLuminance(),i.getLuminance())+.05)/(Math.min(n.getLuminance(),i.getLuminance())+.05)};Rt.isReadable=function(t,e,n){var i=Rt.readability(t,e),r,s;switch(s=!1,r=ujt(n),r.level+r.size){case"AAsmall":case"AAAlarge":s=i>=4.5;break;case"AAlarge":s=i>=3;break;case"AAAsmall":s=i>=7;break}return s};Rt.mostReadable=function(t,e,n){var i=null,r=0,s,o,a,l;n=n||{},o=n.includeFallbackColors,a=n.level,l=n.size;for(var c=0;c<e.length;c++)s=Rt.readability(t,e[c]),s>r&&(r=s,i=Rt(e[c]));return Rt.isReadable(t,i,{level:a,size:l})||!o?i:(n.includeFallbackColors=!1,Rt.mostReadable(t,["#fff","#000"],n))};var fV=Rt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},sjt=Rt.hexNames=ojt(fV);function ojt(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function kAe(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function sr(t,e){ajt(t)&&(t="100%");var n=ljt(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function ak(t){return Math.min(1,Math.max(0,t))}function Ya(t){return parseInt(t,16)}function ajt(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function ljt(t){return typeof t=="string"&&t.indexOf("%")!=-1}function Su(t){return t.length==1?"0"+t:""+t}function RA(t){return t<=1&&(t=t*100+"%"),t}function FAe(t){return Math.round(parseFloat(t)*255).toString(16)}function Jce(t){return Ya(t)/255}var du=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Zd(t){return!!du.CSS_UNIT.exec(t)}function cjt(t){t=t.replace(GHt,"").replace(HHt,"").toLowerCase();var e=!1;if(fV[t])t=fV[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=du.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=du.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=du.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=du.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=du.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=du.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=du.hex8.exec(t))?{r:Ya(n[1]),g:Ya(n[2]),b:Ya(n[3]),a:Jce(n[4]),format:e?"name":"hex8"}:(n=du.hex6.exec(t))?{r:Ya(n[1]),g:Ya(n[2]),b:Ya(n[3]),format:e?"name":"hex"}:(n=du.hex4.exec(t))?{r:Ya(n[1]+""+n[1]),g:Ya(n[2]+""+n[2]),b:Ya(n[3]+""+n[3]),a:Jce(n[4]+""+n[4]),format:e?"name":"hex8"}:(n=du.hex3.exec(t))?{r:Ya(n[1]+""+n[1]),g:Ya(n[2]+""+n[2]),b:Ya(n[3]+""+n[3]),format:e?"name":"hex"}:!1}function ujt(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:e,size:n}}var Zce=function(e){var n=["r","g","b","a","h","s","l","v"],i=0,r=0;return UHt(n,function(s){if(e[s]&&(i+=1,isNaN(e[s])||(r+=1),s==="s"||s==="l")){var o=/^\d+%$/;o.test(e[s])&&(r+=1)}}),i===r?e:!1},IA=function(e,n){var i=e.hex?Rt(e.hex):Rt(e),r=i.toHsl(),s=i.toHsv(),o=i.toRgb(),a=i.toHex();r.s===0&&(r.h=n||0,s.h=n||0);var l=a==="000000"&&o.a===0;return{hsl:r,hex:l?"transparent":"#"+a,rgb:o,hsv:s,oldHue:e.h||n||r.h,source:e.source}},pg=function(e){if(e==="transparent")return!0;var n=String(e).charAt(0)==="#"?1:0;return e.length!==4+n&&e.length<7+n&&Rt(e).isValid()},hq=function(e){if(!e)return"#fff";var n=IA(e);if(n.hex==="transparent")return"rgba(0,0,0,0.4)";var i=(n.rgb.r*299+n.rgb.g*587+n.rgb.b*114)/1e3;return i>=128?"#000":"#fff"},Vz=function(e,n){var i=e.replace("°","");return Rt(n+" ("+i+")")._ok},lA=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hjt=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function djt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fjt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function pjt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Fa=function(e){var n=function(i){pjt(r,i);function r(s){djt(this,r);var o=fjt(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return o.handleChange=function(a,l){var c=Zce(a);if(c){var h=IA(a,a.h||o.state.oldHue);o.setState(h),o.props.onChangeComplete&&o.debounce(o.props.onChangeComplete,h,l),o.props.onChange&&o.props.onChange(h,l)}},o.handleSwatchHover=function(a,l){var c=Zce(a);if(c){var h=IA(a,a.h||o.state.oldHue);o.props.onSwatchHover&&o.props.onSwatchHover(h,l)}},o.state=lA({},IA(s.color,0)),o.debounce=IAe(function(a,l,c){a(l,c)},100),o}return hjt(r,[{key:"render",value:function(){var o={};return this.props.onSwatchHover&&(o.onSwatchHover=this.handleSwatchHover),ue.createElement(e,lA({},this.props,this.state,{onChange:this.handleChange},o))}}],[{key:"getDerivedStateFromProps",value:function(o,a){return lA({},IA(o.color,a.oldHue))}}]),r}(W.PureComponent||W.Component);return n.propTypes=lA({},e.propTypes),n.defaultProps=lA({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),n},mjt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},gjt=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function vjt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qce(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function yjt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var xjt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(i){yjt(r,i);function r(){var s,o,a,l;vjt(this,r);for(var c=arguments.length,h=Array(c),u=0;u<c;u++)h[u]=arguments[u];return l=(o=(a=Qce(this,(s=r.__proto__||Object.getPrototypeOf(r)).call.apply(s,[this].concat(h))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},o),Qce(a,l)}return gjt(r,[{key:"render",value:function(){return ue.createElement(n,{onFocus:this.handleFocus,onBlur:this.handleBlur},ue.createElement(e,mjt({},this.props,this.state)))}}]),r}(ue.Component)},eue=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bjt=13,wjt=function(e){var n=e.color,i=e.style,r=e.onClick,s=r===void 0?function(){}:r,o=e.onHover,a=e.title,l=a===void 0?n:a,c=e.children,h=e.focus,u=e.focusStyle,d=u===void 0?{}:u,f=n==="transparent",p=cn({default:{swatch:eue({background:n,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},i,h?d:{})}}),m=function(b){return s(n,b)},g=function(b){return b.keyCode===bjt&&s(n,b)},v=function(b){return o(n,b)},y={};return o&&(y.onMouseOver=v),ue.createElement("div",eue({style:p.swatch,onClick:m,title:l,tabIndex:0,onKeyDown:g},y),c,f&&ue.createElement(c_,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const cy=xjt(wjt);var _jt=function(e){var n=e.direction,i=cn({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return ue.createElement("div",{style:i.picker})},Sjt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},NAe=function(e){var n=e.rgb,i=e.hsl,r=e.width,s=e.height,o=e.onChange,a=e.direction,l=e.style,c=e.renderers,h=e.pointer,u=e.className,d=u===void 0?"":u,f=cn({default:{picker:{position:"relative",width:r,height:s},alpha:{radius:"2px",style:l}}});return ue.createElement("div",{style:f.picker,className:"alpha-picker "+d},ue.createElement(uq,Sjt({},f.alpha,{rgb:n,hsl:i,pointer:h,renderers:c,onChange:o,direction:a})))};NAe.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:_jt};Fa(NAe);var Ajt="__lodash_hash_undefined__";function Mjt(t){return this.__data__.set(t,Ajt),this}function Ejt(t){return this.__data__.has(t)}function ER(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Kf;++e<n;)this.add(t[e])}ER.prototype.add=ER.prototype.push=Mjt;ER.prototype.has=Ejt;function Cjt(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function Tjt(t,e){return t.has(e)}var Pjt=1,Djt=2;function zAe(t,e,n,i,r,s){var o=n&Pjt,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),h=s.get(e);if(c&&h)return c==e&&h==t;var u=-1,d=!0,f=n&Djt?new ER:void 0;for(s.set(t,e),s.set(e,t);++u<a;){var p=t[u],m=e[u];if(i)var g=o?i(m,p,u,e,t,s):i(p,m,u,t,e,s);if(g!==void 0){if(g)continue;d=!1;break}if(f){if(!Cjt(e,function(v,y){if(!Tjt(f,y)&&(p===v||r(p,v,n,i,s)))return f.push(y)})){d=!1;break}}else if(!(p===m||r(p,m,n,i,s))){d=!1;break}}return s.delete(t),s.delete(e),d}function Ojt(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n}function Ljt(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var Rjt=1,Ijt=2,Bjt="[object Boolean]",kjt="[object Date]",Fjt="[object Error]",Njt="[object Map]",zjt="[object Number]",Ujt="[object RegExp]",Gjt="[object Set]",Hjt="[object String]",jjt="[object Symbol]",Vjt="[object ArrayBuffer]",Wjt="[object DataView]",tue=Zh?Zh.prototype:void 0,Wz=tue?tue.valueOf:void 0;function $jt(t,e,n,i,r,s,o){switch(n){case Wjt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Vjt:return!(t.byteLength!=e.byteLength||!s(new $O(t),new $O(e)));case Bjt:case kjt:case zjt:return hE(+t,+e);case Fjt:return t.name==e.name&&t.message==e.message;case Ujt:case Hjt:return t==e+"";case Njt:var a=Ojt;case Gjt:var l=i&Rjt;if(a||(a=Ljt),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;i|=Ijt,o.set(t,e);var h=zAe(a(t),a(e),i,r,s,o);return o.delete(t),h;case jjt:if(Wz)return Wz.call(t)==Wz.call(e)}return!1}var qjt=1,Xjt=Object.prototype,Yjt=Xjt.hasOwnProperty;function Kjt(t,e,n,i,r,s){var o=n&qjt,a=L6(t),l=a.length,c=L6(e),h=c.length;if(l!=h&&!o)return!1;for(var u=l;u--;){var d=a[u];if(!(o?d in e:Yjt.call(e,d)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=o;++u<l;){d=a[u];var v=t[d],y=e[d];if(i)var x=o?i(y,v,d,e,t,s):i(v,y,d,t,e,s);if(!(x===void 0?v===y||r(v,y,n,i,s):x)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var b=t.constructor,S=e.constructor;b!=S&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof S=="function"&&S instanceof S)&&(m=!1)}return s.delete(t),s.delete(e),m}var Jjt=1,nue="[object Arguments]",iue="[object Array]",oD="[object Object]",Zjt=Object.prototype,rue=Zjt.hasOwnProperty;function Qjt(t,e,n,i,r,s){var o=ta(t),a=ta(e),l=o?iue:o2(t),c=a?iue:o2(e);l=l==nue?oD:l,c=c==nue?oD:c;var h=l==oD,u=c==oD,d=l==c;if(d&&s2(t)){if(!s2(e))return!1;o=!0,h=!1}if(d&&!h)return s||(s=new Eu),o||X8(t)?zAe(t,e,n,i,r,s):$jt(t,e,l,n,i,r,s);if(!(n&Jjt)){var f=h&&rue.call(t,"__wrapped__"),p=u&&rue.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return s||(s=new Eu),r(m,g,n,i,s)}}return d?(s||(s=new Eu),Kjt(t,e,n,i,r,s)):!1}function dq(t,e,n,i,r){return t===e?!0:t==null||e==null||!Qh(t)&&!Qh(e)?t!==t&&e!==e:Qjt(t,e,n,i,dq,r)}var eVt=1,tVt=2;function nVt(t,e,n,i){var r=n.length,s=r,o=!i;if(t==null)return!s;for(t=Object(t);r--;){var a=n[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<s;){a=n[r];var l=a[0],c=t[l],h=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var u=new Eu;if(i)var d=i(c,h,l,t,e,u);if(!(d===void 0?dq(h,c,eVt|tVt,i,u):d))return!1}}return!0}function UAe(t){return t===t&&!wl(t)}function iVt(t){for(var e=fE(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,UAe(r)]}return e}function GAe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function rVt(t){var e=iVt(t);return e.length==1&&e[0][2]?GAe(e[0][0],e[0][1]):function(n){return n===t||nVt(n,t,e)}}var sVt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oVt=/^\w*$/;function fq(t,e){if(ta(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||mE(t)?!0:oVt.test(t)||!sVt.test(t)||e!=null&&t in Object(e)}function HAe(t,e){return ta(t)?t:fq(t,e)?[t]:Xpe(Kpe(t))}function jAe(t,e){e=HAe(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[gE(e[n++])];return n&&n==i?t:void 0}function aVt(t,e,n){var i=t==null?void 0:jAe(t,e);return i===void 0?n:i}function lVt(t,e){return t!=null&&e in Object(t)}function cVt(t,e,n){e=HAe(e,t);for(var i=-1,r=e.length,s=!1;++i<r;){var o=gE(e[i]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++i!=r?s:(r=t==null?0:t.length,!!r&&$8(r)&&W8(o,r)&&(ta(t)||WO(t)))}function uVt(t,e){return t!=null&&cVt(t,e,lVt)}var hVt=1,dVt=2;function fVt(t,e){return fq(t)&&UAe(e)?GAe(gE(t),e):function(n){var i=aVt(n,t);return i===void 0&&i===e?uVt(n,t):dq(e,i,hVt|dVt)}}function pVt(t){return function(e){return e==null?void 0:e[t]}}function mVt(t){return function(e){return jAe(e,t)}}function gVt(t){return fq(t)?pVt(gE(t)):mVt(t)}function vVt(t){return typeof t=="function"?t:t==null?sk:typeof t=="object"?ta(t)?fVt(t[0],t[1]):rVt(t):gVt(t)}function yVt(t,e){var n=-1,i=xw(t)?Array(t.length):[];return BAe(t,function(r,s,o){i[++n]=e(r,s,o)}),i}function uy(t,e){var n=ta(t)?Q8:yVt;return n(t,vVt(e))}var xVt=function(e){var n=e.colors,i=e.onClick,r=e.onSwatchHover,s=cn({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return ue.createElement("div",{style:s.swatches},uy(n,function(o){return ue.createElement(cy,{key:o,color:o,style:s.swatch,onClick:i,onHover:r,focusStyle:{boxShadow:"0 0 4px "+o}})}),ue.createElement("div",{style:s.clear}))},pq=function(e){var n=e.onChange,i=e.onSwatchHover,r=e.hex,s=e.colors,o=e.width,a=e.triangle,l=e.styles,c=l===void 0?{}:l,h=e.className,u=h===void 0?"":h,d=r==="transparent",f=function(g,v){pg(g)&&n({hex:g,source:"hex"},v)},p=cn(ka({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:hq(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},c),{"hide-triangle":a==="hide"});return ue.createElement("div",{style:p.card,className:"block-picker "+u},ue.createElement("div",{style:p.triangle}),ue.createElement("div",{style:p.head},d&&ue.createElement(c_,{borderRadius:"6px 6px 0 0"}),ue.createElement("div",{style:p.label},r)),ue.createElement("div",{style:p.body},ue.createElement(xVt,{colors:s,onClick:f,onSwatchHover:i}),ue.createElement(Un,{style:{input:p.input},value:r,onChange:f})))};pq.propTypes={width:ft.oneOfType([ft.string,ft.number]),colors:ft.arrayOf(ft.string),triangle:ft.oneOf(["top","hide"]),styles:ft.object};pq.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Fa(pq);var $1={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},q1={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},X1={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Y1={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},K1={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},J1={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},Z1={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},Q1={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},ex={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},BA={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},tx={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},nx={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},ix={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},rx={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},sx={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},ox={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},ax={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},lx={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},VAe=function(e){var n=e.color,i=e.onClick,r=e.onSwatchHover,s=e.hover,o=e.active,a=e.circleSize,l=e.circleSpacing,c=cn({default:{swatch:{width:a,height:a,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+n,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+n}}},{hover:s,active:o});return ue.createElement("div",{style:c.swatch},ue.createElement(cy,{style:c.Swatch,color:n,onClick:i,onHover:r,focusStyle:{boxShadow:c.Swatch.boxShadow+", 0 0 5px "+n}}))};VAe.defaultProps={circleSize:28,circleSpacing:14};const bVt=cq(VAe);var mq=function(e){var n=e.width,i=e.onChange,r=e.onSwatchHover,s=e.colors,o=e.hex,a=e.circleSize,l=e.styles,c=l===void 0?{}:l,h=e.circleSpacing,u=e.className,d=u===void 0?"":u,f=cn(ka({default:{card:{width:n,display:"flex",flexWrap:"wrap",marginRight:-h,marginBottom:-h}}},c)),p=function(g,v){return i({hex:g,source:"hex"},v)};return ue.createElement("div",{style:f.card,className:"circle-picker "+d},uy(s,function(m){return ue.createElement(bVt,{key:m,color:m,onClick:p,onSwatchHover:r,active:o===m.toLowerCase(),circleSize:a,circleSpacing:h})}))};mq.propTypes={width:ft.oneOfType([ft.string,ft.number]),circleSize:ft.number,circleSpacing:ft.number,styles:ft.object};mq.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[$1[500],q1[500],X1[500],Y1[500],K1[500],J1[500],Z1[500],Q1[500],ex[500],BA[500],tx[500],nx[500],ix[500],rx[500],sx[500],ox[500],ax[500],lx[500]],styles:{}};Fa(mq);function sue(t){return t===void 0}var WAe={};Object.defineProperty(WAe,"__esModule",{value:!0});var oue=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wVt=W,aue=_Vt(wVt);function _Vt(t){return t&&t.__esModule?t:{default:t}}function SVt(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}var aD=24,AVt=WAe.default=function(t){var e=t.fill,n=e===void 0?"currentColor":e,i=t.width,r=i===void 0?aD:i,s=t.height,o=s===void 0?aD:s,a=t.style,l=a===void 0?{}:a,c=SVt(t,["fill","width","height","style"]);return aue.default.createElement("svg",oue({viewBox:"0 0 "+aD+" "+aD,style:oue({fill:n,width:r,height:o},l)},c),aue.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},MVt=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function EVt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CVt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function TVt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var $Ae=function(t){TVt(e,t);function e(n){EVt(this,e);var i=CVt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.toggleViews=function(){i.state.view==="hex"?i.setState({view:"rgb"}):i.state.view==="rgb"?i.setState({view:"hsl"}):i.state.view==="hsl"&&(i.props.hsl.a===1?i.setState({view:"hex"}):i.setState({view:"rgb"}))},i.handleChange=function(r,s){r.hex?pg(r.hex)&&i.props.onChange({hex:r.hex,source:"hex"},s):r.r||r.g||r.b?i.props.onChange({r:r.r||i.props.rgb.r,g:r.g||i.props.rgb.g,b:r.b||i.props.rgb.b,source:"rgb"},s):r.a?(r.a<0?r.a=0:r.a>1&&(r.a=1),i.props.onChange({h:i.props.hsl.h,s:i.props.hsl.s,l:i.props.hsl.l,a:Math.round(r.a*100)/100,source:"rgb"},s)):(r.h||r.s||r.l)&&(typeof r.s=="string"&&r.s.includes("%")&&(r.s=r.s.replace("%","")),typeof r.l=="string"&&r.l.includes("%")&&(r.l=r.l.replace("%","")),r.s==1?r.s=.01:r.l==1&&(r.l=.01),i.props.onChange({h:r.h||i.props.hsl.h,s:Number(sue(r.s)?i.props.hsl.s:r.s),l:Number(sue(r.l)?i.props.hsl.l:r.l),source:"hsl"},s))},i.showHighlight=function(r){r.currentTarget.style.background="#eee"},i.hideHighlight=function(r){r.currentTarget.style.background="transparent"},n.hsl.a!==1&&n.view==="hex"?i.state={view:"rgb"}:i.state={view:n.view},i}return MVt(e,[{key:"render",value:function(){var i=this,r=cn({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=ue.createElement("div",{style:r.fields,className:"flexbox-fix"},ue.createElement("div",{style:r.field},ue.createElement(Un,{style:{input:r.input,label:r.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=ue.createElement("div",{style:r.fields,className:"flexbox-fix"},ue.createElement("div",{style:r.field},ue.createElement(Un,{style:{input:r.input,label:r.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),ue.createElement("div",{style:r.field},ue.createElement(Un,{style:{input:r.input,label:r.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),ue.createElement("div",{style:r.field},ue.createElement(Un,{style:{input:r.input,label:r.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),ue.createElement("div",{style:r.alpha},ue.createElement(Un,{style:{input:r.input,label:r.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=ue.createElement("div",{style:r.fields,className:"flexbox-fix"},ue.createElement("div",{style:r.field},ue.createElement(Un,{style:{input:r.input,label:r.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),ue.createElement("div",{style:r.field},ue.createElement(Un,{style:{input:r.input,label:r.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),ue.createElement("div",{style:r.field},ue.createElement(Un,{style:{input:r.input,label:r.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),ue.createElement("div",{style:r.alpha},ue.createElement(Un,{style:{input:r.input,label:r.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),ue.createElement("div",{style:r.wrap,className:"flexbox-fix"},s,ue.createElement("div",{style:r.toggle},ue.createElement("div",{style:r.icon,onClick:this.toggleViews,ref:function(a){return i.icon=a}},ue.createElement(AVt,{style:r.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(i,r){return i.hsl.a!==1&&r.view==="hex"?{view:"rgb"}:null}}]),e}(ue.Component);$Ae.defaultProps={view:"hex"};var lue=function(){var e=cn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return ue.createElement("div",{style:e.picker})},PVt=function(){var e=cn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return ue.createElement("div",{style:e.picker})},gq=function(e){var n=e.width,i=e.onChange,r=e.disableAlpha,s=e.rgb,o=e.hsl,a=e.hsv,l=e.hex,c=e.renderers,h=e.styles,u=h===void 0?{}:h,d=e.className,f=d===void 0?"":d,p=e.defaultView,m=cn(ka({default:{picker:{width:n,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},u),{disableAlpha:r});return ue.createElement("div",{style:m.picker,className:"chrome-picker "+f},ue.createElement("div",{style:m.saturation},ue.createElement(ok,{style:m.Saturation,hsl:o,hsv:a,pointer:PVt,onChange:i})),ue.createElement("div",{style:m.body},ue.createElement("div",{style:m.controls,className:"flexbox-fix"},ue.createElement("div",{style:m.color},ue.createElement("div",{style:m.swatch},ue.createElement("div",{style:m.active}),ue.createElement(c_,{renderers:c}))),ue.createElement("div",{style:m.toggles},ue.createElement("div",{style:m.hue},ue.createElement(u_,{style:m.Hue,hsl:o,pointer:lue,onChange:i})),ue.createElement("div",{style:m.alpha},ue.createElement(uq,{style:m.Alpha,rgb:s,hsl:o,pointer:lue,renderers:c,onChange:i})))),ue.createElement($Ae,{rgb:s,hsl:o,hex:l,view:p,onChange:i,disableAlpha:r})))};gq.propTypes={width:ft.oneOfType([ft.string,ft.number]),disableAlpha:ft.bool,styles:ft.object,defaultView:ft.oneOf(["hex","rgb","hsl"])};gq.defaultProps={width:225,disableAlpha:!1,styles:{}};Fa(gq);var DVt=function(e){var n=e.color,i=e.onClick,r=i===void 0?function(){}:i,s=e.onSwatchHover,o=e.active,a=cn({default:{color:{background:n,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:hq(n),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return ue.createElement(cy,{style:a.color,color:n,onClick:r,onHover:s,focusStyle:{boxShadow:"0 0 4px "+n}},ue.createElement("div",{style:a.dot}))},OVt=function(e){var n=e.hex,i=e.rgb,r=e.onChange,s=cn({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:n},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(l,c){l.r||l.g||l.b?r({r:l.r||i.r,g:l.g||i.g,b:l.b||i.b,source:"rgb"},c):r({hex:l.hex,source:"hex"},c)};return ue.createElement("div",{style:s.fields,className:"flexbox-fix"},ue.createElement("div",{style:s.active}),ue.createElement(Un,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:n,onChange:o}),ue.createElement(Un,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:i.r,onChange:o}),ue.createElement(Un,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:i.g,onChange:o}),ue.createElement(Un,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:i.b,onChange:o}))},vq=function(e){var n=e.onChange,i=e.onSwatchHover,r=e.colors,s=e.hex,o=e.rgb,a=e.styles,l=a===void 0?{}:a,c=e.className,h=c===void 0?"":c,u=cn(ka({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),d=function(p,m){p.hex?pg(p.hex)&&n({hex:p.hex,source:"hex"},m):n(p,m)};return ue.createElement(mC,{style:u.Compact,styles:l},ue.createElement("div",{style:u.compact,className:"compact-picker "+h},ue.createElement("div",null,uy(r,function(f){return ue.createElement(DVt,{key:f,color:f,active:f.toLowerCase()===s,onClick:d,onSwatchHover:i})}),ue.createElement("div",{style:u.clear})),ue.createElement(OVt,{hex:s,rgb:o,onChange:d})))};vq.propTypes={colors:ft.arrayOf(ft.string),styles:ft.object};vq.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Fa(vq);var LVt=function(e){var n=e.hover,i=e.color,r=e.onClick,s=e.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=cn({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:n});return ue.createElement("div",{style:a.swatch},ue.createElement(cy,{color:i,onClick:r,onHover:s,focusStyle:o}))};const RVt=cq(LVt);var yq=function(e){var n=e.width,i=e.colors,r=e.onChange,s=e.onSwatchHover,o=e.triangle,a=e.styles,l=a===void 0?{}:a,c=e.className,h=c===void 0?"":c,u=cn(ka({default:{card:{width:n,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right","bottom-left-triangle":o==="bottom-left","bottom-right-triangle":o==="bottom-right"}),d=function(p,m){return r({hex:p,source:"hex"},m)};return ue.createElement("div",{style:u.card,className:"github-picker "+h},ue.createElement("div",{style:u.triangleShadow}),ue.createElement("div",{style:u.triangle}),uy(i,function(f){return ue.createElement(RVt,{color:f,key:f,onClick:d,onSwatchHover:s})}))};yq.propTypes={width:ft.oneOfType([ft.string,ft.number]),colors:ft.arrayOf(ft.string),triangle:ft.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:ft.object};yq.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Fa(yq);var IVt=function(e){var n=e.direction,i=cn({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return ue.createElement("div",{style:i.picker})},BVt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xq=function(e){var n=e.width,i=e.height,r=e.onChange,s=e.hsl,o=e.direction,a=e.pointer,l=e.styles,c=l===void 0?{}:l,h=e.className,u=h===void 0?"":h,d=cn(ka({default:{picker:{position:"relative",width:n,height:i},hue:{radius:"2px"}}},c)),f=function(m){return r({a:1,h:m.h,l:.5,s:1})};return ue.createElement("div",{style:d.picker,className:"hue-picker "+u},ue.createElement(u_,BVt({},d.hue,{hsl:s,pointer:a,onChange:f,direction:o})))};xq.propTypes={styles:ft.object};xq.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:IVt,styles:{}};Fa(xq);var kVt=function(e){var n=e.onChange,i=e.hex,r=e.rgb,s=e.styles,o=s===void 0?{}:s,a=e.className,l=a===void 0?"":a,c=cn(ka({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+i,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),h=function(d,f){d.hex?pg(d.hex)&&n({hex:d.hex,source:"hex"},f):(d.r||d.g||d.b)&&n({r:d.r||r.r,g:d.g||r.g,b:d.b||r.b,source:"rgb"},f)};return ue.createElement(mC,{styles:o},ue.createElement("div",{style:c.material,className:"material-picker "+l},ue.createElement(Un,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"hex",value:i,onChange:h}),ue.createElement("div",{style:c.split,className:"flexbox-fix"},ue.createElement("div",{style:c.third},ue.createElement(Un,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:r.r,onChange:h})),ue.createElement("div",{style:c.third},ue.createElement(Un,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:r.g,onChange:h})),ue.createElement("div",{style:c.third},ue.createElement(Un,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:r.b,onChange:h})))))};Fa(kVt);var FVt=function(e){var n=e.onChange,i=e.rgb,r=e.hsv,s=e.hex,o=cn({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(c,h){c["#"]?pg(c["#"])&&n({hex:c["#"],source:"hex"},h):c.r||c.g||c.b?n({r:c.r||i.r,g:c.g||i.g,b:c.b||i.b,source:"rgb"},h):(c.h||c.s||c.v)&&n({h:c.h||r.h,s:c.s||r.s,v:c.v||r.v,source:"hsv"},h)};return ue.createElement("div",{style:o.fields},ue.createElement(Un,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(r.h),onChange:a}),ue.createElement(Un,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(r.s*100),onChange:a}),ue.createElement(Un,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(r.v*100),onChange:a}),ue.createElement("div",{style:o.divider}),ue.createElement(Un,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:i.r,onChange:a}),ue.createElement(Un,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:i.g,onChange:a}),ue.createElement(Un,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:i.b,onChange:a}),ue.createElement("div",{style:o.divider}),ue.createElement(Un,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:s.replace("#",""),onChange:a}),ue.createElement("div",{style:o.fieldSymbols},ue.createElement("div",{style:o.symbol},"°"),ue.createElement("div",{style:o.symbol},"%"),ue.createElement("div",{style:o.symbol},"%")))},NVt=function(e){var n=e.hsl,i=cn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":n.l>.5});return ue.createElement("div",{style:i.picker})},zVt=function(){var e=cn({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return ue.createElement("div",{style:e.pointer},ue.createElement("div",{style:e.left},ue.createElement("div",{style:e.leftInside})),ue.createElement("div",{style:e.right},ue.createElement("div",{style:e.rightInside})))},cue=function(e){var n=e.onClick,i=e.label,r=e.children,s=e.active,o=cn({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return ue.createElement("div",{style:o.button,onClick:n},i||r)},UVt=function(e){var n=e.rgb,i=e.currentColor,r=cn({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+n.r+","+n.g+", "+n.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:i,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return ue.createElement("div",null,ue.createElement("div",{style:r.label},"new"),ue.createElement("div",{style:r.swatches},ue.createElement("div",{style:r.new}),ue.createElement("div",{style:r.current})),ue.createElement("div",{style:r.label},"current"))},GVt=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function HVt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jVt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function VVt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var bq=function(t){VVt(e,t);function e(n){HVt(this,e);var i=jVt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.state={currentColor:n.hex},i}return GVt(e,[{key:"render",value:function(){var i=this.props,r=i.styles,s=r===void 0?{}:r,o=i.className,a=o===void 0?"":o,l=cn(ka({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return ue.createElement("div",{style:l.picker,className:"photoshop-picker "+a},ue.createElement("div",{style:l.head},this.props.header),ue.createElement("div",{style:l.body,className:"flexbox-fix"},ue.createElement("div",{style:l.saturation},ue.createElement(ok,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:NVt,onChange:this.props.onChange})),ue.createElement("div",{style:l.hue},ue.createElement(u_,{direction:"vertical",hsl:this.props.hsl,pointer:zVt,onChange:this.props.onChange})),ue.createElement("div",{style:l.controls},ue.createElement("div",{style:l.top,className:"flexbox-fix"},ue.createElement("div",{style:l.previews},ue.createElement(UVt,{rgb:this.props.rgb,currentColor:this.state.currentColor})),ue.createElement("div",{style:l.actions},ue.createElement(cue,{label:"OK",onClick:this.props.onAccept,active:!0}),ue.createElement(cue,{label:"Cancel",onClick:this.props.onCancel}),ue.createElement(FVt,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(ue.Component);bq.propTypes={header:ft.string,styles:ft.object};bq.defaultProps={header:"Color Picker",styles:{}};Fa(bq);var WVt=function(e){var n=e.onChange,i=e.rgb,r=e.hsl,s=e.hex,o=e.disableAlpha,a=cn({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),l=function(h,u){h.hex?pg(h.hex)&&n({hex:h.hex,source:"hex"},u):h.r||h.g||h.b?n({r:h.r||i.r,g:h.g||i.g,b:h.b||i.b,a:i.a,source:"rgb"},u):h.a&&(h.a<0?h.a=0:h.a>100&&(h.a=100),h.a/=100,n({h:r.h,s:r.s,l:r.l,a:h.a,source:"rgb"},u))};return ue.createElement("div",{style:a.fields,className:"flexbox-fix"},ue.createElement("div",{style:a.double},ue.createElement(Un,{style:{input:a.input,label:a.label},label:"hex",value:s.replace("#",""),onChange:l})),ue.createElement("div",{style:a.single},ue.createElement(Un,{style:{input:a.input,label:a.label},label:"r",value:i.r,onChange:l,dragLabel:"true",dragMax:"255"})),ue.createElement("div",{style:a.single},ue.createElement(Un,{style:{input:a.input,label:a.label},label:"g",value:i.g,onChange:l,dragLabel:"true",dragMax:"255"})),ue.createElement("div",{style:a.single},ue.createElement(Un,{style:{input:a.input,label:a.label},label:"b",value:i.b,onChange:l,dragLabel:"true",dragMax:"255"})),ue.createElement("div",{style:a.alpha},ue.createElement(Un,{style:{input:a.input,label:a.label},label:"a",value:Math.round(i.a*100),onChange:l,dragLabel:"true",dragMax:"100"})))},$Vt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qAe=function(e){var n=e.colors,i=e.onClick,r=i===void 0?function(){}:i,s=e.onSwatchHover,o=cn({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!n||!n.length}),a=function(c,h){r({hex:c,source:"hex"},h)};return ue.createElement("div",{style:o.colors,className:"flexbox-fix"},n.map(function(l){var c=typeof l=="string"?{color:l}:l,h=""+c.color+(c.title||"");return ue.createElement("div",{key:h,style:o.swatchWrap},ue.createElement(cy,$Vt({},c,{style:o.swatch,onClick:a,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+c.color}})))}))};qAe.propTypes={colors:ft.arrayOf(ft.oneOfType([ft.string,ft.shape({color:ft.string,title:ft.string})])).isRequired};var qVt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wq=function(e){var n=e.width,i=e.rgb,r=e.hex,s=e.hsv,o=e.hsl,a=e.onChange,l=e.onSwatchHover,c=e.disableAlpha,h=e.presetColors,u=e.renderers,d=e.styles,f=d===void 0?{}:d,p=e.className,m=p===void 0?"":p,g=cn(ka({default:qVt({picker:{width:n,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+i.r+","+i.g+","+i.b+","+i.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},f),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},f),{disableAlpha:c});return ue.createElement("div",{style:g.picker,className:"sketch-picker "+m},ue.createElement("div",{style:g.saturation},ue.createElement(ok,{style:g.Saturation,hsl:o,hsv:s,onChange:a})),ue.createElement("div",{style:g.controls,className:"flexbox-fix"},ue.createElement("div",{style:g.sliders},ue.createElement("div",{style:g.hue},ue.createElement(u_,{style:g.Hue,hsl:o,onChange:a})),ue.createElement("div",{style:g.alpha},ue.createElement(uq,{style:g.Alpha,rgb:i,hsl:o,renderers:u,onChange:a}))),ue.createElement("div",{style:g.color},ue.createElement(c_,null),ue.createElement("div",{style:g.activeColor}))),ue.createElement(WVt,{rgb:i,hsl:o,hex:r,onChange:a,disableAlpha:c}),ue.createElement(qAe,{colors:h,onClick:a,onSwatchHover:l}))};wq.propTypes={disableAlpha:ft.bool,width:ft.oneOfType([ft.string,ft.number]),styles:ft.object};wq.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const XVt=Fa(wq);var cA=function(e){var n=e.hsl,i=e.offset,r=e.onClick,s=r===void 0?function(){}:r,o=e.active,a=e.first,l=e.last,c=cn({default:{swatch:{height:"12px",background:"hsl("+n.h+", 50%, "+i*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:a,last:l}),h=function(d){return s({h:n.h,s:.5,l:i,source:"hsl"},d)};return ue.createElement("div",{style:c.swatch,onClick:h})},YVt=function(e){var n=e.onClick,i=e.hsl,r=cn({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return ue.createElement("div",{style:r.swatches},ue.createElement("div",{style:r.swatch},ue.createElement(cA,{hsl:i,offset:".80",active:Math.abs(i.l-.8)<s&&Math.abs(i.s-.5)<s,onClick:n,first:!0})),ue.createElement("div",{style:r.swatch},ue.createElement(cA,{hsl:i,offset:".65",active:Math.abs(i.l-.65)<s&&Math.abs(i.s-.5)<s,onClick:n})),ue.createElement("div",{style:r.swatch},ue.createElement(cA,{hsl:i,offset:".50",active:Math.abs(i.l-.5)<s&&Math.abs(i.s-.5)<s,onClick:n})),ue.createElement("div",{style:r.swatch},ue.createElement(cA,{hsl:i,offset:".35",active:Math.abs(i.l-.35)<s&&Math.abs(i.s-.5)<s,onClick:n})),ue.createElement("div",{style:r.swatch},ue.createElement(cA,{hsl:i,offset:".20",active:Math.abs(i.l-.2)<s&&Math.abs(i.s-.5)<s,onClick:n,last:!0})),ue.createElement("div",{style:r.clear}))},KVt=function(){var e=cn({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return ue.createElement("div",{style:e.picker})},_q=function(e){var n=e.hsl,i=e.onChange,r=e.pointer,s=e.styles,o=s===void 0?{}:s,a=e.className,l=a===void 0?"":a,c=cn(ka({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return ue.createElement("div",{style:c.wrap||{},className:"slider-picker "+l},ue.createElement("div",{style:c.hue},ue.createElement(u_,{style:c.Hue,hsl:n,pointer:r,onChange:i})),ue.createElement("div",{style:c.swatches},ue.createElement(YVt,{hsl:n,onClick:i})))};_q.propTypes={styles:ft.object};_q.defaultProps={pointer:KVt,styles:{}};Fa(_q);var XAe={};Object.defineProperty(XAe,"__esModule",{value:!0});var uue=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},JVt=W,hue=ZVt(JVt);function ZVt(t){return t&&t.__esModule?t:{default:t}}function QVt(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}var lD=24,e8t=XAe.default=function(t){var e=t.fill,n=e===void 0?"currentColor":e,i=t.width,r=i===void 0?lD:i,s=t.height,o=s===void 0?lD:s,a=t.style,l=a===void 0?{}:a,c=QVt(t,["fill","width","height","style"]);return hue.default.createElement("svg",uue({viewBox:"0 0 "+lD+" "+lD,style:uue({fill:n,width:r,height:o},l)},c),hue.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},t8t=function(e){var n=e.color,i=e.onClick,r=i===void 0?function(){}:i,s=e.onSwatchHover,o=e.first,a=e.last,l=e.active,c=cn({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:n,marginBottom:"1px"},check:{color:hq(n),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:a,active:l,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return ue.createElement(cy,{color:n,style:c.color,onClick:r,onHover:s,focusStyle:{boxShadow:"0 0 4px "+n}},ue.createElement("div",{style:c.check},ue.createElement(e8t,null)))},n8t=function(e){var n=e.onClick,i=e.onSwatchHover,r=e.group,s=e.active,o=cn({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return ue.createElement("div",{style:o.group},uy(r,function(a,l){return ue.createElement(t8t,{key:a,color:a,active:a.toLowerCase()===s,first:l===0,last:l===r.length-1,onClick:n,onSwatchHover:i})}))},Sq=function(e){var n=e.width,i=e.height,r=e.onChange,s=e.onSwatchHover,o=e.colors,a=e.hex,l=e.styles,c=l===void 0?{}:l,h=e.className,u=h===void 0?"":h,d=cn(ka({default:{picker:{width:n,height:i},overflow:{height:i,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},c)),f=function(m,g){return r({hex:m,source:"hex"},g)};return ue.createElement("div",{style:d.picker,className:"swatches-picker "+u},ue.createElement(mC,null,ue.createElement("div",{style:d.overflow},ue.createElement("div",{style:d.body},uy(o,function(p){return ue.createElement(n8t,{key:p.toString(),group:p,active:a,onClick:f,onSwatchHover:s})}),ue.createElement("div",{style:d.clear})))))};Sq.propTypes={width:ft.oneOfType([ft.string,ft.number]),height:ft.oneOfType([ft.string,ft.number]),colors:ft.arrayOf(ft.arrayOf(ft.string)),styles:ft.object};Sq.defaultProps={width:320,height:240,colors:[[$1[900],$1[700],$1[500],$1[300],$1[100]],[q1[900],q1[700],q1[500],q1[300],q1[100]],[X1[900],X1[700],X1[500],X1[300],X1[100]],[Y1[900],Y1[700],Y1[500],Y1[300],Y1[100]],[K1[900],K1[700],K1[500],K1[300],K1[100]],[J1[900],J1[700],J1[500],J1[300],J1[100]],[Z1[900],Z1[700],Z1[500],Z1[300],Z1[100]],[Q1[900],Q1[700],Q1[500],Q1[300],Q1[100]],[ex[900],ex[700],ex[500],ex[300],ex[100]],["#194D33",BA[700],BA[500],BA[300],BA[100]],[tx[900],tx[700],tx[500],tx[300],tx[100]],[nx[900],nx[700],nx[500],nx[300],nx[100]],[ix[900],ix[700],ix[500],ix[300],ix[100]],[rx[900],rx[700],rx[500],rx[300],rx[100]],[sx[900],sx[700],sx[500],sx[300],sx[100]],[ox[900],ox[700],ox[500],ox[300],ox[100]],[ax[900],ax[700],ax[500],ax[300],ax[100]],[lx[900],lx[700],lx[500],lx[300],lx[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Fa(Sq);var Aq=function(e){var n=e.onChange,i=e.onSwatchHover,r=e.hex,s=e.colors,o=e.width,a=e.triangle,l=e.styles,c=l===void 0?{}:l,h=e.className,u=h===void 0?"":h,d=cn(ka({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},c),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),f=function(m,g){pg(m)&&n({hex:m,source:"hex"},g)};return ue.createElement("div",{style:d.card,className:"twitter-picker "+u},ue.createElement("div",{style:d.triangleShadow}),ue.createElement("div",{style:d.triangle}),ue.createElement("div",{style:d.body},uy(s,function(p,m){return ue.createElement(cy,{key:m,color:p,hex:p,style:d.swatch,onClick:f,onHover:i,focusStyle:{boxShadow:"0 0 4px "+p}})}),ue.createElement("div",{style:d.hash},"#"),ue.createElement(Un,{label:null,style:{input:d.input},value:r.replace("#",""),onChange:f}),ue.createElement("div",{style:d.clear})))};Aq.propTypes={width:ft.oneOfType([ft.string,ft.number]),triangle:ft.oneOf(["hide","top-left","top-right"]),colors:ft.arrayOf(ft.string),styles:ft.object};Aq.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Fa(Aq);var Mq=function(e){var n=cn({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return ue.createElement("div",{style:n.picker})};Mq.propTypes={hsl:ft.shape({h:ft.number,s:ft.number,l:ft.number,a:ft.number})};Mq.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Eq=function(e){var n=cn({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return ue.createElement("div",{style:n.picker})};Eq.propTypes={hsl:ft.shape({h:ft.number,s:ft.number,l:ft.number,a:ft.number})};Eq.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var i8t=function(e){var n=e.onChange,i=e.rgb,r=e.hsl,s=e.hex,o=e.hsv,a=function(f,p){if(f.hex)pg(f.hex)&&n({hex:f.hex,source:"hex"},p);else if(f.rgb){var m=f.rgb.split(",");Vz(f.rgb,"rgb")&&n({r:m[0],g:m[1],b:m[2],a:1,source:"rgb"},p)}else if(f.hsv){var g=f.hsv.split(",");Vz(f.hsv,"hsv")&&(g[2]=g[2].replace("%",""),g[1]=g[1].replace("%",""),g[0]=g[0].replace("°",""),g[1]==1?g[1]=.01:g[2]==1&&(g[2]=.01),n({h:Number(g[0]),s:Number(g[1]),v:Number(g[2]),source:"hsv"},p))}else if(f.hsl){var v=f.hsl.split(",");Vz(f.hsl,"hsl")&&(v[2]=v[2].replace("%",""),v[1]=v[1].replace("%",""),v[0]=v[0].replace("°",""),u[1]==1?u[1]=.01:u[2]==1&&(u[2]=.01),n({h:Number(v[0]),s:Number(v[1]),v:Number(v[2]),source:"hsl"},p))}},l=cn({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),c=i.r+", "+i.g+", "+i.b,h=Math.round(r.h)+"°, "+Math.round(r.s*100)+"%, "+Math.round(r.l*100)+"%",u=Math.round(o.h)+"°, "+Math.round(o.s*100)+"%, "+Math.round(o.v*100)+"%";return ue.createElement("div",{style:l.wrap,className:"flexbox-fix"},ue.createElement("div",{style:l.fields},ue.createElement("div",{style:l.double},ue.createElement(Un,{style:{input:l.input,label:l.label},label:"hex",value:s,onChange:a})),ue.createElement("div",{style:l.column},ue.createElement("div",{style:l.single},ue.createElement(Un,{style:{input:l.input2,label:l.label2},label:"rgb",value:c,onChange:a})),ue.createElement("div",{style:l.single},ue.createElement(Un,{style:{input:l.input2,label:l.label2},label:"hsv",value:u,onChange:a})),ue.createElement("div",{style:l.single},ue.createElement(Un,{style:{input:l.input2,label:l.label2},label:"hsl",value:h,onChange:a})))))},Cq=function(e){var n=e.width,i=e.onChange,r=e.rgb,s=e.hsl,o=e.hsv,a=e.hex,l=e.header,c=e.styles,h=c===void 0?{}:c,u=e.className,d=u===void 0?"":u,f=cn(ka({default:{picker:{width:n,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},h));return ue.createElement("div",{style:f.picker,className:"google-picker "+d},ue.createElement("div",{style:f.head},l),ue.createElement("div",{style:f.swatch}),ue.createElement("div",{style:f.saturation},ue.createElement(ok,{hsl:s,hsv:o,pointer:Mq,onChange:i})),ue.createElement("div",{style:f.body},ue.createElement("div",{style:f.controls,className:"flexbox-fix"},ue.createElement("div",{style:f.hue},ue.createElement(u_,{style:f.Hue,hsl:s,radius:"4px",pointer:Eq,onChange:i}))),ue.createElement(i8t,{rgb:r,hsl:s,hex:a,hsv:o,onChange:i})))};Cq.propTypes={width:ft.oneOfType([ft.string,ft.number]),styles:ft.object,header:ft.string};Cq.defaultProps={width:652,styles:{},header:"Color picker"};Fa(Cq);const r8t=()=>{const t=Ml(Gt),e=(i,r)=>{console.log(r.hex),t.myItemShow=="shoe"?Gt.colors[i]=r.hex:t.myItemShow=="TShirt"&&(Gt.TShirtColor=r.hex)};return et("div",{className:"absolute left-full ml-3 z-30 top-[10rem] md:top-auto",children:[ne("span",{className:"",children:(()=>{try{return t.current===null?"Nothing Selected":t.current.charAt(0).toUpperCase()+t.current.slice(1)}catch(i){return console.error(i),"Nothing Selected"}})()}),ne(XVt,{color:t.myItemShow=="shoe"?t.colors[t.current]:t.TShirtColor,disableAlpha:!0,onChange:i=>e(t.current,i),className:"z-30"})]})},s8t=({file:t,setFile:e,readFile:n})=>et("div",{className:"filepicker-container",children:[et("div",{className:"flex-1 flex flex-col justify-center items-center border rounded",children:[ne("input",{id:"file-upload",type:"file",accept:"image/*",onChange:i=>e(i.target.files[0])}),ne("label",{htmlFor:"file-upload",className:"filepicker-label",children:"Upload File"}),ne("p",{className:"mt-2 text-gray-500 text-xs truncate",children:t===""?"No file selected":t.name})]}),et("div",{className:"mt-4 flex flex-wrap gap-3",children:[ne(bn,{type:"outline",title:"As Logo",handleClick:()=>n("logo"),customStyles:"text-xs"}),ne(bn,{type:"filled",title:"As Texture",handleClick:()=>n("full"),customStyles:"text-xs"})]})]}),o8t=({prompt:t,setPrompt:e,generatingImg:n,handleSubmit:i})=>et("div",{className:"aipicker-container mt-20 sm:mt-0",children:[ne("textarea",{placeholder:"Ask AI...",rows:5,value:t,onChange:r=>e(r.target.value),className:"aipicker-textarea"}),ne("div",{className:"flex flex-wrap gap-3",children:n?ne(bn,{type:"outline",title:"Asking AI...",customStyles:"text-xs"}):et(Qo,{children:[ne(bn,{type:"outline",title:"Generate AI Logo",handleClick:()=>i("logo"),customStyles:"text-xs"}),ne(bn,{type:"filled",title:"Generate AI Texture",handleClick:()=>i("full"),customStyles:"text-xs"})]})})]});var pV={},YAe={},CR={},a8t={get exports(){return CR},set exports(t){CR=t}},TR={},l8t={get exports(){return TR},set exports(t){TR=t}},KAe=function(e,n){return function(){for(var r=new Array(arguments.length),s=0;s<r.length;s++)r[s]=arguments[s];return e.apply(n,r)}},c8t=KAe,mg=Object.prototype.toString;function Tq(t){return Array.isArray(t)}function mV(t){return typeof t>"u"}function u8t(t){return t!==null&&!mV(t)&&t.constructor!==null&&!mV(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function JAe(t){return mg.call(t)==="[object ArrayBuffer]"}function h8t(t){return mg.call(t)==="[object FormData]"}function d8t(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&JAe(t.buffer),e}function f8t(t){return typeof t=="string"}function p8t(t){return typeof t=="number"}function ZAe(t){return t!==null&&typeof t=="object"}function sO(t){if(mg.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function m8t(t){return mg.call(t)==="[object Date]"}function g8t(t){return mg.call(t)==="[object File]"}function v8t(t){return mg.call(t)==="[object Blob]"}function QAe(t){return mg.call(t)==="[object Function]"}function y8t(t){return ZAe(t)&&QAe(t.pipe)}function x8t(t){return mg.call(t)==="[object URLSearchParams]"}function b8t(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function w8t(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Pq(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Tq(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function gV(){var t={};function e(r,s){sO(t[s])&&sO(r)?t[s]=gV(t[s],r):sO(r)?t[s]=gV({},r):Tq(r)?t[s]=r.slice():t[s]=r}for(var n=0,i=arguments.length;n<i;n++)Pq(arguments[n],e);return t}function _8t(t,e,n){return Pq(e,function(r,s){n&&typeof r=="function"?t[s]=c8t(r,n):t[s]=r}),t}function S8t(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Na={isArray:Tq,isArrayBuffer:JAe,isBuffer:u8t,isFormData:h8t,isArrayBufferView:d8t,isString:f8t,isNumber:p8t,isObject:ZAe,isPlainObject:sO,isUndefined:mV,isDate:m8t,isFile:g8t,isBlob:v8t,isFunction:QAe,isStream:y8t,isURLSearchParams:x8t,isStandardBrowserEnv:w8t,forEach:Pq,merge:gV,extend:_8t,trim:b8t,stripBOM:S8t},D1=Na;function due(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var eMe=function(e,n,i){if(!n)return e;var r;if(i)r=i(n);else if(D1.isURLSearchParams(n))r=n.toString();else{var s=[];D1.forEach(n,function(l,c){l===null||typeof l>"u"||(D1.isArray(l)?c=c+"[]":l=[l],D1.forEach(l,function(u){D1.isDate(u)?u=u.toISOString():D1.isObject(u)&&(u=JSON.stringify(u)),s.push(due(c)+"="+due(u))}))}),r=s.join("&")}if(r){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e},A8t=Na;function lk(){this.handlers=[]}lk.prototype.use=function(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};lk.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};lk.prototype.forEach=function(e){A8t.forEach(this.handlers,function(i){i!==null&&e(i)})};var M8t=lk,E8t=Na,C8t=function(e,n){E8t.forEach(e,function(r,s){s!==n&&s.toUpperCase()===n.toUpperCase()&&(e[n]=r,delete e[s])})},tMe=function(e,n,i,r,s){return e.config=n,i&&(e.code=i),e.request=r,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},nMe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$z,fue;function iMe(){if(fue)return $z;fue=1;var t=tMe;return $z=function(n,i,r,s,o){var a=new Error(n);return t(a,i,r,s,o)},$z}var qz,pue;function T8t(){if(pue)return qz;pue=1;var t=iMe();return qz=function(n,i,r){var s=r.config.validateStatus;!r.status||!s||s(r.status)?n(r):i(t("Request failed with status code "+r.status,r.config,null,r.request,r))},qz}var Xz,mue;function P8t(){if(mue)return Xz;mue=1;var t=Na;return Xz=t.isStandardBrowserEnv()?function(){return{write:function(i,r,s,o,a,l){var c=[];c.push(i+"="+encodeURIComponent(r)),t.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),t.isString(o)&&c.push("path="+o),t.isString(a)&&c.push("domain="+a),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(i){var r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Xz}var Yz,gue;function D8t(){return gue||(gue=1,Yz=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Yz}var Kz,vue;function O8t(){return vue||(vue=1,Kz=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e}),Kz}var Jz,yue;function L8t(){if(yue)return Jz;yue=1;var t=D8t(),e=O8t();return Jz=function(i,r){return i&&!t(r)?e(i,r):r},Jz}var Zz,xue;function R8t(){if(xue)return Zz;xue=1;var t=Na,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Zz=function(i){var r={},s,o,a;return i&&t.forEach(i.split(`
`),function(c){if(a=c.indexOf(":"),s=t.trim(c.substr(0,a)).toLowerCase(),o=t.trim(c.substr(a+1)),s){if(r[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?r[s]=(r[s]?r[s]:[]).concat([o]):r[s]=r[s]?r[s]+", "+o:o}}),r},Zz}var Qz,bue;function I8t(){if(bue)return Qz;bue=1;var t=Na;return Qz=t.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),r;function s(o){var a=o;return n&&(i.setAttribute("href",a),a=i.href),i.setAttribute("href",a),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=s(window.location.href),function(a){var l=t.isString(a)?s(a):a;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}(),Qz}var eU,wue;function ck(){if(wue)return eU;wue=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,eU=t,eU}var tU,_ue;function Sue(){if(_ue)return tU;_ue=1;var t=Na,e=T8t(),n=P8t(),i=eMe,r=L8t(),s=R8t(),o=I8t(),a=iMe(),l=nMe,c=ck();return tU=function(u){return new Promise(function(f,p){var m=u.data,g=u.headers,v=u.responseType,y;function x(){u.cancelToken&&u.cancelToken.unsubscribe(y),u.signal&&u.signal.removeEventListener("abort",y)}t.isFormData(m)&&delete g["Content-Type"];var b=new XMLHttpRequest;if(u.auth){var S=u.auth.username||"",A=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";g.Authorization="Basic "+btoa(S+":"+A)}var E=r(u.baseURL,u.url);b.open(u.method.toUpperCase(),i(E,u.params,u.paramsSerializer),!0),b.timeout=u.timeout;function M(){if(b){var T="getAllResponseHeaders"in b?s(b.getAllResponseHeaders()):null,D=!v||v==="text"||v==="json"?b.responseText:b.response,L={data:D,status:b.status,statusText:b.statusText,headers:T,config:u,request:b};e(function(R){f(R),x()},function(R){p(R),x()},L),b=null}}if("onloadend"in b?b.onloadend=M:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(M)},b.onabort=function(){b&&(p(a("Request aborted",u,"ECONNABORTED",b)),b=null)},b.onerror=function(){p(a("Network Error",u,null,b)),b=null},b.ontimeout=function(){var D=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",L=u.transitional||l;u.timeoutErrorMessage&&(D=u.timeoutErrorMessage),p(a(D,u,L.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},t.isStandardBrowserEnv()){var C=(u.withCredentials||o(E))&&u.xsrfCookieName?n.read(u.xsrfCookieName):void 0;C&&(g[u.xsrfHeaderName]=C)}"setRequestHeader"in b&&t.forEach(g,function(D,L){typeof m>"u"&&L.toLowerCase()==="content-type"?delete g[L]:b.setRequestHeader(L,D)}),t.isUndefined(u.withCredentials)||(b.withCredentials=!!u.withCredentials),v&&v!=="json"&&(b.responseType=u.responseType),typeof u.onDownloadProgress=="function"&&b.addEventListener("progress",u.onDownloadProgress),typeof u.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(y=function(T){b&&(p(!T||T&&T.type?new c("canceled"):T),b.abort(),b=null)},u.cancelToken&&u.cancelToken.subscribe(y),u.signal&&(u.signal.aborted?y():u.signal.addEventListener("abort",y))),m||(m=null),b.send(m)})},tU}var Qs=Na,Aue=C8t,B8t=tMe,k8t=nMe,F8t={"Content-Type":"application/x-www-form-urlencoded"};function Mue(t,e){!Qs.isUndefined(t)&&Qs.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function N8t(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Sue()),t}function z8t(t,e,n){if(Qs.isString(t))try{return(e||JSON.parse)(t),Qs.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}var uk={transitional:k8t,adapter:N8t(),transformRequest:[function(e,n){return Aue(n,"Accept"),Aue(n,"Content-Type"),Qs.isFormData(e)||Qs.isArrayBuffer(e)||Qs.isBuffer(e)||Qs.isStream(e)||Qs.isFile(e)||Qs.isBlob(e)?e:Qs.isArrayBufferView(e)?e.buffer:Qs.isURLSearchParams(e)?(Mue(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Qs.isObject(e)||n&&n["Content-Type"]==="application/json"?(Mue(n,"application/json"),z8t(e)):e}],transformResponse:[function(e){var n=this.transitional||uk.transitional,i=n&&n.silentJSONParsing,r=n&&n.forcedJSONParsing,s=!i&&this.responseType==="json";if(s||r&&Qs.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?B8t(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Qs.forEach(["delete","get","head"],function(e){uk.headers[e]={}});Qs.forEach(["post","put","patch"],function(e){uk.headers[e]=Qs.merge(F8t)});var Dq=uk,U8t=Na,G8t=Dq,H8t=function(e,n,i){var r=this||G8t;return U8t.forEach(i,function(o){e=o.call(r,e,n)}),e},nU,Eue;function rMe(){return Eue||(Eue=1,nU=function(e){return!!(e&&e.__CANCEL__)}),nU}var Cue=Na,iU=H8t,j8t=rMe(),V8t=Dq,W8t=ck();function rU(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new W8t("canceled")}var $8t=function(e){rU(e),e.headers=e.headers||{},e.data=iU.call(e,e.data,e.headers,e.transformRequest),e.headers=Cue.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Cue.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var n=e.adapter||V8t.adapter;return n(e).then(function(r){return rU(e),r.data=iU.call(e,r.data,r.headers,e.transformResponse),r},function(r){return j8t(r)||(rU(e),r&&r.response&&(r.response.data=iU.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})},Xa=Na,sMe=function(e,n){n=n||{};var i={};function r(h,u){return Xa.isPlainObject(h)&&Xa.isPlainObject(u)?Xa.merge(h,u):Xa.isPlainObject(u)?Xa.merge({},u):Xa.isArray(u)?u.slice():u}function s(h){if(Xa.isUndefined(n[h])){if(!Xa.isUndefined(e[h]))return r(void 0,e[h])}else return r(e[h],n[h])}function o(h){if(!Xa.isUndefined(n[h]))return r(void 0,n[h])}function a(h){if(Xa.isUndefined(n[h])){if(!Xa.isUndefined(e[h]))return r(void 0,e[h])}else return r(void 0,n[h])}function l(h){if(h in n)return r(e[h],n[h]);if(h in e)return r(void 0,e[h])}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return Xa.forEach(Object.keys(e).concat(Object.keys(n)),function(u){var d=c[u]||s,f=d(u);Xa.isUndefined(f)&&d!==l||(i[u]=f)}),i},sU,Tue;function oMe(){return Tue||(Tue=1,sU={version:"0.26.1"}),sU}var q8t=oMe().version,Oq={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Oq[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var Pue={};Oq.transitional=function(e,n,i){function r(s,o){return"[Axios v"+q8t+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return function(s,o,a){if(e===!1)throw new Error(r(o," has been removed"+(n?" in "+n:"")));return n&&!Pue[o]&&(Pue[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function X8t(t,e,n){if(typeof t!="object")throw new TypeError("options must be an object");for(var i=Object.keys(t),r=i.length;r-- >0;){var s=i[r],o=e[s];if(o){var a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new TypeError("option "+s+" must be "+l);continue}if(n!==!0)throw Error("Unknown option "+s)}}var Y8t={assertOptions:X8t,validators:Oq},aMe=Na,K8t=eMe,Due=M8t,Oue=$8t,hk=sMe,lMe=Y8t,O1=lMe.validators;function gC(t){this.defaults=t,this.interceptors={request:new Due,response:new Due}}gC.prototype.request=function(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=hk(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var i=n.transitional;i!==void 0&&lMe.assertOptions(i,{silentJSONParsing:O1.transitional(O1.boolean),forcedJSONParsing:O1.transitional(O1.boolean),clarifyTimeoutError:O1.transitional(O1.boolean)},!1);var r=[],s=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(n)===!1||(s=s&&f.synchronous,r.unshift(f.fulfilled,f.rejected))});var o=[];this.interceptors.response.forEach(function(f){o.push(f.fulfilled,f.rejected)});var a;if(!s){var l=[Oue,void 0];for(Array.prototype.unshift.apply(l,r),l=l.concat(o),a=Promise.resolve(n);l.length;)a=a.then(l.shift(),l.shift());return a}for(var c=n;r.length;){var h=r.shift(),u=r.shift();try{c=h(c)}catch(d){u(d);break}}try{a=Oue(c)}catch(d){return Promise.reject(d)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};gC.prototype.getUri=function(e){return e=hk(this.defaults,e),K8t(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};aMe.forEach(["delete","get","head","options"],function(e){gC.prototype[e]=function(n,i){return this.request(hk(i||{},{method:e,url:n,data:(i||{}).data}))}});aMe.forEach(["post","put","patch"],function(e){gC.prototype[e]=function(n,i,r){return this.request(hk(r||{},{method:e,url:n,data:i}))}});var J8t=gC,oU,Lue;function Z8t(){if(Lue)return oU;Lue=1;var t=ck();function e(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(o){i=o});var r=this;this.promise.then(function(s){if(r._listeners){var o,a=r._listeners.length;for(o=0;o<a;o++)r._listeners[o](s);r._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(l){r.subscribe(l),o=l}).then(s);return a.cancel=function(){r.unsubscribe(o)},a},n(function(o){r.reason||(r.reason=new t(o),i(r.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},e.prototype.unsubscribe=function(i){if(this._listeners){var r=this._listeners.indexOf(i);r!==-1&&this._listeners.splice(r,1)}},e.source=function(){var i,r=new e(function(o){i=o});return{token:r,cancel:i}},oU=e,oU}var aU,Rue;function Q8t(){return Rue||(Rue=1,aU=function(e){return function(i){return e.apply(null,i)}}),aU}var lU,Iue;function e9t(){if(Iue)return lU;Iue=1;var t=Na;return lU=function(n){return t.isObject(n)&&n.isAxiosError===!0},lU}var Bue=Na,t9t=KAe,oO=J8t,n9t=sMe,i9t=Dq;function cMe(t){var e=new oO(t),n=t9t(oO.prototype.request,e);return Bue.extend(n,oO.prototype,e),Bue.extend(n,e),n.create=function(r){return cMe(n9t(t,r))},n}var wd=cMe(i9t);wd.Axios=oO;wd.Cancel=ck();wd.CancelToken=Z8t();wd.isCancel=rMe();wd.VERSION=oMe().version;wd.all=function(e){return Promise.all(e)};wd.spread=Q8t();wd.isAxiosError=e9t();l8t.exports=wd;TR.default=wd;(function(t){t.exports=TR})(a8t);var Ar={},Lq={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const e=CR;t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class n{constructor(s,o=t.BASE_PATH,a=e.default){this.basePath=o,this.axios=a,s&&(this.configuration=s,this.basePath=s.basePath||this.basePath)}}t.BaseAPI=n;class i extends Error{constructor(s,o){super(o),this.field=s,this.name="RequiredError"}}t.RequiredError=i})(Lq);var Rq=Ac&&Ac.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(i.next(h))}catch(u){o(u)}}function l(h){try{c(i.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):r(h.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.createRequestFunction=Ar.toPathString=Ar.serializeDataIfNeeded=Ar.setSearchParams=Ar.setOAuthToObject=Ar.setBearerAuthToObject=Ar.setBasicAuthToObject=Ar.setApiKeyToObject=Ar.assertParamExists=Ar.DUMMY_BASE_URL=void 0;const r9t=Lq;Ar.DUMMY_BASE_URL="https://example.com";Ar.assertParamExists=function(t,e,n){if(n==null)throw new r9t.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};Ar.setApiKeyToObject=function(t,e,n){return Rq(this,void 0,void 0,function*(){if(n&&n.apiKey){const i=typeof n.apiKey=="function"?yield n.apiKey(e):yield n.apiKey;t[e]=i}})};Ar.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};Ar.setBearerAuthToObject=function(t,e){return Rq(this,void 0,void 0,function*(){if(e&&e.accessToken){const n=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+n}})};Ar.setOAuthToObject=function(t,e,n,i){return Rq(this,void 0,void 0,function*(){if(i&&i.accessToken){const r=typeof i.accessToken=="function"?yield i.accessToken(e,n):yield i.accessToken;t.Authorization="Bearer "+r}})};function vV(t,e,n=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(i=>vV(t,i,n)):Object.keys(e).forEach(i=>vV(t,e[i],`${n}${n!==""?".":""}${i}`)):t.has(n)?t.append(n,e):t.set(n,e))}Ar.setSearchParams=function(t,...e){const n=new URLSearchParams(t.search);vV(n,e),t.search=n.toString()};Ar.serializeDataIfNeeded=function(t,e,n){const i=typeof t!="string";return(i&&n&&n.isJsonMime?n.isJsonMime(e.headers["Content-Type"]):i)?JSON.stringify(t!==void 0?t:{}):t||""};Ar.toPathString=function(t){return t.pathname+t.search+t.hash};Ar.createRequestFunction=function(t,e,n,i){return(r=e,s=n)=>{const o=Object.assign(Object.assign({},t.options),{url:((i==null?void 0:i.basePath)||s)+t.url});return r.request(o)}};(function(t){var e=Ac&&Ac.__awaiter||function(o,a,l,c){function h(u){return u instanceof l?u:new l(function(d){d(u)})}return new(l||(l=Promise))(function(u,d){function f(g){try{m(c.next(g))}catch(v){d(v)}}function p(g){try{m(c.throw(g))}catch(v){d(v)}}function m(g){g.done?u(g.value):h(g.value).then(f,p)}m((c=c.apply(o,a||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const n=CR,i=Ar,r=Lq;t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(o){return{cancelFineTune:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("cancelFineTune","fineTuneId",a);const c="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(a))),h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},u),l),f={},p={};i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),{url:i.toPathString(h),options:d}}),createAnswer:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createAnswer","createAnswerRequest",a);const c="/answers",h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},u),l),f={},p={};f["Content-Type"]="application/json",i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),d.data=i.serializeDataIfNeeded(a,d,o),{url:i.toPathString(h),options:d}}),createChatCompletion:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createChatCompletion","createChatCompletionRequest",a);const c="/chat/completions",h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},u),l),f={},p={};f["Content-Type"]="application/json",i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),d.data=i.serializeDataIfNeeded(a,d,o),{url:i.toPathString(h),options:d}}),createClassification:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createClassification","createClassificationRequest",a);const c="/classifications",h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},u),l),f={},p={};f["Content-Type"]="application/json",i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),d.data=i.serializeDataIfNeeded(a,d,o),{url:i.toPathString(h),options:d}}),createCompletion:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createCompletion","createCompletionRequest",a);const c="/completions",h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},u),l),f={},p={};f["Content-Type"]="application/json",i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),d.data=i.serializeDataIfNeeded(a,d,o),{url:i.toPathString(h),options:d}}),createEdit:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createEdit","createEditRequest",a);const c="/edits",h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},u),l),f={},p={};f["Content-Type"]="application/json",i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),d.data=i.serializeDataIfNeeded(a,d,o),{url:i.toPathString(h),options:d}}),createEmbedding:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createEmbedding","createEmbeddingRequest",a);const c="/embeddings",h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},u),l),f={},p={};f["Content-Type"]="application/json",i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),d.data=i.serializeDataIfNeeded(a,d,o),{url:i.toPathString(h),options:d}}),createFile:(a,l,c={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createFile","file",a),i.assertParamExists("createFile","purpose",l);const h="/files",u=new URL(h,i.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const f=Object.assign(Object.assign({method:"POST"},d),c),p={},m={},g=new(o&&o.formDataCtor||FormData);a!==void 0&&g.append("file",a),l!==void 0&&g.append("purpose",l),p["Content-Type"]="multipart/form-data",i.setSearchParams(u,m);let v=d&&d.headers?d.headers:{};return f.headers=Object.assign(Object.assign(Object.assign(Object.assign({},p),g.getHeaders()),v),c.headers),f.data=g,{url:i.toPathString(u),options:f}}),createFineTune:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createFineTune","createFineTuneRequest",a);const c="/fine-tunes",h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},u),l),f={},p={};f["Content-Type"]="application/json",i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),d.data=i.serializeDataIfNeeded(a,d,o),{url:i.toPathString(h),options:d}}),createImage:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createImage","createImageRequest",a);const c="/images/generations",h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},u),l),f={},p={};f["Content-Type"]="application/json",i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),d.data=i.serializeDataIfNeeded(a,d,o),{url:i.toPathString(h),options:d}}),createImageEdit:(a,l,c,h,u,d,f,p={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createImageEdit","image",a),i.assertParamExists("createImageEdit","prompt",l);const m="/images/edits",g=new URL(m,i.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const y=Object.assign(Object.assign({method:"POST"},v),p),x={},b={},S=new(o&&o.formDataCtor||FormData);a!==void 0&&S.append("image",a),c!==void 0&&S.append("mask",c),l!==void 0&&S.append("prompt",l),h!==void 0&&S.append("n",h),u!==void 0&&S.append("size",u),d!==void 0&&S.append("response_format",d),f!==void 0&&S.append("user",f),x["Content-Type"]="multipart/form-data",i.setSearchParams(g,b);let A=v&&v.headers?v.headers:{};return y.headers=Object.assign(Object.assign(Object.assign(Object.assign({},x),S.getHeaders()),A),p.headers),y.data=S,{url:i.toPathString(g),options:y}}),createImageVariation:(a,l,c,h,u,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createImageVariation","image",a);const f="/images/variations",p=new URL(f,i.DUMMY_BASE_URL);let m;o&&(m=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},m),d),v={},y={},x=new(o&&o.formDataCtor||FormData);a!==void 0&&x.append("image",a),l!==void 0&&x.append("n",l),c!==void 0&&x.append("size",c),h!==void 0&&x.append("response_format",h),u!==void 0&&x.append("user",u),v["Content-Type"]="multipart/form-data",i.setSearchParams(p,y);let b=m&&m.headers?m.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},v),x.getHeaders()),b),d.headers),g.data=x,{url:i.toPathString(p),options:g}}),createModeration:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createModeration","createModerationRequest",a);const c="/moderations",h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},u),l),f={},p={};f["Content-Type"]="application/json",i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),d.data=i.serializeDataIfNeeded(a,d,o),{url:i.toPathString(h),options:d}}),createSearch:(a,l,c={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createSearch","engineId",a),i.assertParamExists("createSearch","createSearchRequest",l);const h="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(a))),u=new URL(h,i.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const f=Object.assign(Object.assign({method:"POST"},d),c),p={},m={};p["Content-Type"]="application/json",i.setSearchParams(u,m);let g=d&&d.headers?d.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},p),g),c.headers),f.data=i.serializeDataIfNeeded(l,f,o),{url:i.toPathString(u),options:f}}),createTranscription:(a,l,c,h,u,d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createTranscription","file",a),i.assertParamExists("createTranscription","model",l);const p="/audio/transcriptions",m=new URL(p,i.DUMMY_BASE_URL);let g;o&&(g=o.baseOptions);const v=Object.assign(Object.assign({method:"POST"},g),f),y={},x={},b=new(o&&o.formDataCtor||FormData);a!==void 0&&b.append("file",a),l!==void 0&&b.append("model",l),c!==void 0&&b.append("prompt",c),h!==void 0&&b.append("response_format",h),u!==void 0&&b.append("temperature",u),d!==void 0&&b.append("language",d),y["Content-Type"]="multipart/form-data",i.setSearchParams(m,x);let S=g&&g.headers?g.headers:{};return v.headers=Object.assign(Object.assign(Object.assign(Object.assign({},y),b.getHeaders()),S),f.headers),v.data=b,{url:i.toPathString(m),options:v}}),createTranslation:(a,l,c,h,u,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createTranslation","file",a),i.assertParamExists("createTranslation","model",l);const f="/audio/translations",p=new URL(f,i.DUMMY_BASE_URL);let m;o&&(m=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},m),d),v={},y={},x=new(o&&o.formDataCtor||FormData);a!==void 0&&x.append("file",a),l!==void 0&&x.append("model",l),c!==void 0&&x.append("prompt",c),h!==void 0&&x.append("response_format",h),u!==void 0&&x.append("temperature",u),v["Content-Type"]="multipart/form-data",i.setSearchParams(p,y);let b=m&&m.headers?m.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},v),x.getHeaders()),b),d.headers),g.data=x,{url:i.toPathString(p),options:g}}),deleteFile:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("deleteFile","fileId",a);const c="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(a))),h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},u),l),f={},p={};i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),{url:i.toPathString(h),options:d}}),deleteModel:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("deleteModel","model",a);const c="/models/{model}".replace("{model}",encodeURIComponent(String(a))),h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},u),l),f={},p={};i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),{url:i.toPathString(h),options:d}}),downloadFile:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("downloadFile","fileId",a);const c="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(a))),h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},u),l),f={},p={};i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),{url:i.toPathString(h),options:d}}),listEngines:(a={})=>e(this,void 0,void 0,function*(){const l="/engines",c=new URL(l,i.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const u=Object.assign(Object.assign({method:"GET"},h),a),d={},f={};i.setSearchParams(c,f);let p=h&&h.headers?h.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},d),p),a.headers),{url:i.toPathString(c),options:u}}),listFiles:(a={})=>e(this,void 0,void 0,function*(){const l="/files",c=new URL(l,i.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const u=Object.assign(Object.assign({method:"GET"},h),a),d={},f={};i.setSearchParams(c,f);let p=h&&h.headers?h.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},d),p),a.headers),{url:i.toPathString(c),options:u}}),listFineTuneEvents:(a,l,c={})=>e(this,void 0,void 0,function*(){i.assertParamExists("listFineTuneEvents","fineTuneId",a);const h="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(a))),u=new URL(h,i.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},d),c),p={},m={};l!==void 0&&(m.stream=l),i.setSearchParams(u,m);let g=d&&d.headers?d.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},p),g),c.headers),{url:i.toPathString(u),options:f}}),listFineTunes:(a={})=>e(this,void 0,void 0,function*(){const l="/fine-tunes",c=new URL(l,i.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const u=Object.assign(Object.assign({method:"GET"},h),a),d={},f={};i.setSearchParams(c,f);let p=h&&h.headers?h.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},d),p),a.headers),{url:i.toPathString(c),options:u}}),listModels:(a={})=>e(this,void 0,void 0,function*(){const l="/models",c=new URL(l,i.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const u=Object.assign(Object.assign({method:"GET"},h),a),d={},f={};i.setSearchParams(c,f);let p=h&&h.headers?h.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},d),p),a.headers),{url:i.toPathString(c),options:u}}),retrieveEngine:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("retrieveEngine","engineId",a);const c="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(a))),h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},u),l),f={},p={};i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),{url:i.toPathString(h),options:d}}),retrieveFile:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("retrieveFile","fileId",a);const c="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(a))),h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},u),l),f={},p={};i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),{url:i.toPathString(h),options:d}}),retrieveFineTune:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("retrieveFineTune","fineTuneId",a);const c="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(a))),h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},u),l),f={},p={};i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),{url:i.toPathString(h),options:d}}),retrieveModel:(a,l={})=>e(this,void 0,void 0,function*(){i.assertParamExists("retrieveModel","model",a);const c="/models/{model}".replace("{model}",encodeURIComponent(String(a))),h=new URL(c,i.DUMMY_BASE_URL);let u;o&&(u=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},u),l),f={},p={};i.setSearchParams(h,p);let m=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},f),m),l.headers),{url:i.toPathString(h),options:d}})}},t.OpenAIApiFp=function(o){const a=t.OpenAIApiAxiosParamCreator(o);return{cancelFineTune(l,c){return e(this,void 0,void 0,function*(){const h=yield a.cancelFineTune(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},createAnswer(l,c){return e(this,void 0,void 0,function*(){const h=yield a.createAnswer(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},createChatCompletion(l,c){return e(this,void 0,void 0,function*(){const h=yield a.createChatCompletion(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},createClassification(l,c){return e(this,void 0,void 0,function*(){const h=yield a.createClassification(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},createCompletion(l,c){return e(this,void 0,void 0,function*(){const h=yield a.createCompletion(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},createEdit(l,c){return e(this,void 0,void 0,function*(){const h=yield a.createEdit(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},createEmbedding(l,c){return e(this,void 0,void 0,function*(){const h=yield a.createEmbedding(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},createFile(l,c,h){return e(this,void 0,void 0,function*(){const u=yield a.createFile(l,c,h);return i.createRequestFunction(u,n.default,r.BASE_PATH,o)})},createFineTune(l,c){return e(this,void 0,void 0,function*(){const h=yield a.createFineTune(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},createImage(l,c){return e(this,void 0,void 0,function*(){const h=yield a.createImage(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},createImageEdit(l,c,h,u,d,f,p,m){return e(this,void 0,void 0,function*(){const g=yield a.createImageEdit(l,c,h,u,d,f,p,m);return i.createRequestFunction(g,n.default,r.BASE_PATH,o)})},createImageVariation(l,c,h,u,d,f){return e(this,void 0,void 0,function*(){const p=yield a.createImageVariation(l,c,h,u,d,f);return i.createRequestFunction(p,n.default,r.BASE_PATH,o)})},createModeration(l,c){return e(this,void 0,void 0,function*(){const h=yield a.createModeration(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},createSearch(l,c,h){return e(this,void 0,void 0,function*(){const u=yield a.createSearch(l,c,h);return i.createRequestFunction(u,n.default,r.BASE_PATH,o)})},createTranscription(l,c,h,u,d,f,p){return e(this,void 0,void 0,function*(){const m=yield a.createTranscription(l,c,h,u,d,f,p);return i.createRequestFunction(m,n.default,r.BASE_PATH,o)})},createTranslation(l,c,h,u,d,f){return e(this,void 0,void 0,function*(){const p=yield a.createTranslation(l,c,h,u,d,f);return i.createRequestFunction(p,n.default,r.BASE_PATH,o)})},deleteFile(l,c){return e(this,void 0,void 0,function*(){const h=yield a.deleteFile(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},deleteModel(l,c){return e(this,void 0,void 0,function*(){const h=yield a.deleteModel(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},downloadFile(l,c){return e(this,void 0,void 0,function*(){const h=yield a.downloadFile(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},listEngines(l){return e(this,void 0,void 0,function*(){const c=yield a.listEngines(l);return i.createRequestFunction(c,n.default,r.BASE_PATH,o)})},listFiles(l){return e(this,void 0,void 0,function*(){const c=yield a.listFiles(l);return i.createRequestFunction(c,n.default,r.BASE_PATH,o)})},listFineTuneEvents(l,c,h){return e(this,void 0,void 0,function*(){const u=yield a.listFineTuneEvents(l,c,h);return i.createRequestFunction(u,n.default,r.BASE_PATH,o)})},listFineTunes(l){return e(this,void 0,void 0,function*(){const c=yield a.listFineTunes(l);return i.createRequestFunction(c,n.default,r.BASE_PATH,o)})},listModels(l){return e(this,void 0,void 0,function*(){const c=yield a.listModels(l);return i.createRequestFunction(c,n.default,r.BASE_PATH,o)})},retrieveEngine(l,c){return e(this,void 0,void 0,function*(){const h=yield a.retrieveEngine(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},retrieveFile(l,c){return e(this,void 0,void 0,function*(){const h=yield a.retrieveFile(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},retrieveFineTune(l,c){return e(this,void 0,void 0,function*(){const h=yield a.retrieveFineTune(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})},retrieveModel(l,c){return e(this,void 0,void 0,function*(){const h=yield a.retrieveModel(l,c);return i.createRequestFunction(h,n.default,r.BASE_PATH,o)})}}},t.OpenAIApiFactory=function(o,a,l){const c=t.OpenAIApiFp(o);return{cancelFineTune(h,u){return c.cancelFineTune(h,u).then(d=>d(l,a))},createAnswer(h,u){return c.createAnswer(h,u).then(d=>d(l,a))},createChatCompletion(h,u){return c.createChatCompletion(h,u).then(d=>d(l,a))},createClassification(h,u){return c.createClassification(h,u).then(d=>d(l,a))},createCompletion(h,u){return c.createCompletion(h,u).then(d=>d(l,a))},createEdit(h,u){return c.createEdit(h,u).then(d=>d(l,a))},createEmbedding(h,u){return c.createEmbedding(h,u).then(d=>d(l,a))},createFile(h,u,d){return c.createFile(h,u,d).then(f=>f(l,a))},createFineTune(h,u){return c.createFineTune(h,u).then(d=>d(l,a))},createImage(h,u){return c.createImage(h,u).then(d=>d(l,a))},createImageEdit(h,u,d,f,p,m,g,v){return c.createImageEdit(h,u,d,f,p,m,g,v).then(y=>y(l,a))},createImageVariation(h,u,d,f,p,m){return c.createImageVariation(h,u,d,f,p,m).then(g=>g(l,a))},createModeration(h,u){return c.createModeration(h,u).then(d=>d(l,a))},createSearch(h,u,d){return c.createSearch(h,u,d).then(f=>f(l,a))},createTranscription(h,u,d,f,p,m,g){return c.createTranscription(h,u,d,f,p,m,g).then(v=>v(l,a))},createTranslation(h,u,d,f,p,m){return c.createTranslation(h,u,d,f,p,m).then(g=>g(l,a))},deleteFile(h,u){return c.deleteFile(h,u).then(d=>d(l,a))},deleteModel(h,u){return c.deleteModel(h,u).then(d=>d(l,a))},downloadFile(h,u){return c.downloadFile(h,u).then(d=>d(l,a))},listEngines(h){return c.listEngines(h).then(u=>u(l,a))},listFiles(h){return c.listFiles(h).then(u=>u(l,a))},listFineTuneEvents(h,u,d){return c.listFineTuneEvents(h,u,d).then(f=>f(l,a))},listFineTunes(h){return c.listFineTunes(h).then(u=>u(l,a))},listModels(h){return c.listModels(h).then(u=>u(l,a))},retrieveEngine(h,u){return c.retrieveEngine(h,u).then(d=>d(l,a))},retrieveFile(h,u){return c.retrieveFile(h,u).then(d=>d(l,a))},retrieveFineTune(h,u){return c.retrieveFineTune(h,u).then(d=>d(l,a))},retrieveModel(h,u){return c.retrieveModel(h,u).then(d=>d(l,a))}}};class s extends r.BaseAPI{cancelFineTune(a,l){return t.OpenAIApiFp(this.configuration).cancelFineTune(a,l).then(c=>c(this.axios,this.basePath))}createAnswer(a,l){return t.OpenAIApiFp(this.configuration).createAnswer(a,l).then(c=>c(this.axios,this.basePath))}createChatCompletion(a,l){return t.OpenAIApiFp(this.configuration).createChatCompletion(a,l).then(c=>c(this.axios,this.basePath))}createClassification(a,l){return t.OpenAIApiFp(this.configuration).createClassification(a,l).then(c=>c(this.axios,this.basePath))}createCompletion(a,l){return t.OpenAIApiFp(this.configuration).createCompletion(a,l).then(c=>c(this.axios,this.basePath))}createEdit(a,l){return t.OpenAIApiFp(this.configuration).createEdit(a,l).then(c=>c(this.axios,this.basePath))}createEmbedding(a,l){return t.OpenAIApiFp(this.configuration).createEmbedding(a,l).then(c=>c(this.axios,this.basePath))}createFile(a,l,c){return t.OpenAIApiFp(this.configuration).createFile(a,l,c).then(h=>h(this.axios,this.basePath))}createFineTune(a,l){return t.OpenAIApiFp(this.configuration).createFineTune(a,l).then(c=>c(this.axios,this.basePath))}createImage(a,l){return t.OpenAIApiFp(this.configuration).createImage(a,l).then(c=>c(this.axios,this.basePath))}createImageEdit(a,l,c,h,u,d,f,p){return t.OpenAIApiFp(this.configuration).createImageEdit(a,l,c,h,u,d,f,p).then(m=>m(this.axios,this.basePath))}createImageVariation(a,l,c,h,u,d){return t.OpenAIApiFp(this.configuration).createImageVariation(a,l,c,h,u,d).then(f=>f(this.axios,this.basePath))}createModeration(a,l){return t.OpenAIApiFp(this.configuration).createModeration(a,l).then(c=>c(this.axios,this.basePath))}createSearch(a,l,c){return t.OpenAIApiFp(this.configuration).createSearch(a,l,c).then(h=>h(this.axios,this.basePath))}createTranscription(a,l,c,h,u,d,f){return t.OpenAIApiFp(this.configuration).createTranscription(a,l,c,h,u,d,f).then(p=>p(this.axios,this.basePath))}createTranslation(a,l,c,h,u,d){return t.OpenAIApiFp(this.configuration).createTranslation(a,l,c,h,u,d).then(f=>f(this.axios,this.basePath))}deleteFile(a,l){return t.OpenAIApiFp(this.configuration).deleteFile(a,l).then(c=>c(this.axios,this.basePath))}deleteModel(a,l){return t.OpenAIApiFp(this.configuration).deleteModel(a,l).then(c=>c(this.axios,this.basePath))}downloadFile(a,l){return t.OpenAIApiFp(this.configuration).downloadFile(a,l).then(c=>c(this.axios,this.basePath))}listEngines(a){return t.OpenAIApiFp(this.configuration).listEngines(a).then(l=>l(this.axios,this.basePath))}listFiles(a){return t.OpenAIApiFp(this.configuration).listFiles(a).then(l=>l(this.axios,this.basePath))}listFineTuneEvents(a,l,c){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(a,l,c).then(h=>h(this.axios,this.basePath))}listFineTunes(a){return t.OpenAIApiFp(this.configuration).listFineTunes(a).then(l=>l(this.axios,this.basePath))}listModels(a){return t.OpenAIApiFp(this.configuration).listModels(a).then(l=>l(this.axios,this.basePath))}retrieveEngine(a,l){return t.OpenAIApiFp(this.configuration).retrieveEngine(a,l).then(c=>c(this.axios,this.basePath))}retrieveFile(a,l){return t.OpenAIApiFp(this.configuration).retrieveFile(a,l).then(c=>c(this.axios,this.basePath))}retrieveFineTune(a,l){return t.OpenAIApiFp(this.configuration).retrieveFineTune(a,l).then(c=>c(this.axios,this.basePath))}retrieveModel(a,l){return t.OpenAIApiFp(this.configuration).retrieveModel(a,l).then(c=>c(this.axios,this.basePath))}}t.OpenAIApi=s})(YAe);var dk={};const s9t="openai",o9t="3.2.1",a9t="Node.js library for the OpenAI API",l9t={type:"git",url:"git@github.com:openai/openai-node.git"},c9t=["openai","open","ai","gpt-3","gpt3"],u9t="OpenAI",h9t="MIT",d9t="./dist/index.js",f9t="./dist/index.d.ts",p9t={build:"tsc --outDir dist/"},m9t={axios:"^0.26.0","form-data":"^4.0.0"},g9t={"@types/node":"^12.11.5",typescript:"^3.6.4"},v9t={name:s9t,version:o9t,description:a9t,repository:l9t,keywords:c9t,author:u9t,license:h9t,main:d9t,types:f9t,scripts:p9t,dependencies:m9t,devDependencies:g9t};var cU,kue;function y9t(){return kue||(kue=1,cU=typeof self=="object"?self.FormData:window.FormData),cU}Object.defineProperty(dk,"__esModule",{value:!0});dk.Configuration=void 0;const x9t=v9t;class b9t{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${x9t.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=y9t())}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(n.test(e)||e.toLowerCase()==="application/json-patch+json")}}dk.Configuration=b9t;(function(t){var e=Ac&&Ac.__createBinding||(Object.create?function(i,r,s,o){o===void 0&&(o=s),Object.defineProperty(i,o,{enumerable:!0,get:function(){return r[s]}})}:function(i,r,s,o){o===void 0&&(o=s),i[o]=r[s]}),n=Ac&&Ac.__exportStar||function(i,r){for(var s in i)s!=="default"&&!r.hasOwnProperty(s)&&e(r,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(YAe,t),n(dk,t)})(pV);const Fue=[{name:"ColorPicker",icon:"swatch.png"},{name:"Customize",icon:"file.png"},{name:"Delivery",icon:"delivery.png"}],Nue=[{name:"AI Helper",icon:"ai.png"},{name:"Upload Logo",icon:"upload.png"},{name:"Textures",icon:"texture.png"},{name:"Logo",icon:"logo-tshirt.png"},{name:"ColorPicker",icon:"swatch.png"},{name:"Customize",icon:"file.png"},{name:"Delivery",icon:"delivery.png"}],w9t=()=>{const t=Ml(Gt),[e,n]=W.useState(""),[i,r]=W.useState(""),[s,o]=W.useState(!1),[a,l]=W.useState(t.fakeUser.address),[c,h]=W.useState(""),[u,d]=W.useState("Create a gradient pattern that goes from blue to red"),{enqueueSnackbar:f}=oW(),[p,m]=ue.useState(!1),g=()=>m(!0),v=()=>m(!1),[y,x]=W.useState(!1),[b,S]=W.useState(df),[A,E]=W.useState(t.myItemShow=="shoe"?Fue:Nue),M={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"auto",bgcolor:"transparent"},C={position:"absolute",top:"50%",left:"50%",width:"auto",bgcolor:"transparent"};let T=ng();const[D,L]=W.useState(window.innerWidth);W.useEffect(()=>{const te=()=>{L(window.innerWidth)};return window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[]);const[I,R]=W.useState(!1),H=()=>{R(!I)};W.useEffect(()=>{Gt.cusState=!1,Gt.deliveryState=!1},[]),W.useEffect(()=>{y&&f("No more editing is allowed after confirm shipments. ",{variant:"error"}),i=="ColorPicker"?Gt.ColorPickerOn=!0:Gt.ColorPickerOn=!1},[i]),W.useEffect(()=>{console.log(t.logoDecal)},[t]),W.useEffect(()=>{t.myItemShow=="shoe"?E(Fue):E(Nue)},[b]);const Z=()=>{r(""),Gt.page="home",T("/auction_house_project/home")},ee=()=>{r(""),Gt.page="auction",T("/auction_house_project/auction")},F=()=>{r(""),Gt.page="profile",T("/auction_house_project/profile")},V=async(te,re)=>{try{o(!0);const se=new pV.Configuration({apiKey:"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"});delete se.baseOptions.headers["User-Agent"];const oe=(await new pV.OpenAIApi(se).createImage({prompt:re,n:1,size:"1024x1024",response_format:"b64_json"})).data.data[0].b64_json;z(te,`data:image/png;base64,${oe}`)}catch(se){console.log(se)}finally{o(!1),r("")}},U=te=>{te==="Delivery"?(Gt.deliveryState=!0,f("Delivery Address set. ",{variant:"success"}),r("")):te==="Customize"&&(Gt.cusState=!0,f("Message received. We will call you for more customization details.",{variant:"confirm"}),r("")),te=="logo"?(u||f("Please enter your AI Prompt",{variant:"error"}),console.log("AI logo"),V(te,u)):te=="full"&&(u||f("Please enter your AI Prompt",{variant:"error"}),console.log("AI full"),V(te,u))},j=()=>{v(),r(""),x(!0),f("Your shipment is confirmed. ",{variant:"success"})},z=(te,re)=>{te=="logo"?Gt.logoDecal=re:te=="full"&&(Gt.fullDecal=re)},Y=te=>{ALe(e).then(re=>{z(te,re),r("")})},J=()=>{if(y)return null;switch(i){case"Delivery":return ne(kce,{prompt:a,setPrompt:l,handleSubmit:U,name:i,msg:"Please enter your delivery address..."},"1");case"Customize":return ne(kce,{prompt:c,setPrompt:h,handleSubmit:U,name:i,msg:"Please enter your customize message..."},"2");case"ColorPicker":return ne(r8t,{});case"AI Helper":return ne(o8t,{prompt:u,setPrompt:d,generatingImg:s,handleSubmit:U});case"Upload Logo":return ne(s8t,{file:e,setFile:n,readFile:Y});default:return null}},K=te=>{te!=i?r(te):r(""),te=="Logo"&&(console.log(t.isLogoTexture),t.isLogoTexture?(Gt.isLogoTexture=!1,f("Logo function is Off. ",{variant:"default"})):(Gt.isLogoTexture=!0,f("Logo function is On",{variant:"info"}))),te=="Textures"&&(console.log(t.isLogoTexture),t.isFullTexture?(Gt.isFullTexture=!1,f("Full Textures function is Off. ",{variant:"default"})):(Gt.isFullTexture=!0,f("Full Textures function is On",{variant:"info"})))},X=te=>{switch(Gt.myItemShow=te,r(""),te){case"shoe":S(df);break;case"TShirt":S(TM);break;default:S(df);break}};return et(jn.section,{children:[ne(jn.div,{className:"absolute z-20 top-5 left-5",...pl,children:ne(bn,{type:"outline",title:ne(bw,{size:18}),handleClick:()=>Z(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm"})}),ne(jn.div,{className:"absolute z-20 top-5 right-5",...pl,children:D<=960?et(Qo,{children:[ne("div",{className:"flex flex-row justify-end",children:ne("button",{className:" items-end  bg-[#06B6D4] text-dark rounded-lg font-bold text-sm px-4 py-2.5 mr-2",onClick:()=>H(),children:ne(vE,{size:24})})}),ne(zb,{in:I,timeout:"auto",unmountOnExit:!0,className:"",children:et("div",{className:"mt-5 grid grid-cols-1",children:[ne(bn,{type:"filled",title:"Profile",handleClick:()=>F(),customStyles:"w-full px-4 py-2.5 font-bold text-sm mt-2"}),ne(bn,{type:"filled",title:"Auction",handleClick:()=>ee(),customStyles:"w-full px-4 py-2.5 font-bold text-sm mt-2"})]})})]}):et(Qo,{children:[ne(bn,{type:"filled",title:"Profile",handleClick:()=>F(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm mr-2"}),ne(bn,{type:"filled",title:"Auction",handleClick:()=>ee(),customStyles:"w-fit px-4 py-2.5 font-bold text-sm"})]})}),ne(jn.div,{className:"z-10",children:et("div",{className:"model-selector",children:[et("div",{onClick:()=>X("shoe"),children:[ne("img",{src:"shoe.jpg",alt:df.title}),ne("h4",{children:df.title})]}),et("div",{onClick:()=>X("TShirt"),children:[ne("img",{src:"TShirt.jpg",alt:TM.title}),ne("h4",{children:TM.title})]})]})}),ne(jn.div,{className:"absolute top-0 left-0 z-10",...jJ("left"),children:ne("div",{className:"flex items-center min-h-screen",children:et("div",{className:"editortabs-container tabs",children:[A.map(te=>ne(x6t,{tab:te,handleClick:()=>K(te.name),okState:te.name=="Delivery"?t.deliveryState:te.name=="Customize"?t.cusState:te.name=="Logo"?t.isLogoTexture:te.name=="Textures"?t.isFullTexture:!1},te.name)),J()]})})}),et(jn.div,{className:"filtertabs-container",...jJ("up"),children:[ne("button",{className:"bg-green-500 hover:bg-green-600 text-dark rounded-lg font-bold text-sm px-4 py-2.5 transition-colors duration-300 ease-in-out",onClick:g,disabled:y,children:y?"Please wait for delivery.":"Confirm Shipments"}),ne(Fme,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:p,onClose:v,closeAfterTransition:!0,slots:{backdrop:v9},slotProps:{backdrop:{timeout:500}},children:ne(g9,{in:p,children:ne(kme,{sx:D<=960?C:M,children:et("div",{className:"bg-white rounded-lg md:max-w-md md:mx-auto p-4 fixed inset-x-0 bottom-0  mb-[15rem] md:mb-4 mx-4 md:relative",children:[et("div",{className:"md:flex items-center",children:[ne("div",{className:"rounded-full border border-gray-300 flex items-center justify-center w-16 h-16 flex-shrink-0 mx-auto",children:ne(CAe,{size:24})}),et("div",{className:"mt-4 md:mt-0 md:ml-6 text-center md:text-left",children:[ne("p",{className:"font-bold",children:"Confirm Your Shipment"}),ne("p",{className:"text-sm text-gray-700 mt-1",children:"You cannot make more changes after you confirm your shipment."})]})]}),et("div",{className:"text-center md:text-right mt-4 md:flex md:justify-end",children:[ne("button",{className:"block w-full md:inline-block md:w-auto px-4 py-3 md:py-2 bg-gray-200 rounded-lg font-semibold text-sm md:ml-2 md:order-2",onClick:j,children:"Confirm"}),ne("button",{className:`block w-full md:inline-block md:w-auto px-4 py-3 md:py-2 bg-red-200 text-red-700 rounded-lg font-semibold text-sm mt-4
                                md:mt-0 md:order-1`,onClick:v,children:"Cancel"})]})]})})})})]})]})},_9t=({children:t,Product:e})=>{const n=W.useRef(),i=Ml(Gt),[r,s]=W.useState(!1),[o,a]=W.useState({x:0,y:0}),[l,c]=W.useState([0,0,0]),h=e.normalSize.homePosition,u=f=>{s(!0),a({x:f.clientX,y:f.clientY})},d=()=>{s(!1)};return W.useEffect(()=>(document.addEventListener("mousedown",u),document.addEventListener("mouseup",d),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("mouseup",d)}),[]),YI((f,p)=>{const m=window.innerWidth<=1260,g=window.innerWidth<=600,v=window.location.href.split("/").pop();let y=h;if(v=="home"||v==""?(m&&(y=e.midSize.homePosition),g&&(y=e.phoneSize.homePosition)):v=="auction"?g?y=e.phoneSize.auctionPosition:y=e.normalSize.auctionPosition:v=="signin"||v=="signup"?g?y=e.phoneSize.signPosition:y=e.normalSize.signPosition:v=="otherGift"?g?y=e.phoneSize.otherPosition:y=e.normalSize.otherPosition:v=="bidedItem"?g?y=e.phoneSize.bidPosition:y=e.normalSize.bidPosition:y=[0,0,1200],bA.damp3(f.camera.position,y,.25,p),r)if(v=="bidedItem"&&i.ColorPickerOn)bA.dampE(n.current.rotation,[f.pointer.y/10,-f.pointer.x/5,0],.25,p);else{const x={x:f.mouse.x,y:f.mouse.y},b=[l[0]+(x.y-o.y)/100,l[1]+(x.x-o.x)/100,l[2]];bA.dampE(n.current.rotation,b,.25,p),c(b),a(x)}else bA.dampE(n.current.rotation,[f.pointer.y/10,-f.pointer.x/5,0],.25,p)}),ne("group",{ref:n,children:t})};class S9t extends qs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new T9t(n)}),this.register(function(n){return new B9t(n)}),this.register(function(n){return new k9t(n)}),this.register(function(n){return new F9t(n)}),this.register(function(n){return new D9t(n)}),this.register(function(n){return new O9t(n)}),this.register(function(n){return new L9t(n)}),this.register(function(n){return new R9t(n)}),this.register(function(n){return new C9t(n)}),this.register(function(n){return new I9t(n)}),this.register(function(n){return new P9t(n)}),this.register(function(n){return new M9t(n)}),this.register(function(n){return new N9t(n)}),this.register(function(n){return new z9t(n)})}load(e,n,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=vl.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new js(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(h){n(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,r){let s;const o={},a={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===uMe){try{o[Hn.KHR_BINARY_GLTF]=new U9t(e)}catch(u){r&&r(u);return}s=JSON.parse(o[Hn.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new Q9t(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const u=this.pluginCallbacks[h](c);a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const u=s.extensionsUsed[h],d=s.extensionsRequired||[];switch(u){case Hn.KHR_MATERIALS_UNLIT:o[u]=new E9t;break;case Hn.KHR_DRACO_MESH_COMPRESSION:o[u]=new G9t(s,this.dracoLoader);break;case Hn.KHR_TEXTURE_TRANSFORM:o[u]=new H9t;break;case Hn.KHR_MESH_QUANTIZATION:o[u]=new j9t;break;default:d.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,n){const i=this;return new Promise(function(r,s){i.parse(e,n,r,s)})}}function A9t(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Hn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class M9t{constructor(e){this.parser=e,this.name=Hn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const s=n[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let r=n.cache.get(i);if(r)return r;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const h=new nt(16777215);l.color!==void 0&&h.fromArray(l.color);const u=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new FE(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new kE(h),c.distance=u;break;case"spot":c=new BE(h),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Vp(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),n.cache.add(i,r),r}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(n.cache,a,l)})}}class E9t{constructor(){this.name=Hn.KHR_MATERIALS_UNLIT}getMaterialType(){return ls}extendParams(e,n,i){const r=[];e.color=new nt(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,xn))}return Promise.all(r)}}class C9t{constructor(e){this.parser=e,this.name=Hn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class T9t{constructor(e){this.parser=e,this.name=Hn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Me(a,a)}return Promise.all(s)}}class P9t{constructor(e){this.parser=e,this.name=Hn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class D9t{constructor(e){this.parser=e,this.name=Hn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new nt(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(n,"sheenColorMap",o.sheenColorTexture,xn)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class O9t{constructor(e){this.parser=e,this.name=Hn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class L9t{constructor(e){this.parser=e,this.name=Hn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new nt(a[0],a[1],a[2]),Promise.all(s)}}class R9t{constructor(e){this.parser=e,this.name=Hn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class I9t{constructor(e){this.parser=e,this.name=Hn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ro}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new nt(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(n,"specularColorMap",o.specularColorTexture,xn)),Promise.all(s)}}class B9t{constructor(e){this.parser=e,this.name=Hn.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class k9t{constructor(e){this.parser=e,this.name=Hn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class F9t{constructor(e){this.parser=e,this.name=Hn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class N9t{constructor(e){this.name=Hn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,h=r.count,u=r.byteStride,d=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,u,d,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(h*u);return o.decodeGltfBuffer(new Uint8Array(f),h,u,d,r.mode,r.filter),f})})}else return null}}class z9t{constructor(e){this.name=Hn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,i=n.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=n.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==nc.TRIANGLES&&c.mode!==nc.TRIANGLE_STRIP&&c.mode!==nc.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(h=>(l[c]=h,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const h=c.pop(),u=h.isGroup?h.children:[h],d=c[0].count,f=[];for(const p of u){const m=new at,g=new q,v=new Rr,y=new q(1,1,1),x=new R9(p.geometry,p.material,d);for(let b=0;b<d;b++)l.TRANSLATION&&g.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,b),l.SCALE&&y.fromBufferAttribute(l.SCALE,b),x.setMatrixAt(b,m.compose(g,v,y));for(const b in l)b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&p.geometry.setAttribute(b,l[b]);wn.prototype.copy.call(x,p),x.frustumCulled=!1,this.parser.assignFinalMaterial(x),f.push(x)}return h.isGroup?(h.clear(),h.add(...f),h):f[0]}))}}const uMe="glTF",uA=12,zue={JSON:1313821514,BIN:5130562};class U9t{constructor(e){this.name=Hn.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,uA),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==uMe)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-uA,s=new DataView(e,uA);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===zue.JSON){const c=new Uint8Array(e,uA+o,a);this.content=i.decode(c)}else if(l===zue.BIN){const c=uA+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class G9t{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Hn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const h in o){const u=yV[h]||h.toLowerCase();a[u]=o[h]}for(const h in e.attributes){const u=yV[h]||h.toLowerCase();if(o[h]!==void 0){const d=i.accessors[e.attributes[h]],f=Ab[d.componentType];c[u]=f.name,l[u]=d.normalized===!0}}return n.getDependency("bufferView",s).then(function(h){return new Promise(function(u){r.decodeDracoFile(h,function(d){for(const f in d.attributes){const p=d.attributes[f],m=l[f];m!==void 0&&(p.normalized=m)}u(d)},a,c)})})}}class H9t{constructor(){this.name=Hn.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return n.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class j9t{constructor(){this.name=Hn.KHR_MESH_QUANTIZATION}}class hMe extends qv{constructor(e,n,i,r){super(e,n,i,r)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)n[o]=i[s+o];return n}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,h=r-n,u=(i-n)/h,d=u*u,f=d*u,p=e*c,m=p-c,g=-2*f+3*d,v=f-d,y=1-g,x=v-d+u;for(let b=0;b!==a;b++){const S=o[m+b+a],A=o[m+b+l]*h,E=o[p+b+a],M=o[p+b]*h;s[b]=y*S+x*A+g*E+v*M}return s}}const V9t=new Rr;class W9t extends hMe{interpolate_(e,n,i,r){const s=super.interpolate_(e,n,i,r);return V9t.fromArray(s).normalize().toArray(s),s}}const nc={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ab={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Uue={9728:ur,9729:Ei,9984:Gb,9985:_E,9986:V0,9987:Nc},Gue={33071:zs,33648:mv,10497:ku},uU={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},yV={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Bp={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},$9t={CUBICSPLINE:void 0,LINEAR:zf,STEP:vv},hU={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function q9t(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new lg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Bu})),t.DefaultMaterial}function hA(t,e,n){for(const i in n.extensions)t[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function Vp(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function X9t(t,e,n){let i=!1,r=!1,s=!1;for(let c=0,h=e.length;c<h;c++){const u=e[c];if(u.POSITION!==void 0&&(i=!0),u.NORMAL!==void 0&&(r=!0),u.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let c=0,h=e.length;c<h;c++){const u=e[c];if(i){const d=u.POSITION!==void 0?n.getDependency("accessor",u.POSITION):t.attributes.position;o.push(d)}if(r){const d=u.NORMAL!==void 0?n.getDependency("accessor",u.NORMAL):t.attributes.normal;a.push(d)}if(s){const d=u.COLOR_0!==void 0?n.getDependency("accessor",u.COLOR_0):t.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],u=c[1],d=c[2];return i&&(t.morphAttributes.position=h),r&&(t.morphAttributes.normal=u),s&&(t.morphAttributes.color=d),t.morphTargetsRelative=!0,t})}function Y9t(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function K9t(t){const e=t.extensions&&t.extensions[Hn.KHR_DRACO_MESH_COMPRESSION];let n;return e?n="draco:"+e.bufferView+":"+e.indices+":"+Hue(e.attributes):n=t.indices+":"+Hue(t.attributes)+":"+t.mode,n}function Hue(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function xV(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function J9t(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Z9t=new at;class Q9t{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new A9t,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new Ow(this.options.manager):this.textureLoader=new q9(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new js(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};hA(s,a,r),Vp(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=n.length;r<s;r++){const o=n[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,h]of o.children.entries())s(h,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=e(n[i]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const s=e(n[r]);s&&i.push(s)}return i}getDependency(e,n){const i=e+":"+n;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Hn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(vl.resolveURL(n.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,s=n.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const n=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=uU[r.type],a=Ab[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new Nt(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=uU[r.type],c=Ab[r.componentType],h=c.BYTES_PER_ELEMENT,u=h*l,d=r.byteOffset||0,f=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let m,g;if(f&&f!==u){const v=Math.floor(d/f),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let x=n.cache.get(y);x||(m=new c(a,v*f,r.count*f/h),x=new Mw(m,f/h),n.cache.add(y,x)),g=new Gf(x,l,d%f/h,p)}else a===null?m=new c(r.count*l):m=new c(a,d,r.count*l),g=new Nt(m,l,p);if(r.sparse!==void 0){const v=uU.SCALAR,y=Ab[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,b=r.sparse.values.byteOffset||0,S=new y(o[1],x,r.sparse.count*v),A=new c(o[2],b,r.sparse.count*l);a!==null&&(g=new Nt(g.array.slice(),g.itemSize,g.normalized));for(let E=0,M=S.length;E<M;E++){const C=S[E];if(g.setX(C,A[E*l]),l>=2&&g.setY(C,A[E*l+1]),l>=3&&g.setZ(C,A[E*l+2]),l>=4&&g.setW(C,A[E*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const n=this.json,i=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,i){const r=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,i).then(function(h){h.flipY=!1,h.name=o.name||a.name||"";const d=(s.samplers||{})[o.sampler]||{};return h.magFilter=Uue[d.magFilter]||Ei,h.minFilter=Uue[d.minFilter]||Nc,h.wrapS=Gue[d.wrapS]||ku,h.wrapT=Gue[d.wrapT]||ku,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(u){c=!0;const d=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(u){return new Promise(function(d,f){let p=d;n.isImageBitmapLoader===!0&&(p=function(m){const g=new bi(m);g.needsUpdate=!0,d(g)}),n.load(vl.resolveURL(u,s.path),p,void 0,f)})}).then(function(u){return c===!0&&a.revokeObjectURL(l),u.userData.mimeType=o.mimeType||J9t(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=h,h}assignTexture(e,n,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord!=0&&!(n==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+n+" not yet supported."),s.extensions[Hn.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Hn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Hn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(o.encoding=r),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const r=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new ME,gr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new $s,gr.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&n.attributes.uv2===void 0&&n.attributes.uv!==void 0&&n.setAttribute("uv2",n.attributes.uv),e.material=i}getMaterialType(){return lg}loadMaterial(e){const n=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Hn.KHR_MATERIALS_UNLIT]){const u=r[Hn.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,s,n))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new nt(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const d=u.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}u.baseColorTexture!==void 0&&c.push(n.assignTexture(a,"map",u.baseColorTexture,xn)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Ec);const h=s.alphaMode||hU.OPAQUE;if(h===hU.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===hU.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==ls&&(c.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Me(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&o!==ls&&(c.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==ls&&(a.emissive=new nt().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==ls&&c.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,xn)),Promise.all(c).then(function(){const u=new o(a);return s.name&&(u.name=s.name),Vp(u,s),n.associations.set(u,{materials:e}),s.extensions&&hA(r,u,s),u})}createUniqueName(e){const n=zn.sanitizeNodeName(e||"");let i=n;for(let r=1;this.nodeNamesUsed[i];++r)i=n+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const n=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Hn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return jue(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],h=K9t(c),u=r[h];if(u)o.push(u.promise);else{let d;c.extensions&&c.extensions[Hn.KHR_DRACO_MESH_COMPRESSION]?d=s(c):d=jue(new yt,c,n),r[h]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const n=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const h=o[l].material===void 0?q9t(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),h=l[l.length-1],u=[];for(let f=0,p=h.length;f<p;f++){const m=h[f],g=o[f];let v;const y=c[f];if(g.mode===nc.TRIANGLES||g.mode===nc.TRIANGLE_STRIP||g.mode===nc.TRIANGLE_FAN||g.mode===void 0)v=s.isSkinnedMesh===!0?new UI(m,y):new Lr(m,y),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),g.mode===nc.TRIANGLE_STRIP?v.geometry=yne(v.geometry,II):g.mode===nc.TRIANGLE_FAN&&(v.geometry=yne(v.geometry,Hb));else if(g.mode===nc.LINES)v=new Tl(m,y);else if(g.mode===nc.LINE_STRIP)v=new td(m,y);else if(g.mode===nc.LINE_LOOP)v=new GI(m,y);else if(g.mode===nc.POINTS)v=new HI(m,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(v.geometry.morphAttributes).length>0&&Y9t(v,s),v.name=n.createUniqueName(s.name||"mesh_"+e),Vp(v,s),g.extensions&&hA(r,v,g),n.assignFinalMaterial(v),u.push(v)}for(let f=0,p=u.length;f<p;f++)n.associations.set(u[f],{meshes:e,primitives:f});if(u.length===1)return u[0];const d=new ba;n.associations.set(d,{meshes:e});for(let f=0,p=u.length;f<p;f++)d.add(u[f]);return d})}loadCamera(e){let n;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new Vr(zi.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new Uf(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),Vp(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i=[];for(let r=0,s=n.joints.length;r<s;r++)i.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",n.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,h=o.length;c<h;c++){const u=o[c];if(u){a.push(u);const d=new at;s!==null&&d.fromArray(s.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new Ew(a,l)})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],l=[];for(let c=0,h=i.channels.length;c<h;c++){const u=i.channels[c],d=i.samplers[u.sampler],f=u.target,p=f.node,m=i.parameters!==void 0?i.parameters[d.input]:d.input,g=i.parameters!==void 0?i.parameters[d.output]:d.output;r.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",g)),a.push(d),l.push(f)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],u=c[1],d=c[2],f=c[3],p=c[4],m=[];for(let v=0,y=h.length;v<y;v++){const x=h[v],b=u[v],S=d[v],A=f[v],E=p[v];if(x===void 0)continue;x.updateMatrix();let M;switch(Bp[E.path]){case Bp.weights:M=wv;break;case Bp.rotation:M=nd;break;case Bp.position:case Bp.scale:default:M=_v;break}const C=x.name?x.name:x.uuid,T=A.interpolation!==void 0?$9t[A.interpolation]:zf,D=[];Bp[E.path]===Bp.weights?x.traverse(function(I){I.morphTargetInfluences&&D.push(I.name?I.name:I.uuid)}):D.push(C);let L=S.array;if(S.normalized){const I=xV(L.constructor),R=new Float32Array(L.length);for(let H=0,Z=L.length;H<Z;H++)R[H]=L[H]*I;L=R}for(let I=0,R=D.length;I<R;I++){const H=new M(D[I]+"."+Bp[E.path],b.array,L,T);A.interpolation==="CUBICSPLINE"&&(H.createInterpolant=function(ee){const F=this instanceof nd?W9t:hMe;return new F(this.times,this.values,this.getValueSize()/3,ee)},H.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(H)}}const g=i.name?i.name:"animation_"+e;return new Sv(g,void 0,m)})}createNodeMesh(e){const n=this.json,i=this,r=n.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this.json,i=this,r=n.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,h=a.length;c<h;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const h=c[0],u=c[1],d=c[2];d!==null&&h.traverse(function(f){f.isSkinnedMesh&&f.bind(d,Z9t)});for(let f=0,p=u.length;f<p;f++)h.add(u[f]);return h})}_loadNodeShallow(e){const n=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let h;if(s.isBone===!0?h=new AE:c.length>1?h=new ba:c.length===1?h=c[0]:h=new wn,h!==c[0])for(let u=0,d=c.length;u<d;u++)h.add(c[u]);if(s.name&&(h.userData.name=s.name,h.name=o),Vp(h,s),s.extensions&&hA(i,h,s),s.matrix!==void 0){const u=new at;u.fromArray(s.matrix),h.applyMatrix4(u)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const n=this.extensions,i=this.json.scenes[e],r=this,s=new ba;i.name&&(s.name=r.createUniqueName(i.name)),Vp(s,i),i.extensions&&hA(n,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,u=l.length;h<u;h++)s.add(l[h]);const c=h=>{const u=new Map;for(const[d,f]of r.associations)(d instanceof gr||d instanceof bi)&&u.set(d,f);return h.traverse(d=>{const f=r.associations.get(d);f!=null&&u.set(d,f)}),u};return r.associations=c(s),s})}}function eWt(t,e,n){const i=e.attributes,r=new ao;if(i.POSITION!==void 0){const a=n.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new q(l[0],l[1],l[2]),new q(c[0],c[1],c[2])),a.normalized){const h=xV(Ab[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new q,l=new q;for(let c=0,h=s.length;c<h;c++){const u=s[c];if(u.POSITION!==void 0){const d=n.json.accessors[u.POSITION],f=d.min,p=d.max;if(f!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),d.normalized){const m=xV(Ab[d.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}t.boundingBox=r;const o=new Oo;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}function jue(t,e,n){const i=e.attributes,r=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in i){const a=yV[o]||o.toLowerCase();a in t.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});r.push(o)}return Vp(t,e),eWt(t,e,n),Promise.all(r).then(function(){return e.targets!==void 0?X9t(t,e.targets,n):t})}const Qd=({model:t,updateCurrent:e})=>{const n=Ml(Gt),i=$u(S9t,t.path),{nodes:r,materials:s}=_W(t.path),[o,a]=W.useState(null),l=tL(n.logoDecal),c=tL(n.fullDecal);console.log(r),console.log(s),W.useEffect(()=>{const f=`<svg width="64" height="64" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path fill="rgba(255, 255, 255, 0.5)" d="M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z" stroke="#000"/><g filter="url(#filter0_d)"><path d="M29.5 47C39.165 47 47 39.165 47 29.5S39.165 12 29.5 12 12 19.835 12 29.5 19.835 47 29.5 47z" fill="${n[o]}"/></g><path d="M2 2l11 2.947L4.947 13 2 2z" fill="#000"/><text fill="#000" style="white-space:pre" font-family="Inter var, sans-serif" font-size="10" letter-spacing="-.01em"><tspan x="35" y="63">${o}</tspan></text></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h64v64H0z"/></clipPath><filter id="filter0_d" x="6" y="8" width="47" height="47" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset dy="2"/><feGaussianBlur stdDeviation="3"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/><feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"/></filter></defs></svg>`;return o&&(document.body.style.cursor=`url('data:image/svg+xml;base64,${btoa(f)}'), auto`),()=>document.body.style.cursor="auto"},[o]);const h=()=>(console.log(i),ne("primitive",{object:i.scene,position:t.position,rotation:t.rotation,scale:t.scale})),u=W.useRef(),d=()=>(console.log(t.title),t.title=="Shoe"?et("group",{dispose:null,onPointerOver:f=>{f.stopPropagation(),a(f.object.material.name)},onPointerOut:f=>{f.intersections.length===0&&a(null)},onPointerDown:f=>{f.stopPropagation(),e(f.object.material.name)},onPointerMissed:()=>{e(null)},children:[ne("mesh",{castShadow:!0,"material-color":n.colors.laces,geometry:r.shoe.geometry,material:s.laces}),ne("mesh",{castShadow:!0,"material-color":n.colors.mesh,geometry:r.shoe_1.geometry,material:s.mesh}),ne("mesh",{castShadow:!0,"material-color":n.colors.caps,geometry:r.shoe_2.geometry,material:s.caps}),ne("mesh",{castShadow:!0,"material-color":n.colors.inner,geometry:r.shoe_3.geometry,material:s.inner}),ne("mesh",{castShadow:!0,"material-color":n.colors.sole,geometry:r.shoe_4.geometry,material:s.sole}),ne("mesh",{castShadow:!0,"material-color":n.colors.stripes,geometry:r.shoe_5.geometry,material:s.stripes}),ne("mesh",{castShadow:!0,"material-color":n.colors.band,geometry:r.shoe_6.geometry,material:s.band}),ne("mesh",{castShadow:!0,"material-color":n.colors.patch,geometry:r.shoe_7.geometry,material:s.patch})]}):t.title=="T-Shirt"?(console.log("fdsgsdfg"),ne("group",{children:et("mesh",{castShadow:!0,"material-color":n.TShirtColor,geometry:r.T_Shirt_male.geometry,material:s.lambert1,"material-roughness":1,dispose:null,children:[n.isFullTexture&&ne(mne,{position:[0,0,0],rotation:[0,0,0],scale:1.2,map:c}),n.isLogoTexture&&ne(mne,{position:[0,.04,.15],rotation:[0,0,0],scale:.15,map:l,"map-anisotropy":16,depthTest:!1,depthWrite:!0})]})})):ne(h,{}));return YI((f,p)=>{n.myItemShow=="TShirt"&&t.title=="TShirt"&&(console.log("TShirt"),bA.dampC(s.lambert1.color,n.TShirtColor,.25,p))}),ne("group",{ref:u,castShadow:!0,children:d()})},tWt=()=>{const t=Ml(Gt);W.useRef();const e=s=>{console.log(s),Gt.current=s},n=s=>{console.log(s)},i=()=>{if(t.page=="otherGift")switch(t.show){case"cup":return ne(Qd,{model:EM});case"shiba":return ne(Qd,{model:AM});case"ball":return ne(Qd,{model:MM});case"island":return ne(Qd,{model:CM});default:return ne(Qd,{model:Jo})}else if(t.page=="bidedItem")switch(console.log(t.myItemShow),t.myItemShow){case"shoe":return ne(Qd,{model:df,editable:!0,updateCurrent:e});case"TShirt":return ne(Qd,{model:TM,editable:!0,updateCurrent:n});default:return ne(Qd,{model:df,editable:!0,updateCurrent:e})}else return ne(Qd,{model:Jo})},r=()=>{if(t.page=="otherGift")switch(t.show){case"cup":return EM;case"shiba":return AM;case"ball":return MM;case"island":return CM;default:return Jo}else if(t.page=="bidedItem")switch(t.myItemShow){case"shoe":return df;case"TShirt":return TM;default:return df}else return Jo};return et(i$e,{shadows:!0,camera:{position:[0,0,0],fov:25},gl:{preserveDrawingBuffer:!0},className:"w-full max-w-full h-full transition-all ease-up",children:[ne("ambientLight",{intensity:.5}),ne(jrt,{preset:"city"}),et("mesh",{receiveShadow:!0,rotation:[-Math.PI/2,0,1.1],position:[0,-1,0],children:[ne("planeGeometry",{args:[100,100]}),ne("shadowMaterial",{opacity:.3})]}),ne(_9t,{Product:r(),children:ne(krt,{children:ne(Frt,{speed:1,rotationIntensity:1,floatIntensity:1,floatingRange:[0,.3],children:i()})})})]})},nWt=()=>{const t=qR();return et(qOe,{children:[et(MTe,{location:t,children:[ne(ef,{path:"/auction_house_project/",element:ne(MLe,{})}),ne(ef,{path:"/auction_house_project/signin",element:ne(mUe,{})}),ne(ef,{path:"/auction_house_project/signup",element:ne(gUe,{})}),ne(ef,{path:"/auction_house_project/auction",element:ne(v6t,{})}),ne(ef,{path:"/auction_house_project/otherGift",element:ne(y6t,{})}),ne(ef,{path:"/auction_house_project/bidedItem",element:ne(LK,{loginPath:"/auction_house_project/signin",children:ne(w9t,{})})}),ne(ef,{path:"/auction_house_project/profile",element:ne(LK,{loginPath:"/auction_house_project/signin",children:ne(f4t,{})})}),ne(ef,{path:"*",element:ne(rfe,{to:"/auction_house_project/"})})]},t.pathname),ne(tWt,{},"ship_canvas")]})};function iWt(){return ne("main",{className:"app transition-all ease-in",children:ne(ETe,{children:ne(nWt,{})})})}dU.createRoot(document.getElementById("root")).render(ne(ue.StrictMode,{children:ne(L$e,{maxSnack:3,children:ne(sfe,{authType:"cookie",authName:"_auth",cookieDomain:window.location.hostname,cookieSecure:!1,children:ne(iWt,{})})})}))});export default rWt();
